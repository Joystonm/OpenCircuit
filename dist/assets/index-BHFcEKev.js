var KI=Object.defineProperty;var q5=t=>{throw TypeError(t)};var QI=(t,e,n)=>e in t?KI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rs=(t,e,n)=>QI(t,typeof e!="symbol"?e+"":e,n),H_=(t,e,n)=>e.has(t)||q5("Cannot "+n);var q=(t,e,n)=>(H_(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?q5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),_e=(t,e,n,r)=>(H_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),tt=(t,e,n)=>(H_(t,e,"access private method"),n);var rm=(t,e,n,r)=>({set _(s){_e(t,e,s,n)},get _(){return q(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dP={exports:{}},U0={},fP={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lh=Symbol.for("react.element"),YI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),eA=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),iA=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),B5=Symbol.iterator;function aA(t){return t===null||typeof t!="object"?null:(t=B5&&t[B5]||t["@@iterator"],typeof t=="function"?t:null)}var hP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pP=Object.assign,mP={};function cd(t,e,n){this.props=t,this.context=e,this.refs=mP,this.updater=n||hP}cd.prototype.isReactComponent={};cd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gP(){}gP.prototype=cd.prototype;function xS(t,e,n){this.props=t,this.context=e,this.refs=mP,this.updater=n||hP}var NS=xS.prototype=new gP;NS.constructor=xS;pP(NS,cd.prototype);NS.isPureReactComponent=!0;var Z5=Array.isArray,yP=Object.prototype.hasOwnProperty,RS={current:null},vP={key:!0,ref:!0,__self:!0,__source:!0};function _P(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yP.call(e,r)&&!vP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Lh,type:t,key:i,ref:o,props:s,_owner:RS.current}}function lA(t,e){return{$$typeof:Lh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function OS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lh}function uA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var W5=/\/+/g;function q_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uA(""+t.key):e.toString(36)}function Km(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lh:case YI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+q_(o,0):r,Z5(s)?(n="",t!=null&&(n=t.replace(W5,"$&/")+"/"),Km(s,e,n,"",function(d){return d})):s!=null&&(OS(s)&&(s=lA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(W5,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Z5(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+q_(i,a);o+=Km(i,e,n,c,s)}else if(c=aA(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+q_(i,a++),o+=Km(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sm(t,e,n){if(t==null)return t;var r=[],s=0;return Km(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dr={current:null},Qm={transition:null},dA={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:Qm,ReactCurrentOwner:RS};function wP(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:sm,forEach:function(t,e,n){sm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sm(t,function(){e++}),e},toArray:function(t){return sm(t,function(e){return e})||[]},only:function(t){if(!OS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=cd;ct.Fragment=XI;ct.Profiler=eA;ct.PureComponent=xS;ct.StrictMode=JI;ct.Suspense=sA;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;ct.act=wP;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pP({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=RS.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)yP.call(e,c)&&!vP.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Lh,type:t.type,key:s,ref:i,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:nA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tA,_context:t},t.Consumer=t};ct.createElement=_P;ct.createFactory=function(t){var e=_P.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:rA,render:t}};ct.isValidElement=OS;ct.lazy=function(t){return{$$typeof:oA,_payload:{_status:-1,_result:t},_init:cA}};ct.memo=function(t,e){return{$$typeof:iA,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Qm.transition;Qm.transition={};try{t()}finally{Qm.transition=e}};ct.unstable_act=wP;ct.useCallback=function(t,e){return Dr.current.useCallback(t,e)};ct.useContext=function(t){return Dr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return Dr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return Dr.current.useEffect(t,e)};ct.useId=function(){return Dr.current.useId()};ct.useImperativeHandle=function(t,e,n){return Dr.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return Dr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return Dr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return Dr.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return Dr.current.useReducer(t,e,n)};ct.useRef=function(t){return Dr.current.useRef(t)};ct.useState=function(t){return Dr.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return Dr.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return Dr.current.useTransition()};ct.version="18.3.1";fP.exports=ct;var K=fP.exports;const Ie=Fh(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA=K,hA=Symbol.for("react.element"),pA=Symbol.for("react.fragment"),mA=Object.prototype.hasOwnProperty,gA=fA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yA={key:!0,ref:!0,__self:!0,__source:!0};function SP(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mA.call(e,r)&&!yA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hA,type:t,key:i,ref:o,props:s,_owner:gA.current}}U0.Fragment=pA;U0.jsx=SP;U0.jsxs=SP;dP.exports=U0;var R=dP.exports,J1={},kP={exports:{}},_s={},bP={exports:{}},EP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ue){var L=ee.length;ee.push(ue);e:for(;0<L;){var I=L-1>>>1,U=ee[I];if(0<s(U,ue))ee[I]=ue,ee[L]=U,L=I;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ue=ee[0],L=ee.pop();if(L!==ue){ee[0]=L;e:for(var I=0,U=ee.length,z=U>>>1;I<z;){var b=2*(I+1)-1,T=ee[b],M=b+1,O=ee[M];if(0>s(T,L))M<U&&0>s(O,T)?(ee[I]=O,ee[M]=L,I=M):(ee[I]=T,ee[b]=L,I=b);else if(M<U&&0>s(O,L))ee[I]=O,ee[M]=L,I=M;else break e}}return ue}function s(ee,ue){var L=ee.sortIndex-ue.sortIndex;return L!==0?L:ee.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,y=3,v=!1,_=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(ee){for(var ue=n(d);ue!==null;){if(ue.callback===null)r(d);else if(ue.startTime<=ee)r(d),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=n(d)}}function C(ee){if(E=!1,g(ee),!_)if(n(c)!==null)_=!0,ye($);else{var ue=n(d);ue!==null&&Pe(C,ue.startTime-ee)}}function $(ee,ue){_=!1,E&&(E=!1,p(A),A=-1),v=!0;var L=y;try{for(g(ue),m=n(c);m!==null&&(!(m.expirationTime>ue)||ee&&!H());){var I=m.callback;if(typeof I=="function"){m.callback=null,y=m.priorityLevel;var U=I(m.expirationTime<=ue);ue=t.unstable_now(),typeof U=="function"?m.callback=U:m===n(c)&&r(c),g(ue)}else r(c);m=n(c)}if(m!==null)var z=!0;else{var b=n(d);b!==null&&Pe(C,b.startTime-ue),z=!1}return z}finally{m=null,y=L,v=!1}}var N=!1,j=null,A=-1,G=5,V=-1;function H(){return!(t.unstable_now()-V<G)}function Q(){if(j!==null){var ee=t.unstable_now();V=ee;var ue=!0;try{ue=j(!0,ee)}finally{ue?ie():(N=!1,j=null)}}else N=!1}var ie;if(typeof w=="function")ie=function(){w(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=Q,ie=function(){ae.postMessage(null)}}else ie=function(){k(Q,0)};function ye(ee){j=ee,N||(N=!0,ie())}function Pe(ee,ue){A=k(function(){ee(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,ye($))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var L=y;y=ue;try{return ee()}finally{y=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ue){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var L=y;y=ee;try{return ue()}finally{y=L}},t.unstable_scheduleCallback=function(ee,ue,L){var I=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,ee){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=L+U,ee={id:f++,callback:ue,priorityLevel:ee,startTime:L,expirationTime:U,sortIndex:-1},L>I?(ee.sortIndex=L,e(d,ee),n(c)===null&&ee===n(d)&&(E?(p(A),A=-1):E=!0,Pe(C,L-I))):(ee.sortIndex=U,e(c,ee),_||v||(_=!0,ye($))),ee},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(ee){var ue=y;return function(){var L=y;y=ue;try{return ee.apply(this,arguments)}finally{y=L}}}})(EP);bP.exports=EP;var Of=bP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=K,gs=Of;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CP=new Set,sh={};function au(t,e){Gc(t,e),Gc(t+"Capture",e)}function Gc(t,e){for(sh[t]=e,t=0;t<e.length;t++)CP.add(e[t])}var Oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ew=Object.prototype.hasOwnProperty,_A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K5={},Q5={};function wA(t){return ew.call(Q5,t)?!0:ew.call(K5,t)?!1:_A.test(t)?Q5[t]=!0:(K5[t]=!0,!1)}function SA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kA(t,e,n,r){if(e===null||typeof e>"u"||SA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new Fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new Fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new Fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new Fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new Fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new Fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new Fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new Fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new Fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var IS=/[\-:]([a-z])/g;function AS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(IS,AS);ur[e]=new Fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(IS,AS);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(IS,AS);ur[e]=new Fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new Fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function MS(t,e,n,r){var s=ur.hasOwnProperty(e)?ur[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kA(e,n,s,r)&&(n=null),r||s===null?wA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fo=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,im=Symbol.for("react.element"),sc=Symbol.for("react.portal"),ic=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),tw=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),zS=Symbol.for("react.forward_ref"),nw=Symbol.for("react.suspense"),rw=Symbol.for("react.suspense_list"),DS=Symbol.for("react.memo"),la=Symbol.for("react.lazy"),TP=Symbol.for("react.offscreen"),Y5=Symbol.iterator;function Qd(t){return t===null||typeof t!="object"?null:(t=Y5&&t[Y5]||t["@@iterator"],typeof t=="function"?t:null)}var un=Object.assign,B_;function pf(t){if(B_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B_=e&&e[1]||""}return`
`+B_+t}var Z_=!1;function W_(t,e){if(!t||Z_)return"";Z_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Z_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pf(t):""}function bA(t){switch(t.tag){case 5:return pf(t.type);case 16:return pf("Lazy");case 13:return pf("Suspense");case 19:return pf("SuspenseList");case 0:case 2:case 15:return t=W_(t.type,!1),t;case 11:return t=W_(t.type.render,!1),t;case 1:return t=W_(t.type,!0),t;default:return""}}function sw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ic:return"Fragment";case sc:return"Portal";case tw:return"Profiler";case jS:return"StrictMode";case nw:return"Suspense";case rw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $P:return(t.displayName||"Context")+".Consumer";case PP:return(t._context.displayName||"Context")+".Provider";case zS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DS:return e=t.displayName||null,e!==null?e:sw(t.type)||"Memo";case la:e=t._payload,t=t._init;try{return sw(t(e))}catch{}}return null}function EA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sw(e);case 8:return e===jS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CA(t){var e=xP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function om(t){t._valueTracker||(t._valueTracker=CA(t))}function NP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iw(t,e){var n=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function X5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RP(t,e){e=e.checked,e!=null&&MS(t,"checked",e,!1)}function ow(t,e){RP(t,e);var n=Fa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?aw(t,e.type,n):e.hasOwnProperty("defaultValue")&&aw(t,e.type,Fa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function J5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function aw(t,e,n){(e!=="number"||Tg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mf=Array.isArray;function _c(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fa(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(mf(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fa(n)}}function OP(t,e){var n=Fa(e.value),r=Fa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var am,AP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(am=am||document.createElement("div"),am.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=am.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ih(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var If={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PA=["Webkit","ms","Moz","O"];Object.keys(If).forEach(function(t){PA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),If[e]=If[t]})});function MP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||If.hasOwnProperty(t)&&If[t]?(""+e).trim():e+"px"}function jP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=MP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $A=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cw(t,e){if(e){if($A[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function dw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fw=null;function FS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hw=null,wc=null,Sc=null;function nE(t){if(t=Gh(t)){if(typeof hw!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=B0(e),hw(t.stateNode,t.type,e))}}function zP(t){wc?Sc?Sc.push(t):Sc=[t]:wc=t}function DP(){if(wc){var t=wc,e=Sc;if(Sc=wc=null,nE(t),e)for(t=0;t<e.length;t++)nE(e[t])}}function FP(t,e){return t(e)}function LP(){}var K_=!1;function UP(t,e,n){if(K_)return t(e,n);K_=!0;try{return FP(t,e,n)}finally{K_=!1,(wc!==null||Sc!==null)&&(LP(),DP())}}function oh(t,e){var n=t.stateNode;if(n===null)return null;var r=B0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var pw=!1;if(Oo)try{var Yd={};Object.defineProperty(Yd,"passive",{get:function(){pw=!0}}),window.addEventListener("test",Yd,Yd),window.removeEventListener("test",Yd,Yd)}catch{pw=!1}function TA(t,e,n,r,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Af=!1,xg=null,Ng=!1,mw=null,xA={onError:function(t){Af=!0,xg=t}};function NA(t,e,n,r,s,i,o,a,c){Af=!1,xg=null,TA.apply(xA,arguments)}function RA(t,e,n,r,s,i,o,a,c){if(NA.apply(this,arguments),Af){if(Af){var d=xg;Af=!1,xg=null}else throw Error(fe(198));Ng||(Ng=!0,mw=d)}}function lu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rE(t){if(lu(t)!==t)throw Error(fe(188))}function OA(t){var e=t.alternate;if(!e){if(e=lu(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rE(s),t;if(i===r)return rE(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function GP(t){return t=OA(t),t!==null?HP(t):null}function HP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HP(t);if(e!==null)return e;t=t.sibling}return null}var qP=gs.unstable_scheduleCallback,sE=gs.unstable_cancelCallback,IA=gs.unstable_shouldYield,AA=gs.unstable_requestPaint,bn=gs.unstable_now,MA=gs.unstable_getCurrentPriorityLevel,LS=gs.unstable_ImmediatePriority,BP=gs.unstable_UserBlockingPriority,Rg=gs.unstable_NormalPriority,jA=gs.unstable_LowPriority,ZP=gs.unstable_IdlePriority,V0=null,Qi=null;function zA(t){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(V0,t,void 0,(t.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:LA,DA=Math.log,FA=Math.LN2;function LA(t){return t>>>=0,t===0?32:31-(DA(t)/FA|0)|0}var lm=64,um=4194304;function gf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Og(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gf(a):(i&=o,i!==0&&(r=gf(i)))}else o=n&~s,o!==0?r=gf(o):i!==0&&(r=gf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Si(e),s=1<<n,r|=t[n],e&=~s;return r}function UA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Si(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=UA(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function gw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WP(){var t=lm;return lm<<=1,!(lm&4194240)&&(lm=64),t}function Q_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Si(e),t[e]=n}function GA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Si(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function US(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Si(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Nt=0;function KP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QP,VS,YP,XP,JP,yw=!1,cm=[],Ta=null,xa=null,Na=null,ah=new Map,lh=new Map,fa=[],HA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iE(t,e){switch(t){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":ah.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lh.delete(e.pointerId)}}function Xd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Gh(e),e!==null&&VS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qA(t,e,n,r,s){switch(e){case"focusin":return Ta=Xd(Ta,t,e,n,r,s),!0;case"dragenter":return xa=Xd(xa,t,e,n,r,s),!0;case"mouseover":return Na=Xd(Na,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ah.set(i,Xd(ah.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,lh.set(i,Xd(lh.get(i)||null,t,e,n,r,s)),!0}return!1}function e$(t){var e=xl(t.target);if(e!==null){var n=lu(e);if(n!==null){if(e=n.tag,e===13){if(e=VP(n),e!==null){t.blockedOn=e,JP(t.priority,function(){YP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ym(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fw=r,n.target.dispatchEvent(r),fw=null}else return e=Gh(n),e!==null&&VS(e),t.blockedOn=n,!1;e.shift()}return!0}function oE(t,e,n){Ym(t)&&n.delete(e)}function BA(){yw=!1,Ta!==null&&Ym(Ta)&&(Ta=null),xa!==null&&Ym(xa)&&(xa=null),Na!==null&&Ym(Na)&&(Na=null),ah.forEach(oE),lh.forEach(oE)}function Jd(t,e){t.blockedOn===e&&(t.blockedOn=null,yw||(yw=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,BA)))}function uh(t){function e(s){return Jd(s,t)}if(0<cm.length){Jd(cm[0],t);for(var n=1;n<cm.length;n++){var r=cm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ta!==null&&Jd(Ta,t),xa!==null&&Jd(xa,t),Na!==null&&Jd(Na,t),ah.forEach(e),lh.forEach(e),n=0;n<fa.length;n++)r=fa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<fa.length&&(n=fa[0],n.blockedOn===null);)e$(n),n.blockedOn===null&&fa.shift()}var kc=Fo.ReactCurrentBatchConfig,Ig=!0;function ZA(t,e,n,r){var s=Nt,i=kc.transition;kc.transition=null;try{Nt=1,GS(t,e,n,r)}finally{Nt=s,kc.transition=i}}function WA(t,e,n,r){var s=Nt,i=kc.transition;kc.transition=null;try{Nt=4,GS(t,e,n,r)}finally{Nt=s,kc.transition=i}}function GS(t,e,n,r){if(Ig){var s=vw(t,e,n,r);if(s===null)o1(t,e,r,Ag,n),iE(t,r);else if(qA(s,t,e,n,r))r.stopPropagation();else if(iE(t,r),e&4&&-1<HA.indexOf(t)){for(;s!==null;){var i=Gh(s);if(i!==null&&QP(i),i=vw(t,e,n,r),i===null&&o1(t,e,r,Ag,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else o1(t,e,r,null,n)}}var Ag=null;function vw(t,e,n,r){if(Ag=null,t=FS(r),t=xl(t),t!==null)if(e=lu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ag=t,null}function t$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MA()){case LS:return 1;case BP:return 4;case Rg:case jA:return 16;case ZP:return 536870912;default:return 16}default:return 16}}var Ea=null,HS=null,Xm=null;function n$(){if(Xm)return Xm;var t,e=HS,n=e.length,r,s="value"in Ea?Ea.value:Ea.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xm=s.slice(t,1<r?1-r:void 0)}function Jm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dm(){return!0}function aE(){return!1}function ws(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?dm:aE,this.isPropagationStopped=aE,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dm)},persist:function(){},isPersistent:dm}),e}var dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qS=ws(dd),Vh=un({},dd,{view:0,detail:0}),KA=ws(Vh),Y_,X_,ef,G0=un({},Vh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ef&&(ef&&t.type==="mousemove"?(Y_=t.screenX-ef.screenX,X_=t.screenY-ef.screenY):X_=Y_=0,ef=t),Y_)},movementY:function(t){return"movementY"in t?t.movementY:X_}}),lE=ws(G0),QA=un({},G0,{dataTransfer:0}),YA=ws(QA),XA=un({},Vh,{relatedTarget:0}),J_=ws(XA),JA=un({},dd,{animationName:0,elapsedTime:0,pseudoElement:0}),eM=ws(JA),tM=un({},dd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nM=ws(tM),rM=un({},dd,{data:0}),uE=ws(rM),sM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aM(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oM[t])?!!e[t]:!1}function BS(){return aM}var lM=un({},Vh,{key:function(t){if(t.key){var e=sM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BS,charCode:function(t){return t.type==="keypress"?Jm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uM=ws(lM),cM=un({},G0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cE=ws(cM),dM=un({},Vh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BS}),fM=ws(dM),hM=un({},dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),pM=ws(hM),mM=un({},G0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gM=ws(mM),yM=[9,13,27,32],ZS=Oo&&"CompositionEvent"in window,Mf=null;Oo&&"documentMode"in document&&(Mf=document.documentMode);var vM=Oo&&"TextEvent"in window&&!Mf,r$=Oo&&(!ZS||Mf&&8<Mf&&11>=Mf),dE=" ",fE=!1;function s$(t,e){switch(t){case"keyup":return yM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oc=!1;function _M(t,e){switch(t){case"compositionend":return i$(e);case"keypress":return e.which!==32?null:(fE=!0,dE);case"textInput":return t=e.data,t===dE&&fE?null:t;default:return null}}function wM(t,e){if(oc)return t==="compositionend"||!ZS&&s$(t,e)?(t=n$(),Xm=HS=Ea=null,oc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r$&&e.locale!=="ko"?null:e.data;default:return null}}var SM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SM[t.type]:e==="textarea"}function o$(t,e,n,r){zP(r),e=Mg(e,"onChange"),0<e.length&&(n=new qS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jf=null,ch=null;function kM(t){y$(t,0)}function H0(t){var e=uc(t);if(NP(e))return t}function bM(t,e){if(t==="change")return e}var a$=!1;if(Oo){var e1;if(Oo){var t1="oninput"in document;if(!t1){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),t1=typeof pE.oninput=="function"}e1=t1}else e1=!1;a$=e1&&(!document.documentMode||9<document.documentMode)}function mE(){jf&&(jf.detachEvent("onpropertychange",l$),ch=jf=null)}function l$(t){if(t.propertyName==="value"&&H0(ch)){var e=[];o$(e,ch,t,FS(t)),UP(kM,e)}}function EM(t,e,n){t==="focusin"?(mE(),jf=e,ch=n,jf.attachEvent("onpropertychange",l$)):t==="focusout"&&mE()}function CM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return H0(ch)}function PM(t,e){if(t==="click")return H0(e)}function $M(t,e){if(t==="input"||t==="change")return H0(e)}function TM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:TM;function dh(t,e){if(Pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ew.call(e,s)||!Pi(t[s],e[s]))return!1}return!0}function gE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yE(t,e){var n=gE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gE(n)}}function u$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c$(){for(var t=window,e=Tg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tg(t.document)}return e}function WS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xM(t){var e=c$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u$(n.ownerDocument.documentElement,n)){if(r!==null&&WS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yE(n,i);var o=yE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NM=Oo&&"documentMode"in document&&11>=document.documentMode,ac=null,_w=null,zf=null,ww=!1;function vE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ww||ac==null||ac!==Tg(r)||(r=ac,"selectionStart"in r&&WS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zf&&dh(zf,r)||(zf=r,r=Mg(_w,"onSelect"),0<r.length&&(e=new qS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ac)))}function fm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lc={animationend:fm("Animation","AnimationEnd"),animationiteration:fm("Animation","AnimationIteration"),animationstart:fm("Animation","AnimationStart"),transitionend:fm("Transition","TransitionEnd")},n1={},d$={};Oo&&(d$=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function q0(t){if(n1[t])return n1[t];if(!lc[t])return t;var e=lc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d$)return n1[t]=e[n];return t}var f$=q0("animationend"),h$=q0("animationiteration"),p$=q0("animationstart"),m$=q0("transitionend"),g$=new Map,_E="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(t,e){g$.set(t,e),au(e,[t])}for(var r1=0;r1<_E.length;r1++){var s1=_E[r1],RM=s1.toLowerCase(),OM=s1[0].toUpperCase()+s1.slice(1);Ha(RM,"on"+OM)}Ha(f$,"onAnimationEnd");Ha(h$,"onAnimationIteration");Ha(p$,"onAnimationStart");Ha("dblclick","onDoubleClick");Ha("focusin","onFocus");Ha("focusout","onBlur");Ha(m$,"onTransitionEnd");Gc("onMouseEnter",["mouseout","mouseover"]);Gc("onMouseLeave",["mouseout","mouseover"]);Gc("onPointerEnter",["pointerout","pointerover"]);Gc("onPointerLeave",["pointerout","pointerover"]);au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));au("onBeforeInput",["compositionend","keypress","textInput","paste"]);au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IM=new Set("cancel close invalid load scroll toggle".split(" ").concat(yf));function wE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RA(r,e,void 0,t),t.currentTarget=null}function y$(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;wE(s,a,d),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;wE(s,a,d),i=c}}}if(Ng)throw t=mw,Ng=!1,mw=null,t}function qt(t,e){var n=e[Cw];n===void 0&&(n=e[Cw]=new Set);var r=t+"__bubble";n.has(r)||(v$(e,t,2,!1),n.add(r))}function i1(t,e,n){var r=0;e&&(r|=4),v$(n,t,r,e)}var hm="_reactListening"+Math.random().toString(36).slice(2);function fh(t){if(!t[hm]){t[hm]=!0,CP.forEach(function(n){n!=="selectionchange"&&(IM.has(n)||i1(n,!1,t),i1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hm]||(e[hm]=!0,i1("selectionchange",!1,e))}}function v$(t,e,n,r){switch(t$(e)){case 1:var s=ZA;break;case 4:s=WA;break;default:s=GS}n=s.bind(null,e,n,t),s=void 0,!pw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function o1(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UP(function(){var d=i,f=FS(n),m=[];e:{var y=g$.get(t);if(y!==void 0){var v=qS,_=t;switch(t){case"keypress":if(Jm(n)===0)break e;case"keydown":case"keyup":v=uM;break;case"focusin":_="focus",v=J_;break;case"focusout":_="blur",v=J_;break;case"beforeblur":case"afterblur":v=J_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=lE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=YA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=fM;break;case f$:case h$:case p$:v=eM;break;case m$:v=pM;break;case"scroll":v=KA;break;case"wheel":v=gM;break;case"copy":case"cut":case"paste":v=nM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=cE}var E=(e&4)!==0,k=!E&&t==="scroll",p=E?y!==null?y+"Capture":null:y;E=[];for(var w=d,g;w!==null;){g=w;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,p!==null&&(C=oh(w,p),C!=null&&E.push(hh(w,C,g)))),k)break;w=w.return}0<E.length&&(y=new v(y,_,null,n,f),m.push({event:y,listeners:E}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",y&&n!==fw&&(_=n.relatedTarget||n.fromElement)&&(xl(_)||_[Io]))break e;if((v||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=d,_=_?xl(_):null,_!==null&&(k=lu(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=d),v!==_)){if(E=lE,C="onMouseLeave",p="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=cE,C="onPointerLeave",p="onPointerEnter",w="pointer"),k=v==null?y:uc(v),g=_==null?y:uc(_),y=new E(C,w+"leave",v,n,f),y.target=k,y.relatedTarget=g,C=null,xl(f)===d&&(E=new E(p,w+"enter",_,n,f),E.target=g,E.relatedTarget=k,C=E),k=C,v&&_)t:{for(E=v,p=_,w=0,g=E;g;g=ju(g))w++;for(g=0,C=p;C;C=ju(C))g++;for(;0<w-g;)E=ju(E),w--;for(;0<g-w;)p=ju(p),g--;for(;w--;){if(E===p||p!==null&&E===p.alternate)break t;E=ju(E),p=ju(p)}E=null}else E=null;v!==null&&SE(m,y,v,E,!1),_!==null&&k!==null&&SE(m,k,_,E,!0)}}e:{if(y=d?uc(d):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var $=bM;else if(hE(y))if(a$)$=$M;else{$=CM;var N=EM}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&($=PM);if($&&($=$(t,d))){o$(m,$,n,f);break e}N&&N(t,y,d),t==="focusout"&&(N=y._wrapperState)&&N.controlled&&y.type==="number"&&aw(y,"number",y.value)}switch(N=d?uc(d):window,t){case"focusin":(hE(N)||N.contentEditable==="true")&&(ac=N,_w=d,zf=null);break;case"focusout":zf=_w=ac=null;break;case"mousedown":ww=!0;break;case"contextmenu":case"mouseup":case"dragend":ww=!1,vE(m,n,f);break;case"selectionchange":if(NM)break;case"keydown":case"keyup":vE(m,n,f)}var j;if(ZS)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else oc?s$(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(r$&&n.locale!=="ko"&&(oc||A!=="onCompositionStart"?A==="onCompositionEnd"&&oc&&(j=n$()):(Ea=f,HS="value"in Ea?Ea.value:Ea.textContent,oc=!0)),N=Mg(d,A),0<N.length&&(A=new uE(A,t,null,n,f),m.push({event:A,listeners:N}),j?A.data=j:(j=i$(n),j!==null&&(A.data=j)))),(j=vM?_M(t,n):wM(t,n))&&(d=Mg(d,"onBeforeInput"),0<d.length&&(f=new uE("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}y$(m,e)})}function hh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=oh(t,n),i!=null&&r.unshift(hh(t,i,s)),i=oh(t,e),i!=null&&r.push(hh(t,i,s))),t=t.return}return r}function ju(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=oh(n,i),c!=null&&o.unshift(hh(n,c,a))):s||(c=oh(n,i),c!=null&&o.push(hh(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AM=/\r\n?/g,MM=/\u0000|\uFFFD/g;function kE(t){return(typeof t=="string"?t:""+t).replace(AM,`
`).replace(MM,"")}function pm(t,e,n){if(e=kE(e),kE(t)!==e&&n)throw Error(fe(425))}function jg(){}var Sw=null,kw=null;function bw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ew=typeof setTimeout=="function"?setTimeout:void 0,jM=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,zM=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(t){return bE.resolve(null).then(t).catch(DM)}:Ew;function DM(t){setTimeout(function(){throw t})}function a1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),uh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);uh(e)}function Ra(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fd=Math.random().toString(36).slice(2),Vi="__reactFiber$"+fd,ph="__reactProps$"+fd,Io="__reactContainer$"+fd,Cw="__reactEvents$"+fd,FM="__reactListeners$"+fd,LM="__reactHandles$"+fd;function xl(t){var e=t[Vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Io]||n[Vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EE(t);t!==null;){if(n=t[Vi])return n;t=EE(t)}return e}t=n,n=t.parentNode}return null}function Gh(t){return t=t[Vi]||t[Io],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function B0(t){return t[ph]||null}var Pw=[],cc=-1;function qa(t){return{current:t}}function Wt(t){0>cc||(t.current=Pw[cc],Pw[cc]=null,cc--)}function Lt(t,e){cc++,Pw[cc]=t.current,t.current=e}var La={},Cr=qa(La),ns=qa(!1),ql=La;function Hc(t,e){var n=t.type.contextTypes;if(!n)return La;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rs(t){return t=t.childContextTypes,t!=null}function zg(){Wt(ns),Wt(Cr)}function CE(t,e,n){if(Cr.current!==La)throw Error(fe(168));Lt(Cr,e),Lt(ns,n)}function _$(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,EA(t)||"Unknown",s));return un({},n,r)}function Dg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||La,ql=Cr.current,Lt(Cr,t),Lt(ns,ns.current),!0}function PE(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=_$(t,e,ql),r.__reactInternalMemoizedMergedChildContext=t,Wt(ns),Wt(Cr),Lt(Cr,t)):Wt(ns),Lt(ns,n)}var yo=null,Z0=!1,l1=!1;function w$(t){yo===null?yo=[t]:yo.push(t)}function UM(t){Z0=!0,w$(t)}function Ba(){if(!l1&&yo!==null){l1=!0;var t=0,e=Nt;try{var n=yo;for(Nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yo=null,Z0=!1}catch(s){throw yo!==null&&(yo=yo.slice(t+1)),qP(LS,Ba),s}finally{Nt=e,l1=!1}}return null}var dc=[],fc=0,Fg=null,Lg=0,Ds=[],Fs=0,Bl=null,ko=1,bo="";function yl(t,e){dc[fc++]=Lg,dc[fc++]=Fg,Fg=t,Lg=e}function S$(t,e,n){Ds[Fs++]=ko,Ds[Fs++]=bo,Ds[Fs++]=Bl,Bl=t;var r=ko;t=bo;var s=32-Si(r)-1;r&=~(1<<s),n+=1;var i=32-Si(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ko=1<<32-Si(e)+s|n<<s|r,bo=i+t}else ko=1<<i|n<<s|r,bo=t}function KS(t){t.return!==null&&(yl(t,1),S$(t,1,0))}function QS(t){for(;t===Fg;)Fg=dc[--fc],dc[fc]=null,Lg=dc[--fc],dc[fc]=null;for(;t===Bl;)Bl=Ds[--Fs],Ds[Fs]=null,bo=Ds[--Fs],Ds[Fs]=null,ko=Ds[--Fs],Ds[Fs]=null}var ms=null,ps=null,Jt=!1,gi=null;function k$(t,e){var n=Ls(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $E(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ms=t,ps=Ra(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ms=t,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bl!==null?{id:ko,overflow:bo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ls(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ms=t,ps=null,!0):!1;default:return!1}}function $w(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tw(t){if(Jt){var e=ps;if(e){var n=e;if(!$E(t,e)){if($w(t))throw Error(fe(418));e=Ra(n.nextSibling);var r=ms;e&&$E(t,e)?k$(r,n):(t.flags=t.flags&-4097|2,Jt=!1,ms=t)}}else{if($w(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Jt=!1,ms=t}}}function TE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function mm(t){if(t!==ms)return!1;if(!Jt)return TE(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bw(t.type,t.memoizedProps)),e&&(e=ps)){if($w(t))throw b$(),Error(fe(418));for(;e;)k$(t,e),e=Ra(e.nextSibling)}if(TE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ps=Ra(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ps=null}}else ps=ms?Ra(t.stateNode.nextSibling):null;return!0}function b$(){for(var t=ps;t;)t=Ra(t.nextSibling)}function qc(){ps=ms=null,Jt=!1}function YS(t){gi===null?gi=[t]:gi.push(t)}var VM=Fo.ReactCurrentBatchConfig;function tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function gm(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xE(t){var e=t._init;return e(t._payload)}function E$(t){function e(p,w){if(t){var g=p.deletions;g===null?(p.deletions=[w],p.flags|=16):g.push(w)}}function n(p,w){if(!t)return null;for(;w!==null;)e(p,w),w=w.sibling;return null}function r(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function s(p,w){return p=Ma(p,w),p.index=0,p.sibling=null,p}function i(p,w,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<w?(p.flags|=2,w):g):(p.flags|=2,w)):(p.flags|=1048576,w)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,w,g,C){return w===null||w.tag!==6?(w=m1(g,p.mode,C),w.return=p,w):(w=s(w,g),w.return=p,w)}function c(p,w,g,C){var $=g.type;return $===ic?f(p,w,g.props.children,C,g.key):w!==null&&(w.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===la&&xE($)===w.type)?(C=s(w,g.props),C.ref=tf(p,w,g),C.return=p,C):(C=og(g.type,g.key,g.props,null,p.mode,C),C.ref=tf(p,w,g),C.return=p,C)}function d(p,w,g,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==g.containerInfo||w.stateNode.implementation!==g.implementation?(w=g1(g,p.mode,C),w.return=p,w):(w=s(w,g.children||[]),w.return=p,w)}function f(p,w,g,C,$){return w===null||w.tag!==7?(w=Hl(g,p.mode,C,$),w.return=p,w):(w=s(w,g),w.return=p,w)}function m(p,w,g){if(typeof w=="string"&&w!==""||typeof w=="number")return w=m1(""+w,p.mode,g),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case im:return g=og(w.type,w.key,w.props,null,p.mode,g),g.ref=tf(p,null,w),g.return=p,g;case sc:return w=g1(w,p.mode,g),w.return=p,w;case la:var C=w._init;return m(p,C(w._payload),g)}if(mf(w)||Qd(w))return w=Hl(w,p.mode,g,null),w.return=p,w;gm(p,w)}return null}function y(p,w,g,C){var $=w!==null?w.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return $!==null?null:a(p,w,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case im:return g.key===$?c(p,w,g,C):null;case sc:return g.key===$?d(p,w,g,C):null;case la:return $=g._init,y(p,w,$(g._payload),C)}if(mf(g)||Qd(g))return $!==null?null:f(p,w,g,C,null);gm(p,g)}return null}function v(p,w,g,C,$){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(g)||null,a(w,p,""+C,$);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case im:return p=p.get(C.key===null?g:C.key)||null,c(w,p,C,$);case sc:return p=p.get(C.key===null?g:C.key)||null,d(w,p,C,$);case la:var N=C._init;return v(p,w,g,N(C._payload),$)}if(mf(C)||Qd(C))return p=p.get(g)||null,f(w,p,C,$,null);gm(w,C)}return null}function _(p,w,g,C){for(var $=null,N=null,j=w,A=w=0,G=null;j!==null&&A<g.length;A++){j.index>A?(G=j,j=null):G=j.sibling;var V=y(p,j,g[A],C);if(V===null){j===null&&(j=G);break}t&&j&&V.alternate===null&&e(p,j),w=i(V,w,A),N===null?$=V:N.sibling=V,N=V,j=G}if(A===g.length)return n(p,j),Jt&&yl(p,A),$;if(j===null){for(;A<g.length;A++)j=m(p,g[A],C),j!==null&&(w=i(j,w,A),N===null?$=j:N.sibling=j,N=j);return Jt&&yl(p,A),$}for(j=r(p,j);A<g.length;A++)G=v(j,p,A,g[A],C),G!==null&&(t&&G.alternate!==null&&j.delete(G.key===null?A:G.key),w=i(G,w,A),N===null?$=G:N.sibling=G,N=G);return t&&j.forEach(function(H){return e(p,H)}),Jt&&yl(p,A),$}function E(p,w,g,C){var $=Qd(g);if(typeof $!="function")throw Error(fe(150));if(g=$.call(g),g==null)throw Error(fe(151));for(var N=$=null,j=w,A=w=0,G=null,V=g.next();j!==null&&!V.done;A++,V=g.next()){j.index>A?(G=j,j=null):G=j.sibling;var H=y(p,j,V.value,C);if(H===null){j===null&&(j=G);break}t&&j&&H.alternate===null&&e(p,j),w=i(H,w,A),N===null?$=H:N.sibling=H,N=H,j=G}if(V.done)return n(p,j),Jt&&yl(p,A),$;if(j===null){for(;!V.done;A++,V=g.next())V=m(p,V.value,C),V!==null&&(w=i(V,w,A),N===null?$=V:N.sibling=V,N=V);return Jt&&yl(p,A),$}for(j=r(p,j);!V.done;A++,V=g.next())V=v(j,p,A,V.value,C),V!==null&&(t&&V.alternate!==null&&j.delete(V.key===null?A:V.key),w=i(V,w,A),N===null?$=V:N.sibling=V,N=V);return t&&j.forEach(function(Q){return e(p,Q)}),Jt&&yl(p,A),$}function k(p,w,g,C){if(typeof g=="object"&&g!==null&&g.type===ic&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case im:e:{for(var $=g.key,N=w;N!==null;){if(N.key===$){if($=g.type,$===ic){if(N.tag===7){n(p,N.sibling),w=s(N,g.props.children),w.return=p,p=w;break e}}else if(N.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===la&&xE($)===N.type){n(p,N.sibling),w=s(N,g.props),w.ref=tf(p,N,g),w.return=p,p=w;break e}n(p,N);break}else e(p,N);N=N.sibling}g.type===ic?(w=Hl(g.props.children,p.mode,C,g.key),w.return=p,p=w):(C=og(g.type,g.key,g.props,null,p.mode,C),C.ref=tf(p,w,g),C.return=p,p=C)}return o(p);case sc:e:{for(N=g.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===g.containerInfo&&w.stateNode.implementation===g.implementation){n(p,w.sibling),w=s(w,g.children||[]),w.return=p,p=w;break e}else{n(p,w);break}else e(p,w);w=w.sibling}w=g1(g,p.mode,C),w.return=p,p=w}return o(p);case la:return N=g._init,k(p,w,N(g._payload),C)}if(mf(g))return _(p,w,g,C);if(Qd(g))return E(p,w,g,C);gm(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,w!==null&&w.tag===6?(n(p,w.sibling),w=s(w,g),w.return=p,p=w):(n(p,w),w=m1(g,p.mode,C),w.return=p,p=w),o(p)):n(p,w)}return k}var Bc=E$(!0),C$=E$(!1),Ug=qa(null),Vg=null,hc=null,XS=null;function JS(){XS=hc=Vg=null}function e4(t){var e=Ug.current;Wt(Ug),t._currentValue=e}function xw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bc(t,e){Vg=t,XS=hc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ts=!0),t.firstContext=null)}function Gs(t){var e=t._currentValue;if(XS!==t)if(t={context:t,memoizedValue:e,next:null},hc===null){if(Vg===null)throw Error(fe(308));hc=t,Vg.dependencies={lanes:0,firstContext:t}}else hc=hc.next=t;return e}var Nl=null;function t4(t){Nl===null?Nl=[t]:Nl.push(t)}function P$(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,t4(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ao(t,r)}function Ao(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ua=!1;function n4(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $$(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ao(t,n)}return s=r.interleaved,s===null?(e.next=e,t4(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ao(t,n)}function eg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,US(t,n)}}function NE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gg(t,e,n,r){var s=t.updateQueue;ua=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,f=d=c=null,a=i;do{var y=a.lane,v=a.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(y=e,v=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){m=_.call(v,m,y);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,y=typeof _=="function"?_.call(v,m,y):_,y==null)break e;m=un({},m,y);break e;case 2:ua=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[a]:y.push(a))}else v={eventTime:v,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=v,c=m):f=f.next=v,o|=y;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Wl|=o,t.lanes=o,t.memoizedState=m}}function RE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Hh={},Yi=qa(Hh),mh=qa(Hh),gh=qa(Hh);function Rl(t){if(t===Hh)throw Error(fe(174));return t}function r4(t,e){switch(Lt(gh,e),Lt(mh,t),Lt(Yi,Hh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uw(e,t)}Wt(Yi),Lt(Yi,e)}function Zc(){Wt(Yi),Wt(mh),Wt(gh)}function T$(t){Rl(gh.current);var e=Rl(Yi.current),n=uw(e,t.type);e!==n&&(Lt(mh,t),Lt(Yi,n))}function s4(t){mh.current===t&&(Wt(Yi),Wt(mh))}var an=qa(0);function Hg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var u1=[];function i4(){for(var t=0;t<u1.length;t++)u1[t]._workInProgressVersionPrimary=null;u1.length=0}var tg=Fo.ReactCurrentDispatcher,c1=Fo.ReactCurrentBatchConfig,Zl=0,ln=null,zn=null,Kn=null,qg=!1,Df=!1,yh=0,GM=0;function vr(){throw Error(fe(321))}function o4(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function a4(t,e,n,r,s,i){if(Zl=i,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tg.current=t===null||t.memoizedState===null?ZM:WM,t=n(r,s),Df){i=0;do{if(Df=!1,yh=0,25<=i)throw Error(fe(301));i+=1,Kn=zn=null,e.updateQueue=null,tg.current=KM,t=n(r,s)}while(Df)}if(tg.current=Bg,e=zn!==null&&zn.next!==null,Zl=0,Kn=zn=ln=null,qg=!1,e)throw Error(fe(300));return t}function l4(){var t=yh!==0;return yh=0,t}function Di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?ln.memoizedState=Kn=t:Kn=Kn.next=t,Kn}function Hs(){if(zn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=zn.next;var e=Kn===null?ln.memoizedState:Kn.next;if(e!==null)Kn=e,zn=t;else{if(t===null)throw Error(fe(310));zn=t,t={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Kn===null?ln.memoizedState=Kn=t:Kn=Kn.next=t}return Kn}function vh(t,e){return typeof e=="function"?e(t):e}function d1(t){var e=Hs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=zn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((Zl&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=r):c=c.next=m,ln.lanes|=f,Wl|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=a,Pi(r,e.memoizedState)||(ts=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ln.lanes|=i,Wl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function f1(t){var e=Hs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pi(i,e.memoizedState)||(ts=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x$(){}function N$(t,e){var n=ln,r=Hs(),s=e(),i=!Pi(r.memoizedState,s);if(i&&(r.memoizedState=s,ts=!0),r=r.queue,u4(I$.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Kn!==null&&Kn.memoizedState.tag&1){if(n.flags|=2048,_h(9,O$.bind(null,n,r,s,e),void 0,null),Yn===null)throw Error(fe(349));Zl&30||R$(n,e,s)}return s}function R$(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O$(t,e,n,r){e.value=n,e.getSnapshot=r,A$(e)&&M$(t)}function I$(t,e,n){return n(function(){A$(e)&&M$(t)})}function A$(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function M$(t){var e=Ao(t,1);e!==null&&ki(e,t,1,-1)}function OE(t){var e=Di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:t},e.queue=t,t=t.dispatch=BM.bind(null,ln,t),[e.memoizedState,t]}function _h(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function j$(){return Hs().memoizedState}function ng(t,e,n,r){var s=Di();ln.flags|=t,s.memoizedState=_h(1|e,n,void 0,r===void 0?null:r)}function W0(t,e,n,r){var s=Hs();r=r===void 0?null:r;var i=void 0;if(zn!==null){var o=zn.memoizedState;if(i=o.destroy,r!==null&&o4(r,o.deps)){s.memoizedState=_h(e,n,i,r);return}}ln.flags|=t,s.memoizedState=_h(1|e,n,i,r)}function IE(t,e){return ng(8390656,8,t,e)}function u4(t,e){return W0(2048,8,t,e)}function z$(t,e){return W0(4,2,t,e)}function D$(t,e){return W0(4,4,t,e)}function F$(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L$(t,e,n){return n=n!=null?n.concat([t]):null,W0(4,4,F$.bind(null,e,t),n)}function c4(){}function U$(t,e){var n=Hs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o4(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function V$(t,e){var n=Hs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o4(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function G$(t,e,n){return Zl&21?(Pi(n,e)||(n=WP(),ln.lanes|=n,Wl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ts=!0),t.memoizedState=n)}function HM(t,e){var n=Nt;Nt=n!==0&&4>n?n:4,t(!0);var r=c1.transition;c1.transition={};try{t(!1),e()}finally{Nt=n,c1.transition=r}}function H$(){return Hs().memoizedState}function qM(t,e,n){var r=Aa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q$(t))B$(e,n);else if(n=P$(t,e,n,r),n!==null){var s=Mr();ki(n,t,r,s),Z$(n,e,r)}}function BM(t,e,n){var r=Aa(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q$(t))B$(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pi(a,o)){var c=e.interleaved;c===null?(s.next=s,t4(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=P$(t,e,s,r),n!==null&&(s=Mr(),ki(n,t,r,s),Z$(n,e,r))}}function q$(t){var e=t.alternate;return t===ln||e!==null&&e===ln}function B$(t,e){Df=qg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,US(t,n)}}var Bg={readContext:Gs,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},ZM={readContext:Gs,useCallback:function(t,e){return Di().memoizedState=[t,e===void 0?null:e],t},useContext:Gs,useEffect:IE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ng(4194308,4,F$.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ng(4194308,4,t,e)},useInsertionEffect:function(t,e){return ng(4,2,t,e)},useMemo:function(t,e){var n=Di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qM.bind(null,ln,t),[r.memoizedState,t]},useRef:function(t){var e=Di();return t={current:t},e.memoizedState=t},useState:OE,useDebugValue:c4,useDeferredValue:function(t){return Di().memoizedState=t},useTransition:function(){var t=OE(!1),e=t[0];return t=HM.bind(null,t[1]),Di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ln,s=Di();if(Jt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Yn===null)throw Error(fe(349));Zl&30||R$(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,IE(I$.bind(null,r,i,t),[t]),r.flags|=2048,_h(9,O$.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Di(),e=Yn.identifierPrefix;if(Jt){var n=bo,r=ko;n=(r&~(1<<32-Si(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},WM={readContext:Gs,useCallback:U$,useContext:Gs,useEffect:u4,useImperativeHandle:L$,useInsertionEffect:z$,useLayoutEffect:D$,useMemo:V$,useReducer:d1,useRef:j$,useState:function(){return d1(vh)},useDebugValue:c4,useDeferredValue:function(t){var e=Hs();return G$(e,zn.memoizedState,t)},useTransition:function(){var t=d1(vh)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:x$,useSyncExternalStore:N$,useId:H$,unstable_isNewReconciler:!1},KM={readContext:Gs,useCallback:U$,useContext:Gs,useEffect:u4,useImperativeHandle:L$,useInsertionEffect:z$,useLayoutEffect:D$,useMemo:V$,useReducer:f1,useRef:j$,useState:function(){return f1(vh)},useDebugValue:c4,useDeferredValue:function(t){var e=Hs();return zn===null?e.memoizedState=t:G$(e,zn.memoizedState,t)},useTransition:function(){var t=f1(vh)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:x$,useSyncExternalStore:N$,useId:H$,unstable_isNewReconciler:!1};function fi(t,e){if(t&&t.defaultProps){e=un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var K0={isMounted:function(t){return(t=t._reactInternals)?lu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mr(),s=Aa(t),i=Eo(r,s);i.payload=e,n!=null&&(i.callback=n),e=Oa(t,i,s),e!==null&&(ki(e,t,s,r),eg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mr(),s=Aa(t),i=Eo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Oa(t,i,s),e!==null&&(ki(e,t,s,r),eg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mr(),r=Aa(t),s=Eo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Oa(t,s,r),e!==null&&(ki(e,t,r,n),eg(e,t,r))}};function AE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!dh(n,r)||!dh(s,i):!0}function W$(t,e,n){var r=!1,s=La,i=e.contextType;return typeof i=="object"&&i!==null?i=Gs(i):(s=rs(e)?ql:Cr.current,r=e.contextTypes,i=(r=r!=null)?Hc(t,s):La),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=K0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ME(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&K0.enqueueReplaceState(e,e.state,null)}function Rw(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},n4(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gs(i):(i=rs(e)?ql:Cr.current,s.context=Hc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nw(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&K0.enqueueReplaceState(s,s.state,null),Gg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Wc(t,e){try{var n="",r=e;do n+=bA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function h1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ow(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QM=typeof WeakMap=="function"?WeakMap:Map;function K$(t,e,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wg||(Wg=!0,Vw=r),Ow(t,e)},n}function Q$(t,e,n){n=Eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ow(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ow(t,e),typeof r!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cj.bind(null,t,e,n),e.then(t,t))}function zE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Eo(-1,1),e.tag=2,Oa(n,e,1))),n.lanes|=1),t)}var YM=Fo.ReactCurrentOwner,ts=!1;function Rr(t,e,n,r){e.child=t===null?C$(e,null,n,r):Bc(e,t.child,n,r)}function FE(t,e,n,r,s){n=n.render;var i=e.ref;return bc(e,s),r=a4(t,e,n,r,i,s),n=l4(),t!==null&&!ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mo(t,e,s)):(Jt&&n&&KS(e),e.flags|=1,Rr(t,e,r,s),e.child)}function LE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!v4(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y$(t,e,i,r,s)):(t=og(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:dh,n(o,r)&&t.ref===e.ref)return Mo(t,e,s)}return e.flags|=1,t=Ma(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(dh(i,r)&&t.ref===e.ref)if(ts=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ts=!0);else return e.lanes=t.lanes,Mo(t,e,s)}return Iw(t,e,n,r,s)}function X$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(mc,hs),hs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(mc,hs),hs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Lt(mc,hs),hs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Lt(mc,hs),hs|=r;return Rr(t,e,s,n),e.child}function J$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Iw(t,e,n,r,s){var i=rs(n)?ql:Cr.current;return i=Hc(e,i),bc(e,s),n=a4(t,e,n,r,i,s),r=l4(),t!==null&&!ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mo(t,e,s)):(Jt&&r&&KS(e),e.flags|=1,Rr(t,e,n,s),e.child)}function UE(t,e,n,r,s){if(rs(n)){var i=!0;Dg(e)}else i=!1;if(bc(e,s),e.stateNode===null)rg(t,e),W$(e,n,r),Rw(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gs(d):(d=rs(n)?ql:Cr.current,d=Hc(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&ME(e,o,r,d),ua=!1;var y=e.memoizedState;o.state=y,Gg(e,r,o,s),c=e.memoizedState,a!==r||y!==c||ns.current||ua?(typeof f=="function"&&(Nw(e,n,f,r),c=e.memoizedState),(a=ua||AE(e,n,a,r,y,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$$(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:fi(e.type,a),o.props=d,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gs(c):(c=rs(n)?ql:Cr.current,c=Hc(e,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||y!==c)&&ME(e,o,r,c),ua=!1,y=e.memoizedState,o.state=y,Gg(e,r,o,s);var _=e.memoizedState;a!==m||y!==_||ns.current||ua?(typeof v=="function"&&(Nw(e,n,v,r),_=e.memoizedState),(d=ua||AE(e,n,d,r,y,_,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Aw(t,e,n,r,i,s)}function Aw(t,e,n,r,s,i){J$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&PE(e,n,!1),Mo(t,e,i);r=e.stateNode,YM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bc(e,t.child,null,i),e.child=Bc(e,null,a,i)):Rr(t,e,a,i),e.memoizedState=r.state,s&&PE(e,n,!0),e.child}function eT(t){var e=t.stateNode;e.pendingContext?CE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CE(t,e.context,!1),r4(t,e.containerInfo)}function VE(t,e,n,r,s){return qc(),YS(s),e.flags|=256,Rr(t,e,n,r),e.child}var Mw={dehydrated:null,treeContext:null,retryLane:0};function jw(t){return{baseLanes:t,cachePool:null,transitions:null}}function tT(t,e,n){var r=e.pendingProps,s=an.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Lt(an,s&1),t===null)return Tw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=X0(o,r,0,null),t=Hl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jw(n),e.memoizedState=Mw,t):d4(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return XM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ma(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ma(a,i):(i=Hl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?jw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Mw,r}return i=t.child,t=i.sibling,r=Ma(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function d4(t,e){return e=X0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ym(t,e,n,r){return r!==null&&YS(r),Bc(e,t.child,null,n),t=d4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=h1(Error(fe(422))),ym(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=X0({mode:"visible",children:r.children},s,0,null),i=Hl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bc(e,t.child,null,o),e.child.memoizedState=jw(o),e.memoizedState=Mw,i);if(!(e.mode&1))return ym(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(fe(419)),r=h1(i,r,void 0),ym(t,e,o,r)}if(a=(o&t.childLanes)!==0,ts||a){if(r=Yn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ao(t,s),ki(r,t,s,-1))}return y4(),r=h1(Error(fe(421))),ym(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ps=Ra(s.nextSibling),ms=e,Jt=!0,gi=null,t!==null&&(Ds[Fs++]=ko,Ds[Fs++]=bo,Ds[Fs++]=Bl,ko=t.id,bo=t.overflow,Bl=e),e=d4(e,r.children),e.flags|=4096,e)}function GE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xw(t.return,e,n)}function p1(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function nT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rr(t,e,r.children,n),r=an.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GE(t,n,e);else if(t.tag===19)GE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(an,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Hg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),p1(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Hg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}p1(e,!0,n,null,i);break;case"together":p1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Ma(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ma(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JM(t,e,n){switch(e.tag){case 3:eT(e),qc();break;case 5:T$(e);break;case 1:rs(e.type)&&Dg(e);break;case 4:r4(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Lt(Ug,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Lt(an,an.current&1),e.flags|=128,null):n&e.child.childLanes?tT(t,e,n):(Lt(an,an.current&1),t=Mo(t,e,n),t!==null?t.sibling:null);Lt(an,an.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Lt(an,an.current),r)break;return null;case 22:case 23:return e.lanes=0,X$(t,e,n)}return Mo(t,e,n)}var rT,zw,sT,iT;rT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zw=function(){};sT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rl(Yi.current);var i=null;switch(n){case"input":s=iw(t,s),r=iw(t,r),i=[];break;case"select":s=un({},s,{value:void 0}),r=un({},r,{value:void 0}),i=[];break;case"textarea":s=lw(t,s),r=lw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jg)}cw(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(sh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(sh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&qt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};iT=function(t,e,n,r){n!==r&&(e.flags|=4)};function nf(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ej(t,e,n){var r=e.pendingProps;switch(QS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return rs(e.type)&&zg(),_r(e),null;case 3:return r=e.stateNode,Zc(),Wt(ns),Wt(Cr),i4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gi!==null&&(qw(gi),gi=null))),zw(t,e),_r(e),null;case 5:s4(e);var s=Rl(gh.current);if(n=e.type,t!==null&&e.stateNode!=null)sT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return _r(e),null}if(t=Rl(Yi.current),mm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vi]=e,r[ph]=i,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(s=0;s<yf.length;s++)qt(yf[s],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":X5(r,i),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qt("invalid",r);break;case"textarea":eE(r,i),qt("invalid",r)}cw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&pm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&pm(r.textContent,a,t),s=["children",""+a]):sh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",r)}switch(n){case"input":om(r),J5(r,i,!0);break;case"textarea":om(r),tE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jg)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vi]=e,t[ph]=r,rT(t,e,!1,!1),e.stateNode=t;e:{switch(o=dw(n,r),n){case"dialog":qt("cancel",t),qt("close",t),s=r;break;case"iframe":case"object":case"embed":qt("load",t),s=r;break;case"video":case"audio":for(s=0;s<yf.length;s++)qt(yf[s],t);s=r;break;case"source":qt("error",t),s=r;break;case"img":case"image":case"link":qt("error",t),qt("load",t),s=r;break;case"details":qt("toggle",t),s=r;break;case"input":X5(t,r),s=iw(t,r),qt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=un({},r,{value:void 0}),qt("invalid",t);break;case"textarea":eE(t,r),s=lw(t,r),qt("invalid",t);break;default:s=r}cw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?jP(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AP(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ih(t,c):typeof c=="number"&&ih(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(sh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&qt("scroll",t):c!=null&&MS(t,i,c,o))}switch(n){case"input":om(t),J5(t,r,!1);break;case"textarea":om(t),tE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fa(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_c(t,!!r.multiple,i,!1):r.defaultValue!=null&&_c(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)iT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Rl(gh.current),Rl(Yi.current),mm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vi]=e,(i=r.nodeValue!==n)&&(t=ms,t!==null))switch(t.tag){case 3:pm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vi]=e,e.stateNode=r}return _r(e),null;case 13:if(Wt(an),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&ps!==null&&e.mode&1&&!(e.flags&128))b$(),qc(),e.flags|=98560,i=!1;else if(i=mm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[Vi]=e}else qc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),i=!1}else gi!==null&&(qw(gi),gi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||an.current&1?Un===0&&(Un=3):y4())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return Zc(),zw(t,e),t===null&&fh(e.stateNode.containerInfo),_r(e),null;case 10:return e4(e.type._context),_r(e),null;case 17:return rs(e.type)&&zg(),_r(e),null;case 19:if(Wt(an),i=e.memoizedState,i===null)return _r(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)nf(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hg(t),o!==null){for(e.flags|=128,nf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(an,an.current&1|2),e.child}t=t.sibling}i.tail!==null&&bn()>Kc&&(e.flags|=128,r=!0,nf(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Jt)return _r(e),null}else 2*bn()-i.renderingStartTime>Kc&&n!==1073741824&&(e.flags|=128,r=!0,nf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=bn(),e.sibling=null,n=an.current,Lt(an,r?n&1|2:n&1),e):(_r(e),null);case 22:case 23:return g4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hs&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function tj(t,e){switch(QS(e),e.tag){case 1:return rs(e.type)&&zg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zc(),Wt(ns),Wt(Cr),i4(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s4(e),null;case 13:if(Wt(an),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));qc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(an),null;case 4:return Zc(),null;case 10:return e4(e.type._context),null;case 22:case 23:return g4(),null;case 24:return null;default:return null}}var vm=!1,Er=!1,nj=typeof WeakSet=="function"?WeakSet:Set,Te=null;function pc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function Dw(t,e,n){try{n()}catch(r){pn(t,e,r)}}var HE=!1;function rj(t,e){if(Sw=Ig,t=c$(),WS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,y=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)y=m,m=v;for(;;){if(m===t)break t;if(y===n&&++d===s&&(a=o),y===i&&++f===r&&(c=o),(v=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kw={focusedElem:t,selectionRange:n},Ig=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,k=_.memoizedState,p=e.stateNode,w=p.getSnapshotBeforeUpdate(e.elementType===e.type?E:fi(e.type,E),k);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(C){pn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return _=HE,HE=!1,_}function Ff(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dw(e,n,i)}s=s.next}while(s!==r)}}function Q0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oT(t){var e=t.alternate;e!==null&&(t.alternate=null,oT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vi],delete e[ph],delete e[Cw],delete e[FM],delete e[LM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aT(t){return t.tag===5||t.tag===3||t.tag===4}function qE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jg));else if(r!==4&&(t=t.child,t!==null))for(Lw(t,e,n),t=t.sibling;t!==null;)Lw(t,e,n),t=t.sibling}function Uw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uw(t,e,n),t=t.sibling;t!==null;)Uw(t,e,n),t=t.sibling}var rr=null,mi=!1;function ea(t,e,n){for(n=n.child;n!==null;)lT(t,e,n),n=n.sibling}function lT(t,e,n){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(V0,n)}catch{}switch(n.tag){case 5:Er||pc(n,e);case 6:var r=rr,s=mi;rr=null,ea(t,e,n),rr=r,mi=s,rr!==null&&(mi?(t=rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(mi?(t=rr,n=n.stateNode,t.nodeType===8?a1(t.parentNode,n):t.nodeType===1&&a1(t,n),uh(t)):a1(rr,n.stateNode));break;case 4:r=rr,s=mi,rr=n.stateNode.containerInfo,mi=!0,ea(t,e,n),rr=r,mi=s;break;case 0:case 11:case 14:case 15:if(!Er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dw(n,e,o),s=s.next}while(s!==r)}ea(t,e,n);break;case 1:if(!Er&&(pc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pn(n,e,a)}ea(t,e,n);break;case 21:ea(t,e,n);break;case 22:n.mode&1?(Er=(r=Er)||n.memoizedState!==null,ea(t,e,n),Er=r):ea(t,e,n);break;default:ea(t,e,n)}}function BE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nj),e.forEach(function(r){var s=fj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ni(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rr=a.stateNode,mi=!1;break e;case 3:rr=a.stateNode.containerInfo,mi=!0;break e;case 4:rr=a.stateNode.containerInfo,mi=!0;break e}a=a.return}if(rr===null)throw Error(fe(160));lT(i,o,s),rr=null,mi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){pn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uT(e,t),e=e.sibling}function uT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(e,t),zi(t),r&4){try{Ff(3,t,t.return),Q0(3,t)}catch(E){pn(t,t.return,E)}try{Ff(5,t,t.return)}catch(E){pn(t,t.return,E)}}break;case 1:ni(e,t),zi(t),r&512&&n!==null&&pc(n,n.return);break;case 5:if(ni(e,t),zi(t),r&512&&n!==null&&pc(n,n.return),t.flags&32){var s=t.stateNode;try{ih(s,"")}catch(E){pn(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&RP(s,i),dw(a,o);var d=dw(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?jP(s,m):f==="dangerouslySetInnerHTML"?AP(s,m):f==="children"?ih(s,m):MS(s,f,m,d)}switch(a){case"input":ow(s,i);break;case"textarea":OP(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?_c(s,!!i.multiple,v,!1):y!==!!i.multiple&&(i.defaultValue!=null?_c(s,!!i.multiple,i.defaultValue,!0):_c(s,!!i.multiple,i.multiple?[]:"",!1))}s[ph]=i}catch(E){pn(t,t.return,E)}}break;case 6:if(ni(e,t),zi(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){pn(t,t.return,E)}}break;case 3:if(ni(e,t),zi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uh(e.containerInfo)}catch(E){pn(t,t.return,E)}break;case 4:ni(e,t),zi(t);break;case 13:ni(e,t),zi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(p4=bn())),r&4&&BE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Er=(d=Er)||f,ni(e,t),Er=d):ni(e,t),zi(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Te=t,f=t.child;f!==null;){for(m=Te=f;Te!==null;){switch(y=Te,v=y.child,y.tag){case 0:case 11:case 14:case 15:Ff(4,y,y.return);break;case 1:pc(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){pn(r,n,E)}}break;case 5:pc(y,y.return);break;case 22:if(y.memoizedState!==null){WE(m);continue}}v!==null?(v.return=y,Te=v):WE(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=MP("display",o))}catch(E){pn(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){pn(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ni(e,t),zi(t),r&4&&BE(t);break;case 21:break;default:ni(e,t),zi(t)}}function zi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aT(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ih(s,""),r.flags&=-33);var i=qE(t);Uw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qE(t);Lw(t,a,o);break;default:throw Error(fe(161))}}catch(c){pn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sj(t,e,n){Te=t,cT(t)}function cT(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||vm;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Er;a=vm;var d=Er;if(vm=o,(Er=c)&&!d)for(Te=s;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?KE(s):c!==null?(c.return=o,Te=c):KE(s);for(;i!==null;)Te=i,cT(i),i=i.sibling;Te=s,vm=a,Er=d}ZE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):ZE(t)}}function ZE(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||Q0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Er)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&RE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&uh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Er||e.flags&512&&Fw(e)}catch(y){pn(e,e.return,y)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function WE(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function KE(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Q0(4,e)}catch(c){pn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pn(e,s,c)}}var i=e.return;try{Fw(e)}catch(c){pn(e,i,c)}break;case 5:var o=e.return;try{Fw(e)}catch(c){pn(e,o,c)}}}catch(c){pn(e,e.return,c)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var ij=Math.ceil,Zg=Fo.ReactCurrentDispatcher,f4=Fo.ReactCurrentOwner,Vs=Fo.ReactCurrentBatchConfig,vt=0,Yn=null,Tn=null,lr=0,hs=0,mc=qa(0),Un=0,wh=null,Wl=0,Y0=0,h4=0,Lf=null,Xr=null,p4=0,Kc=1/0,go=null,Wg=!1,Vw=null,Ia=null,_m=!1,Ca=null,Kg=0,Uf=0,Gw=null,sg=-1,ig=0;function Mr(){return vt&6?bn():sg!==-1?sg:sg=bn()}function Aa(t){return t.mode&1?vt&2&&lr!==0?lr&-lr:VM.transition!==null?(ig===0&&(ig=WP()),ig):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:t$(t.type)),t):1}function ki(t,e,n,r){if(50<Uf)throw Uf=0,Gw=null,Error(fe(185));Uh(t,n,r),(!(vt&2)||t!==Yn)&&(t===Yn&&(!(vt&2)&&(Y0|=n),Un===4&&ha(t,lr)),ss(t,r),n===1&&vt===0&&!(e.mode&1)&&(Kc=bn()+500,Z0&&Ba()))}function ss(t,e){var n=t.callbackNode;VA(t,e);var r=Og(t,t===Yn?lr:0);if(r===0)n!==null&&sE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sE(n),e===1)t.tag===0?UM(QE.bind(null,t)):w$(QE.bind(null,t)),zM(function(){!(vt&6)&&Ba()}),n=null;else{switch(KP(r)){case 1:n=LS;break;case 4:n=BP;break;case 16:n=Rg;break;case 536870912:n=ZP;break;default:n=Rg}n=vT(n,dT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dT(t,e){if(sg=-1,ig=0,vt&6)throw Error(fe(327));var n=t.callbackNode;if(Ec()&&t.callbackNode!==n)return null;var r=Og(t,t===Yn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qg(t,r);else{e=r;var s=vt;vt|=2;var i=hT();(Yn!==t||lr!==e)&&(go=null,Kc=bn()+500,Gl(t,e));do try{lj();break}catch(a){fT(t,a)}while(!0);JS(),Zg.current=i,vt=s,Tn!==null?e=0:(Yn=null,lr=0,e=Un)}if(e!==0){if(e===2&&(s=gw(t),s!==0&&(r=s,e=Hw(t,s))),e===1)throw n=wh,Gl(t,0),ha(t,r),ss(t,bn()),n;if(e===6)ha(t,r);else{if(s=t.current.alternate,!(r&30)&&!oj(s)&&(e=Qg(t,r),e===2&&(i=gw(t),i!==0&&(r=i,e=Hw(t,i))),e===1))throw n=wh,Gl(t,0),ha(t,r),ss(t,bn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:vl(t,Xr,go);break;case 3:if(ha(t,r),(r&130023424)===r&&(e=p4+500-bn(),10<e)){if(Og(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ew(vl.bind(null,t,Xr,go),e);break}vl(t,Xr,go);break;case 4:if(ha(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Si(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=bn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ij(r/1960))-r,10<r){t.timeoutHandle=Ew(vl.bind(null,t,Xr,go),r);break}vl(t,Xr,go);break;case 5:vl(t,Xr,go);break;default:throw Error(fe(329))}}}return ss(t,bn()),t.callbackNode===n?dT.bind(null,t):null}function Hw(t,e){var n=Lf;return t.current.memoizedState.isDehydrated&&(Gl(t,e).flags|=256),t=Qg(t,e),t!==2&&(e=Xr,Xr=n,e!==null&&qw(e)),t}function qw(t){Xr===null?Xr=t:Xr.push.apply(Xr,t)}function oj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ha(t,e){for(e&=~h4,e&=~Y0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Si(e),r=1<<n;t[n]=-1,e&=~r}}function QE(t){if(vt&6)throw Error(fe(327));Ec();var e=Og(t,0);if(!(e&1))return ss(t,bn()),null;var n=Qg(t,e);if(t.tag!==0&&n===2){var r=gw(t);r!==0&&(e=r,n=Hw(t,r))}if(n===1)throw n=wh,Gl(t,0),ha(t,e),ss(t,bn()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vl(t,Xr,go),ss(t,bn()),null}function m4(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Kc=bn()+500,Z0&&Ba())}}function Kl(t){Ca!==null&&Ca.tag===0&&!(vt&6)&&Ec();var e=vt;vt|=1;var n=Vs.transition,r=Nt;try{if(Vs.transition=null,Nt=1,t)return t()}finally{Nt=r,Vs.transition=n,vt=e,!(vt&6)&&Ba()}}function g4(){hs=mc.current,Wt(mc)}function Gl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jM(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(QS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zg();break;case 3:Zc(),Wt(ns),Wt(Cr),i4();break;case 5:s4(r);break;case 4:Zc();break;case 13:Wt(an);break;case 19:Wt(an);break;case 10:e4(r.type._context);break;case 22:case 23:g4()}n=n.return}if(Yn=t,Tn=t=Ma(t.current,null),lr=hs=e,Un=0,wh=null,h4=Y0=Wl=0,Xr=Lf=null,Nl!==null){for(e=0;e<Nl.length;e++)if(n=Nl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Nl=null}return t}function fT(t,e){do{var n=Tn;try{if(JS(),tg.current=Bg,qg){for(var r=ln.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qg=!1}if(Zl=0,Kn=zn=ln=null,Df=!1,yh=0,f4.current=null,n===null||n.return===null){Un=1,wh=e,Tn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=lr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=zE(o);if(v!==null){v.flags&=-257,DE(v,o,a,i,e),v.mode&1&&jE(i,d,e),e=v,c=d;var _=e.updateQueue;if(_===null){var E=new Set;E.add(c),e.updateQueue=E}else _.add(c);break e}else{if(!(e&1)){jE(i,d,e),y4();break e}c=Error(fe(426))}}else if(Jt&&a.mode&1){var k=zE(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),DE(k,o,a,i,e),YS(Wc(c,a));break e}}i=c=Wc(c,a),Un!==4&&(Un=2),Lf===null?Lf=[i]:Lf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=K$(i,c,e);NE(i,p);break e;case 1:a=c;var w=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ia===null||!Ia.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Q$(i,a,e);NE(i,C);break e}}i=i.return}while(i!==null)}mT(n)}catch($){e=$,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(!0)}function hT(){var t=Zg.current;return Zg.current=Bg,t===null?Bg:t}function y4(){(Un===0||Un===3||Un===2)&&(Un=4),Yn===null||!(Wl&268435455)&&!(Y0&268435455)||ha(Yn,lr)}function Qg(t,e){var n=vt;vt|=2;var r=hT();(Yn!==t||lr!==e)&&(go=null,Gl(t,e));do try{aj();break}catch(s){fT(t,s)}while(!0);if(JS(),vt=n,Zg.current=r,Tn!==null)throw Error(fe(261));return Yn=null,lr=0,Un}function aj(){for(;Tn!==null;)pT(Tn)}function lj(){for(;Tn!==null&&!IA();)pT(Tn)}function pT(t){var e=yT(t.alternate,t,hs);t.memoizedProps=t.pendingProps,e===null?mT(t):Tn=e,f4.current=null}function mT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tj(n,e),n!==null){n.flags&=32767,Tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,Tn=null;return}}else if(n=ej(n,e,hs),n!==null){Tn=n;return}if(e=e.sibling,e!==null){Tn=e;return}Tn=e=t}while(e!==null);Un===0&&(Un=5)}function vl(t,e,n){var r=Nt,s=Vs.transition;try{Vs.transition=null,Nt=1,uj(t,e,n,r)}finally{Vs.transition=s,Nt=r}return null}function uj(t,e,n,r){do Ec();while(Ca!==null);if(vt&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GA(t,i),t===Yn&&(Tn=Yn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_m||(_m=!0,vT(Rg,function(){return Ec(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vs.transition,Vs.transition=null;var o=Nt;Nt=1;var a=vt;vt|=4,f4.current=null,rj(t,n),uT(n,t),xM(kw),Ig=!!Sw,kw=Sw=null,t.current=n,sj(n),AA(),vt=a,Nt=o,Vs.transition=i}else t.current=n;if(_m&&(_m=!1,Ca=t,Kg=s),i=t.pendingLanes,i===0&&(Ia=null),zA(n.stateNode),ss(t,bn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wg)throw Wg=!1,t=Vw,Vw=null,t;return Kg&1&&t.tag!==0&&Ec(),i=t.pendingLanes,i&1?t===Gw?Uf++:(Uf=0,Gw=t):Uf=0,Ba(),null}function Ec(){if(Ca!==null){var t=KP(Kg),e=Vs.transition,n=Nt;try{if(Vs.transition=null,Nt=16>t?16:t,Ca===null)var r=!1;else{if(t=Ca,Ca=null,Kg=0,vt&6)throw Error(fe(331));var s=vt;for(vt|=4,Te=t.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(Te=d;Te!==null;){var f=Te;switch(f.tag){case 0:case 11:case 15:Ff(8,f,i)}var m=f.child;if(m!==null)m.return=f,Te=m;else for(;Te!==null;){f=Te;var y=f.sibling,v=f.return;if(oT(f),f===d){Te=null;break}if(y!==null){y.return=v,Te=y;break}Te=v}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ff(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Te=p;break e}Te=i.return}}var w=t.current;for(Te=w;Te!==null;){o=Te;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,Te=g;else e:for(o=w;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Q0(9,a)}}catch($){pn(a,a.return,$)}if(a===o){Te=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Te=C;break e}Te=a.return}}if(vt=s,Ba(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(V0,t)}catch{}r=!0}return r}finally{Nt=n,Vs.transition=e}}return!1}function YE(t,e,n){e=Wc(n,e),e=K$(t,e,1),t=Oa(t,e,1),e=Mr(),t!==null&&(Uh(t,1,e),ss(t,e))}function pn(t,e,n){if(t.tag===3)YE(t,t,n);else for(;e!==null;){if(e.tag===3){YE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ia===null||!Ia.has(r))){t=Wc(n,t),t=Q$(e,t,1),e=Oa(e,t,1),t=Mr(),e!==null&&(Uh(e,1,t),ss(e,t));break}}e=e.return}}function cj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(lr&n)===n&&(Un===4||Un===3&&(lr&130023424)===lr&&500>bn()-p4?Gl(t,0):h4|=n),ss(t,e)}function gT(t,e){e===0&&(t.mode&1?(e=um,um<<=1,!(um&130023424)&&(um=4194304)):e=1);var n=Mr();t=Ao(t,e),t!==null&&(Uh(t,e,n),ss(t,n))}function dj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gT(t,n)}function fj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),gT(t,n)}var yT;yT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ns.current)ts=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ts=!1,JM(t,e,n);ts=!!(t.flags&131072)}else ts=!1,Jt&&e.flags&1048576&&S$(e,Lg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rg(t,e),t=e.pendingProps;var s=Hc(e,Cr.current);bc(e,n),s=a4(null,e,r,t,s,n);var i=l4();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(r)?(i=!0,Dg(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,n4(e),s.updater=K0,e.stateNode=s,s._reactInternals=e,Rw(e,r,t,n),e=Aw(null,e,r,!0,i,n)):(e.tag=0,Jt&&i&&KS(e),Rr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pj(r),t=fi(r,t),s){case 0:e=Iw(null,e,r,t,n);break e;case 1:e=UE(null,e,r,t,n);break e;case 11:e=FE(null,e,r,t,n);break e;case 14:e=LE(null,e,r,fi(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fi(r,s),Iw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fi(r,s),UE(t,e,r,s,n);case 3:e:{if(eT(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$$(t,e),Gg(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Wc(Error(fe(423)),e),e=VE(t,e,r,n,s);break e}else if(r!==s){s=Wc(Error(fe(424)),e),e=VE(t,e,r,n,s);break e}else for(ps=Ra(e.stateNode.containerInfo.firstChild),ms=e,Jt=!0,gi=null,n=C$(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qc(),r===s){e=Mo(t,e,n);break e}Rr(t,e,r,n)}e=e.child}return e;case 5:return T$(e),t===null&&Tw(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bw(r,s)?o=null:i!==null&&bw(r,i)&&(e.flags|=32),J$(t,e),Rr(t,e,o,n),e.child;case 6:return t===null&&Tw(e),null;case 13:return tT(t,e,n);case 4:return r4(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bc(e,null,r,n):Rr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fi(r,s),FE(t,e,r,s,n);case 7:return Rr(t,e,e.pendingProps,n),e.child;case 8:return Rr(t,e,e.pendingProps.children,n),e.child;case 12:return Rr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Lt(Ug,r._currentValue),r._currentValue=o,i!==null)if(Pi(i.value,o)){if(i.children===s.children&&!ns.current){e=Mo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Eo(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),xw(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xw(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bc(e,n),s=Gs(s),r=r(s),e.flags|=1,Rr(t,e,r,n),e.child;case 14:return r=e.type,s=fi(r,e.pendingProps),s=fi(r.type,s),LE(t,e,r,s,n);case 15:return Y$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fi(r,s),rg(t,e),e.tag=1,rs(r)?(t=!0,Dg(e)):t=!1,bc(e,n),W$(e,r,s),Rw(e,r,s,n),Aw(null,e,r,!0,t,n);case 19:return nT(t,e,n);case 22:return X$(t,e,n)}throw Error(fe(156,e.tag))};function vT(t,e){return qP(t,e)}function hj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(t,e,n,r){return new hj(t,e,n,r)}function v4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pj(t){if(typeof t=="function")return v4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zS)return 11;if(t===DS)return 14}return 2}function Ma(t,e){var n=t.alternate;return n===null?(n=Ls(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function og(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")v4(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ic:return Hl(n.children,s,i,e);case jS:o=8,s|=8;break;case tw:return t=Ls(12,n,e,s|2),t.elementType=tw,t.lanes=i,t;case nw:return t=Ls(13,n,e,s),t.elementType=nw,t.lanes=i,t;case rw:return t=Ls(19,n,e,s),t.elementType=rw,t.lanes=i,t;case TP:return X0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PP:o=10;break e;case $P:o=9;break e;case zS:o=11;break e;case DS:o=14;break e;case la:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Ls(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hl(t,e,n,r){return t=Ls(7,t,r,e),t.lanes=n,t}function X0(t,e,n,r){return t=Ls(22,t,r,e),t.elementType=TP,t.lanes=n,t.stateNode={isHidden:!1},t}function m1(t,e,n){return t=Ls(6,t,null,e),t.lanes=n,t}function g1(t,e,n){return e=Ls(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q_(0),this.expirationTimes=Q_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _4(t,e,n,r,s,i,o,a,c){return t=new mj(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ls(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n4(i),t}function gj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _T(t){if(!t)return La;t=t._reactInternals;e:{if(lu(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(rs(n))return _$(t,n,e)}return e}function wT(t,e,n,r,s,i,o,a,c){return t=_4(n,r,!0,t,s,i,o,a,c),t.context=_T(null),n=t.current,r=Mr(),s=Aa(n),i=Eo(r,s),i.callback=e??null,Oa(n,i,s),t.current.lanes=s,Uh(t,s,r),ss(t,r),t}function J0(t,e,n,r){var s=e.current,i=Mr(),o=Aa(s);return n=_T(n),e.context===null?e.context=n:e.pendingContext=n,e=Eo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oa(s,e,o),t!==null&&(ki(t,s,o,i),eg(t,s,o)),o}function Yg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w4(t,e){XE(t,e),(t=t.alternate)&&XE(t,e)}function yj(){return null}var ST=typeof reportError=="function"?reportError:function(t){console.error(t)};function S4(t){this._internalRoot=t}ey.prototype.render=S4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));J0(t,e,null,null)};ey.prototype.unmount=S4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kl(function(){J0(null,t,null,null)}),e[Io]=null}};function ey(t){this._internalRoot=t}ey.prototype.unstable_scheduleHydration=function(t){if(t){var e=XP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fa.length&&e!==0&&e<fa[n].priority;n++);fa.splice(n,0,t),n===0&&e$(t)}};function k4(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ty(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JE(){}function vj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Yg(o);i.call(d)}}var o=wT(e,r,t,0,null,!1,!1,"",JE);return t._reactRootContainer=o,t[Io]=o.current,fh(t.nodeType===8?t.parentNode:t),Kl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Yg(c);a.call(d)}}var c=_4(t,0,!1,null,null,!1,!1,"",JE);return t._reactRootContainer=c,t[Io]=c.current,fh(t.nodeType===8?t.parentNode:t),Kl(function(){J0(e,c,n,r)}),c}function ny(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Yg(o);a.call(c)}}J0(e,o,t,s)}else o=vj(n,e,t,s,r);return Yg(o)}QP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gf(e.pendingLanes);n!==0&&(US(e,n|1),ss(e,bn()),!(vt&6)&&(Kc=bn()+500,Ba()))}break;case 13:Kl(function(){var r=Ao(t,1);if(r!==null){var s=Mr();ki(r,t,1,s)}}),w4(t,1)}};VS=function(t){if(t.tag===13){var e=Ao(t,134217728);if(e!==null){var n=Mr();ki(e,t,134217728,n)}w4(t,134217728)}};YP=function(t){if(t.tag===13){var e=Aa(t),n=Ao(t,e);if(n!==null){var r=Mr();ki(n,t,e,r)}w4(t,e)}};XP=function(){return Nt};JP=function(t,e){var n=Nt;try{return Nt=t,e()}finally{Nt=n}};hw=function(t,e,n){switch(e){case"input":if(ow(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=B0(r);if(!s)throw Error(fe(90));NP(r),ow(r,s)}}}break;case"textarea":OP(t,n);break;case"select":e=n.value,e!=null&&_c(t,!!n.multiple,e,!1)}};FP=m4;LP=Kl;var _j={usingClientEntryPoint:!1,Events:[Gh,uc,B0,zP,DP,m4]},rf={findFiberByHostInstance:xl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wj={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GP(t),t===null?null:t.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||yj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wm.isDisabled&&wm.supportsFiber)try{V0=wm.inject(wj),Qi=wm}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_j;_s.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k4(e))throw Error(fe(200));return gj(t,e,null,n)};_s.createRoot=function(t,e){if(!k4(t))throw Error(fe(299));var n=!1,r="",s=ST;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_4(t,1,!1,null,null,n,!1,r,s),t[Io]=e.current,fh(t.nodeType===8?t.parentNode:t),new S4(e)};_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=GP(e),t=t===null?null:t.stateNode,t};_s.flushSync=function(t){return Kl(t)};_s.hydrate=function(t,e,n){if(!ty(e))throw Error(fe(200));return ny(null,t,e,!0,n)};_s.hydrateRoot=function(t,e,n){if(!k4(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ST;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wT(e,null,t,1,n??null,s,!1,i,o),t[Io]=e.current,fh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ey(e)};_s.render=function(t,e,n){if(!ty(e))throw Error(fe(200));return ny(null,t,e,!1,n)};_s.unmountComponentAtNode=function(t){if(!ty(t))throw Error(fe(40));return t._reactRootContainer?(Kl(function(){ny(null,null,t,!1,function(){t._reactRootContainer=null,t[Io]=null})}),!0):!1};_s.unstable_batchedUpdates=m4;_s.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ty(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return ny(t,e,n,!1,r)};_s.version="18.3.1-next-f1338f8080-20240426";function kT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kT)}catch(t){console.error(t)}}kT(),kP.exports=_s;var Sj=kP.exports,eC=Sj;J1.createRoot=eC.createRoot,J1.hydrateRoot=eC.hydrateRoot;const{getOwnPropertyNames:kj,getOwnPropertySymbols:bj}=Object,{hasOwnProperty:Ej}=Object.prototype;function y1(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Sm(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);const c=t(n,r,s);return i.delete(n),i.delete(r),c}}function Cj(t){return t!=null?t[Symbol.toStringTag]:void 0}function tC(t){return kj(t).concat(bj(t))}const Pj=Object.hasOwn||((t,e)=>Ej.call(t,e));function uu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const $j="__v",Tj="__o",xj="_owner",{getOwnPropertyDescriptor:nC,keys:rC}=Object;function Nj(t,e){return t.byteLength===e.byteLength&&Xg(new Uint8Array(t),new Uint8Array(e))}function Rj(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Oj(t,e){return t.byteLength===e.byteLength&&Xg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Ij(t,e){return uu(t.getTime(),e.getTime())}function Aj(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Mj(t,e){return t===e}function sC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,a,c=0;for(;(o=i.next())&&!o.done;){const d=e.entries();let f=!1,m=0;for(;(a=d.next())&&!a.done;){if(s[m]){m++;continue}const y=o.value,v=a.value;if(n.equals(y[0],v[0],c,m,t,e,n)&&n.equals(y[1],v[1],y[0],v[0],t,e,n)){f=s[m]=!0;break}m++}if(!f)return!1;c++}return!0}const jj=uu;function zj(t,e,n){const r=rC(t);let s=r.length;if(rC(e).length!==s)return!1;for(;s-- >0;)if(!bT(t,e,n,r[s]))return!1;return!0}function sf(t,e,n){const r=tC(t);let s=r.length;if(tC(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=r[s],!bT(t,e,n,i)||(o=nC(t,i),a=nC(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function Dj(t,e){return uu(t.valueOf(),e.valueOf())}function Fj(t,e){return t.source===e.source&&t.flags===e.flags}function iC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const c=e.values();let d=!1,f=0;for(;(a=c.next())&&!a.done;){if(!s[f]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function Xg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Lj(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function bT(t,e,n,r){return(r===xj||r===Tj||r===$j)&&(t.$$typeof||e.$$typeof)?!0:Pj(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const Uj="[object ArrayBuffer]",Vj="[object Arguments]",Gj="[object Boolean]",Hj="[object DataView]",qj="[object Date]",Bj="[object Error]",Zj="[object Map]",Wj="[object Number]",Kj="[object Object]",Qj="[object RegExp]",Yj="[object Set]",Xj="[object String]",Jj={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ez="[object URL]",tz=Object.prototype.toString;function nz({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:_}){return function(k,p,w){if(k===p)return!0;if(k==null||p==null)return!1;const g=typeof k;if(g!==typeof p)return!1;if(g!=="object")return g==="number"?a(k,p,w):g==="function"?i(k,p,w):!1;const C=k.constructor;if(C!==p.constructor)return!1;if(C===Object)return c(k,p,w);if(Array.isArray(k))return e(k,p,w);if(C===Date)return r(k,p,w);if(C===RegExp)return f(k,p,w);if(C===Map)return o(k,p,w);if(C===Set)return m(k,p,w);const $=tz.call(k);if($===qj)return r(k,p,w);if($===Qj)return f(k,p,w);if($===Zj)return o(k,p,w);if($===Yj)return m(k,p,w);if($===Kj)return typeof k.then!="function"&&typeof p.then!="function"&&c(k,p,w);if($===ez)return v(k,p,w);if($===Bj)return s(k,p,w);if($===Vj)return c(k,p,w);if(Jj[$])return y(k,p,w);if($===Uj)return t(k,p,w);if($===Hj)return n(k,p,w);if($===Gj||$===Wj||$===Xj)return d(k,p,w);if(_){let N=_[$];if(!N){const j=Cj(k);j&&(N=_[j])}if(N)return N(k,p,w)}return!1}}function rz({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:Nj,areArraysEqual:n?sf:Rj,areDataViewsEqual:Oj,areDatesEqual:Ij,areErrorsEqual:Aj,areFunctionsEqual:Mj,areMapsEqual:n?y1(sC,sf):sC,areNumbersEqual:jj,areObjectsEqual:n?sf:zj,arePrimitiveWrappersEqual:Dj,areRegExpsEqual:Fj,areSetsEqual:n?y1(iC,sf):iC,areTypedArraysEqual:n?y1(Xg,sf):Xg,areUrlsEqual:Lj,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=Sm(r.areArraysEqual),i=Sm(r.areMapsEqual),o=Sm(r.areObjectsEqual),a=Sm(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return r}function sz(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function iz({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(a,c){const{cache:d=t?new WeakMap:void 0,meta:f}=n();return e(a,c,{cache:d,equals:r,meta:f,strict:s})};if(t)return function(a,c){return e(a,c,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(a,c){return e(a,c,i)}}const oz=Za();Za({strict:!0});Za({circular:!0});Za({circular:!0,strict:!0});Za({createInternalComparator:()=>uu});Za({strict:!0,createInternalComparator:()=>uu});Za({circular:!0,createInternalComparator:()=>uu});Za({circular:!0,createInternalComparator:()=>uu,strict:!0});function Za(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=rz(t),o=nz(i),a=n?n(o):sz(o);return iz({circular:e,comparator:o,createState:r,equals:a,strict:s})}var yt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yt||(yt={}));var oC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(oC||(oC={}));const xe=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ca=t=>{switch(typeof t){case"undefined":return xe.undefined;case"string":return xe.string;case"number":return Number.isNaN(t)?xe.nan:xe.number;case"boolean":return xe.boolean;case"function":return xe.function;case"bigint":return xe.bigint;case"symbol":return xe.symbol;case"object":return Array.isArray(t)?xe.array:t===null?xe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xe.promise:typeof Map<"u"&&t instanceof Map?xe.map:typeof Set<"u"&&t instanceof Set?xe.set:typeof Date<"u"&&t instanceof Date?xe.date:xe.object;default:return xe.unknown}},he=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class jo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return s(this),r}static assert(e){if(!(e instanceof jo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}jo.create=t=>new jo(t);const Bw=(t,e)=>{let n;switch(t.code){case he.invalid_type:t.received===xe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case he.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case he.invalid_union:n="Invalid input";break;case he.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case he.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case he.invalid_arguments:n="Invalid function arguments";break;case he.invalid_return_type:n="Invalid function return type";break;case he.invalid_date:n="Invalid date";break;case he.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case he.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case he.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case he.custom:n="Invalid input";break;case he.invalid_intersection_types:n="Intersection results could not be merged";break;case he.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case he.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let az=Bw;function lz(){return az}const uz=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)a=d(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function we(t,e){const n=lz(),r=uz({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Bw?void 0:Bw].filter(s=>!!s)});t.common.issues.push(r)}class jr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ve;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return jr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ve;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ve=Object.freeze({status:"aborted"}),vf=t=>({status:"dirty",value:t}),qs=t=>({status:"valid",value:t}),aC=t=>t.status==="aborted",lC=t=>t.status==="dirty",Qc=t=>t.status==="valid",Jg=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class Xi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uC=(t,e)=>{if(Qc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new jo(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:s}}let ht=class{get description(){return this._def.description}_getType(e){return ca(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ca(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jr,ctx:{common:e.parent.common,data:e.data,parsedType:ca(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Jg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ca(e)},s=this._parseSync({data:e,path:r.path,parent:r});return uC(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ca(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Qc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Qc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ca(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Jg(s)?s:Promise.resolve(s));return uC(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:he.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Yl({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Co.create(this,this._def)}nullable(){return Xl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yc.create(this)}promise(){return i0.create(this,this._def)}or(e){return n0.create([this,e],this._def)}and(e){return r0.create(this,e,this._def)}transform(e){return new Yl({...Xe(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new o0({...Xe(this._def),innerType:this,defaultValue:n,typeName:me.ZodDefault})}brand(){return new TT({typeName:me.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new a0({...Xe(this._def),innerType:this,catchValue:n,typeName:me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return b4.create(this,e)}readonly(){return l0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const cz=/^c[^\s-]{8,}$/i,dz=/^[0-9a-z]+$/,fz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pz=/^[a-z0-9_-]{21}$/i,mz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let v1;const _z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Sz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ez=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ET="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Cz=new RegExp(`^${ET}$`);function CT(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Pz(t){return new RegExp(`^${CT(t)}$`)}function $z(t){let e=`${ET}T${CT(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Tz(t,e){return!!((e==="v4"||!e)&&_z.test(t)||(e==="v6"||!e)&&Sz.test(t))}function xz(t,e){if(!mz.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Nz(t,e){return!!((e==="v4"||!e)&&wz.test(t)||(e==="v6"||!e)&&kz.test(t))}let e0=class _f extends ht{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xe.string){const i=this._getOrReturnCtx(e);return we(i,{code:he.invalid_type,expected:xe.string,received:i.parsedType}),Ve}const r=new jr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),we(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),we(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?we(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&we(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")yz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"email",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")v1||(v1=new RegExp(vz,"u")),v1.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"emoji",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")hz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"uuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")pz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"nanoid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")cz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"cuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")dz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"cuid2",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")fz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"ulid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),we(s,{validation:"url",code:he.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"regex",code:he.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?$z(i).test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Cz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Pz(i).test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{code:he.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?gz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"duration",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Tz(e.data,i.version)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"ip",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?xz(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"jwt",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Nz(e.data,i.version)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"cidr",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?bz.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"base64",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Ez.test(e.data)||(s=this._getOrReturnCtx(e,s),we(s,{validation:"base64url",code:he.invalid_string,message:i.message}),r.dirty()):yt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:he.invalid_string,...Oe.errToObj(r)})}_addCheck(e){return new _f({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Oe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new _f({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};e0.create=t=>new e0({checks:[],typeName:me.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Xe(t)});function Rz(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}let Zw=class Ww extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xe.number){const i=this._getOrReturnCtx(e);return we(i,{code:he.invalid_type,expected:xe.number,received:i.parsedType}),Ve}let r;const s=new jr;for(const i of this._def.checks)i.kind==="int"?yt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Rz(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),we(r,{code:he.not_finite,message:i.message}),s.dirty()):yt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,s){return new Ww({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(s)}]})}_addCheck(e){return new Ww({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Zw.create=t=>new Zw({checks:[],typeName:me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class Sh extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==xe.bigint)return this._getInvalidInput(e);let r;const s=new jr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),we(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):yt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return we(n,{code:he.invalid_type,expected:xe.bigint,received:n.parsedType}),Ve}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,r,s){return new Sh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Oe.toString(s)}]})}_addCheck(e){return new Sh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sh.create=t=>new Sh({checks:[],typeName:me.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Xe(t)});let Kw=class extends ht{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xe.boolean){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.boolean,received:r.parsedType}),Ve}return qs(e.data)}};Kw.create=t=>new Kw({typeName:me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class t0 extends ht{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xe.date){const i=this._getOrReturnCtx(e);return we(i,{code:he.invalid_type,expected:xe.date,received:i.parsedType}),Ve}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return we(i,{code:he.invalid_date}),Ve}const r=new jr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),we(s,{code:he.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),we(s,{code:he.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):yt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}t0.create=t=>new t0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:me.ZodDate,...Xe(t)});class cC extends ht{_parse(e){if(this._getType(e)!==xe.symbol){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.symbol,received:r.parsedType}),Ve}return qs(e.data)}}cC.create=t=>new cC({typeName:me.ZodSymbol,...Xe(t)});class Qw extends ht{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.undefined,received:r.parsedType}),Ve}return qs(e.data)}}Qw.create=t=>new Qw({typeName:me.ZodUndefined,...Xe(t)});let Yw=class extends ht{_parse(e){if(this._getType(e)!==xe.null){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.null,received:r.parsedType}),Ve}return qs(e.data)}};Yw.create=t=>new Yw({typeName:me.ZodNull,...Xe(t)});let Xw=class extends ht{constructor(){super(...arguments),this._any=!0}_parse(e){return qs(e.data)}};Xw.create=t=>new Xw({typeName:me.ZodAny,...Xe(t)});let dC=class extends ht{constructor(){super(...arguments),this._unknown=!0}_parse(e){return qs(e.data)}};dC.create=t=>new dC({typeName:me.ZodUnknown,...Xe(t)});let Ua=class extends ht{_parse(e){const n=this._getOrReturnCtx(e);return we(n,{code:he.invalid_type,expected:xe.never,received:n.parsedType}),Ve}};Ua.create=t=>new Ua({typeName:me.ZodNever,...Xe(t)});class fC extends ht{_parse(e){if(this._getType(e)!==xe.undefined){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.void,received:r.parsedType}),Ve}return qs(e.data)}}fC.create=t=>new fC({typeName:me.ZodVoid,...Xe(t)});let Yc=class ag extends ht{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==xe.array)return we(n,{code:he.invalid_type,expected:xe.array,received:n.parsedType}),Ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(we(n,{code:o?he.too_big:he.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(we(n,{code:he.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(we(n,{code:he.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Xi(n,o,n.path,a)))).then(o=>jr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Xi(n,o,n.path,a)));return jr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ag({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new ag({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new ag({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}};Yc.create=(t,e)=>new Yc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Xe(e)});function Ku(t){if(t instanceof zo){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Co.create(Ku(r))}return new zo({...t._def,shape:()=>e})}else return t instanceof Yc?new Yc({...t._def,type:Ku(t.element)}):t instanceof Co?Co.create(Ku(t.unwrap())):t instanceof Xl?Xl.create(Ku(t.unwrap())):t instanceof Ql?Ql.create(t.items.map(e=>Ku(e))):t}let zo=class ai extends ht{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==xe.object){const d=this._getOrReturnCtx(e);return we(d,{code:he.invalid_type,expected:xe.object,received:d.parsedType}),Ve}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ua&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||a.push(d);const c=[];for(const d of o){const f=i[d],m=s.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Xi(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ua){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")a.length>0&&(we(s,{code:he.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of a){const m=s.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Xi(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const m=await f.key,y=await f.value;d.push({key:m,value:y,alwaysSet:f.alwaysSet})}return d}).then(d=>jr.mergeObjectSync(r,d)):jr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new ai({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Oe.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ai({...this._def,unknownKeys:"strip"})}passthrough(){return new ai({...this._def,unknownKeys:"passthrough"})}extend(e){return new ai({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ai({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ai({...this._def,catchall:e})}pick(e){const n={};for(const r of yt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ai({...this._def,shape:()=>n})}omit(e){const n={};for(const r of yt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new ai({...this._def,shape:()=>n})}deepPartial(){return Ku(this)}partial(e){const n={};for(const r of yt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new ai({...this._def,shape:()=>n})}required(e){const n={};for(const r of yt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Co;)i=i._def.innerType;n[r]=i}return new ai({...this._def,shape:()=>n})}keyof(){return $T(yt.objectKeys(this.shape))}};zo.create=(t,e)=>new zo({shape:()=>t,unknownKeys:"strip",catchall:Ua.create(),typeName:me.ZodObject,...Xe(e)});zo.strictCreate=(t,e)=>new zo({shape:()=>t,unknownKeys:"strict",catchall:Ua.create(),typeName:me.ZodObject,...Xe(e)});zo.lazycreate=(t,e)=>new zo({shape:t,unknownKeys:"strip",catchall:Ua.create(),typeName:me.ZodObject,...Xe(e)});let n0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new jo(a.ctx.common.issues));return we(n,{code:he.invalid_union,unionErrors:o}),Ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new jo(c));return we(n,{code:he.invalid_union,unionErrors:a}),Ve}}get options(){return this._def.options}};n0.create=(t,e)=>new n0({options:t,typeName:me.ZodUnion,...Xe(e)});const fo=t=>t instanceof t2?fo(t.schema):t instanceof Yl?fo(t.innerType()):t instanceof s0?[t.value]:t instanceof ry?t.options:t instanceof r2?yt.objectValues(t.enum):t instanceof o0?fo(t._def.innerType):t instanceof Qw?[void 0]:t instanceof Yw?[null]:t instanceof Co?[void 0,...fo(t.unwrap())]:t instanceof Xl?[null,...fo(t.unwrap())]:t instanceof TT||t instanceof l0?fo(t.unwrap()):t instanceof a0?fo(t._def.innerType):[];let Oz=class PT extends ht{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.object)return we(n,{code:he.invalid_type,expected:xe.object,received:n.parsedType}),Ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(we(n,{code:he.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=fo(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new PT({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Xe(r)})}};function Jw(t,e){const n=ca(t),r=ca(e);if(t===e)return{valid:!0,data:t};if(n===xe.object&&r===xe.object){const s=yt.objectKeys(e),i=yt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Jw(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===xe.array&&r===xe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Jw(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===xe.date&&r===xe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let r0=class extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(aC(i)||aC(o))return Ve;const a=Jw(i.value,o.value);return a.valid?((lC(i)||lC(o))&&n.dirty(),{status:n.value,value:a.data}):(we(r,{code:he.invalid_intersection_types}),Ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};r0.create=(t,e,n)=>new r0({left:t,right:e,typeName:me.ZodIntersection,...Xe(n)});class Ql extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.array)return we(r,{code:he.invalid_type,expected:xe.array,received:r.parsedType}),Ve;if(r.data.length<this._def.items.length)return we(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&r.data.length>this._def.items.length&&(we(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Xi(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>jr.mergeArray(n,o)):jr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ql({...this._def,rest:e})}}Ql.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ql({items:t,typeName:me.ZodTuple,rest:null,...Xe(e)})};let Iz=class e2 extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.object)return we(r,{code:he.invalid_type,expected:xe.object,received:r.parsedType}),Ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Xi(r,a,r.path,a)),value:o._parse(new Xi(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?jr.mergeObjectAsync(n,s):jr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ht?new e2({keyType:e,valueType:n,typeName:me.ZodRecord,...Xe(r)}):new e2({keyType:e0.create(),valueType:e,typeName:me.ZodRecord,...Xe(n)})}};class hC extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.map)return we(r,{code:he.invalid_type,expected:xe.map,received:r.parsedType}),Ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],d)=>({key:s._parse(new Xi(r,a,r.path,[d,"key"])),value:i._parse(new Xi(r,c,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return Ve;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return Ve;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}}}}hC.create=(t,e,n)=>new hC({valueType:e,keyType:t,typeName:me.ZodMap,...Xe(n)});class kh extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==xe.set)return we(r,{code:he.invalid_type,expected:xe.set,received:r.parsedType}),Ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(we(r,{code:he.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(we(r,{code:he.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const f of c){if(f.status==="aborted")return Ve;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((c,d)=>i._parse(new Xi(r,c,r.path,d)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new kh({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new kh({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}kh.create=(t,e)=>new kh({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Xe(e)});class t2 extends ht{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}t2.create=(t,e)=>new t2({getter:t,typeName:me.ZodLazy,...Xe(e)});let s0=class extends ht{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return we(n,{received:n.data,code:he.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}};s0.create=(t,e)=>new s0({value:t,typeName:me.ZodLiteral,...Xe(e)});function $T(t,e){return new ry({values:t,typeName:me.ZodEnum,...Xe(e)})}let ry=class n2 extends ht{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return we(n,{expected:yt.joinValues(r),received:n.parsedType,code:he.invalid_type}),Ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return we(n,{received:n.data,code:he.invalid_enum_value,options:r}),Ve}return qs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return n2.create(e,{...this._def,...n})}exclude(e,n=this._def){return n2.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};ry.create=$T;class r2 extends ht{_parse(e){const n=yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xe.string&&r.parsedType!==xe.number){const s=yt.objectValues(n);return we(r,{expected:yt.joinValues(s),received:r.parsedType,code:he.invalid_type}),Ve}if(this._cache||(this._cache=new Set(yt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=yt.objectValues(n);return we(r,{received:r.data,code:he.invalid_enum_value,options:s}),Ve}return qs(e.data)}get enum(){return this._def.values}}r2.create=(t,e)=>new r2({values:t,typeName:me.ZodNativeEnum,...Xe(e)});class i0 extends ht{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xe.promise&&n.common.async===!1)return we(n,{code:he.invalid_type,expected:xe.promise,received:n.parsedType}),Ve;const r=n.parsedType===xe.promise?n.data:Promise.resolve(n.data);return qs(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}i0.create=(t,e)=>new i0({type:t,typeName:me.ZodPromise,...Xe(e)});class Yl extends ht{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{we(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ve;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Ve:c.status==="dirty"||n.value==="dirty"?vf(c.value):c});{if(n.value==="aborted")return Ve;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ve:a.status==="dirty"||n.value==="dirty"?vf(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Qc(o))return Ve;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Qc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):Ve);yt.assertNever(s)}}Yl.create=(t,e,n)=>new Yl({schema:t,typeName:me.ZodEffects,effect:e,...Xe(n)});Yl.createWithPreprocess=(t,e,n)=>new Yl({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Xe(n)});let Co=class extends ht{_parse(e){return this._getType(e)===xe.undefined?qs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Co.create=(t,e)=>new Co({innerType:t,typeName:me.ZodOptional,...Xe(e)});let Xl=class extends ht{_parse(e){return this._getType(e)===xe.null?qs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Xl.create=(t,e)=>new Xl({innerType:t,typeName:me.ZodNullable,...Xe(e)});let o0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===xe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};o0.create=(t,e)=>new o0({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});let a0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Jg(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new jo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};a0.create=(t,e)=>new a0({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class pC extends ht{_parse(e){if(this._getType(e)!==xe.nan){const r=this._getOrReturnCtx(e);return we(r,{code:he.invalid_type,expected:xe.nan,received:r.parsedType}),Ve}return{status:"valid",value:e.data}}}pC.create=t=>new pC({typeName:me.ZodNaN,...Xe(t)});class TT extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class b4 extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ve:i.status==="dirty"?(n.dirty(),vf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new b4({in:e,out:n,typeName:me.ZodPipeline})}}let l0=class extends ht{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Qc(s)&&(s.value=Object.freeze(s.value)),s);return Jg(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};l0.create=(t,e)=>new l0({innerType:t,typeName:me.ZodReadonly,...Xe(e)});var me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));const Ot=e0.create,ys=Zw.create,Jl=Kw.create,km=Xw.create;Ua.create;const qh=Yc.create,on=zo.create;n0.create;const mC=Oz.create;r0.create;Ql.create;const bm=Iz.create,Em=s0.create,eu=ry.create;i0.create;Co.create;Xl.create;const Az=t=>()=>!Array.isArray(t)||t.length===0?null:{components:t.map(e=>{if(typeof e!="object"||e===null)return{id:"unknown",componentName:"unknown",description:"invalid component",props:void 0,propsSchema:"Not specified",state:void 0,isSelectedForInteraction:!1,stateSchema:"Not specified"};const n=e;return{id:String(n.id??"unknown"),componentName:String(n.name??"unknown"),description:String(n.description??""),props:n.props,propsSchema:n.propsSchema?"Available - use component-specific update tools":"Not specified",state:n.state,isSelectedForInteraction:n.isSelectedForInteraction??!1,stateSchema:n.stateSchema?"Available - use component-specific update tools":"Not specified"}})},Mz=Object.freeze({status:"aborted"});function ne(t,e,n){function r(a,c){var d;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(d=a._zod).traits??(d.traits=new Set),a._zod.traits.add(t),e(a,c);for(const f in o.prototype)f in a||Object.defineProperty(a,f,{value:o.prototype[f].bind(a)});a._zod.constr=o,a._zod.def=c}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function o(a){var c;const d=n!=null&&n.Parent?new i:this;r(d,a),(c=d._zod).deferred??(c.deferred=[]);for(const f of d._zod.deferred)f();return d}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var c,d;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(d=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:d.has(t)}}),Object.defineProperty(o,"name",{value:t}),o}const wle=Symbol("zod_brand");class bh extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const s2={};function Ji(t){return t&&Object.assign(s2,t),s2}function jz(t){return t}function zz(t){return t}function Dz(t){}function Fz(t){throw new Error}function Lz(t){}function E4(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Uz(t,e="|"){return t.map(n=>IT(n)).join(e)}function xT(t,e){return typeof e=="bigint"?e.toString():e}function sy(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function cu(t){return t==null}function iy(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function NT(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}function kt(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Bh(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Vz(t,e){return e?e.reduce((n,r)=>n==null?void 0:n[r],t):t}function Gz(t){const e=Object.keys(t),n=e.map(r=>t[r]);return Promise.all(n).then(r=>{const s={};for(let i=0;i<e.length;i++)s[e[i]]=r[i];return s})}function Hz(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function Qu(t){return JSON.stringify(t)}const C4=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Eh(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const RT=sy(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ch(t){if(Eh(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Eh(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function qz(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}const Bz=t=>{const e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},u0=new Set(["string","number","symbol"]),OT=new Set(["string","number","bigint","boolean","symbol","undefined"]);function du(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wa(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function de(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Zz(t){let e;return new Proxy({},{get(n,r,s){return e??(e=t()),Reflect.get(e,r,s)},set(n,r,s,i){return e??(e=t()),Reflect.set(e,r,s,i)},has(n,r){return e??(e=t()),Reflect.has(e,r)},deleteProperty(n,r){return e??(e=t()),Reflect.deleteProperty(e,r)},ownKeys(n){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(n,r){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,r)},defineProperty(n,r,s){return e??(e=t()),Reflect.defineProperty(e,r,s)}})}function IT(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function AT(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const MT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},jT={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function zT(t,e){const n={},r=t._zod.def;for(const s in e){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&(n[s]=r.shape[s])}return Wa(t,{...t._zod.def,shape:n,checks:[]})}function DT(t,e){const n={...t._zod.def.shape},r=t._zod.def;for(const s in e){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&delete n[s]}return Wa(t,{...t._zod.def,shape:n,checks:[]})}function FT(t,e){if(!Ch(e))throw new Error("Invalid input to extend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Bh(this,"shape",r),r},checks:[]};return Wa(t,n)}function LT(t,e){return Wa(t,{...t._zod.def,get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return Bh(this,"shape",n),n},catchall:e._zod.def.catchall,checks:[]})}function UT(t,e,n){const r=e._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=t?new t({type:"optional",innerType:r[i]}):r[i])}else for(const i in r)s[i]=t?new t({type:"optional",innerType:r[i]}):r[i];return Wa(e,{...e._zod.def,shape:s,checks:[]})}function VT(t,e,n){const r=e._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new t({type:"nonoptional",innerType:r[i]}))}else for(const i in r)s[i]=new t({type:"nonoptional",innerType:r[i]});return Wa(e,{...e._zod.def,shape:s,checks:[]})}function Cc(t,e=0){var n;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Us(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function wf(t){return typeof t=="string"?t:t==null?void 0:t.message}function $i(t,e,n){var s,i,o,a,c,d;const r={...t,path:t.path??[]};if(!t.message){const f=wf((o=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,t))??wf((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??wf((c=n.customError)==null?void 0:c.call(n,t))??wf((d=n.localeError)==null?void 0:d.call(n,t))??"Invalid input";r.message=f}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function oy(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function ay(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Xc(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}function Wz(t){return Object.entries(t).filter(([e,n])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}class Kz{constructor(...e){}}const Sle=Object.freeze(Object.defineProperty({__proto__:null,BIGINT_FORMAT_RANGES:jT,Class:Kz,NUMBER_FORMAT_RANGES:MT,aborted:Cc,allowsEval:RT,assert:Lz,assertEqual:jz,assertIs:Dz,assertNever:Fz,assertNotEqual:zz,assignProp:Bh,cached:sy,captureStackTrace:C4,cleanEnum:Wz,cleanRegex:iy,clone:Wa,createTransparentProxy:Zz,defineLazy:kt,esc:Qu,escapeRegex:du,extend:FT,finalizeIssue:$i,floatSafeRemainder:NT,getElementAtPath:Vz,getEnumValues:E4,getLengthableOrigin:ay,getParsedType:Bz,getSizableOrigin:oy,isObject:Eh,isPlainObject:Ch,issue:Xc,joinValues:Uz,jsonStringifyReplacer:xT,merge:LT,normalizeParams:de,nullish:cu,numKeys:qz,omit:DT,optionalKeys:AT,partial:UT,pick:zT,prefixIssues:Us,primitiveTypes:OT,promiseAllObject:Gz,propertyKeyTypes:u0,randomString:Hz,required:VT,stringifyPrimitive:IT,unwrapMessage:wf},Symbol.toStringTag,{value:"Module"})),GT=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,xT,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},HT=ne("$ZodError",GT),ly=ne("$ZodError",GT,{Parent:Error});function Qz(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function Yz(t,e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return s(t),r}function kle(t,e){const n=e||function(i){return i.message},r={errors:[]},s=(i,o=[])=>{var a,c;for(const d of i.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>s({issues:f},d.path));else if(d.code==="invalid_key")s({issues:d.issues},d.path);else if(d.code==="invalid_element")s({issues:d.issues},d.path);else{const f=[...o,...d.path];if(f.length===0){r.errors.push(n(d));continue}let m=r,y=0;for(;y<f.length;){const v=f[y],_=y===f.length-1;typeof v=="string"?(m.properties??(m.properties={}),(a=m.properties)[v]??(a[v]={errors:[]}),m=m.properties[v]):(m.items??(m.items=[]),(c=m.items)[v]??(c[v]={errors:[]}),m=m.items[v]),_&&m.errors.push(n(d)),y++}}};return s(t),r}function Xz(t){const e=[];for(const n of t)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function ble(t){var r;const e=[],n=[...t.issues].sort((s,i)=>s.path.length-i.path.length);for(const s of n)e.push(` ${s.message}`),(r=s.path)!=null&&r.length&&e.push(`   at ${Xz(s.path)}`);return e.join(`
`)}const qT=t=>(e,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new bh;if(o.issues.length){const a=new((s==null?void 0:s.Err)??t)(o.issues.map(c=>$i(c,i,Ji())));throw C4(a,s==null?void 0:s.callee),a}return o.value},Ele=qT(ly),BT=t=>async(e,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??t)(o.issues.map(c=>$i(c,i,Ji())));throw C4(a,s==null?void 0:s.callee),a}return o.value},Cle=BT(ly),ZT=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new bh;return i.issues.length?{success:!1,error:new(t??HT)(i.issues.map(o=>$i(o,s,Ji())))}:{success:!0,data:i.value}},WT=ZT(ly),KT=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>$i(o,s,Ji())))}:{success:!0,data:i.value}},Jz=KT(ly),QT=/^[cC][^\s-]{8,}$/,YT=/^[0-9a-z]+$/,XT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,JT=/^[0-9a-vA-V]{20}$/,e8=/^[A-Za-z0-9]{27}$/,t8=/^[a-zA-Z0-9_-]{21}$/,n8=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,eD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,r8=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Jc=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,tD=Jc(4),nD=Jc(6),rD=Jc(7),s8=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sD=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,iD=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,oD=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,aD=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,i8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function o8(){return new RegExp(i8,"u")}const a8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,l8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,u8=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,c8=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d8=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,P4=/^[A-Za-z0-9_-]*$/,f8=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,lD=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,h8=/^\+(?:[0-9]){6,14}[0-9]$/,p8="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",m8=new RegExp(`^${p8}$`);function g8(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function y8(t){return new RegExp(`^${g8(t)}$`)}function v8(t){const e=g8({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${p8}T(?:${r})$`)}const _8=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},w8=/^\d+n?$/,S8=/^\d+$/,k8=/^-?\d+(?:\.\d+)?/i,b8=/true|false/i,E8=/null/i,C8=/undefined/i,P8=/^[^A-Z]*$/,$8=/^[^a-z]*$/,Ple=Object.freeze(Object.defineProperty({__proto__:null,_emoji:i8,base64:d8,base64url:P4,bigint:w8,boolean:b8,browserEmail:aD,cidrv4:u8,cidrv6:c8,cuid:QT,cuid2:YT,date:m8,datetime:v8,domain:lD,duration:n8,e164:h8,email:s8,emoji:o8,extendedDuration:eD,guid:r8,hostname:f8,html5Email:sD,integer:S8,ipv4:a8,ipv6:l8,ksuid:e8,lowercase:P8,nanoid:t8,null:E8,number:k8,rfc5322Email:iD,string:_8,time:y8,ulid:XT,undefined:C8,unicodeEmail:oD,uppercase:$8,uuid:Jc,uuid4:tD,uuid6:nD,uuid7:rD,xid:JT},Symbol.toStringTag,{value:"Module"})),xn=ne("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),T8={number:"number",bigint:"bigint",object:"date"},x8=ne("$ZodCheckLessThan",(t,e)=>{xn.init(t,e);const n=T8[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),N8=ne("$ZodCheckGreaterThan",(t,e)=>{xn.init(t,e);const n=T8[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),uD=ne("$ZodCheckMultipleOf",(t,e)=>{xn.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):NT(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),cD=ne("$ZodCheckNumberFormat",(t,e)=>{var o;xn.init(t,e),e.format=e.format||"float64";const n=(o=e.format)==null?void 0:o.includes("int"),r=n?"int":"number",[s,i]=MT[e.format];t._zod.onattach.push(a=>{const c=a._zod.bag;c.format=e.format,c.minimum=s,c.maximum=i,n&&(c.pattern=S8)}),t._zod.check=a=>{const c=a.value;if(n){if(!Number.isInteger(c)){a.issues.push({expected:r,format:e.format,code:"invalid_type",input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}c<s&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),c>i&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),dD=ne("$ZodCheckBigIntFormat",(t,e)=>{xn.init(t,e);const[n,r]=jT[e.format];t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,i.minimum=n,i.maximum=r}),t._zod.check=s=>{const i=s.value;i<n&&s.issues.push({origin:"bigint",input:i,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),i>r&&s.issues.push({origin:"bigint",input:i,code:"too_big",maximum:r,inst:t})}}),fD=ne("$ZodCheckMaxSize",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;s.size<=e.maximum||r.issues.push({origin:oy(s),code:"too_big",maximum:e.maximum,input:s,inst:t,continue:!e.abort})}}),hD=ne("$ZodCheckMinSize",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;s.size>=e.minimum||r.issues.push({origin:oy(s),code:"too_small",minimum:e.minimum,input:s,inst:t,continue:!e.abort})}}),pD=ne("$ZodCheckSizeEquals",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.size,s.maximum=e.size,s.size=e.size}),t._zod.check=r=>{const s=r.value,i=s.size;if(i===e.size)return;const o=i>e.size;r.issues.push({origin:oy(s),...o?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),mD=ne("$ZodCheckMaxLength",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const o=ay(s);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),gD=ne("$ZodCheckMinLength",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const o=ay(s);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),yD=ne("$ZodCheckLengthEquals",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!cu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,i=s.length;if(i===e.length)return;const o=ay(s),a=i>e.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),uy=ne("$ZodCheckStringFormat",(t,e)=>{var n,r;xn.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),vD=ne("$ZodCheckRegex",(t,e)=>{uy.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),_D=ne("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=P8),uy.init(t,e)}),wD=ne("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=$8),uy.init(t,e)}),SD=ne("$ZodCheckIncludes",(t,e)=>{xn.init(t,e);const n=du(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),kD=ne("$ZodCheckStartsWith",(t,e)=>{xn.init(t,e);const n=new RegExp(`^${du(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),bD=ne("$ZodCheckEndsWith",(t,e)=>{xn.init(t,e);const n=new RegExp(`.*${du(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}});function gC(t,e,n){t.issues.length&&e.issues.push(...Us(n,t.issues))}const ED=ne("$ZodCheckProperty",(t,e)=>{xn.init(t,e),t._zod.check=n=>{const r=e.schema._zod.run({value:n.value[e.property],issues:[]},{});if(r instanceof Promise)return r.then(s=>gC(s,n,e.property));gC(r,n,e.property)}}),CD=ne("$ZodCheckMimeType",(t,e)=>{xn.init(t,e);const n=new Set(e.mime);t._zod.onattach.push(r=>{r._zod.bag.mime=e.mime}),t._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:e.mime,input:r.value.type,inst:t})}}),PD=ne("$ZodCheckOverwrite",(t,e)=>{xn.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class $D{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new e(...n,s.join(`
`))}}const TD={major:4,minor:0,patch:0},Ke=ne("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=TD;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const o of i._zod.onattach)o(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,a,c)=>{let d=Cc(o),f;for(const m of a){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(d)continue;const y=o.issues.length,v=m._zod.check(o);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new bh;if(f||v instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await v,o.issues.length!==y&&(d||(d=Cc(o,y)))});else{if(o.issues.length===y)continue;d||(d=Cc(o,y))}}return f?f.then(()=>o):o};t._zod.run=(o,a)=>{const c=t._zod.parse(o,a);if(c instanceof Promise){if(a.async===!1)throw new bh;return c.then(d=>i(d,r,a))}return i(c,r,a)}}t["~standard"]={validate:i=>{var o;try{const a=WT(t,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Jz(t,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),cy=ne("$ZodString",(t,e)=>{var n;Ke.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??_8(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Kt=ne("$ZodStringFormat",(t,e)=>{uy.init(t,e),cy.init(t,e)}),xD=ne("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=r8),Kt.init(t,e)}),ND=ne("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Jc(r))}else e.pattern??(e.pattern=Jc());Kt.init(t,e)}),RD=ne("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=s8),Kt.init(t,e)}),OD=ne("$ZodURL",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{try{const r=n.value,s=new URL(r),i=s.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:f8.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),!r.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),ID=ne("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=o8()),Kt.init(t,e)}),AD=ne("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=t8),Kt.init(t,e)}),MD=ne("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=QT),Kt.init(t,e)}),jD=ne("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=YT),Kt.init(t,e)}),zD=ne("$ZodULID",(t,e)=>{e.pattern??(e.pattern=XT),Kt.init(t,e)}),DD=ne("$ZodXID",(t,e)=>{e.pattern??(e.pattern=JT),Kt.init(t,e)}),FD=ne("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=e8),Kt.init(t,e)}),LD=ne("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=v8(e)),Kt.init(t,e)}),UD=ne("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=m8),Kt.init(t,e)}),VD=ne("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=y8(e)),Kt.init(t,e)}),GD=ne("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=n8),Kt.init(t,e)}),HD=ne("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=a8),Kt.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),qD=ne("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=l8),Kt.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),BD=ne("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=u8),Kt.init(t,e)}),ZD=ne("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=c8),Kt.init(t,e),t._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function R8(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const WD=ne("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=d8),Kt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{R8(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function KD(t){if(!P4.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return R8(n)}const QD=ne("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=P4),Kt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{KD(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),YD=ne("$ZodE164",(t,e)=>{e.pattern??(e.pattern=h8),Kt.init(t,e)});function XD(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const JD=ne("$ZodJWT",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{XD(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),$le=ne("$ZodCustomStringFormat",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{e.fn(n.value)||n.issues.push({code:"invalid_format",format:e.format,input:n.value,inst:t,continue:!e.abort})}}),O8=ne("$ZodNumber",(t,e)=>{Ke.init(t,e),t._zod.pattern=t._zod.bag.pattern??k8,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),n}}),eF=ne("$ZodNumber",(t,e)=>{cD.init(t,e),O8.init(t,e)}),I8=ne("$ZodBoolean",(t,e)=>{Ke.init(t,e),t._zod.pattern=b8,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),tF=ne("$ZodBigInt",(t,e)=>{Ke.init(t,e),t._zod.pattern=w8,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:t}),n}}),Tle=ne("$ZodBigInt",(t,e)=>{dD.init(t,e),tF.init(t,e)}),xle=ne("$ZodSymbol",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return typeof s=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:s,inst:t}),n}}),Nle=ne("$ZodUndefined",(t,e)=>{Ke.init(t,e),t._zod.pattern=C8,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,r)=>{const s=n.value;return typeof s>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:s,inst:t}),n}}),nF=ne("$ZodNull",(t,e)=>{Ke.init(t,e),t._zod.pattern=E8,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:t}),n}}),rF=ne("$ZodAny",(t,e)=>{Ke.init(t,e),t._zod.parse=n=>n}),sF=ne("$ZodUnknown",(t,e)=>{Ke.init(t,e),t._zod.parse=n=>n}),iF=ne("$ZodNever",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),Rle=ne("$ZodVoid",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return typeof s>"u"||n.issues.push({expected:"void",code:"invalid_type",input:s,inst:t}),n}}),Ole=ne("$ZodDate",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,i=s instanceof Date;return i&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...i?{received:"Invalid Date"}:{},inst:t}),n}});function yC(t,e,n){t.issues.length&&e.issues.push(...Us(n,t.issues)),e.value[n]=t.value}const oF=ne("$ZodArray",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],c=e.element._zod.run({value:a,issues:[]},r);c instanceof Promise?i.push(c.then(d=>yC(d,n,o))):yC(c,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Cm(t,e,n){t.issues.length&&e.issues.push(...Us(n,t.issues)),e.value[n]=t.value}function vC(t,e,n,r){t.issues.length?r[n]===void 0?n in r?e.value[n]=void 0:e.value[n]=t.value:e.issues.push(...Us(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}const aF=ne("$ZodObject",(t,e)=>{Ke.init(t,e);const n=sy(()=>{const m=Object.keys(e.shape);for(const v of m)if(!(e.shape[v]instanceof Ke))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const y=AT(e.shape);return{shape:e.shape,keys:m,keySet:new Set(m),numKeys:m.length,optionalKeys:new Set(y)}});kt(t._zod,"propValues",()=>{const m=e.shape,y={};for(const v in m){const _=m[v]._zod;if(_.values){y[v]??(y[v]=new Set);for(const E of _.values)y[v].add(E)}}return y});const r=m=>{const y=new $D(["shape","payload","ctx"]),v=n.value,_=w=>{const g=Qu(w);return`shape[${g}]._zod.run({ value: input[${g}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let k=0;for(const w of v.keys)E[w]=`key_${k++}`;y.write("const newResult = {}");for(const w of v.keys)if(v.optionalKeys.has(w)){const g=E[w];y.write(`const ${g} = ${_(w)};`);const C=Qu(w);y.write(`
        if (${g}.issues.length) {
          if (input[${C}] === undefined) {
            if (${C} in input) {
              newResult[${C}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${g}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${C}, ...iss.path] : [${C}],
              }))
            );
          }
        } else if (${g}.value === undefined) {
          if (${C} in input) newResult[${C}] = undefined;
        } else {
          newResult[${C}] = ${g}.value;
        }
        `)}else{const g=E[w];y.write(`const ${g} = ${_(w)};`),y.write(`
          if (${g}.issues.length) payload.issues = payload.issues.concat(${g}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Qu(w)}, ...iss.path] : [${Qu(w)}]
          })));`),y.write(`newResult[${Qu(w)}] = ${g}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const p=y.compile();return(w,g)=>p(m,w,g)};let s;const i=Eh,o=!s2.jitless,c=o&&RT.value,d=e.catchall;let f;t._zod.parse=(m,y)=>{f??(f=n.value);const v=m.value;if(!i(v))return m.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),m;const _=[];if(o&&c&&(y==null?void 0:y.async)===!1&&y.jitless!==!0)s||(s=r(e.shape)),m=s(m,y);else{m.value={};const g=f.shape;for(const C of f.keys){const $=g[C],N=$._zod.run({value:v[C],issues:[]},y),j=$._zod.optin==="optional"&&$._zod.optout==="optional";N instanceof Promise?_.push(N.then(A=>j?vC(A,m,C,v):Cm(A,m,C))):j?vC(N,m,C,v):Cm(N,m,C)}}if(!d)return _.length?Promise.all(_).then(()=>m):m;const E=[],k=f.keySet,p=d._zod,w=p.def.type;for(const g of Object.keys(v)){if(k.has(g))continue;if(w==="never"){E.push(g);continue}const C=p.run({value:v[g],issues:[]},y);C instanceof Promise?_.push(C.then($=>Cm($,m,g))):Cm(C,m,g)}return E.length&&m.issues.push({code:"unrecognized_keys",keys:E,input:v,inst:t}),_.length?Promise.all(_).then(()=>m):m}});function _C(t,e,n,r){for(const s of t)if(s.issues.length===0)return e.value=s.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(s=>s.issues.map(i=>$i(i,r,Ji())))}),e}const A8=ne("$ZodUnion",(t,e)=>{Ke.init(t,e),kt(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),kt(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),kt(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),kt(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>iy(r.source)).join("|")})$`)}}),t._zod.parse=(n,r)=>{let s=!1;const i=[];for(const o of e.options){const a=o._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)i.push(a),s=!0;else{if(a.issues.length===0)return a;i.push(a)}}return s?Promise.all(i).then(o=>_C(o,n,t,r)):_C(i,n,t,r)}}),lF=ne("$ZodDiscriminatedUnion",(t,e)=>{A8.init(t,e);const n=t._zod.parse;kt(t._zod,"propValues",()=>{const s={};for(const i of e.options){const o=i._zod.propValues;if(!o||Object.keys(o).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(const[a,c]of Object.entries(o)){s[a]||(s[a]=new Set);for(const d of c)s[a].add(d)}}return s});const r=sy(()=>{const s=e.options,i=new Map;for(const o of s){const a=o._zod.propValues[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(const c of a){if(i.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);i.set(c,o)}}return i});t._zod.parse=(s,i)=>{const o=s.value;if(!Eh(o))return s.issues.push({code:"invalid_type",expected:"object",input:o,inst:t}),s;const a=r.value.get(o==null?void 0:o[e.discriminator]);return a?a._zod.run(s,i):e.unionFallback?n(s,i):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:o,path:[e.discriminator],inst:t}),s)}}),uF=ne("$ZodIntersection",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,i=e.left._zod.run({value:s,issues:[]},r),o=e.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,d])=>wC(n,c,d)):wC(n,i,o)}});function i2(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ch(t)&&Ch(e)){const n=Object.keys(e),r=Object.keys(t).filter(i=>n.indexOf(i)!==-1),s={...t,...e};for(const i of r){const o=i2(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r],o=i2(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function wC(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Cc(t))return t;const r=i2(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const Ile=ne("$ZodTuple",(t,e)=>{Ke.init(t,e);const n=e.items,r=n.length-[...n].reverse().findIndex(s=>s._zod.optin!=="optional");t._zod.parse=(s,i)=>{const o=s.value;if(!Array.isArray(o))return s.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),s;s.value=[];const a=[];if(!e.rest){const d=o.length>n.length,f=o.length<r-1;if(d||f)return s.issues.push({input:o,inst:t,origin:"array",...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}}),s}let c=-1;for(const d of n){if(c++,c>=o.length&&c>=r)continue;const f=d._zod.run({value:o[c],issues:[]},i);f instanceof Promise?a.push(f.then(m=>Pm(m,s,c))):Pm(f,s,c)}if(e.rest){const d=o.slice(n.length);for(const f of d){c++;const m=e.rest._zod.run({value:f,issues:[]},i);m instanceof Promise?a.push(m.then(y=>Pm(y,s,c))):Pm(m,s,c)}}return a.length?Promise.all(a).then(()=>s):s}});function Pm(t,e,n){t.issues.length&&e.issues.push(...Us(n,t.issues)),e.value[n]=t.value}const cF=ne("$ZodRecord",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Ch(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const i=[];if(e.keyType._zod.values){const o=e.keyType._zod.values;n.value={};for(const c of o)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const d=e.valueType._zod.run({value:s[c],issues:[]},r);d instanceof Promise?i.push(d.then(f=>{f.issues.length&&n.issues.push(...Us(c,f.issues)),n.value[c]=f.value})):(d.issues.length&&n.issues.push(...Us(c,d.issues)),n.value[c]=d.value)}let a;for(const c in s)o.has(c)||(a=a??[],a.push(c));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=e.keyType._zod.run({value:o,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(d=>$i(d,r,Ji())),input:o,path:[o],inst:t}),n.value[a.value]=a.value;continue}const c=e.valueType._zod.run({value:s[o],issues:[]},r);c instanceof Promise?i.push(c.then(d=>{d.issues.length&&n.issues.push(...Us(o,d.issues)),n.value[a.value]=d.value})):(c.issues.length&&n.issues.push(...Us(o,c.issues)),n.value[a.value]=c.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Ale=ne("$ZodMap",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!(s instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:s,inst:t}),n;const i=[];n.value=new Map;for(const[o,a]of s){const c=e.keyType._zod.run({value:o,issues:[]},r),d=e.valueType._zod.run({value:a,issues:[]},r);c instanceof Promise||d instanceof Promise?i.push(Promise.all([c,d]).then(([f,m])=>{SC(f,m,n,o,s,t,r)})):SC(c,d,n,o,s,t,r)}return i.length?Promise.all(i).then(()=>n):n}});function SC(t,e,n,r,s,i,o){t.issues.length&&(u0.has(typeof r)?n.issues.push(...Us(r,t.issues)):n.issues.push({origin:"map",code:"invalid_key",input:s,inst:i,issues:t.issues.map(a=>$i(a,o,Ji()))})),e.issues.length&&(u0.has(typeof r)?n.issues.push(...Us(r,e.issues)):n.issues.push({origin:"map",code:"invalid_element",input:s,inst:i,key:r,issues:e.issues.map(a=>$i(a,o,Ji()))})),n.value.set(t.value,e.value)}const Mle=ne("$ZodSet",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!(s instanceof Set))return n.issues.push({input:s,inst:t,expected:"set",code:"invalid_type"}),n;const i=[];n.value=new Set;for(const o of s){const a=e.valueType._zod.run({value:o,issues:[]},r);a instanceof Promise?i.push(a.then(c=>kC(c,n))):kC(a,n)}return i.length?Promise.all(i).then(()=>n):n}});function kC(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}const dF=ne("$ZodEnum",(t,e)=>{Ke.init(t,e);const n=E4(e.entries);t._zod.values=new Set(n),t._zod.pattern=new RegExp(`^(${n.filter(r=>u0.has(typeof r)).map(r=>typeof r=="string"?du(r):r.toString()).join("|")})$`),t._zod.parse=(r,s)=>{const i=r.value;return t._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:t}),r}}),fF=ne("$ZodLiteral",(t,e)=>{Ke.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?du(n):n?n.toString():String(n)).join("|")})$`),t._zod.parse=(n,r)=>{const s=n.value;return t._zod.values.has(s)||n.issues.push({code:"invalid_value",values:e.values,input:s,inst:t}),n}}),jle=ne("$ZodFile",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return s instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:s,inst:t}),n}}),M8=ne("$ZodTransform",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new bh;return n.value=s,n}}),hF=ne("$ZodOptional",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",t._zod.optout="optional",kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),kt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${iy(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(n,r):n.value===void 0?n:e.innerType._zod.run(n,r)}),pF=ne("$ZodNullable",(t,e)=>{Ke.init(t,e),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${iy(n.source)}|null)$`):void 0}),kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),mF=ne("$ZodDefault",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>bC(i,e)):bC(s,e)}});function bC(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const gF=ne("$ZodPrefault",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),yF=ne("$ZodNonOptional",(t,e)=>{Ke.init(t,e),kt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>EC(i,t)):EC(s,t)}});function EC(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const zle=ne("$ZodSuccess",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.issues.length===0,n)):(n.value=s.issues.length===0,n)}}),vF=ne("$ZodCatch",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>$i(o,r,Ji()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(i=>$i(i,r,Ji()))},input:n.value}),n.issues=[]),n)}}),Dle=ne("$ZodNaN",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:t,expected:"nan",code:"invalid_type"}),n)}),j8=ne("$ZodPipe",(t,e)=>{Ke.init(t,e),kt(t._zod,"values",()=>e.in._zod.values),kt(t._zod,"optin",()=>e.in._zod.optin),kt(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,r)=>{const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(i=>CC(i,e,r)):CC(s,e,r)}});function CC(t,e,n){return Cc(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}const _F=ne("$ZodReadonly",(t,e)=>{Ke.init(t,e),kt(t._zod,"propValues",()=>e.innerType._zod.propValues),kt(t._zod,"values",()=>e.innerType._zod.values),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(PC):PC(s)}});function PC(t){return t.value=Object.freeze(t.value),t}const Fle=ne("$ZodTemplateLiteral",(t,e)=>{Ke.init(t,e);const n=[];for(const r of e.parts)if(r instanceof Ke){if(!r._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...r._zod.traits].shift()}`);const s=r._zod.pattern instanceof RegExp?r._zod.pattern.source:r._zod.pattern;if(!s)throw new Error(`Invalid template literal part: ${r._zod.traits}`);const i=s.startsWith("^")?1:0,o=s.endsWith("$")?s.length-1:s.length;n.push(s.slice(i,o))}else if(r===null||OT.has(typeof r))n.push(du(`${r}`));else throw new Error(`Invalid template literal part: ${r}`);t._zod.pattern=new RegExp(`^${n.join("")}$`),t._zod.parse=(r,s)=>typeof r.value!="string"?(r.issues.push({input:r.value,inst:t,expected:"template_literal",code:"invalid_type"}),r):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:t,code:"invalid_format",format:"template_literal",pattern:t._zod.pattern.source}),r)}),Lle=ne("$ZodPromise",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>Promise.resolve(n.value).then(s=>e.innerType._zod.run({value:s,issues:[]},r))}),Ule=ne("$ZodLazy",(t,e)=>{Ke.init(t,e),kt(t._zod,"innerType",()=>e.getter()),kt(t._zod,"pattern",()=>t._zod.innerType._zod.pattern),kt(t._zod,"propValues",()=>t._zod.innerType._zod.propValues),kt(t._zod,"optin",()=>t._zod.innerType._zod.optin),kt(t._zod,"optout",()=>t._zod.innerType._zod.optout),t._zod.parse=(n,r)=>t._zod.innerType._zod.run(n,r)}),wF=ne("$ZodCustom",(t,e)=>{xn.init(t,e),Ke.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(i=>$C(i,n,r,t));$C(s,n,r,t)}});function $C(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Xc(s))}}const Vle=Symbol("ZodOutput"),Gle=Symbol("ZodInput");class z8{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function SF(){return new z8}const Sf=SF();function kF(t,e){return new t({type:"string",...de(e)})}function Hle(t,e){return new t({type:"string",coerce:!0,...de(e)})}function bF(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...de(e)})}function TC(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...de(e)})}function EF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...de(e)})}function CF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...de(e)})}function PF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...de(e)})}function $F(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...de(e)})}function D8(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...de(e)})}function TF(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...de(e)})}function xF(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...de(e)})}function NF(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...de(e)})}function RF(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...de(e)})}function OF(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...de(e)})}function IF(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...de(e)})}function AF(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...de(e)})}function MF(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...de(e)})}function jF(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...de(e)})}function zF(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...de(e)})}function DF(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...de(e)})}function FF(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...de(e)})}function LF(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...de(e)})}function UF(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...de(e)})}function VF(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...de(e)})}const qle={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function GF(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...de(e)})}function HF(t,e){return new t({type:"string",format:"date",check:"string_format",...de(e)})}function qF(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...de(e)})}function BF(t,e){return new t({type:"string",format:"duration",check:"string_format",...de(e)})}function ZF(t,e){return new t({type:"number",checks:[],...de(e)})}function WF(t,e){return new t({type:"number",coerce:!0,checks:[],...de(e)})}function KF(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...de(e)})}function Ble(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...de(e)})}function Zle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...de(e)})}function Wle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...de(e)})}function Kle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...de(e)})}function QF(t,e){return new t({type:"boolean",...de(e)})}function Qle(t,e){return new t({type:"boolean",coerce:!0,...de(e)})}function Yle(t,e){return new t({type:"bigint",...de(e)})}function Xle(t,e){return new t({type:"bigint",coerce:!0,...de(e)})}function Jle(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...de(e)})}function eue(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...de(e)})}function tue(t,e){return new t({type:"symbol",...de(e)})}function nue(t,e){return new t({type:"undefined",...de(e)})}function YF(t,e){return new t({type:"null",...de(e)})}function XF(t){return new t({type:"any"})}function JF(t){return new t({type:"unknown"})}function eL(t,e){return new t({type:"never",...de(e)})}function rue(t,e){return new t({type:"void",...de(e)})}function sue(t,e){return new t({type:"date",...de(e)})}function iue(t,e){return new t({type:"date",coerce:!0,...de(e)})}function oue(t,e){return new t({type:"nan",...de(e)})}function o2(t,e){return new x8({check:"less_than",...de(e),value:t,inclusive:!1})}function lg(t,e){return new x8({check:"less_than",...de(e),value:t,inclusive:!0})}function a2(t,e){return new N8({check:"greater_than",...de(e),value:t,inclusive:!1})}function ug(t,e){return new N8({check:"greater_than",...de(e),value:t,inclusive:!0})}function aue(t){return a2(0,t)}function lue(t){return o2(0,t)}function uue(t){return lg(0,t)}function cue(t){return ug(0,t)}function xC(t,e){return new uD({check:"multiple_of",...de(e),value:t})}function due(t,e){return new fD({check:"max_size",...de(e),maximum:t})}function fue(t,e){return new hD({check:"min_size",...de(e),minimum:t})}function hue(t,e){return new pD({check:"size_equals",...de(e),size:t})}function F8(t,e){return new mD({check:"max_length",...de(e),maximum:t})}function c0(t,e){return new gD({check:"min_length",...de(e),minimum:t})}function L8(t,e){return new yD({check:"length_equals",...de(e),length:t})}function tL(t,e){return new vD({check:"string_format",format:"regex",...de(e),pattern:t})}function nL(t){return new _D({check:"string_format",format:"lowercase",...de(t)})}function rL(t){return new wD({check:"string_format",format:"uppercase",...de(t)})}function sL(t,e){return new SD({check:"string_format",format:"includes",...de(e),includes:t})}function iL(t,e){return new kD({check:"string_format",format:"starts_with",...de(e),prefix:t})}function oL(t,e){return new bD({check:"string_format",format:"ends_with",...de(e),suffix:t})}function pue(t,e,n){return new ED({check:"property",property:t,schema:e,...de(n)})}function mue(t,e){return new CD({check:"mime_type",mime:t,...de(e)})}function Zh(t){return new PD({check:"overwrite",tx:t})}function aL(t){return Zh(e=>e.normalize(t))}function lL(){return Zh(t=>t.trim())}function uL(){return Zh(t=>t.toLowerCase())}function cL(){return Zh(t=>t.toUpperCase())}function dL(t,e,n){return new t({type:"array",element:e,...de(n)})}function gue(t,e,n){return new t({type:"union",options:e,...de(n)})}function yue(t,e,n,r){return new t({type:"union",options:n,discriminator:e,...de(r)})}function vue(t,e,n){return new t({type:"intersection",left:e,right:n})}function _ue(t,e,n,r){const s=n instanceof Ke,i=s?r:n,o=s?n:null;return new t({type:"tuple",items:e,rest:o,...de(i)})}function wue(t,e,n,r){return new t({type:"record",keyType:e,valueType:n,...de(r)})}function Sue(t,e,n,r){return new t({type:"map",keyType:e,valueType:n,...de(r)})}function kue(t,e,n){return new t({type:"set",valueType:e,...de(n)})}function bue(t,e,n){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new t({type:"enum",entries:r,...de(n)})}function Eue(t,e,n){return new t({type:"enum",entries:e,...de(n)})}function Cue(t,e,n){return new t({type:"literal",values:Array.isArray(e)?e:[e],...de(n)})}function Pue(t,e){return new t({type:"file",...de(e)})}function $ue(t,e){return new t({type:"transform",transform:e})}function Tue(t,e){return new t({type:"optional",innerType:e})}function xue(t,e){return new t({type:"nullable",innerType:e})}function Nue(t,e,n){return new t({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}function Rue(t,e,n){return new t({type:"nonoptional",innerType:e,...de(n)})}function Oue(t,e){return new t({type:"success",innerType:e})}function Iue(t,e,n){return new t({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}function Aue(t,e,n){return new t({type:"pipe",in:e,out:n})}function Mue(t,e){return new t({type:"readonly",innerType:e})}function jue(t,e,n){return new t({type:"template_literal",parts:e,...de(n)})}function zue(t,e){return new t({type:"lazy",getter:e})}function Due(t,e){return new t({type:"promise",innerType:e})}function fL(t,e,n){const r=de(n);return r.abort??(r.abort=!0),new t({type:"custom",check:"custom",fn:e,...r})}function hL(t,e,n){return new t({type:"custom",check:"custom",fn:e,...de(n)})}function Fue(t,e){const n=de(e);let r=n.truthy??["true","1","yes","on","y","enabled"],s=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(r=r.map(_=>typeof _=="string"?_.toLowerCase():_),s=s.map(_=>typeof _=="string"?_.toLowerCase():_));const i=new Set(r),o=new Set(s),a=t.Pipe??j8,c=t.Boolean??I8,d=t.String??cy,f=t.Transform??M8,m=new f({type:"transform",transform:(_,E)=>{let k=_;return n.case!=="sensitive"&&(k=k.toLowerCase()),i.has(k)?!0:o.has(k)?!1:(E.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...o],input:E.value,inst:m}),{})},error:n.error}),y=new a({type:"pipe",in:new d({type:"string",error:n.error}),out:m,error:n.error});return new a({type:"pipe",in:y,out:new c({type:"boolean",error:n.error}),error:n.error})}function Lue(t,e,n,r={}){const s=de(r),i={...de(r),check:"string_format",type:"string",format:e,fn:typeof n=="function"?n:a=>n.test(a),...s};return n instanceof RegExp&&(i.pattern=n),new t(i)}class NC{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??Sf,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var m,y,v;var r;const s=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o)return o.count++,n.schemaPath.includes(e)&&(o.cycle=n.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,a);const c=(y=(m=e._zod).toJSONSchema)==null?void 0:y.call(m);if(c)a.schema=c;else{const _={...n,schemaPath:[...n.schemaPath,e],path:n.path},E=e._zod.parent;if(E)a.ref=E,this.process(E,_),this.seen.get(E).isParent=!0;else{const k=a.schema;switch(s.type){case"string":{const p=k;p.type="string";const{minimum:w,maximum:g,format:C,patterns:$,contentEncoding:N}=e._zod.bag;if(typeof w=="number"&&(p.minLength=w),typeof g=="number"&&(p.maxLength=g),C&&(p.format=i[C]??C,p.format===""&&delete p.format),N&&(p.contentEncoding=N),$&&$.size>0){const j=[...$];j.length===1?p.pattern=j[0].source:j.length>1&&(a.schema.allOf=[...j.map(A=>({...this.target==="draft-7"?{type:"string"}:{},pattern:A.source}))])}break}case"number":{const p=k,{minimum:w,maximum:g,format:C,multipleOf:$,exclusiveMaximum:N,exclusiveMinimum:j}=e._zod.bag;typeof C=="string"&&C.includes("int")?p.type="integer":p.type="number",typeof j=="number"&&(p.exclusiveMinimum=j),typeof w=="number"&&(p.minimum=w,typeof j=="number"&&(j>=w?delete p.minimum:delete p.exclusiveMinimum)),typeof N=="number"&&(p.exclusiveMaximum=N),typeof g=="number"&&(p.maximum=g,typeof N=="number"&&(N<=g?delete p.maximum:delete p.exclusiveMaximum)),typeof $=="number"&&(p.multipleOf=$);break}case"boolean":{const p=k;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{k.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{k.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=k,{minimum:w,maximum:g}=e._zod.bag;typeof w=="number"&&(p.minItems=w),typeof g=="number"&&(p.maxItems=g),p.type="array",p.items=this.process(s.element,{..._,path:[..._.path,"items"]});break}case"object":{const p=k;p.type="object",p.properties={};const w=s.shape;for(const $ in w)p.properties[$]=this.process(w[$],{..._,path:[..._.path,"properties",$]});const g=new Set(Object.keys(w)),C=new Set([...g].filter($=>{const N=s.shape[$]._zod;return this.io==="input"?N.optin===void 0:N.optout===void 0}));C.size>0&&(p.required=Array.from(C)),((v=s.catchall)==null?void 0:v._zod.def.type)==="never"?p.additionalProperties=!1:s.catchall?s.catchall&&(p.additionalProperties=this.process(s.catchall,{..._,path:[..._.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=k;p.anyOf=s.options.map((w,g)=>this.process(w,{..._,path:[..._.path,"anyOf",g]}));break}case"intersection":{const p=k,w=this.process(s.left,{..._,path:[..._.path,"allOf",0]}),g=this.process(s.right,{..._,path:[..._.path,"allOf",1]}),C=N=>"allOf"in N&&Object.keys(N).length===1,$=[...C(w)?w.allOf:[w],...C(g)?g.allOf:[g]];p.allOf=$;break}case"tuple":{const p=k;p.type="array";const w=s.items.map(($,N)=>this.process($,{..._,path:[..._.path,"prefixItems",N]}));if(this.target==="draft-2020-12"?p.prefixItems=w:p.items=w,s.rest){const $=this.process(s.rest,{..._,path:[..._.path,"items"]});this.target==="draft-2020-12"?p.items=$:p.additionalItems=$}s.rest&&(p.items=this.process(s.rest,{..._,path:[..._.path,"items"]}));const{minimum:g,maximum:C}=e._zod.bag;typeof g=="number"&&(p.minItems=g),typeof C=="number"&&(p.maxItems=C);break}case"record":{const p=k;p.type="object",p.propertyNames=this.process(s.keyType,{..._,path:[..._.path,"propertyNames"]}),p.additionalProperties=this.process(s.valueType,{..._,path:[..._.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=k,w=E4(s.entries);w.every(g=>typeof g=="number")&&(p.type="number"),w.every(g=>typeof g=="string")&&(p.type="string"),p.enum=w;break}case"literal":{const p=k,w=[];for(const g of s.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");w.push(Number(g))}else w.push(g);if(w.length!==0)if(w.length===1){const g=w[0];p.type=g===null?"null":typeof g,p.const=g}else w.every(g=>typeof g=="number")&&(p.type="number"),w.every(g=>typeof g=="string")&&(p.type="string"),w.every(g=>typeof g=="boolean")&&(p.type="string"),w.every(g=>g===null)&&(p.type="null"),p.enum=w;break}case"file":{const p=k,w={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:C,mime:$}=e._zod.bag;g!==void 0&&(w.minLength=g),C!==void 0&&(w.maxLength=C),$?$.length===1?(w.contentMediaType=$[0],Object.assign(p,w)):p.anyOf=$.map(N=>({...w,contentMediaType:N})):Object.assign(p,w);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(s.innerType,_);k.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,_),a.ref=s.innerType;break}case"success":{const p=k;p.type="boolean";break}case"default":{this.process(s.innerType,_),a.ref=s.innerType,k.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,_),a.ref=s.innerType,this.io==="input"&&(k._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,_),a.ref=s.innerType;let p;try{p=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}k.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=k,w=e._zod.pattern;if(!w)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=w.source;break}case"pipe":{const p=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(p,_),a.ref=p;break}case"readonly":{this.process(s.innerType,_),a.ref=s.innerType,k.readOnly=!0;break}case"promise":{this.process(s.innerType,_),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,_),a.ref=s.innerType;break}case"lazy":{const p=e._zod.innerType;this.process(p,_),a.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const d=this.metadataRegistry.get(e);return d&&Object.assign(a.schema,d),this.io==="input"&&Mn(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,n){var f,m,y,v,_,E;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=k=>{var $;const p=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const N=($=r.external.registry.get(k[0]))==null?void 0:$.id,j=r.external.uri??(G=>G);if(N)return{ref:j(N)};const A=k[1].defId??k[1].schema.id??`schema${this.counter++}`;return k[1].defId=A,{defId:A,ref:`${j("__shared")}#/${p}/${A}`}}if(k[1]===s)return{ref:"#"};const g=`#/${p}/`,C=k[1].schema.id??`__schema${this.counter++}`;return{defId:C,ref:g+C}},o=k=>{if(k[1].schema.$ref)return;const p=k[1],{ref:w,defId:g}=i(k);p.def={...p.schema},g&&(p.defId=g);const C=p.schema;for(const $ in C)delete C[$];C.$ref=w};if(r.cycles==="throw")for(const k of this.seen.entries()){const p=k[1];if(p.cycle)throw new Error(`Cycle detected: #/${(f=p.cycle)==null?void 0:f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const k of this.seen.entries()){const p=k[1];if(e===k[0]){o(k);continue}if(r.external){const g=(m=r.external.registry.get(k[0]))==null?void 0:m.id;if(e!==k[0]&&g){o(k);continue}}if((y=this.metadataRegistry.get(k[0]))==null?void 0:y.id){o(k);continue}if(p.cycle){o(k);continue}if(p.count>1&&r.reused==="ref"){o(k);continue}}const a=(k,p)=>{const w=this.seen.get(k),g=w.def??w.schema,C={...g};if(w.ref===null)return;const $=w.ref;if(w.ref=null,$){a($,p);const N=this.seen.get($).schema;N.$ref&&p.target==="draft-7"?(g.allOf=g.allOf??[],g.allOf.push(N)):(Object.assign(g,N),Object.assign(g,C))}w.isParent||this.override({zodSchema:k,jsonSchema:g,path:w.path??[]})};for(const k of[...this.seen.entries()].reverse())a(k[0],{target:this.target});const c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(v=r.external)!=null&&v.uri){const k=(_=r.external.registry.get(e))==null?void 0:_.id;if(!k)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(k)}Object.assign(c,s.def);const d=((E=r.external)==null?void 0:E.defs)??{};for(const k of this.seen.entries()){const p=k[1];p.def&&p.defId&&(d[p.defId]=p.def)}r.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?c.$defs=d:c.definitions=d);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}}function pL(t,e){if(t instanceof z8){const r=new NC(e),s={};for(const a of t._idmap.entries()){const[c,d]=a;r.process(d)}const i={},o={registry:t,uri:e==null?void 0:e.uri,defs:s};for(const a of t._idmap.entries()){const[c,d]=a;i[c]=r.emit(d,{...e,external:o})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:s}}return{schemas:i}}const n=new NC(e);return n.process(t),n.emit(t,e)}function Mn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const s=t._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return Mn(s.element,n);case"object":{for(const i in s.shape)if(Mn(s.shape[i],n))return!0;return!1}case"union":{for(const i of s.options)if(Mn(i,n))return!0;return!1}case"intersection":return Mn(s.left,n)||Mn(s.right,n);case"tuple":{for(const i of s.items)if(Mn(i,n))return!0;return!!(s.rest&&Mn(s.rest,n))}case"record":return Mn(s.keyType,n)||Mn(s.valueType,n);case"map":return Mn(s.keyType,n)||Mn(s.valueType,n);case"set":return Mn(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return Mn(s.innerType,n);case"lazy":return Mn(s.getter(),n);case"default":return Mn(s.innerType,n);case"prefault":return Mn(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return Mn(s.in,n)||Mn(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}const mL=ne("ZodISODateTime",(t,e)=>{LD.init(t,e),cn.init(t,e)});function U8(t){return GF(mL,t)}const gL=ne("ZodISODate",(t,e)=>{UD.init(t,e),cn.init(t,e)});function yL(t){return HF(gL,t)}const vL=ne("ZodISOTime",(t,e)=>{VD.init(t,e),cn.init(t,e)});function _L(t){return qF(vL,t)}const wL=ne("ZodISODuration",(t,e)=>{GD.init(t,e),cn.init(t,e)});function SL(t){return BF(wL,t)}const kL=(t,e)=>{HT.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Yz(t,n)},flatten:{value:n=>Qz(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},dy=ne("ZodError",kL,{Parent:Error}),bL=qT(dy),EL=BT(dy),CL=ZT(dy),PL=KT(dy),tn=ne("ZodType",(t,e)=>(Ke.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>Wa(t,n,r),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t),t.parse=(n,r)=>bL(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>CL(t,n,r),t.parseAsync=async(n,r)=>EL(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>PL(t,n,r),t.spa=t.safeParseAsync,t.refine=(n,r)=>t.check(vU(n,r)),t.superRefine=n=>t.check(_U(n)),t.overwrite=n=>t.check(Zh(n)),t.optional=()=>gn(t),t.nullable=()=>IC(t),t.nullish=()=>gn(IC(t)),t.nonoptional=n=>cU(t,n),t.array=()=>ge(t),t.or=n=>Rt([t,n]),t.and=n=>T4(t,n),t.transform=n=>u2(t,W8(n)),t.default=n=>aU(t,n),t.prefault=n=>uU(t,n),t.catch=n=>fU(t,n),t.pipe=n=>u2(t,n),t.readonly=()=>mU(t),t.describe=n=>{const r=t.clone();return Sf.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=Sf.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Sf.get(t);const r=t.clone();return Sf.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),V8=ne("_ZodString",(t,e)=>{cy.init(t,e),tn.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(tL(...r)),t.includes=(...r)=>t.check(sL(...r)),t.startsWith=(...r)=>t.check(iL(...r)),t.endsWith=(...r)=>t.check(oL(...r)),t.min=(...r)=>t.check(c0(...r)),t.max=(...r)=>t.check(F8(...r)),t.length=(...r)=>t.check(L8(...r)),t.nonempty=(...r)=>t.check(c0(1,...r)),t.lowercase=r=>t.check(nL(r)),t.uppercase=r=>t.check(rL(r)),t.trim=()=>t.check(lL()),t.normalize=(...r)=>t.check(aL(...r)),t.toLowerCase=()=>t.check(uL()),t.toUpperCase=()=>t.check(cL())}),$L=ne("ZodString",(t,e)=>{cy.init(t,e),V8.init(t,e),t.email=n=>t.check(bF(TL,n)),t.url=n=>t.check(D8(G8,n)),t.jwt=n=>t.check(VF(HL,n)),t.emoji=n=>t.check(TF(NL,n)),t.guid=n=>t.check(TC(RC,n)),t.uuid=n=>t.check(EF($m,n)),t.uuidv4=n=>t.check(CF($m,n)),t.uuidv6=n=>t.check(PF($m,n)),t.uuidv7=n=>t.check($F($m,n)),t.nanoid=n=>t.check(xF(RL,n)),t.guid=n=>t.check(TC(RC,n)),t.cuid=n=>t.check(NF(OL,n)),t.cuid2=n=>t.check(RF(IL,n)),t.ulid=n=>t.check(OF(AL,n)),t.base64=n=>t.check(FF(UL,n)),t.base64url=n=>t.check(LF(VL,n)),t.xid=n=>t.check(IF(ML,n)),t.ksuid=n=>t.check(AF(jL,n)),t.ipv4=n=>t.check(MF(zL,n)),t.ipv6=n=>t.check(jF(DL,n)),t.cidrv4=n=>t.check(zF(FL,n)),t.cidrv6=n=>t.check(DF(LL,n)),t.e164=n=>t.check(UF(GL,n)),t.datetime=n=>t.check(U8(n)),t.date=n=>t.check(yL(n)),t.time=n=>t.check(_L(n)),t.duration=n=>t.check(SL(n))});function B(t){return kF($L,t)}const cn=ne("ZodStringFormat",(t,e)=>{Kt.init(t,e),V8.init(t,e)}),TL=ne("ZodEmail",(t,e)=>{RD.init(t,e),cn.init(t,e)}),RC=ne("ZodGUID",(t,e)=>{xD.init(t,e),cn.init(t,e)}),$m=ne("ZodUUID",(t,e)=>{ND.init(t,e),cn.init(t,e)}),G8=ne("ZodURL",(t,e)=>{OD.init(t,e),cn.init(t,e)});function xL(t){return D8(G8,t)}const NL=ne("ZodEmoji",(t,e)=>{ID.init(t,e),cn.init(t,e)}),RL=ne("ZodNanoID",(t,e)=>{AD.init(t,e),cn.init(t,e)}),OL=ne("ZodCUID",(t,e)=>{MD.init(t,e),cn.init(t,e)}),IL=ne("ZodCUID2",(t,e)=>{jD.init(t,e),cn.init(t,e)}),AL=ne("ZodULID",(t,e)=>{zD.init(t,e),cn.init(t,e)}),ML=ne("ZodXID",(t,e)=>{DD.init(t,e),cn.init(t,e)}),jL=ne("ZodKSUID",(t,e)=>{FD.init(t,e),cn.init(t,e)}),zL=ne("ZodIPv4",(t,e)=>{HD.init(t,e),cn.init(t,e)}),DL=ne("ZodIPv6",(t,e)=>{qD.init(t,e),cn.init(t,e)}),FL=ne("ZodCIDRv4",(t,e)=>{BD.init(t,e),cn.init(t,e)}),LL=ne("ZodCIDRv6",(t,e)=>{ZD.init(t,e),cn.init(t,e)}),UL=ne("ZodBase64",(t,e)=>{WD.init(t,e),cn.init(t,e)}),VL=ne("ZodBase64URL",(t,e)=>{QD.init(t,e),cn.init(t,e)}),GL=ne("ZodE164",(t,e)=>{YD.init(t,e),cn.init(t,e)}),HL=ne("ZodJWT",(t,e)=>{JD.init(t,e),cn.init(t,e)}),$4=ne("ZodNumber",(t,e)=>{O8.init(t,e),tn.init(t,e),t.gt=(r,s)=>t.check(a2(r,s)),t.gte=(r,s)=>t.check(ug(r,s)),t.min=(r,s)=>t.check(ug(r,s)),t.lt=(r,s)=>t.check(o2(r,s)),t.lte=(r,s)=>t.check(lg(r,s)),t.max=(r,s)=>t.check(lg(r,s)),t.int=r=>t.check(OC(r)),t.safe=r=>t.check(OC(r)),t.positive=r=>t.check(a2(0,r)),t.nonnegative=r=>t.check(ug(0,r)),t.negative=r=>t.check(o2(0,r)),t.nonpositive=r=>t.check(lg(0,r)),t.multipleOf=(r,s)=>t.check(xC(r,s)),t.step=(r,s)=>t.check(xC(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Pt(t){return ZF($4,t)}const qL=ne("ZodNumberFormat",(t,e)=>{eF.init(t,e),$4.init(t,e)});function OC(t){return KF(qL,t)}const BL=ne("ZodBoolean",(t,e)=>{I8.init(t,e),tn.init(t,e)});function Ut(t){return QF(BL,t)}const ZL=ne("ZodNull",(t,e)=>{nF.init(t,e),tn.init(t,e)});function H8(t){return YF(ZL,t)}const WL=ne("ZodAny",(t,e)=>{rF.init(t,e),tn.init(t,e)});function KL(){return XF(WL)}const QL=ne("ZodUnknown",(t,e)=>{sF.init(t,e),tn.init(t,e)});function xt(){return JF(QL)}const YL=ne("ZodNever",(t,e)=>{iF.init(t,e),tn.init(t,e)});function XL(t){return eL(YL,t)}const JL=ne("ZodArray",(t,e)=>{oF.init(t,e),tn.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(c0(n,r)),t.nonempty=n=>t.check(c0(1,n)),t.max=(n,r)=>t.check(F8(n,r)),t.length=(n,r)=>t.check(L8(n,r)),t.unwrap=()=>t.element});function ge(t,e){return dL(JL,t,e)}const q8=ne("ZodObject",(t,e)=>{aF.init(t,e),tn.init(t,e),kt(t,"shape",()=>e.shape),t.keyof=()=>Ss(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:xt()}),t.loose=()=>t.clone({...t._zod.def,catchall:xt()}),t.strict=()=>t.clone({...t._zod.def,catchall:XL()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>FT(t,n),t.merge=n=>LT(t,n),t.pick=n=>zT(t,n),t.omit=n=>DT(t,n),t.partial=(...n)=>UT(K8,t,n[0]),t.required=(...n)=>VT(Q8,t,n[0])});function ve(t,e){const n={type:"object",get shape(){return Bh(this,"shape",{...t}),this.shape},...de(e)};return new q8(n)}function Qn(t,e){return new q8({type:"object",get shape(){return Bh(this,"shape",{...t}),this.shape},catchall:xt(),...de(e)})}const B8=ne("ZodUnion",(t,e)=>{A8.init(t,e),tn.init(t,e),t.options=e.options});function Rt(t,e){return new B8({type:"union",options:t,...de(e)})}const eU=ne("ZodDiscriminatedUnion",(t,e)=>{B8.init(t,e),lF.init(t,e)});function Z8(t,e,n){return new eU({type:"union",options:e,discriminator:t,...de(n)})}const tU=ne("ZodIntersection",(t,e)=>{uF.init(t,e),tn.init(t,e)});function T4(t,e){return new tU({type:"intersection",left:t,right:e})}const nU=ne("ZodRecord",(t,e)=>{cF.init(t,e),tn.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function en(t,e,n){return new nU({type:"record",keyType:t,valueType:e,...de(n)})}const l2=ne("ZodEnum",(t,e)=>{dF.init(t,e),tn.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const i={};for(const o of r)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new l2({...e,checks:[],...de(s),entries:i})},t.exclude=(r,s)=>{const i={...e.entries};for(const o of r)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new l2({...e,checks:[],...de(s),entries:i})}});function Ss(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new l2({type:"enum",entries:n,...de(e)})}const rU=ne("ZodLiteral",(t,e)=>{fF.init(t,e),tn.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Se(t,e){return new rU({type:"literal",values:Array.isArray(t)?t:[t],...de(e)})}const sU=ne("ZodTransform",(t,e)=>{M8.init(t,e),tn.init(t,e),t._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(Xc(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!0),n.issues.push(Xc(o))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(i=>(n.value=i,n)):(n.value=s,n)}});function W8(t){return new sU({type:"transform",transform:t})}const K8=ne("ZodOptional",(t,e)=>{hF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function gn(t){return new K8({type:"optional",innerType:t})}const iU=ne("ZodNullable",(t,e)=>{pF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function IC(t){return new iU({type:"nullable",innerType:t})}const oU=ne("ZodDefault",(t,e)=>{mF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function aU(t,e){return new oU({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const lU=ne("ZodPrefault",(t,e)=>{gF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function uU(t,e){return new lU({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const Q8=ne("ZodNonOptional",(t,e)=>{yF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function cU(t,e){return new Q8({type:"nonoptional",innerType:t,...de(e)})}const dU=ne("ZodCatch",(t,e)=>{vF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function fU(t,e){return new dU({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const hU=ne("ZodPipe",(t,e)=>{j8.init(t,e),tn.init(t,e),t.in=e.in,t.out=e.out});function u2(t,e){return new hU({type:"pipe",in:t,out:e})}const pU=ne("ZodReadonly",(t,e)=>{_F.init(t,e),tn.init(t,e)});function mU(t){return new pU({type:"readonly",innerType:t})}const Y8=ne("ZodCustom",(t,e)=>{wF.init(t,e),tn.init(t,e)});function gU(t){const e=new xn({check:"custom"});return e._zod.check=t,e}function yU(t,e){return fL(Y8,t??(()=>!0),e)}function vU(t,e={}){return hL(Y8,t,e)}function _U(t){const e=gU(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Xc(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Xc(s))}},t(n.value,n)));return e}function X8(t,e){return u2(W8(t),e)}const wU={custom:"custom"};function SU(t){return WF($4,t)}const kU=Rt([Se("object"),Se("array"),Se("string"),Se("number"),Se("integer"),Se("boolean"),Se("null"),ge(Rt([Se("object"),Se("array"),Se("string"),Se("number"),Se("integer"),Se("boolean"),Se("null")]))]),bU=Qn({type:kU.optional(),properties:en(B(),xt()).optional(),items:Rt([ge(xt()),xt()]).optional(),required:ge(B()).optional(),additionalProperties:Rt([Ut(),xt()]).optional(),enum:ge(xt()).optional(),const:xt().optional(),$ref:B().optional(),$id:B().optional(),$schema:B().optional(),title:B().optional(),description:B().optional()}).refine(t=>t.type!==void 0||t.properties!==void 0||t.items!==void 0||t.enum!==void 0||t.const!==void 0||t.$ref!==void 0);function x4(t){return t===null||typeof t!="object"?!1:bU.safeParse(t).success}function AC(t){const{required:e,...n}=t;return n}const EU="modulepreload",CU=function(t){return"/"+t},MC={},zu=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=CU(c),c in MC)return;MC[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":EU,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},J8=Symbol.for("quansync.getIsAsync");class ex extends Error{constructor(e="Unexpected promise in sync context"){super(e),this.name="QuansyncError"}}function N4(t){return t&&typeof t=="object"&&typeof t.then=="function"}function PU(t){return t&&typeof t=="object"&&typeof t[Symbol.iterator]=="function"&&"__quansync"in t}function R4(t){const e=function*(...r){return(yield J8)?yield t.async.apply(this,r):t.sync.apply(this,r)};function n(...r){const s=e.apply(this,r);return s.then=(...i)=>t.async.apply(this,r).then(...i),s.__quansync=!0,s}return n.sync=t.sync,n.async=t.async,n}function $U(t){return R4({async:()=>Promise.resolve(t),sync:()=>{if(N4(t))throw new ex;return t}})}function c2(t,e){if(t===J8)return e;if(PU(t))return e?rx(t):nx(t);if(!e&&N4(t))throw new ex;return t}const tx=t=>t;function nx(t,e=tx){let n=t.next();for(;!n.done;)try{n=t.next(c2(e(n.value,!1)))}catch(r){n=t.throw(r)}return c2(n.value)}async function rx(t,e=tx){let n=t.next();for(;!n.done;)try{n=t.next(await c2(e(n.value,!0),!0))}catch(r){n=t.throw(r)}return n.value}function TU(t,e){return R4({name:t.name,async(...n){return rx(t.apply(this,n),e==null?void 0:e.onYield)},sync(...n){return nx(t.apply(this,n),e==null?void 0:e.onYield)}})}function sx(t,e){return N4(t)?$U(t):typeof t=="function"?TU(t,e):R4(t)}sx({async:()=>Promise.resolve(!0),sync:()=>!1});const d0=new Map;class ix extends Error{constructor(e){super(`standard-json: Unsupported schema vendor "${e}".`)}}class Uue extends Error{constructor(e){super(`standard-json: Missing dependencies "${e}".`)}}const xU=async t=>{const e=d0.get(t);if(e)return e;let n;switch(t){case"arktype":n=(await zu(async()=>{const{default:s}=await import("./arktype-aI7TBD0R-Dg-cTJfT.js");return{default:s}},[])).default();break;case"effect":n=(await zu(async()=>{const{default:s}=await import("./effect-QlVUlMFu-B1xpZG9l.js");return{default:s}},[])).default();break;case"sury":n=(await zu(async()=>{const{default:s}=await import("./sury-CWZTCd75-DQQTzWYH.js");return{default:s}},[])).default();break;case"typebox":n=(await zu(async()=>{const{default:s}=await import("./typebox-Dei93FPO-DVTFrS1_.js");return{default:s}},[])).default();break;case"valibot":n=(await zu(async()=>{const{default:s}=await import("./valibot--1zFm7rT-BxkMyQVf.js");return{default:s}},[])).default();break;case"zod":n=(await zu(async()=>{const{default:s}=await import("./zod-Bwrt9trS-CtTSCUvE.js");return{default:s}},[])).default();break;default:throw new ix(t)}const r=await n;return d0.set(t,r),r},NU=sx({sync:(t,e)=>{const n=t["~standard"].vendor,r=d0.get(n);if(!r)throw new ix(n);return r(t,e)},async:async(t,e)=>(await xU(t["~standard"].vendor))(t,e)});function RU(t,e){d0.set(t,e)}const OU=Symbol("Let zodToJsonSchema decide on which parser to use"),Vue=(t,e)=>{if(e.description)try{return{...t,...JSON.parse(e.description)}}catch{}return t},jC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},IU=t=>typeof t=="string"?{...jC,name:t}:{...jC,...t},AU=t=>{const e=IU(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function ox(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Tt(t,e,n,r,s){t[e]=n,ox(t,e,r,s)}const ax=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function is(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?ax(e,t.currentPath):e.join("/")}}function MU(t,e){var r,s,i;const n={type:"array"};return(r=t.type)!=null&&r._def&&((i=(s=t.type)==null?void 0:s._def)==null?void 0:i.typeName)!==me.ZodAny&&(n.items=bt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Tt(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Tt(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Tt(n,"minItems",t.exactLength.value,t.exactLength.message,e),Tt(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function jU(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function zU(){return{type:"boolean"}}function lx(t,e){return bt(t.type._def,e)}const DU=(t,e)=>bt(t.innerType._def,e);function ux(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>ux(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return FU(t,e)}}const FU=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Tt(n,"minimum",r.value,r.message,e);break;case"max":Tt(n,"maximum",r.value,r.message,e);break}return n};function LU(t,e){return{...bt(t.innerType._def,e),default:t.defaultValue()}}function UU(t,e){return e.effectStrategy==="input"?bt(t.schema._def,e):is(e)}function VU(t){return{type:"string",enum:Array.from(t.values)}}const GU=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function HU(t,e){const n=[bt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),bt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(GU(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...c}=i;o=c}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function qU(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let _1;const ri={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(_1===void 0&&(_1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function cx(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":si(n,"email",r.message,e);break;case"format:idn-email":si(n,"idn-email",r.message,e);break;case"pattern:zod":Tr(n,ri.email,r.message,e);break}break;case"url":si(n,"uri",r.message,e);break;case"uuid":si(n,"uuid",r.message,e);break;case"regex":Tr(n,r.regex,r.message,e);break;case"cuid":Tr(n,ri.cuid,r.message,e);break;case"cuid2":Tr(n,ri.cuid2,r.message,e);break;case"startsWith":Tr(n,RegExp(`^${w1(r.value,e)}`),r.message,e);break;case"endsWith":Tr(n,RegExp(`${w1(r.value,e)}$`),r.message,e);break;case"datetime":si(n,"date-time",r.message,e);break;case"date":si(n,"date",r.message,e);break;case"time":si(n,"time",r.message,e);break;case"duration":si(n,"duration",r.message,e);break;case"length":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Tr(n,RegExp(w1(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&si(n,"ipv4",r.message,e),r.version!=="v4"&&si(n,"ipv6",r.message,e);break}case"base64url":Tr(n,ri.base64url,r.message,e);break;case"jwt":Tr(n,ri.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Tr(n,ri.ipv4Cidr,r.message,e),r.version!=="v4"&&Tr(n,ri.ipv6Cidr,r.message,e);break}case"emoji":Tr(n,ri.emoji(),r.message,e);break;case"ulid":{Tr(n,ri.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{si(n,"binary",r.message,e);break}case"contentEncoding:base64":{Tt(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Tr(n,ri.base64,r.message,e);break}}break}case"nanoid":Tr(n,ri.nanoid,r.message,e)}return n}function w1(t,e){return e.patternStrategy==="escape"?ZU(t):t}const BU=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ZU(t){let e="";for(let n=0;n<t.length;n++)BU.has(t[n])||(e+="\\"),e+=t[n];return e}function si(t,e,n,r){var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Tt(t,"format",e,n,r)}function Tr(t,e,n,r){var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:zC(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Tt(t,"pattern",zC(e,r),n,r)}function zC(t,e){var c;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,o=!1,a=!1;for(let d=0;d<r.length;d++){if(i){s+=r[d],i=!1;continue}if(n.i){if(o){if(r[d].match(/[a-z]/)){a?(s+=r[d],s+=`${r[d-2]}-${r[d]}`.toUpperCase(),a=!1):r[d+1]==="-"&&((c=r[d+2])!=null&&c.match(/[a-z]/))?(s+=r[d],a=!0):s+=`${r[d]}${r[d].toUpperCase()}`;continue}}else if(r[d].match(/[a-z]/)){s+=`[${r[d]}${r[d].toUpperCase()}]`;continue}}if(n.m){if(r[d]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[d]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[d]==="."){s+=o?`${r[d]}\r
`:`[${r[d]}\r
]`;continue}s+=r[d],r[d]==="\\"?i=!0:o&&r[d]==="]"?o=!1:!o&&r[d]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function dx(t,e){var r,s,i,o,a,c;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===me.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((d,f)=>({...d,[f]:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]})??is(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===me.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const{type:d,...f}=cx(t.keyType._def,e);return{...n,propertyNames:f}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===me.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===me.ZodBranded&&t.keyType._def.type._def.typeName===me.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){const{type:d,...f}=lx(t.keyType._def,e);return{...n,propertyNames:f}}}return n}function WU(t,e){if(e.mapStrategy==="record")return dx(t,e);const n=bt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||is(e),r=bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||is(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function KU(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function QU(t){return t.target==="openAi"?void 0:{not:is({...t,currentPath:[...t.currentPath,"not"]})}}function YU(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const f0={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function XU(t,e){if(e.target==="openApi3")return DC(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in f0&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const o=f0[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return DC(t,e)}const DC=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>bt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function JU(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:f0[t.innerType._def.typeName],nullable:!0}:{type:[f0[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=bt(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function eV(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",ox(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function tV(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},s=[],i=t.shape();for(const a in i){let c=i[a];if(c===void 0||c._def===void 0)continue;let d=rV(c);d&&n&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),d=!1);const f=bt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});f!==void 0&&(r.properties[a]=f,d||s.push(a))}s.length&&(r.required=s);const o=nV(t,e);return o!==void 0&&(r.additionalProperties=o),r}function nV(t,e){if(t.catchall._def.typeName!=="ZodNever")return bt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function rV(t){try{return t.isOptional()}catch{return!0}}const sV=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return bt(t.innerType._def,e);const n=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:is(e)},n]}:is(e)},iV=(t,e)=>{if(e.pipeStrategy==="input")return bt(t.in._def,e);if(e.pipeStrategy==="output")return bt(t.out._def,e);const n=bt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=bt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function oV(t,e){return bt(t.type._def,e)}function aV(t,e){const r={type:"array",uniqueItems:!0,items:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Tt(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Tt(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function lV(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>bt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:bt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>bt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function uV(t){return{not:is(t)}}function cV(t){return is(t)}const dV=(t,e)=>bt(t.innerType._def,e),fV=(t,e,n)=>{switch(e){case me.ZodString:return cx(t,n);case me.ZodNumber:return eV(t,n);case me.ZodObject:return tV(t,n);case me.ZodBigInt:return jU(t,n);case me.ZodBoolean:return zU();case me.ZodDate:return ux(t,n);case me.ZodUndefined:return uV(n);case me.ZodNull:return YU(n);case me.ZodArray:return MU(t,n);case me.ZodUnion:case me.ZodDiscriminatedUnion:return XU(t,n);case me.ZodIntersection:return HU(t,n);case me.ZodTuple:return lV(t,n);case me.ZodRecord:return dx(t,n);case me.ZodLiteral:return qU(t,n);case me.ZodEnum:return VU(t);case me.ZodNativeEnum:return KU(t);case me.ZodNullable:return JU(t,n);case me.ZodOptional:return sV(t,n);case me.ZodMap:return WU(t,n);case me.ZodSet:return aV(t,n);case me.ZodLazy:return()=>t.getter()._def;case me.ZodPromise:return oV(t,n);case me.ZodNaN:case me.ZodNever:return QU(n);case me.ZodEffects:return UU(t,n);case me.ZodAny:return is(n);case me.ZodUnknown:return cV(n);case me.ZodDefault:return LU(t,n);case me.ZodBranded:return lx(t,n);case me.ZodReadonly:return dV(t,n);case me.ZodCatch:return DU(t,n);case me.ZodPipeline:return iV(t,n);case me.ZodFunction:case me.ZodVoid:case me.ZodSymbol:return;default:return(r=>{})()}};function bt(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const c=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(c!==OU)return c}if(r&&!n){const c=hV(r,e);if(c!==void 0)return c}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=fV(t,t.typeName,e),o=typeof i=="function"?bt(i(),e):i;if(o&&pV(t,e,o),e.postProcess){const c=e.postProcess(o,t,e);return s.jsonSchema=o,c}return s.jsonSchema=o,o}const hV=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ax(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),is(e)):e.$refStrategy==="seen"?is(e):void 0}},pV=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),mV=(t,e)=>{const n=AU(e);let r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((c,[d,f])=>({...c,[d]:bt(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,d]},!0)??is(n)}),{}):void 0;const s=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=bt(t._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??is(n),o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function hd(t){if(typeof t!="object"||t===null||!("~standard"in t))return!1;const e=t["~standard"];return typeof e!="object"||e===null?!1:"version"in e&&e.version===1&&"vendor"in e&&typeof e.vendor=="string"&&"validate"in e&&typeof e.validate=="function"}RU("zod",t=>t&&typeof t=="object"&&"_zod"in t?pL(t):mV(t));function ed(t){return hd(t)?NU.sync(t):t}function gV(t){const e=t.properties??{};return Object.entries(e).map(([n,r])=>({name:n,type:r&&typeof r=="object"&&"type"in r?r.type:"object",description:r&&typeof r=="object"&&"description"in r?r.description??"":"",isRequired:Array.isArray(t.required)?t.required.includes(n):!1,schema:typeof r=="object"&&r!==null?r:{}}))}function yV(t){const e=t.inputSchema;let n;if(x4(e))n=e;else if(hd(e))n=ed(e);else return console.warn("Unknown inputSchema type, returning empty parameters"),[];return gV(n)}function vV(t){return t.type==="object"&&typeof t.additionalProperties=="object"&&t.additionalProperties!==null}function cs(t,e,n){if(vV(t)){const s=e.length?e.join("."):"(root)";throw new Error(`Record types (objects with dynamic keys) are not supported in ${n}. Found at path "${s}". Replace it with an object using explicit keys.`)}if(t.properties)for(const[s,i]of Object.entries(t.properties))typeof i=="object"&&i!==null&&cs(i,[...e,s],n);typeof t.additionalProperties=="object"&&t.additionalProperties!==null&&cs(t.additionalProperties,[...e,"[*]"],n),t.items&&(Array.isArray(t.items)?t.items.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`${i}`],n)}):typeof t.items=="object"&&cs(t.items,[...e,"[]"],n));const r=t.prefixItems;Array.isArray(r)&&r.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`${i}`],n)}),t.allOf&&t.allOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`&${i}`],n)}),t.anyOf&&t.anyOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`|${i}`],n)}),t.oneOf&&t.oneOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`|${i}`],n)}),typeof t.not=="object"&&t.not!==null&&cs(t.not,[...e,"!"],n),typeof t.if=="object"&&t.if!==null&&cs(t.if,[...e,"if"],n),typeof t.then=="object"&&t.then!==null&&cs(t.then,[...e,"then"],n),typeof t.else=="object"&&t.else!==null&&cs(t.else,[...e,"else"],n)}function fx(t,e="schema"){if(!t)return;let n;try{if(hd(t)){const r=ed(t);if(!r||Object.keys(r).length===0)return;n=r}else if(typeof t=="object"&&t!==null&&"type"in t)n=t;else return}catch{return}cs(n,[],e)}function Ph(t,e){if(!/^[a-zA-Z0-9_-]+$/.test(t))throw new Error(`${e} "${t}" must only contain letters, numbers, underscores, and hyphens.`)}function As(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function kn(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let hx=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hx=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function d2(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const f2=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class vs extends Error{}class zr extends vs{constructor(e,n,r,s){super(`${zr.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new fy({message:r,cause:f2(n)});const i=n;return e===400?new mx(e,i,r,s):e===401?new gx(e,i,r,s):e===403?new yx(e,i,r,s):e===404?new vx(e,i,r,s):e===409?new _x(e,i,r,s):e===422?new wx(e,i,r,s):e===429?new Sx(e,i,r,s):e>=500?new kx(e,i,r,s):new zr(e,i,r,s)}}class h2 extends zr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class fy extends zr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class px extends fy{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mx extends zr{}class gx extends zr{}class yx extends zr{}class vx extends zr{}class _x extends zr{}class wx extends zr{}class Sx extends zr{}class kx extends zr{}const _V=/^[a-z][a-z0-9+.-]*:/i,wV=t=>_V.test(t);let p2=t=>(p2=Array.isArray,p2(t)),FC=p2;function SV(t){return typeof t!="object"?{}:t??{}}function kV(t){if(!t)return!0;for(const e in t)return!1;return!0}function bV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const EV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new vs(`${t} must be an integer`);if(e<0)throw new vs(`${t} must be a positive integer`);return e},CV=t=>{try{return JSON.parse(t)}catch{return}},PV=t=>new Promise(e=>setTimeout(e,t)),Yu="0.84.0";function $V(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const TV=()=>{var n;const t=$V();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yu,"X-Stainless-OS":UC(Deno.build.os),"X-Stainless-Arch":LC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yu,"X-Stainless-OS":UC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":LC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=xV();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const LC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",UC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let VC;const NV=()=>VC??(VC=TV());function RV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new TamboAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Ex(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bx({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function Cx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OV(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const IV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function AV(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let GC;function O4(t){let e;return(GC??(e=new globalThis.TextEncoder,GC=e.encode.bind(e)))(t)}let HC;function qC(t){let e;return(HC??(e=new globalThis.TextDecoder,HC=e.decode.bind(e)))(t)}var ds,fs;class hy{constructor(){ds.set(this,void 0),fs.set(this,void 0),As(this,ds,new Uint8Array),As(this,fs,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?O4(e):e;As(this,ds,AV([kn(this,ds,"f"),n]));const r=[];let s;for(;(s=MV(kn(this,ds,"f"),kn(this,fs,"f")))!=null;){if(s.carriage&&kn(this,fs,"f")==null){As(this,fs,s.index);continue}if(kn(this,fs,"f")!=null&&(s.index!==kn(this,fs,"f")+1||s.carriage)){r.push(qC(kn(this,ds,"f").subarray(0,kn(this,fs,"f")-1))),As(this,ds,kn(this,ds,"f").subarray(kn(this,fs,"f"))),As(this,fs,null);continue}const i=kn(this,fs,"f")!==null?s.preceding-1:s.preceding,o=qC(kn(this,ds,"f").subarray(0,i));r.push(o),As(this,ds,kn(this,ds,"f").subarray(s.index)),As(this,fs,null)}return r}flush(){return kn(this,ds,"f").length?this.decode(`
`):[]}}ds=new WeakMap,fs=new WeakMap;hy.NEWLINE_CHARS=new Set([`
`,"\r"]);hy.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function MV(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function jV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const h0={off:0,error:200,warn:300,info:400,debug:500},BC=(t,e,n)=>{if(t){if(bV(h0,t))return t;Nr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(h0))}`)}};function kf(){}function Tm(t,e,n){return!e||h0[t]>h0[n]?kf:e[t].bind(e)}const zV={error:kf,warn:kf,info:kf,debug:kf};let ZC=new WeakMap;function Nr(t){const e=t.logger,n=t.logLevel??"off";if(!e)return zV;const r=ZC.get(e);if(r&&r[0]===n)return r[1];const s={error:Tm("error",e,n),warn:Tm("warn",e,n),info:Tm("info",e,n),debug:Tm("debug",e,n)};return ZC.set(e,[n,s]),s}const _l=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var of;class gc{constructor(e,n,r){this.iterator=e,of.set(this,void 0),this.controller=n,As(this,of,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Nr(r):console;async function*o(){if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const c of DV(e,n))try{yield JSON.parse(c.data)}catch(d){throw i.error("Could not parse message into JSON:",c.data),i.error("From chunk:",c.raw),d}a=!0}catch(c){if(d2(c))return;throw c}finally{a||n.abort()}}return new gc(o,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const a=new hy,c=Cx(e);for await(const d of c)for(const f of a.decode(d))yield f;for(const d of a.flush())yield d}async function*o(){if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const c of i())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(d2(c))return;throw c}finally{a||n.abort()}}return new gc(o,n,r)}[(of=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new gc(()=>s(e),this.controller,kn(this,of,"f")),new gc(()=>s(n),this.controller,kn(this,of,"f"))]}toReadableStream(){const e=this;let n;return bx({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=O4(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*DV(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new vs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new vs("Attempted to iterate over a response with no body");const n=new LV,r=new hy,s=Cx(t.body);for await(const i of FV(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*FV(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?O4(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=jV(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class LV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=UV(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function UV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Px(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var m;if(e.options.stream)return Nr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):gc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),c=(m=a==null?void 0:a.split(";")[0])==null?void 0:m.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Nr(t).debug(`[${r}] response parsed`,_l({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}var bf;class py extends Promise{constructor(e,n,r=Px){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,bf.set(this,void 0),As(this,bf,e)}_thenUnwrap(e){return new py(kn(this,bf,"f"),this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(kn(this,bf,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}bf=new WeakMap;var xm;class VV{constructor(e,n,r,s){xm.set(this,void 0),As(this,xm,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new vs("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await kn(this,xm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(xm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class GV extends py{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await Px(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class HV extends VV{constructor(e,n,r,s){super(e,n,r,s),this.items=r.items||[],this.total=r.total||0,this.count=r.count||0}getPaginatedItems(){return this.items??[]}nextPageRequestOptions(){const e=this.options.query.offset??0,n=this.getPaginatedItems().length,r=e+n,s=this.total;return s&&r<s?{...this.options,query:{...SV(this.options.query),offset:r}}:null}}const $x=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Vf(t,e,n){return $x(),new File(t,e??"unknown_file",n)}function cg(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Tx=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",qV=async(t,e)=>({...t,body:await ZV(t.body,e)}),WC=new WeakMap;function BV(t){const e=typeof t=="function"?t:t.fetch,n=WC.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return WC.set(e,r),r}const ZV=async(t,e)=>{if(!await BV(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>m2(n,r,s))),n},WV=t=>t instanceof Blob&&"name"in t,m2=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Vf([await n.blob()],cg(n)));else if(Tx(n))t.append(e,Vf([await new Response(Ex(n)).blob()],cg(n)));else if(WV(n))t.append(e,n,cg(n));else if(Array.isArray(n))await Promise.all(n.map(r=>m2(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>m2(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},xx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",KV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xx(t),QV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function YV(t,e,n){if($x(),t=await t,KV(t))return t instanceof File?t:Vf([await t.arrayBuffer()],t.name);if(QV(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Vf(await g2(s),e,n)}const r=await g2(t);if(e||(e=cg(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Vf(r,e,n)}async function g2(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(xx(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Tx(t))for await(const r of t)e.push(...await g2(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${XV(t)}`)}return e}function XV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class os{constructor(e){this._client=e}}class Nx extends os{transcribe(e,n){return this._client.post("/audio/transcribe",qV({body:e,...n},this._client))}}const Rx=Symbol("brand.privateNullableHeaders");function*JV(t){if(!t)return;if(Rx in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():FC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=FC(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const vi=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of JV(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[Rx]:!0,values:e,nulls:n}};class Ox extends os{getMcpToken(e,n){return this._client.post("/auth/mcp/access-token",{body:e,...n})}getToken(e,n){return this._client.post("/oauth/token",{body:e,...n,headers:vi([{"Content-Type":"application/x-www-form-urlencoded"},n==null?void 0:n.headers])})}}function Ix(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const KC=Object.freeze(Object.create(null)),eG=(t=Ix)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((f,m,y)=>{var E;/[?#]/.test(m)&&(s=!0);const v=r[y];let _=(s?encodeURIComponent:t)(""+v);return y!==r.length&&(v==null||typeof v=="object"&&v.toString===((E=Object.getPrototypeOf(Object.getPrototypeOf(v.hasOwnProperty??KC)??KC))==null?void 0:E.toString))&&(_=v+"",i.push({start:f.length+m.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),f+m+(y===r.length?"":_)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(a))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((y,v)=>{const _=" ".repeat(v.start-f),E="^".repeat(v.length);return f=v.start+v.length,y+_+E},"");throw new vs(`Path parameters result in path with invalid segments:
${i.map(y=>y.error).join(`
`)}
${o}
${m}`)}return o},Ft=eG(Ix);class Ax extends os{retrieve(e,n){return this._client.get(Ft`/registry/${e}`,n)}}class Mx extends os{list(e,n){return this._client.get(Ft`/projects/${e}/api-keys`,n)}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/projects/${s}/api-key/${e}`,r)}}class jx extends os{list(e,n){return this._client.get(Ft`/projects/${e}/provider-keys`,n)}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/projects/${s}/provider-key/${e}`,r)}}class my extends os{constructor(){super(...arguments),this.apiKey=new Mx(this._client),this.providerKey=new jx(this._client)}retrieve(e,n){return this._client.get(Ft`/projects/${e}`,n)}delete(e,n){return this._client.delete(Ft`/projects/${e}`,n)}getCurrent(e){return this._client.get("/projects",e)}}my.APIKey=Mx;my.ProviderKey=jx;let zx=class extends os{create(e,n,r){return this._client.post(Ft`/threads/${e}/messages`,{body:n,...r})}list(e,n={},r){return this._client.get(Ft`/threads/${e}/messages`,{query:n,...r})}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/threads/${s}/messages/${e}`,{...r,headers:vi([{Accept:"*/*"},r==null?void 0:r.headers])})}updateComponentState(e,n,r){const{id:s,...i}=n;return this._client.put(Ft`/threads/${s}/messages/${e}/component-state`,{body:i,...r})}};class Dx extends os{list(e,n,r){const{id:s}=n;return this._client.get(Ft`/threads/${s}/messages/${e}/suggestions`,r)}generate(e,n,r){const{id:s,...i}=n;return this._client.post(Ft`/threads/${s}/messages/${e}/suggestions`,{body:i,...r})}}let gy=class extends os{constructor(){super(...arguments),this.messages=new zx(this._client),this.suggestions=new Dx(this._client)}create(e,n){return this._client.post("/threads",{body:e,...n})}retrieve(e,n={},r){return this._client.get(Ft`/threads/${e}`,{query:n,...r})}update(e,n,r){return this._client.put(Ft`/threads/${e}`,{body:n,...r})}list(e,n={},r){return this._client.getAPIList(Ft`/threads/project/${e}`,HV,{query:n,...r})}delete(e,n){return this._client.delete(Ft`/threads/${e}`,{...n,headers:vi([{Accept:"*/*"},n==null?void 0:n.headers])})}advance(e){return this._client.post("/threads/advance",e)}advanceByID(e,n,r){return this._client.post(Ft`/threads/${e}/advance`,{body:n,...r})}cancel(e,n){return this._client.post(Ft`/threads/${e}/cancel`,n)}generateName(e,n={},r){const{contextKey:s}=n??{};return this._client.post(Ft`/threads/${e}/generate-name`,{query:{contextKey:s},...r})}};gy.Messages=zx;gy.Suggestions=Dx;class fu extends os{constructor(){super(...arguments),this.registry=new Ax(this._client),this.projects=new my(this._client),this.threads=new gy(this._client),this.auth=new Ox(this._client),this.audio=new Nx(this._client)}}fu.Registry=Ax;fu.Projects=my;fu.Threads=gy;fu.Auth=Ox;fu.Audio=Nx;class Fx extends os{presign(e,n){return this._client.post("/storage/presign",{body:e,...n})}}class Lx extends os{list(e,n={},r){return this._client.get(Ft`/v1/threads/${e}/messages`,{query:n,...r})}get(e,n,r){const{threadId:s}=n;return this._client.get(Ft`/v1/threads/${s}/messages/${e}`,r)}}class Ux extends os{create(e,n){return this._client.post("/v1/threads/runs",{body:e,...n,headers:vi([{Accept:"text/event-stream"},n==null?void 0:n.headers]),stream:!0})}delete(e,n,r){const{threadId:s}=n;return this._client.delete(Ft`/v1/threads/${s}/runs/${e}`,r)}run(e,n,r){return this._client.post(Ft`/v1/threads/${e}/runs`,{body:n,...r,headers:vi([{Accept:"text/event-stream"},r==null?void 0:r.headers]),stream:!0})}}class yy extends os{constructor(){super(...arguments),this.messages=new Lx(this._client),this.runs=new Ux(this._client)}create(e,n){return this._client.post("/v1/threads",{body:e,...n})}retrieve(e,n){return this._client.get(Ft`/v1/threads/${e}`,n)}list(e={},n){return this._client.get("/v1/threads",{query:e,...n})}delete(e,n){return this._client.delete(Ft`/v1/threads/${e}`,{...n,headers:vi([{Accept:"*/*"},n==null?void 0:n.headers])})}}yy.Messages=Lx;yy.Runs=Ux;var S1={};const k1=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=S1==null?void 0:S1[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var y2,I4,dg,Vx;const Gx={production:"https://api.tambo.co",staging:"https://hydra-api-dev.up.railway.app"};class En{constructor({baseURL:e=k1("TAMBO_AI_BASE_URL"),apiKey:n=k1("TAMBO_API_KEY")??null,bearer:r=null,...s}={}){y2.add(this),dg.set(this,void 0),this.beta=new fu(this),this.storage=new Fx(this),this.threads=new yy(this);const i={apiKey:n,bearer:r,...s,baseURL:e,environment:s.environment??"production"};if(e&&s.environment)throw new vs("Ambiguous URL; The `baseURL` option (or TAMBO_AI_BASE_URL env var) and the `environment` option are given. If you want to use the environment you must pass baseURL: null");this.baseURL=i.baseURL||Gx[i.environment||"production"],this.timeout=i.timeout??I4.DEFAULT_TIMEOUT,this.logger=i.logger??console;const o="warn";this.logLevel=o,this.logLevel=BC(i.logLevel,"ClientOptions.logLevel",this)??BC(k1("TAMBO_AI_LOG"),"process.env['TAMBO_AI_LOG']",this)??o,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??0,this.fetch=i.fetch??RV(),As(this,dg,IV),this._options=i,this.apiKey=n,this.bearer=r}withOptions(e){return new this.constructor({...this._options,environment:e.environment?e.environment:void 0,baseURL:e.environment?void 0:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,bearer:this.bearer,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.bearer&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or bearer to be set. Or for one of the "x-api-key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return vi([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return vi([{"x-api-key":this.apiKey}])}async bearerAuth(e){if(this.bearer!=null)return vi([{Authorization:`Bearer ${this.bearer}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new vs(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Yu}`}defaultIdempotencyKey(){return`stainless-node-retry-${hx()}`}makeStatusError(e,n,r,s){return zr.generate(e,n,r,s)}buildURL(e,n,r){const s=!kn(this,y2,"m",Vx).call(this)&&r||this.baseURL,i=wV(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return kV(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new py(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var k,p;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:o,url:a,timeout:c}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(o,{url:a,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,m=Date.now();if(Nr(this).debug(`[${d}] sending request`,_l({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:o.headers})),(k=s.signal)!=null&&k.aborted)throw new h2;const y=new AbortController,v=await this.fetchWithTimeout(a,o,c,y).catch(f2),_=Date.now();if(v instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((p=s.signal)!=null&&p.aborted)throw new h2;const g=d2(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return Nr(this).info(`[${d}] connection ${g?"timed out":"failed"} - ${w}`),Nr(this).debug(`[${d}] connection ${g?"timed out":"failed"} (${w})`,_l({retryOfRequestLogID:r,url:a,durationMs:_-m,message:v.message})),this.retryRequest(s,n,r??d);throw Nr(this).info(`[${d}] connection ${g?"timed out":"failed"} - error; no more retries left`),Nr(this).debug(`[${d}] connection ${g?"timed out":"failed"} (error; no more retries left)`,_l({retryOfRequestLogID:r,url:a,durationMs:_-m,message:v.message})),g?new px:new fy({cause:v})}const E=`[${d}${f}] ${o.method} ${a} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${_-m}ms`;if(!v.ok){const w=await this.shouldRetry(v);if(n&&w){const A=`retrying, ${n} attempts remaining`;return await OV(v.body),Nr(this).info(`${E} - ${A}`),Nr(this).debug(`[${d}] response error (${A})`,_l({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:_-m})),this.retryRequest(s,n,r??d,v.headers)}const g=w?"error; no more retries left":"error; not retryable";Nr(this).info(`${E} - ${g}`);const C=await v.text().catch(A=>f2(A).message),$=CV(C),N=$?void 0:C;throw Nr(this).debug(`[${d}] response error (${g})`,_l({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:N,durationMs:Date.now()-m})),this.makeStatusError(v.status,$,N,v.headers)}return Nr(this).info(E),Nr(this).debug(`[${d}] response start`,_l({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:_-m})),{response:v,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:m}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new GV(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:o,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const o=s==null?void 0:s.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(i=c)}const a=s==null?void 0:s.get("retry-after");if(a&&!i){const c=parseFloat(a);Number.isNaN(c)?i=Date.parse(a)-Date.now():i=c*1e3}if(!(i&&0<=i&&i<60*1e3)){const c=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,c)}return await PV(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(1*Math.pow(2,i),5),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:o,defaultBaseURL:a}=r,c=this.buildURL(i,o,a);"timeout"in r&&EV("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:f}=this.buildBody({options:r}),m=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:m,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=vi([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...NV()},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=vi([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ex(e)}:kn(this,dg,"f").call(this,{body:e,headers:r})}}I4=En,dg=new WeakMap,y2=new WeakSet,Vx=function(){return this.baseURL!==Gx[this._options.environment||"production"]};En.TamboAI=I4;En.DEFAULT_TIMEOUT=6e4;En.TamboAIError=vs;En.APIError=zr;En.APIConnectionError=fy;En.APIConnectionTimeoutError=px;En.APIUserAbortError=h2;En.NotFoundError=vx;En.ConflictError=_x;En.RateLimitError=Sx;En.BadRequestError=mx;En.AuthenticationError=gx;En.InternalServerError=kx;En.PermissionDeniedError=yx;En.UnprocessableEntityError=wx;En.toFile=YV;En.Beta=fu;En.Storage=Fx;En.Threads=yy;async function QC(t,e,n,r){let i=0;for(;;)try{const a=await t.post(`/threads${n?`/${n}`:""}/advancestream`,{body:e,...r,headers:{...r==null?void 0:r.headers,Accept:"text/event-stream"}}).asResponse();return tG(a)}catch(o){if(i<2){i++,console.warn(`Request failed, attempting retry ${i}/2`);continue}throw o}}async function*tG(t){const e=new TextDecoder,n=5;let r=0;const s=t.body.getReader();for(;;)try{const{done:i,value:o}=await s.read();if(i)break;const c=e.decode(o).split(`
`).filter(d=>d.trim());for(const d of c){if(d==="data: DONE")continue;if(d.startsWith("error: "))throw new Error(d.slice(7));const f=d.startsWith("data: ")?d.slice(6):d;if(f)try{yield JSON.parse(f),r=0}catch{if(r<n){r++,console.warn(`Failed to parse JSON chunk, skipping. Attempt ${r}/${n}`);continue}throw new Error("Failed to parse JSON after multiple chunks.")}}}catch(i){throw s.releaseLock(),i}}var pd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nG={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ma,TS,eP,rG=(eP=class{constructor(){je(this,ma,nG);je(this,TS,!1)}setTimeoutProvider(t){_e(this,ma,t)}setTimeout(t,e){return q(this,ma).setTimeout(t,e)}clearTimeout(t){q(this,ma).clearTimeout(t)}setInterval(t,e){return q(this,ma).setInterval(t,e)}clearInterval(t){q(this,ma).clearInterval(t)}},ma=new WeakMap,TS=new WeakMap,eP),Ol=new rG;function sG(t){setTimeout(t,0)}var tu=typeof window>"u"||"Deno"in globalThis;function Ar(){}function iG(t,e){return typeof t=="function"?t(e):t}function v2(t){return typeof t=="number"&&t>=0&&t!==1/0}function Hx(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ja(t,e){return typeof t=="function"?t(e):t}function zs(t,e){return typeof t=="function"?t(e):t}function YC(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==A4(o,e.options))return!1}else if(!$h(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function XC(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(nu(e.options.mutationKey)!==nu(i))return!1}else if(!$h(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function A4(t,e){return((e==null?void 0:e.queryKeyHashFn)||nu)(t)}function nu(t){return JSON.stringify(t,(e,n)=>_2(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function $h(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>$h(t[n],e[n])):!1}var oG=Object.prototype.hasOwnProperty;function qx(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=JC(t)&&JC(e);if(!r&&!(_2(t)&&_2(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,c=r?new Array(a):{};let d=0;for(let f=0;f<a;f++){const m=r?f:o[f],y=t[m],v=e[m];if(y===v){c[m]=y,(r?f<i:oG.call(t,m))&&d++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){c[m]=v;continue}const _=qx(y,v,n+1);c[m]=_,_===y&&d++}return i===a&&d===i?t:c}function p0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function JC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _2(t){if(!e6(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!e6(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e6(t){return Object.prototype.toString.call(t)==="[object Object]"}function aG(t){return new Promise(e=>{Ol.setTimeout(e,t)})}function w2(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?qx(t,e):e}function lG(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uG(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var M4=Symbol();function Bx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===M4?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function j4(t,e){return typeof t=="function"?t(...e):!!t}function cG(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var Al,ga,Rc,tP,dG=(tP=class extends pd{constructor(){super();je(this,Al);je(this,ga);je(this,Rc);_e(this,Rc,e=>{if(!tu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,ga)||this.setEventListener(q(this,Rc))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,ga))==null||e.call(this),_e(this,ga,void 0))}setEventListener(e){var n;_e(this,Rc,e),(n=q(this,ga))==null||n.call(this),_e(this,ga,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){q(this,Al)!==e&&(_e(this,Al,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof q(this,Al)=="boolean"?q(this,Al):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Al=new WeakMap,ga=new WeakMap,Rc=new WeakMap,tP),z4=new dG;function S2(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var fG=sG;function hG(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=fG;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Ln=hG(),Oc,ya,Ic,nP,pG=(nP=class extends pd{constructor(){super();je(this,Oc,!0);je(this,ya);je(this,Ic);_e(this,Ic,e=>{if(!tu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,ya)||this.setEventListener(q(this,Ic))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,ya))==null||e.call(this),_e(this,ya,void 0))}setEventListener(e){var n;_e(this,Ic,e),(n=q(this,ya))==null||n.call(this),_e(this,ya,e(this.setOnline.bind(this)))}setOnline(e){q(this,Oc)!==e&&(_e(this,Oc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return q(this,Oc)}},Oc=new WeakMap,ya=new WeakMap,Ic=new WeakMap,nP),m0=new pG;function mG(t){return Math.min(1e3*2**t,3e4)}function Zx(t){return(t??"online")==="online"?m0.isOnline():!0}var k2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Wx(t){let e=!1,n=0,r;const s=S2(),i=()=>s.status!=="pending",o=E=>{var k;if(!i()){const p=new k2(E);y(p),(k=t.onCancel)==null||k.call(t,p)}},a=()=>{e=!0},c=()=>{e=!1},d=()=>z4.isFocused()&&(t.networkMode==="always"||m0.isOnline())&&t.canRun(),f=()=>Zx(t.networkMode)&&t.canRun(),m=E=>{i()||(r==null||r(),s.resolve(E))},y=E=>{i()||(r==null||r(),s.reject(E))},v=()=>new Promise(E=>{var k;r=p=>{(i()||d())&&E(p)},(k=t.onPause)==null||k.call(t)}).then(()=>{var E;r=void 0,i()||(E=t.onContinue)==null||E.call(t)}),_=()=>{if(i())return;let E;const k=n===0?t.initialPromise:void 0;try{E=k??t.fn()}catch(p){E=Promise.reject(p)}Promise.resolve(E).then(m).catch(p=>{var N;if(i())return;const w=t.retry??(tu?0:3),g=t.retryDelay??mG,C=typeof g=="function"?g(n,p):g,$=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,p);if(e||!$){y(p);return}n++,(N=t.onFail)==null||N.call(t,n,p),aG(C).then(()=>d()?void 0:v()).then(()=>{e?y(p):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:f,start:()=>(f()?_():v().then(_),s)}}var Ml,rP,Kx=(rP=class{constructor(){je(this,Ml)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v2(this.gcTime)&&_e(this,Ml,Ol.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tu?1/0:5*60*1e3))}clearGcTimeout(){q(this,Ml)&&(Ol.clearTimeout(q(this,Ml)),_e(this,Ml,void 0))}},Ml=new WeakMap,rP),jl,Ac,Is,zl,Wn,Ah,Dl,hi,ho,sP,gG=(sP=class extends Kx{constructor(e){super();je(this,hi);je(this,jl);je(this,Ac);je(this,Is);je(this,zl);je(this,Wn);je(this,Ah);je(this,Dl);_e(this,Dl,!1),_e(this,Ah,e.defaultOptions),this.setOptions(e.options),this.observers=[],_e(this,zl,e.client),_e(this,Is,q(this,zl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,_e(this,jl,n6(this.options)),this.state=e.state??q(this,jl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=q(this,Wn))==null?void 0:e.promise}setOptions(e){if(this.options={...q(this,Ah),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=n6(this.options);n.data!==void 0&&(this.setState(t6(n.data,n.dataUpdatedAt)),_e(this,jl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Is).remove(this)}setData(e,n){const r=w2(this.state.data,e,this.options);return tt(this,hi,ho).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){tt(this,hi,ho).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=q(this,Wn))==null?void 0:r.promise;return(s=q(this,Wn))==null||s.cancel(e),n?n.then(Ar).catch(Ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,jl))}isActive(){return this.observers.some(e=>zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===M4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ja(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Hx(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,Wn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,Wn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),q(this,Is).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(q(this,Wn)&&(q(this,Dl)?q(this,Wn).cancel({revert:!0}):q(this,Wn).cancelRetry()),this.scheduleGc()),q(this,Is).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,hi,ho).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,m,y,v,_,E,k,p,w,g;if(this.state.fetchStatus!=="idle"&&((c=q(this,Wn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,Wn))return q(this,Wn).continueRetry(),q(this,Wn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find($=>$.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(_e(this,Dl,!0),r.signal)})},i=()=>{const C=Bx(this.options,n),N=(()=>{const j={client:q(this,zl),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return _e(this,Dl,!1),this.options.persister?this.options.persister(C,N,this):C(N)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,zl),state:this.state,fetchFn:i};return s(C),C})();(d=this.options.behavior)==null||d.onFetch(a,this),_e(this,Ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=a.fetchOptions)==null?void 0:f.meta))&&tt(this,hi,ho).call(this,{type:"fetch",meta:(m=a.fetchOptions)==null?void 0:m.meta}),_e(this,Wn,Wx({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof k2&&C.revert&&this.setState({...q(this,Ac),fetchStatus:"idle"}),r.abort()},onFail:(C,$)=>{tt(this,hi,ho).call(this,{type:"failed",failureCount:C,error:$})},onPause:()=>{tt(this,hi,ho).call(this,{type:"pause"})},onContinue:()=>{tt(this,hi,ho).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await q(this,Wn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(v=(y=q(this,Is).config).onSuccess)==null||v.call(y,C,this),(E=(_=q(this,Is).config).onSettled)==null||E.call(_,C,this.state.error,this),C}catch(C){if(C instanceof k2){if(C.silent)return q(this,Wn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw tt(this,hi,ho).call(this,{type:"error",error:C}),(p=(k=q(this,Is).config).onError)==null||p.call(k,C,this),(g=(w=q(this,Is).config).onSettled)==null||g.call(w,this.state.data,C,this),C}finally{this.scheduleGc()}}},jl=new WeakMap,Ac=new WeakMap,Is=new WeakMap,zl=new WeakMap,Wn=new WeakMap,Ah=new WeakMap,Dl=new WeakMap,hi=new WeakSet,ho=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Qx(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...t6(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return _e(this,Ac,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ln.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,Is).notify({query:this,type:"updated",action:e})})},sP);function Qx(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Zx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function t6(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function n6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zr,pt,Mh,xr,Fl,Mc,vo,va,jh,jc,zc,Ll,Ul,_a,Dc,Ct,Ef,b2,E2,C2,P2,$2,T2,x2,Yx,iP,yG=(iP=class extends pd{constructor(e,n){super();je(this,Ct);je(this,Zr);je(this,pt);je(this,Mh);je(this,xr);je(this,Fl);je(this,Mc);je(this,vo);je(this,va);je(this,jh);je(this,jc);je(this,zc);je(this,Ll);je(this,Ul);je(this,_a);je(this,Dc,new Set);this.options=n,_e(this,Zr,e),_e(this,va,null),_e(this,vo,S2()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,pt).addObserver(this),r6(q(this,pt),this.options)?tt(this,Ct,Ef).call(this):this.updateResult(),tt(this,Ct,P2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return N2(q(this,pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return N2(q(this,pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,Ct,$2).call(this),tt(this,Ct,T2).call(this),q(this,pt).removeObserver(this)}setOptions(e){const n=this.options,r=q(this,pt);if(this.options=q(this,Zr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zs(this.options.enabled,q(this,pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,Ct,x2).call(this),q(this,pt).setOptions(this.options),n._defaulted&&!p0(this.options,n)&&q(this,Zr).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,pt),observer:this});const s=this.hasListeners();s&&s6(q(this,pt),r,this.options,n)&&tt(this,Ct,Ef).call(this),this.updateResult(),s&&(q(this,pt)!==r||zs(this.options.enabled,q(this,pt))!==zs(n.enabled,q(this,pt))||ja(this.options.staleTime,q(this,pt))!==ja(n.staleTime,q(this,pt)))&&tt(this,Ct,b2).call(this);const i=tt(this,Ct,E2).call(this);s&&(q(this,pt)!==r||zs(this.options.enabled,q(this,pt))!==zs(n.enabled,q(this,pt))||i!==q(this,_a))&&tt(this,Ct,C2).call(this,i)}getOptimisticResult(e){const n=q(this,Zr).getQueryCache().build(q(this,Zr),e),r=this.createResult(n,e);return _G(this,r)&&(_e(this,xr,r),_e(this,Mc,this.options),_e(this,Fl,q(this,pt).state)),r}getCurrentResult(){return q(this,xr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&q(this,vo).status==="pending"&&q(this,vo).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){q(this,Dc).add(e)}getCurrentQuery(){return q(this,pt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=q(this,Zr).defaultQueryOptions(e),r=q(this,Zr).getQueryCache().build(q(this,Zr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return tt(this,Ct,Ef).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,xr)))}createResult(e,n){var G;const r=q(this,pt),s=this.options,i=q(this,xr),o=q(this,Fl),a=q(this,Mc),d=e!==r?e.state:q(this,Mh),{state:f}=e;let m={...f},y=!1,v;if(n._optimisticResults){const V=this.hasListeners(),H=!V&&r6(e,n),Q=V&&s6(e,r,n,s);(H||Q)&&(m={...m,...Qx(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:_,errorUpdatedAt:E,status:k}=m;v=m.data;let p=!1;if(n.placeholderData!==void 0&&v===void 0&&k==="pending"){let V;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(V=i.data,p=!0):V=typeof n.placeholderData=="function"?n.placeholderData((G=q(this,zc))==null?void 0:G.state.data,q(this,zc)):n.placeholderData,V!==void 0&&(k="success",v=w2(i==null?void 0:i.data,V,n),y=!0)}if(n.select&&v!==void 0&&!p)if(i&&v===(o==null?void 0:o.data)&&n.select===q(this,jh))v=q(this,jc);else try{_e(this,jh,n.select),v=n.select(v),v=w2(i==null?void 0:i.data,v,n),_e(this,jc,v),_e(this,va,null)}catch(V){_e(this,va,V)}q(this,va)&&(_=q(this,va),v=q(this,jc),E=Date.now(),k="error");const w=m.fetchStatus==="fetching",g=k==="pending",C=k==="error",$=g&&w,N=v!==void 0,A={status:k,fetchStatus:m.fetchStatus,isPending:g,isSuccess:k==="success",isError:C,isInitialLoading:$,isLoading:$,data:v,dataUpdatedAt:m.dataUpdatedAt,error:_,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!g,isLoadingError:C&&!N,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&N,isStale:D4(e,n),refetch:this.refetch,promise:q(this,vo),isEnabled:zs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const V=A.data!==void 0,H=A.status==="error"&&!V,Q=ae=>{H?ae.reject(A.error):V&&ae.resolve(A.data)},ie=()=>{const ae=_e(this,vo,A.promise=S2());Q(ae)},se=q(this,vo);switch(se.status){case"pending":e.queryHash===r.queryHash&&Q(se);break;case"fulfilled":(H||A.data!==se.value)&&ie();break;case"rejected":(!H||A.error!==se.reason)&&ie();break}}return A}updateResult(){const e=q(this,xr),n=this.createResult(q(this,pt),this.options);if(_e(this,Fl,q(this,pt).state),_e(this,Mc,this.options),q(this,Fl).data!==void 0&&_e(this,zc,q(this,pt)),p0(n,e))return;_e(this,xr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!q(this,Dc).size)return!0;const o=new Set(i??q(this,Dc));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,xr)).some(a=>{const c=a;return q(this,xr)[c]!==e[c]&&o.has(c)})};tt(this,Ct,Yx).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,Ct,P2).call(this)}},Zr=new WeakMap,pt=new WeakMap,Mh=new WeakMap,xr=new WeakMap,Fl=new WeakMap,Mc=new WeakMap,vo=new WeakMap,va=new WeakMap,jh=new WeakMap,jc=new WeakMap,zc=new WeakMap,Ll=new WeakMap,Ul=new WeakMap,_a=new WeakMap,Dc=new WeakMap,Ct=new WeakSet,Ef=function(e){tt(this,Ct,x2).call(this);let n=q(this,pt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ar)),n},b2=function(){tt(this,Ct,$2).call(this);const e=ja(this.options.staleTime,q(this,pt));if(tu||q(this,xr).isStale||!v2(e))return;const r=Hx(q(this,xr).dataUpdatedAt,e)+1;_e(this,Ll,Ol.setTimeout(()=>{q(this,xr).isStale||this.updateResult()},r))},E2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,pt)):this.options.refetchInterval)??!1},C2=function(e){tt(this,Ct,T2).call(this),_e(this,_a,e),!(tu||zs(this.options.enabled,q(this,pt))===!1||!v2(q(this,_a))||q(this,_a)===0)&&_e(this,Ul,Ol.setInterval(()=>{(this.options.refetchIntervalInBackground||z4.isFocused())&&tt(this,Ct,Ef).call(this)},q(this,_a)))},P2=function(){tt(this,Ct,b2).call(this),tt(this,Ct,C2).call(this,tt(this,Ct,E2).call(this))},$2=function(){q(this,Ll)&&(Ol.clearTimeout(q(this,Ll)),_e(this,Ll,void 0))},T2=function(){q(this,Ul)&&(Ol.clearInterval(q(this,Ul)),_e(this,Ul,void 0))},x2=function(){const e=q(this,Zr).getQueryCache().build(q(this,Zr),this.options);if(e===q(this,pt))return;const n=q(this,pt);_e(this,pt,e),_e(this,Mh,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Yx=function(e){Ln.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(q(this,xr))}),q(this,Zr).getQueryCache().notify({query:q(this,pt),type:"observerResultsUpdated"})})},iP);function vG(t,e){return zs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function r6(t,e){return vG(t,e)||t.state.data!==void 0&&N2(t,e,e.refetchOnMount)}function N2(t,e,n){if(zs(e.enabled,t)!==!1&&ja(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&D4(t,e)}return!1}function s6(t,e,n,r){return(t!==e||zs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&D4(t,n)}function D4(t,e){return zs(e.enabled,t)!==!1&&t.isStaleByTime(ja(e.staleTime,t))}function _G(t,e){return!p0(t.getCurrentResult(),e)}function i6(t){return{onFetch:(e,n)=>{var f,m,y,v,_;const r=e.options,s=(y=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const d=async()=>{let E=!1;const k=g=>{cG(g,()=>e.signal,()=>E=!0)},p=Bx(e.options,e.fetchOptions),w=async(g,C,$)=>{if(E)return Promise.reject();if(C==null&&g.pages.length)return Promise.resolve(g);const j=(()=>{const H={client:e.client,queryKey:e.queryKey,pageParam:C,direction:$?"backward":"forward",meta:e.options.meta};return k(H),H})(),A=await p(j),{maxPages:G}=e.options,V=$?uG:lG;return{pages:V(g.pages,A,G),pageParams:V(g.pageParams,C,G)}};if(s&&i.length){const g=s==="backward",C=g?wG:o6,$={pages:i,pageParams:o},N=C(r,$);a=await w($,N,g)}else{const g=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:o6(r,a);if(c>0&&C==null)break;a=await w(a,C),c++}while(c<g)}return a};e.options.persister?e.fetchFn=()=>{var E,k;return(k=(E=e.options).persister)==null?void 0:k.call(E,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function o6(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function wG(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var zh,Fi,kr,Vl,Li,oa,oP,SG=(oP=class extends Kx{constructor(e){super();je(this,Li);je(this,zh);je(this,Fi);je(this,kr);je(this,Vl);_e(this,zh,e.client),this.mutationId=e.mutationId,_e(this,kr,e.mutationCache),_e(this,Fi,[]),this.state=e.state||Xx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){q(this,Fi).includes(e)||(q(this,Fi).push(e),this.clearGcTimeout(),q(this,kr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){_e(this,Fi,q(this,Fi).filter(n=>n!==e)),this.scheduleGc(),q(this,kr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){q(this,Fi).length||(this.state.status==="pending"?this.scheduleGc():q(this,kr).remove(this))}continue(){var e;return((e=q(this,Vl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,d,f,m,y,v,_,E,k,p,w,g,C,$,N,j;const n=()=>{tt(this,Li,oa).call(this,{type:"continue"})},r={client:q(this,zh),meta:this.options.meta,mutationKey:this.options.mutationKey};_e(this,Vl,Wx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(A,G)=>{tt(this,Li,oa).call(this,{type:"failed",failureCount:A,error:G})},onPause:()=>{tt(this,Li,oa).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,kr).canRun(this)}));const s=this.state.status==="pending",i=!q(this,Vl).canStart();try{if(s)n();else{tt(this,Li,oa).call(this,{type:"pending",variables:e,isPaused:i}),q(this,kr).config.onMutate&&await q(this,kr).config.onMutate(e,this,r);const G=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e,r));G!==this.state.context&&tt(this,Li,oa).call(this,{type:"pending",context:G,variables:e,isPaused:i})}const A=await q(this,Vl).start();return await((d=(c=q(this,kr).config).onSuccess)==null?void 0:d.call(c,A,e,this.state.context,this,r)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,A,e,this.state.context,r)),await((v=(y=q(this,kr).config).onSettled)==null?void 0:v.call(y,A,null,this.state.variables,this.state.context,this,r)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,A,null,e,this.state.context,r)),tt(this,Li,oa).call(this,{type:"success",data:A}),A}catch(A){try{await((p=(k=q(this,kr).config).onError)==null?void 0:p.call(k,A,e,this.state.context,this,r))}catch(G){Promise.reject(G)}try{await((g=(w=this.options).onError)==null?void 0:g.call(w,A,e,this.state.context,r))}catch(G){Promise.reject(G)}try{await(($=(C=q(this,kr).config).onSettled)==null?void 0:$.call(C,void 0,A,this.state.variables,this.state.context,this,r))}catch(G){Promise.reject(G)}try{await((j=(N=this.options).onSettled)==null?void 0:j.call(N,void 0,A,e,this.state.context,r))}catch(G){Promise.reject(G)}throw tt(this,Li,oa).call(this,{type:"error",error:A}),A}finally{q(this,kr).runNext(this)}}},zh=new WeakMap,Fi=new WeakMap,kr=new WeakMap,Vl=new WeakMap,Li=new WeakSet,oa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ln.batch(()=>{q(this,Fi).forEach(r=>{r.onMutationUpdate(e)}),q(this,kr).notify({mutation:this,type:"updated",action:e})})},oP);function Xx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _o,pi,Dh,aP,kG=(aP=class extends pd{constructor(e={}){super();je(this,_o);je(this,pi);je(this,Dh);this.config=e,_e(this,_o,new Set),_e(this,pi,new Map),_e(this,Dh,0)}build(e,n,r){const s=new SG({client:e,mutationCache:this,mutationId:++rm(this,Dh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){q(this,_o).add(e);const n=Nm(e);if(typeof n=="string"){const r=q(this,pi).get(n);r?r.push(e):q(this,pi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(q(this,_o).delete(e)){const n=Nm(e);if(typeof n=="string"){const r=q(this,pi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&q(this,pi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Nm(e);if(typeof n=="string"){const r=q(this,pi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Nm(e);if(typeof n=="string"){const s=(r=q(this,pi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ln.batch(()=>{q(this,_o).forEach(e=>{this.notify({type:"removed",mutation:e})}),q(this,_o).clear(),q(this,pi).clear()})}getAll(){return Array.from(q(this,_o))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>XC(n,r))}findAll(e={}){return this.getAll().filter(n=>XC(e,n))}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ln.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ar))))}},_o=new WeakMap,pi=new WeakMap,Dh=new WeakMap,aP);function Nm(t){var e;return(e=t.options.scope)==null?void 0:e.id}var wo,wa,Wr,So,Ro,fg,R2,lP,bG=(lP=class extends pd{constructor(n,r){super();je(this,Ro);je(this,wo);je(this,wa);je(this,Wr);je(this,So);_e(this,wo,n),this.setOptions(r),this.bindMethods(),tt(this,Ro,fg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=q(this,wo).defaultMutationOptions(n),p0(this.options,r)||q(this,wo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,Wr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&nu(r.mutationKey)!==nu(this.options.mutationKey)?this.reset():((s=q(this,Wr))==null?void 0:s.state.status)==="pending"&&q(this,Wr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=q(this,Wr))==null||n.removeObserver(this)}onMutationUpdate(n){tt(this,Ro,fg).call(this),tt(this,Ro,R2).call(this,n)}getCurrentResult(){return q(this,wa)}reset(){var n;(n=q(this,Wr))==null||n.removeObserver(this),_e(this,Wr,void 0),tt(this,Ro,fg).call(this),tt(this,Ro,R2).call(this)}mutate(n,r){var s;return _e(this,So,r),(s=q(this,Wr))==null||s.removeObserver(this),_e(this,Wr,q(this,wo).getMutationCache().build(q(this,wo),this.options)),q(this,Wr).addObserver(this),q(this,Wr).execute(n)}},wo=new WeakMap,wa=new WeakMap,Wr=new WeakMap,So=new WeakMap,Ro=new WeakSet,fg=function(){var r;const n=((r=q(this,Wr))==null?void 0:r.state)??Xx();_e(this,wa,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},R2=function(n){Ln.batch(()=>{var r,s,i,o,a,c,d,f;if(q(this,So)&&this.hasListeners()){const m=q(this,wa).variables,y=q(this,wa).context,v={client:q(this,wo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=q(this,So)).onSuccess)==null||s.call(r,n.data,m,y,v)}catch(_){Promise.reject(_)}try{(o=(i=q(this,So)).onSettled)==null||o.call(i,n.data,null,m,y,v)}catch(_){Promise.reject(_)}}else if((n==null?void 0:n.type)==="error"){try{(c=(a=q(this,So)).onError)==null||c.call(a,n.error,m,y,v)}catch(_){Promise.reject(_)}try{(f=(d=q(this,So)).onSettled)==null||f.call(d,void 0,n.error,m,y,v)}catch(_){Promise.reject(_)}}}this.listeners.forEach(m=>{m(q(this,wa))})})},lP),Ui,uP,EG=(uP=class extends pd{constructor(e={}){super();je(this,Ui);this.config=e,_e(this,Ui,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??A4(s,n);let o=this.get(i);return o||(o=new gG({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){q(this,Ui).has(e.queryHash)||(q(this,Ui).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=q(this,Ui).get(e.queryHash);n&&(e.destroy(),n===e&&q(this,Ui).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return q(this,Ui).get(e)}getAll(){return[...q(this,Ui).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>YC(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>YC(e,r)):n}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ui=new WeakMap,uP),hn,Sa,ka,Fc,Lc,ba,Uc,Vc,cP,CG=(cP=class{constructor(t={}){je(this,hn);je(this,Sa);je(this,ka);je(this,Fc);je(this,Lc);je(this,ba);je(this,Uc);je(this,Vc);_e(this,hn,t.queryCache||new EG),_e(this,Sa,t.mutationCache||new kG),_e(this,ka,t.defaultOptions||{}),_e(this,Fc,new Map),_e(this,Lc,new Map),_e(this,ba,0)}mount(){rm(this,ba)._++,q(this,ba)===1&&(_e(this,Uc,z4.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,hn).onFocus())})),_e(this,Vc,m0.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,hn).onOnline())})))}unmount(){var t,e;rm(this,ba)._--,q(this,ba)===0&&((t=q(this,Uc))==null||t.call(this),_e(this,Uc,void 0),(e=q(this,Vc))==null||e.call(this),_e(this,Vc,void 0))}isFetching(t){return q(this,hn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return q(this,Sa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,hn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=q(this,hn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ja(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return q(this,hn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=q(this,hn).get(r.queryHash),i=s==null?void 0:s.state.data,o=iG(e,i);if(o!==void 0)return q(this,hn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ln.batch(()=>q(this,hn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,hn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=q(this,hn);Ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=q(this,hn);return Ln.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ln.batch(()=>q(this,hn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ar).catch(Ar)}invalidateQueries(t,e={}){return Ln.batch(()=>(q(this,hn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ln.batch(()=>q(this,hn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ar)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=q(this,hn).build(this,e);return n.isStaleByTime(ja(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ar).catch(Ar)}fetchInfiniteQuery(t){return t.behavior=i6(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ar).catch(Ar)}ensureInfiniteQueryData(t){return t.behavior=i6(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return m0.isOnline()?q(this,Sa).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,hn)}getMutationCache(){return q(this,Sa)}getDefaultOptions(){return q(this,ka)}setDefaultOptions(t){_e(this,ka,t)}setQueryDefaults(t,e){q(this,Fc).set(nu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...q(this,Fc).values()],n={};return e.forEach(r=>{$h(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){q(this,Lc).set(nu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...q(this,Lc).values()],n={};return e.forEach(r=>{$h(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...q(this,ka).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=A4(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===M4&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...q(this,ka).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){q(this,hn).clear(),q(this,Sa).clear()}},hn=new WeakMap,Sa=new WeakMap,ka=new WeakMap,Fc=new WeakMap,Lc=new WeakMap,ba=new WeakMap,Uc=new WeakMap,Vc=new WeakMap,cP),PG=K.createContext(void 0),Jx=t=>{const e=K.useContext(PG);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},eN=K.createContext(!1),$G=()=>K.useContext(eN);eN.Provider;function TG(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xG=K.createContext(TG()),NG=()=>K.useContext(xG),RG=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?j4(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},OG=t=>{K.useEffect(()=>{t.clearReset()},[t])},IG=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||j4(n,[t.error,r])),AG=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},MG=(t,e)=>t.isLoading&&t.isFetching&&!e,jG=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,a6=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function zG(t,e,n){var y,v,_,E;const r=$G(),s=NG(),i=Jx(n),o=i.defaultQueryOptions(t);(v=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,o);const a=i.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",AG(o),RG(o,s,a),OG(s);const c=!i.getQueryCache().get(o.queryHash),[d]=K.useState(()=>new e(i,o)),f=d.getOptimisticResult(o),m=!r&&t.subscribed!==!1;if(K.useSyncExternalStore(K.useCallback(k=>{const p=m?d.subscribe(Ln.batchCalls(k)):Ar;return d.updateResult(),p},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),K.useEffect(()=>{d.setOptions(o)},[o,d]),jG(o,f))throw a6(o,d,s);if(IG({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw f.error;if((E=(_=i.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||E.call(_,o,f),o.experimental_prefetchInRender&&!tu&&MG(f,r)){const k=c?a6(o,d,s):a==null?void 0:a.promise;k==null||k.catch(Ar).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function DG(t,e){return zG(t,yG,e)}function FG(t,e){const n=Jx(e),[r]=K.useState(()=>new bG(n,t));K.useEffect(()=>{r.setOptions(t)},[r,t]);const s=K.useSyncExternalStore(K.useCallback(o=>r.subscribe(Ln.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=K.useCallback((o,a)=>{r.mutate(o,a).catch(Ar)},[r]);if(s.error&&j4(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const LG="0.70.0",UG={version:LG};function VG(t,e,n){var i;const r=DG({queryKey:["tambo-session-token",n],queryFn:async()=>{const o={grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token:n,subject_token_type:"urn:ietf:params:oauth:token-type:access_token"},a=new URLSearchParams(o).toString(),c=new TextEncoder().encode(a);return await t.beta.auth.getToken(c)},enabled:!!n,refetchInterval:o=>{var a;return(a=o.state.data)!=null&&a.expires_in?o.state.data.expires_in*1e3:!1}},e),s=((i=r.data)==null?void 0:i.access_token)??null;return K.useEffect(()=>{t.bearer=s},[s,t]),r}const md=K.createContext(void 0),GG=({children:t,tamboUrl:e,apiKey:n,environment:r,userToken:s,additionalHeaders:i})=>{const o=K.useMemo(()=>({apiKey:n,defaultHeaders:{"X-Tambo-React-Version":UG.version,...i},baseURL:e??void 0,environment:r??void 0}),[i,n,e,r]),a=K.useMemo(()=>new En(o),[o]),c=K.useMemo(()=>new CG,[]),{isFetching:d}=VG(a,c,s);return Ie.createElement(md.Provider,{value:{client:a,queryClient:c,isUpdatingToken:d,additionalHeaders:o.defaultHeaders}},t)},tN=()=>{const t=Ie.useContext(md);if(t===void 0)throw new Error("useTamboClient must be used within a TamboClientProvider");return t.client},nN=()=>{const t=Ie.useContext(md);if(t===void 0)throw new Error("useTamboQueryClient must be used within a TamboClientProvider");return t.queryClient};var Va;(function(t){t.SSE="sse",t.HTTP="http"})(Va||(Va={}));function rN(t){const e=t.customHeaders?JSON.stringify(Object.entries(t.customHeaders).map(([n,r])=>[n.toLowerCase(),r]).sort(([n],[r])=>n.localeCompare(r))):"";return`${t.url}|${t.transport??Va.HTTP}|${e}`}function HG(t){var e;try{const r=new URL(t).hostname;let i=[...r.split(".")];i.length>=3&&i[i.length-1].length<=3&&i[i.length-2].length<=3?i=i.slice(0,-2):i.length>=2&&(i=i.slice(0,-1));const o=new Set(["www","api","mcp","app","staging","dev","prod"]);for(let a=i.length-1;a>=0;a--){const c=i[a];if(c&&!o.has(c.toLowerCase()))return c.toLowerCase()}return((e=i[i.length-1])==null?void 0:e.toLowerCase())||r}catch{return t.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}}function b1(t){const e=typeof t=="string"?{url:t,transport:Va.HTTP}:t,n=e.serverKey??HG(e.url),r=e.transport??Va.HTTP;return{...e,transport:r,serverKey:n}}function qG(t){if(t.length===0)return t;const e=new Map;for(const s of t){const i=rN(s);e.set(i,s)}const n=Array.from(e.values()),r=new Map;return n.map(s=>{const i=s.serverKey,o=(r.get(i)??0)+1;return r.set(i,o),o===1?s:{...s,serverKey:`${i}-${o}`}})}function BG(t){return t.type==="object"||t.properties!==void 0}function ZG(t,e){let n;if(hd(t))try{n=ed(t)}catch{return}else if(x4(t))n=t;else return;if(!BG(n))throw new Error(`${e} must be an object schema (e.g., z.object({...})). Received type: "${n.type??"unknown"}". Tool parameters are passed as a single object argument.`)}function WG(t){if(!t||typeof t!="object")throw new Error("Tool must be an object");const e="name"in t&&typeof t.name=="string"?t.name:"<unknown>";if("toolSchema"in t)throw new Error(`Tool "${e}" uses deprecated "toolSchema" property. Migrate to "inputSchema" and "outputSchema" properties. See migration guide: https://tambo.ai/docs/migration/toolschema`);if(!("name"in t)||typeof t.name!="string")throw new Error("Tool must have a 'name' property of type string");if(!("description"in t)||typeof t.description!="string")throw new Error(`Tool "${t.name}" must have a 'description' property of type string`);if(!("tool"in t)||typeof t.tool!="function")throw new Error(`Tool "${t.name}" must have a 'tool' property of type function`);if(!("inputSchema"in t))throw new Error(`Tool "${t.name}" must have an 'inputSchema' property`);if(!("outputSchema"in t))throw new Error(`Tool "${t.name}" must have an 'outputSchema' property`);if(Ph(t.name,"tool"),t.inputSchema&&(ZG(t.inputSchema,`inputSchema of tool "${t.name}"`),fx(t.inputSchema,`inputSchema of tool "${t.name}"`)),"maxCalls"in t&&t.maxCalls!==void 0&&t.maxCalls!==null){const n=t.maxCalls;if(typeof n!="number"||!Number.isInteger(n)||n<0)throw new Error(`maxCalls for tool "${t.name}" must be a positive integer`)}}function KG(t,e,n){if(t)return console.warn("propsDefinition is deprecated. Use propsSchema instead."),t;if(hd(e))try{return ed(e)}catch(r){throw console.error(`Error converting ${n} props schema to JSON Schema:`,r),new Error(`Error converting ${n} props schema to JSON Schema: ${r}`)}if(x4(e))return e;throw new Error(`Invalid props schema for ${n}`)}function QG(t){const{name:e,propsSchema:n,propsDefinition:r}=t;if(Ph(e,"component"),!n&&!r)throw new Error(`Component ${e} must have either propsSchema (recommended) or propsDefinition defined`);if(n&&r)throw new Error(`Component ${e} cannot have both propsSchema and propsDefinition defined. Use only one. We recommend using propsSchema.`);return n&&fx(n,`propsSchema of component "${e}"`),{props:KG(r,n,e)}}function YG(t,e,n,r){if(Ph(t,"component"),Ph(e,"tool"),!n)throw new Error(`Component ${t} not found in registry`);if(!r)throw new Error(`Tool ${e} not found in registry`)}function l6(t,e){const n=t!=null,r=e!=null;if(n!==r)throw new Error(`Both listResources and getResource must be provided together, or neither should be provided. Got: listResources=${n?"defined":"undefined"}, getResource=${r?"defined":"undefined"}`)}function E1(t){if(!t.uri)throw new Error("Resource must have a 'uri' field");if(!t.name)throw new Error(`Resource with URI '${t.uri}' must have a 'name' field`)}const F4=K.createContext({componentList:{},toolRegistry:{},componentToolAssociations:{},mcpServerInfos:[],resources:[],resourceSource:null,registerComponent:()=>{},registerTool:()=>{},registerTools:()=>{},addToolAssociation:()=>{},registerMcpServer:()=>{},registerMcpServers:()=>{},registerResource:()=>{},registerResources:()=>{},registerResourceSource:()=>{}}),XG=({children:t,components:e,tools:n,mcpServers:r,resources:s,listResources:i,getResource:o,onCallUnregisteredTool:a})=>{const[c,d]=K.useState({}),[f,m]=K.useState({}),[y,v]=K.useState({}),[_,E]=K.useState([]),[k,p]=K.useState([]),[w,g]=K.useState([]),[C,$]=K.useState(null),N=K.useCallback(ee=>(ue,L)=>(WG(L),ue[L.name]&&ee&&console.warn(`Overwriting tool ${L.name}`),{...ue,[L.name]:L}),[]),j=K.useCallback((ee,ue=!0)=>{m(L=>N(ue)(L,ee))},[N]),A=K.useCallback((ee,ue=!0)=>{m(L=>ee.reduce(N(ue),L))},[N]),G=K.useCallback(ee=>{const ue=b1(ee);p(L=>[...L,ue])},[]),V=K.useCallback(ee=>{const ue=ee.map(b1);p(L=>[...L,...ue])},[]),H=K.useCallback((ee,ue)=>{YG(ee,ue.name,!!c[ee],!!f[ue.name]),v(L=>({...L,[ee]:[...L[ee]||[],ue.name]}))},[c,f]),Q=K.useCallback((ee,ue=!0)=>{const{name:L,description:I,component:U,loadingComponent:z,associatedTools:b}=ee,{props:T}=QG(ee);d(M=>(M[L]&&ue&&console.warn(`overwriting component ${L}`),{...M,[L]:{component:U,loadingComponent:z,name:L,description:I,props:T,contextTools:[]}})),b&&(A(b),v(M=>({...M,[L]:b.map(O=>O.name)})))},[A]);K.useEffect(()=>{e&&e.forEach(ee=>{Q(ee,!1)})},[Q,e]),K.useEffect(()=>{n&&A(n,!1)},[A,n]),K.useEffect(()=>{if(!r||r.length===0){E([]);return}const ee=r.map(b1);E(ee)},[r]),K.useEffect(()=>{l6(i,o),s?(s.forEach(ee=>E1(ee)),g(s)):g([]),$(i&&o?{listResources:i,getResource:o}:null)},[s,i,o]);const ie=K.useCallback(ee=>{E1(ee),g(ue=>[...ue,ee])},[]),se=K.useCallback(ee=>{ee.forEach(ue=>E1(ue)),g(ue=>[...ue,...ee])},[]),ae=K.useCallback(ee=>{l6(ee.listResources,ee.getResource),$(ee)},[]),ye=K.useMemo(()=>{const ee=[..._,...k];return qG(ee)},[_,k]),Pe={componentList:c,toolRegistry:f,componentToolAssociations:y,mcpServerInfos:ye,resources:w,resourceSource:C,registerComponent:Q,registerTool:j,registerTools:A,addToolAssociation:H,registerMcpServer:G,registerMcpServers:V,registerResource:ie,registerResources:se,registerResourceSource:ae,onCallUnregisteredTool:a};return Ie.createElement(F4.Provider,{value:Pe},t)},vy=()=>K.useContext(F4),JG=()=>K.useContext(F4).mcpServerInfos,sN=K.createContext({registerComponent:()=>{},registerTool:()=>{},registerTools:()=>{},addToolAssociation:()=>{}}),eH=({children:t})=>{const e=tN(),{registerComponent:n,addToolAssociation:r,registerTool:s,registerTools:i}=vy(),o={client:e,registerComponent:n,registerTool:s,registerTools:i,addToolAssociation:r};return Ie.createElement(sN.Provider,{value:o},t)},iN=()=>K.useContext(sN);async function tH(t){const e=Object.entries(t);return e.length===0?[]:(await Promise.all(e.map(async([r,s])=>{try{const i=await s();return i==null?null:{name:r,context:i}}catch(i){return console.error(`Error running context helper ${r}:`,i),null}}))).filter(Boolean)}const oN=K.createContext(null),nH=({children:t,contextHelpers:e})=>{const[n,r]=K.useState({}),s=K.useCallback((d,f)=>{r(m=>({...m,[d]:f}))},[]),i=K.useCallback((d,f)=>{r(m=>{const{[d]:y,...v}=m;return f===void 0||y===f?v:m})},[]);K.useEffect(()=>{const d=[];if(e)for(const[f,m]of Object.entries(e))s(f,m),d.push([f,m]);return()=>{for(const[f,m]of d)i(f,m)}},[s,e,i]);const o=K.useCallback(async()=>await tH(n),[n]),a=K.useCallback(()=>n,[n]),c=K.useMemo(()=>({getAdditionalContext:o,getContextHelpers:a,addContextHelper:s,removeContextHelper:i}),[o,a,s,i]);return Ie.createElement(oN.Provider,{value:c},t)},_y=()=>{const t=K.useContext(oN);return t||{getAdditionalContext:async()=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},getContextHelpers:()=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},addContextHelper:(e,n)=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},removeContextHelper:e=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")}}},aN=K.createContext({interactableComponents:[],addInteractableComponent:()=>"",removeInteractableComponent:()=>{},updateInteractableComponentProps:()=>"",getInteractableComponent:()=>{},getInteractableComponentsByName:()=>[],clearAllInteractableComponents:()=>{},setInteractableState:()=>{},getInteractableComponentState:()=>{},setInteractableSelected:()=>{},clearInteractableSelections:()=>{}}),rH=({children:t})=>{const[e,n]=K.useState([]),{registerTool:r}=iN(),{addContextHelper:s,removeContextHelper:i}=_y(),o=K.useMemo(()=>Az(e),[e]);K.useEffect(()=>(s("interactables",o),()=>{i("interactables")}),[o,s,i]),K.useEffect(()=>{e.length>0&&(r({name:"get_all_interactable_components",description:"Only use this tool if the user is asking about interactable components.Get all currently interactable components with their details including their current props. These are components that you can interact with on behalf of the user.",tool:()=>({components:e}),inputSchema:on({}),outputSchema:on({components:qh(on({id:Ot(),name:Ot(),props:bm(Ot(),km()),propsSchema:bm(Ot(),km()).optional()}))})}),r({name:"get_interactable_component_by_id",description:"Get a specific interactable component by its ID",tool:({componentId:$})=>{const N=e.find(j=>j.id===$);return N?{success:!0,component:{id:N.id,componentName:N.name,props:N.props}}:{success:!1,error:`Component with ID ${$} not found`}},inputSchema:on({componentId:Ot().describe("The ID of the component")}),outputSchema:mC("success",[on({success:Em(!0),component:on({id:Ot(),componentName:Ot(),props:bm(Ot(),km())}).optional()}),on({success:Em(!1),error:Ot()})])}),r({name:"remove_interactable_component",description:"Remove an interactable component from the system",tool:({componentId:$})=>{const N=e.find(j=>j.id===$);return N?(n(j=>j.filter(A=>A.id!==$)),{success:!0,componentId:$,removedComponent:{id:N.id,componentName:N.name,props:N.props}}):{success:!1,error:`Component with ID ${$} not found`}},inputSchema:on({componentId:Ot().describe("The ID of the component")}),outputSchema:mC("success",[on({success:Em(!0),componentId:Ot(),removedComponent:on({id:Ot(),componentName:Ot(),props:bm(Ot(),km())})}),on({success:Em(!1),error:Ot()})])}))},[e,r]);const a=K.useCallback(($,N)=>!N||Object.keys(N).length===0?`Warning: No props provided for component with ID ${$}.`:(n(j=>{const A=j.find(ie=>ie.id===$);if(!A||!Object.entries(N).some(([ie,se])=>A.props[ie]!==se))return j;const V={...A,props:{...A.props,...N}},H=[...j],Q=j.findIndex(ie=>ie.id===$);return H[Q]=V,H}),"Updated successfully"),[]),c=K.useCallback(($,N)=>!N||Object.keys(N).length===0?`Warning: No state values provided for component with ID ${$}.`:(n((j=[])=>{const A=j.find(Q=>Q.id===$);if(!A)return j;const G=A.state??{},V={...G,...N};if(oz(G,V))return j;const H={...A,state:V};return j.map(Q=>Q.id===$?H:Q)}),"Updated successfully"),[]),d=K.useCallback(($,N=60)=>{const j="update_component_props_",A=N-j.length;if($.id.length>A)throw new Error(`Interactable component id ${$.id} is too long. It must be less than ${A} characters.`);let G;if($.propsSchema){const H=ed($.propsSchema);G=AC(H)}else G={type:"object",additionalProperties:!0};const V={type:"object",properties:{componentId:{type:"string",description:"The ID of the interactable component to update"},newProps:{...G,description:"The props to update. Provide only the props you want to change."}},required:["componentId","newProps"]};r({name:`${j}${$.id}`,description:`Update the props of interactable component ${$.id} (${$.name}). Provide partial props (only props to change).`,tool:({componentId:H,newProps:Q})=>a(H,Q),inputSchema:V,outputSchema:Ot()})},[r,a]),f=K.useCallback(($,N=60)=>{const j="update_component_state_",A=N-j.length;if($.id.length>A)throw new Error(`Interactable component id ${$.id} is too long. It must be less than ${A} characters.`);let G={type:"object",additionalProperties:!0};if($.stateSchema){const H=ed($.stateSchema);G=AC(H)}const V={type:"object",properties:{componentId:{type:"string",description:"The ID of the interactable component to update"},newState:{...G,description:"The state values to update. Provide only the keys you want to change."}},required:["componentId","newState"]};r({name:`${j}${$.id}`,description:`Update the state of interactable component ${$.id} (${$.name}). You may provide partial state (only keys to change).`,tool:({componentId:H,newState:Q})=>c(H,Q),inputSchema:V,outputSchema:Ot()})},[r,c]),m=K.useCallback($=>{Ph($.name,"component");const N=`-${Math.random().toString(36).slice(2,5)}`,j=`${$.name}${N}`,A={...$,id:j,state:$.state??{}};return d(A),f(A),n(G=>[...G,A]),j},[d,f]),y=K.useCallback($=>{n(N=>N.filter(j=>j.id!==$))},[]),v=K.useCallback($=>e.find(N=>N.id===$),[e]),_=K.useCallback($=>e.filter(N=>N.name===$),[e]),E=K.useCallback(()=>{n([])},[]),k=K.useCallback(($,N,j)=>{n(A=>{const G=A.find(Q=>Q.id===$);if(!G)return console.warn(`Tried to update state for component ${$} but it was not found.`),A;const V={...G,state:{...G.state,[N]:j}};return A.map(Q=>Q.id===$?V:Q)})},[]),p=K.useCallback($=>{const N=e.find(j=>j.id===$);return N==null?void 0:N.state},[e]),w=K.useCallback(($,N)=>{n(j=>{let A=!1;const G=j.map(V=>V.id!==$?V:(A=!0,V.isSelected===N?V:{...V,isSelected:N}));return A?G:j})},[]),g=K.useCallback(()=>{n($=>$.some(N=>N.isSelected)?$.map(N=>N.isSelected?{...N,isSelected:!1}:N):$)},[]),C={interactableComponents:e,addInteractableComponent:m,removeInteractableComponent:y,updateInteractableComponentProps:a,getInteractableComponent:v,getInteractableComponentsByName:_,clearAllInteractableComponents:E,setInteractableState:k,getInteractableComponentState:p,setInteractableSelected:w,clearInteractableSelections:g};return Ie.createElement(aN.Provider,{value:C},t)},lN=()=>K.useContext(aN),sH=K.createContext(null),iH=({children:t,message:e,interactableMetadata:n})=>{const r=n?{...e,interactableMetadata:n}:e;return Ie.createElement(sH.Provider,{value:r,key:e.id},t)};function oH(t,e,n){return Ie.createElement(iH,{message:e,interactableMetadata:n},t)}function aH(){const[t,e]=K.useState([]),n=async a=>await new Promise((c,d)=>{const f=new FileReader;f.onload=()=>c(f.result),f.onerror=d,f.readAsDataURL(a)}),r=K.useCallback(async a=>{if(!a.type.startsWith("image/"))throw new Error("Only image files are allowed");const c=await n(a),d={id:crypto.randomUUID(),name:a.name,dataUrl:c,file:a,size:a.size,type:a.type};e(f=>[...f,d])},[]),s=K.useCallback(async a=>{const c=a.filter(f=>f.type.startsWith("image/"));if(c.length===0)throw new Error("No valid image files provided");const d=await Promise.all(c.map(async f=>{const m=await n(f);return{id:crypto.randomUUID(),name:f.name,dataUrl:m,file:f,size:f.size,type:f.type}}));e(f=>[...f,...d])},[]),i=K.useCallback(a=>{e(c=>c.filter(d=>d.id!==a))},[]),o=K.useCallback(()=>{e([])},[]);return{images:t,addImage:r,addImages:s,removeImage:i,clearImages:o}}var br;(function(t){t.IDLE="IDLE",t.CHOOSING_COMPONENT="CHOOSING_COMPONENT",t.FETCHING_CONTEXT="FETCHING_CONTEXT",t.HYDRATING_COMPONENT="HYDRATING_COMPONENT",t.STREAMING_RESPONSE="STREAMING_RESPONSE",t.COMPLETE="COMPLETE",t.ERROR="ERROR",t.CANCELLED="CANCELLED"})(br||(br={}));function uN(t){return[br.IDLE,br.COMPLETE,br.ERROR,br.CANCELLED].includes(t)}function lH(t){const e=t.trim();return e.length===0?{isValid:!1,error:new Error("Message cannot be empty"),sanitizedInput:e}:e.length>1e4?{isValid:!1,error:new Error("Message is too long (max 10000 characters)"),sanitizedInput:e}:{isValid:!0,sanitizedInput:e}}const Gf={BROWSER_SIDE:"browser-side",TAMBO_INTERNAL:"tambo-internal",TAMBO_REGISTRY:"tambo-registry"},uH="registry";function cH(t){return!!t&&typeof t=="object"&&"type"in t&&typeof t.type=="string"}function dH(t){return Array.isArray(t)&&t.every(e=>cH(e))}function O2(t){if(typeof t=="string")return t;try{return JSON.stringify(t)??String(t)}catch{return String(t)}}var cN={},I2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(I2);(function(t){var e=rc&&rc.__createBinding||(Object.create?function(d,f,m,y){y===void 0&&(y=m);var v=Object.getOwnPropertyDescriptor(f,m);(!v||("get"in v?!f.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(d,y,v)}:function(d,f,m,y){y===void 0&&(y=m),d[y]=f[m]}),n=rc&&rc.__exportStar||function(d,f){for(var m in d)m!=="default"&&!Object.prototype.hasOwnProperty.call(f,m)&&e(f,d,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=I2;Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(I2,t);class s extends Error{}t.PartialJSON=s;class i extends Error{}t.MalformedJSON=i;function o(d,f=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return a(d.trim(),f)}t.parseJSON=o;const a=(d,f)=>{const m=d.length;let y=0;const v=$=>{throw new s(`${$} at position ${y}`)},_=$=>{throw new i(`${$} at position ${y}`)},E=()=>(C(),y>=m&&v("Unexpected end of input"),d[y]==='"'?k():d[y]==="{"?p():d[y]==="["?w():d.substring(y,y+4)==="null"||r.Allow.NULL&f&&m-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&f&&m-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&f&&m-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&f&&m-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&f&&1<m-y&&m-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&f&&m-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):g()),k=()=>{const $=y;let N=!1;for(y++;y<m&&(d[y]!=='"'||N&&d[y-1]==="\\");)N=d[y]==="\\"?!N:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring($,++y-Number(N)))}catch(j){_(String(j))}else if(r.Allow.STR&f)try{return JSON.parse(d.substring($,y-Number(N))+'"')}catch{return JSON.parse(d.substring($,d.lastIndexOf("\\"))+'"')}v("Unterminated string literal")},p=()=>{y++,C();const $={};try{for(;d[y]!=="}";){if(C(),y>=m&&r.Allow.OBJ&f)return $;const N=k();C(),y++;try{const j=E();$[N]=j}catch(j){if(r.Allow.OBJ&f)return $;throw j}C(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&f)return $;v("Expected '}' at end of object")}return y++,$},w=()=>{y++;const $=[];try{for(;d[y]!=="]";)$.push(E()),C(),d[y]===","&&y++}catch{if(r.Allow.ARR&f)return $;v("Expected ']' at end of array")}return y++,$},g=()=>{if(y===0){d==="-"&&_("Not sure what '-' is");try{return JSON.parse(d)}catch(N){if(r.Allow.NUM&f)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}_(String(N))}}const $=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==m&&!(r.Allow.NUM&f)&&v("Unterminated number literal");try{return JSON.parse(d.substring($,y))}catch{d.substring($,y)==="-"&&v("Not sure what '-' is");try{return JSON.parse(d.substring($,d.lastIndexOf("e")))}catch(j){_(String(j))}}},C=()=>{for(;y<m&&` 
\r	`.includes(d[y]);)y++};return E()},c=o;t.parse=c})(cN);function fH(t){return t===null||typeof t!="object"&&typeof t!="function"?!1:typeof t.then=="function"}const hH=(t,e,n)=>{const r=[];for(const[s,i]of Object.entries(t)){const a=(n[s]||[]).map(c=>{const d=e[c];return d?L4(d):null}).filter(c=>c!==null);r.push({name:i.name,description:i.description,props:i.props,contextTools:a})}return r},pH=(t,e)=>Object.values(t).filter(n=>!Object.values(e).flat().includes(n.name)),mH=(t,e)=>{const n=e[t];if(!n)throw new Error(`Tambo tried to use Component ${t}, but it was not found.`);return n},L4=t=>{const e=yV(t);return{name:t.name,description:t.description,parameters:e,..."maxCalls"in t&&t.maxCalls!==void 0?{maxCalls:t.maxCalls}:{},..."annotations"in t&&t.annotations!==void 0?{annotations:t.annotations}:{}}};function C1(t,e){var c,d,f;if(!((c=t.component)!=null&&c.componentName))throw new Error("Component not found");const n=cN.parse(JSON.stringify(t.component.props)),r=mH(t.component.componentName,e);let s=n;if(hd(r.props)){const m=r.props["~standard"].validate(n);if(fH(m))throw new Error("Async schema validation is not supported for component props");if("value"in m)s=m.value;else{const y=((f=(d=m.issues)==null?void 0:d[0])==null?void 0:f.message)??"Schema validation failed";throw new Error(`Component props validation failed: ${y}`)}}const i=Ie.createElement(r.component,s),o={...t,component:{...t.component,props:s}},a=oH(i,o);return{...o,renderedComponent:a}}const u6=async(t,e,n)=>{if(!(t!=null&&t.toolName))throw new Error("Tool name is required");try{const{tool:r,tamboTool:s}=gH(t.toolName,e);if(!r){if(n)return{result:await n(t.toolName,t.parameters)};throw new Error(`Tool ${t.toolName} not found in registry`)}return{result:await yH(t,r),tamboTool:s}}catch(r){return console.error("Error in calling tool: ",r),{result:`When attempting to call tool ${t.toolName} the following error occurred: ${r}. Explain to the user that the tool call failed and try again if needed.`,error:r instanceof Error?r.message:"Unknown error"}}},gH=(t,e)=>{const n=e[t];if(!n)return{tool:null,tamboTool:null};const r=L4(n);return{tool:{getComponentContext:n.tool,definition:r},tamboTool:n}},yH=async(t,e)=>{const n=t.parameters??[],r=Object.fromEntries(n.map(s=>[s.parameterName,s.parameterValue]));return await e.getComponentContext(r)},dN=K.createContext(void 0),vH=({children:t,generationStage:e,statusMessage:n})=>{const r=uN(e),s=K.useMemo(()=>({generationStage:e,generationStatusMessage:n,isIdle:r}),[e,n,r]);return Ie.createElement(dN.Provider,{value:s},t)},Gi={id:"placeholder",messages:[],createdAt:"",projectId:"",updatedAt:"",metadata:{}},wy=K.createContext({thread:Gi,currentThreadId:Gi.id,currentThread:Gi,threadMap:{[Gi.id]:Gi},setThreadMap:()=>{throw new Error("setThreadMap not implemented")},switchCurrentThread:()=>{throw new Error("switchCurrentThread not implemented")},startNewThread:()=>{throw new Error("startNewThread not implemented")},updateThreadName:()=>{throw new Error("updateThreadName not implemented")},generateThreadName:()=>{throw new Error("generateThreadName not implemented")},addThreadMessage:()=>{throw new Error("updateThreadMessageHistory not implemented")},streaming:!0,updateThreadMessage:()=>{throw new Error("updateThreadMessage not implemented")},sendThreadMessage:()=>{throw new Error("sendThreadMessage not implemented")},cancel:()=>{throw new Error("cancel not implemented")}}),_H=({children:t,streaming:e=!0,initialMessages:n=[],autoGenerateThreadName:r=!0,autoGenerateNameThreshold:s=3,contextKey:i})=>{const o=K.useMemo(()=>({id:"placeholder",messages:n.map(b=>({...b,id:b.id??crypto.randomUUID(),threadId:"placeholder",createdAt:b.createdAt??new Date().toISOString(),componentState:b.componentState??{}})),createdAt:"",projectId:"",updatedAt:"",metadata:{},contextKey:i}),[i,n]),[a,c]=K.useState({[o.id]:o}),d=tN(),f=nN(),{componentList:m,toolRegistry:y,componentToolAssociations:v,onCallUnregisteredTool:_}=vy(),{getAdditionalContext:E}=_y(),[k,p]=K.useState(!1),w=K.useRef(k),[g,C]=K.useState(o.id),$=a[g],N=($==null?void 0:$.generationStage)??br.IDLE,j=($==null?void 0:$.statusMessage)??"",A=K.useMemo(()=>{const b=new Map;if($)for(const T of $.messages)b.set(T.id,T);return b},[$]);K.useEffect(()=>{w.current=k},[k]);const G=K.useCallback(async(b,T)=>{try{const M=await d.beta.projects.getCurrent();f.setQueryData(["threads",M.id,T],b),await f.invalidateQueries({queryKey:["threads"]})}catch(M){console.warn("Failed to update threads cache:",M)}},[d.beta.projects,f]),V=K.useCallback(async(b,T)=>{const M={...Gi,id:b,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await G(O=>O&&{...O,items:[M,...O.items??[]],total:(O.total??0)+1,count:(O.count??0)+1},T)},[G]),H=K.useCallback(async(b,T,M)=>{await G(O=>O!=null&&O.items?{...O,items:O.items.map(F=>F.id===b?T(F):F),total:O.total,count:O.count}:O,M)},[G]),Q=K.useCallback(async b=>{const T=await d.beta.threads.retrieve(b),M={...T,messages:T.messages.map(O=>{var F;return A.has(O.id)?{...A.get(O.id),...O}:(F=O.component)!=null&&F.componentName?C1(O,m):O})};c(O=>({...O,[b]:M}))},[d.beta.threads,m,A]);K.useEffect(()=>{async function b(){try{await Q(g)}catch(T){console.error("Failed to fetch thread:",T)}}g&&g!==o.id&&!a[g]&&b().catch(T=>{console.error("Unexpected error in loadThread:",T)})},[g,Q,a,o.id]);const ie=K.useCallback(async(b,T=!0,M=new Date().toISOString())=>{var le;if(!$)return console.warn("Cannot add messages if we do not have a current thread"),[];const O={...b,createdAt:M},F=b.threadId,Z=O.id;if(c(ce=>{var Re;if(!F)return ce;const W=((Re=ce[F])==null?void 0:Re.messages)||[],dt=W.find(Je=>Je.id===Z)?W.map(Je=>Je.id===Z?O:Je):[...W,O];return{...ce,[F]:{...ce[F],messages:dt}}}),T)try{await d.beta.threads.messages.create(b.threadId,{content:b.content,role:b.role,additionalContext:O.additionalContext})}catch(ce){throw console.error("Failed to add message to server",ce),c(W=>{var Fe;const dt=(((Fe=W[F])==null?void 0:Fe.messages)||[]).filter(Re=>Re.id!==Z);return{...W,[F]:{...W[F],messages:dt}}}),ce}return((le=a[F])==null?void 0:le.messages)||[]},[d.beta.threads.messages,$,a]),se=K.useCallback(async(b,T,M=!0,O=new Date().toISOString())=>{if(c(F=>{var ce;const le=(((ce=F[T.threadId])==null?void 0:ce.messages)||[]).map(W=>W.id===b?{...W,...T,id:W.id,createdAt:T.createdAt??W.createdAt??O}:W);return{...F,[T.threadId]:{...F[T.threadId],messages:le}}}),M&&T.content&&T.role)try{await d.beta.threads.messages.create(T.threadId,{content:T.content,role:T.role,additionalContext:T.additionalContext})}catch(F){throw console.error("Failed to update message on server",F),c(Z=>{var ce,W;const le=(W=(ce=Z[T.threadId])==null?void 0:ce.messages)==null?void 0:W.filter(X=>X.id!==b);return{...Z,[T.threadId]:{...Z[T.threadId],messages:le}}}),F}},[d.beta.threads.messages]),ae=K.useCallback(async(b,T)=>{if(b??(b=g),b===o.id)return console.warn("Cannot generate name for empty thread"),a[b];const M=await d.beta.threads.generateName(b);return c(O=>O[b]?{...O,[b]:{...O[b],name:M.name}}:O),await H(b,O=>({...O,name:M.name}),T),M},[d.beta.threads,g,a,o.id,H]),ye=K.useCallback((b,T)=>{c(M=>{const O=M[b];if(!O||!r||s==null||O.id===o.id)return M;const F=O.messages.length;return!O.name&&F>=s&&ae(b,T).catch(Z=>{console.error("Failed to generate thread name:",Z)}),M})},[r,s,o.id,ae]),Pe=K.useCallback(()=>{C(o.id),c(b=>({...b,[o.id]:o}))},[o]),ee=K.useCallback(async(b,T)=>{var O;T??(T=g);const M=(O=a[T])==null?void 0:O.name;if(c(F=>F[T]?{...F,[T]:{...F[T],name:b}}:F),T!==o.id)try{const F=await d.beta.projects.getCurrent();await d.beta.threads.update(T,{name:b,projectId:F.id})}catch(F){throw console.error("Failed to update thread name on server",F),c(Z=>Z[T]?{...Z,[T]:{...Z[T],name:M}}:Z),F}},[g,d.beta.projects,d.beta.threads,o.id,a]),ue=K.useCallback(async(b,T=!0)=>{if(b===o.id){console.warn("Switching to placeholder thread, may be a bug.");return}C(b),c(M=>M[b]?M:{...M,[b]:{...M[o.id],id:b}}),T&&await Q(b)},[Q,o]),L=K.useCallback((b,T,M)=>{c(O=>({...O,[b]:{...O[b],generationStage:T,statusMessage:M}}))},[]),I=K.useCallback(async b=>{b??(b=g);const T=($==null?void 0:$.generationStage)??br.IDLE;uN(T)||(p(!0),c(M=>M[b]?{...M,[b]:{...M[b],generationStage:br.CANCELLED,messages:M[b].messages.map(O=>O.id===M[b].messages[M[b].messages.length-1].id?{...O,isCancelled:!0}:O)}}:M),await d.beta.threads.cancel(b))},[d.beta.threads,g,$==null?void 0:$.generationStage]),U=K.useCallback(async(b,T,M,O)=>{var ce,W,X,dt,Fe;if(w.current)return p(!1),Rm(M);let F,Z=!1;L(M,br.STREAMING_RESPONSE);for await(const Re of b)if(Re.mcpAccessToken&&c(Je=>{const gt=Je[M];return gt?{...Je,[M]:{...gt,mcpAccessToken:Re.mcpAccessToken}}:Je}),Re.responseMessageDto.toolCallRequest){const Je=Re.responseMessageDto.toolCallRequest.toolName;L(Re.responseMessageDto.threadId,br.FETCHING_CONTEXT),await se(Re.responseMessageDto.id,{...Re.responseMessageDto},!1);const gt=await u6(Re.responseMessageDto.toolCallRequest,y,_);if(w.current)return p(!1),Rm(M);const vn=await wH(gt),Vt={...T,initialMessages:void 0,...Je?{toolCallCounts:{...T.toolCallCounts??{},[Je]:(((ce=T.toolCallCounts)==null?void 0:ce[Je])??0)+1}}:{},messageToAppend:{content:vn,role:"tool",actionType:"tool_response",component:Re.responseMessageDto.component,tool_call_id:Re.responseMessageDto.tool_call_id,error:gt.error}};await se(Re.responseMessageDto.id,{...Re.responseMessageDto,error:gt.error},!1),await ie({threadId:Re.responseMessageDto.threadId,content:vn,role:"tool",id:crypto.randomUUID(),createdAt:new Date().toISOString(),componentState:{},actionType:"tool_response",tool_call_id:Re.responseMessageDto.tool_call_id,error:gt.error},!1),L(Re.responseMessageDto.threadId,br.STREAMING_RESPONSE);const $t=await QC(d,Vt,Re.responseMessageDto.threadId);return await U($t,Vt,Re.responseMessageDto.threadId,O)}else{if(w.current)return p(!1),F??Rm(M);if(!Z&&Re.responseMessageDto.threadId&&Re.responseMessageDto.threadId!==($==null?void 0:$.id)){Z=!0;const Je=g===Gi.id;await ue(Re.responseMessageDto.threadId,!1),Je&&(await V(Re.responseMessageDto.threadId,O),ye(Re.responseMessageDto.threadId,O))}if(!F)F=(W=Re.responseMessageDto.component)!=null&&W.componentName?C1(Re.responseMessageDto,m):Re.responseMessageDto,await ie(F,!1);else{if((X=Re.responseMessageDto.component)!=null&&X.toolCallRequest){const{toolName:vn}=Re.responseMessageDto.component.toolCallRequest,Vt=vn?y[vn]:void 0;(((dt=Vt==null?void 0:Vt.annotations)==null?void 0:dt.tamboStreamableHint)??!1)&&await u6(Re.responseMessageDto.component.toolCallRequest,y,_)}const Je=F.id;(Fe=Re.responseMessageDto.component)!=null&&Fe.componentName?F=C1(Re.responseMessageDto,m):F=Re.responseMessageDto,Re.responseMessageDto.id!==Je?await ie(F,!1):await se(F.id,F,!1)}}const le=(F==null?void 0:F.threadId)??M;return L(le,br.COMPLETE),ye(le,O),F??{...Rm(le),content:[{type:"text",text:"Error processing stream"}]}},[ie,V,ye,d,m,$==null?void 0:$.id,g,_,ue,y,se,L]),z=K.useCallback(async(b,T={})=>{p(!1);const{threadId:M=g??o.id,streamResponse:O=e,forceToolChoice:F,contextKey:Z,additionalContext:le,content:ce}=T;if(!O)throw new Error("Non-streaming mode is deprecated. Use streaming mode instead.");L(M,br.FETCHING_CONTEXT);const W=await E(),X={...le??{}};for(const $t of W)X[$t.name]=$t.context;const dt=crypto.randomUUID(),Fe=ce??[{type:"text",text:b}];await ie({content:Fe,renderedComponent:null,role:"user",threadId:M,id:dt,createdAt:new Date().toISOString(),componentState:{},additionalContext:X},!1),ye(M,Z);const Re=hH(m,y,v),Je=pH(y,v),gt={},vn={messageToAppend:{content:Fe,role:"user",additionalContext:X},contextKey:Z,availableComponents:Re,clientTools:Je.map($t=>L4($t)),forceToolChoice:F,toolCallCounts:gt,...M===o.id&&n.length>0&&{initialMessages:n.map($t=>({content:$t.content,role:$t.role,additionalContext:$t.additionalContext}))}};let Vt;try{Vt=await QC(d,vn,M===o.id?void 0:M)}catch($t){throw L(M,br.ERROR),c(Nn=>{const Pn=Nn[M];return Pn?{...Nn,[M]:{...Pn,messages:Pn.messages.filter(fn=>fn.id!==dt)}}:Nn}),$t}try{return await U(Vt,vn,M,Z)}catch($t){throw L(M,br.ERROR),c(Nn=>{const Pn=Nn[M];return Pn?{...Nn,[M]:{...Pn,messages:Pn.messages.filter(fn=>fn.id!==dt)}}:Nn}),$t}},[m,y,v,g,ie,d,L,U,e,E,o.id,n,ye]);return Ie.createElement(wy.Provider,{value:{thread:$,currentThreadId:g,currentThread:$,threadMap:a,setThreadMap:c,switchCurrentThread:ue,startNewThread:Pe,updateThreadName:ee,generateThreadName:ae,addThreadMessage:ie,updateThreadMessage:se,streaming:e,cancel:I,sendThreadMessage:z,contextKey:i}},Ie.createElement(vH,{generationStage:N,statusMessage:j},t))},fN=()=>{const t=K.useContext(wy),e=K.useContext(dN);if(t===void 0)throw new Error("useTamboThread must be used within a TamboThreadProvider");if(e===void 0)throw new Error("useTamboThread must be used within a TamboThreadProvider");return{...t,...e}};async function wH(t){var e;return t.error?[{type:"text",text:O2(t.result)}]:(e=t.tamboTool)!=null&&e.transformToContent?await t.tamboTool.transformToContent(t.result):[{type:"text",text:O2(t.result)}]}function Rm(t){return{threadId:t,content:[{type:"text",text:""}],role:"assistant",createdAt:new Date().toISOString(),id:crypto.randomUUID(),componentState:{}}}const hN=K.createContext(void 0),SH=({children:t})=>{const e=K.useContext(md);if(!e)throw new Error("TamboMcpTokenProvider must be used within a TamboClientProvider");const{client:n}=e,r=n.baseURL,s=K.useContext(wy),i=(s==null?void 0:s.currentThread)??null,o=(s==null?void 0:s.currentThreadId)??null,a=K.useMemo(()=>(s==null?void 0:s.setThreadMap)??(()=>{}),[s==null?void 0:s.setThreadMap]),c=K.useRef(null),d=K.useMemo(()=>(i==null?void 0:i.mcpAccessToken)??null,[i]);K.useEffect(()=>{const m=c.current!==o;c.current=o;const y=o===Gi.id;m&&o&&!y&&i&&!i.mcpAccessToken&&(async()=>{try{const E=await n.beta.auth.getMcpToken({threadId:o});E.mcpAccessToken&&a(k=>{const p=k[o];return p?{...k,[o]:{...p,mcpAccessToken:E.mcpAccessToken}}:k})}catch(E){console.error(`Failed to fetch MCP token for thread ${o}:`,E)}})()},[o,i,n,a]);const f=K.useMemo(()=>({mcpAccessToken:d,tamboBaseUrl:r}),[d,r]);return Ie.createElement(hN.Provider,{value:f},t)},kH=t=>{const e=K.useContext(hN);if(e===void 0)throw new Error("useTamboMcpToken must be used within a TamboMcpTokenProvider");const n=K.useContext(md);if(!n)throw new Error("useTamboMcpToken must be used within a TamboClientProvider");const{client:r}=n,s=K.useContext(wy),i=(s==null?void 0:s.currentThreadId)??null,[o,a]=K.useState(null),c=K.useRef(!1),d=i===Gi.id,f=t&&(!i||d)&&!e.mcpAccessToken&&!o&&!c.current;return K.useEffect(()=>{f&&(c.current=!0,(async()=>{try{const v=await r.beta.auth.getMcpToken({contextKey:t});v.mcpAccessToken&&a(v.mcpAccessToken)}catch(v){console.error("Failed to fetch threadless MCP token:",v)}})())},[f,r,t]),K.useEffect(()=>{i&&i!==Gi.id&&(a(null),c.current=!1)},[i]),{mcpAccessToken:e.mcpAccessToken??o,tamboBaseUrl:e.tamboBaseUrl}};function bH(t){return"requestedSchema"in t}function EH(){const[t,e]=K.useState(null),[n,r]=K.useState(null),s=K.useCallback(async(i,o)=>await new Promise((a,c)=>{if(!bH(i.params)){const f="mode"in i.params?String(i.params.mode):"unknown";c(new Error(`Unsupported MCP elicitation params: expected requestedSchema (form mode), got mode=${f}`));return}if(e({message:i.params.message,requestedSchema:i.params.requestedSchema,signal:o.signal}),o.signal.aborted){e(null),c(new Error("Request aborted"));return}const d=()=>{e(null),r(null),c(new Error("Request aborted"))};o.signal.addEventListener("abort",d,{once:!0}),r(()=>f=>{o.signal.removeEventListener("abort",d),e(null),r(null),a(f)})}),[]);return{elicitation:t,setElicitation:e,resolveElicitation:n,setResolveElicitation:r,defaultElicitationHandler:s}}function Sy(t){return!!t._zod}function da(t,e){return Sy(t)?WT(t,e):t.safeParse(e)}function pN(t){var n,r;if(!t)return;let e;if(Sy(t)?e=(r=(n=t._zod)==null?void 0:n.def)==null?void 0:r.shape:e=t.shape,!!e){if(typeof e=="function")try{return e()}catch{return}return e}}function CH(t){var s;if(Sy(t)){const o=(s=t._zod)==null?void 0:s.def;if(o){if(o.value!==void 0)return o.value;if(Array.isArray(o.values)&&o.values.length>0)return o.values[0]}}const n=t._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}const r=t.value;if(r!==void 0)return r}const ky="2025-11-25",PH=[ky,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],wl="io.modelcontextprotocol/related-task",by="2.0",ar=yU(t=>t!==null&&(typeof t=="object"||typeof t=="function")),mN=Rt([B(),Pt().int()]),gN=B();Qn({ttl:Rt([Pt(),H8()]).optional(),pollInterval:Pt().optional()});const $H=ve({ttl:Pt().optional()}),TH=ve({taskId:B()}),U4=Qn({progressToken:mN.optional(),[wl]:TH.optional()}),ks=ve({_meta:U4.optional()}),Wh=ks.extend({task:$H.optional()}),xH=t=>Wh.safeParse(t).success,cr=ve({method:B(),params:ks.loose().optional()}),Bs=ve({_meta:U4.optional()}),Zs=ve({method:B(),params:Bs.loose().optional()}),dr=Qn({_meta:U4.optional()}),Ey=Rt([B(),Pt().int()]),yN=ve({jsonrpc:Se(by),id:Ey,...cr.shape}).strict(),A2=t=>yN.safeParse(t).success,vN=ve({jsonrpc:Se(by),...Zs.shape}).strict(),NH=t=>vN.safeParse(t).success,V4=ve({jsonrpc:Se(by),id:Ey,result:dr}).strict(),Cf=t=>V4.safeParse(t).success;var We;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(We||(We={}));const G4=ve({jsonrpc:Se(by),id:Ey.optional(),error:ve({code:Pt().int(),message:B(),data:xt().optional()})}).strict(),RH=t=>G4.safeParse(t).success,hg=Rt([yN,vN,V4,G4]);Rt([V4,G4]);const yc=dr.strict(),OH=Bs.extend({requestId:Ey.optional(),reason:B().optional()}),H4=Zs.extend({method:Se("notifications/cancelled"),params:OH}),IH=ve({src:B(),mimeType:B().optional(),sizes:ge(B()).optional(),theme:Ss(["light","dark"]).optional()}),Kh=ve({icons:ge(IH).optional()}),td=ve({name:B(),title:B().optional()}),_N=td.extend({...td.shape,...Kh.shape,version:B(),websiteUrl:B().optional(),description:B().optional()}),AH=T4(ve({applyDefaults:Ut().optional()}),en(B(),xt())),MH=X8(t=>t&&typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length===0?{form:{}}:t,T4(ve({form:AH.optional(),url:ar.optional()}),en(B(),xt()).optional())),jH=Qn({list:ar.optional(),cancel:ar.optional(),requests:Qn({sampling:Qn({createMessage:ar.optional()}).optional(),elicitation:Qn({create:ar.optional()}).optional()}).optional()}),zH=Qn({list:ar.optional(),cancel:ar.optional(),requests:Qn({tools:Qn({call:ar.optional()}).optional()}).optional()}),DH=ve({experimental:en(B(),ar).optional(),sampling:ve({context:ar.optional(),tools:ar.optional()}).optional(),elicitation:MH.optional(),roots:ve({listChanged:Ut().optional()}).optional(),tasks:jH.optional()}),FH=ks.extend({protocolVersion:B(),capabilities:DH,clientInfo:_N}),LH=cr.extend({method:Se("initialize"),params:FH}),UH=ve({experimental:en(B(),ar).optional(),logging:ar.optional(),completions:ar.optional(),prompts:ve({listChanged:Ut().optional()}).optional(),resources:ve({subscribe:Ut().optional(),listChanged:Ut().optional()}).optional(),tools:ve({listChanged:Ut().optional()}).optional(),tasks:zH.optional()}),wN=dr.extend({protocolVersion:B(),capabilities:UH,serverInfo:_N,instructions:B().optional()}),SN=Zs.extend({method:Se("notifications/initialized"),params:Bs.optional()}),VH=t=>SN.safeParse(t).success,q4=cr.extend({method:Se("ping"),params:ks.optional()}),GH=ve({progress:Pt(),total:gn(Pt()),message:gn(B())}),HH=ve({...Bs.shape,...GH.shape,progressToken:mN}),B4=Zs.extend({method:Se("notifications/progress"),params:HH}),qH=ks.extend({cursor:gN.optional()}),Qh=cr.extend({params:qH.optional()}),Yh=dr.extend({nextCursor:gN.optional()}),BH=Ss(["working","input_required","completed","failed","cancelled"]),Xh=ve({taskId:B(),status:BH,ttl:Rt([Pt(),H8()]),createdAt:B(),lastUpdatedAt:B(),pollInterval:gn(Pt()),statusMessage:gn(B())}),Th=dr.extend({task:Xh}),ZH=Bs.merge(Xh),g0=Zs.extend({method:Se("notifications/tasks/status"),params:ZH}),Z4=cr.extend({method:Se("tasks/get"),params:ks.extend({taskId:B()})}),W4=dr.merge(Xh),K4=cr.extend({method:Se("tasks/result"),params:ks.extend({taskId:B()})});dr.loose();const Q4=Qh.extend({method:Se("tasks/list")}),Y4=Yh.extend({tasks:ge(Xh)}),X4=cr.extend({method:Se("tasks/cancel"),params:ks.extend({taskId:B()})}),WH=dr.merge(Xh),kN=ve({uri:B(),mimeType:gn(B()),_meta:en(B(),xt()).optional()}),bN=kN.extend({text:B()}),J4=B().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),EN=kN.extend({blob:J4}),Jh=Ss(["user","assistant"]),gd=ve({audience:ge(Jh).optional(),priority:Pt().min(0).max(1).optional(),lastModified:U8({offset:!0}).optional()}),CN=ve({...td.shape,...Kh.shape,uri:B(),description:gn(B()),mimeType:gn(B()),annotations:gd.optional(),_meta:gn(Qn({}))}),KH=ve({...td.shape,...Kh.shape,uriTemplate:B(),description:gn(B()),mimeType:gn(B()),annotations:gd.optional(),_meta:gn(Qn({}))}),QH=Qh.extend({method:Se("resources/list")}),PN=Yh.extend({resources:ge(CN)}),YH=Qh.extend({method:Se("resources/templates/list")}),$N=Yh.extend({resourceTemplates:ge(KH)}),ek=ks.extend({uri:B()}),XH=ek,JH=cr.extend({method:Se("resources/read"),params:XH}),TN=dr.extend({contents:ge(Rt([bN,EN]))}),xN=Zs.extend({method:Se("notifications/resources/list_changed"),params:Bs.optional()}),eq=ek,tq=cr.extend({method:Se("resources/subscribe"),params:eq}),nq=ek,rq=cr.extend({method:Se("resources/unsubscribe"),params:nq}),sq=Bs.extend({uri:B()}),iq=Zs.extend({method:Se("notifications/resources/updated"),params:sq}),oq=ve({name:B(),description:gn(B()),required:gn(Ut())}),aq=ve({...td.shape,...Kh.shape,description:gn(B()),arguments:gn(ge(oq)),_meta:gn(Qn({}))}),lq=Qh.extend({method:Se("prompts/list")}),NN=Yh.extend({prompts:ge(aq)}),uq=ks.extend({name:B(),arguments:en(B(),B()).optional()}),cq=cr.extend({method:Se("prompts/get"),params:uq}),tk=ve({type:Se("text"),text:B(),annotations:gd.optional(),_meta:en(B(),xt()).optional()}),nk=ve({type:Se("image"),data:J4,mimeType:B(),annotations:gd.optional(),_meta:en(B(),xt()).optional()}),rk=ve({type:Se("audio"),data:J4,mimeType:B(),annotations:gd.optional(),_meta:en(B(),xt()).optional()}),dq=ve({type:Se("tool_use"),name:B(),id:B(),input:en(B(),xt()),_meta:en(B(),xt()).optional()}),fq=ve({type:Se("resource"),resource:Rt([bN,EN]),annotations:gd.optional(),_meta:en(B(),xt()).optional()}),hq=CN.extend({type:Se("resource_link")}),sk=Rt([tk,nk,rk,hq,fq]),pq=ve({role:Jh,content:sk}),RN=dr.extend({description:B().optional(),messages:ge(pq)}),ON=Zs.extend({method:Se("notifications/prompts/list_changed"),params:Bs.optional()}),mq=ve({title:B().optional(),readOnlyHint:Ut().optional(),destructiveHint:Ut().optional(),idempotentHint:Ut().optional(),openWorldHint:Ut().optional()}),gq=ve({taskSupport:Ss(["required","optional","forbidden"]).optional()}),IN=ve({...td.shape,...Kh.shape,description:B().optional(),inputSchema:ve({type:Se("object"),properties:en(B(),ar).optional(),required:ge(B()).optional()}).catchall(xt()),outputSchema:ve({type:Se("object"),properties:en(B(),ar).optional(),required:ge(B()).optional()}).catchall(xt()).optional(),annotations:mq.optional(),execution:gq.optional(),_meta:en(B(),xt()).optional()}),yq=Qh.extend({method:Se("tools/list")}),AN=Yh.extend({tools:ge(IN)}),Cy=dr.extend({content:ge(sk).default([]),structuredContent:en(B(),xt()).optional(),isError:Ut().optional()});Cy.or(dr.extend({toolResult:xt()}));const vq=Wh.extend({name:B(),arguments:en(B(),xt()).optional()}),_q=cr.extend({method:Se("tools/call"),params:vq}),MN=Zs.extend({method:Se("notifications/tools/list_changed"),params:Bs.optional()}),wq=ve({autoRefresh:Ut().default(!0),debounceMs:Pt().int().nonnegative().default(300)}),jN=Ss(["debug","info","notice","warning","error","critical","alert","emergency"]),Sq=ks.extend({level:jN}),kq=cr.extend({method:Se("logging/setLevel"),params:Sq}),bq=Bs.extend({level:jN,logger:B().optional(),data:xt()}),Eq=Zs.extend({method:Se("notifications/message"),params:bq}),Cq=ve({name:B().optional()}),Pq=ve({hints:ge(Cq).optional(),costPriority:Pt().min(0).max(1).optional(),speedPriority:Pt().min(0).max(1).optional(),intelligencePriority:Pt().min(0).max(1).optional()}),$q=ve({mode:Ss(["auto","required","none"]).optional()}),Tq=ve({type:Se("tool_result"),toolUseId:B().describe("The unique identifier for the corresponding tool call."),content:ge(sk).default([]),structuredContent:ve({}).loose().optional(),isError:Ut().optional(),_meta:en(B(),xt()).optional()}),xq=Z8("type",[tk,nk,rk]),y0=Z8("type",[tk,nk,rk,dq,Tq]),Nq=ve({role:Jh,content:Rt([y0,ge(y0)]),_meta:en(B(),xt()).optional()}),Rq=Wh.extend({messages:ge(Nq),modelPreferences:Pq.optional(),systemPrompt:B().optional(),includeContext:Ss(["none","thisServer","allServers"]).optional(),temperature:Pt().optional(),maxTokens:Pt().int(),stopSequences:ge(B()).optional(),metadata:ar.optional(),tools:ge(IN).optional(),toolChoice:$q.optional()}),Hf=cr.extend({method:Se("sampling/createMessage"),params:Rq}),zN=dr.extend({model:B(),stopReason:gn(Ss(["endTurn","stopSequence","maxTokens"]).or(B())),role:Jh,content:xq}),DN=dr.extend({model:B(),stopReason:gn(Ss(["endTurn","stopSequence","maxTokens","toolUse"]).or(B())),role:Jh,content:Rt([y0,ge(y0)])}),Oq=ve({type:Se("boolean"),title:B().optional(),description:B().optional(),default:Ut().optional()}),Iq=ve({type:Se("string"),title:B().optional(),description:B().optional(),minLength:Pt().optional(),maxLength:Pt().optional(),format:Ss(["email","uri","date","date-time"]).optional(),default:B().optional()}),Aq=ve({type:Ss(["number","integer"]),title:B().optional(),description:B().optional(),minimum:Pt().optional(),maximum:Pt().optional(),default:Pt().optional()}),Mq=ve({type:Se("string"),title:B().optional(),description:B().optional(),enum:ge(B()),default:B().optional()}),jq=ve({type:Se("string"),title:B().optional(),description:B().optional(),oneOf:ge(ve({const:B(),title:B()})),default:B().optional()}),zq=ve({type:Se("string"),title:B().optional(),description:B().optional(),enum:ge(B()),enumNames:ge(B()).optional(),default:B().optional()}),Dq=Rt([Mq,jq]),Fq=ve({type:Se("array"),title:B().optional(),description:B().optional(),minItems:Pt().optional(),maxItems:Pt().optional(),items:ve({type:Se("string"),enum:ge(B())}),default:ge(B()).optional()}),Lq=ve({type:Se("array"),title:B().optional(),description:B().optional(),minItems:Pt().optional(),maxItems:Pt().optional(),items:ve({anyOf:ge(ve({const:B(),title:B()}))}),default:ge(B()).optional()}),Uq=Rt([Fq,Lq]),Vq=Rt([zq,Dq,Uq]),Gq=Rt([Vq,Oq,Iq,Aq]),Hq=Wh.extend({mode:Se("form").optional(),message:B(),requestedSchema:ve({type:Se("object"),properties:en(B(),Gq),required:ge(B()).optional()})}),qq=Wh.extend({mode:Se("url"),message:B(),elicitationId:B(),url:B().url()}),Bq=Rt([Hq,qq]),qf=cr.extend({method:Se("elicitation/create"),params:Bq}),Zq=Bs.extend({elicitationId:B()}),Wq=Zs.extend({method:Se("notifications/elicitation/complete"),params:Zq}),FN=dr.extend({action:Ss(["accept","decline","cancel"]),content:X8(t=>t===null?void 0:t,en(B(),Rt([B(),Pt(),Ut(),ge(B())])).optional())}),Kq=ve({type:Se("ref/resource"),uri:B()}),Qq=ve({type:Se("ref/prompt"),name:B()}),Yq=ks.extend({ref:Rt([Qq,Kq]),argument:ve({name:B(),value:B()}),context:ve({arguments:en(B(),B()).optional()}).optional()}),Xq=cr.extend({method:Se("completion/complete"),params:Yq}),LN=dr.extend({completion:Qn({values:ge(B()).max(100),total:gn(Pt().int()),hasMore:gn(Ut())})}),Jq=ve({uri:B().startsWith("file://"),name:B().optional(),_meta:en(B(),xt()).optional()}),eB=cr.extend({method:Se("roots/list"),params:ks.optional()}),tB=dr.extend({roots:ge(Jq)}),nB=Zs.extend({method:Se("notifications/roots/list_changed"),params:Bs.optional()});Rt([q4,LH,Xq,kq,cq,lq,QH,YH,JH,tq,rq,_q,yq,Z4,K4,Q4,X4]);Rt([H4,B4,SN,nB,g0]);Rt([yc,zN,DN,FN,tB,W4,Y4,Th]);Rt([q4,Hf,qf,eB,Z4,K4,Q4,X4]);Rt([H4,B4,Eq,iq,xN,MN,ON,g0,Wq]);Rt([yc,wN,LN,RN,NN,PN,$N,TN,Cy,AN,W4,Y4,Th]);class Le extends Error{constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,n,r){if(e===We.UrlElicitationRequired&&r){const s=r;if(s.elicitations)return new rB(s.elicitations,n)}return new Le(e,n,r)}}class rB extends Le{constructor(e,n=`URL elicitation${e.length>1?"s":""} required`){super(We.UrlElicitationRequired,n,{elicitations:e})}get elicitations(){var e;return((e=this.data)==null?void 0:e.elicitations)??[]}}function hl(t){return t==="completed"||t==="failed"||t==="cancelled"}function c6(t){const e=pN(t),n=e==null?void 0:e.method;if(!n)throw new Error("Schema is missing a method literal");const r=CH(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function d6(t,e){const n=da(t,e);if(!n.success)throw n.error;return n.data}const sB=6e4;class iB{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(H4,n=>{this._oncancel(n)}),this.setNotificationHandler(B4,n=>{this._onprogress(n)}),this.setRequestHandler(q4,n=>({})),this._taskStore=e==null?void 0:e.taskStore,this._taskMessageQueue=e==null?void 0:e.taskMessageQueue,this._taskStore&&(this.setRequestHandler(Z4,async(n,r)=>{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Le(We.InvalidParams,"Failed to retrieve task: Task not found");return{...s}}),this.setRequestHandler(K4,async(n,r)=>{const s=async()=>{var a;const i=n.params.taskId;if(this._taskMessageQueue){let c;for(;c=await this._taskMessageQueue.dequeue(i,r.sessionId);){if(c.type==="response"||c.type==="error"){const d=c.message,f=d.id,m=this._requestResolvers.get(f);if(m)if(this._requestResolvers.delete(f),c.type==="response")m(d);else{const y=d,v=new Le(y.error.code,y.error.message,y.error.data);m(v)}else{const y=c.type==="response"?"Response":"Error";this._onerror(new Error(`${y} handler missing for request ${f}`))}continue}await((a=this._transport)==null?void 0:a.send(c.message,{relatedRequestId:r.requestId}))}}const o=await this._taskStore.getTask(i,r.sessionId);if(!o)throw new Le(We.InvalidParams,`Task not found: ${i}`);if(!hl(o.status))return await this._waitForTaskUpdate(i,r.signal),await s();if(hl(o.status)){const c=await this._taskStore.getTaskResult(i,r.sessionId);return this._clearTaskQueue(i),{...c,_meta:{...c._meta,[wl]:{taskId:i}}}}return await s()};return await s()}),this.setRequestHandler(Q4,async(n,r)=>{var s;try{const{tasks:i,nextCursor:o}=await this._taskStore.listTasks((s=n.params)==null?void 0:s.cursor,r.sessionId);return{tasks:i,nextCursor:o,_meta:{}}}catch(i){throw new Le(We.InvalidParams,`Failed to list tasks: ${i instanceof Error?i.message:String(i)}`)}}),this.setRequestHandler(X4,async(n,r)=>{try{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Le(We.InvalidParams,`Task not found: ${n.params.taskId}`);if(hl(s.status))throw new Le(We.InvalidParams,`Cannot cancel task in terminal status: ${s.status}`);await this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",r.sessionId),this._clearTaskQueue(n.params.taskId);const i=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!i)throw new Le(We.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return{_meta:{},...i}}catch(s){throw s instanceof Le?s:new Le(We.InvalidRequest,`Failed to cancel task: ${s instanceof Error?s.message:String(s)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;const n=this._requestHandlerAbortControllers.get(e.params.requestId);n==null||n.abort(e.params.reason)}_setupTimeout(e,n,r,s,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:i,onTimeout:s})}_resetTimeout(e){const n=this._timeoutInfo.get(e);if(!n)return!1;const r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),Le.fromError(We.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){const n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var i,o,a;this._transport=e;const n=(i=this.transport)==null?void 0:i.onclose;this._transport.onclose=()=>{n==null||n(),this._onclose()};const r=(o=this.transport)==null?void 0:o.onerror;this._transport.onerror=c=>{r==null||r(c),this._onerror(c)};const s=(a=this._transport)==null?void 0:a.onmessage;this._transport.onmessage=(c,d)=>{s==null||s(c,d),Cf(c)||RH(c)?this._onresponse(c):A2(c)?this._onrequest(c,d):NH(c)?this._onnotification(c):this._onerror(new Error(`Unknown message type: ${JSON.stringify(c)}`))},await this._transport.start()}_onclose(){var r;const e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const n=Le.fromError(We.ConnectionClosed,"Connection closed");this._transport=void 0,(r=this.onclose)==null||r.call(this);for(const s of e.values())s(n)}_onerror(e){var n;(n=this.onerror)==null||n.call(this,e)}_onnotification(e){const n=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,n){var f,m,y,v;const r=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,s=this._transport,i=(y=(m=(f=e.params)==null?void 0:f._meta)==null?void 0:m[wl])==null?void 0:y.taskId;if(r===void 0){const _={jsonrpc:"2.0",id:e.id,error:{code:We.MethodNotFound,message:"Method not found"}};i&&this._taskMessageQueue?this._enqueueTaskMessage(i,{type:"error",message:_,timestamp:Date.now()},s==null?void 0:s.sessionId).catch(E=>this._onerror(new Error(`Failed to enqueue error response: ${E}`))):s==null||s.send(_).catch(E=>this._onerror(new Error(`Failed to send an error response: ${E}`)));return}const o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o);const a=xH(e.params)?e.params.task:void 0,c=this._taskStore?this.requestTaskStore(e,s==null?void 0:s.sessionId):void 0,d={signal:o.signal,sessionId:s==null?void 0:s.sessionId,_meta:(v=e.params)==null?void 0:v._meta,sendNotification:async _=>{const E={relatedRequestId:e.id};i&&(E.relatedTask={taskId:i}),await this.notification(_,E)},sendRequest:async(_,E,k)=>{var g;const p={...k,relatedRequestId:e.id};i&&!p.relatedTask&&(p.relatedTask={taskId:i});const w=((g=p.relatedTask)==null?void 0:g.taskId)??i;return w&&c&&await c.updateTaskStatus(w,"input_required"),await this.request(_,E,p)},authInfo:n==null?void 0:n.authInfo,requestId:e.id,requestInfo:n==null?void 0:n.requestInfo,taskId:i,taskStore:c,taskRequestedTtl:a==null?void 0:a.ttl,closeSSEStream:n==null?void 0:n.closeSSEStream,closeStandaloneSSEStream:n==null?void 0:n.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>r(e,d)).then(async _=>{if(o.signal.aborted)return;const E={result:_,jsonrpc:"2.0",id:e.id};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"response",message:E,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(E))},async _=>{if(o.signal.aborted)return;const E={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(_.code)?_.code:We.InternalError,message:_.message??"Internal error",..._.data!==void 0&&{data:_.data}}};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"error",message:E,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(E))}).catch(_=>this._onerror(new Error(`Failed to send response: ${_}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:n,...r}=e.params,s=Number(n),i=this._progressHandlers.get(s);if(!i){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}const o=this._responseHandlers.get(s),a=this._timeoutInfo.get(s);if(a&&o&&a.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(c){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),o(c);return}i(r)}_onresponse(e){const n=Number(e.id),r=this._requestResolvers.get(n);if(r){if(this._requestResolvers.delete(n),Cf(e))r(e);else{const o=new Le(e.error.code,e.error.message,e.error.data);r(o)}return}const s=this._responseHandlers.get(n);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let i=!1;if(Cf(e)&&e.result&&typeof e.result=="object"){const o=e.result;if(o.task&&typeof o.task=="object"){const a=o.task;typeof a.taskId=="string"&&(i=!0,this._taskProgressTokens.set(a.taskId,n))}}if(i||this._progressHandlers.delete(n),Cf(e))s(e);else{const o=Le.fromError(e.error.code,e.error.message,e.error.data);s(o)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)==null?void 0:e.close())}async*requestStream(e,n,r){var o,a;const{task:s}=r??{};if(!s){try{yield{type:"result",result:await this.request(e,n,r)}}catch(c){yield{type:"error",error:c instanceof Le?c:new Le(We.InternalError,String(c))}}return}let i;try{const c=await this.request(e,Th,r);if(c.task)i=c.task.taskId,yield{type:"taskCreated",task:c.task};else throw new Le(We.InternalError,"Task creation did not return a task");for(;;){const d=await this.getTask({taskId:i},r);if(yield{type:"taskStatus",task:d},hl(d.status)){d.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)}:d.status==="failed"?yield{type:"error",error:new Le(We.InternalError,`Task ${i} failed`)}:d.status==="cancelled"&&(yield{type:"error",error:new Le(We.InternalError,`Task ${i} was cancelled`)});return}if(d.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)};return}const f=d.pollInterval??((o=this._options)==null?void 0:o.defaultTaskPollInterval)??1e3;await new Promise(m=>setTimeout(m,f)),(a=r==null?void 0:r.signal)==null||a.throwIfAborted()}}catch(c){yield{type:"error",error:c instanceof Le?c:new Le(We.InternalError,String(c))}}}request(e,n,r){const{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o,task:a,relatedTask:c}=r??{};return new Promise((d,f)=>{var w,g,C,$,N;const m=j=>{f(j)};if(!this._transport){m(new Error("Not connected"));return}if(((w=this._options)==null?void 0:w.enforceStrictCapabilities)===!0)try{this.assertCapabilityForMethod(e.method),a&&this.assertTaskCapability(e.method)}catch(j){m(j);return}(g=r==null?void 0:r.signal)==null||g.throwIfAborted();const y=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:y};r!=null&&r.onprogress&&(this._progressHandlers.set(y,r.onprogress),v.params={...e.params,_meta:{...((C=e.params)==null?void 0:C._meta)||{},progressToken:y}}),a&&(v.params={...v.params,task:a}),c&&(v.params={...v.params,_meta:{...(($=v.params)==null?void 0:$._meta)||{},[wl]:c}});const _=j=>{var G;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),(G=this._transport)==null||G.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(j)}},{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(V=>this._onerror(new Error(`Failed to send cancellation: ${V}`)));const A=j instanceof Le?j:new Le(We.RequestTimeout,String(j));f(A)};this._responseHandlers.set(y,j=>{var A;if(!((A=r==null?void 0:r.signal)!=null&&A.aborted)){if(j instanceof Error)return f(j);try{const G=da(n,j.result);G.success?d(G.data):f(G.error)}catch(G){f(G)}}}),(N=r==null?void 0:r.signal)==null||N.addEventListener("abort",()=>{var j;_((j=r==null?void 0:r.signal)==null?void 0:j.reason)});const E=(r==null?void 0:r.timeout)??sB,k=()=>_(Le.fromError(We.RequestTimeout,"Request timed out",{timeout:E}));this._setupTimeout(y,E,r==null?void 0:r.maxTotalTimeout,k,(r==null?void 0:r.resetTimeoutOnProgress)??!1);const p=c==null?void 0:c.taskId;if(p){const j=A=>{const G=this._responseHandlers.get(y);G?G(A):this._onerror(new Error(`Response handler missing for side-channeled request ${y}`))};this._requestResolvers.set(y,j),this._enqueueTaskMessage(p,{type:"request",message:v,timestamp:Date.now()}).catch(A=>{this._cleanupTimeout(y),f(A)})}else this._transport.send(v,{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(j=>{this._cleanupTimeout(y),f(j)})})}async getTask(e,n){return this.request({method:"tasks/get",params:e},W4,n)}async getTaskResult(e,n,r){return this.request({method:"tasks/result",params:e},n,r)}async listTasks(e,n){return this.request({method:"tasks/list",params:e},Y4,n)}async cancelTask(e,n){return this.request({method:"tasks/cancel",params:e},WH,n)}async notification(e,n){var a,c,d,f;if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const r=(a=n==null?void 0:n.relatedTask)==null?void 0:a.taskId;if(r){const m={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...((c=e.params)==null?void 0:c._meta)||{},[wl]:n.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:m,timestamp:Date.now()});return}if((((d=this._options)==null?void 0:d.debouncedNotificationMethods)??[]).includes(e.method)&&!e.params&&!(n!=null&&n.relatedRequestId)&&!(n!=null&&n.relatedTask)){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var y,v;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let m={...e,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(m={...m,params:{...m.params,_meta:{...((y=m.params)==null?void 0:y._meta)||{},[wl]:n.relatedTask}}}),(v=this._transport)==null||v.send(m,n).catch(_=>this._onerror(_))});return}let o={...e,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(o={...o,params:{...o.params,_meta:{...((f=o.params)==null?void 0:f._meta)||{},[wl]:n.relatedTask}}}),await this._transport.send(o,n)}setRequestHandler(e,n){const r=c6(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(s,i)=>{const o=d6(e,s);return Promise.resolve(n(o,i))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){const r=c6(e);this._notificationHandlers.set(r,s=>{const i=d6(e,s);return Promise.resolve(n(i))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){const n=this._taskProgressTokens.get(e);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,n,r){var i;if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const s=(i=this._options)==null?void 0:i.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,n,r,s)}async _clearTaskQueue(e,n){if(this._taskMessageQueue){const r=await this._taskMessageQueue.dequeueAll(e,n);for(const s of r)if(s.type==="request"&&A2(s.message)){const i=s.message.id,o=this._requestResolvers.get(i);o?(o(new Le(We.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(i)):this._onerror(new Error(`Resolver missing for request ${i} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,n){var s,i;let r=((s=this._options)==null?void 0:s.defaultTaskPollInterval)??1e3;try{const o=await((i=this._taskStore)==null?void 0:i.getTask(e));o!=null&&o.pollInterval&&(r=o.pollInterval)}catch{}return new Promise((o,a)=>{if(n.aborted){a(new Le(We.InvalidRequest,"Request cancelled"));return}const c=setTimeout(o,r);n.addEventListener("abort",()=>{clearTimeout(c),a(new Le(We.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,n){const r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async s=>{if(!e)throw new Error("No request provided");return await r.createTask(s,e.id,{method:e.method,params:e.params},n)},getTask:async s=>{const i=await r.getTask(s,n);if(!i)throw new Le(We.InvalidParams,"Failed to retrieve task: Task not found");return i},storeTaskResult:async(s,i,o)=>{await r.storeTaskResult(s,i,o,n);const a=await r.getTask(s,n);if(a){const c=g0.parse({method:"notifications/tasks/status",params:a});await this.notification(c),hl(a.status)&&this._cleanupTaskProgressHandler(s)}},getTaskResult:s=>r.getTaskResult(s,n),updateTaskStatus:async(s,i,o)=>{const a=await r.getTask(s,n);if(!a)throw new Le(We.InvalidParams,`Task "${s}" not found - it may have been cleaned up`);if(hl(a.status))throw new Le(We.InvalidParams,`Cannot update task "${s}" from terminal status "${a.status}" to "${i}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(s,i,o,n);const c=await r.getTask(s,n);if(c){const d=g0.parse({method:"notifications/tasks/status",params:c});await this.notification(d),hl(c.status)&&this._cleanupTaskProgressHandler(s)}},listTasks:s=>r.listTasks(s,n)}}}function f6(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function oB(t,e){const n={...t};for(const r in e){const s=r,i=e[s];if(i===void 0)continue;const o=n[s];f6(o)&&f6(i)?n[s]={...o,...i}:n[s]=i}return n}var M2={exports:{}},UN={},bi={},nd={},ep={},at={},xh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(w){if(super(),!t.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((g,C)=>`${g}${C}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((g,C)=>(C instanceof n&&(g[C.str]=(g[C.str]||0)+1),g),{})}}t._Code=r,t.nil=new r("");function s(p,...w){const g=[p[0]];let C=0;for(;C<w.length;)a(g,w[C]),g.push(p[++C]);return new r(g)}t._=s;const i=new r("+");function o(p,...w){const g=[v(p[0])];let C=0;for(;C<w.length;)g.push(i),a(g,w[C]),g.push(i,v(p[++C]));return c(g),new r(g)}t.str=o;function a(p,w){w instanceof r?p.push(...w._items):w instanceof n?p.push(w):p.push(m(w))}t.addCodeArg=a;function c(p){let w=1;for(;w<p.length-1;){if(p[w]===i){const g=d(p[w-1],p[w+1]);if(g!==void 0){p.splice(w-1,3,g);continue}p[w++]="+"}w++}}function d(p,w){if(w==='""')return p;if(p==='""')return w;if(typeof p=="string")return w instanceof n||p[p.length-1]!=='"'?void 0:typeof w!="string"?`${p.slice(0,-1)}${w}"`:w[0]==='"'?p.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(p instanceof n))return`"${p}${w.slice(1)}`}function f(p,w){return w.emptyStr()?p:p.emptyStr()?w:o`${p}${w}`}t.strConcat=f;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:v(Array.isArray(p)?p.join(","):p)}function y(p){return new r(v(p))}t.stringify=y;function v(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=v;function _(p){return typeof p=="string"&&t.IDENTIFIER.test(p)?new r(`.${p}`):s`[${p}]`}t.getProperty=_;function E(p){if(typeof p=="string"&&t.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}t.getEsmExportName=E;function k(p){return new r(p.toString())}t.regexpCode=k})(xh);var j2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=xh;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:d,parent:f}={}){this._names={},this._prefixes=d,this._parent=f}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const f=this._names[d]||this._nameGroup(d);return`${d}${f.index++}`}_nameGroup(d){var f,m;if(!((m=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}t.Scope=s;class i extends e.Name{constructor(d,f){super(f),this.prefix=d}setValue(d,{property:f,itemIndex:m}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(f)}[${m}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:e.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,f){var m;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:v}=y,_=(m=f.key)!==null&&m!==void 0?m:f.ref;let E=this._values[v];if(E){const w=E.get(_);if(w)return w}else E=this._values[v]=new Map;E.set(_,y);const k=this._scope[v]||(this._scope[v]=[]),p=k.length;return k[p]=f.ref,y.setValue(f,{property:v,itemIndex:p}),y}getValue(d,f){const m=this._values[d];if(m)return m.get(f)}scopeRefs(d,f=this._values){return this._reduceValues(f,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,e._)`${d}${m.scopePath}`})}scopeCode(d=this._values,f,m){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},f,m)}_reduceValues(d,f,m={},y){let v=e.nil;for(const _ in d){const E=d[_];if(!E)continue;const k=m[_]=m[_]||new Map;E.forEach(p=>{if(k.has(p))return;k.set(p,r.Started);let w=f(p);if(w){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;v=(0,e._)`${v}${g} ${p} = ${w};${this.opts._n}`}else if(w=y==null?void 0:y(p))v=(0,e._)`${v}${w}${this.opts._n}`;else throw new n(p);k.set(p,r.Completed)})}return v}}t.ValueScope=a})(j2);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=xh,n=j2;var r=xh;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=j2;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(b,T){return this}}class o extends i{constructor(b,T,M){super(),this.varKind=b,this.name=T,this.rhs=M}render({es5:b,_n:T}){const M=b?n.varKinds.var:this.varKind,O=this.rhs===void 0?"":` = ${this.rhs}`;return`${M} ${this.name}${O};`+T}optimizeNames(b,T){if(b[this.name.str])return this.rhs&&(this.rhs=se(this.rhs,b,T)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(b,T,M){super(),this.lhs=b,this.rhs=T,this.sideEffects=M}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,T){if(!(this.lhs instanceof e.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=se(this.rhs,b,T),this}get names(){const b=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ie(b,this.rhs)}}class c extends a{constructor(b,T,M,O){super(b,M,O),this.op=T}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class d extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class f extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class m extends i{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class y extends i{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,T){return this.code=se(this.code,b,T),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends i{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((T,M)=>T+M.render(b),"")}optimizeNodes(){const{nodes:b}=this;let T=b.length;for(;T--;){const M=b[T].optimizeNodes();Array.isArray(M)?b.splice(T,1,...M):M?b[T]=M:b.splice(T,1)}return b.length>0?this:void 0}optimizeNames(b,T){const{nodes:M}=this;let O=M.length;for(;O--;){const F=M[O];F.optimizeNames(b,T)||(ae(b,F.names),M.splice(O,1))}return M.length>0?this:void 0}get names(){return this.nodes.reduce((b,T)=>Q(b,T.names),{})}}class _ extends v{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class E extends v{}class k extends _{}k.kind="else";class p extends _{constructor(b,T){super(T),this.condition=b}render(b){let T=`if(${this.condition})`+super.render(b);return this.else&&(T+="else "+this.else.render(b)),T}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let T=this.else;if(T){const M=T.optimizeNodes();T=this.else=Array.isArray(M)?new k(M):M}if(T)return b===!1?T instanceof p?T:T.nodes:this.nodes.length?this:new p(ye(b),T instanceof p?[T]:T.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,T){var M;if(this.else=(M=this.else)===null||M===void 0?void 0:M.optimizeNames(b,T),!!(super.optimizeNames(b,T)||this.else))return this.condition=se(this.condition,b,T),this}get names(){const b=super.names;return ie(b,this.condition),this.else&&Q(b,this.else.names),b}}p.kind="if";class w extends _{}w.kind="for";class g extends w{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iteration=se(this.iteration,b,T),this}get names(){return Q(super.names,this.iteration.names)}}class C extends w{constructor(b,T,M,O){super(),this.varKind=b,this.name=T,this.from=M,this.to=O}render(b){const T=b.es5?n.varKinds.var:this.varKind,{name:M,from:O,to:F}=this;return`for(${T} ${M}=${O}; ${M}<${F}; ${M}++)`+super.render(b)}get names(){const b=ie(super.names,this.from);return ie(b,this.to)}}class $ extends w{constructor(b,T,M,O){super(),this.loop=b,this.varKind=T,this.name=M,this.iterable=O}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iterable=se(this.iterable,b,T),this}get names(){return Q(super.names,this.iterable.names)}}class N extends _{constructor(b,T,M){super(),this.name=b,this.args=T,this.async=M}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}N.kind="func";class j extends v{render(b){return"return "+super.render(b)}}j.kind="return";class A extends _{render(b){let T="try"+super.render(b);return this.catch&&(T+=this.catch.render(b)),this.finally&&(T+=this.finally.render(b)),T}optimizeNodes(){var b,T;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(T=this.finally)===null||T===void 0||T.optimizeNodes(),this}optimizeNames(b,T){var M,O;return super.optimizeNames(b,T),(M=this.catch)===null||M===void 0||M.optimizeNames(b,T),(O=this.finally)===null||O===void 0||O.optimizeNames(b,T),this}get names(){const b=super.names;return this.catch&&Q(b,this.catch.names),this.finally&&Q(b,this.finally.names),b}}class G extends _{constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}G.kind="catch";class V extends _{render(b){return"finally"+super.render(b)}}V.kind="finally";class H{constructor(b,T={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...T,_n:T.lines?`
`:""},this._extScope=b,this._scope=new n.Scope({parent:b}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,T){const M=this._extScope.value(b,T);return(this._values[M.prefix]||(this._values[M.prefix]=new Set)).add(M),M}getScopeValue(b,T){return this._extScope.getValue(b,T)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,T,M,O){const F=this._scope.toName(T);return M!==void 0&&O&&(this._constants[F.str]=M),this._leafNode(new o(b,F,M)),F}const(b,T,M){return this._def(n.varKinds.const,b,T,M)}let(b,T,M){return this._def(n.varKinds.let,b,T,M)}var(b,T,M){return this._def(n.varKinds.var,b,T,M)}assign(b,T,M){return this._leafNode(new a(b,T,M))}add(b,T){return this._leafNode(new c(b,t.operators.ADD,T))}code(b){return typeof b=="function"?b():b!==e.nil&&this._leafNode(new y(b)),this}object(...b){const T=["{"];for(const[M,O]of b)T.length>1&&T.push(","),T.push(M),(M!==O||this.opts.es5)&&(T.push(":"),(0,e.addCodeArg)(T,O));return T.push("}"),new e._Code(T)}if(b,T,M){if(this._blockNode(new p(b)),T&&M)this.code(T).else().code(M).endIf();else if(T)this.code(T).endIf();else if(M)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new p(b))}else(){return this._elseNode(new k)}endIf(){return this._endBlockNode(p,k)}_for(b,T){return this._blockNode(b),T&&this.code(T).endFor(),this}for(b,T){return this._for(new g(b),T)}forRange(b,T,M,O,F=this.opts.es5?n.varKinds.var:n.varKinds.let){const Z=this._scope.toName(b);return this._for(new C(F,Z,T,M),()=>O(Z))}forOf(b,T,M,O=n.varKinds.const){const F=this._scope.toName(b);if(this.opts.es5){const Z=T instanceof e.Name?T:this.var("_arr",T);return this.forRange("_i",0,(0,e._)`${Z}.length`,le=>{this.var(F,(0,e._)`${Z}[${le}]`),M(F)})}return this._for(new $("of",O,F,T),()=>M(F))}forIn(b,T,M,O=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,e._)`Object.keys(${T})`,M);const F=this._scope.toName(b);return this._for(new $("in",O,F,T),()=>M(F))}endFor(){return this._endBlockNode(w)}label(b){return this._leafNode(new d(b))}break(b){return this._leafNode(new f(b))}return(b){const T=new j;if(this._blockNode(T),this.code(b),T.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(j)}try(b,T,M){if(!T&&!M)throw new Error('CodeGen: "try" without "catch" and "finally"');const O=new A;if(this._blockNode(O),this.code(b),T){const F=this.name("e");this._currNode=O.catch=new G(F),T(F)}return M&&(this._currNode=O.finally=new V,this.code(M)),this._endBlockNode(G,V)}throw(b){return this._leafNode(new m(b))}block(b,T){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(T),this}endBlock(b){const T=this._blockStarts.pop();if(T===void 0)throw new Error("CodeGen: not in self-balancing block");const M=this._nodes.length-T;if(M<0||b!==void 0&&M!==b)throw new Error(`CodeGen: wrong number of nodes: ${M} vs ${b} expected`);return this._nodes.length=T,this}func(b,T=e.nil,M,O){return this._blockNode(new N(b,T,M)),O&&this.code(O).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,T){const M=this._currNode;if(M instanceof b||T&&M instanceof T)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${T?`${b.kind}/${T.kind}`:b.kind}"`)}_elseNode(b){const T=this._currNode;if(!(T instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=T.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const T=this._nodes;T[T.length-1]=b}}t.CodeGen=H;function Q(z,b){for(const T in b)z[T]=(z[T]||0)+(b[T]||0);return z}function ie(z,b){return b instanceof e._CodeOrName?Q(z,b.names):z}function se(z,b,T){if(z instanceof e.Name)return M(z);if(!O(z))return z;return new e._Code(z._items.reduce((F,Z)=>(Z instanceof e.Name&&(Z=M(Z)),Z instanceof e._Code?F.push(...Z._items):F.push(Z),F),[]));function M(F){const Z=T[F.str];return Z===void 0||b[F.str]!==1?F:(delete b[F.str],Z)}function O(F){return F instanceof e._Code&&F._items.some(Z=>Z instanceof e.Name&&b[Z.str]===1&&T[Z.str]!==void 0)}}function ae(z,b){for(const T in b)z[T]=(z[T]||0)-(b[T]||0)}function ye(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${U(z)}`}t.not=ye;const Pe=I(t.operators.AND);function ee(...z){return z.reduce(Pe)}t.and=ee;const ue=I(t.operators.OR);function L(...z){return z.reduce(ue)}t.or=L;function I(z){return(b,T)=>b===e.nil?T:T===e.nil?b:(0,e._)`${U(b)} ${z} ${U(T)}`}function U(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(at);var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.checkStrictMode=Ee.getErrorPath=Ee.Type=Ee.useFunc=Ee.setEvaluated=Ee.evaluatedPropsToName=Ee.mergeEvaluated=Ee.eachItem=Ee.unescapeJsonPointer=Ee.escapeJsonPointer=Ee.escapeFragment=Ee.unescapeFragment=Ee.schemaRefOrVal=Ee.schemaHasRulesButRef=Ee.schemaHasRules=Ee.checkUnknownRules=Ee.alwaysValidSchema=Ee.toHash=void 0;const Mt=at,aB=xh;function lB(t){const e={};for(const n of t)e[n]=!0;return e}Ee.toHash=lB;function uB(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(VN(t,e),!GN(e,t.self.RULES.all))}Ee.alwaysValidSchema=uB;function VN(t,e=t.schema){const{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;const s=r.RULES.keywords;for(const i in e)s[i]||BN(t,`unknown keyword: "${i}"`)}Ee.checkUnknownRules=VN;function GN(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(e[n])return!0;return!1}Ee.schemaHasRules=GN;function cB(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}Ee.schemaHasRulesButRef=cB;function dB({topSchemaRef:t,schemaPath:e},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Mt._)`${n}`}return(0,Mt._)`${t}${e}${(0,Mt.getProperty)(r)}`}Ee.schemaRefOrVal=dB;function fB(t){return HN(decodeURIComponent(t))}Ee.unescapeFragment=fB;function hB(t){return encodeURIComponent(ik(t))}Ee.escapeFragment=hB;function ik(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ee.escapeJsonPointer=ik;function HN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ee.unescapeJsonPointer=HN;function pB(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)}Ee.eachItem=pB;function h6({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const c=o===void 0?i:o instanceof Mt.Name?(i instanceof Mt.Name?t(s,i,o):e(s,i,o),o):i instanceof Mt.Name?(e(s,o,i),i):n(i,o);return a===Mt.Name&&!(c instanceof Mt.Name)?r(s,c):c}}Ee.mergeEvaluated={props:h6({mergeNames:(t,e,n)=>t.if((0,Mt._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,Mt._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,Mt._)`${n} || {}`).code((0,Mt._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,Mt._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,Mt._)`${n} || {}`),ok(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:qN}),items:h6({mergeNames:(t,e,n)=>t.if((0,Mt._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,Mt._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,Mt._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,Mt._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function qN(t,e){if(e===!0)return t.var("props",!0);const n=t.var("props",(0,Mt._)`{}`);return e!==void 0&&ok(t,n,e),n}Ee.evaluatedPropsToName=qN;function ok(t,e,n){Object.keys(n).forEach(r=>t.assign((0,Mt._)`${e}${(0,Mt.getProperty)(r)}`,!0))}Ee.setEvaluated=ok;const p6={};function mB(t,e){return t.scopeValue("func",{ref:e,code:p6[e.code]||(p6[e.code]=new aB._Code(e.code))})}Ee.useFunc=mB;var z2;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(z2||(Ee.Type=z2={}));function gB(t,e,n){if(t instanceof Mt.Name){const r=e===z2.Num;return n?r?(0,Mt._)`"[" + ${t} + "]"`:(0,Mt._)`"['" + ${t} + "']"`:r?(0,Mt._)`"/" + ${t}`:(0,Mt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Mt.getProperty)(t).toString():"/"+ik(t)}Ee.getErrorPath=gB;function BN(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}Ee.checkStrictMode=BN;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});const wr=at,yB={data:new wr.Name("data"),valCxt:new wr.Name("valCxt"),instancePath:new wr.Name("instancePath"),parentData:new wr.Name("parentData"),parentDataProperty:new wr.Name("parentDataProperty"),rootData:new wr.Name("rootData"),dynamicAnchors:new wr.Name("dynamicAnchors"),vErrors:new wr.Name("vErrors"),errors:new wr.Name("errors"),this:new wr.Name("this"),self:new wr.Name("self"),scope:new wr.Name("scope"),json:new wr.Name("json"),jsonPos:new wr.Name("jsonPos"),jsonLen:new wr.Name("jsonLen"),jsonPart:new wr.Name("jsonPart")};eo.default=yB;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=at,n=Ee,r=eo;t.keywordError={message:({keyword:k})=>(0,e.str)`must pass "${k}" keyword validation`},t.keyword$DataError={message:({keyword:k,schemaType:p})=>p?(0,e.str)`"${k}" keyword must be ${p} ($data)`:(0,e.str)`"${k}" keyword is invalid ($data)`};function s(k,p=t.keywordError,w,g){const{it:C}=k,{gen:$,compositeRule:N,allErrors:j}=C,A=m(k,p,w);g??(N||j)?c($,A):d(C,(0,e._)`[${A}]`)}t.reportError=s;function i(k,p=t.keywordError,w){const{it:g}=k,{gen:C,compositeRule:$,allErrors:N}=g,j=m(k,p,w);c(C,j),$||N||d(g,r.default.vErrors)}t.reportExtraError=i;function o(k,p){k.assign(r.default.errors,p),k.if((0,e._)`${r.default.vErrors} !== null`,()=>k.if(p,()=>k.assign((0,e._)`${r.default.vErrors}.length`,p),()=>k.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:k,keyword:p,schemaValue:w,data:g,errsCount:C,it:$}){if(C===void 0)throw new Error("ajv implementation error");const N=k.name("err");k.forRange("i",C,r.default.errors,j=>{k.const(N,(0,e._)`${r.default.vErrors}[${j}]`),k.if((0,e._)`${N}.instancePath === undefined`,()=>k.assign((0,e._)`${N}.instancePath`,(0,e.strConcat)(r.default.instancePath,$.errorPath))),k.assign((0,e._)`${N}.schemaPath`,(0,e.str)`${$.errSchemaPath}/${p}`),$.opts.verbose&&(k.assign((0,e._)`${N}.schema`,w),k.assign((0,e._)`${N}.data`,g))})}t.extendErrors=a;function c(k,p){const w=k.const("err",p);k.if((0,e._)`${r.default.vErrors} === null`,()=>k.assign(r.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${r.default.vErrors}.push(${w})`),k.code((0,e._)`${r.default.errors}++`)}function d(k,p){const{gen:w,validateName:g,schemaEnv:C}=k;C.$async?w.throw((0,e._)`new ${k.ValidationError}(${p})`):(w.assign((0,e._)`${g}.errors`,p),w.return(!1))}const f={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function m(k,p,w){const{createErrors:g}=k.it;return g===!1?(0,e._)`{}`:y(k,p,w)}function y(k,p,w={}){const{gen:g,it:C}=k,$=[v(C,w),_(k,w)];return E(k,p,$),g.object(...$)}function v({errorPath:k},{instancePath:p}){const w=p?(0,e.str)`${k}${(0,n.getErrorPath)(p,n.Type.Str)}`:k;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,w)]}function _({keyword:k,it:{errSchemaPath:p}},{schemaPath:w,parentSchema:g}){let C=g?p:(0,e.str)`${p}/${k}`;return w&&(C=(0,e.str)`${C}${(0,n.getErrorPath)(w,n.Type.Str)}`),[f.schemaPath,C]}function E(k,{params:p,message:w},g){const{keyword:C,data:$,schemaValue:N,it:j}=k,{opts:A,propertyName:G,topSchemaRef:V,schemaPath:H}=j;g.push([f.keyword,C],[f.params,typeof p=="function"?p(k):p||(0,e._)`{}`]),A.messages&&g.push([f.message,typeof w=="function"?w(k):w]),A.verbose&&g.push([f.schema,N],[f.parentSchema,(0,e._)`${V}${H}`],[r.default.data,$]),G&&g.push([f.propertyName,G])}})(ep);Object.defineProperty(nd,"__esModule",{value:!0});nd.boolOrEmptySchema=nd.topBoolOrEmptySchema=void 0;const vB=ep,_B=at,wB=eo,SB={message:"boolean schema is false"};function kB(t){const{gen:e,schema:n,validateName:r}=t;n===!1?ZN(t,!1):typeof n=="object"&&n.$async===!0?e.return(wB.default.data):(e.assign((0,_B._)`${r}.errors`,null),e.return(!0))}nd.topBoolOrEmptySchema=kB;function bB(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),ZN(t)):n.var(e,!0)}nd.boolOrEmptySchema=bB;function ZN(t,e){const{gen:n,data:r}=t,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,vB.reportError)(s,SB,void 0,e)}var Dn={},ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.getRules=ru.isJSONType=void 0;const EB=["string","number","integer","boolean","null","object","array"],CB=new Set(EB);function PB(t){return typeof t=="string"&&CB.has(t)}ru.isJSONType=PB;function $B(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ru.getRules=$B;var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.shouldUseRule=Po.shouldUseGroup=Po.schemaHasRulesForType=void 0;function TB({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&WN(t,r)}Po.schemaHasRulesForType=TB;function WN(t,e){return e.rules.some(n=>KN(t,n))}Po.shouldUseGroup=WN;function KN(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}Po.shouldUseRule=KN;Object.defineProperty(Dn,"__esModule",{value:!0});Dn.reportTypeError=Dn.checkDataTypes=Dn.checkDataType=Dn.coerceAndCheckDataType=Dn.getJSONTypes=Dn.getSchemaTypes=Dn.DataType=void 0;const xB=ru,NB=Po,RB=ep,Qe=at,QN=Ee;var Pc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Pc||(Dn.DataType=Pc={}));function OB(t){const e=YN(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Dn.getSchemaTypes=OB;function YN(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(xB.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Dn.getJSONTypes=YN;function IB(t,e){const{gen:n,data:r,opts:s}=t,i=AB(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,NB.schemaHasRulesForType)(t,e[0]));if(o){const a=ak(e,r,s.strictNumbers,Pc.Wrong);n.if(a,()=>{i.length?MB(t,e,i):lk(t)})}return o}Dn.coerceAndCheckDataType=IB;const XN=new Set(["string","number","integer","boolean","null"]);function AB(t,e){return e?t.filter(n=>XN.has(n)||e==="array"&&n==="array"):[]}function MB(t,e,n){const{gen:r,data:s,opts:i}=t,o=r.let("dataType",(0,Qe._)`typeof ${s}`),a=r.let("coerced",(0,Qe._)`undefined`);i.coerceTypes==="array"&&r.if((0,Qe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,Qe._)`${s}[0]`).assign(o,(0,Qe._)`typeof ${s}`).if(ak(e,s,i.strictNumbers),()=>r.assign(a,s))),r.if((0,Qe._)`${a} !== undefined`);for(const d of n)(XN.has(d)||d==="array"&&i.coerceTypes==="array")&&c(d);r.else(),lk(t),r.endIf(),r.if((0,Qe._)`${a} !== undefined`,()=>{r.assign(s,a),jB(t,a)});function c(d){switch(d){case"string":r.elseIf((0,Qe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Qe._)`"" + ${s}`).elseIf((0,Qe._)`${s} === null`).assign(a,(0,Qe._)`""`);return;case"number":r.elseIf((0,Qe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Qe._)`+${s}`);return;case"integer":r.elseIf((0,Qe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Qe._)`+${s}`);return;case"boolean":r.elseIf((0,Qe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Qe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Qe._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Qe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Qe._)`[${s}]`)}}}function jB({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,Qe._)`${e} !== undefined`,()=>t.assign((0,Qe._)`${e}[${n}]`,r))}function D2(t,e,n,r=Pc.Correct){const s=r===Pc.Correct?Qe.operators.EQ:Qe.operators.NEQ;let i;switch(t){case"null":return(0,Qe._)`${e} ${s} null`;case"array":i=(0,Qe._)`Array.isArray(${e})`;break;case"object":i=(0,Qe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Qe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Qe._)`typeof ${e} ${s} ${t}`}return r===Pc.Correct?i:(0,Qe.not)(i);function o(a=Qe.nil){return(0,Qe.and)((0,Qe._)`typeof ${e} == "number"`,a,n?(0,Qe._)`isFinite(${e})`:Qe.nil)}}Dn.checkDataType=D2;function ak(t,e,n,r){if(t.length===1)return D2(t[0],e,n,r);let s;const i=(0,QN.toHash)(t);if(i.array&&i.object){const o=(0,Qe._)`typeof ${e} != "object"`;s=i.null?o:(0,Qe._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Qe.nil;i.number&&delete i.integer;for(const o in i)s=(0,Qe.and)(s,D2(o,e,n,r));return s}Dn.checkDataTypes=ak;const zB={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Qe._)`{type: ${t}}`:(0,Qe._)`{type: ${e}}`};function lk(t){const e=DB(t);(0,RB.reportError)(e,zB)}Dn.reportTypeError=lk;function DB(t){const{gen:e,data:n,schema:r}=t,s=(0,QN.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:t}}var Py={};Object.defineProperty(Py,"__esModule",{value:!0});Py.assignDefaults=void 0;const Du=at,FB=Ee;function LB(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const s in n)m6(t,s,n[s].default);else e==="array"&&Array.isArray(r)&&r.forEach((s,i)=>m6(t,i,s.default))}Py.assignDefaults=LB;function m6(t,e,n){const{gen:r,compositeRule:s,data:i,opts:o}=t;if(n===void 0)return;const a=(0,Du._)`${i}${(0,Du.getProperty)(e)}`;if(s){(0,FB.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Du._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Du._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,Du._)`${a} = ${(0,Du.stringify)(n)}`)}var Zi={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.validateUnion=it.validateArray=it.usePattern=it.callValidateCode=it.schemaProperties=it.allSchemaProperties=it.noPropertyInData=it.propertyInData=it.isOwnProperty=it.hasPropFunc=it.reportMissingProp=it.checkMissingProp=it.checkReportMissingProp=void 0;const Bt=at,uk=Ee,ta=eo,UB=Ee;function VB(t,e){const{gen:n,data:r,it:s}=t;n.if(dk(n,r,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Bt._)`${e}`},!0),t.error()})}it.checkReportMissingProp=VB;function GB({gen:t,data:e,it:{opts:n}},r,s){return(0,Bt.or)(...r.map(i=>(0,Bt.and)(dk(t,e,i,n.ownProperties),(0,Bt._)`${s} = ${i}`)))}it.checkMissingProp=GB;function HB(t,e){t.setParams({missingProperty:e},!0),t.error()}it.reportMissingProp=HB;function JN(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Bt._)`Object.prototype.hasOwnProperty`})}it.hasPropFunc=JN;function ck(t,e,n){return(0,Bt._)`${JN(t)}.call(${e}, ${n})`}it.isOwnProperty=ck;function qB(t,e,n,r){const s=(0,Bt._)`${e}${(0,Bt.getProperty)(n)} !== undefined`;return r?(0,Bt._)`${s} && ${ck(t,e,n)}`:s}it.propertyInData=qB;function dk(t,e,n,r){const s=(0,Bt._)`${e}${(0,Bt.getProperty)(n)} === undefined`;return r?(0,Bt.or)(s,(0,Bt.not)(ck(t,e,n))):s}it.noPropertyInData=dk;function eR(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}it.allSchemaProperties=eR;function BB(t,e){return eR(e).filter(n=>!(0,uk.alwaysValidSchema)(t,e[n]))}it.schemaProperties=BB;function ZB({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,c,d){const f=d?(0,Bt._)`${t}, ${e}, ${r}${s}`:e,m=[[ta.default.instancePath,(0,Bt.strConcat)(ta.default.instancePath,i)],[ta.default.parentData,o.parentData],[ta.default.parentDataProperty,o.parentDataProperty],[ta.default.rootData,ta.default.rootData]];o.opts.dynamicRef&&m.push([ta.default.dynamicAnchors,ta.default.dynamicAnchors]);const y=(0,Bt._)`${f}, ${n.object(...m)}`;return c!==Bt.nil?(0,Bt._)`${a}.call(${c}, ${y})`:(0,Bt._)`${a}(${y})`}it.callValidateCode=ZB;const WB=(0,Bt._)`new RegExp`;function KB({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(n,r);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Bt._)`${s.code==="new RegExp"?WB:(0,UB.useFunc)(t,s)}(${n}, ${r})`})}it.usePattern=KB;function QB(t){const{gen:e,data:n,keyword:r,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const c=e.const("len",(0,Bt._)`${n}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:r,dataProp:d,dataPropType:uk.Type.Num},i),e.if((0,Bt.not)(i),a)})}}it.validateArray=QB;function YB(t){const{gen:e,schema:n,keyword:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,uk.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((c,d)=>{const f=t.subschema({keyword:r,schemaProp:d,compositeRule:!0},a);e.assign(o,(0,Bt._)`${o} || ${a}`),t.mergeValidEvaluated(f,a)||e.if((0,Bt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}it.validateUnion=YB;Object.defineProperty(Zi,"__esModule",{value:!0});Zi.validateKeywordUsage=Zi.validSchemaType=Zi.funcKeywordCode=Zi.macroKeywordCode=void 0;const Or=at,kl=eo,XB=it,JB=ep;function eZ(t,e){const{gen:n,keyword:r,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=tR(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const d=n.name("valid");t.subschema({schema:a,schemaPath:Or.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}Zi.macroKeywordCode=eZ;function tZ(t,e){var n;const{gen:r,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;rZ(c,e);const d=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,f=tR(r,s,d),m=r.let("valid");t.block$data(m,y),t.ok((n=e.valid)!==null&&n!==void 0?n:m);function y(){if(e.errors===!1)E(),e.modifying&&g6(t),k(()=>t.error());else{const p=e.async?v():_();e.modifying&&g6(t),k(()=>nZ(t,p))}}function v(){const p=r.let("ruleErrs",null);return r.try(()=>E((0,Or._)`await `),w=>r.assign(m,!1).if((0,Or._)`${w} instanceof ${c.ValidationError}`,()=>r.assign(p,(0,Or._)`${w}.errors`),()=>r.throw(w))),p}function _(){const p=(0,Or._)`${f}.errors`;return r.assign(p,null),E(Or.nil),p}function E(p=e.async?(0,Or._)`await `:Or.nil){const w=c.opts.passContext?kl.default.this:kl.default.self,g=!("compile"in e&&!a||e.schema===!1);r.assign(m,(0,Or._)`${p}${(0,XB.callValidateCode)(t,f,w,g)}`,e.modifying)}function k(p){var w;r.if((0,Or.not)((w=e.valid)!==null&&w!==void 0?w:m),p)}}Zi.funcKeywordCode=tZ;function g6(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,Or._)`${r.parentData}[${r.parentDataProperty}]`))}function nZ(t,e){const{gen:n}=t;n.if((0,Or._)`Array.isArray(${e})`,()=>{n.assign(kl.default.vErrors,(0,Or._)`${kl.default.vErrors} === null ? ${e} : ${kl.default.vErrors}.concat(${e})`).assign(kl.default.errors,(0,Or._)`${kl.default.vErrors}.length`),(0,JB.extendErrors)(t)},()=>t.error())}function rZ({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function tR(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Or.stringify)(n)})}function sZ(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Zi.validSchemaType=sZ;function iZ({schema:t,opts:e,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const c=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Zi.validateKeywordUsage=iZ;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.extendSubschemaMode=za.extendSubschemaData=za.getSubschema=void 0;const Hi=at,nR=Ee;function oZ(t,{keyword:e,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,Hi._)`${t.schemaPath}${(0,Hi.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,Hi._)`${t.schemaPath}${(0,Hi.getProperty)(e)}${(0,Hi.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,nR.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}za.getSubschema=oZ;function aZ(t,e,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(n!==void 0){const{errorPath:d,dataPathArr:f,opts:m}=e,y=a.let("data",(0,Hi._)`${e.data}${(0,Hi.getProperty)(n)}`,!0);c(y),t.errorPath=(0,Hi.str)`${d}${(0,nR.getErrorPath)(n,r,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Hi._)`${n}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){const d=s instanceof Hi.Name?s:a.let("data",s,!0);c(d),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}za.extendSubschemaData=aZ;function lZ(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(t.compositeRule=r),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=n}za.extendSubschemaMode=lZ;var ir={},$y=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},rR={exports:{}},Pa=rR.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};pg(e,r,s,t,"",t)};Pa.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Pa.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Pa.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Pa.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function pg(t,e,n,r,s,i,o,a,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,s,i,o,a,c,d);for(var f in r){var m=r[f];if(Array.isArray(m)){if(f in Pa.arrayKeywords)for(var y=0;y<m.length;y++)pg(t,e,n,m[y],s+"/"+f+"/"+y,i,s,f,r,y)}else if(f in Pa.propsKeywords){if(m&&typeof m=="object")for(var v in m)pg(t,e,n,m[v],s+"/"+f+"/"+uZ(v),i,s,f,r,v)}else(f in Pa.keywords||t.allKeys&&!(f in Pa.skipKeywords))&&pg(t,e,n,m,s+"/"+f,i,s,f,r)}n(r,s,i,o,a,c,d)}}function uZ(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var cZ=rR.exports;Object.defineProperty(ir,"__esModule",{value:!0});ir.getSchemaRefs=ir.resolveUrl=ir.normalizeId=ir._getFullPath=ir.getFullPath=ir.inlineRef=void 0;const dZ=Ee,fZ=$y,hZ=cZ,pZ=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function mZ(t,e=!0){return typeof t=="boolean"?!0:e===!0?!F2(t):e?sR(t)<=e:!1}ir.inlineRef=mZ;const gZ=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function F2(t){for(const e in t){if(gZ.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(F2)||typeof n=="object"&&F2(n))return!0}return!1}function sR(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!pZ.has(n)&&(typeof t[n]=="object"&&(0,dZ.eachItem)(t[n],r=>e+=sR(r)),e===1/0))return 1/0}return e}function iR(t,e="",n){n!==!1&&(e=$c(e));const r=t.parse(e);return oR(t,r)}ir.getFullPath=iR;function oR(t,e){return t.serialize(e).split("#")[0]+"#"}ir._getFullPath=oR;const yZ=/#\/?$/;function $c(t){return t?t.replace(yZ,""):""}ir.normalizeId=$c;function vZ(t,e,n){return n=$c(n),t.resolve(e,n)}ir.resolveUrl=vZ;const _Z=/^[a-z_][-a-z0-9._]*$/i;function wZ(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=$c(t[n]||e),i={"":s},o=iR(r,s,!1),a={},c=new Set;return hZ(t,{allKeys:!0},(m,y,v,_)=>{if(_===void 0)return;const E=o+y;let k=i[_];typeof m[n]=="string"&&(k=p.call(this,m[n])),w.call(this,m.$anchor),w.call(this,m.$dynamicAnchor),i[y]=k;function p(g){const C=this.opts.uriResolver.resolve;if(g=$c(k?C(k,g):g),c.has(g))throw f(g);c.add(g);let $=this.refs[g];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(m,$.schema,g):g!==$c(E)&&(g[0]==="#"?(d(m,a[g],g),a[g]=m):this.refs[g]=E),g}function w(g){if(typeof g=="string"){if(!_Z.test(g))throw new Error(`invalid anchor "${g}"`);p.call(this,`#${g}`)}}}),a;function d(m,y,v){if(y!==void 0&&!fZ(m,y))throw f(v)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}ir.getSchemaRefs=wZ;Object.defineProperty(bi,"__esModule",{value:!0});bi.getData=bi.KeywordCxt=bi.validateFunctionCode=void 0;const aR=nd,y6=Dn,fk=Po,v0=Dn,SZ=Py,Bf=Zi,P1=za,Ae=at,Ge=eo,kZ=ir,$o=Ee,af=ep;function bZ(t){if(cR(t)&&(dR(t),uR(t))){PZ(t);return}lR(t,()=>(0,aR.topBoolOrEmptySchema)(t))}bi.validateFunctionCode=bZ;function lR({gen:t,validateName:e,schema:n,schemaEnv:r,opts:s},i){s.code.es5?t.func(e,(0,Ae._)`${Ge.default.data}, ${Ge.default.valCxt}`,r.$async,()=>{t.code((0,Ae._)`"use strict"; ${v6(n,s)}`),CZ(t,s),t.code(i)}):t.func(e,(0,Ae._)`${Ge.default.data}, ${EZ(s)}`,r.$async,()=>t.code(v6(n,s)).code(i))}function EZ(t){return(0,Ae._)`{${Ge.default.instancePath}="", ${Ge.default.parentData}, ${Ge.default.parentDataProperty}, ${Ge.default.rootData}=${Ge.default.data}${t.dynamicRef?(0,Ae._)`, ${Ge.default.dynamicAnchors}={}`:Ae.nil}}={}`}function CZ(t,e){t.if(Ge.default.valCxt,()=>{t.var(Ge.default.instancePath,(0,Ae._)`${Ge.default.valCxt}.${Ge.default.instancePath}`),t.var(Ge.default.parentData,(0,Ae._)`${Ge.default.valCxt}.${Ge.default.parentData}`),t.var(Ge.default.parentDataProperty,(0,Ae._)`${Ge.default.valCxt}.${Ge.default.parentDataProperty}`),t.var(Ge.default.rootData,(0,Ae._)`${Ge.default.valCxt}.${Ge.default.rootData}`),e.dynamicRef&&t.var(Ge.default.dynamicAnchors,(0,Ae._)`${Ge.default.valCxt}.${Ge.default.dynamicAnchors}`)},()=>{t.var(Ge.default.instancePath,(0,Ae._)`""`),t.var(Ge.default.parentData,(0,Ae._)`undefined`),t.var(Ge.default.parentDataProperty,(0,Ae._)`undefined`),t.var(Ge.default.rootData,Ge.default.data),e.dynamicRef&&t.var(Ge.default.dynamicAnchors,(0,Ae._)`{}`)})}function PZ(t){const{schema:e,opts:n,gen:r}=t;lR(t,()=>{n.$comment&&e.$comment&&hR(t),RZ(t),r.let(Ge.default.vErrors,null),r.let(Ge.default.errors,0),n.unevaluated&&$Z(t),fR(t),AZ(t)})}function $Z(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,Ae._)`${n}.evaluated`),e.if((0,Ae._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Ae._)`${t.evaluated}.props`,(0,Ae._)`undefined`)),e.if((0,Ae._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Ae._)`${t.evaluated}.items`,(0,Ae._)`undefined`))}function v6(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,Ae._)`/*# sourceURL=${n} */`:Ae.nil}function TZ(t,e){if(cR(t)&&(dR(t),uR(t))){xZ(t,e);return}(0,aR.boolOrEmptySchema)(t,e)}function uR({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function cR(t){return typeof t.schema!="boolean"}function xZ(t,e){const{schema:n,gen:r,opts:s}=t;s.$comment&&n.$comment&&hR(t),OZ(t),IZ(t);const i=r.const("_errs",Ge.default.errors);fR(t,i),r.var(e,(0,Ae._)`${i} === ${Ge.default.errors}`)}function dR(t){(0,$o.checkUnknownRules)(t),NZ(t)}function fR(t,e){if(t.opts.jtd)return _6(t,[],!1,e);const n=(0,y6.getSchemaTypes)(t.schema),r=(0,y6.coerceAndCheckDataType)(t,n);_6(t,n,!r,e)}function NZ(t){const{schema:e,errSchemaPath:n,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,$o.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function RZ(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,$o.checkStrictMode)(t,"default is ignored in the schema root")}function OZ(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,kZ.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function IZ(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function hR({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)t.code((0,Ae._)`${Ge.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,Ae.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Ae._)`${Ge.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function AZ(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=t;n.$async?e.if((0,Ae._)`${Ge.default.errors} === 0`,()=>e.return(Ge.default.data),()=>e.throw((0,Ae._)`new ${s}(${Ge.default.vErrors})`)):(e.assign((0,Ae._)`${r}.errors`,Ge.default.vErrors),i.unevaluated&&MZ(t),e.return((0,Ae._)`${Ge.default.errors} === 0`))}function MZ({gen:t,evaluated:e,props:n,items:r}){n instanceof Ae.Name&&t.assign((0,Ae._)`${e}.props`,n),r instanceof Ae.Name&&t.assign((0,Ae._)`${e}.items`,r)}function _6(t,e,n,r){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:d}=t,{RULES:f}=d;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,$o.schemaHasRulesButRef)(i,f))){s.block(()=>gR(t,"$ref",f.all.$ref.definition));return}c.jtd||jZ(t,e),s.block(()=>{for(const y of f.rules)m(y);m(f.post)});function m(y){(0,fk.shouldUseGroup)(i,y)&&(y.type?(s.if((0,v0.checkDataType)(y.type,o,c.strictNumbers)),w6(t,y),e.length===1&&e[0]===y.type&&n&&(s.else(),(0,v0.reportTypeError)(t)),s.endIf()):w6(t,y),a||s.if((0,Ae._)`${Ge.default.errors} === ${r||0}`))}}function w6(t,e){const{gen:n,schema:r,opts:{useDefaults:s}}=t;s&&(0,SZ.assignDefaults)(t,e.type),n.block(()=>{for(const i of e.rules)(0,fk.shouldUseRule)(r,i)&&gR(t,i.keyword,i.definition,e.type)})}function jZ(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(zZ(t,e),t.opts.allowUnionTypes||DZ(t,e),FZ(t,t.dataTypes))}function zZ(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{pR(t.dataTypes,n)||hk(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),UZ(t,e)}}function DZ(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&hk(t,"use allowUnionTypes to allow union type keyword")}function FZ(t,e){const n=t.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,fk.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>LZ(e,o))&&hk(t,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function LZ(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function pR(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function UZ(t,e){const n=[];for(const r of t.dataTypes)pR(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function hk(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,$o.checkStrictMode)(t,e,t.opts.strictTypes)}let mR=class{constructor(e,n,r){if((0,Bf.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,$o.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",yR(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Bf.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ge.default.errors))}result(e,n,r){this.failResult((0,Ae.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,Ae.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,Ae._)`${n} !== undefined && (${(0,Ae.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?af.reportExtraError:af.reportError)(this,this.def.error,n)}$dataError(){(0,af.reportError)(this,this.def.$dataError||af.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,af.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=Ae.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=Ae.nil,n=Ae.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:o}=this;r.if((0,Ae.or)((0,Ae._)`${s} === undefined`,n)),e!==Ae.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==Ae.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,Ae.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ae.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,Ae._)`${(0,v0.checkDataTypes)(c,n,i.opts.strictNumbers,v0.DataType.Wrong)}`}return Ae.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Ae._)`!${c}(${n})`}return Ae.nil}}subschema(e,n){const r=(0,P1.getSubschema)(this.it,e);(0,P1.extendSubschemaData)(r,this.it,e),(0,P1.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return TZ(s,n),s}mergeEvaluated(e,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=$o.mergeEvaluated.props(s,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=$o.mergeEvaluated.items(s,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(e,Ae.Name)),!0}};bi.KeywordCxt=mR;function gR(t,e,n,r){const s=new mR(t,n,e);"code"in n?n.code(s,r):s.$data&&n.validate?(0,Bf.funcKeywordCode)(s,n):"macro"in n?(0,Bf.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,Bf.funcKeywordCode)(s,n)}const VZ=/^\/(?:[^~]|~0|~1)*$/,GZ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function yR(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let s,i;if(t==="")return Ge.default.rootData;if(t[0]==="/"){if(!VZ.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ge.default.rootData}else{const d=GZ.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);const f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(c("property/index",f));return r[e-f]}if(f>e)throw new Error(c("data",f));if(i=n[e-f],!s)return i}let o=i;const a=s.split("/");for(const d of a)d&&(i=(0,Ae._)`${i}${(0,Ae.getProperty)((0,$o.unescapeJsonPointer)(d))}`,o=(0,Ae._)`${o} && ${i}`);return o;function c(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}bi.getData=yR;var tp={};Object.defineProperty(tp,"__esModule",{value:!0});let HZ=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};tp.default=HZ;var yd={};Object.defineProperty(yd,"__esModule",{value:!0});const $1=ir;let qZ=class extends Error{constructor(e,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,$1.resolveUrl)(e,n,r),this.missingSchema=(0,$1.normalizeId)((0,$1.getFullPath)(e,this.missingRef))}};yd.default=qZ;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveSchema=Jr.getCompilingSchema=Jr.resolveRef=Jr.compileSchema=Jr.SchemaEnv=void 0;const ii=at,BZ=tp,pl=eo,_i=ir,S6=Ee,ZZ=bi;let Ty=class{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,_i.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}};Jr.SchemaEnv=Ty;function pk(t){const e=vR.call(this,t);if(e)return e;const n=(0,_i.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ii.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:BZ.default,code:(0,ii._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const d={gen:o,allErrors:this.opts.allErrors,data:pl.default.data,parentData:pl.default.parentData,parentDataProperty:pl.default.parentDataProperty,dataNames:[pl.default.data],dataPathArr:[ii.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ii.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:ii.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ii._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(t),(0,ZZ.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);const m=o.toString();f=`${o.scopeRefs(pl.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));const v=new Function(`${pl.default.self}`,`${pl.default.scope}`,f)(this,this.scope.get());if(this.scope.value(c,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:c,validateCode:m,scopeValues:o._values}),this.opts.unevaluated){const{props:_,items:E}=d;v.evaluated={props:_ instanceof ii.Name?void 0:_,items:E instanceof ii.Name?void 0:E,dynamicProps:_ instanceof ii.Name,dynamicItems:E instanceof ii.Name},v.source&&(v.source.evaluated=(0,ii.stringify)(v.evaluated))}return t.validate=v,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}Jr.compileSchema=pk;function WZ(t,e,n){var r;n=(0,_i.resolveUrl)(this.opts.uriResolver,e,n);const s=t.refs[n];if(s)return s;let i=YZ.call(this,t,n);if(i===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new Ty({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[n]=KZ.call(this,i)}Jr.resolveRef=WZ;function KZ(t){return(0,_i.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:pk.call(this,t)}function vR(t){for(const e of this._compilations)if(QZ(e,t))return e}Jr.getCompilingSchema=vR;function QZ(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function YZ(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||xy.call(this,t,e)}function xy(t,e){const n=this.opts.uriResolver.parse(e),r=(0,_i._getFullPath)(this.opts.uriResolver,n);let s=(0,_i.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===s)return T1.call(this,n,t);const i=(0,_i.normalizeId)(r),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=xy.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:T1.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||pk.call(this,o),i===(0,_i.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,d=a[c];return d&&(s=(0,_i.resolveUrl)(this.opts.uriResolver,s,d)),new Ty({schema:a,schemaId:c,root:t,baseId:s})}return T1.call(this,n,o)}}Jr.resolveSchema=xy;const XZ=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function T1(t,{baseId:e,schema:n,root:r}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,S6.unescapeFragment)(a)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!XZ.has(a)&&d&&(e=(0,_i.resolveUrl)(this.opts.uriResolver,e,d))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,S6.schemaHasRulesButRef)(n,this.RULES)){const a=(0,_i.resolveUrl)(this.opts.uriResolver,e,n.$ref);i=xy.call(this,r,a)}const{schemaId:o}=this.opts;if(i=i||new Ty({schema:n,schemaId:o,root:r,baseId:e}),i.schema!==i.root.schema)return i}const JZ="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",eW="Meta-schema for $data reference (JSON AnySchema extension proposal)",tW="object",nW=["$data"],rW={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},sW=!1,iW={$id:JZ,description:eW,type:tW,required:nW,properties:rW,additionalProperties:sW};var mk={},Ny={exports:{}};const oW=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),_R=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function wR(t){let e="",n=0,r=0;for(r=0;r<t.length;r++)if(n=t[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r];break}for(r+=1;r<t.length;r++){if(n=t[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r]}return e}const aW=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function k6(t){return t.length=0,!0}function lW(t,e,n){if(t.length){const r=wR(t);if(r!=="")e.push(r);else return n.error=!0,!1;t.length=0}return!0}function uW(t){let e=0;const n={error:!1,address:"",zone:""},r=[],s=[];let i=!1,o=!1,a=lW;for(let c=0;c<t.length;c++){const d=t[c];if(!(d==="["||d==="]"))if(d===":"){if(i===!0&&(o=!0),!a(s,r,n))break;if(++e>7){n.error=!0;break}c>0&&t[c-1]===":"&&(i=!0),r.push(":");continue}else if(d==="%"){if(!a(s,r,n))break;a=k6}else{s.push(d);continue}}return s.length&&(a===k6?n.zone=s.join(""):o?r.push(s.join("")):r.push(wR(s))),n.address=r.join(""),n}function SR(t){if(cW(t,":")<2)return{host:t,isIPV6:!1};const e=uW(t);if(e.error)return{host:t,isIPV6:!1};{let n=e.address,r=e.address;return e.zone&&(n+="%"+e.zone,r+="%25"+e.zone),{host:n,isIPV6:!0,escapedHost:r}}}function cW(t,e){let n=0;for(let r=0;r<t.length;r++)t[r]===e&&n++;return n}function dW(t){let e=t;const n=[];let r=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){n.push("/");break}else{n.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){n.push("/");break}}else if(s===3&&e==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),n.length!==0&&n.pop();continue}}if((r=e.indexOf("/",1))===-1){n.push(e);break}else n.push(e.slice(0,r)),e=e.slice(r)}return n.join("")}function fW(t,e){const n=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=n(t.scheme)),t.userinfo!==void 0&&(t.userinfo=n(t.userinfo)),t.host!==void 0&&(t.host=n(t.host)),t.path!==void 0&&(t.path=n(t.path)),t.query!==void 0&&(t.query=n(t.query)),t.fragment!==void 0&&(t.fragment=n(t.fragment)),t}function hW(t){const e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let n=unescape(t.host);if(!_R(n)){const r=SR(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=t.host}e.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}var kR={nonSimpleDomain:aW,recomposeAuthority:hW,normalizeComponentEncoding:fW,removeDotSegments:dW,isIPv4:_R,isUUID:oW,normalizeIPv6:SR};const{isUUID:pW}=kR,mW=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function bR(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function ER(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function CR(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function gW(t){return t.secure=bR(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function yW(t){if((t.port===(bR(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,n]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=n,t.resourceName=void 0}return t.fragment=void 0,t}function vW(t,e){if(!t.path)return t.error="URN can not be parsed",t;const n=t.path.match(mW);if(n){const r=e.scheme||t.scheme||"urn";t.nid=n[1].toLowerCase(),t.nss=n[2];const s=`${r}:${e.nid||t.nid}`,i=gk(s);t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function _W(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=e.scheme||t.scheme||"urn",r=t.nid.toLowerCase(),s=`${n}:${e.nid||r}`,i=gk(s);i&&(t=i.serialize(t,e));const o=t,a=t.nss;return o.path=`${r||e.nid}:${a}`,e.skipEscape=!0,o}function wW(t,e){const n=t;return n.uuid=n.nss,n.nss=void 0,!e.tolerant&&(!n.uuid||!pW(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function SW(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const PR={scheme:"http",domainHost:!0,parse:ER,serialize:CR},kW={scheme:"https",domainHost:PR.domainHost,parse:ER,serialize:CR},mg={scheme:"ws",domainHost:!0,parse:gW,serialize:yW},bW={scheme:"wss",domainHost:mg.domainHost,parse:mg.parse,serialize:mg.serialize},EW={scheme:"urn",parse:vW,serialize:_W,skipNormalize:!0},CW={scheme:"urn:uuid",parse:wW,serialize:SW,skipNormalize:!0},_0={http:PR,https:kW,ws:mg,wss:bW,urn:EW,"urn:uuid":CW};Object.setPrototypeOf(_0,null);function gk(t){return t&&(_0[t]||_0[t.toLowerCase()])||void 0}var PW={SCHEMES:_0,getSchemeHandler:gk};const{normalizeIPv6:$W,removeDotSegments:Pf,recomposeAuthority:TW,normalizeComponentEncoding:Om,isIPv4:xW,nonSimpleDomain:NW}=kR,{SCHEMES:RW,getSchemeHandler:$R}=PW;function OW(t,e){return typeof t=="string"?t=Wi(Do(t,e),e):typeof t=="object"&&(t=Do(Wi(t,e),e)),t}function IW(t,e,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=TR(Do(t,r),Do(e,r),r,!0);return r.skipEscape=!0,Wi(s,r)}function TR(t,e,n,r){const s={};return r||(t=Do(Wi(t,n),n),e=Do(Wi(e,n),n)),n=n||{},!n.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Pf(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=Pf(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=Pf(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=Pf(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function AW(t,e,n){return typeof t=="string"?(t=unescape(t),t=Wi(Om(Do(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Wi(Om(t,!0),{...n,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Wi(Om(Do(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Wi(Om(e,!0),{...n,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Wi(t,e){const n={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},r=Object.assign({},e),s=[],i=$R(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&s.push(n.scheme,":");const o=TW(n);if(o!==void 0&&(r.reference!=="suffix"&&s.push("//"),s.push(o),n.path&&n.path[0]!=="/"&&s.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!i||!i.absolutePath)&&(a=Pf(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return n.query!==void 0&&s.push("?",n.query),n.fragment!==void 0&&s.push("#",n.fragment),s.join("")}const MW=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Do(t,e){const n=Object.assign({},e),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;n.reference==="suffix"&&(n.scheme?t=n.scheme+":"+t:t="//"+t);const i=t.match(MW);if(i){if(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5]),r.host)if(xW(r.host)===!1){const c=$W(r.host);r.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const o=$R(n.scheme||r.scheme);if(!n.unicodeSupport&&(!o||!o.unicodeSupport)&&r.host&&(n.domainHost||o&&o.domainHost)&&s===!1&&NW(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),o&&o.parse&&o.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const yk={SCHEMES:RW,normalize:OW,resolve:IW,resolveComponent:TR,equal:AW,serialize:Wi,parse:Do};Ny.exports=yk;Ny.exports.default=yk;Ny.exports.fastUri=yk;var xR=Ny.exports;Object.defineProperty(mk,"__esModule",{value:!0});const NR=xR;NR.code='require("ajv/dist/runtime/uri").default';mk.default=NR;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=bi;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=at;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=tp,s=yd,i=ru,o=Jr,a=at,c=ir,d=Dn,f=Ee,m=iW,y=mk,v=(L,I)=>new RegExp(L,I);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function g(L){var I,U,z,b,T,M,O,F,Z,le,ce,W,X,dt,Fe,Re,Je,gt,vn,Vt,$t,Nn,Pn,fn,as;const Rn=L.strict,Ks=(I=L.code)===null||I===void 0?void 0:I.optimize,fr=Ks===!0||Ks===void 0?1:Ks||0,nl=(z=(U=L.code)===null||U===void 0?void 0:U.regExp)!==null&&z!==void 0?z:v,Nd=(b=L.uriResolver)!==null&&b!==void 0?b:y.default;return{strictSchema:(M=(T=L.strictSchema)!==null&&T!==void 0?T:Rn)!==null&&M!==void 0?M:!0,strictNumbers:(F=(O=L.strictNumbers)!==null&&O!==void 0?O:Rn)!==null&&F!==void 0?F:!0,strictTypes:(le=(Z=L.strictTypes)!==null&&Z!==void 0?Z:Rn)!==null&&le!==void 0?le:"log",strictTuples:(W=(ce=L.strictTuples)!==null&&ce!==void 0?ce:Rn)!==null&&W!==void 0?W:"log",strictRequired:(dt=(X=L.strictRequired)!==null&&X!==void 0?X:Rn)!==null&&dt!==void 0?dt:!1,code:L.code?{...L.code,optimize:fr,regExp:nl}:{optimize:fr,regExp:nl},loopRequired:(Fe=L.loopRequired)!==null&&Fe!==void 0?Fe:w,loopEnum:(Re=L.loopEnum)!==null&&Re!==void 0?Re:w,meta:(Je=L.meta)!==null&&Je!==void 0?Je:!0,messages:(gt=L.messages)!==null&&gt!==void 0?gt:!0,inlineRefs:(vn=L.inlineRefs)!==null&&vn!==void 0?vn:!0,schemaId:(Vt=L.schemaId)!==null&&Vt!==void 0?Vt:"$id",addUsedSchema:($t=L.addUsedSchema)!==null&&$t!==void 0?$t:!0,validateSchema:(Nn=L.validateSchema)!==null&&Nn!==void 0?Nn:!0,validateFormats:(Pn=L.validateFormats)!==null&&Pn!==void 0?Pn:!0,unicodeRegExp:(fn=L.unicodeRegExp)!==null&&fn!==void 0?fn:!0,int32range:(as=L.int32range)!==null&&as!==void 0?as:!0,uriResolver:Nd}}class C{constructor(I={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,I=this.opts={...I,...g(I)};const{es5:U,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:U,lines:z}),this.logger=Q(I.logger);const b=I.validateFormats;I.validateFormats=!1,this.RULES=(0,i.getRules)(),$.call(this,k,I,"NOT SUPPORTED"),$.call(this,p,I,"DEPRECATED","warn"),this._metaOpts=V.call(this),I.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),I.keywords&&G.call(this,I.keywords),typeof I.meta=="object"&&this.addMetaSchema(I.meta),j.call(this),I.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:I,meta:U,schemaId:z}=this.opts;let b=m;z==="id"&&(b={...m},b.id=b.$id,delete b.$id),U&&I&&this.addMetaSchema(b,b[z],!1)}defaultMeta(){const{meta:I,schemaId:U}=this.opts;return this.opts.defaultMeta=typeof I=="object"?I[U]||I:void 0}validate(I,U){let z;if(typeof I=="string"){if(z=this.getSchema(I),!z)throw new Error(`no schema with key or ref "${I}"`)}else z=this.compile(I);const b=z(U);return"$async"in z||(this.errors=z.errors),b}compile(I,U){const z=this._addSchema(I,U);return z.validate||this._compileSchemaEnv(z)}compileAsync(I,U){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return b.call(this,I,U);async function b(le,ce){await T.call(this,le.$schema);const W=this._addSchema(le,ce);return W.validate||M.call(this,W)}async function T(le){le&&!this.getSchema(le)&&await b.call(this,{$ref:le},!0)}async function M(le){try{return this._compileSchemaEnv(le)}catch(ce){if(!(ce instanceof s.default))throw ce;return O.call(this,ce),await F.call(this,ce.missingSchema),M.call(this,le)}}function O({missingSchema:le,missingRef:ce}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ce} cannot be resolved`)}async function F(le){const ce=await Z.call(this,le);this.refs[le]||await T.call(this,ce.$schema),this.refs[le]||this.addSchema(ce,le,U)}async function Z(le){const ce=this._loading[le];if(ce)return ce;try{return await(this._loading[le]=z(le))}finally{delete this._loading[le]}}}addSchema(I,U,z,b=this.opts.validateSchema){if(Array.isArray(I)){for(const M of I)this.addSchema(M,void 0,z,b);return this}let T;if(typeof I=="object"){const{schemaId:M}=this.opts;if(T=I[M],T!==void 0&&typeof T!="string")throw new Error(`schema ${M} must be string`)}return U=(0,c.normalizeId)(U||T),this._checkUnique(U),this.schemas[U]=this._addSchema(I,z,U,b,!0),this}addMetaSchema(I,U,z=this.opts.validateSchema){return this.addSchema(I,U,!0,z),this}validateSchema(I,U){if(typeof I=="boolean")return!0;let z;if(z=I.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(z,I);if(!b&&U){const T="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(T);else throw new Error(T)}return b}getSchema(I){let U;for(;typeof(U=N.call(this,I))=="string";)I=U;if(U===void 0){const{schemaId:z}=this.opts,b=new o.SchemaEnv({schema:{},schemaId:z});if(U=o.resolveSchema.call(this,b,I),!U)return;this.refs[I]=U}return U.validate||this._compileSchemaEnv(U)}removeSchema(I){if(I instanceof RegExp)return this._removeAllSchemas(this.schemas,I),this._removeAllSchemas(this.refs,I),this;switch(typeof I){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const U=N.call(this,I);return typeof U=="object"&&this._cache.delete(U.schema),delete this.schemas[I],delete this.refs[I],this}case"object":{const U=I;this._cache.delete(U);let z=I[this.opts.schemaId];return z&&(z=(0,c.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(I){for(const U of I)this.addKeyword(U);return this}addKeyword(I,U){let z;if(typeof I=="string")z=I,typeof U=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),U.keyword=z);else if(typeof I=="object"&&U===void 0){if(U=I,z=U.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(se.call(this,z,U),!U)return(0,f.eachItem)(z,T=>ae.call(this,T)),this;Pe.call(this,U);const b={...U,type:(0,d.getJSONTypes)(U.type),schemaType:(0,d.getJSONTypes)(U.schemaType)};return(0,f.eachItem)(z,b.type.length===0?T=>ae.call(this,T,b):T=>b.type.forEach(M=>ae.call(this,T,b,M))),this}getKeyword(I){const U=this.RULES.all[I];return typeof U=="object"?U.definition:!!U}removeKeyword(I){const{RULES:U}=this;delete U.keywords[I],delete U.all[I];for(const z of U.rules){const b=z.rules.findIndex(T=>T.keyword===I);b>=0&&z.rules.splice(b,1)}return this}addFormat(I,U){return typeof U=="string"&&(U=new RegExp(U)),this.formats[I]=U,this}errorsText(I=this.errors,{separator:U=", ",dataVar:z="data"}={}){return!I||I.length===0?"No errors":I.map(b=>`${z}${b.instancePath} ${b.message}`).reduce((b,T)=>b+U+T)}$dataMetaSchema(I,U){const z=this.RULES.all;I=JSON.parse(JSON.stringify(I));for(const b of U){const T=b.split("/").slice(1);let M=I;for(const O of T)M=M[O];for(const O in z){const F=z[O];if(typeof F!="object")continue;const{$data:Z}=F.definition,le=M[O];Z&&le&&(M[O]=ue(le))}}return I}_removeAllSchemas(I,U){for(const z in I){const b=I[z];(!U||U.test(z))&&(typeof b=="string"?delete I[z]:b&&!b.meta&&(this._cache.delete(b.schema),delete I[z]))}}_addSchema(I,U,z,b=this.opts.validateSchema,T=this.opts.addUsedSchema){let M;const{schemaId:O}=this.opts;if(typeof I=="object")M=I[O];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof I!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(I);if(F!==void 0)return F;z=(0,c.normalizeId)(M||z);const Z=c.getSchemaRefs.call(this,I,z);return F=new o.SchemaEnv({schema:I,schemaId:O,meta:U,baseId:z,localRefs:Z}),this._cache.set(F.schema,F),T&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=F),b&&this.validateSchema(I,!0),F}_checkUnique(I){if(this.schemas[I]||this.refs[I])throw new Error(`schema with key or id "${I}" already exists`)}_compileSchemaEnv(I){if(I.meta?this._compileMetaSchema(I):o.compileSchema.call(this,I),!I.validate)throw new Error("ajv implementation error");return I.validate}_compileMetaSchema(I){const U=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,I)}finally{this.opts=U}}}C.ValidationError=r.default,C.MissingRefError=s.default,t.default=C;function $(L,I,U,z="error"){for(const b in L){const T=b;T in I&&this.logger[z](`${U}: option ${b}. ${L[T]}`)}}function N(L){return L=(0,c.normalizeId)(L),this.schemas[L]||this.refs[L]}function j(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const I in L)this.addSchema(L[I],I)}function A(){for(const L in this.opts.formats){const I=this.opts.formats[L];I&&this.addFormat(L,I)}}function G(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const I in L){const U=L[I];U.keyword||(U.keyword=I),this.addKeyword(U)}}function V(){const L={...this.opts};for(const I of _)delete L[I];return L}const H={log(){},warn(){},error(){}};function Q(L){if(L===!1)return H;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const ie=/^[a-z_$][a-z0-9_$:-]*$/i;function se(L,I){const{RULES:U}=this;if((0,f.eachItem)(L,z=>{if(U.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!ie.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function ae(L,I,U){var z;const b=I==null?void 0:I.post;if(U&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:T}=this;let M=b?T.post:T.rules.find(({type:F})=>F===U);if(M||(M={type:U,rules:[]},T.rules.push(M)),T.keywords[L]=!0,!I)return;const O={keyword:L,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ye.call(this,M,O,I.before):M.rules.push(O),T.all[L]=O,(z=I.implements)===null||z===void 0||z.forEach(F=>this.addKeyword(F))}function ye(L,I,U){const z=L.rules.findIndex(b=>b.keyword===U);z>=0?L.rules.splice(z,0,I):(L.rules.push(I),this.logger.warn(`rule ${U} is not defined`))}function Pe(L){let{metaSchema:I}=L;I!==void 0&&(L.$data&&this.opts.$data&&(I=ue(I)),L.validateSchema=this.compile(I,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(L){return{anyOf:[L,ee]}}})(UN);var vk={},_k={},wk={};Object.defineProperty(wk,"__esModule",{value:!0});const jW={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wk.default=jW;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.callRef=su.getValidate=void 0;const zW=yd,b6=it,Kr=at,Fu=eo,E6=Jr,Im=Ee,DW={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:d}=i;if((n==="#"||n==="#/")&&s===d.baseId)return m();const f=E6.resolveRef.call(c,d,s,n);if(f===void 0)throw new zW.default(r.opts.uriResolver,s,n);if(f instanceof E6.SchemaEnv)return y(f);return v(f);function m(){if(i===d)return gg(t,o,i,i.$async);const _=e.scopeValue("root",{ref:d});return gg(t,(0,Kr._)`${_}.validate`,d,d.$async)}function y(_){const E=RR(t,_);gg(t,E,_,_.$async)}function v(_){const E=e.scopeValue("schema",a.code.source===!0?{ref:_,code:(0,Kr.stringify)(_)}:{ref:_}),k=e.name("valid"),p=t.subschema({schema:_,dataTypes:[],schemaPath:Kr.nil,topSchemaRef:E,errSchemaPath:n},k);t.mergeEvaluated(p),t.ok(k)}}};function RR(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Kr._)`${n.scopeValue("wrapper",{ref:e})}.validate`}su.getValidate=RR;function gg(t,e,n,r){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,d=c.passContext?Fu.default.this:Kr.nil;r?f():m();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");const _=s.let("valid");s.try(()=>{s.code((0,Kr._)`await ${(0,b6.callValidateCode)(t,e,d)}`),v(e),o||s.assign(_,!0)},E=>{s.if((0,Kr._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),y(E),o||s.assign(_,!1)}),t.ok(_)}function m(){t.result((0,b6.callValidateCode)(t,e,d),()=>v(e),()=>y(e))}function y(_){const E=(0,Kr._)`${_}.errors`;s.assign(Fu.default.vErrors,(0,Kr._)`${Fu.default.vErrors} === null ? ${E} : ${Fu.default.vErrors}.concat(${E})`),s.assign(Fu.default.errors,(0,Kr._)`${Fu.default.vErrors}.length`)}function v(_){var E;if(!i.opts.unevaluated)return;const k=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(i.props=Im.mergeEvaluated.props(s,k.props,i.props));else{const p=s.var("props",(0,Kr._)`${_}.evaluated.props`);i.props=Im.mergeEvaluated.props(s,p,i.props,Kr.Name)}if(i.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(i.items=Im.mergeEvaluated.items(s,k.items,i.items));else{const p=s.var("items",(0,Kr._)`${_}.evaluated.items`);i.items=Im.mergeEvaluated.items(s,p,i.items,Kr.Name)}}}su.callRef=gg;su.default=DW;Object.defineProperty(_k,"__esModule",{value:!0});const FW=wk,LW=su,UW=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",FW.default,LW.default];_k.default=UW;var Sk={},kk={};Object.defineProperty(kk,"__esModule",{value:!0});const w0=at,na=w0.operators,S0={maximum:{okStr:"<=",ok:na.LTE,fail:na.GT},minimum:{okStr:">=",ok:na.GTE,fail:na.LT},exclusiveMaximum:{okStr:"<",ok:na.LT,fail:na.GTE},exclusiveMinimum:{okStr:">",ok:na.GT,fail:na.LTE}},VW={message:({keyword:t,schemaCode:e})=>(0,w0.str)`must be ${S0[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,w0._)`{comparison: ${S0[t].okStr}, limit: ${e}}`},GW={keyword:Object.keys(S0),type:"number",schemaType:"number",$data:!0,error:VW,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,w0._)`${n} ${S0[e].fail} ${r} || isNaN(${n})`)}};kk.default=GW;var bk={};Object.defineProperty(bk,"__esModule",{value:!0});const Zf=at,HW={message:({schemaCode:t})=>(0,Zf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Zf._)`{multipleOf: ${t}}`},qW={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:HW,code(t){const{gen:e,data:n,schemaCode:r,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Zf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Zf._)`${o} !== parseInt(${o})`;t.fail$data((0,Zf._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};bk.default=qW;var Ek={},Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});function OR(t){const e=t.length;let n=0,r=0,s;for(;r<e;)n++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<e&&(s=t.charCodeAt(r),(s&64512)===56320&&r++);return n}Ck.default=OR;OR.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ek,"__esModule",{value:!0});const bl=at,BW=Ee,ZW=Ck,WW={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,bl.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,bl._)`{limit: ${t}}`},KW={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:WW,code(t){const{keyword:e,data:n,schemaCode:r,it:s}=t,i=e==="maxLength"?bl.operators.GT:bl.operators.LT,o=s.opts.unicode===!1?(0,bl._)`${n}.length`:(0,bl._)`${(0,BW.useFunc)(t.gen,ZW.default)}(${n})`;t.fail$data((0,bl._)`${o} ${i} ${r}`)}};Ek.default=KW;var Pk={};Object.defineProperty(Pk,"__esModule",{value:!0});const QW=it,k0=at,YW={message:({schemaCode:t})=>(0,k0.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,k0._)`{pattern: ${t}}`},XW={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:YW,code(t){const{data:e,$data:n,schema:r,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=n?(0,k0._)`(new RegExp(${s}, ${o}))`:(0,QW.usePattern)(t,r);t.fail$data((0,k0._)`!${a}.test(${e})`)}};Pk.default=XW;var $k={};Object.defineProperty($k,"__esModule",{value:!0});const Wf=at,JW={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,Wf.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,Wf._)`{limit: ${t}}`},eK={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:JW,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxProperties"?Wf.operators.GT:Wf.operators.LT;t.fail$data((0,Wf._)`Object.keys(${n}).length ${s} ${r}`)}};$k.default=eK;var Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});const lf=it,Kf=at,tK=Ee,nK={message:({params:{missingProperty:t}})=>(0,Kf.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Kf._)`{missingProperty: ${t}}`},rK={keyword:"required",type:"object",schemaType:"array",$data:!0,error:nK,code(t){const{gen:e,schema:n,schemaCode:r,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&n.length===0)return;const c=n.length>=a.loopRequired;if(o.allErrors?d():f(),a.strictRequired){const v=t.parentSchema.properties,{definedProperties:_}=t.it;for(const E of n)if((v==null?void 0:v[E])===void 0&&!_.has(E)){const k=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${E}" is not defined at "${k}" (strictRequired)`;(0,tK.checkStrictMode)(o,p,o.opts.strictRequired)}}function d(){if(c||i)t.block$data(Kf.nil,m);else for(const v of n)(0,lf.checkReportMissingProp)(t,v)}function f(){const v=e.let("missing");if(c||i){const _=e.let("valid",!0);t.block$data(_,()=>y(v,_)),t.ok(_)}else e.if((0,lf.checkMissingProp)(t,n,v)),(0,lf.reportMissingProp)(t,v),e.else()}function m(){e.forOf("prop",r,v=>{t.setParams({missingProperty:v}),e.if((0,lf.noPropertyInData)(e,s,v,a.ownProperties),()=>t.error())})}function y(v,_){t.setParams({missingProperty:v}),e.forOf(v,r,()=>{e.assign(_,(0,lf.propertyInData)(e,s,v,a.ownProperties)),e.if((0,Kf.not)(_),()=>{t.error(),e.break()})},Kf.nil)}}};Tk.default=rK;var xk={};Object.defineProperty(xk,"__esModule",{value:!0});const Qf=at,sK={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,Qf.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,Qf._)`{limit: ${t}}`},iK={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:sK,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxItems"?Qf.operators.GT:Qf.operators.LT;t.fail$data((0,Qf._)`${n}.length ${s} ${r}`)}};xk.default=iK;var Nk={},np={};Object.defineProperty(np,"__esModule",{value:!0});const IR=$y;IR.code='require("ajv/dist/runtime/equal").default';np.default=IR;Object.defineProperty(Nk,"__esModule",{value:!0});const x1=Dn,tr=at,oK=Ee,aK=np,lK={message:({params:{i:t,j:e}})=>(0,tr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,tr._)`{i: ${t}, j: ${e}}`},uK={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lK,code(t){const{gen:e,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!r&&!s)return;const c=e.let("valid"),d=i.items?(0,x1.getSchemaTypes)(i.items):[];t.block$data(c,f,(0,tr._)`${o} === false`),t.ok(c);function f(){const _=e.let("i",(0,tr._)`${n}.length`),E=e.let("j");t.setParams({i:_,j:E}),e.assign(c,!0),e.if((0,tr._)`${_} > 1`,()=>(m()?y:v)(_,E))}function m(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function y(_,E){const k=e.name("item"),p=(0,x1.checkDataTypes)(d,k,a.opts.strictNumbers,x1.DataType.Wrong),w=e.const("indices",(0,tr._)`{}`);e.for((0,tr._)`;${_}--;`,()=>{e.let(k,(0,tr._)`${n}[${_}]`),e.if(p,(0,tr._)`continue`),d.length>1&&e.if((0,tr._)`typeof ${k} == "string"`,(0,tr._)`${k} += "_"`),e.if((0,tr._)`typeof ${w}[${k}] == "number"`,()=>{e.assign(E,(0,tr._)`${w}[${k}]`),t.error(),e.assign(c,!1).break()}).code((0,tr._)`${w}[${k}] = ${_}`)})}function v(_,E){const k=(0,oK.useFunc)(e,aK.default),p=e.name("outer");e.label(p).for((0,tr._)`;${_}--;`,()=>e.for((0,tr._)`${E} = ${_}; ${E}--;`,()=>e.if((0,tr._)`${k}(${n}[${_}], ${n}[${E}])`,()=>{t.error(),e.assign(c,!1).break(p)})))}}};Nk.default=uK;var Rk={};Object.defineProperty(Rk,"__esModule",{value:!0});const L2=at,cK=Ee,dK=np,fK={message:"must be equal to constant",params:({schemaCode:t})=>(0,L2._)`{allowedValue: ${t}}`},hK={keyword:"const",$data:!0,error:fK,code(t){const{gen:e,data:n,$data:r,schemaCode:s,schema:i}=t;r||i&&typeof i=="object"?t.fail$data((0,L2._)`!${(0,cK.useFunc)(e,dK.default)}(${n}, ${s})`):t.fail((0,L2._)`${i} !== ${n}`)}};Rk.default=hK;var Ok={};Object.defineProperty(Ok,"__esModule",{value:!0});const $f=at,pK=Ee,mK=np,gK={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,$f._)`{allowedValues: ${t}}`},yK={keyword:"enum",schemaType:"array",$data:!0,error:gK,code(t){const{gen:e,data:n,$data:r,schema:s,schemaCode:i,it:o}=t;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const d=()=>c??(c=(0,pK.useFunc)(e,mK.default));let f;if(a||r)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const v=e.const("vSchema",i);f=(0,$f.or)(...s.map((_,E)=>y(v,E)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",i,v=>e.if((0,$f._)`${d()}(${n}, ${v})`,()=>e.assign(f,!0).break()))}function y(v,_){const E=s[_];return typeof E=="object"&&E!==null?(0,$f._)`${d()}(${n}, ${v}[${_}])`:(0,$f._)`${n} === ${E}`}}};Ok.default=yK;Object.defineProperty(Sk,"__esModule",{value:!0});const vK=kk,_K=bk,wK=Ek,SK=Pk,kK=$k,bK=Tk,EK=xk,CK=Nk,PK=Rk,$K=Ok,TK=[vK.default,_K.default,wK.default,SK.default,kK.default,bK.default,EK.default,CK.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},PK.default,$K.default];Sk.default=TK;var Ik={},vd={};Object.defineProperty(vd,"__esModule",{value:!0});vd.validateAdditionalItems=void 0;const El=at,U2=Ee,xK={message:({params:{len:t}})=>(0,El.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,El._)`{limit: ${t}}`},NK={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:xK,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,U2.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}AR(t,r)}};function AR(t,e){const{gen:n,schema:r,data:s,keyword:i,it:o}=t;o.items=!0;const a=n.const("len",(0,El._)`${s}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,El._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,U2.alwaysValidSchema)(o,r)){const d=n.var("valid",(0,El._)`${a} <= ${e.length}`);n.if((0,El.not)(d),()=>c(d)),t.ok(d)}function c(d){n.forRange("i",e.length,a,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:U2.Type.Num},d),o.allErrors||n.if((0,El.not)(d),()=>n.break())})}}vd.validateAdditionalItems=AR;vd.default=NK;var Ak={},_d={};Object.defineProperty(_d,"__esModule",{value:!0});_d.validateTuple=void 0;const C6=at,yg=Ee,RK=it,OK={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return MR(t,"additionalItems",e);n.items=!0,!(0,yg.alwaysValidSchema)(n,e)&&t.ok((0,RK.validateArray)(t))}};function MR(t,e,n=t.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=t;f(s),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=yg.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),d=r.const("len",(0,C6._)`${i}.length`);n.forEach((m,y)=>{(0,yg.alwaysValidSchema)(a,m)||(r.if((0,C6._)`${d} > ${y}`,()=>t.subschema({keyword:o,schemaProp:y,dataProp:y},c)),t.ok(c))});function f(m){const{opts:y,errSchemaPath:v}=a,_=n.length,E=_===m.minItems&&(_===m.maxItems||m[e]===!1);if(y.strictTuples&&!E){const k=`"${o}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;(0,yg.checkStrictMode)(a,k,y.strictTuples)}}}_d.validateTuple=MR;_d.default=OK;Object.defineProperty(Ak,"__esModule",{value:!0});const IK=_d,AK={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,IK.validateTuple)(t,"items")};Ak.default=AK;var Mk={};Object.defineProperty(Mk,"__esModule",{value:!0});const P6=at,MK=Ee,jK=it,zK=vd,DK={message:({params:{len:t}})=>(0,P6.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,P6._)`{limit: ${t}}`},FK={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:DK,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:s}=n;r.items=!0,!(0,MK.alwaysValidSchema)(r,e)&&(s?(0,zK.validateAdditionalItems)(t,s):t.ok((0,jK.validateArray)(t)))}};Mk.default=FK;var jk={};Object.defineProperty(jk,"__esModule",{value:!0});const Ms=at,Am=Ee,LK={message:({params:{min:t,max:e}})=>e===void 0?(0,Ms.str)`must contain at least ${t} valid item(s)`:(0,Ms.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ms._)`{minContains: ${t}}`:(0,Ms._)`{minContains: ${t}, maxContains: ${e}}`},UK={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:LK,code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;let o,a;const{minContains:c,maxContains:d}=r;i.opts.next?(o=c===void 0?1:c,a=d):o=1;const f=e.const("len",(0,Ms._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Am.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Am.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Am.alwaysValidSchema)(i,n)){let E=(0,Ms._)`${f} >= ${o}`;a!==void 0&&(E=(0,Ms._)`${E} && ${f} <= ${a}`),t.pass(E);return}i.items=!0;const m=e.name("valid");a===void 0&&o===1?v(m,()=>e.if(m,()=>e.break())):o===0?(e.let(m,!0),a!==void 0&&e.if((0,Ms._)`${s}.length > 0`,y)):(e.let(m,!1),y()),t.result(m,()=>t.reset());function y(){const E=e.name("_valid"),k=e.let("count",0);v(E,()=>e.if(E,()=>_(k)))}function v(E,k){e.forRange("i",0,f,p=>{t.subschema({keyword:"contains",dataProp:p,dataPropType:Am.Type.Num,compositeRule:!0},E),k()})}function _(E){e.code((0,Ms._)`${E}++`),a===void 0?e.if((0,Ms._)`${E} >= ${o}`,()=>e.assign(m,!0).break()):(e.if((0,Ms._)`${E} > ${a}`,()=>e.assign(m,!1).break()),o===1?e.assign(m,!0):e.if((0,Ms._)`${E} >= ${o}`,()=>e.assign(m,!0)))}}};jk.default=UK;var jR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=at,n=Ee,r=it;t.error={message:({params:{property:c,depsCount:d,deps:f}})=>{const m=d===1?"property":"properties";return(0,e.str)`must have ${m} ${f} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:f,missingProperty:m}})=>(0,e._)`{property: ${c},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${f}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[d,f]=i(c);o(c,d),a(c,f)}};function i({schema:c}){const d={},f={};for(const m in c){if(m==="__proto__")continue;const y=Array.isArray(c[m])?d:f;y[m]=c[m]}return[d,f]}function o(c,d=c.schema){const{gen:f,data:m,it:y}=c;if(Object.keys(d).length===0)return;const v=f.let("missing");for(const _ in d){const E=d[_];if(E.length===0)continue;const k=(0,r.propertyInData)(f,m,_,y.opts.ownProperties);c.setParams({property:_,depsCount:E.length,deps:E.join(", ")}),y.allErrors?f.if(k,()=>{for(const p of E)(0,r.checkReportMissingProp)(c,p)}):(f.if((0,e._)`${k} && (${(0,r.checkMissingProp)(c,E,v)})`),(0,r.reportMissingProp)(c,v),f.else())}}t.validatePropertyDeps=o;function a(c,d=c.schema){const{gen:f,data:m,keyword:y,it:v}=c,_=f.name("valid");for(const E in d)(0,n.alwaysValidSchema)(v,d[E])||(f.if((0,r.propertyInData)(f,m,E,v.opts.ownProperties),()=>{const k=c.subschema({keyword:y,schemaProp:E},_);c.mergeValidEvaluated(k,_)},()=>f.var(_,!0)),c.ok(_))}t.validateSchemaDeps=a,t.default=s})(jR);var zk={};Object.defineProperty(zk,"__esModule",{value:!0});const zR=at,VK=Ee,GK={message:"property name must be valid",params:({params:t})=>(0,zR._)`{propertyName: ${t.propertyName}}`},HK={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:GK,code(t){const{gen:e,schema:n,data:r,it:s}=t;if((0,VK.alwaysValidSchema)(s,n))return;const i=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,zR.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};zk.default=HK;var Ry={};Object.defineProperty(Ry,"__esModule",{value:!0});const Mm=it,li=at,qK=eo,jm=Ee,BK={message:"must NOT have additional properties",params:({params:t})=>(0,li._)`{additionalProperty: ${t.additionalProperty}}`},ZK={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:BK,code(t){const{gen:e,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,jm.alwaysValidSchema)(o,n))return;const d=(0,Mm.allSchemaProperties)(r.properties),f=(0,Mm.allSchemaProperties)(r.patternProperties);m(),t.ok((0,li._)`${i} === ${qK.default.errors}`);function m(){e.forIn("key",s,k=>{!d.length&&!f.length?_(k):e.if(y(k),()=>_(k))})}function y(k){let p;if(d.length>8){const w=(0,jm.schemaRefOrVal)(o,r.properties,"properties");p=(0,Mm.isOwnProperty)(e,w,k)}else d.length?p=(0,li.or)(...d.map(w=>(0,li._)`${k} === ${w}`)):p=li.nil;return f.length&&(p=(0,li.or)(p,...f.map(w=>(0,li._)`${(0,Mm.usePattern)(t,w)}.test(${k})`))),(0,li.not)(p)}function v(k){e.code((0,li._)`delete ${s}[${k}]`)}function _(k){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){v(k);return}if(n===!1){t.setParams({additionalProperty:k}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,jm.alwaysValidSchema)(o,n)){const p=e.name("valid");c.removeAdditional==="failing"?(E(k,p,!1),e.if((0,li.not)(p),()=>{t.reset(),v(k)})):(E(k,p),a||e.if((0,li.not)(p),()=>e.break()))}}function E(k,p,w){const g={keyword:"additionalProperties",dataProp:k,dataPropType:jm.Type.Str};w===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,p)}}};Ry.default=ZK;var Dk={};Object.defineProperty(Dk,"__esModule",{value:!0});const WK=bi,$6=it,N1=Ee,T6=Ry,KK={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&T6.default.code(new WK.KeywordCxt(i,T6.default,"additionalProperties"));const o=(0,$6.allSchemaProperties)(n);for(const m of o)i.definedProperties.add(m);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=N1.mergeEvaluated.props(e,(0,N1.toHash)(o),i.props));const a=o.filter(m=>!(0,N1.alwaysValidSchema)(i,n[m]));if(a.length===0)return;const c=e.name("valid");for(const m of a)d(m)?f(m):(e.if((0,$6.propertyInData)(e,s,m,i.opts.ownProperties)),f(m),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(c);function d(m){return i.opts.useDefaults&&!i.compositeRule&&n[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},c)}}};Dk.default=KK;var Fk={};Object.defineProperty(Fk,"__esModule",{value:!0});const x6=it,zm=at,N6=Ee,R6=Ee,QK={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,x6.allSchemaProperties)(n),c=a.filter(E=>(0,N6.alwaysValidSchema)(i,n[E]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const d=o.strictSchema&&!o.allowMatchingProperties&&s.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof zm.Name)&&(i.props=(0,R6.evaluatedPropsToName)(e,i.props));const{props:m}=i;y();function y(){for(const E of a)d&&v(E),i.allErrors?_(E):(e.var(f,!0),_(E),e.if(f))}function v(E){for(const k in d)new RegExp(E).test(k)&&(0,N6.checkStrictMode)(i,`property ${k} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){e.forIn("key",r,k=>{e.if((0,zm._)`${(0,x6.usePattern)(t,E)}.test(${k})`,()=>{const p=c.includes(E);p||t.subschema({keyword:"patternProperties",schemaProp:E,dataProp:k,dataPropType:R6.Type.Str},f),i.opts.unevaluated&&m!==!0?e.assign((0,zm._)`${m}[${k}]`,!0):!p&&!i.allErrors&&e.if((0,zm.not)(f),()=>e.break())})})}}};Fk.default=QK;var Lk={};Object.defineProperty(Lk,"__esModule",{value:!0});const YK=Ee,XK={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,YK.alwaysValidSchema)(r,n)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Lk.default=XK;var Uk={};Object.defineProperty(Uk,"__esModule",{value:!0});const JK=it,eQ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:JK.validateUnion,error:{message:"must match a schema in anyOf"}};Uk.default=eQ;var Vk={};Object.defineProperty(Vk,"__esModule",{value:!0});const vg=at,tQ=Ee,nQ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,vg._)`{passingSchemas: ${t.passing}}`},rQ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:nQ,code(t){const{gen:e,schema:n,parentSchema:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(o,()=>t.reset(),()=>t.error(!0));function d(){i.forEach((f,m)=>{let y;(0,tQ.alwaysValidSchema)(s,f)?e.var(c,!0):y=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},c),m>0&&e.if((0,vg._)`${c} && ${o}`).assign(o,!1).assign(a,(0,vg._)`[${a}, ${m}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,m),y&&t.mergeEvaluated(y,vg.Name)})})}}};Vk.default=rQ;var Gk={};Object.defineProperty(Gk,"__esModule",{value:!0});const sQ=Ee,iQ={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=e.name("valid");n.forEach((i,o)=>{if((0,sQ.alwaysValidSchema)(r,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};Gk.default=iQ;var Hk={};Object.defineProperty(Hk,"__esModule",{value:!0});const b0=at,DR=Ee,oQ={message:({params:t})=>(0,b0.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,b0._)`{failingKeyword: ${t.ifClause}}`},aQ={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:oQ,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,DR.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=O6(r,"then"),i=O6(r,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){const f=e.let("ifClause");t.setParams({ifClause:f}),e.if(a,d("then",f),d("else",f))}else s?e.if(a,d("then")):e.if((0,b0.not)(a),d("else"));t.pass(o,()=>t.error(!0));function c(){const f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(f)}function d(f,m){return()=>{const y=t.subschema({keyword:f},a);e.assign(o,a),t.mergeValidEvaluated(y,o),m?e.assign(m,(0,b0._)`${f}`):t.setParams({ifClause:f})}}}};function O6(t,e){const n=t.schema[e];return n!==void 0&&!(0,DR.alwaysValidSchema)(t,n)}Hk.default=aQ;var qk={};Object.defineProperty(qk,"__esModule",{value:!0});const lQ=Ee,uQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,lQ.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};qk.default=uQ;Object.defineProperty(Ik,"__esModule",{value:!0});const cQ=vd,dQ=Ak,fQ=_d,hQ=Mk,pQ=jk,mQ=jR,gQ=zk,yQ=Ry,vQ=Dk,_Q=Fk,wQ=Lk,SQ=Uk,kQ=Vk,bQ=Gk,EQ=Hk,CQ=qk;function PQ(t=!1){const e=[wQ.default,SQ.default,kQ.default,bQ.default,EQ.default,CQ.default,gQ.default,yQ.default,mQ.default,vQ.default,_Q.default];return t?e.push(dQ.default,hQ.default):e.push(cQ.default,fQ.default),e.push(pQ.default),e}Ik.default=PQ;var Bk={},Zk={};Object.defineProperty(Zk,"__esModule",{value:!0});const wn=at,$Q={message:({schemaCode:t})=>(0,wn.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,wn._)`{format: ${t}}`},TQ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:$Q,code(t,e){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:f,self:m}=a;if(!c.validateFormats)return;s?y():v();function y(){const _=n.scopeValue("formats",{ref:m.formats,code:c.code.formats}),E=n.const("fDef",(0,wn._)`${_}[${o}]`),k=n.let("fType"),p=n.let("format");n.if((0,wn._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(k,(0,wn._)`${E}.type || "string"`).assign(p,(0,wn._)`${E}.validate`),()=>n.assign(k,(0,wn._)`"string"`).assign(p,E)),t.fail$data((0,wn.or)(w(),g()));function w(){return c.strictSchema===!1?wn.nil:(0,wn._)`${o} && !${p}`}function g(){const C=f.$async?(0,wn._)`(${E}.async ? await ${p}(${r}) : ${p}(${r}))`:(0,wn._)`${p}(${r})`,$=(0,wn._)`(typeof ${p} == "function" ? ${C} : ${p}.test(${r}))`;return(0,wn._)`${p} && ${p} !== true && ${k} === ${e} && !${$}`}}function v(){const _=m.formats[i];if(!_){w();return}if(_===!0)return;const[E,k,p]=g(_);E===e&&t.pass(C());function w(){if(c.strictSchema===!1){m.logger.warn($());return}throw new Error($());function $(){return`unknown format "${i}" ignored in schema at path "${d}"`}}function g($){const N=$ instanceof RegExp?(0,wn.regexpCode)($):c.code.formats?(0,wn._)`${c.code.formats}${(0,wn.getProperty)(i)}`:void 0,j=n.scopeValue("formats",{key:i,ref:$,code:N});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,wn._)`${j}.validate`]:["string",$,j]}function C(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!f.$async)throw new Error("async format in sync schema");return(0,wn._)`await ${p}(${r})`}return typeof k=="function"?(0,wn._)`${p}(${r})`:(0,wn._)`${p}.test(${r})`}}}};Zk.default=TQ;Object.defineProperty(Bk,"__esModule",{value:!0});const xQ=Zk,NQ=[xQ.default];Bk.default=NQ;var rd={};Object.defineProperty(rd,"__esModule",{value:!0});rd.contentVocabulary=rd.metadataVocabulary=void 0;rd.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];rd.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(vk,"__esModule",{value:!0});const RQ=_k,OQ=Sk,IQ=Ik,AQ=Bk,I6=rd,MQ=[RQ.default,OQ.default,(0,IQ.default)(),AQ.default,I6.metadataVocabulary,I6.contentVocabulary];vk.default=MQ;var Wk={},Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.DiscrError=void 0;var A6;(function(t){t.Tag="tag",t.Mapping="mapping"})(A6||(Oy.DiscrError=A6={}));Object.defineProperty(Wk,"__esModule",{value:!0});const Xu=at,V2=Oy,M6=Jr,jQ=yd,zQ=Ee,DQ={message:({params:{discrError:t,tagName:e}})=>t===V2.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Xu._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},FQ={keyword:"discriminator",type:"object",schemaType:"object",error:DQ,code(t){const{gen:e,data:n,schema:r,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),d=e.const("tag",(0,Xu._)`${n}${(0,Xu.getProperty)(a)}`);e.if((0,Xu._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:V2.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function f(){const v=y();e.if(!1);for(const _ in v)e.elseIf((0,Xu._)`${d} === ${_}`),e.assign(c,m(v[_]));e.else(),t.error(!1,{discrError:V2.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function m(v){const _=e.name("valid"),E=t.subschema({keyword:"oneOf",schemaProp:v},_);return t.mergeEvaluated(E,Xu.Name),_}function y(){var v;const _={},E=p(s);let k=!0;for(let C=0;C<o.length;C++){let $=o[C];if($!=null&&$.$ref&&!(0,zQ.schemaHasRulesButRef)($,i.self.RULES)){const j=$.$ref;if($=M6.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,j),$ instanceof M6.SchemaEnv&&($=$.schema),$===void 0)throw new jQ.default(i.opts.uriResolver,i.baseId,j)}const N=(v=$==null?void 0:$.properties)===null||v===void 0?void 0:v[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(E||p($)),w(N,C)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return _;function p({required:C}){return Array.isArray(C)&&C.includes(a)}function w(C,$){if(C.const)g(C.const,$);else if(C.enum)for(const N of C.enum)g(N,$);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(C,$){if(typeof C!="string"||C in _)throw new Error(`discriminator: "${a}" values must be unique strings`);_[C]=$}}}};Wk.default=FQ;const LQ="http://json-schema.org/draft-07/schema#",UQ="http://json-schema.org/draft-07/schema#",VQ="Core schema meta-schema",GQ={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},HQ=["object","boolean"],qQ={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},BQ={$schema:LQ,$id:UQ,title:VQ,definitions:GQ,type:HQ,properties:qQ,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=UN,r=vk,s=Wk,i=BQ,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var d=bi;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var f=at;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var m=tp;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return m.default}});var y=yd;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(M2,M2.exports);var ZQ=M2.exports;const WQ=Fh(ZQ);var G2={exports:{}},FR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(H,Q){return{validate:H,compare:Q}}t.fullFormats={date:e(i,o),time:e(c(!0),d),"date-time":e(y(!0),v),"iso-time":e(c(),f),"iso-date-time":e(y(),_),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:p,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:V,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:g,int32:{type:"number",validate:N},int64:{type:"number",validate:j},float:{type:"number",validate:A},double:{type:"number",validate:A},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,v),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,_),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(H){return H%4===0&&(H%100!==0||H%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(H){const Q=r.exec(H);if(!Q)return!1;const ie=+Q[1],se=+Q[2],ae=+Q[3];return se>=1&&se<=12&&ae>=1&&ae<=(se===2&&n(ie)?29:s[se])}function o(H,Q){if(H&&Q)return H>Q?1:H<Q?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(H){return function(ie){const se=a.exec(ie);if(!se)return!1;const ae=+se[1],ye=+se[2],Pe=+se[3],ee=se[4],ue=se[5]==="-"?-1:1,L=+(se[6]||0),I=+(se[7]||0);if(L>23||I>59||H&&!ee)return!1;if(ae<=23&&ye<=59&&Pe<60)return!0;const U=ye-I*ue,z=ae-L*ue-(U<0?1:0);return(z===23||z===-1)&&(U===59||U===-1)&&Pe<61}}function d(H,Q){if(!(H&&Q))return;const ie=new Date("2020-01-01T"+H).valueOf(),se=new Date("2020-01-01T"+Q).valueOf();if(ie&&se)return ie-se}function f(H,Q){if(!(H&&Q))return;const ie=a.exec(H),se=a.exec(Q);if(ie&&se)return H=ie[1]+ie[2]+ie[3],Q=se[1]+se[2]+se[3],H>Q?1:H<Q?-1:0}const m=/t|\s/i;function y(H){const Q=c(H);return function(se){const ae=se.split(m);return ae.length===2&&i(ae[0])&&Q(ae[1])}}function v(H,Q){if(!(H&&Q))return;const ie=new Date(H).valueOf(),se=new Date(Q).valueOf();if(ie&&se)return ie-se}function _(H,Q){if(!(H&&Q))return;const[ie,se]=H.split(m),[ae,ye]=Q.split(m),Pe=o(ie,ae);if(Pe!==void 0)return Pe||d(se,ye)}const E=/\/|:/,k=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function p(H){return E.test(H)&&k.test(H)}const w=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function g(H){return w.lastIndex=0,w.test(H)}const C=-2147483648,$=2**31-1;function N(H){return Number.isInteger(H)&&H<=$&&H>=C}function j(H){return Number.isInteger(H)}function A(){return!0}const G=/[^\\]\\Z/;function V(H){if(G.test(H))return!1;try{return new RegExp(H),!0}catch{return!1}}})(FR);var LR={},H2={exports:{}},UR={},Ei={},sd={},rp={},nt={},Nh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(w){if(super(),!t.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((g,C)=>`${g}${C}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((g,C)=>(C instanceof n&&(g[C.str]=(g[C.str]||0)+1),g),{})}}t._Code=r,t.nil=new r("");function s(p,...w){const g=[p[0]];let C=0;for(;C<w.length;)a(g,w[C]),g.push(p[++C]);return new r(g)}t._=s;const i=new r("+");function o(p,...w){const g=[v(p[0])];let C=0;for(;C<w.length;)g.push(i),a(g,w[C]),g.push(i,v(p[++C]));return c(g),new r(g)}t.str=o;function a(p,w){w instanceof r?p.push(...w._items):w instanceof n?p.push(w):p.push(m(w))}t.addCodeArg=a;function c(p){let w=1;for(;w<p.length-1;){if(p[w]===i){const g=d(p[w-1],p[w+1]);if(g!==void 0){p.splice(w-1,3,g);continue}p[w++]="+"}w++}}function d(p,w){if(w==='""')return p;if(p==='""')return w;if(typeof p=="string")return w instanceof n||p[p.length-1]!=='"'?void 0:typeof w!="string"?`${p.slice(0,-1)}${w}"`:w[0]==='"'?p.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(p instanceof n))return`"${p}${w.slice(1)}`}function f(p,w){return w.emptyStr()?p:p.emptyStr()?w:o`${p}${w}`}t.strConcat=f;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:v(Array.isArray(p)?p.join(","):p)}function y(p){return new r(v(p))}t.stringify=y;function v(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=v;function _(p){return typeof p=="string"&&t.IDENTIFIER.test(p)?new r(`.${p}`):s`[${p}]`}t.getProperty=_;function E(p){if(typeof p=="string"&&t.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}t.getEsmExportName=E;function k(p){return new r(p.toString())}t.regexpCode=k})(Nh);var q2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Nh;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:d,parent:f}={}){this._names={},this._prefixes=d,this._parent=f}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const f=this._names[d]||this._nameGroup(d);return`${d}${f.index++}`}_nameGroup(d){var f,m;if(!((m=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}t.Scope=s;class i extends e.Name{constructor(d,f){super(f),this.prefix=d}setValue(d,{property:f,itemIndex:m}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(f)}[${m}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:e.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,f){var m;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:v}=y,_=(m=f.key)!==null&&m!==void 0?m:f.ref;let E=this._values[v];if(E){const w=E.get(_);if(w)return w}else E=this._values[v]=new Map;E.set(_,y);const k=this._scope[v]||(this._scope[v]=[]),p=k.length;return k[p]=f.ref,y.setValue(f,{property:v,itemIndex:p}),y}getValue(d,f){const m=this._values[d];if(m)return m.get(f)}scopeRefs(d,f=this._values){return this._reduceValues(f,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,e._)`${d}${m.scopePath}`})}scopeCode(d=this._values,f,m){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},f,m)}_reduceValues(d,f,m={},y){let v=e.nil;for(const _ in d){const E=d[_];if(!E)continue;const k=m[_]=m[_]||new Map;E.forEach(p=>{if(k.has(p))return;k.set(p,r.Started);let w=f(p);if(w){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;v=(0,e._)`${v}${g} ${p} = ${w};${this.opts._n}`}else if(w=y==null?void 0:y(p))v=(0,e._)`${v}${w}${this.opts._n}`;else throw new n(p);k.set(p,r.Completed)})}return v}}t.ValueScope=a})(q2);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Nh,n=q2;var r=Nh;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=q2;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(b,T){return this}}class o extends i{constructor(b,T,M){super(),this.varKind=b,this.name=T,this.rhs=M}render({es5:b,_n:T}){const M=b?n.varKinds.var:this.varKind,O=this.rhs===void 0?"":` = ${this.rhs}`;return`${M} ${this.name}${O};`+T}optimizeNames(b,T){if(b[this.name.str])return this.rhs&&(this.rhs=se(this.rhs,b,T)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(b,T,M){super(),this.lhs=b,this.rhs=T,this.sideEffects=M}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,T){if(!(this.lhs instanceof e.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=se(this.rhs,b,T),this}get names(){const b=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ie(b,this.rhs)}}class c extends a{constructor(b,T,M,O){super(b,M,O),this.op=T}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class d extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class f extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class m extends i{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class y extends i{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,T){return this.code=se(this.code,b,T),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends i{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((T,M)=>T+M.render(b),"")}optimizeNodes(){const{nodes:b}=this;let T=b.length;for(;T--;){const M=b[T].optimizeNodes();Array.isArray(M)?b.splice(T,1,...M):M?b[T]=M:b.splice(T,1)}return b.length>0?this:void 0}optimizeNames(b,T){const{nodes:M}=this;let O=M.length;for(;O--;){const F=M[O];F.optimizeNames(b,T)||(ae(b,F.names),M.splice(O,1))}return M.length>0?this:void 0}get names(){return this.nodes.reduce((b,T)=>Q(b,T.names),{})}}class _ extends v{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class E extends v{}class k extends _{}k.kind="else";class p extends _{constructor(b,T){super(T),this.condition=b}render(b){let T=`if(${this.condition})`+super.render(b);return this.else&&(T+="else "+this.else.render(b)),T}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let T=this.else;if(T){const M=T.optimizeNodes();T=this.else=Array.isArray(M)?new k(M):M}if(T)return b===!1?T instanceof p?T:T.nodes:this.nodes.length?this:new p(ye(b),T instanceof p?[T]:T.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,T){var M;if(this.else=(M=this.else)===null||M===void 0?void 0:M.optimizeNames(b,T),!!(super.optimizeNames(b,T)||this.else))return this.condition=se(this.condition,b,T),this}get names(){const b=super.names;return ie(b,this.condition),this.else&&Q(b,this.else.names),b}}p.kind="if";class w extends _{}w.kind="for";class g extends w{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iteration=se(this.iteration,b,T),this}get names(){return Q(super.names,this.iteration.names)}}class C extends w{constructor(b,T,M,O){super(),this.varKind=b,this.name=T,this.from=M,this.to=O}render(b){const T=b.es5?n.varKinds.var:this.varKind,{name:M,from:O,to:F}=this;return`for(${T} ${M}=${O}; ${M}<${F}; ${M}++)`+super.render(b)}get names(){const b=ie(super.names,this.from);return ie(b,this.to)}}class $ extends w{constructor(b,T,M,O){super(),this.loop=b,this.varKind=T,this.name=M,this.iterable=O}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iterable=se(this.iterable,b,T),this}get names(){return Q(super.names,this.iterable.names)}}class N extends _{constructor(b,T,M){super(),this.name=b,this.args=T,this.async=M}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}N.kind="func";class j extends v{render(b){return"return "+super.render(b)}}j.kind="return";class A extends _{render(b){let T="try"+super.render(b);return this.catch&&(T+=this.catch.render(b)),this.finally&&(T+=this.finally.render(b)),T}optimizeNodes(){var b,T;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(T=this.finally)===null||T===void 0||T.optimizeNodes(),this}optimizeNames(b,T){var M,O;return super.optimizeNames(b,T),(M=this.catch)===null||M===void 0||M.optimizeNames(b,T),(O=this.finally)===null||O===void 0||O.optimizeNames(b,T),this}get names(){const b=super.names;return this.catch&&Q(b,this.catch.names),this.finally&&Q(b,this.finally.names),b}}class G extends _{constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}G.kind="catch";class V extends _{render(b){return"finally"+super.render(b)}}V.kind="finally";class H{constructor(b,T={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...T,_n:T.lines?`
`:""},this._extScope=b,this._scope=new n.Scope({parent:b}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,T){const M=this._extScope.value(b,T);return(this._values[M.prefix]||(this._values[M.prefix]=new Set)).add(M),M}getScopeValue(b,T){return this._extScope.getValue(b,T)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,T,M,O){const F=this._scope.toName(T);return M!==void 0&&O&&(this._constants[F.str]=M),this._leafNode(new o(b,F,M)),F}const(b,T,M){return this._def(n.varKinds.const,b,T,M)}let(b,T,M){return this._def(n.varKinds.let,b,T,M)}var(b,T,M){return this._def(n.varKinds.var,b,T,M)}assign(b,T,M){return this._leafNode(new a(b,T,M))}add(b,T){return this._leafNode(new c(b,t.operators.ADD,T))}code(b){return typeof b=="function"?b():b!==e.nil&&this._leafNode(new y(b)),this}object(...b){const T=["{"];for(const[M,O]of b)T.length>1&&T.push(","),T.push(M),(M!==O||this.opts.es5)&&(T.push(":"),(0,e.addCodeArg)(T,O));return T.push("}"),new e._Code(T)}if(b,T,M){if(this._blockNode(new p(b)),T&&M)this.code(T).else().code(M).endIf();else if(T)this.code(T).endIf();else if(M)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new p(b))}else(){return this._elseNode(new k)}endIf(){return this._endBlockNode(p,k)}_for(b,T){return this._blockNode(b),T&&this.code(T).endFor(),this}for(b,T){return this._for(new g(b),T)}forRange(b,T,M,O,F=this.opts.es5?n.varKinds.var:n.varKinds.let){const Z=this._scope.toName(b);return this._for(new C(F,Z,T,M),()=>O(Z))}forOf(b,T,M,O=n.varKinds.const){const F=this._scope.toName(b);if(this.opts.es5){const Z=T instanceof e.Name?T:this.var("_arr",T);return this.forRange("_i",0,(0,e._)`${Z}.length`,le=>{this.var(F,(0,e._)`${Z}[${le}]`),M(F)})}return this._for(new $("of",O,F,T),()=>M(F))}forIn(b,T,M,O=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,e._)`Object.keys(${T})`,M);const F=this._scope.toName(b);return this._for(new $("in",O,F,T),()=>M(F))}endFor(){return this._endBlockNode(w)}label(b){return this._leafNode(new d(b))}break(b){return this._leafNode(new f(b))}return(b){const T=new j;if(this._blockNode(T),this.code(b),T.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(j)}try(b,T,M){if(!T&&!M)throw new Error('CodeGen: "try" without "catch" and "finally"');const O=new A;if(this._blockNode(O),this.code(b),T){const F=this.name("e");this._currNode=O.catch=new G(F),T(F)}return M&&(this._currNode=O.finally=new V,this.code(M)),this._endBlockNode(G,V)}throw(b){return this._leafNode(new m(b))}block(b,T){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(T),this}endBlock(b){const T=this._blockStarts.pop();if(T===void 0)throw new Error("CodeGen: not in self-balancing block");const M=this._nodes.length-T;if(M<0||b!==void 0&&M!==b)throw new Error(`CodeGen: wrong number of nodes: ${M} vs ${b} expected`);return this._nodes.length=T,this}func(b,T=e.nil,M,O){return this._blockNode(new N(b,T,M)),O&&this.code(O).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,T){const M=this._currNode;if(M instanceof b||T&&M instanceof T)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${T?`${b.kind}/${T.kind}`:b.kind}"`)}_elseNode(b){const T=this._currNode;if(!(T instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=T.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const T=this._nodes;T[T.length-1]=b}}t.CodeGen=H;function Q(z,b){for(const T in b)z[T]=(z[T]||0)+(b[T]||0);return z}function ie(z,b){return b instanceof e._CodeOrName?Q(z,b.names):z}function se(z,b,T){if(z instanceof e.Name)return M(z);if(!O(z))return z;return new e._Code(z._items.reduce((F,Z)=>(Z instanceof e.Name&&(Z=M(Z)),Z instanceof e._Code?F.push(...Z._items):F.push(Z),F),[]));function M(F){const Z=T[F.str];return Z===void 0||b[F.str]!==1?F:(delete b[F.str],Z)}function O(F){return F instanceof e._Code&&F._items.some(Z=>Z instanceof e.Name&&b[Z.str]===1&&T[Z.str]!==void 0)}}function ae(z,b){for(const T in b)z[T]=(z[T]||0)-(b[T]||0)}function ye(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${U(z)}`}t.not=ye;const Pe=I(t.operators.AND);function ee(...z){return z.reduce(Pe)}t.and=ee;const ue=I(t.operators.OR);function L(...z){return z.reduce(ue)}t.or=L;function I(z){return(b,T)=>b===e.nil?T:T===e.nil?b:(0,e._)`${U(b)} ${z} ${U(T)}`}function U(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(nt);var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.checkStrictMode=Ce.getErrorPath=Ce.Type=Ce.useFunc=Ce.setEvaluated=Ce.evaluatedPropsToName=Ce.mergeEvaluated=Ce.eachItem=Ce.unescapeJsonPointer=Ce.escapeJsonPointer=Ce.escapeFragment=Ce.unescapeFragment=Ce.schemaRefOrVal=Ce.schemaHasRulesButRef=Ce.schemaHasRules=Ce.checkUnknownRules=Ce.alwaysValidSchema=Ce.toHash=void 0;const jt=nt,KQ=Nh;function QQ(t){const e={};for(const n of t)e[n]=!0;return e}Ce.toHash=QQ;function YQ(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(VR(t,e),!GR(e,t.self.RULES.all))}Ce.alwaysValidSchema=YQ;function VR(t,e=t.schema){const{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;const s=r.RULES.keywords;for(const i in e)s[i]||BR(t,`unknown keyword: "${i}"`)}Ce.checkUnknownRules=VR;function GR(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(e[n])return!0;return!1}Ce.schemaHasRules=GR;function XQ(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}Ce.schemaHasRulesButRef=XQ;function JQ({topSchemaRef:t,schemaPath:e},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,jt._)`${n}`}return(0,jt._)`${t}${e}${(0,jt.getProperty)(r)}`}Ce.schemaRefOrVal=JQ;function eY(t){return HR(decodeURIComponent(t))}Ce.unescapeFragment=eY;function tY(t){return encodeURIComponent(Kk(t))}Ce.escapeFragment=tY;function Kk(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ce.escapeJsonPointer=Kk;function HR(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ce.unescapeJsonPointer=HR;function nY(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)}Ce.eachItem=nY;function j6({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const c=o===void 0?i:o instanceof jt.Name?(i instanceof jt.Name?t(s,i,o):e(s,i,o),o):i instanceof jt.Name?(e(s,o,i),i):n(i,o);return a===jt.Name&&!(c instanceof jt.Name)?r(s,c):c}}Ce.mergeEvaluated={props:j6({mergeNames:(t,e,n)=>t.if((0,jt._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,jt._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,jt._)`${n} || {}`).code((0,jt._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,jt._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,jt._)`${n} || {}`),Qk(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:qR}),items:j6({mergeNames:(t,e,n)=>t.if((0,jt._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,jt._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,jt._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,jt._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function qR(t,e){if(e===!0)return t.var("props",!0);const n=t.var("props",(0,jt._)`{}`);return e!==void 0&&Qk(t,n,e),n}Ce.evaluatedPropsToName=qR;function Qk(t,e,n){Object.keys(n).forEach(r=>t.assign((0,jt._)`${e}${(0,jt.getProperty)(r)}`,!0))}Ce.setEvaluated=Qk;const z6={};function rY(t,e){return t.scopeValue("func",{ref:e,code:z6[e.code]||(z6[e.code]=new KQ._Code(e.code))})}Ce.useFunc=rY;var B2;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(B2||(Ce.Type=B2={}));function sY(t,e,n){if(t instanceof jt.Name){const r=e===B2.Num;return n?r?(0,jt._)`"[" + ${t} + "]"`:(0,jt._)`"['" + ${t} + "']"`:r?(0,jt._)`"/" + ${t}`:(0,jt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,jt.getProperty)(t).toString():"/"+Kk(t)}Ce.getErrorPath=sY;function BR(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}Ce.checkStrictMode=BR;var to={};Object.defineProperty(to,"__esModule",{value:!0});const Sr=nt,iY={data:new Sr.Name("data"),valCxt:new Sr.Name("valCxt"),instancePath:new Sr.Name("instancePath"),parentData:new Sr.Name("parentData"),parentDataProperty:new Sr.Name("parentDataProperty"),rootData:new Sr.Name("rootData"),dynamicAnchors:new Sr.Name("dynamicAnchors"),vErrors:new Sr.Name("vErrors"),errors:new Sr.Name("errors"),this:new Sr.Name("this"),self:new Sr.Name("self"),scope:new Sr.Name("scope"),json:new Sr.Name("json"),jsonPos:new Sr.Name("jsonPos"),jsonLen:new Sr.Name("jsonLen"),jsonPart:new Sr.Name("jsonPart")};to.default=iY;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=nt,n=Ce,r=to;t.keywordError={message:({keyword:k})=>(0,e.str)`must pass "${k}" keyword validation`},t.keyword$DataError={message:({keyword:k,schemaType:p})=>p?(0,e.str)`"${k}" keyword must be ${p} ($data)`:(0,e.str)`"${k}" keyword is invalid ($data)`};function s(k,p=t.keywordError,w,g){const{it:C}=k,{gen:$,compositeRule:N,allErrors:j}=C,A=m(k,p,w);g??(N||j)?c($,A):d(C,(0,e._)`[${A}]`)}t.reportError=s;function i(k,p=t.keywordError,w){const{it:g}=k,{gen:C,compositeRule:$,allErrors:N}=g,j=m(k,p,w);c(C,j),$||N||d(g,r.default.vErrors)}t.reportExtraError=i;function o(k,p){k.assign(r.default.errors,p),k.if((0,e._)`${r.default.vErrors} !== null`,()=>k.if(p,()=>k.assign((0,e._)`${r.default.vErrors}.length`,p),()=>k.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:k,keyword:p,schemaValue:w,data:g,errsCount:C,it:$}){if(C===void 0)throw new Error("ajv implementation error");const N=k.name("err");k.forRange("i",C,r.default.errors,j=>{k.const(N,(0,e._)`${r.default.vErrors}[${j}]`),k.if((0,e._)`${N}.instancePath === undefined`,()=>k.assign((0,e._)`${N}.instancePath`,(0,e.strConcat)(r.default.instancePath,$.errorPath))),k.assign((0,e._)`${N}.schemaPath`,(0,e.str)`${$.errSchemaPath}/${p}`),$.opts.verbose&&(k.assign((0,e._)`${N}.schema`,w),k.assign((0,e._)`${N}.data`,g))})}t.extendErrors=a;function c(k,p){const w=k.const("err",p);k.if((0,e._)`${r.default.vErrors} === null`,()=>k.assign(r.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${r.default.vErrors}.push(${w})`),k.code((0,e._)`${r.default.errors}++`)}function d(k,p){const{gen:w,validateName:g,schemaEnv:C}=k;C.$async?w.throw((0,e._)`new ${k.ValidationError}(${p})`):(w.assign((0,e._)`${g}.errors`,p),w.return(!1))}const f={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function m(k,p,w){const{createErrors:g}=k.it;return g===!1?(0,e._)`{}`:y(k,p,w)}function y(k,p,w={}){const{gen:g,it:C}=k,$=[v(C,w),_(k,w)];return E(k,p,$),g.object(...$)}function v({errorPath:k},{instancePath:p}){const w=p?(0,e.str)`${k}${(0,n.getErrorPath)(p,n.Type.Str)}`:k;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,w)]}function _({keyword:k,it:{errSchemaPath:p}},{schemaPath:w,parentSchema:g}){let C=g?p:(0,e.str)`${p}/${k}`;return w&&(C=(0,e.str)`${C}${(0,n.getErrorPath)(w,n.Type.Str)}`),[f.schemaPath,C]}function E(k,{params:p,message:w},g){const{keyword:C,data:$,schemaValue:N,it:j}=k,{opts:A,propertyName:G,topSchemaRef:V,schemaPath:H}=j;g.push([f.keyword,C],[f.params,typeof p=="function"?p(k):p||(0,e._)`{}`]),A.messages&&g.push([f.message,typeof w=="function"?w(k):w]),A.verbose&&g.push([f.schema,N],[f.parentSchema,(0,e._)`${V}${H}`],[r.default.data,$]),G&&g.push([f.propertyName,G])}})(rp);Object.defineProperty(sd,"__esModule",{value:!0});sd.boolOrEmptySchema=sd.topBoolOrEmptySchema=void 0;const oY=rp,aY=nt,lY=to,uY={message:"boolean schema is false"};function cY(t){const{gen:e,schema:n,validateName:r}=t;n===!1?ZR(t,!1):typeof n=="object"&&n.$async===!0?e.return(lY.default.data):(e.assign((0,aY._)`${r}.errors`,null),e.return(!0))}sd.topBoolOrEmptySchema=cY;function dY(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),ZR(t)):n.var(e,!0)}sd.boolOrEmptySchema=dY;function ZR(t,e){const{gen:n,data:r}=t,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,oY.reportError)(s,uY,void 0,e)}var Fn={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.getRules=iu.isJSONType=void 0;const fY=["string","number","integer","boolean","null","object","array"],hY=new Set(fY);function pY(t){return typeof t=="string"&&hY.has(t)}iu.isJSONType=pY;function mY(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}iu.getRules=mY;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.shouldUseRule=To.shouldUseGroup=To.schemaHasRulesForType=void 0;function gY({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&WR(t,r)}To.schemaHasRulesForType=gY;function WR(t,e){return e.rules.some(n=>KR(t,n))}To.shouldUseGroup=WR;function KR(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}To.shouldUseRule=KR;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.reportTypeError=Fn.checkDataTypes=Fn.checkDataType=Fn.coerceAndCheckDataType=Fn.getJSONTypes=Fn.getSchemaTypes=Fn.DataType=void 0;const yY=iu,vY=To,_Y=rp,Ye=nt,QR=Ce;var Tc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Tc||(Fn.DataType=Tc={}));function wY(t){const e=YR(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Fn.getSchemaTypes=wY;function YR(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(yY.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Fn.getJSONTypes=YR;function SY(t,e){const{gen:n,data:r,opts:s}=t,i=kY(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,vY.schemaHasRulesForType)(t,e[0]));if(o){const a=Yk(e,r,s.strictNumbers,Tc.Wrong);n.if(a,()=>{i.length?bY(t,e,i):Xk(t)})}return o}Fn.coerceAndCheckDataType=SY;const XR=new Set(["string","number","integer","boolean","null"]);function kY(t,e){return e?t.filter(n=>XR.has(n)||e==="array"&&n==="array"):[]}function bY(t,e,n){const{gen:r,data:s,opts:i}=t,o=r.let("dataType",(0,Ye._)`typeof ${s}`),a=r.let("coerced",(0,Ye._)`undefined`);i.coerceTypes==="array"&&r.if((0,Ye._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,Ye._)`${s}[0]`).assign(o,(0,Ye._)`typeof ${s}`).if(Yk(e,s,i.strictNumbers),()=>r.assign(a,s))),r.if((0,Ye._)`${a} !== undefined`);for(const d of n)(XR.has(d)||d==="array"&&i.coerceTypes==="array")&&c(d);r.else(),Xk(t),r.endIf(),r.if((0,Ye._)`${a} !== undefined`,()=>{r.assign(s,a),EY(t,a)});function c(d){switch(d){case"string":r.elseIf((0,Ye._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Ye._)`"" + ${s}`).elseIf((0,Ye._)`${s} === null`).assign(a,(0,Ye._)`""`);return;case"number":r.elseIf((0,Ye._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Ye._)`+${s}`);return;case"integer":r.elseIf((0,Ye._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Ye._)`+${s}`);return;case"boolean":r.elseIf((0,Ye._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Ye._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Ye._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Ye._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Ye._)`[${s}]`)}}}function EY({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,Ye._)`${e} !== undefined`,()=>t.assign((0,Ye._)`${e}[${n}]`,r))}function Z2(t,e,n,r=Tc.Correct){const s=r===Tc.Correct?Ye.operators.EQ:Ye.operators.NEQ;let i;switch(t){case"null":return(0,Ye._)`${e} ${s} null`;case"array":i=(0,Ye._)`Array.isArray(${e})`;break;case"object":i=(0,Ye._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Ye._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Ye._)`typeof ${e} ${s} ${t}`}return r===Tc.Correct?i:(0,Ye.not)(i);function o(a=Ye.nil){return(0,Ye.and)((0,Ye._)`typeof ${e} == "number"`,a,n?(0,Ye._)`isFinite(${e})`:Ye.nil)}}Fn.checkDataType=Z2;function Yk(t,e,n,r){if(t.length===1)return Z2(t[0],e,n,r);let s;const i=(0,QR.toHash)(t);if(i.array&&i.object){const o=(0,Ye._)`typeof ${e} != "object"`;s=i.null?o:(0,Ye._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Ye.nil;i.number&&delete i.integer;for(const o in i)s=(0,Ye.and)(s,Z2(o,e,n,r));return s}Fn.checkDataTypes=Yk;const CY={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Ye._)`{type: ${t}}`:(0,Ye._)`{type: ${e}}`};function Xk(t){const e=PY(t);(0,_Y.reportError)(e,CY)}Fn.reportTypeError=Xk;function PY(t){const{gen:e,data:n,schema:r}=t,s=(0,QR.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:t}}var Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});Iy.assignDefaults=void 0;const Lu=nt,$Y=Ce;function TY(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const s in n)D6(t,s,n[s].default);else e==="array"&&Array.isArray(r)&&r.forEach((s,i)=>D6(t,i,s.default))}Iy.assignDefaults=TY;function D6(t,e,n){const{gen:r,compositeRule:s,data:i,opts:o}=t;if(n===void 0)return;const a=(0,Lu._)`${i}${(0,Lu.getProperty)(e)}`;if(s){(0,$Y.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Lu._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Lu._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,Lu._)`${a} = ${(0,Lu.stringify)(n)}`)}var Ki={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.validateUnion=ot.validateArray=ot.usePattern=ot.callValidateCode=ot.schemaProperties=ot.allSchemaProperties=ot.noPropertyInData=ot.propertyInData=ot.isOwnProperty=ot.hasPropFunc=ot.reportMissingProp=ot.checkMissingProp=ot.checkReportMissingProp=void 0;const Zt=nt,Jk=Ce,ra=to,xY=Ce;function NY(t,e){const{gen:n,data:r,it:s}=t;n.if(t3(n,r,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Zt._)`${e}`},!0),t.error()})}ot.checkReportMissingProp=NY;function RY({gen:t,data:e,it:{opts:n}},r,s){return(0,Zt.or)(...r.map(i=>(0,Zt.and)(t3(t,e,i,n.ownProperties),(0,Zt._)`${s} = ${i}`)))}ot.checkMissingProp=RY;function OY(t,e){t.setParams({missingProperty:e},!0),t.error()}ot.reportMissingProp=OY;function JR(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Zt._)`Object.prototype.hasOwnProperty`})}ot.hasPropFunc=JR;function e3(t,e,n){return(0,Zt._)`${JR(t)}.call(${e}, ${n})`}ot.isOwnProperty=e3;function IY(t,e,n,r){const s=(0,Zt._)`${e}${(0,Zt.getProperty)(n)} !== undefined`;return r?(0,Zt._)`${s} && ${e3(t,e,n)}`:s}ot.propertyInData=IY;function t3(t,e,n,r){const s=(0,Zt._)`${e}${(0,Zt.getProperty)(n)} === undefined`;return r?(0,Zt.or)(s,(0,Zt.not)(e3(t,e,n))):s}ot.noPropertyInData=t3;function e7(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ot.allSchemaProperties=e7;function AY(t,e){return e7(e).filter(n=>!(0,Jk.alwaysValidSchema)(t,e[n]))}ot.schemaProperties=AY;function MY({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,c,d){const f=d?(0,Zt._)`${t}, ${e}, ${r}${s}`:e,m=[[ra.default.instancePath,(0,Zt.strConcat)(ra.default.instancePath,i)],[ra.default.parentData,o.parentData],[ra.default.parentDataProperty,o.parentDataProperty],[ra.default.rootData,ra.default.rootData]];o.opts.dynamicRef&&m.push([ra.default.dynamicAnchors,ra.default.dynamicAnchors]);const y=(0,Zt._)`${f}, ${n.object(...m)}`;return c!==Zt.nil?(0,Zt._)`${a}.call(${c}, ${y})`:(0,Zt._)`${a}(${y})`}ot.callValidateCode=MY;const jY=(0,Zt._)`new RegExp`;function zY({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(n,r);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Zt._)`${s.code==="new RegExp"?jY:(0,xY.useFunc)(t,s)}(${n}, ${r})`})}ot.usePattern=zY;function DY(t){const{gen:e,data:n,keyword:r,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const c=e.const("len",(0,Zt._)`${n}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:r,dataProp:d,dataPropType:Jk.Type.Num},i),e.if((0,Zt.not)(i),a)})}}ot.validateArray=DY;function FY(t){const{gen:e,schema:n,keyword:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,Jk.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((c,d)=>{const f=t.subschema({keyword:r,schemaProp:d,compositeRule:!0},a);e.assign(o,(0,Zt._)`${o} || ${a}`),t.mergeValidEvaluated(f,a)||e.if((0,Zt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}ot.validateUnion=FY;Object.defineProperty(Ki,"__esModule",{value:!0});Ki.validateKeywordUsage=Ki.validSchemaType=Ki.funcKeywordCode=Ki.macroKeywordCode=void 0;const Ir=nt,Cl=to,LY=ot,UY=rp;function VY(t,e){const{gen:n,keyword:r,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=t7(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const d=n.name("valid");t.subschema({schema:a,schemaPath:Ir.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}Ki.macroKeywordCode=VY;function GY(t,e){var n;const{gen:r,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;qY(c,e);const d=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,f=t7(r,s,d),m=r.let("valid");t.block$data(m,y),t.ok((n=e.valid)!==null&&n!==void 0?n:m);function y(){if(e.errors===!1)E(),e.modifying&&F6(t),k(()=>t.error());else{const p=e.async?v():_();e.modifying&&F6(t),k(()=>HY(t,p))}}function v(){const p=r.let("ruleErrs",null);return r.try(()=>E((0,Ir._)`await `),w=>r.assign(m,!1).if((0,Ir._)`${w} instanceof ${c.ValidationError}`,()=>r.assign(p,(0,Ir._)`${w}.errors`),()=>r.throw(w))),p}function _(){const p=(0,Ir._)`${f}.errors`;return r.assign(p,null),E(Ir.nil),p}function E(p=e.async?(0,Ir._)`await `:Ir.nil){const w=c.opts.passContext?Cl.default.this:Cl.default.self,g=!("compile"in e&&!a||e.schema===!1);r.assign(m,(0,Ir._)`${p}${(0,LY.callValidateCode)(t,f,w,g)}`,e.modifying)}function k(p){var w;r.if((0,Ir.not)((w=e.valid)!==null&&w!==void 0?w:m),p)}}Ki.funcKeywordCode=GY;function F6(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,Ir._)`${r.parentData}[${r.parentDataProperty}]`))}function HY(t,e){const{gen:n}=t;n.if((0,Ir._)`Array.isArray(${e})`,()=>{n.assign(Cl.default.vErrors,(0,Ir._)`${Cl.default.vErrors} === null ? ${e} : ${Cl.default.vErrors}.concat(${e})`).assign(Cl.default.errors,(0,Ir._)`${Cl.default.vErrors}.length`),(0,UY.extendErrors)(t)},()=>t.error())}function qY({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function t7(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ir.stringify)(n)})}function BY(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Ki.validSchemaType=BY;function ZY({schema:t,opts:e,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const c=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Ki.validateKeywordUsage=ZY;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.extendSubschemaMode=Da.extendSubschemaData=Da.getSubschema=void 0;const qi=nt,n7=Ce;function WY(t,{keyword:e,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,qi._)`${t.schemaPath}${(0,qi.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,qi._)`${t.schemaPath}${(0,qi.getProperty)(e)}${(0,qi.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,n7.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Da.getSubschema=WY;function KY(t,e,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(n!==void 0){const{errorPath:d,dataPathArr:f,opts:m}=e,y=a.let("data",(0,qi._)`${e.data}${(0,qi.getProperty)(n)}`,!0);c(y),t.errorPath=(0,qi.str)`${d}${(0,n7.getErrorPath)(n,r,m.jsPropertySyntax)}`,t.parentDataProperty=(0,qi._)`${n}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){const d=s instanceof qi.Name?s:a.let("data",s,!0);c(d),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Da.extendSubschemaData=KY;function QY(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(t.compositeRule=r),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=n}Da.extendSubschemaMode=QY;var or={},r7={exports:{}},$a=r7.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};_g(e,r,s,t,"",t)};$a.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};$a.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};$a.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};$a.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _g(t,e,n,r,s,i,o,a,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,s,i,o,a,c,d);for(var f in r){var m=r[f];if(Array.isArray(m)){if(f in $a.arrayKeywords)for(var y=0;y<m.length;y++)_g(t,e,n,m[y],s+"/"+f+"/"+y,i,s,f,r,y)}else if(f in $a.propsKeywords){if(m&&typeof m=="object")for(var v in m)_g(t,e,n,m[v],s+"/"+f+"/"+YY(v),i,s,f,r,v)}else(f in $a.keywords||t.allKeys&&!(f in $a.skipKeywords))&&_g(t,e,n,m,s+"/"+f,i,s,f,r)}n(r,s,i,o,a,c,d)}}function YY(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var XY=r7.exports;Object.defineProperty(or,"__esModule",{value:!0});or.getSchemaRefs=or.resolveUrl=or.normalizeId=or._getFullPath=or.getFullPath=or.inlineRef=void 0;const JY=Ce,eX=$y,tX=XY,nX=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function rX(t,e=!0){return typeof t=="boolean"?!0:e===!0?!W2(t):e?s7(t)<=e:!1}or.inlineRef=rX;const sX=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function W2(t){for(const e in t){if(sX.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(W2)||typeof n=="object"&&W2(n))return!0}return!1}function s7(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!nX.has(n)&&(typeof t[n]=="object"&&(0,JY.eachItem)(t[n],r=>e+=s7(r)),e===1/0))return 1/0}return e}function i7(t,e="",n){n!==!1&&(e=xc(e));const r=t.parse(e);return o7(t,r)}or.getFullPath=i7;function o7(t,e){return t.serialize(e).split("#")[0]+"#"}or._getFullPath=o7;const iX=/#\/?$/;function xc(t){return t?t.replace(iX,""):""}or.normalizeId=xc;function oX(t,e,n){return n=xc(n),t.resolve(e,n)}or.resolveUrl=oX;const aX=/^[a-z_][-a-z0-9._]*$/i;function lX(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=xc(t[n]||e),i={"":s},o=i7(r,s,!1),a={},c=new Set;return tX(t,{allKeys:!0},(m,y,v,_)=>{if(_===void 0)return;const E=o+y;let k=i[_];typeof m[n]=="string"&&(k=p.call(this,m[n])),w.call(this,m.$anchor),w.call(this,m.$dynamicAnchor),i[y]=k;function p(g){const C=this.opts.uriResolver.resolve;if(g=xc(k?C(k,g):g),c.has(g))throw f(g);c.add(g);let $=this.refs[g];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(m,$.schema,g):g!==xc(E)&&(g[0]==="#"?(d(m,a[g],g),a[g]=m):this.refs[g]=E),g}function w(g){if(typeof g=="string"){if(!aX.test(g))throw new Error(`invalid anchor "${g}"`);p.call(this,`#${g}`)}}}),a;function d(m,y,v){if(y!==void 0&&!eX(m,y))throw f(v)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}or.getSchemaRefs=lX;Object.defineProperty(Ei,"__esModule",{value:!0});Ei.getData=Ei.KeywordCxt=Ei.validateFunctionCode=void 0;const a7=sd,L6=Fn,n3=To,E0=Fn,uX=Iy,Yf=Ki,R1=Da,Me=nt,He=to,cX=or,xo=Ce,uf=rp;function dX(t){if(c7(t)&&(d7(t),u7(t))){pX(t);return}l7(t,()=>(0,a7.topBoolOrEmptySchema)(t))}Ei.validateFunctionCode=dX;function l7({gen:t,validateName:e,schema:n,schemaEnv:r,opts:s},i){s.code.es5?t.func(e,(0,Me._)`${He.default.data}, ${He.default.valCxt}`,r.$async,()=>{t.code((0,Me._)`"use strict"; ${U6(n,s)}`),hX(t,s),t.code(i)}):t.func(e,(0,Me._)`${He.default.data}, ${fX(s)}`,r.$async,()=>t.code(U6(n,s)).code(i))}function fX(t){return(0,Me._)`{${He.default.instancePath}="", ${He.default.parentData}, ${He.default.parentDataProperty}, ${He.default.rootData}=${He.default.data}${t.dynamicRef?(0,Me._)`, ${He.default.dynamicAnchors}={}`:Me.nil}}={}`}function hX(t,e){t.if(He.default.valCxt,()=>{t.var(He.default.instancePath,(0,Me._)`${He.default.valCxt}.${He.default.instancePath}`),t.var(He.default.parentData,(0,Me._)`${He.default.valCxt}.${He.default.parentData}`),t.var(He.default.parentDataProperty,(0,Me._)`${He.default.valCxt}.${He.default.parentDataProperty}`),t.var(He.default.rootData,(0,Me._)`${He.default.valCxt}.${He.default.rootData}`),e.dynamicRef&&t.var(He.default.dynamicAnchors,(0,Me._)`${He.default.valCxt}.${He.default.dynamicAnchors}`)},()=>{t.var(He.default.instancePath,(0,Me._)`""`),t.var(He.default.parentData,(0,Me._)`undefined`),t.var(He.default.parentDataProperty,(0,Me._)`undefined`),t.var(He.default.rootData,He.default.data),e.dynamicRef&&t.var(He.default.dynamicAnchors,(0,Me._)`{}`)})}function pX(t){const{schema:e,opts:n,gen:r}=t;l7(t,()=>{n.$comment&&e.$comment&&h7(t),_X(t),r.let(He.default.vErrors,null),r.let(He.default.errors,0),n.unevaluated&&mX(t),f7(t),kX(t)})}function mX(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,Me._)`${n}.evaluated`),e.if((0,Me._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Me._)`${t.evaluated}.props`,(0,Me._)`undefined`)),e.if((0,Me._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Me._)`${t.evaluated}.items`,(0,Me._)`undefined`))}function U6(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,Me._)`/*# sourceURL=${n} */`:Me.nil}function gX(t,e){if(c7(t)&&(d7(t),u7(t))){yX(t,e);return}(0,a7.boolOrEmptySchema)(t,e)}function u7({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function c7(t){return typeof t.schema!="boolean"}function yX(t,e){const{schema:n,gen:r,opts:s}=t;s.$comment&&n.$comment&&h7(t),wX(t),SX(t);const i=r.const("_errs",He.default.errors);f7(t,i),r.var(e,(0,Me._)`${i} === ${He.default.errors}`)}function d7(t){(0,xo.checkUnknownRules)(t),vX(t)}function f7(t,e){if(t.opts.jtd)return V6(t,[],!1,e);const n=(0,L6.getSchemaTypes)(t.schema),r=(0,L6.coerceAndCheckDataType)(t,n);V6(t,n,!r,e)}function vX(t){const{schema:e,errSchemaPath:n,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,xo.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function _X(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,xo.checkStrictMode)(t,"default is ignored in the schema root")}function wX(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,cX.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function SX(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function h7({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)t.code((0,Me._)`${He.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,Me.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Me._)`${He.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function kX(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=t;n.$async?e.if((0,Me._)`${He.default.errors} === 0`,()=>e.return(He.default.data),()=>e.throw((0,Me._)`new ${s}(${He.default.vErrors})`)):(e.assign((0,Me._)`${r}.errors`,He.default.vErrors),i.unevaluated&&bX(t),e.return((0,Me._)`${He.default.errors} === 0`))}function bX({gen:t,evaluated:e,props:n,items:r}){n instanceof Me.Name&&t.assign((0,Me._)`${e}.props`,n),r instanceof Me.Name&&t.assign((0,Me._)`${e}.items`,r)}function V6(t,e,n,r){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:d}=t,{RULES:f}=d;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,xo.schemaHasRulesButRef)(i,f))){s.block(()=>g7(t,"$ref",f.all.$ref.definition));return}c.jtd||EX(t,e),s.block(()=>{for(const y of f.rules)m(y);m(f.post)});function m(y){(0,n3.shouldUseGroup)(i,y)&&(y.type?(s.if((0,E0.checkDataType)(y.type,o,c.strictNumbers)),G6(t,y),e.length===1&&e[0]===y.type&&n&&(s.else(),(0,E0.reportTypeError)(t)),s.endIf()):G6(t,y),a||s.if((0,Me._)`${He.default.errors} === ${r||0}`))}}function G6(t,e){const{gen:n,schema:r,opts:{useDefaults:s}}=t;s&&(0,uX.assignDefaults)(t,e.type),n.block(()=>{for(const i of e.rules)(0,n3.shouldUseRule)(r,i)&&g7(t,i.keyword,i.definition,e.type)})}function EX(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(CX(t,e),t.opts.allowUnionTypes||PX(t,e),$X(t,t.dataTypes))}function CX(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{p7(t.dataTypes,n)||r3(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),xX(t,e)}}function PX(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&r3(t,"use allowUnionTypes to allow union type keyword")}function $X(t,e){const n=t.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,n3.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>TX(e,o))&&r3(t,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function TX(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function p7(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function xX(t,e){const n=[];for(const r of t.dataTypes)p7(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function r3(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,xo.checkStrictMode)(t,e,t.opts.strictTypes)}class m7{constructor(e,n,r){if((0,Yf.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,xo.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",y7(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Yf.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",He.default.errors))}result(e,n,r){this.failResult((0,Me.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,Me.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,Me._)`${n} !== undefined && (${(0,Me.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?uf.reportExtraError:uf.reportError)(this,this.def.error,n)}$dataError(){(0,uf.reportError)(this,this.def.$dataError||uf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,uf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=Me.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=Me.nil,n=Me.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:o}=this;r.if((0,Me.or)((0,Me._)`${s} === undefined`,n)),e!==Me.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==Me.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,Me.or)(o(),a());function o(){if(r.length){if(!(n instanceof Me.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,Me._)`${(0,E0.checkDataTypes)(c,n,i.opts.strictNumbers,E0.DataType.Wrong)}`}return Me.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Me._)`!${c}(${n})`}return Me.nil}}subschema(e,n){const r=(0,R1.getSubschema)(this.it,e);(0,R1.extendSubschemaData)(r,this.it,e),(0,R1.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return gX(s,n),s}mergeEvaluated(e,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=xo.mergeEvaluated.props(s,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=xo.mergeEvaluated.items(s,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(e,Me.Name)),!0}}Ei.KeywordCxt=m7;function g7(t,e,n,r){const s=new m7(t,n,e);"code"in n?n.code(s,r):s.$data&&n.validate?(0,Yf.funcKeywordCode)(s,n):"macro"in n?(0,Yf.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,Yf.funcKeywordCode)(s,n)}const NX=/^\/(?:[^~]|~0|~1)*$/,RX=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function y7(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let s,i;if(t==="")return He.default.rootData;if(t[0]==="/"){if(!NX.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=He.default.rootData}else{const d=RX.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);const f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(c("property/index",f));return r[e-f]}if(f>e)throw new Error(c("data",f));if(i=n[e-f],!s)return i}let o=i;const a=s.split("/");for(const d of a)d&&(i=(0,Me._)`${i}${(0,Me.getProperty)((0,xo.unescapeJsonPointer)(d))}`,o=(0,Me._)`${o} && ${i}`);return o;function c(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}Ei.getData=y7;var sp={};Object.defineProperty(sp,"__esModule",{value:!0});class OX extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}sp.default=OX;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});const O1=or;class IX extends Error{constructor(e,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,O1.resolveUrl)(e,n,r),this.missingSchema=(0,O1.normalizeId)((0,O1.getFullPath)(e,this.missingRef))}}wd.default=IX;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.resolveSchema=es.getCompilingSchema=es.resolveRef=es.compileSchema=es.SchemaEnv=void 0;const oi=nt,AX=sp,ml=to,wi=or,H6=Ce,MX=Ei;class Ay{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,wi.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}es.SchemaEnv=Ay;function s3(t){const e=v7.call(this,t);if(e)return e;const n=(0,wi.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new oi.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:AX.default,code:(0,oi._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const d={gen:o,allErrors:this.opts.allErrors,data:ml.default.data,parentData:ml.default.parentData,parentDataProperty:ml.default.parentDataProperty,dataNames:[ml.default.data],dataPathArr:[oi.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,oi.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:oi.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,oi._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(t),(0,MX.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);const m=o.toString();f=`${o.scopeRefs(ml.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));const v=new Function(`${ml.default.self}`,`${ml.default.scope}`,f)(this,this.scope.get());if(this.scope.value(c,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:c,validateCode:m,scopeValues:o._values}),this.opts.unevaluated){const{props:_,items:E}=d;v.evaluated={props:_ instanceof oi.Name?void 0:_,items:E instanceof oi.Name?void 0:E,dynamicProps:_ instanceof oi.Name,dynamicItems:E instanceof oi.Name},v.source&&(v.source.evaluated=(0,oi.stringify)(v.evaluated))}return t.validate=v,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}es.compileSchema=s3;function jX(t,e,n){var r;n=(0,wi.resolveUrl)(this.opts.uriResolver,e,n);const s=t.refs[n];if(s)return s;let i=FX.call(this,t,n);if(i===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new Ay({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[n]=zX.call(this,i)}es.resolveRef=jX;function zX(t){return(0,wi.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:s3.call(this,t)}function v7(t){for(const e of this._compilations)if(DX(e,t))return e}es.getCompilingSchema=v7;function DX(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function FX(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||My.call(this,t,e)}function My(t,e){const n=this.opts.uriResolver.parse(e),r=(0,wi._getFullPath)(this.opts.uriResolver,n);let s=(0,wi.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===s)return I1.call(this,n,t);const i=(0,wi.normalizeId)(r),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=My.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:I1.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||s3.call(this,o),i===(0,wi.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,d=a[c];return d&&(s=(0,wi.resolveUrl)(this.opts.uriResolver,s,d)),new Ay({schema:a,schemaId:c,root:t,baseId:s})}return I1.call(this,n,o)}}es.resolveSchema=My;const LX=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function I1(t,{baseId:e,schema:n,root:r}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,H6.unescapeFragment)(a)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!LX.has(a)&&d&&(e=(0,wi.resolveUrl)(this.opts.uriResolver,e,d))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,H6.schemaHasRulesButRef)(n,this.RULES)){const a=(0,wi.resolveUrl)(this.opts.uriResolver,e,n.$ref);i=My.call(this,r,a)}const{schemaId:o}=this.opts;if(i=i||new Ay({schema:n,schemaId:o,root:r,baseId:e}),i.schema!==i.root.schema)return i}const UX="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",VX="Meta-schema for $data reference (JSON AnySchema extension proposal)",GX="object",HX=["$data"],qX={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},BX=!1,ZX={$id:UX,description:VX,type:GX,required:HX,properties:qX,additionalProperties:BX};var i3={};Object.defineProperty(i3,"__esModule",{value:!0});const _7=xR;_7.code='require("ajv/dist/runtime/uri").default';i3.default=_7;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Ei;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=nt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=sp,s=wd,i=iu,o=es,a=nt,c=or,d=Fn,f=Ce,m=ZX,y=i3,v=(L,I)=>new RegExp(L,I);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function g(L){var I,U,z,b,T,M,O,F,Z,le,ce,W,X,dt,Fe,Re,Je,gt,vn,Vt,$t,Nn,Pn,fn,as;const Rn=L.strict,Ks=(I=L.code)===null||I===void 0?void 0:I.optimize,fr=Ks===!0||Ks===void 0?1:Ks||0,nl=(z=(U=L.code)===null||U===void 0?void 0:U.regExp)!==null&&z!==void 0?z:v,Nd=(b=L.uriResolver)!==null&&b!==void 0?b:y.default;return{strictSchema:(M=(T=L.strictSchema)!==null&&T!==void 0?T:Rn)!==null&&M!==void 0?M:!0,strictNumbers:(F=(O=L.strictNumbers)!==null&&O!==void 0?O:Rn)!==null&&F!==void 0?F:!0,strictTypes:(le=(Z=L.strictTypes)!==null&&Z!==void 0?Z:Rn)!==null&&le!==void 0?le:"log",strictTuples:(W=(ce=L.strictTuples)!==null&&ce!==void 0?ce:Rn)!==null&&W!==void 0?W:"log",strictRequired:(dt=(X=L.strictRequired)!==null&&X!==void 0?X:Rn)!==null&&dt!==void 0?dt:!1,code:L.code?{...L.code,optimize:fr,regExp:nl}:{optimize:fr,regExp:nl},loopRequired:(Fe=L.loopRequired)!==null&&Fe!==void 0?Fe:w,loopEnum:(Re=L.loopEnum)!==null&&Re!==void 0?Re:w,meta:(Je=L.meta)!==null&&Je!==void 0?Je:!0,messages:(gt=L.messages)!==null&&gt!==void 0?gt:!0,inlineRefs:(vn=L.inlineRefs)!==null&&vn!==void 0?vn:!0,schemaId:(Vt=L.schemaId)!==null&&Vt!==void 0?Vt:"$id",addUsedSchema:($t=L.addUsedSchema)!==null&&$t!==void 0?$t:!0,validateSchema:(Nn=L.validateSchema)!==null&&Nn!==void 0?Nn:!0,validateFormats:(Pn=L.validateFormats)!==null&&Pn!==void 0?Pn:!0,unicodeRegExp:(fn=L.unicodeRegExp)!==null&&fn!==void 0?fn:!0,int32range:(as=L.int32range)!==null&&as!==void 0?as:!0,uriResolver:Nd}}class C{constructor(I={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,I=this.opts={...I,...g(I)};const{es5:U,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:U,lines:z}),this.logger=Q(I.logger);const b=I.validateFormats;I.validateFormats=!1,this.RULES=(0,i.getRules)(),$.call(this,k,I,"NOT SUPPORTED"),$.call(this,p,I,"DEPRECATED","warn"),this._metaOpts=V.call(this),I.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),I.keywords&&G.call(this,I.keywords),typeof I.meta=="object"&&this.addMetaSchema(I.meta),j.call(this),I.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:I,meta:U,schemaId:z}=this.opts;let b=m;z==="id"&&(b={...m},b.id=b.$id,delete b.$id),U&&I&&this.addMetaSchema(b,b[z],!1)}defaultMeta(){const{meta:I,schemaId:U}=this.opts;return this.opts.defaultMeta=typeof I=="object"?I[U]||I:void 0}validate(I,U){let z;if(typeof I=="string"){if(z=this.getSchema(I),!z)throw new Error(`no schema with key or ref "${I}"`)}else z=this.compile(I);const b=z(U);return"$async"in z||(this.errors=z.errors),b}compile(I,U){const z=this._addSchema(I,U);return z.validate||this._compileSchemaEnv(z)}compileAsync(I,U){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return b.call(this,I,U);async function b(le,ce){await T.call(this,le.$schema);const W=this._addSchema(le,ce);return W.validate||M.call(this,W)}async function T(le){le&&!this.getSchema(le)&&await b.call(this,{$ref:le},!0)}async function M(le){try{return this._compileSchemaEnv(le)}catch(ce){if(!(ce instanceof s.default))throw ce;return O.call(this,ce),await F.call(this,ce.missingSchema),M.call(this,le)}}function O({missingSchema:le,missingRef:ce}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ce} cannot be resolved`)}async function F(le){const ce=await Z.call(this,le);this.refs[le]||await T.call(this,ce.$schema),this.refs[le]||this.addSchema(ce,le,U)}async function Z(le){const ce=this._loading[le];if(ce)return ce;try{return await(this._loading[le]=z(le))}finally{delete this._loading[le]}}}addSchema(I,U,z,b=this.opts.validateSchema){if(Array.isArray(I)){for(const M of I)this.addSchema(M,void 0,z,b);return this}let T;if(typeof I=="object"){const{schemaId:M}=this.opts;if(T=I[M],T!==void 0&&typeof T!="string")throw new Error(`schema ${M} must be string`)}return U=(0,c.normalizeId)(U||T),this._checkUnique(U),this.schemas[U]=this._addSchema(I,z,U,b,!0),this}addMetaSchema(I,U,z=this.opts.validateSchema){return this.addSchema(I,U,!0,z),this}validateSchema(I,U){if(typeof I=="boolean")return!0;let z;if(z=I.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(z,I);if(!b&&U){const T="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(T);else throw new Error(T)}return b}getSchema(I){let U;for(;typeof(U=N.call(this,I))=="string";)I=U;if(U===void 0){const{schemaId:z}=this.opts,b=new o.SchemaEnv({schema:{},schemaId:z});if(U=o.resolveSchema.call(this,b,I),!U)return;this.refs[I]=U}return U.validate||this._compileSchemaEnv(U)}removeSchema(I){if(I instanceof RegExp)return this._removeAllSchemas(this.schemas,I),this._removeAllSchemas(this.refs,I),this;switch(typeof I){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const U=N.call(this,I);return typeof U=="object"&&this._cache.delete(U.schema),delete this.schemas[I],delete this.refs[I],this}case"object":{const U=I;this._cache.delete(U);let z=I[this.opts.schemaId];return z&&(z=(0,c.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(I){for(const U of I)this.addKeyword(U);return this}addKeyword(I,U){let z;if(typeof I=="string")z=I,typeof U=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),U.keyword=z);else if(typeof I=="object"&&U===void 0){if(U=I,z=U.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(se.call(this,z,U),!U)return(0,f.eachItem)(z,T=>ae.call(this,T)),this;Pe.call(this,U);const b={...U,type:(0,d.getJSONTypes)(U.type),schemaType:(0,d.getJSONTypes)(U.schemaType)};return(0,f.eachItem)(z,b.type.length===0?T=>ae.call(this,T,b):T=>b.type.forEach(M=>ae.call(this,T,b,M))),this}getKeyword(I){const U=this.RULES.all[I];return typeof U=="object"?U.definition:!!U}removeKeyword(I){const{RULES:U}=this;delete U.keywords[I],delete U.all[I];for(const z of U.rules){const b=z.rules.findIndex(T=>T.keyword===I);b>=0&&z.rules.splice(b,1)}return this}addFormat(I,U){return typeof U=="string"&&(U=new RegExp(U)),this.formats[I]=U,this}errorsText(I=this.errors,{separator:U=", ",dataVar:z="data"}={}){return!I||I.length===0?"No errors":I.map(b=>`${z}${b.instancePath} ${b.message}`).reduce((b,T)=>b+U+T)}$dataMetaSchema(I,U){const z=this.RULES.all;I=JSON.parse(JSON.stringify(I));for(const b of U){const T=b.split("/").slice(1);let M=I;for(const O of T)M=M[O];for(const O in z){const F=z[O];if(typeof F!="object")continue;const{$data:Z}=F.definition,le=M[O];Z&&le&&(M[O]=ue(le))}}return I}_removeAllSchemas(I,U){for(const z in I){const b=I[z];(!U||U.test(z))&&(typeof b=="string"?delete I[z]:b&&!b.meta&&(this._cache.delete(b.schema),delete I[z]))}}_addSchema(I,U,z,b=this.opts.validateSchema,T=this.opts.addUsedSchema){let M;const{schemaId:O}=this.opts;if(typeof I=="object")M=I[O];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof I!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(I);if(F!==void 0)return F;z=(0,c.normalizeId)(M||z);const Z=c.getSchemaRefs.call(this,I,z);return F=new o.SchemaEnv({schema:I,schemaId:O,meta:U,baseId:z,localRefs:Z}),this._cache.set(F.schema,F),T&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=F),b&&this.validateSchema(I,!0),F}_checkUnique(I){if(this.schemas[I]||this.refs[I])throw new Error(`schema with key or id "${I}" already exists`)}_compileSchemaEnv(I){if(I.meta?this._compileMetaSchema(I):o.compileSchema.call(this,I),!I.validate)throw new Error("ajv implementation error");return I.validate}_compileMetaSchema(I){const U=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,I)}finally{this.opts=U}}}C.ValidationError=r.default,C.MissingRefError=s.default,t.default=C;function $(L,I,U,z="error"){for(const b in L){const T=b;T in I&&this.logger[z](`${U}: option ${b}. ${L[T]}`)}}function N(L){return L=(0,c.normalizeId)(L),this.schemas[L]||this.refs[L]}function j(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const I in L)this.addSchema(L[I],I)}function A(){for(const L in this.opts.formats){const I=this.opts.formats[L];I&&this.addFormat(L,I)}}function G(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const I in L){const U=L[I];U.keyword||(U.keyword=I),this.addKeyword(U)}}function V(){const L={...this.opts};for(const I of _)delete L[I];return L}const H={log(){},warn(){},error(){}};function Q(L){if(L===!1)return H;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const ie=/^[a-z_$][a-z0-9_$:-]*$/i;function se(L,I){const{RULES:U}=this;if((0,f.eachItem)(L,z=>{if(U.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!ie.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function ae(L,I,U){var z;const b=I==null?void 0:I.post;if(U&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:T}=this;let M=b?T.post:T.rules.find(({type:F})=>F===U);if(M||(M={type:U,rules:[]},T.rules.push(M)),T.keywords[L]=!0,!I)return;const O={keyword:L,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ye.call(this,M,O,I.before):M.rules.push(O),T.all[L]=O,(z=I.implements)===null||z===void 0||z.forEach(F=>this.addKeyword(F))}function ye(L,I,U){const z=L.rules.findIndex(b=>b.keyword===U);z>=0?L.rules.splice(z,0,I):(L.rules.push(I),this.logger.warn(`rule ${U} is not defined`))}function Pe(L){let{metaSchema:I}=L;I!==void 0&&(L.$data&&this.opts.$data&&(I=ue(I)),L.validateSchema=this.compile(I,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(L){return{anyOf:[L,ee]}}})(UR);var o3={},a3={},l3={};Object.defineProperty(l3,"__esModule",{value:!0});const WX={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};l3.default=WX;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.callRef=ou.getValidate=void 0;const KX=wd,q6=ot,Qr=nt,Uu=to,B6=es,Dm=Ce,QX={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:d}=i;if((n==="#"||n==="#/")&&s===d.baseId)return m();const f=B6.resolveRef.call(c,d,s,n);if(f===void 0)throw new KX.default(r.opts.uriResolver,s,n);if(f instanceof B6.SchemaEnv)return y(f);return v(f);function m(){if(i===d)return wg(t,o,i,i.$async);const _=e.scopeValue("root",{ref:d});return wg(t,(0,Qr._)`${_}.validate`,d,d.$async)}function y(_){const E=w7(t,_);wg(t,E,_,_.$async)}function v(_){const E=e.scopeValue("schema",a.code.source===!0?{ref:_,code:(0,Qr.stringify)(_)}:{ref:_}),k=e.name("valid"),p=t.subschema({schema:_,dataTypes:[],schemaPath:Qr.nil,topSchemaRef:E,errSchemaPath:n},k);t.mergeEvaluated(p),t.ok(k)}}};function w7(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Qr._)`${n.scopeValue("wrapper",{ref:e})}.validate`}ou.getValidate=w7;function wg(t,e,n,r){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,d=c.passContext?Uu.default.this:Qr.nil;r?f():m();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");const _=s.let("valid");s.try(()=>{s.code((0,Qr._)`await ${(0,q6.callValidateCode)(t,e,d)}`),v(e),o||s.assign(_,!0)},E=>{s.if((0,Qr._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),y(E),o||s.assign(_,!1)}),t.ok(_)}function m(){t.result((0,q6.callValidateCode)(t,e,d),()=>v(e),()=>y(e))}function y(_){const E=(0,Qr._)`${_}.errors`;s.assign(Uu.default.vErrors,(0,Qr._)`${Uu.default.vErrors} === null ? ${E} : ${Uu.default.vErrors}.concat(${E})`),s.assign(Uu.default.errors,(0,Qr._)`${Uu.default.vErrors}.length`)}function v(_){var E;if(!i.opts.unevaluated)return;const k=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(i.props=Dm.mergeEvaluated.props(s,k.props,i.props));else{const p=s.var("props",(0,Qr._)`${_}.evaluated.props`);i.props=Dm.mergeEvaluated.props(s,p,i.props,Qr.Name)}if(i.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(i.items=Dm.mergeEvaluated.items(s,k.items,i.items));else{const p=s.var("items",(0,Qr._)`${_}.evaluated.items`);i.items=Dm.mergeEvaluated.items(s,p,i.items,Qr.Name)}}}ou.callRef=wg;ou.default=QX;Object.defineProperty(a3,"__esModule",{value:!0});const YX=l3,XX=ou,JX=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",YX.default,XX.default];a3.default=JX;var u3={},c3={};Object.defineProperty(c3,"__esModule",{value:!0});const C0=nt,sa=C0.operators,P0={maximum:{okStr:"<=",ok:sa.LTE,fail:sa.GT},minimum:{okStr:">=",ok:sa.GTE,fail:sa.LT},exclusiveMaximum:{okStr:"<",ok:sa.LT,fail:sa.GTE},exclusiveMinimum:{okStr:">",ok:sa.GT,fail:sa.LTE}},eJ={message:({keyword:t,schemaCode:e})=>(0,C0.str)`must be ${P0[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,C0._)`{comparison: ${P0[t].okStr}, limit: ${e}}`},tJ={keyword:Object.keys(P0),type:"number",schemaType:"number",$data:!0,error:eJ,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,C0._)`${n} ${P0[e].fail} ${r} || isNaN(${n})`)}};c3.default=tJ;var d3={};Object.defineProperty(d3,"__esModule",{value:!0});const Xf=nt,nJ={message:({schemaCode:t})=>(0,Xf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Xf._)`{multipleOf: ${t}}`},rJ={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:nJ,code(t){const{gen:e,data:n,schemaCode:r,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Xf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Xf._)`${o} !== parseInt(${o})`;t.fail$data((0,Xf._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};d3.default=rJ;var f3={},h3={};Object.defineProperty(h3,"__esModule",{value:!0});function S7(t){const e=t.length;let n=0,r=0,s;for(;r<e;)n++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<e&&(s=t.charCodeAt(r),(s&64512)===56320&&r++);return n}h3.default=S7;S7.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(f3,"__esModule",{value:!0});const Pl=nt,sJ=Ce,iJ=h3,oJ={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,Pl.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,Pl._)`{limit: ${t}}`},aJ={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:oJ,code(t){const{keyword:e,data:n,schemaCode:r,it:s}=t,i=e==="maxLength"?Pl.operators.GT:Pl.operators.LT,o=s.opts.unicode===!1?(0,Pl._)`${n}.length`:(0,Pl._)`${(0,sJ.useFunc)(t.gen,iJ.default)}(${n})`;t.fail$data((0,Pl._)`${o} ${i} ${r}`)}};f3.default=aJ;var p3={};Object.defineProperty(p3,"__esModule",{value:!0});const lJ=ot,$0=nt,uJ={message:({schemaCode:t})=>(0,$0.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,$0._)`{pattern: ${t}}`},cJ={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:uJ,code(t){const{data:e,$data:n,schema:r,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=n?(0,$0._)`(new RegExp(${s}, ${o}))`:(0,lJ.usePattern)(t,r);t.fail$data((0,$0._)`!${a}.test(${e})`)}};p3.default=cJ;var m3={};Object.defineProperty(m3,"__esModule",{value:!0});const Jf=nt,dJ={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,Jf.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,Jf._)`{limit: ${t}}`},fJ={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:dJ,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxProperties"?Jf.operators.GT:Jf.operators.LT;t.fail$data((0,Jf._)`Object.keys(${n}).length ${s} ${r}`)}};m3.default=fJ;var g3={};Object.defineProperty(g3,"__esModule",{value:!0});const cf=ot,eh=nt,hJ=Ce,pJ={message:({params:{missingProperty:t}})=>(0,eh.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,eh._)`{missingProperty: ${t}}`},mJ={keyword:"required",type:"object",schemaType:"array",$data:!0,error:pJ,code(t){const{gen:e,schema:n,schemaCode:r,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&n.length===0)return;const c=n.length>=a.loopRequired;if(o.allErrors?d():f(),a.strictRequired){const v=t.parentSchema.properties,{definedProperties:_}=t.it;for(const E of n)if((v==null?void 0:v[E])===void 0&&!_.has(E)){const k=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${E}" is not defined at "${k}" (strictRequired)`;(0,hJ.checkStrictMode)(o,p,o.opts.strictRequired)}}function d(){if(c||i)t.block$data(eh.nil,m);else for(const v of n)(0,cf.checkReportMissingProp)(t,v)}function f(){const v=e.let("missing");if(c||i){const _=e.let("valid",!0);t.block$data(_,()=>y(v,_)),t.ok(_)}else e.if((0,cf.checkMissingProp)(t,n,v)),(0,cf.reportMissingProp)(t,v),e.else()}function m(){e.forOf("prop",r,v=>{t.setParams({missingProperty:v}),e.if((0,cf.noPropertyInData)(e,s,v,a.ownProperties),()=>t.error())})}function y(v,_){t.setParams({missingProperty:v}),e.forOf(v,r,()=>{e.assign(_,(0,cf.propertyInData)(e,s,v,a.ownProperties)),e.if((0,eh.not)(_),()=>{t.error(),e.break()})},eh.nil)}}};g3.default=mJ;var y3={};Object.defineProperty(y3,"__esModule",{value:!0});const th=nt,gJ={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,th.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,th._)`{limit: ${t}}`},yJ={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gJ,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxItems"?th.operators.GT:th.operators.LT;t.fail$data((0,th._)`${n}.length ${s} ${r}`)}};y3.default=yJ;var v3={},ip={};Object.defineProperty(ip,"__esModule",{value:!0});const k7=$y;k7.code='require("ajv/dist/runtime/equal").default';ip.default=k7;Object.defineProperty(v3,"__esModule",{value:!0});const A1=Fn,nr=nt,vJ=Ce,_J=ip,wJ={message:({params:{i:t,j:e}})=>(0,nr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,nr._)`{i: ${t}, j: ${e}}`},SJ={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:wJ,code(t){const{gen:e,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!r&&!s)return;const c=e.let("valid"),d=i.items?(0,A1.getSchemaTypes)(i.items):[];t.block$data(c,f,(0,nr._)`${o} === false`),t.ok(c);function f(){const _=e.let("i",(0,nr._)`${n}.length`),E=e.let("j");t.setParams({i:_,j:E}),e.assign(c,!0),e.if((0,nr._)`${_} > 1`,()=>(m()?y:v)(_,E))}function m(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function y(_,E){const k=e.name("item"),p=(0,A1.checkDataTypes)(d,k,a.opts.strictNumbers,A1.DataType.Wrong),w=e.const("indices",(0,nr._)`{}`);e.for((0,nr._)`;${_}--;`,()=>{e.let(k,(0,nr._)`${n}[${_}]`),e.if(p,(0,nr._)`continue`),d.length>1&&e.if((0,nr._)`typeof ${k} == "string"`,(0,nr._)`${k} += "_"`),e.if((0,nr._)`typeof ${w}[${k}] == "number"`,()=>{e.assign(E,(0,nr._)`${w}[${k}]`),t.error(),e.assign(c,!1).break()}).code((0,nr._)`${w}[${k}] = ${_}`)})}function v(_,E){const k=(0,vJ.useFunc)(e,_J.default),p=e.name("outer");e.label(p).for((0,nr._)`;${_}--;`,()=>e.for((0,nr._)`${E} = ${_}; ${E}--;`,()=>e.if((0,nr._)`${k}(${n}[${_}], ${n}[${E}])`,()=>{t.error(),e.assign(c,!1).break(p)})))}}};v3.default=SJ;var _3={};Object.defineProperty(_3,"__esModule",{value:!0});const K2=nt,kJ=Ce,bJ=ip,EJ={message:"must be equal to constant",params:({schemaCode:t})=>(0,K2._)`{allowedValue: ${t}}`},CJ={keyword:"const",$data:!0,error:EJ,code(t){const{gen:e,data:n,$data:r,schemaCode:s,schema:i}=t;r||i&&typeof i=="object"?t.fail$data((0,K2._)`!${(0,kJ.useFunc)(e,bJ.default)}(${n}, ${s})`):t.fail((0,K2._)`${i} !== ${n}`)}};_3.default=CJ;var w3={};Object.defineProperty(w3,"__esModule",{value:!0});const Tf=nt,PJ=Ce,$J=ip,TJ={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Tf._)`{allowedValues: ${t}}`},xJ={keyword:"enum",schemaType:"array",$data:!0,error:TJ,code(t){const{gen:e,data:n,$data:r,schema:s,schemaCode:i,it:o}=t;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const d=()=>c??(c=(0,PJ.useFunc)(e,$J.default));let f;if(a||r)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const v=e.const("vSchema",i);f=(0,Tf.or)(...s.map((_,E)=>y(v,E)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",i,v=>e.if((0,Tf._)`${d()}(${n}, ${v})`,()=>e.assign(f,!0).break()))}function y(v,_){const E=s[_];return typeof E=="object"&&E!==null?(0,Tf._)`${d()}(${n}, ${v}[${_}])`:(0,Tf._)`${n} === ${E}`}}};w3.default=xJ;Object.defineProperty(u3,"__esModule",{value:!0});const NJ=c3,RJ=d3,OJ=f3,IJ=p3,AJ=m3,MJ=g3,jJ=y3,zJ=v3,DJ=_3,FJ=w3,LJ=[NJ.default,RJ.default,OJ.default,IJ.default,AJ.default,MJ.default,jJ.default,zJ.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},DJ.default,FJ.default];u3.default=LJ;var S3={},Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});Sd.validateAdditionalItems=void 0;const $l=nt,Q2=Ce,UJ={message:({params:{len:t}})=>(0,$l.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,$l._)`{limit: ${t}}`},VJ={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:UJ,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,Q2.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}b7(t,r)}};function b7(t,e){const{gen:n,schema:r,data:s,keyword:i,it:o}=t;o.items=!0;const a=n.const("len",(0,$l._)`${s}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,$l._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,Q2.alwaysValidSchema)(o,r)){const d=n.var("valid",(0,$l._)`${a} <= ${e.length}`);n.if((0,$l.not)(d),()=>c(d)),t.ok(d)}function c(d){n.forRange("i",e.length,a,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:Q2.Type.Num},d),o.allErrors||n.if((0,$l.not)(d),()=>n.break())})}}Sd.validateAdditionalItems=b7;Sd.default=VJ;var k3={},kd={};Object.defineProperty(kd,"__esModule",{value:!0});kd.validateTuple=void 0;const Z6=nt,Sg=Ce,GJ=ot,HJ={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return E7(t,"additionalItems",e);n.items=!0,!(0,Sg.alwaysValidSchema)(n,e)&&t.ok((0,GJ.validateArray)(t))}};function E7(t,e,n=t.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=t;f(s),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=Sg.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),d=r.const("len",(0,Z6._)`${i}.length`);n.forEach((m,y)=>{(0,Sg.alwaysValidSchema)(a,m)||(r.if((0,Z6._)`${d} > ${y}`,()=>t.subschema({keyword:o,schemaProp:y,dataProp:y},c)),t.ok(c))});function f(m){const{opts:y,errSchemaPath:v}=a,_=n.length,E=_===m.minItems&&(_===m.maxItems||m[e]===!1);if(y.strictTuples&&!E){const k=`"${o}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;(0,Sg.checkStrictMode)(a,k,y.strictTuples)}}}kd.validateTuple=E7;kd.default=HJ;Object.defineProperty(k3,"__esModule",{value:!0});const qJ=kd,BJ={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,qJ.validateTuple)(t,"items")};k3.default=BJ;var b3={};Object.defineProperty(b3,"__esModule",{value:!0});const W6=nt,ZJ=Ce,WJ=ot,KJ=Sd,QJ={message:({params:{len:t}})=>(0,W6.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,W6._)`{limit: ${t}}`},YJ={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:QJ,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:s}=n;r.items=!0,!(0,ZJ.alwaysValidSchema)(r,e)&&(s?(0,KJ.validateAdditionalItems)(t,s):t.ok((0,WJ.validateArray)(t)))}};b3.default=YJ;var E3={};Object.defineProperty(E3,"__esModule",{value:!0});const js=nt,Fm=Ce,XJ={message:({params:{min:t,max:e}})=>e===void 0?(0,js.str)`must contain at least ${t} valid item(s)`:(0,js.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,js._)`{minContains: ${t}}`:(0,js._)`{minContains: ${t}, maxContains: ${e}}`},JJ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:XJ,code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;let o,a;const{minContains:c,maxContains:d}=r;i.opts.next?(o=c===void 0?1:c,a=d):o=1;const f=e.const("len",(0,js._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Fm.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Fm.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Fm.alwaysValidSchema)(i,n)){let E=(0,js._)`${f} >= ${o}`;a!==void 0&&(E=(0,js._)`${E} && ${f} <= ${a}`),t.pass(E);return}i.items=!0;const m=e.name("valid");a===void 0&&o===1?v(m,()=>e.if(m,()=>e.break())):o===0?(e.let(m,!0),a!==void 0&&e.if((0,js._)`${s}.length > 0`,y)):(e.let(m,!1),y()),t.result(m,()=>t.reset());function y(){const E=e.name("_valid"),k=e.let("count",0);v(E,()=>e.if(E,()=>_(k)))}function v(E,k){e.forRange("i",0,f,p=>{t.subschema({keyword:"contains",dataProp:p,dataPropType:Fm.Type.Num,compositeRule:!0},E),k()})}function _(E){e.code((0,js._)`${E}++`),a===void 0?e.if((0,js._)`${E} >= ${o}`,()=>e.assign(m,!0).break()):(e.if((0,js._)`${E} > ${a}`,()=>e.assign(m,!1).break()),o===1?e.assign(m,!0):e.if((0,js._)`${E} >= ${o}`,()=>e.assign(m,!0)))}}};E3.default=JJ;var C7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=nt,n=Ce,r=ot;t.error={message:({params:{property:c,depsCount:d,deps:f}})=>{const m=d===1?"property":"properties";return(0,e.str)`must have ${m} ${f} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:f,missingProperty:m}})=>(0,e._)`{property: ${c},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${f}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[d,f]=i(c);o(c,d),a(c,f)}};function i({schema:c}){const d={},f={};for(const m in c){if(m==="__proto__")continue;const y=Array.isArray(c[m])?d:f;y[m]=c[m]}return[d,f]}function o(c,d=c.schema){const{gen:f,data:m,it:y}=c;if(Object.keys(d).length===0)return;const v=f.let("missing");for(const _ in d){const E=d[_];if(E.length===0)continue;const k=(0,r.propertyInData)(f,m,_,y.opts.ownProperties);c.setParams({property:_,depsCount:E.length,deps:E.join(", ")}),y.allErrors?f.if(k,()=>{for(const p of E)(0,r.checkReportMissingProp)(c,p)}):(f.if((0,e._)`${k} && (${(0,r.checkMissingProp)(c,E,v)})`),(0,r.reportMissingProp)(c,v),f.else())}}t.validatePropertyDeps=o;function a(c,d=c.schema){const{gen:f,data:m,keyword:y,it:v}=c,_=f.name("valid");for(const E in d)(0,n.alwaysValidSchema)(v,d[E])||(f.if((0,r.propertyInData)(f,m,E,v.opts.ownProperties),()=>{const k=c.subschema({keyword:y,schemaProp:E},_);c.mergeValidEvaluated(k,_)},()=>f.var(_,!0)),c.ok(_))}t.validateSchemaDeps=a,t.default=s})(C7);var C3={};Object.defineProperty(C3,"__esModule",{value:!0});const P7=nt,eee=Ce,tee={message:"property name must be valid",params:({params:t})=>(0,P7._)`{propertyName: ${t.propertyName}}`},nee={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:tee,code(t){const{gen:e,schema:n,data:r,it:s}=t;if((0,eee.alwaysValidSchema)(s,n))return;const i=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,P7.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};C3.default=nee;var jy={};Object.defineProperty(jy,"__esModule",{value:!0});const Lm=ot,ui=nt,ree=to,Um=Ce,see={message:"must NOT have additional properties",params:({params:t})=>(0,ui._)`{additionalProperty: ${t.additionalProperty}}`},iee={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:see,code(t){const{gen:e,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Um.alwaysValidSchema)(o,n))return;const d=(0,Lm.allSchemaProperties)(r.properties),f=(0,Lm.allSchemaProperties)(r.patternProperties);m(),t.ok((0,ui._)`${i} === ${ree.default.errors}`);function m(){e.forIn("key",s,k=>{!d.length&&!f.length?_(k):e.if(y(k),()=>_(k))})}function y(k){let p;if(d.length>8){const w=(0,Um.schemaRefOrVal)(o,r.properties,"properties");p=(0,Lm.isOwnProperty)(e,w,k)}else d.length?p=(0,ui.or)(...d.map(w=>(0,ui._)`${k} === ${w}`)):p=ui.nil;return f.length&&(p=(0,ui.or)(p,...f.map(w=>(0,ui._)`${(0,Lm.usePattern)(t,w)}.test(${k})`))),(0,ui.not)(p)}function v(k){e.code((0,ui._)`delete ${s}[${k}]`)}function _(k){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){v(k);return}if(n===!1){t.setParams({additionalProperty:k}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,Um.alwaysValidSchema)(o,n)){const p=e.name("valid");c.removeAdditional==="failing"?(E(k,p,!1),e.if((0,ui.not)(p),()=>{t.reset(),v(k)})):(E(k,p),a||e.if((0,ui.not)(p),()=>e.break()))}}function E(k,p,w){const g={keyword:"additionalProperties",dataProp:k,dataPropType:Um.Type.Str};w===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,p)}}};jy.default=iee;var P3={};Object.defineProperty(P3,"__esModule",{value:!0});const oee=Ei,K6=ot,M1=Ce,Q6=jy,aee={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Q6.default.code(new oee.KeywordCxt(i,Q6.default,"additionalProperties"));const o=(0,K6.allSchemaProperties)(n);for(const m of o)i.definedProperties.add(m);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=M1.mergeEvaluated.props(e,(0,M1.toHash)(o),i.props));const a=o.filter(m=>!(0,M1.alwaysValidSchema)(i,n[m]));if(a.length===0)return;const c=e.name("valid");for(const m of a)d(m)?f(m):(e.if((0,K6.propertyInData)(e,s,m,i.opts.ownProperties)),f(m),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(c);function d(m){return i.opts.useDefaults&&!i.compositeRule&&n[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},c)}}};P3.default=aee;var $3={};Object.defineProperty($3,"__esModule",{value:!0});const Y6=ot,Vm=nt,X6=Ce,J6=Ce,lee={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,Y6.allSchemaProperties)(n),c=a.filter(E=>(0,X6.alwaysValidSchema)(i,n[E]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const d=o.strictSchema&&!o.allowMatchingProperties&&s.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof Vm.Name)&&(i.props=(0,J6.evaluatedPropsToName)(e,i.props));const{props:m}=i;y();function y(){for(const E of a)d&&v(E),i.allErrors?_(E):(e.var(f,!0),_(E),e.if(f))}function v(E){for(const k in d)new RegExp(E).test(k)&&(0,X6.checkStrictMode)(i,`property ${k} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){e.forIn("key",r,k=>{e.if((0,Vm._)`${(0,Y6.usePattern)(t,E)}.test(${k})`,()=>{const p=c.includes(E);p||t.subschema({keyword:"patternProperties",schemaProp:E,dataProp:k,dataPropType:J6.Type.Str},f),i.opts.unevaluated&&m!==!0?e.assign((0,Vm._)`${m}[${k}]`,!0):!p&&!i.allErrors&&e.if((0,Vm.not)(f),()=>e.break())})})}}};$3.default=lee;var T3={};Object.defineProperty(T3,"__esModule",{value:!0});const uee=Ce,cee={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,uee.alwaysValidSchema)(r,n)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};T3.default=cee;var x3={};Object.defineProperty(x3,"__esModule",{value:!0});const dee=ot,fee={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:dee.validateUnion,error:{message:"must match a schema in anyOf"}};x3.default=fee;var N3={};Object.defineProperty(N3,"__esModule",{value:!0});const kg=nt,hee=Ce,pee={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,kg._)`{passingSchemas: ${t.passing}}`},mee={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:pee,code(t){const{gen:e,schema:n,parentSchema:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(o,()=>t.reset(),()=>t.error(!0));function d(){i.forEach((f,m)=>{let y;(0,hee.alwaysValidSchema)(s,f)?e.var(c,!0):y=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},c),m>0&&e.if((0,kg._)`${c} && ${o}`).assign(o,!1).assign(a,(0,kg._)`[${a}, ${m}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,m),y&&t.mergeEvaluated(y,kg.Name)})})}}};N3.default=mee;var R3={};Object.defineProperty(R3,"__esModule",{value:!0});const gee=Ce,yee={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=e.name("valid");n.forEach((i,o)=>{if((0,gee.alwaysValidSchema)(r,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};R3.default=yee;var O3={};Object.defineProperty(O3,"__esModule",{value:!0});const T0=nt,$7=Ce,vee={message:({params:t})=>(0,T0.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,T0._)`{failingKeyword: ${t.ifClause}}`},_ee={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vee,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,$7.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=e9(r,"then"),i=e9(r,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){const f=e.let("ifClause");t.setParams({ifClause:f}),e.if(a,d("then",f),d("else",f))}else s?e.if(a,d("then")):e.if((0,T0.not)(a),d("else"));t.pass(o,()=>t.error(!0));function c(){const f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(f)}function d(f,m){return()=>{const y=t.subschema({keyword:f},a);e.assign(o,a),t.mergeValidEvaluated(y,o),m?e.assign(m,(0,T0._)`${f}`):t.setParams({ifClause:f})}}}};function e9(t,e){const n=t.schema[e];return n!==void 0&&!(0,$7.alwaysValidSchema)(t,n)}O3.default=_ee;var I3={};Object.defineProperty(I3,"__esModule",{value:!0});const wee=Ce,See={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,wee.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};I3.default=See;Object.defineProperty(S3,"__esModule",{value:!0});const kee=Sd,bee=k3,Eee=kd,Cee=b3,Pee=E3,$ee=C7,Tee=C3,xee=jy,Nee=P3,Ree=$3,Oee=T3,Iee=x3,Aee=N3,Mee=R3,jee=O3,zee=I3;function Dee(t=!1){const e=[Oee.default,Iee.default,Aee.default,Mee.default,jee.default,zee.default,Tee.default,xee.default,$ee.default,Nee.default,Ree.default];return t?e.push(bee.default,Cee.default):e.push(kee.default,Eee.default),e.push(Pee.default),e}S3.default=Dee;var A3={},M3={};Object.defineProperty(M3,"__esModule",{value:!0});const Sn=nt,Fee={message:({schemaCode:t})=>(0,Sn.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Sn._)`{format: ${t}}`},Lee={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Fee,code(t,e){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:f,self:m}=a;if(!c.validateFormats)return;s?y():v();function y(){const _=n.scopeValue("formats",{ref:m.formats,code:c.code.formats}),E=n.const("fDef",(0,Sn._)`${_}[${o}]`),k=n.let("fType"),p=n.let("format");n.if((0,Sn._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(k,(0,Sn._)`${E}.type || "string"`).assign(p,(0,Sn._)`${E}.validate`),()=>n.assign(k,(0,Sn._)`"string"`).assign(p,E)),t.fail$data((0,Sn.or)(w(),g()));function w(){return c.strictSchema===!1?Sn.nil:(0,Sn._)`${o} && !${p}`}function g(){const C=f.$async?(0,Sn._)`(${E}.async ? await ${p}(${r}) : ${p}(${r}))`:(0,Sn._)`${p}(${r})`,$=(0,Sn._)`(typeof ${p} == "function" ? ${C} : ${p}.test(${r}))`;return(0,Sn._)`${p} && ${p} !== true && ${k} === ${e} && !${$}`}}function v(){const _=m.formats[i];if(!_){w();return}if(_===!0)return;const[E,k,p]=g(_);E===e&&t.pass(C());function w(){if(c.strictSchema===!1){m.logger.warn($());return}throw new Error($());function $(){return`unknown format "${i}" ignored in schema at path "${d}"`}}function g($){const N=$ instanceof RegExp?(0,Sn.regexpCode)($):c.code.formats?(0,Sn._)`${c.code.formats}${(0,Sn.getProperty)(i)}`:void 0,j=n.scopeValue("formats",{key:i,ref:$,code:N});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,Sn._)`${j}.validate`]:["string",$,j]}function C(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!f.$async)throw new Error("async format in sync schema");return(0,Sn._)`await ${p}(${r})`}return typeof k=="function"?(0,Sn._)`${p}(${r})`:(0,Sn._)`${p}.test(${r})`}}}};M3.default=Lee;Object.defineProperty(A3,"__esModule",{value:!0});const Uee=M3,Vee=[Uee.default];A3.default=Vee;var id={};Object.defineProperty(id,"__esModule",{value:!0});id.contentVocabulary=id.metadataVocabulary=void 0;id.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];id.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(o3,"__esModule",{value:!0});const Gee=a3,Hee=u3,qee=S3,Bee=A3,t9=id,Zee=[Gee.default,Hee.default,(0,qee.default)(),Bee.default,t9.metadataVocabulary,t9.contentVocabulary];o3.default=Zee;var j3={},zy={};Object.defineProperty(zy,"__esModule",{value:!0});zy.DiscrError=void 0;var n9;(function(t){t.Tag="tag",t.Mapping="mapping"})(n9||(zy.DiscrError=n9={}));Object.defineProperty(j3,"__esModule",{value:!0});const Ju=nt,Y2=zy,r9=es,Wee=wd,Kee=Ce,Qee={message:({params:{discrError:t,tagName:e}})=>t===Y2.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Ju._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},Yee={keyword:"discriminator",type:"object",schemaType:"object",error:Qee,code(t){const{gen:e,data:n,schema:r,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),d=e.const("tag",(0,Ju._)`${n}${(0,Ju.getProperty)(a)}`);e.if((0,Ju._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:Y2.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function f(){const v=y();e.if(!1);for(const _ in v)e.elseIf((0,Ju._)`${d} === ${_}`),e.assign(c,m(v[_]));e.else(),t.error(!1,{discrError:Y2.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function m(v){const _=e.name("valid"),E=t.subschema({keyword:"oneOf",schemaProp:v},_);return t.mergeEvaluated(E,Ju.Name),_}function y(){var v;const _={},E=p(s);let k=!0;for(let C=0;C<o.length;C++){let $=o[C];if($!=null&&$.$ref&&!(0,Kee.schemaHasRulesButRef)($,i.self.RULES)){const j=$.$ref;if($=r9.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,j),$ instanceof r9.SchemaEnv&&($=$.schema),$===void 0)throw new Wee.default(i.opts.uriResolver,i.baseId,j)}const N=(v=$==null?void 0:$.properties)===null||v===void 0?void 0:v[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(E||p($)),w(N,C)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return _;function p({required:C}){return Array.isArray(C)&&C.includes(a)}function w(C,$){if(C.const)g(C.const,$);else if(C.enum)for(const N of C.enum)g(N,$);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(C,$){if(typeof C!="string"||C in _)throw new Error(`discriminator: "${a}" values must be unique strings`);_[C]=$}}}};j3.default=Yee;const Xee="http://json-schema.org/draft-07/schema#",Jee="http://json-schema.org/draft-07/schema#",ete="Core schema meta-schema",tte={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},nte=["object","boolean"],rte={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},ste={$schema:Xee,$id:Jee,title:ete,definitions:tte,type:nte,properties:rte,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=UR,r=o3,s=j3,i=ste,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var d=Ei;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var f=nt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var m=sp;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return m.default}});var y=wd;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(H2,H2.exports);var ite=H2.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=ite,n=nt,r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:a,schemaCode:c})=>(0,n.str)`should be ${s[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>(0,n._)`{comparison: ${s[a].okStr}, limit: ${c}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(a){const{gen:c,data:d,schemaCode:f,keyword:m,it:y}=a,{opts:v,self:_}=y;if(!v.validateFormats)return;const E=new e.KeywordCxt(y,_.RULES.all.format.definition,"format");E.$data?k():p();function k(){const g=c.scopeValue("formats",{ref:_.formats,code:v.code.formats}),C=c.const("fmt",(0,n._)`${g}[${E.schemaCode}]`);a.fail$data((0,n.or)((0,n._)`typeof ${C} != "object"`,(0,n._)`${C} instanceof RegExp`,(0,n._)`typeof ${C}.compare != "function"`,w(C)))}function p(){const g=E.schema,C=_.formats[g];if(!C||C===!0)return;if(typeof C!="object"||C instanceof RegExp||typeof C.compare!="function")throw new Error(`"${m}": format "${g}" does not define "compare" function`);const $=c.scopeValue("formats",{key:g,ref:C,code:v.code.formats?(0,n._)`${v.code.formats}${(0,n.getProperty)(g)}`:void 0});a.fail$data(w($))}function w(g){return(0,n._)`${g}.compare(${d}, ${f}) ${s[m].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(t.formatLimitDefinition),a);t.default=o})(LR);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=FR,r=LR,s=nt,i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(d,f={keywords:!0})=>{if(Array.isArray(f))return c(d,f,n.fullFormats,i),d;const[m,y]=f.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,i],v=f.formats||n.formatNames;return c(d,v,m,y),f.keywords&&(0,r.default)(d),d};a.get=(d,f="full")=>{const y=(f==="fast"?n.fastFormats:n.fullFormats)[d];if(!y)throw new Error(`Unknown format "${d}"`);return y};function c(d,f,m,y){var v,_;(v=(_=d.opts.code).formats)!==null&&v!==void 0||(_.formats=(0,s._)`require("ajv-formats/dist/formats").${y}`);for(const E of f)d.addFormat(E,m[E])}t.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a})(G2,G2.exports);var ote=G2.exports;const ate=Fh(ote);function lte(){const t=new WQ({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return ate(t),t}class ute{constructor(e){this._ajv=e??lte()}getValidator(e){const n="$id"in e&&typeof e.$id=="string"?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return r=>n(r)?{valid:!0,data:r,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}}class cte{constructor(e){this._client=e}async*callToolStream(e,n=Cy,r){const s=this._client,i={...r,task:(r==null?void 0:r.task)??(s.isToolTask(e.name)?{}:void 0)},o=s.requestStream({method:"tools/call",params:e},n,i),a=s.getToolOutputValidator(e.name);for await(const c of o){if(c.type==="result"&&a){const d=c.result;if(!d.structuredContent&&!d.isError){yield{type:"error",error:new Le(We.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)};return}if(d.structuredContent)try{const f=a(d.structuredContent);if(!f.valid){yield{type:"error",error:new Le(We.InvalidParams,`Structured content does not match the tool's output schema: ${f.errorMessage}`)};return}}catch(f){if(f instanceof Le){yield{type:"error",error:f};return}yield{type:"error",error:new Le(We.InvalidParams,`Failed to validate structured content: ${f instanceof Error?f.message:String(f)}`)};return}}yield c}}async getTask(e,n){return this._client.getTask({taskId:e},n)}async getTaskResult(e,n,r){return this._client.getTaskResult({taskId:e},n,r)}async listTasks(e,n){return this._client.listTasks(e?{cursor:e}:void 0,n)}async cancelTask(e,n){return this._client.cancelTask({taskId:e},n)}requestStream(e,n,r){return this._client.requestStream(e,n,r)}}function dte(t,e,n){var r;if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"tools/call":if(!((r=t.tools)!=null&&r.call))throw new Error(`${n} does not support task creation for tools/call (required for ${e})`);break}}function fte(t,e,n){var r,s;if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"sampling/createMessage":if(!((r=t.sampling)!=null&&r.createMessage))throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${e})`);break;case"elicitation/create":if(!((s=t.elicitation)!=null&&s.create))throw new Error(`${n} does not support task creation for elicitation/create (required for ${e})`);break}}function bg(t,e){if(!(!t||e===null||typeof e!="object")){if(t.type==="object"&&t.properties&&typeof t.properties=="object"){const n=e,r=t.properties;for(const s of Object.keys(r)){const i=r[s];n[s]===void 0&&Object.prototype.hasOwnProperty.call(i,"default")&&(n[s]=i.default),n[s]!==void 0&&bg(i,n[s])}}if(Array.isArray(t.anyOf))for(const n of t.anyOf)typeof n!="boolean"&&bg(n,e);if(Array.isArray(t.oneOf))for(const n of t.oneOf)typeof n!="boolean"&&bg(n,e)}}function hte(t){if(!t)return{supportsFormMode:!1,supportsUrlMode:!1};const e=t.form!==void 0,n=t.url!==void 0;return{supportsFormMode:e||!e&&!n,supportsUrlMode:n}}class pte extends iB{constructor(e,n){super(n),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=(n==null?void 0:n.capabilities)??{},this._jsonSchemaValidator=(n==null?void 0:n.jsonSchemaValidator)??new ute,n!=null&&n.listChanged&&(this._pendingListChangedConfig=n.listChanged)}_setupListChangedHandlers(e){var n,r,s,i,o,a;e.tools&&((r=(n=this._serverCapabilities)==null?void 0:n.tools)!=null&&r.listChanged)&&this._setupListChangedHandler("tools",MN,e.tools,async()=>(await this.listTools()).tools),e.prompts&&((i=(s=this._serverCapabilities)==null?void 0:s.prompts)!=null&&i.listChanged)&&this._setupListChangedHandler("prompts",ON,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&((a=(o=this._serverCapabilities)==null?void 0:o.resources)!=null&&a.listChanged)&&this._setupListChangedHandler("resources",xN,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new cte(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=oB(this._capabilities,e)}setRequestHandler(e,n){var a;const r=pN(e),s=r==null?void 0:r.method;if(!s)throw new Error("Schema is missing a method literal");let i;if(Sy(s)){const c=s,d=(a=c._zod)==null?void 0:a.def;i=(d==null?void 0:d.value)??c.value}else{const c=s,d=c._def;i=(d==null?void 0:d.value)??c.value}if(typeof i!="string")throw new Error("Schema method literal must be a string");const o=i;if(o==="elicitation/create"){const c=async(d,f)=>{var g,C;const m=da(qf,d);if(!m.success){const $=m.error instanceof Error?m.error.message:String(m.error);throw new Le(We.InvalidParams,`Invalid elicitation request: ${$}`)}const{params:y}=m.data;y.mode=y.mode??"form";const{supportsFormMode:v,supportsUrlMode:_}=hte(this._capabilities.elicitation);if(y.mode==="form"&&!v)throw new Le(We.InvalidParams,"Client does not support form-mode elicitation requests");if(y.mode==="url"&&!_)throw new Le(We.InvalidParams,"Client does not support URL-mode elicitation requests");const E=await Promise.resolve(n(d,f));if(y.task){const $=da(Th,E);if(!$.success){const N=$.error instanceof Error?$.error.message:String($.error);throw new Le(We.InvalidParams,`Invalid task creation result: ${N}`)}return $.data}const k=da(FN,E);if(!k.success){const $=k.error instanceof Error?k.error.message:String(k.error);throw new Le(We.InvalidParams,`Invalid elicitation result: ${$}`)}const p=k.data,w=y.mode==="form"?y.requestedSchema:void 0;if(y.mode==="form"&&p.action==="accept"&&p.content&&w&&(C=(g=this._capabilities.elicitation)==null?void 0:g.form)!=null&&C.applyDefaults)try{bg(w,p.content)}catch{}return p};return super.setRequestHandler(e,c)}if(o==="sampling/createMessage"){const c=async(d,f)=>{const m=da(Hf,d);if(!m.success){const p=m.error instanceof Error?m.error.message:String(m.error);throw new Le(We.InvalidParams,`Invalid sampling request: ${p}`)}const{params:y}=m.data,v=await Promise.resolve(n(d,f));if(y.task){const p=da(Th,v);if(!p.success){const w=p.error instanceof Error?p.error.message:String(p.error);throw new Le(We.InvalidParams,`Invalid task creation result: ${w}`)}return p.data}const E=y.tools||y.toolChoice?DN:zN,k=da(E,v);if(!k.success){const p=k.error instanceof Error?k.error.message:String(k.error);throw new Le(We.InvalidParams,`Invalid sampling result: ${p}`)}return k.data};return super.setRequestHandler(e,c)}return super.setRequestHandler(e,n)}assertCapability(e,n){var r;if(!((r=this._serverCapabilities)!=null&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{const r=await this.request({method:"initialize",params:{protocolVersion:ky,capabilities:this._capabilities,clientInfo:this._clientInfo}},wN,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!PH.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,s,i,o;switch(e){case"logging/setLevel":if(!((n=this._serverCapabilities)!=null&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!((r=this._serverCapabilities)!=null&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!((s=this._serverCapabilities)!=null&&s.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!((i=this._serverCapabilities)!=null&&i.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!((o=this._serverCapabilities)!=null&&o.completions))throw new Error(`Server does not support completions (required for ${e})`);break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!((n=this._capabilities.roots)!=null&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break}}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${e})`);break}}assertTaskCapability(e){var n,r;dte((r=(n=this._serverCapabilities)==null?void 0:n.tasks)==null?void 0:r.requests,e,"Server")}assertTaskHandlerCapability(e){var n;this._capabilities&&fte((n=this._capabilities.tasks)==null?void 0:n.requests,e,"Client")}async ping(e){return this.request({method:"ping"},yc,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},LN,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},yc,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},RN,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},NN,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},PN,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},$N,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},TN,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},yc,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},yc,n)}async callTool(e,n=Cy,r){if(this.isToolTaskRequired(e.name))throw new Le(We.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const s=await this.request({method:"tools/call",params:e},n,r),i=this.getToolOutputValidator(e.name);if(i){if(!s.structuredContent&&!s.isError)throw new Le(We.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{const o=i(s.structuredContent);if(!o.valid)throw new Le(We.InvalidParams,`Structured content does not match the tool's output schema: ${o.errorMessage}`)}catch(o){throw o instanceof Le?o:new Le(We.InvalidParams,`Failed to validate structured content: ${o instanceof Error?o.message:String(o)}`)}}return s}isToolTask(e){var n,r,s,i;return(i=(s=(r=(n=this._serverCapabilities)==null?void 0:n.tasks)==null?void 0:r.requests)==null?void 0:s.tools)!=null&&i.call?this._cachedKnownTaskTools.has(e):!1}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){var n;this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const r of e){if(r.outputSchema){const i=this._jsonSchemaValidator.getValidator(r.outputSchema);this._cachedToolOutputValidators.set(r.name,i)}const s=(n=r.execution)==null?void 0:n.taskSupport;(s==="required"||s==="optional")&&this._cachedKnownTaskTools.add(r.name),s==="required"&&this._cachedRequiredTaskTools.add(r.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,n){const r=await this.request({method:"tools/list",params:e},AN,n);return this.cacheToolMetadata(r.tools),r}_setupListChangedHandler(e,n,r,s){const i=wq.safeParse(r);if(!i.success)throw new Error(`Invalid ${e} listChanged options: ${i.error.message}`);if(typeof r.onChanged!="function")throw new Error(`Invalid ${e} listChanged options: onChanged must be a function`);const{autoRefresh:o,debounceMs:a}=i.data,{onChanged:c}=r,d=async()=>{if(!o){c(null,null);return}try{const m=await s();c(null,m)}catch(m){const y=m instanceof Error?m:new Error(String(m));c(y,null)}},f=()=>{if(a){const m=this._listChangedDebounceTimers.get(e);m&&clearTimeout(m);const y=setTimeout(d,a);this._listChangedDebounceTimers.set(e,y)}else d()};this.setNotificationHandler(n,f)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}class s9 extends Error{constructor(e,n){super(e),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function j1(t){}function T7(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=j1,onError:n=j1,onRetry:r=j1,onComment:s}=t;let i="",o=!0,a,c="",d="";function f(E){const k=o?E.replace(/^\xEF\xBB\xBF/,""):E,[p,w]=mte(`${i}${k}`);for(const g of p)m(g);i=w,o=!1}function m(E){if(E===""){v();return}if(E.startsWith(":")){s&&s(E.slice(E.startsWith(": ")?2:1));return}const k=E.indexOf(":");if(k!==-1){const p=E.slice(0,k),w=E[k+1]===" "?2:1,g=E.slice(k+w);y(p,g,E);return}y(E,"",E)}function y(E,k,p){switch(E){case"event":d=k;break;case"data":c=`${c}${k}
`;break;case"id":a=k.includes("\0")?void 0:k;break;case"retry":/^\d+$/.test(k)?r(parseInt(k,10)):n(new s9(`Invalid \`retry\` value: "${k}"`,{type:"invalid-retry",value:k,line:p}));break;default:n(new s9(`Unknown field "${E.length>20?`${E.slice(0,20)}`:E}"`,{type:"unknown-field",field:E,value:k,line:p}));break}}function v(){c.length>0&&e({id:a,event:d||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),a=void 0,c="",d=""}function _(E={}){i&&E.consume&&m(i),o=!0,a=void 0,c="",d="",i=""}return{feed:f,reset:_}}function mte(t){const e=[];let n="",r=0;for(;r<t.length;){const s=t.indexOf("\r",r),i=t.indexOf(`
`,r);let o=-1;if(s!==-1&&i!==-1?o=Math.min(s,i):s!==-1?s===t.length-1?o=-1:o=s:i!==-1&&(o=i),o===-1){n=t.slice(r);break}else{const a=t.slice(r,o);e.push(a),r=o+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,n]}class i9 extends Event{constructor(e,n){var r,s;super(e),this.code=(r=n==null?void 0:n.code)!=null?r:void 0,this.message=(s=n==null?void 0:n.message)!=null?s:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return r(o9(this),n)}[Symbol.for("Deno.customInspect")](e,n){return e(o9(this),n)}}function gte(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function X2(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(X2).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${X2(t.cause)}`:t.message:`${t}`}function o9(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var x7=t=>{throw TypeError(t)},z3=(t,e,n)=>e.has(t)||x7("Cannot "+n),ut=(t,e,n)=>(z3(t,e,"read from private field"),n?n.call(t):e.get(t)),An=(t,e,n)=>e.has(t)?x7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Xt=(t,e,n,r)=>(z3(t,e,"write to private field"),e.set(t,n),n),po=(t,e,n)=>(z3(t,e,"access private method"),n),Yr,Tl,ec,Eg,x0,nh,vc,rh,pa,tc,Nc,nc,xf,ci,J2,eS,tS,a9,nS,rS,Nf,sS,iS;class Cg extends EventTarget{constructor(e,n){var r,s;super(),An(this,ci),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,An(this,Yr),An(this,Tl),An(this,ec),An(this,Eg),An(this,x0),An(this,nh),An(this,vc),An(this,rh,null),An(this,pa),An(this,tc),An(this,Nc,null),An(this,nc,null),An(this,xf,null),An(this,eS,async i=>{var o;ut(this,tc).reset();const{body:a,redirected:c,status:d,headers:f}=i;if(d===204){po(this,ci,Nf).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?Xt(this,ec,new URL(i.url)):Xt(this,ec,void 0),d!==200){po(this,ci,Nf).call(this,`Non-200 status code (${d})`,d);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){po(this,ci,Nf).call(this,'Invalid content type, expected "text/event-stream"',d);return}if(ut(this,Yr)===this.CLOSED)return;Xt(this,Yr,this.OPEN);const m=new Event("open");if((o=ut(this,xf))==null||o.call(this,m),this.dispatchEvent(m),typeof a!="object"||!a||!("getReader"in a)){po(this,ci,Nf).call(this,"Invalid response body, expected a web ReadableStream",d),this.close();return}const y=new TextDecoder,v=a.getReader();let _=!0;do{const{done:E,value:k}=await v.read();k&&ut(this,tc).feed(y.decode(k,{stream:!E})),E&&(_=!1,ut(this,tc).reset(),po(this,ci,sS).call(this))}while(_)}),An(this,tS,i=>{Xt(this,pa,void 0),!(i.name==="AbortError"||i.type==="aborted")&&po(this,ci,sS).call(this,X2(i))}),An(this,nS,i=>{typeof i.id=="string"&&Xt(this,rh,i.id);const o=new MessageEvent(i.event||"message",{data:i.data,origin:ut(this,ec)?ut(this,ec).origin:ut(this,Tl).origin,lastEventId:i.id||""});ut(this,nc)&&(!i.event||i.event==="message")&&ut(this,nc).call(this,o),this.dispatchEvent(o)}),An(this,rS,i=>{Xt(this,nh,i)}),An(this,iS,()=>{Xt(this,vc,void 0),ut(this,Yr)===this.CONNECTING&&po(this,ci,J2).call(this)});try{if(e instanceof URL)Xt(this,Tl,e);else if(typeof e=="string")Xt(this,Tl,new URL(e,yte()));else throw new Error("Invalid URL")}catch{throw gte("An invalid or illegal string was specified")}Xt(this,tc,T7({onEvent:ut(this,nS),onRetry:ut(this,rS)})),Xt(this,Yr,this.CONNECTING),Xt(this,nh,3e3),Xt(this,x0,(r=n==null?void 0:n.fetch)!=null?r:globalThis.fetch),Xt(this,Eg,(s=n==null?void 0:n.withCredentials)!=null?s:!1),po(this,ci,J2).call(this)}get readyState(){return ut(this,Yr)}get url(){return ut(this,Tl).href}get withCredentials(){return ut(this,Eg)}get onerror(){return ut(this,Nc)}set onerror(e){Xt(this,Nc,e)}get onmessage(){return ut(this,nc)}set onmessage(e){Xt(this,nc,e)}get onopen(){return ut(this,xf)}set onopen(e){Xt(this,xf,e)}addEventListener(e,n,r){const s=n;super.addEventListener(e,s,r)}removeEventListener(e,n,r){const s=n;super.removeEventListener(e,s,r)}close(){ut(this,vc)&&clearTimeout(ut(this,vc)),ut(this,Yr)!==this.CLOSED&&(ut(this,pa)&&ut(this,pa).abort(),Xt(this,Yr,this.CLOSED),Xt(this,pa,void 0))}}Yr=new WeakMap,Tl=new WeakMap,ec=new WeakMap,Eg=new WeakMap,x0=new WeakMap,nh=new WeakMap,vc=new WeakMap,rh=new WeakMap,pa=new WeakMap,tc=new WeakMap,Nc=new WeakMap,nc=new WeakMap,xf=new WeakMap,ci=new WeakSet,J2=function(){Xt(this,Yr,this.CONNECTING),Xt(this,pa,new AbortController),ut(this,x0)(ut(this,Tl),po(this,ci,a9).call(this)).then(ut(this,eS)).catch(ut(this,tS))},eS=new WeakMap,tS=new WeakMap,a9=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ut(this,rh)?{"Last-Event-ID":ut(this,rh)}:void 0},cache:"no-store",signal:(t=ut(this,pa))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},nS=new WeakMap,rS=new WeakMap,Nf=function(t,e){var n;ut(this,Yr)!==this.CLOSED&&Xt(this,Yr,this.CLOSED);const r=new i9("error",{code:e,message:t});(n=ut(this,Nc))==null||n.call(this,r),this.dispatchEvent(r)},sS=function(t,e){var n;if(ut(this,Yr)===this.CLOSED)return;Xt(this,Yr,this.CONNECTING);const r=new i9("error",{code:e,message:t});(n=ut(this,Nc))==null||n.call(this,r),this.dispatchEvent(r),Xt(this,vc,setTimeout(ut(this,iS),ut(this,nh)))},iS=new WeakMap,Cg.CONNECTING=0,Cg.OPEN=1,Cg.CLOSED=2;function yte(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}function N0(t){return t?t instanceof Headers?Object.fromEntries(t.entries()):Array.isArray(t)?Object.fromEntries(t):{...t}:{}}function N7(t=fetch,e){return e?async(n,r)=>{const s={...e,...r,headers:r!=null&&r.headers?{...N0(e.headers),...N0(r.headers)}:e.headers};return t(n,s)}:t}let D3;D3=globalThis.crypto;async function vte(t){return(await D3).getRandomValues(new Uint8Array(t))}async function _te(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n=Math.pow(2,8)-Math.pow(2,8)%e.length;let r="";for(;r.length<t;){const s=await vte(t-r.length);for(const i of s)i<n&&(r+=e[i%e.length])}return r}async function wte(t){return await _te(t)}async function Ste(t){const e=await(await D3).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function kte(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;const e=await wte(t),n=await Ste(e);return{code_verifier:e,code_challenge:n}}const sr=xL().superRefine((t,e)=>{if(!URL.canParse(t))return e.addIssue({code:wU.custom,message:"URL must be parseable",fatal:!0}),Mz}).refine(t=>{const e=new URL(t);return e.protocol!=="javascript:"&&e.protocol!=="data:"&&e.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),bte=Qn({resource:B().url(),authorization_servers:ge(sr).optional(),jwks_uri:B().url().optional(),scopes_supported:ge(B()).optional(),bearer_methods_supported:ge(B()).optional(),resource_signing_alg_values_supported:ge(B()).optional(),resource_name:B().optional(),resource_documentation:B().optional(),resource_policy_uri:B().url().optional(),resource_tos_uri:B().url().optional(),tls_client_certificate_bound_access_tokens:Ut().optional(),authorization_details_types_supported:ge(B()).optional(),dpop_signing_alg_values_supported:ge(B()).optional(),dpop_bound_access_tokens_required:Ut().optional()}),R7=Qn({issuer:B(),authorization_endpoint:sr,token_endpoint:sr,registration_endpoint:sr.optional(),scopes_supported:ge(B()).optional(),response_types_supported:ge(B()),response_modes_supported:ge(B()).optional(),grant_types_supported:ge(B()).optional(),token_endpoint_auth_methods_supported:ge(B()).optional(),token_endpoint_auth_signing_alg_values_supported:ge(B()).optional(),service_documentation:sr.optional(),revocation_endpoint:sr.optional(),revocation_endpoint_auth_methods_supported:ge(B()).optional(),revocation_endpoint_auth_signing_alg_values_supported:ge(B()).optional(),introspection_endpoint:B().optional(),introspection_endpoint_auth_methods_supported:ge(B()).optional(),introspection_endpoint_auth_signing_alg_values_supported:ge(B()).optional(),code_challenge_methods_supported:ge(B()).optional(),client_id_metadata_document_supported:Ut().optional()}),Ete=Qn({issuer:B(),authorization_endpoint:sr,token_endpoint:sr,userinfo_endpoint:sr.optional(),jwks_uri:sr,registration_endpoint:sr.optional(),scopes_supported:ge(B()).optional(),response_types_supported:ge(B()),response_modes_supported:ge(B()).optional(),grant_types_supported:ge(B()).optional(),acr_values_supported:ge(B()).optional(),subject_types_supported:ge(B()),id_token_signing_alg_values_supported:ge(B()),id_token_encryption_alg_values_supported:ge(B()).optional(),id_token_encryption_enc_values_supported:ge(B()).optional(),userinfo_signing_alg_values_supported:ge(B()).optional(),userinfo_encryption_alg_values_supported:ge(B()).optional(),userinfo_encryption_enc_values_supported:ge(B()).optional(),request_object_signing_alg_values_supported:ge(B()).optional(),request_object_encryption_alg_values_supported:ge(B()).optional(),request_object_encryption_enc_values_supported:ge(B()).optional(),token_endpoint_auth_methods_supported:ge(B()).optional(),token_endpoint_auth_signing_alg_values_supported:ge(B()).optional(),display_values_supported:ge(B()).optional(),claim_types_supported:ge(B()).optional(),claims_supported:ge(B()).optional(),service_documentation:B().optional(),claims_locales_supported:ge(B()).optional(),ui_locales_supported:ge(B()).optional(),claims_parameter_supported:Ut().optional(),request_parameter_supported:Ut().optional(),request_uri_parameter_supported:Ut().optional(),require_request_uri_registration:Ut().optional(),op_policy_uri:sr.optional(),op_tos_uri:sr.optional(),client_id_metadata_document_supported:Ut().optional()}),Cte=ve({...Ete.shape,...R7.pick({code_challenge_methods_supported:!0}).shape}),Pte=ve({access_token:B(),id_token:B().optional(),token_type:B(),expires_in:SU().optional(),scope:B().optional(),refresh_token:B().optional()}).strip(),$te=ve({error:B(),error_description:B().optional(),error_uri:B().optional()}),l9=sr.optional().or(Se("").transform(()=>{})),Tte=ve({redirect_uris:ge(sr),token_endpoint_auth_method:B().optional(),grant_types:ge(B()).optional(),response_types:ge(B()).optional(),client_name:B().optional(),client_uri:sr.optional(),logo_uri:l9,scope:B().optional(),contacts:ge(B()).optional(),tos_uri:l9,policy_uri:B().optional(),jwks_uri:sr.optional(),jwks:KL().optional(),software_id:B().optional(),software_version:B().optional(),software_statement:B().optional()}).strip(),xte=ve({client_id:B(),client_secret:B().optional(),client_id_issued_at:Pt().optional(),client_secret_expires_at:Pt().optional()}).strip(),Nte=Tte.merge(xte);ve({error:B(),error_description:B().optional()}).strip();ve({token:B(),token_type_hint:B().optional()}).strip();function Rte(t){const e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}function Ote({requestedResource:t,configuredResource:e}){const n=typeof t=="string"?new URL(t):new URL(t.href),r=typeof e=="string"?new URL(e):new URL(e.href);if(n.origin!==r.origin||n.pathname.length<r.pathname.length)return!1;const s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return s.startsWith(i)}class Xn extends Error{constructor(e,n){super(e),this.errorUri=n,this.name=this.constructor.name}toResponseObject(){const e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class oS extends Xn{}oS.errorCode="invalid_request";class R0 extends Xn{}R0.errorCode="invalid_client";class O0 extends Xn{}O0.errorCode="invalid_grant";class I0 extends Xn{}I0.errorCode="unauthorized_client";class aS extends Xn{}aS.errorCode="unsupported_grant_type";class lS extends Xn{}lS.errorCode="invalid_scope";class uS extends Xn{}uS.errorCode="access_denied";class od extends Xn{}od.errorCode="server_error";class cS extends Xn{}cS.errorCode="temporarily_unavailable";class dS extends Xn{}dS.errorCode="unsupported_response_type";class fS extends Xn{}fS.errorCode="unsupported_token_type";class hS extends Xn{}hS.errorCode="invalid_token";class pS extends Xn{}pS.errorCode="method_not_allowed";class mS extends Xn{}mS.errorCode="too_many_requests";class A0 extends Xn{}A0.errorCode="invalid_client_metadata";class gS extends Xn{}gS.errorCode="insufficient_scope";class yS extends Xn{}yS.errorCode="invalid_target";const Ite={[oS.errorCode]:oS,[R0.errorCode]:R0,[O0.errorCode]:O0,[I0.errorCode]:I0,[aS.errorCode]:aS,[lS.errorCode]:lS,[uS.errorCode]:uS,[od.errorCode]:od,[cS.errorCode]:cS,[dS.errorCode]:dS,[fS.errorCode]:fS,[hS.errorCode]:hS,[pS.errorCode]:pS,[mS.errorCode]:mS,[A0.errorCode]:A0,[gS.errorCode]:gS,[yS.errorCode]:yS};class yi extends Error{constructor(e){super(e??"Unauthorized")}}function Ate(t){return["client_secret_basic","client_secret_post","none"].includes(t)}const z1="code",D1="S256";function Mte(t,e){const n=t.client_secret!==void 0;return e.length===0?n?"client_secret_post":"none":"token_endpoint_auth_method"in t&&t.token_endpoint_auth_method&&Ate(t.token_endpoint_auth_method)&&e.includes(t.token_endpoint_auth_method)?t.token_endpoint_auth_method:n&&e.includes("client_secret_basic")?"client_secret_basic":n&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":n?"client_secret_post":"none"}function jte(t,e,n,r){const{client_id:s,client_secret:i}=e;switch(t){case"client_secret_basic":zte(s,i,n);return;case"client_secret_post":Dte(s,i,r);return;case"none":Fte(s,r);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}function zte(t,e,n){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");const r=btoa(`${t}:${e}`);n.set("Authorization",`Basic ${r}`)}function Dte(t,e,n){n.set("client_id",t),e&&n.set("client_secret",e)}function Fte(t,e){e.set("client_id",t)}async function O7(t){const e=t instanceof Response?t.status:void 0,n=t instanceof Response?await t.text():t;try{const r=$te.parse(JSON.parse(n)),{error:s,error_description:i,error_uri:o}=r,a=Ite[s]||od;return new a(i||"",o)}catch(r){const s=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${r}. Raw body: ${n}`;return new od(s)}}async function Il(t,e){var n,r;try{return await F1(t,e)}catch(s){if(s instanceof R0||s instanceof I0)return await((n=t.invalidateCredentials)==null?void 0:n.call(t,"all")),await F1(t,e);if(s instanceof O0)return await((r=t.invalidateCredentials)==null?void 0:r.call(t,"tokens")),await F1(t,e);throw s}}async function F1(t,{serverUrl:e,authorizationCode:n,scope:r,resourceMetadataUrl:s,fetchFn:i}){var k,p;let o,a;try{o=await Vte(e,{resourceMetadataUrl:s},i),o.authorization_servers&&o.authorization_servers.length>0&&(a=o.authorization_servers[0])}catch{}a||(a=new URL("/",e));const c=await Ute(e,t,o),d=await Zte(a,{fetchFn:i});let f=await Promise.resolve(t.clientInformation());if(!f){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");const w=(d==null?void 0:d.client_id_metadata_document_supported)===!0,g=t.clientMetadataUrl;if(g&&!Lte(g))throw new A0(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${g}`);if(w&&g)f={client_id:g},await((k=t.saveClientInformation)==null?void 0:k.call(t,f));else{if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const $=await Xte(a,{metadata:d,clientMetadata:t.clientMetadata,fetchFn:i});await t.saveClientInformation($),f=$}}const m=!t.redirectUrl;if(n!==void 0||m){const w=await Yte(t,a,{metadata:d,resource:c,authorizationCode:n,fetchFn:i});return await t.saveTokens(w),"AUTHORIZED"}const y=await t.tokens();if(y!=null&&y.refresh_token)try{const w=await Qte(a,{metadata:d,clientInformation:f,refreshToken:y.refresh_token,resource:c,addClientAuthentication:t.addClientAuthentication,fetchFn:i});return await t.saveTokens(w),"AUTHORIZED"}catch(w){if(!(!(w instanceof Xn)||w instanceof od))throw w}const v=t.state?await t.state():void 0,{authorizationUrl:_,codeVerifier:E}=await Wte(a,{metadata:d,clientInformation:f,state:v,redirectUrl:t.redirectUrl,scope:r||((p=o==null?void 0:o.scopes_supported)==null?void 0:p.join(" "))||t.clientMetadata.scope,resource:c});return await t.saveCodeVerifier(E),await t.redirectToAuthorization(_),"REDIRECT"}function Lte(t){if(!t)return!1;try{const e=new URL(t);return e.protocol==="https:"&&e.pathname!=="/"}catch{return!1}}async function Ute(t,e,n){const r=Rte(t);if(e.validateResourceURL)return await e.validateResourceURL(r,n==null?void 0:n.resource);if(n){if(!Ote({requestedResource:r,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${r} (or origin)`);return new URL(n.resource)}}function M0(t){const e=t.headers.get("WWW-Authenticate");if(!e)return{};const[n,r]=e.split(" ");if(n.toLowerCase()!=="bearer"||!r)return{};const s=L1(t,"resource_metadata")||void 0;let i;if(s)try{i=new URL(s)}catch{}const o=L1(t,"scope")||void 0,a=L1(t,"error")||void 0;return{resourceMetadataUrl:i,scope:o,error:a}}function L1(t,e){const n=t.headers.get("WWW-Authenticate");if(!n)return null;const r=new RegExp(`${e}=(?:"([^"]+)"|([^\\s,]+))`),s=n.match(r);return s?s[1]||s[2]:null}async function Vte(t,e,n=fetch){var s,i;const r=await qte(t,"oauth-protected-resource",n,{protocolVersion:e==null?void 0:e.protocolVersion,metadataUrl:e==null?void 0:e.resourceMetadataUrl});if(!r||r.status===404)throw await((s=r==null?void 0:r.body)==null?void 0:s.cancel()),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!r.ok)throw await((i=r.body)==null?void 0:i.cancel()),new Error(`HTTP ${r.status} trying to load well-known OAuth protected resource metadata.`);return bte.parse(await r.json())}async function F3(t,e,n=fetch){try{return await n(t,{headers:e})}catch(r){if(r instanceof TypeError)return e?F3(t,void 0,n):void 0;throw r}}function Gte(t,e="",n={}){return e.endsWith("/")&&(e=e.slice(0,-1)),n.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}async function u9(t,e,n=fetch){return await F3(t,{"MCP-Protocol-Version":e},n)}function Hte(t,e){return!t||t.status>=400&&t.status<500&&e!=="/"}async function qte(t,e,n,r){const s=new URL(t),i=(r==null?void 0:r.protocolVersion)??ky;let o;if(r!=null&&r.metadataUrl)o=new URL(r.metadataUrl);else{const c=Gte(e,s.pathname);o=new URL(c,(r==null?void 0:r.metadataServerUrl)??s),o.search=s.search}let a=await u9(o,i,n);if(!(r!=null&&r.metadataUrl)&&Hte(a,s.pathname)){const c=new URL(`/.well-known/${e}`,s);a=await u9(c,i,n)}return a}function Bte(t){const e=typeof t=="string"?new URL(t):t,n=e.pathname!=="/",r=[];if(!n)return r.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),r.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),r;let s=e.pathname;return s.endsWith("/")&&(s=s.slice(0,-1)),r.push({url:new URL(`/.well-known/oauth-authorization-server${s}`,e.origin),type:"oauth"}),r.push({url:new URL(`/.well-known/openid-configuration${s}`,e.origin),type:"oidc"}),r.push({url:new URL(`${s}/.well-known/openid-configuration`,e.origin),type:"oidc"}),r}async function Zte(t,{fetchFn:e=fetch,protocolVersion:n=ky}={}){var i;const r={"MCP-Protocol-Version":n,Accept:"application/json"},s=Bte(t);for(const{url:o,type:a}of s){const c=await F3(o,r,e);if(c){if(!c.ok){if(await((i=c.body)==null?void 0:i.cancel()),c.status>=400&&c.status<500)continue;throw new Error(`HTTP ${c.status} trying to load ${a==="oauth"?"OAuth":"OpenID provider"} metadata from ${o}`)}return a==="oauth"?R7.parse(await c.json()):Cte.parse(await c.json())}}}async function Wte(t,{metadata:e,clientInformation:n,redirectUrl:r,scope:s,state:i,resource:o}){let a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(z1))throw new Error(`Incompatible auth server: does not support response type ${z1}`);if(e.code_challenge_methods_supported&&!e.code_challenge_methods_supported.includes(D1))throw new Error(`Incompatible auth server: does not support code challenge method ${D1}`)}else a=new URL("/authorize",t);const c=await kte(),d=c.code_verifier,f=c.code_challenge;return a.searchParams.set("response_type",z1),a.searchParams.set("client_id",n.client_id),a.searchParams.set("code_challenge",f),a.searchParams.set("code_challenge_method",D1),a.searchParams.set("redirect_uri",String(r)),i&&a.searchParams.set("state",i),s&&a.searchParams.set("scope",s),s!=null&&s.includes("offline_access")&&a.searchParams.append("prompt","consent"),o&&a.searchParams.set("resource",o.href),{authorizationUrl:a,codeVerifier:d}}function Kte(t,e,n){return new URLSearchParams({grant_type:"authorization_code",code:t,code_verifier:e,redirect_uri:String(n)})}async function I7(t,{metadata:e,tokenRequestParams:n,clientInformation:r,addClientAuthentication:s,resource:i,fetchFn:o}){const a=e!=null&&e.token_endpoint?new URL(e.token_endpoint):new URL("/token",t),c=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(i&&n.set("resource",i.href),s)await s(c,n,a,e);else if(r){const f=(e==null?void 0:e.token_endpoint_auth_methods_supported)??[],m=Mte(r,f);jte(m,r,c,n)}const d=await(o??fetch)(a,{method:"POST",headers:c,body:n});if(!d.ok)throw await O7(d);return Pte.parse(await d.json())}async function Qte(t,{metadata:e,clientInformation:n,refreshToken:r,resource:s,addClientAuthentication:i,fetchFn:o}){const a=new URLSearchParams({grant_type:"refresh_token",refresh_token:r}),c=await I7(t,{metadata:e,tokenRequestParams:a,clientInformation:n,addClientAuthentication:i,resource:s,fetchFn:o});return{refresh_token:r,...c}}async function Yte(t,e,{metadata:n,resource:r,authorizationCode:s,fetchFn:i}={}){const o=t.clientMetadata.scope;let a;if(t.prepareTokenRequest&&(a=await t.prepareTokenRequest(o)),!a){if(!s)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!t.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");const d=await t.codeVerifier();a=Kte(s,d,t.redirectUrl)}const c=await t.clientInformation();return I7(e,{metadata:n,tokenRequestParams:a,clientInformation:c??void 0,addClientAuthentication:t.addClientAuthentication,resource:r,fetchFn:i})}async function Xte(t,{metadata:e,clientMetadata:n,fetchFn:r}){let s;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(e.registration_endpoint)}else s=new URL("/register",t);const i=await(r??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw await O7(i);return Nte.parse(await i.json())}class Jte extends Error{constructor(e,n,r){super(`SSE error: ${n}`),this.code=e,this.event=r}}class ene{constructor(e,n){this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._eventSourceInit=n==null?void 0:n.eventSourceInit,this._requestInit=n==null?void 0:n.requestInit,this._authProvider=n==null?void 0:n.authProvider,this._fetch=n==null?void 0:n.fetch,this._fetchWithInit=N7(n==null?void 0:n.fetch,n==null?void 0:n.requestInit)}async _authThenStart(){var n;if(!this._authProvider)throw new yi("No auth provider");let e;try{e=await Il(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(r){throw(n=this.onerror)==null||n.call(this,r),r}if(e!=="AUTHORIZED")throw new yi;return await this._startOrAuth()}async _commonHeaders(){var r;const e={};if(this._authProvider){const s=await this._authProvider.tokens();s&&(e.Authorization=`Bearer ${s.access_token}`)}this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const n=N0((r=this._requestInit)==null?void 0:r.headers);return new Headers({...e,...n})}_startOrAuth(){var n;const e=((n=this==null?void 0:this._eventSourceInit)==null?void 0:n.fetch)??this._fetch??fetch;return new Promise((r,s)=>{this._eventSource=new Cg(this._url.href,{...this._eventSourceInit,fetch:async(i,o)=>{const a=await this._commonHeaders();a.set("Accept","text/event-stream");const c=await e(i,{...o,headers:a});if(c.status===401&&c.headers.has("www-authenticate")){const{resourceMetadataUrl:d,scope:f}=M0(c);this._resourceMetadataUrl=d,this._scope=f}return c}}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var a;if(i.code===401&&this._authProvider){this._authThenStart().then(r,s);return}const o=new Jte(i.code,i.message,i);s(o),(a=this.onerror)==null||a.call(this,o)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var a;const o=i;try{if(this._endpoint=new URL(o.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(c){s(c),(a=this.onerror)==null||a.call(this,c),this.close();return}r()}),this._eventSource.onmessage=i=>{var c,d;const o=i;let a;try{a=hg.parse(JSON.parse(o.data))}catch(f){(c=this.onerror)==null||c.call(this,f);return}(d=this.onmessage)==null||d.call(this,a)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new yi("No auth provider");if(await Il(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new yi("Failed to authorize")}async close(){var e,n,r;(e=this._abortController)==null||e.abort(),(n=this._eventSource)==null||n.close(),(r=this.onclose)==null||r.call(this)}async send(e){var n,r,s;if(!this._endpoint)throw new Error("Not connected");try{const i=await this._commonHeaders();i.set("content-type","application/json");const o={...this._requestInit,method:"POST",headers:i,body:JSON.stringify(e),signal:(n=this._abortController)==null?void 0:n.signal},a=await(this._fetch??fetch)(this._endpoint,o);if(!a.ok){const c=await a.text().catch(()=>null);if(a.status===401&&this._authProvider){const{resourceMetadataUrl:d,scope:f}=M0(a);if(this._resourceMetadataUrl=d,this._scope=f,await Il(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new yi;return this.send(e)}throw new Error(`Error POSTing to endpoint (HTTP ${a.status}): ${c}`)}await((r=a.body)==null?void 0:r.cancel())}catch(i){throw(s=this.onerror)==null||s.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}}class tne extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let s;super({start(i){s=T7({onEvent:o=>{i.enqueue(o)},onError(o){e==="terminate"?i.error(o):typeof e=="function"&&e(o)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}}const nne={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class Vu extends Error{constructor(e,n){super(`Streamable HTTP error: ${n}`),this.code=e}}class rne{constructor(e,n){this._hasCompletedAuthFlow=!1,this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=n==null?void 0:n.requestInit,this._authProvider=n==null?void 0:n.authProvider,this._fetch=n==null?void 0:n.fetch,this._fetchWithInit=N7(n==null?void 0:n.fetch,n==null?void 0:n.requestInit),this._sessionId=n==null?void 0:n.sessionId,this._reconnectionOptions=(n==null?void 0:n.reconnectionOptions)??nne}async _authThenStart(){var n;if(!this._authProvider)throw new yi("No auth provider");let e;try{e=await Il(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(r){throw(n=this.onerror)==null||n.call(this,r),r}if(e!=="AUTHORIZED")throw new yi;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var r;const e={};if(this._authProvider){const s=await this._authProvider.tokens();s&&(e.Authorization=`Bearer ${s.access_token}`)}this._sessionId&&(e["mcp-session-id"]=this._sessionId),this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const n=N0((r=this._requestInit)==null?void 0:r.headers);return new Headers({...e,...n})}async _startOrAuthSse(e){var r,s,i;const{resumptionToken:n}=e;try{const o=await this._commonHeaders();o.set("Accept","text/event-stream"),n&&o.set("last-event-id",n);const a=await(this._fetch??fetch)(this._url,{method:"GET",headers:o,signal:(r=this._abortController)==null?void 0:r.signal});if(!a.ok){if(await((s=a.body)==null?void 0:s.cancel()),a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new Vu(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e,!0)}catch(o){throw(i=this.onerror)==null||i.call(this,o),o}}_getNextReconnectionDelay(e){if(this._serverRetryMs!==void 0)return this._serverRetryMs;const n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,s=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,e),s)}_scheduleReconnection(e,n=0){var i;const r=this._reconnectionOptions.maxRetries;if(n>=r){(i=this.onerror)==null||i.call(this,new Error(`Maximum reconnection attempts (${r}) exceeded.`));return}const s=this._getNextReconnectionDelay(n);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(e).catch(o=>{var a;(a=this.onerror)==null||a.call(this,new Error(`Failed to reconnect SSE stream: ${o instanceof Error?o.message:String(o)}`)),this._scheduleReconnection(e,n+1)})},s)}_handleSseStream(e,n,r){if(!e)return;const{onresumptiontoken:s,replayMessageId:i}=n;let o,a=!1,c=!1;(async()=>{var f,m,y,v;try{const _=e.pipeThrough(new TextDecoderStream).pipeThrough(new tne({onRetry:p=>{this._serverRetryMs=p}})).getReader();for(;;){const{value:p,done:w}=await _.read();if(w)break;if(p.id&&(o=p.id,a=!0,s==null||s(p.id)),!!p.data&&(!p.event||p.event==="message"))try{const g=hg.parse(JSON.parse(p.data));Cf(g)&&(c=!0,i!==void 0&&(g.id=i)),(f=this.onmessage)==null||f.call(this,g)}catch(g){(m=this.onerror)==null||m.call(this,g)}}(r||a)&&!c&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:o,onresumptiontoken:s,replayMessageId:i},0)}catch(_){if((y=this.onerror)==null||y.call(this,new Error(`SSE stream disconnected: ${_}`)),(r||a)&&!c&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:s,replayMessageId:i},0)}catch(p){(v=this.onerror)==null||v.call(this,new Error(`Failed to reconnect: ${p instanceof Error?p.message:String(p)}`))}}})()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new yi("No auth provider");if(await Il(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new yi("Failed to authorize")}async close(){var e,n;this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),(e=this._abortController)==null||e.abort(),(n=this.onclose)==null||n.call(this)}async send(e,n){var r,s,i,o,a,c;try{const{resumptionToken:d,onresumptiontoken:f}=n||{};if(d){this._startOrAuthSse({resumptionToken:d,replayMessageId:A2(e)?e.id:void 0}).catch(w=>{var g;return(g=this.onerror)==null?void 0:g.call(this,w)});return}const m=await this._commonHeaders();m.set("content-type","application/json"),m.set("accept","application/json, text/event-stream");const y={...this._requestInit,method:"POST",headers:m,body:JSON.stringify(e),signal:(r=this._abortController)==null?void 0:r.signal},v=await(this._fetch??fetch)(this._url,y),_=v.headers.get("mcp-session-id");if(_&&(this._sessionId=_),!v.ok){const w=await v.text().catch(()=>null);if(v.status===401&&this._authProvider){if(this._hasCompletedAuthFlow)throw new Vu(401,"Server returned 401 after successful authentication");const{resourceMetadataUrl:g,scope:C}=M0(v);if(this._resourceMetadataUrl=g,this._scope=C,await Il(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new yi;return this._hasCompletedAuthFlow=!0,this.send(e)}if(v.status===403&&this._authProvider){const{resourceMetadataUrl:g,scope:C,error:$}=M0(v);if($==="insufficient_scope"){const N=v.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===N)throw new Vu(403,"Server returned 403 after trying upscoping");if(C&&(this._scope=C),g&&(this._resourceMetadataUrl=g),this._lastUpscopingHeader=N??void 0,await Il(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch})!=="AUTHORIZED")throw new yi;return this.send(e)}}throw new Vu(v.status,`Error POSTing to endpoint: ${w}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,v.status===202){await((s=v.body)==null?void 0:s.cancel()),VH(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(w=>{var g;return(g=this.onerror)==null?void 0:g.call(this,w)});return}const k=(Array.isArray(e)?e:[e]).filter(w=>"method"in w&&"id"in w&&w.id!==void 0).length>0,p=v.headers.get("content-type");if(k)if(p!=null&&p.includes("text/event-stream"))this._handleSseStream(v.body,{onresumptiontoken:f},!1);else if(p!=null&&p.includes("application/json")){const w=await v.json(),g=Array.isArray(w)?w.map(C=>hg.parse(C)):[hg.parse(w)];for(const C of g)(i=this.onmessage)==null||i.call(this,C)}else throw await((o=v.body)==null?void 0:o.cancel()),new Vu(-1,`Unexpected content type: ${p}`);else await((a=v.body)==null?void 0:a.cancel())}catch(d){throw(c=this.onerror)==null||c.call(this,d),d}}get sessionId(){return this._sessionId}async terminateSession(){var e,n,r;if(this._sessionId)try{const s=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:s,signal:(e=this._abortController)==null?void 0:e.signal},o=await(this._fetch??fetch)(this._url,i);if(await((n=o.body)==null?void 0:n.cancel()),!o.ok&&o.status!==405)throw new Vu(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(s){throw(r=this.onerror)==null||r.call(this,s),s}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}async resumeStream(e,n){await this._startOrAuthSse({resumptionToken:e,onresumptiontoken:n==null?void 0:n.onresumptiontoken})}}class L3{constructor(e,n,r,s,i,o={}){Rs(this,"client");Rs(this,"transport");Rs(this,"transportType");Rs(this,"sessionId");Rs(this,"endpoint");Rs(this,"headers");Rs(this,"authProvider");Rs(this,"handlers");this.endpoint=e,this.headers=r??{},this.authProvider=s,this.transportType=n,this.handlers=o,this.transport=this.initializeTransport(i),this.client=this.initializeClient()}static async create(e,n=Va.HTTP,r,s,i,o={}){const a=new L3(e,n,r,s,i,o);return await a.client.connect(a.transport),"sessionId"in a.transport&&(a.sessionId=a.transport.sessionId),a}initializeTransport(e){return this.transportType===Va.SSE?new ene(new URL(this.endpoint),{authProvider:this.authProvider,requestInit:{headers:this.headers}}):new rne(new URL(this.endpoint),{authProvider:this.authProvider,requestInit:{headers:this.headers},sessionId:e})}initializeClient(){const e=this.handlers.elicitation?{elicitation:{}}:{},n=this.handlers.sampling?{sampling:{}}:{},r=new pte({name:"tambo-mcp-client",version:"1.0.0"},{capabilities:{...e,...n}});return this.handlers.elicitation&&r.setRequestHandler(qf,this.handlers.elicitation),this.handlers.sampling&&r.setRequestHandler(Hf,this.handlers.sampling),r}async listTools(){const e=[];let n=!0,r;for(;n;){const s=await this.client.listTools({cursor:r},{});e.push(...s.tools.map(i=>{if(i.inputSchema.type!=="object")throw new Error(`Input schema for tool ${i.name} is not an object`);return{name:i.name,description:i.description,inputSchema:i.inputSchema}})),s.nextCursor?r=s.nextCursor:n=!1}return e}getServerCapabilities(){return this.client.getServerCapabilities()}getServerVersion(){return this.client.getServerVersion()}getInstructions(){return this.client.getInstructions()}async callTool(e,n,r){return await this.client.callTool({name:e,arguments:n,_meta:r})}updateElicitationHandler(e){if(e!==this.handlers.elicitation){if(e&&!this.handlers.elicitation)throw new Error("Elicitation handler must be set on create");if(this.handlers={...this.handlers,elicitation:e},!e){const n=qf.shape.method.value;this.client.removeRequestHandler(n);return}this.client.setRequestHandler(qf,e)}}updateSamplingHandler(e){if(e!==this.handlers.sampling){if(e&&!this.handlers.sampling)throw new Error("Sampling handler must be set on create");if(this.handlers={...this.handlers,sampling:e},!e){const n=Hf.shape.method.value;this.client.removeRequestHandler(n);return}this.client.setRequestHandler(Hf,e)}}async close(){await this.transport.close(),await this.client.close()}}function sne(t){if(t==null)return"Unknown error occurred";if(Array.isArray(t)){const e=t.filter(n=>(n==null?void 0:n.type)==="text"&&typeof n.text=="string").map(n=>n.text);return e.length>0?e.join(" "):"Error occurred but no details provided"}return typeof t=="object"?JSON.stringify(t):`${t}`}const A7=K.createContext({servers:[],elicitation:null,resolveElicitation:null}),ine="__tambo_internal_mcp_server__";function one(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return(e>>>0).toString(36)}function M7(t){var e;if((e=t==null?void 0:t.client)!=null&&e.close)try{const n=t.client.close();n&&typeof n.catch=="function"&&n.catch(r=>{const s=t.url??"(unknown url)";console.error(`Error closing MCP client for ${s}:`,r)})}catch(n){const r=t.url??"(unknown url)";console.error(`Error closing MCP client for ${r}:`,n)}}function ane(t,e,n){var s,i;const r={};return(s=t.handlers)!=null&&s.elicitation?r.elicitation=t.handlers.elicitation:e&&(r.elicitation=async(o,a)=>await e(o,a,t)),(i=t.handlers)!=null&&i.sampling?r.sampling=t.handlers.sampling:n&&(r.sampling=async(o,a)=>await n(o,a,t)),r}function lne(t,e,n){return K.useMemo(()=>{const r=new Map;if(t.forEach(s=>{const i=c9(s,Gf.BROWSER_SIDE);r.set(i.key,i)}),e&&n){const s=new URL(n);s.pathname=`${s.pathname.replace(/\/+$/,"")}/mcp`;const i=s.toString(),o=one(e),a={name:ine,url:i,transport:Va.HTTP,serverKey:`tambo-${o}`,customHeaders:{Authorization:`Bearer ${e}`}},c=c9(a,Gf.TAMBO_INTERNAL);r.set(c.key,c)}return r},[t,e,n])}async function une(t,e,n,r,s,i,o){const{toolOwnerRef:a,keyToToolsRef:c}=i;try{(await t.listTools()).forEach(f=>{const m=r?`${e.serverKey}__${f.name}`:f.name,y=a.current.get(m);y&&y!==n||(y||(a.current.set(m,n),c.current.has(n)||c.current.set(n,new Set),c.current.get(n).add(m)),o({description:f.description??"",name:m,tool:async(v={})=>{const _=s.get(n);if(!(_!=null&&_.client))throw new Error(`MCP server for tool ${f.name} is not connected`);const E=await _.client.callTool(f.name,v);if(E.isError){const k=sne(E.content);throw new Error(k)}return E.content},inputSchema:f.inputSchema??{},outputSchema:{},transformToContent:v=>dH(v)?v:[{type:"text",text:O2(v)}],..."maxCalls"in f&&f.maxCalls!==void 0?{maxCalls:f.maxCalls}:{}}))})}catch(d){console.error(`Failed to register tools from MCP server ${e.url}:`,d)}}function cne(t,e){const{toolOwnerRef:n,keyToToolsRef:r}=e,s=r.current.get(t);if(s){for(const i of s)n.current.delete(i);r.current.delete(t)}}const dne=({handlers:t,contextKey:e,children:n})=>{const{registerTool:r}=vy(),{mcpAccessToken:s,tamboBaseUrl:i}=kH(e),o=JG(),a=t==null?void 0:t.sampling,{elicitation:c,resolveElicitation:d,defaultElicitationHandler:f}=EH(),m=(t==null?void 0:t.elicitation)??f,y=K.useRef(new Map),v=K.useRef(new Map),_=K.useRef(new Map),E={toolOwnerRef:v,keyToToolsRef:_},[k,p]=K.useState([]),w=lne(o,s,i);fne(w,y,E,m,a,r,p),hne(w,y,m,a),pne(y,E);const g=K.useMemo(()=>({servers:k,elicitation:c,resolveElicitation:d}),[k,c,d]);return Ie.createElement(A7.Provider,{value:g},n)};function fne(t,e,n,r,s,i,o){K.useEffect(()=>{const a=e.current,c=new Set(t.keys()),d=new Set(a.keys()),f=Array.from(d).filter(v=>!c.has(v));f.forEach(v=>{const _=a.get(v);_&&M7(_),cne(v,n),a.delete(v)});const m=Array.from(c).filter(v=>!d.has(v));async function y(v){await Promise.allSettled(v.map(async _=>{const E=t.get(_);try{const k=ane(E,r,s),p=await L3.create(E.url,E.transport,E.customHeaders,void 0,void 0,k),w={...E,client:p};a.set(_,w),o(Array.from(a.values()));const g=t.size>1;await une(p,E,_,g,a,n,i)}catch(k){const p={...E,connectionError:k};a.set(_,p),o(Array.from(a.values())),console.error(`Failed to connect to MCP server ${E.url}:`,k)}}))}m.length>0&&y(m).catch(v=>{console.error("Unexpected error in addClients:",v)}),f.length>0&&o(Array.from(a.values()))},[t,r,s,i])}function hne(t,e,n,r){K.useEffect(()=>{e.current.forEach((i,o)=>{var f,m,y,v,_,E;if(!i.client)return;const a=t.get(o);if(!a)return;const c=((f=a.handlers)==null?void 0:f.elicitation)??(n?async(k,p)=>await n(k,p,a):void 0),d=((m=a.handlers)==null?void 0:m.sampling)??(r?async(k,p)=>await r(k,p,a):void 0);(v=(y=i.client).updateElicitationHandler)==null||v.call(y,c),(E=(_=i.client).updateSamplingHandler)==null||E.call(_,d)})},[t,n,r])}function pne(t,e){K.useEffect(()=>{const n=t.current,{toolOwnerRef:r,keyToToolsRef:s}=e;return()=>{n.forEach(i=>{M7(i)}),n.clear(),r.current.clear(),s.current.clear()}},[])}const mne=()=>K.useContext(A7).servers;function c9(t,e){const n=rN(t),r=t.handlers;return{...t,handlers:r,key:n,serverType:e}}const j7=K.createContext(null),d9="contextAttachments";function gne({children:t}){const{addContextHelper:e,removeContextHelper:n}=_y(),[r,s]=K.useState([]);K.useEffect(()=>(e(d9,()=>r.length===0?null:r.map(d=>({id:d.id,displayName:d.displayName,context:d.context,type:d.type}))),()=>{n(d9)}),[r,e,n]);const i=K.useCallback(d=>{const m={id:crypto.randomUUID(),displayName:d.displayName,context:d.context,type:d.type};return s(y=>[...y,m]),m},[]),o=K.useCallback(d=>{s(f=>f.filter(m=>m.id!==d))},[]),a=K.useCallback(()=>{s([])},[]),c=K.useMemo(()=>({attachments:r,addContextAttachment:i,removeContextAttachment:o,clearContextAttachments:a}),[r,i,o,a]);return Ie.createElement(j7.Provider,{value:c},t)}function yne(){const t=K.useContext(j7);if(!t)throw new Error("useTamboContextAttachment must be used within a TamboContextAttachmentProvider");return t}function vne(t){const e=nN();return FG(t,e)}class Gu extends vs{}const _ne=/@([a-zA-Z0-9-]+):(\S+)/g;function wne(t,e,n){var o;const r=[],s=Array.from(t.matchAll(_ne));let i=0;for(const a of s){const[c,d,f]=a,m=`${d}:${f}`;if(a.index!==void 0&&a.index>i){const E=t.slice(i,a.index);E.length>0&&r.push({type:"text",text:E})}const y={uri:f},v=e[m];v&&(y.name=v);const _=n==null?void 0:n.get(m);if((o=_==null?void 0:_.contents)!=null&&o[0]){const E=_.contents[0];"text"in E&&E.text?y.text=E.text:"blob"in E&&E.blob&&(y.blob=E.blob),"mimeType"in E&&E.mimeType&&(y.mimeType=E.mimeType)}r.push({type:"resource",resource:y}),a.index!==void 0&&(i=a.index+c.length)}if(i<t.length){const a=t.slice(i);a.length>0&&r.push({type:"text",text:a})}return r.length===0&&t.trim()&&r.push({type:"text",text:t}),r}function Sne(t,e,n={},r){const s=[];if(t.trim().length>0){const o=wne(t,n,r);s.push(...o)}for(const o of e)s.push({type:"image_url",image_url:{url:o.dataUrl}});if(s.length===0)throw new Error("Message must contain text or images");return s}function kne(t){return"client"in t&&t.client!=null}async function bne(t,e,n){const r=new Map,s=t.map(async i=>{const o=i.indexOf(":");if(o===-1)return;const a=i.slice(0,o),c=i.slice(o+1);try{if(a===uH){if(!n){console.warn(`No resource source available to resolve registry resource: ${i}`);return}const f=await n.getResource(c);f&&r.set(i,f);return}const d=e.find(f=>f.serverKey===a);if(!d){console.warn(`No server found for resource: ${i}`);return}switch(d.serverType){case Gf.TAMBO_INTERNAL:return;case Gf.TAMBO_REGISTRY:return;case Gf.BROWSER_SIDE:{if(!kne(d)){console.warn(`MCP server not connected for resource: ${i}`);return}const f=await d.client.client.readResource({uri:c});f&&r.set(i,f);return}}}catch(d){console.warn(`Failed to fetch resource content for ${i}:`,d)}});return await Promise.all(s),r}function Ene(t){const e=/@([a-zA-Z0-9-]+):(\S+)/g;return Array.from(t.matchAll(e)).map(([,r,s])=>`${r}:${s}`)}const f9={EMPTY:"Message cannot be empty",VALIDATION:"Invalid message format"},Cne=K.createContext(void 0),Pne=({children:t})=>{const{thread:e,sendThreadMessage:n,contextKey:r}=fN(),[s,i]=K.useState(""),o=aH(),a=mne(),{resourceSource:c}=vy(),{clearInteractableSelections:d}=lN(),f=K.useCallback(async({streamResponse:E,forceToolChoice:k,additionalContext:p,resourceNames:w={}}={})=>{if(s!=null&&s.trim()){const N=lH(s);if(!N.isValid)throw new Gu(`Cannot submit message: ${N.error??f9.VALIDATION}`,{cause:N.error})}if(!s.trim()&&o.images.length===0)throw new Gu(f9.EMPTY,{cause:"No text or images to send"});const g=Ene(s),C=await bne(g,a,c??void 0),$=Sne(s,o.images,w,C);try{await n(s||"Image message",{threadId:e.id,contextKey:r,streamResponse:E,forceToolChoice:k,additionalContext:p,content:$}),d()}catch(N){if(o.images.length>0){const j=N instanceof Error?N.message.toLowerCase():"";if(j.includes("unknown content part type: image"))throw new Gu("Image attachments are not yet supported by the backend. This feature is coming soon.",{cause:N});if(j.includes("does not support image message content types")||j.includes("invalid model")&&j.includes("image_url is only supported by certain models"))throw new Gu("This model doesn't support images. Please use GPT-4o, GPT-4 Turbo, or other vision-capable models.",{cause:N});if(j.includes("does not support image")||j.includes("vision not supported"))throw new Gu("This Claude model doesn't support images. Please use Claude 3.5 Sonnet, Claude 3 Opus, or other vision-capable models.",{cause:N});if(j.includes("image")||j.includes("vision"))throw new Gu("This model doesn't support image attachments. Please use a vision-capable model.",{cause:N})}throw N}i("")},[s,n,e.id,r,o,a,c,d]),{mutateAsync:m,mutate:y,...v}=vne({mutationFn:f}),_={...v,value:s,setValue:i,submit:m,images:o.images,addImage:o.addImage,addImages:o.addImages,removeImage:o.removeImage,clearImages:o.clearImages};return Ie.createElement(Cne.Provider,{value:_},t)},$ne=({children:t,tamboUrl:e,apiKey:n,userToken:r,components:s,environment:i,tools:o,mcpServers:a,streaming:c,autoGenerateThreadName:d,autoGenerateNameThreshold:f,contextHelpers:m,contextKey:y,initialMessages:v,onCallUnregisteredTool:_,getResource:E,listResources:k,resources:p})=>Ie.createElement(GG,{tamboUrl:e,apiKey:n,environment:i,userToken:r},Ie.createElement(XG,{components:s,tools:o,mcpServers:a,onCallUnregisteredTool:_,getResource:E,listResources:k,resources:p},Ie.createElement(nH,{contextHelpers:m},Ie.createElement(_H,{contextKey:y,streaming:c,autoGenerateThreadName:d,autoGenerateNameThreshold:f,initialMessages:v},Ie.createElement(SH,null,Ie.createElement(dne,{contextKey:y},Ie.createElement(gne,null,Ie.createElement(eH,null,Ie.createElement(rH,null,Ie.createElement(Pne,null,Ie.createElement(xne,null,t))))))))))),Tne=K.createContext({}),xne=({children:t})=>{const e=fN(),n=K.useContext(md);if(!n)throw new Error("TamboCompositeProvider must be used within a TamboClientProvider");const{client:r,queryClient:s,isUpdatingToken:i}=n,o=iN(),a=lN(),c=_y(),d=yne();return Ie.createElement(Tne.Provider,{value:{client:r,queryClient:s,isUpdatingToken:i,...o,...e,...a,...c,...d}},t)};var z7={exports:{}},Dy={},j0={},rt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof rc<"u"?rc:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return t.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var s;return(s=t.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(s){t.glob.Konva=s}};const r=s=>{t.Konva[s.prototype.getClassName()]=s};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(rt);var dn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=rt;class n{constructor(C=[1,0,0,1,0,0]){this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]}point(C){const $=this.m;return{x:$[0]*C.x+$[2]*C.y+$[4],y:$[1]*C.x+$[3]*C.y+$[5]}}translate(C,$){return this.m[4]+=this.m[0]*C+this.m[2]*$,this.m[5]+=this.m[1]*C+this.m[3]*$,this}scale(C,$){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=$,this.m[3]*=$,this}rotate(C){const $=Math.cos(C),N=Math.sin(C),j=this.m[0]*$+this.m[2]*N,A=this.m[1]*$+this.m[3]*N,G=this.m[0]*-N+this.m[2]*$,V=this.m[1]*-N+this.m[3]*$;return this.m[0]=j,this.m[1]=A,this.m[2]=G,this.m[3]=V,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(C,$){const N=this.m[0]+this.m[2]*$,j=this.m[1]+this.m[3]*$,A=this.m[2]+this.m[0]*C,G=this.m[3]+this.m[1]*C;return this.m[0]=N,this.m[1]=j,this.m[2]=A,this.m[3]=G,this}multiply(C){const $=this.m[0]*C.m[0]+this.m[2]*C.m[1],N=this.m[1]*C.m[0]+this.m[3]*C.m[1],j=this.m[0]*C.m[2]+this.m[2]*C.m[3],A=this.m[1]*C.m[2]+this.m[3]*C.m[3],G=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],V=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=$,this.m[1]=N,this.m[2]=j,this.m[3]=A,this.m[4]=G,this.m[5]=V,this}invert(){const C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),$=this.m[3]*C,N=-this.m[1]*C,j=-this.m[2]*C,A=this.m[0]*C,G=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),V=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=$,this.m[1]=N,this.m[2]=j,this.m[3]=A,this.m[4]=G,this.m[5]=V,this}getMatrix(){return this.m}decompose(){const C=this.m[0],$=this.m[1],N=this.m[2],j=this.m[3],A=this.m[4],G=this.m[5],V=C*j-$*N,H={x:A,y:G,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||$!=0){const Q=Math.sqrt(C*C+$*$);H.rotation=$>0?Math.acos(C/Q):-Math.acos(C/Q),H.scaleX=Q,H.scaleY=V/Q,H.skewX=(C*N+$*j)/V,H.skewY=0}else if(N!=0||j!=0){const Q=Math.sqrt(N*N+j*j);H.rotation=Math.PI/2-(j>0?Math.acos(-N/Q):-Math.acos(N/Q)),H.scaleX=V/Q,H.scaleY=Q,H.skewX=0,H.skewY=(C*N+$*j)/V}return H.rotation=t.Util._getRotation(H.rotation),H}}t.Transform=n;const r="[object Array]",s="[object Number]",i="[object String]",o="[object Boolean]",a=Math.PI/180,c=180/Math.PI,d="#",f="",m="0",y="Konva warning: ",v="Konva error: ",_="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let p=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};t.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===r},_isNumber(g){return Object.prototype.toString.call(g)===s&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===i},_isBoolean(g){return Object.prototype.toString.call(g)===o},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const C=g[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){p.push(g),p.length===1&&w(function(){const C=p;p=[],C.forEach(function($){$()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,C){const $=t.Util.createImageElement();$.onload=function(){C($)},$.src=g},_rgbToHex(g,C,$){return((1<<24)+(g<<16)+(C<<8)+$).toString(16).slice(1)},_hexToRgb(g){g=g.replace(d,f);const C=parseInt(g,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=m+g;return d+g},getRGB(g){let C;return g in E?(C=E[g],{r:C[0],g:C[1],b:C[2]}):g[0]===d?this._hexToRgb(g.substring(1)):g.substr(0,4)===_?(C=k.exec(g.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",t.Util._namedColorToRBA(g)||t.Util._hex3ColorToRGBA(g)||t.Util._hex4ColorToRGBA(g)||t.Util._hex6ColorToRGBA(g)||t.Util._hex8ColorToRGBA(g)||t.Util._rgbColorToRGBA(g)||t.Util._rgbaColorToRGBA(g)||t.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const C=E[g.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const C=g.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const C=g.split(/ *, */).map(($,N)=>$.slice(-1)==="%"?N===3?parseInt($)/100:parseInt($)/100*255:Number($));return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[C,...$]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),N=Number($[0])/360,j=Number($[1])/100,A=Number($[2])/100;let G,V,H;if(j===0)return H=A*255,{r:Math.round(H),g:Math.round(H),b:Math.round(H),a:1};A<.5?G=A*(1+j):G=A+j-A*j;const Q=2*A-G,ie=[0,0,0];for(let se=0;se<3;se++)V=N+1/3*-(se-1),V<0&&V++,V>1&&V--,6*V<1?H=Q+(G-Q)*6*V:2*V<1?H=G:3*V<2?H=Q+(G-Q)*(2/3-V)*6:H=Q,ie[se]=H*255;return{r:Math.round(ie[0]),g:Math.round(ie[1]),b:Math.round(ie[2]),a:1}}},haveIntersection(g,C){return!(C.x>g.x+g.width||C.x+C.width<g.x||C.y>g.y+g.height||C.y+C.height<g.y)},cloneObject(g){const C={};for(const $ in g)this._isPlainObject(g[$])?C[$]=this.cloneObject(g[$]):this._isArray(g[$])?C[$]=this.cloneArray(g[$]):C[$]=g[$];return C},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*c},_degToRad(g){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(g)},_radToDeg(g){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(g)},_getRotation(g){return e.Konva.angleDeg?t.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(v+g)},error(g){console.error(v+g)},warn(g){e.Konva.showWarnings&&console.warn(y+g)},each(g,C){for(const $ in g)C($,g[$])},_inRange(g,C,$){return C<=g&&g<$},_getProjectionToSegment(g,C,$,N,j,A){let G,V,H;const Q=(g-$)*(g-$)+(C-N)*(C-N);if(Q==0)G=g,V=C,H=(j-$)*(j-$)+(A-N)*(A-N);else{const ie=((j-g)*($-g)+(A-C)*(N-C))/Q;ie<0?(G=g,V=C,H=(g-j)*(g-j)+(C-A)*(C-A)):ie>1?(G=$,V=N,H=($-j)*($-j)+(N-A)*(N-A)):(G=g+ie*($-g),V=C+ie*(N-C),H=(G-j)*(G-j)+(V-A)*(V-A))}return[G,V,H]},_getProjectionToLine(g,C,$){const N=t.Util.cloneObject(g);let j=Number.MAX_VALUE;return C.forEach(function(A,G){if(!$&&G===C.length-1)return;const V=C[(G+1)%C.length],H=t.Util._getProjectionToSegment(A.x,A.y,V.x,V.y,g.x,g.y),Q=H[0],ie=H[1],se=H[2];se<j&&(N.x=Q,N.y=ie,j=se)}),N},_prepareArrayForTween(g,C,$){const N=[],j=[];if(g.length>C.length){const G=C;C=g,g=G}for(let G=0;G<g.length;G+=2)N.push({x:g[G],y:g[G+1]});for(let G=0;G<C.length;G+=2)j.push({x:C[G],y:C[G+1]});const A=[];return j.forEach(function(G){const V=t.Util._getProjectionToLine(G,N,$);A.push(V.x),A.push(V.y)}),A},_prepareToStringify(g){let C;g.visitedByCircularReferenceRemoval=!0;for(const $ in g)if(g.hasOwnProperty($)&&g[$]&&typeof g[$]=="object"){if(C=Object.getOwnPropertyDescriptor(g,$),g[$].visitedByCircularReferenceRemoval||t.Util._isElement(g[$]))if(C.configurable)delete g[$];else return null;else if(t.Util._prepareToStringify(g[$])===null)if(C.configurable)delete g[$];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,C){for(const $ in C)g[$]=C[$];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){e.Konva.releaseCanvasOnDestroy&&g.forEach(C=>{C.width=0,C.height=0})},drawRoundedRectPath(g,C,$,N){let j=0,A=0,G=0,V=0;typeof N=="number"?j=A=G=V=Math.min(N,C/2,$/2):(j=Math.min(N[0]||0,C/2,$/2),A=Math.min(N[1]||0,C/2,$/2),V=Math.min(N[2]||0,C/2,$/2),G=Math.min(N[3]||0,C/2,$/2)),g.moveTo(j,0),g.lineTo(C-A,0),g.arc(C-A,A,A,Math.PI*3/2,0,!1),g.lineTo(C,$-V),g.arc(C-V,$-V,V,0,Math.PI/2,!1),g.lineTo(G,$),g.arc(G,$-G,G,Math.PI/2,Math.PI,!1),g.lineTo(0,j),g.arc(j,j,j,Math.PI,Math.PI*3/2,!1)}}})(dn);var nn={},Ci={},No={};Object.defineProperty(No,"__esModule",{value:!0});No.HitContext=No.SceneContext=No.Context=void 0;const D7=dn,Nne=rt;function Rne(t){const e=[],n=t.length,r=D7.Util;for(let s=0;s<n;s++){let i=t[s];r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i)}return e}const h9=",",One="(",Ine=")",Ane="([",Mne="])",jne=";",zne="()",Dne="=",p9=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Fne=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],Lne=100;class Fy{constructor(e){this.canvas=e,Nne.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let r=this.traceArr,s=r.length,i="",o,a,c,d;for(o=0;o<s;o++)a=r[o],c=a.method,c?(d=a.args,i+=c,e?i+=zne:D7.Util._isArray(d[0])?i+=Ane+d.join(h9)+Mne:(n&&(d=d.map(f=>typeof f=="number"?Math.floor(f):f)),i+=One+d.join(h9)+Ine)):(i+=a.property,e||(i+=Dne+a.val)),i+=jne;return i}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,r;n.push(e),r=n.length,r>=Lne&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,s,i,o){this._context.arc(e,n,r,s,i,o)}arcTo(e,n,r,s,i){this._context.arcTo(e,n,r,s,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,s,i,o){this._context.bezierCurveTo(e,n,r,s,i,o)}clearRect(e,n,r,s){this._context.clearRect(e,n,r,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,s){return this._context.createLinearGradient(e,n,r,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,s,i,o){return this._context.createRadialGradient(e,n,r,s,i,o)}drawImage(e,n,r,s,i,o,a,c,d){const f=arguments,m=this._context;f.length===3?m.drawImage(e,n,r):f.length===5?m.drawImage(e,n,r,s,i):f.length===9&&m.drawImage(e,n,r,s,i,o,a,c,d)}ellipse(e,n,r,s,i,o,a,c){this._context.ellipse(e,n,r,s,i,o,a,c)}isPointInPath(e,n,r,s){return r?this._context.isPointInPath(r,e,n,s):this._context.isPointInPath(e,n,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,s){this._context.fillRect(e,n,r,s)}strokeRect(e,n,r,s){this._context.strokeRect(e,n,r,s)}fillText(e,n,r,s){s?this._context.fillText(e,n,r,s):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,s){return this._context.getImageData(e,n,r,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,s){this._context.rect(e,n,r,s)}roundRect(e,n,r,s,i){this._context.roundRect(e,n,r,s,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,s){this._context.quadraticCurveTo(e,n,r,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,s,i,o){this._context.setTransform(e,n,r,s,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,s){this._context.strokeText(e,n,r,s)}transform(e,n,r,s,i,o){this._context.transform(e,n,r,s,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=p9.length,r=this.setAttr,s,i;const o=function(a){let c=e[a],d;e[a]=function(){return i=Rne(Array.prototype.slice.call(arguments,0)),d=c.apply(e,arguments),e._trace({method:a,args:i}),d}};for(s=0;s<n;s++)o(p9[s]);e.setAttr=function(){r.apply(e,arguments);const a=arguments[0];let c=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:a,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}No.Context=Fy;Fne.forEach(function(t){Object.defineProperty(Fy.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Une extends Fy{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(s){for(let o=0;o<s.length;o+=2)i.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){const n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();const i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,s;const i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},c=e.getAbsoluteScale(),d=this.canvas.getPixelRatio(),f=c.x*d,m=c.y*d;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(f),Math.abs(m))),this.setAttr("shadowOffsetX",a.x*f),this.setAttr("shadowOffsetY",a.y*m)}}No.SceneContext=Une;class Vne extends Fy{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e);const r=e.hitStrokeWidth(),s=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}No.HitContext=Vne;Object.defineProperty(Ci,"__esModule",{value:!0});Ci.HitCanvas=Ci.SceneCanvas=Ci.Canvas=void 0;const z0=dn,F7=No,L7=rt;let Gm;function Gne(){if(Gm)return Gm;const t=z0.Util.createCanvasElement(),e=t.getContext("2d");return Gm=function(){const n=L7.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),z0.Util.releaseCanvas(t),Gm}class U3{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(e||{}).pixelRatio||L7.Konva.pixelRatio||Gne();this.pixelRatio=r,this._canvas=z0.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(s){return z0.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Ci.Canvas=U3;class Hne extends U3{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new F7.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Ci.SceneCanvas=Hne;class qne extends U3{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new F7.HitContext(this),this.setSize(e.width,e.height)}}Ci.HitCanvas=qne;var Ly={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=rt,n=dn;t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(s=>{r=s.node}),r},_dragElements:new Map,_drag(r){const s=[];t.DD._dragElements.forEach((i,o)=>{const{node:a}=i,c=a.getStage();c.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const d=c._changedPointerPositions.find(f=>f.id===i.pointerId);if(d){if(i.dragStatus!=="dragging"){const f=a.dragDistance();if(Math.max(Math.abs(d.x-i.startPointerPos.x),Math.abs(d.y-i.startPointerPos.y))<f||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,i),s.push(a)}}),s.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const s=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(f=>f.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const d=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;d&&s.indexOf(d)===-1&&s.push(d)}),s.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((s,i)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:r},!0),s.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Ly);var lt={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.RGBComponent=Bne;Ue.alphaComponent=Zne;Ue.getNumberValidator=Wne;Ue.getNumberOrArrayOfNumbersValidator=Kne;Ue.getNumberOrAutoValidator=Qne;Ue.getStringValidator=Yne;Ue.getStringOrGradientValidator=Xne;Ue.getFunctionValidator=Jne;Ue.getNumberArrayValidator=ere;Ue.getBooleanValidator=tre;Ue.getComponentValidator=nre;const Lo=rt,mn=dn;function Uo(t){return mn.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||mn.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Bne(t){return t>255?255:t<0?0:Math.round(t)}function Zne(t){return t>1?1:t<1e-4?1e-4:t}function Wne(){if(Lo.Konva.isUnminified)return function(t,e){return mn.Util._isNumber(t)||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Kne(t){if(Lo.Konva.isUnminified)return function(e,n){let r=mn.Util._isNumber(e),s=mn.Util._isArray(e)&&e.length==t;return!r&&!s&&mn.Util.warn(Uo(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Qne(){if(Lo.Konva.isUnminified)return function(t,e){return mn.Util._isNumber(t)||t==="auto"||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Yne(){if(Lo.Konva.isUnminified)return function(t,e){return mn.Util._isString(t)||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function Xne(){if(Lo.Konva.isUnminified)return function(t,e){const n=mn.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Jne(){if(Lo.Konva.isUnminified)return function(t,e){return mn.Util._isFunction(t)||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function ere(){if(Lo.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(mn.Util._isArray(t)?t.forEach(function(r){mn.Util._isNumber(r)||mn.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function tre(){if(Lo.Konva.isUnminified)return function(t,e){return t===!0||t===!1||mn.Util.warn(Uo(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function nre(t){if(Lo.Konva.isUnminified)return function(e,n){return e==null||mn.Util.isObject(e)||mn.Util.warn(Uo(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=dn,n=Ue,r="get",s="set";t.Factory={addGetterSetter(i,o,a,c,d){t.Factory.addGetter(i,o,a),t.Factory.addSetter(i,o,c,d),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,a){const c=r+e.Util._capitalize(o);i.prototype[c]=i.prototype[c]||function(){const d=this.attrs[o];return d===void 0?a:d}},addSetter(i,o,a,c){const d=s+e.Util._capitalize(o);i.prototype[d]||t.Factory.overWriteSetter(i,o,a,c)},overWriteSetter(i,o,a,c){const d=s+e.Util._capitalize(o);i.prototype[d]=function(f){return a&&f!==void 0&&f!==null&&(f=a.call(this,f,o)),this._setAttr(o,f),c&&c.call(this),this}},addComponentsGetterSetter(i,o,a,c,d){const f=a.length,m=e.Util._capitalize,y=r+m(o),v=s+m(o);i.prototype[y]=function(){const E={};for(let k=0;k<f;k++){const p=a[k];E[p]=this.getAttr(o+m(p))}return E};const _=(0,n.getComponentValidator)(a);i.prototype[v]=function(E){const k=this.attrs[o];c&&(E=c.call(this,E,o)),_&&_.call(this,E,o);for(const p in E)E.hasOwnProperty(p)&&this._setAttr(o+m(p),E[p]);return E||a.forEach(p=>{this._setAttr(o+m(p),void 0)}),this._fireChangeEvent(o,k,E),d&&d.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){const a=e.Util._capitalize(o),c=s+a,d=r+a;i.prototype[o]=function(){return arguments.length?(this[c](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(i,o,a,c){e.Util.error("Adding deprecated "+o);const d=r+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[d]=function(){e.Util.error(f);const m=this.attrs[o];return m===void 0?a:m},t.Factory.addSetter(i,o,c,function(){e.Util.error(f)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(a,c){const d=i.prototype[c],f=r+e.Util._capitalize(a),m=s+e.Util._capitalize(a);function y(){d.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}i.prototype[a]=y,i.prototype[f]=y,i.prototype[m]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(lt);Object.defineProperty(nn,"__esModule",{value:!0});nn.Node=void 0;const Hu=Ci,Os=Ly,op=lt,ia=rt,ft=dn,Cn=Ue,Pg="absoluteOpacity",Hm="allEventListeners",mo="absoluteTransform",m9="absoluteScale",gl="canvas",rre="Change",sre="children",ire="konva",vS="listening",ore="mouseenter",are="mouseleave",lre="pointerenter",ure="pointerleave",cre="touchenter",dre="touchleave",g9="set",y9="Shape",$g=" ",v9="stage",aa="transform",fre="Stage",_S="visible",hre=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join($g);let pre=1;class qe{constructor(e){this._id=pre++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===aa||e===mo)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let r=this._cache.get(e);return(r===void 0||(e===aa||e===mo)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const s=n.map(i=>i+"Change.konva").join($g);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(gl)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===mo&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(gl)){const{scene:e,filter:n,hit:r,buffer:s}=this._cache.get(gl);ft.Util.releaseCanvas(e,n,r,s),this._cache.delete(gl)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,c=n.y===void 0?Math.floor(r.y):n.y,d=n.offset||0,f=n.drawBorder||!1,m=n.hitCanvasPixelRatio||1;if(!s||!i){ft.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(r.x)-a)>.5?1:0,v=Math.abs(Math.round(r.y)-c)>.5?1:0;s+=d*2+y,i+=d*2+v,a-=d,c-=d;const _=new Hu.SceneCanvas({pixelRatio:o,width:s,height:i}),E=new Hu.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),k=new Hu.HitCanvas({pixelRatio:m,width:s,height:i}),p=_.getContext(),w=k.getContext(),g=new Hu.SceneCanvas({width:_.width/_.pixelRatio+Math.abs(a),height:_.height/_.pixelRatio+Math.abs(c),pixelRatio:_.pixelRatio}),C=g.getContext();return k.isCache=!0,_.isCache=!0,this._cache.delete(gl),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),p.save(),w.save(),C.save(),p.translate(-a,-c),w.translate(-a,-c),C.translate(-a,-c),g.x=a,g.y=c,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Pg),this._clearSelfAndDescendantCache(m9),this.drawScene(_,this,g),this.drawHit(k,this),this._isUnderCache=!1,p.restore(),w.restore(),f&&(p.save(),p.beginPath(),p.rect(0,0,s,i),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.set(gl,{scene:_,filter:E,hit:k,buffer:g,x:a,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(gl)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,i=1/0,o=-1/0,a=-1/0;const c=this.getAbsoluteTransform(n);return r.forEach(function(d){const f=c.point(d);s===void 0&&(s=o=f.x,i=a=f.y),s=Math.min(s,f.x),i=Math.min(i,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),{x:s,y:i,width:o-s,height:a-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),s=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/s,r.height/s),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),r=n.scene,s=n.filter,i=s.getContext(),o,a,c,d;if(e){if(!this._filterUpToDate){const f=r.pixelRatio;s.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/f,r.getHeight()/f),a=i.getImageData(0,0,s.getWidth(),s.getHeight()),c=0;c<o;c++){if(d=e[c],typeof d!="function"){ft.Util.error("Filter should be type of function, but got "+typeof d+" instead. Please check correct filters");continue}d.call(this,a),i.putImageData(a,0,0)}}catch(m){ft.Util.error("Unable to apply filter. "+m.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return r}on(e,n){if(this._cache&&this._cache.delete(Hm),arguments.length===3)return this._delegate.apply(this,arguments);const r=e.split($g);for(let s=0;s<r.length;s++){const o=r[s].split("."),a=o[0],c=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:c,handler:n})}return this}off(e,n){let r=(e||"").split($g),s=r.length,i,o,a,c,d,f;if(this._cache&&this._cache.delete(Hm),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<s;i++)if(a=r[i],c=a.split("."),d=c[0],f=c[1],d)this.eventListeners[d]&&this._off(d,f,n);else for(o in this.eventListeners)this._off(o,f,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){const s=this;this.on(e,function(i){const o=i.target.findAncestors(n,!0,s);for(let a=0;a<o.length;a++)i=ft.Util.cloneObject(i),i.currentTarget=o[a],r.call(o[a],i)})}remove(){return this.isDragging()&&this.stopDrag(),Os.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(mo),this._clearSelfAndDescendantCache(Pg),this._clearSelfAndDescendantCache(m9),this._clearSelfAndDescendantCache(v9),this._clearSelfAndDescendantCache(_S),this._clearSelfAndDescendantCache(vS)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+ft.Util._capitalize(e);return ft.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,r;if(!e)return this;for(n in e)n!==sre&&(r=g9+ft.Util._capitalize(n),ft.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(vS,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(_S,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const r=this.getLayer();let s=!1;Os.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(s=!0)});const i=!n&&!ia.Konva.hitOnDragEnabled&&(s||ia.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,r=0,s,i,o,a;function c(f){for(s=[],i=f.length,o=0;o<i;o++)a=f[o],r++,a.nodeType!==y9&&(s=s.concat(a.getChildren().slice())),a._id===n._id&&(o=i);s.length>0&&s[0].getDepth()<=e&&c(s)}const d=this.getStage();return n.nodeType!==fre&&d&&c(d.getChildren()),r}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(aa),this._clearSelfAndDescendantCache(mo)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),i=new ft.Transform,o=this.offset();return i.m=s.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...s}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(aa);const i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(aa),this._clearSelfAndDescendantCache(mo),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,r=e.y,s=this.x(),i=this.y();return n!==void 0&&(s+=n),r!==void 0&&(i+=r),this.setPosition({x:s,y:i}),this}_eachAncestorReverse(e,n){let r=[],s=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);s&&(!n||s._id!==n._id);)r.unshift(s),s=s.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ft.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ft.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ft.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ft.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Pg,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,r,s,i,o;const a={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=ft.Util.isObject(r)&&!ft.Util._isPlainObject(r)&&!ft.Util._isArray(r),!o&&(s=typeof this[n]=="function"&&this[n],delete e[n],i=s?s.call(this):null,e[n]=r,i!==r&&(a.attrs[n]=r));return ft.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){const s=[];n&&this._isMatch(e)&&s.push(this);let i=this.parent;for(;i;){if(i===r)return s;i._isMatch(e)&&s.push(i),i=i.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),r=n.length,s,i;for(s=0;s<r;s++)if(i=n[s],ft.Util.isValidSelector(i)||(ft.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ft.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ft.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(v9,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(mo,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new ft.Transform,this._eachAncestorReverse(function(r){const s=r.transformsEnabled();s==="all"?n.multiply(r.getTransform()):s==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),n;{n=this._cache.get(mo)||new ft.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const s=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(s-o,i-a)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(aa,this._getTransform)}_getTransform(){var e,n;const r=this._cache.get(aa)||new ft.Transform;r.reset();const s=this.x(),i=this.y(),o=ia.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,d=this.attrs.skewX||0,f=this.attrs.skewY||0,m=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||i!==0)&&r.translate(s,i),o!==0&&r.rotate(o),(d!==0||f!==0)&&r.skew(d,f),(a!==1||c!==1)&&r.scale(a,c),(m!==0||y!==0)&&r.translate(-1*m,-1*y),r.dirty=!1,r}clone(e){let n=ft.Util.cloneObject(this.attrs),r,s,i,o,a;for(r in e)n[r]=e[r];const c=new this.constructor(n);for(r in this.eventListeners)for(s=this.eventListeners[r],i=s.length,o=0;o<i;o++)a=s[o],a.name.indexOf(ire)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(a));return c}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),r=this.getStage(),s=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,a=new Hu.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),c=a.getContext(),d=new Hu.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(i),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(s||i)&&c.translate(-1*s,-1*i),this.drawScene(a,void 0,d),c.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,r=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(s),s}toImage(e){return new Promise((n,r)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,ft.Util._urlToImage(this.toDataURL(e),function(i){n(i),s==null||s(i)})}catch(s){r(s)}})}toBlob(e){return new Promise((n,r)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),s==null||s(i)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(s){r(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():ia.Konva.dragDistance}_off(e,n,r){let s=this.eventListeners[e],i,o,a;for(i=0;i<s.length;i++)if(o=s[i].name,a=s[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(s.splice(i,1),s.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+rre,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){const n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){const r=this[g9+ft.Util._capitalize(e)];return ft.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(ia.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){const r=this.attrs[e];r===n&&!ft.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){let s;r!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,s,r))}_fireAndBubble(e,n,r){n&&this.nodeType===y9&&(n.target=this);const s=[ore,are,lre,ure,cre,dre];if(!(s.indexOf(e)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,n);const o=s.indexOf(e)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,s;const i=(n=this._cache.get(Hm))!==null&&n!==void 0?n:{};let o=i==null?void 0:i[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const c=(s=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&s!==void 0?s:[];o.push(...c),a=Object.getPrototypeOf(a)}i[e]=o,this._cache.set(Hm,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(let i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(let i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,r=this.getStage(),s=this.getAbsolutePosition();if(!r)return;const i=r._getPointerById(n)||r._changedPointerPositions[0]||s;Os.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-s.x,y:i.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Os.DD._dragElements.has(this._id)||this._createDragElement(e);const r=Os.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let s={x:r.x-n.offset.x,y:r.y-n.offset.y};const i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,s,e);o?s=o:ft.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const n=Os.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Os.DD._endDragBefore(e),Os.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Os.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||ia.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let s=!1;Os.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(s=!0)}),s||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Os.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";r?this.stopDrag():s&&Os.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return ft.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return ft.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let r=qe.prototype.getClassName.call(e),s=e.children,i,o,a;n&&(e.attrs.container=n),ia.Konva[r]||(ft.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const c=ia.Konva[r];if(i=new c(e.attrs),s)for(o=s.length,a=0;a<o;a++)i.add(qe._createNode(s[a]));return i}}nn.Node=qe;qe.prototype.nodeType="Node";qe.prototype._attrsAffectingSize=[];qe.prototype.eventListeners={};qe.prototype.on.call(qe.prototype,hre,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(aa),this._clearSelfAndDescendantCache(mo)});qe.prototype.on.call(qe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(_S)});qe.prototype.on.call(qe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(vS)});qe.prototype.on.call(qe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Pg)});const zt=op.Factory.addGetterSetter;zt(qe,"zIndex");zt(qe,"absolutePosition");zt(qe,"position");zt(qe,"x",0,(0,Cn.getNumberValidator)());zt(qe,"y",0,(0,Cn.getNumberValidator)());zt(qe,"globalCompositeOperation","source-over",(0,Cn.getStringValidator)());zt(qe,"opacity",1,(0,Cn.getNumberValidator)());zt(qe,"name","",(0,Cn.getStringValidator)());zt(qe,"id","",(0,Cn.getStringValidator)());zt(qe,"rotation",0,(0,Cn.getNumberValidator)());op.Factory.addComponentsGetterSetter(qe,"scale",["x","y"]);zt(qe,"scaleX",1,(0,Cn.getNumberValidator)());zt(qe,"scaleY",1,(0,Cn.getNumberValidator)());op.Factory.addComponentsGetterSetter(qe,"skew",["x","y"]);zt(qe,"skewX",0,(0,Cn.getNumberValidator)());zt(qe,"skewY",0,(0,Cn.getNumberValidator)());op.Factory.addComponentsGetterSetter(qe,"offset",["x","y"]);zt(qe,"offsetX",0,(0,Cn.getNumberValidator)());zt(qe,"offsetY",0,(0,Cn.getNumberValidator)());zt(qe,"dragDistance",void 0,(0,Cn.getNumberValidator)());zt(qe,"width",0,(0,Cn.getNumberValidator)());zt(qe,"height",0,(0,Cn.getNumberValidator)());zt(qe,"listening",!0,(0,Cn.getBooleanValidator)());zt(qe,"preventDefault",!0,(0,Cn.getBooleanValidator)());zt(qe,"filters",void 0,function(t){return this._filterUpToDate=!1,t});zt(qe,"visible",!0,(0,Cn.getBooleanValidator)());zt(qe,"transformsEnabled","all",(0,Cn.getStringValidator)());zt(qe,"size");zt(qe,"dragBoundFunc");zt(qe,"draggable",!1,(0,Cn.getBooleanValidator)());op.Factory.backCompat(qe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.Container=void 0;const bd=lt,U1=nn,Uy=Ue;class pu extends U1.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let r=0;r<e.length;r++)this.add(e[r]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const r=[];return this._descendants(s=>{const i=s._isMatch(e);return i&&r.push(s),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const s of r){if(n=e(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){const e=U1.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=U1.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){const s=this.getLayer(),i=e||s&&s.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),c=a&&a.scene,d=i&&i.isCache;if(!this.isVisible()&&!d)return this;if(c){o.save();const f=this.getAbsoluteTransform(n).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),s=e||r&&r.hitCanvas,i=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();const c=this.getAbsoluteTransform(n).getMatrix();i.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,r,s){var i;const o=n&&n.getContext(),a=this.clipWidth(),c=this.clipHeight(),d=this.clipFunc(),f=typeof a=="number"&&typeof c=="number"||d,m=r===this;if(f){o.save();const v=this.getAbsoluteTransform(r);let _=v.getMatrix();o.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.beginPath();let E;if(d)E=d.call(this,o,this);else{const k=this.clipX(),p=this.clipY();o.rect(k||0,p||0,a,c)}o.clip.apply(o,E),_=v.copy().invert().getMatrix(),o.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!m&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(v){v[e](n,r,s)}),y&&o.restore(),f&&o.restore()}getClientRect(e={}){var n;const r=e.skipTransform,s=e.relativeTo;let i,o,a,c,d={x:1/0,y:1/0,width:0,height:0};const f=this;(n=this.children)===null||n===void 0||n.forEach(function(v){if(!v.visible())return;const _=v.getClientRect({relativeTo:f,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(i===void 0?(i=_.x,o=_.y,a=_.x+_.width,c=_.y+_.height):(i=Math.min(i,_.x),o=Math.min(o,_.y),a=Math.max(a,_.x+_.width),c=Math.max(c,_.y+_.height)))});const m=this.find("Shape");let y=!1;for(let v=0;v<m.length;v++)if(m[v]._isVisible(this)){y=!0;break}return y&&i!==void 0?d={x:i,y:o,width:a-i,height:c-o}:d={x:0,y:0,width:0,height:0},r?d:this._transformedRect(d,s)}}hu.Container=pu;bd.Factory.addComponentsGetterSetter(pu,"clip",["x","y","width","height"]);bd.Factory.addGetterSetter(pu,"clipX",void 0,(0,Uy.getNumberValidator)());bd.Factory.addGetterSetter(pu,"clipY",void 0,(0,Uy.getNumberValidator)());bd.Factory.addGetterSetter(pu,"clipWidth",void 0,(0,Uy.getNumberValidator)());bd.Factory.addGetterSetter(pu,"clipHeight",void 0,(0,Uy.getNumberValidator)());bd.Factory.addGetterSetter(pu,"clipFunc");var U7={},Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.getCapturedShape=gre;Ka.createEvent=V3;Ka.hasPointerCapture=yre;Ka.setPointerCapture=vre;Ka.releaseCapture=G7;const mre=rt,Rh=new Map,V7=mre.Konva._global.PointerEvent!==void 0;function gre(t){return Rh.get(t)}function V3(t){return{evt:t,pointerId:t.pointerId}}function yre(t,e){return Rh.get(t)===e}function vre(t,e){G7(t),e.getStage()&&(Rh.set(t,e),V7&&e._fire("gotpointercapture",V3(new PointerEvent("gotpointercapture"))))}function G7(t,e){const n=Rh.get(t);if(!n)return;const r=n.getStage();r&&r.content,Rh.delete(t),V7&&n._fire("lostpointercapture",V3(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=dn,n=lt,r=hu,s=rt,i=Ci,o=Ly,a=rt,c=Ka,d="Stage",f="string",m="px",y="mouseout",v="mouseleave",_="mouseover",E="mouseenter",k="mousemove",p="mousedown",w="mouseup",g="pointermove",C="pointerdown",$="pointerup",N="pointercancel",j="lostpointercapture",A="pointerout",G="pointerleave",V="pointerover",H="pointerenter",Q="contextmenu",ie="touchstart",se="touchend",ae="touchmove",ye="touchcancel",Pe="wheel",ee=5,ue=[[E,"_pointerenter"],[p,"_pointerdown"],[k,"_pointermove"],[w,"_pointerup"],[v,"_pointerleave"],[ie,"_pointerdown"],[ae,"_pointermove"],[se,"_pointerup"],[ye,"_pointercancel"],[_,"_pointerover"],[Pe,"_wheel"],[Q,"_contextmenu"],[C,"_pointerdown"],[g,"_pointermove"],[$,"_pointerup"],[N,"_pointercancel"],[G,"_pointerleave"],[j,"_lostpointercapture"]],L={mouse:{[A]:y,[G]:v,[V]:_,[H]:E,[g]:k,[C]:p,[$]:w,[N]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[G]:"touchleave",[V]:"touchover",[H]:"touchenter",[g]:ae,[C]:ie,[$]:se,[N]:ye,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[G]:G,[V]:V,[H]:H,[g]:g,[C]:C,[$]:$,[N]:N,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=M=>M.indexOf("pointer")>=0?"pointer":M.indexOf("touch")>=0?"touch":"mouse",U=M=>{const O=I(M);if(O==="pointer")return s.Konva.pointerEventsEnabled&&L.pointer;if(O==="touch")return L.touch;if(O==="mouse")return L.mouse};function z(M={}){return(M.clipFunc||M.clipWidth||M.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),M}const b="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class T extends r.Container{constructor(O){super(z(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(O){const F=O.getType()==="Layer",Z=O.getType()==="FastLayer";F||Z||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===f){let F;if(O.charAt(0)==="."){const Z=O.slice(1);O=document.getElementsByClassName(Z)[0]}else O.charAt(0)!=="#"?F=O:F=O.slice(1),O=document.getElementById(F);if(!O)throw"Can not find container in document with id "+F}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const O=this.children,F=O.length;for(let Z=0;Z<F;Z++)O[Z].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&e.Util._isInDocument(O)&&this.container().removeChild(O);const F=t.stages.indexOf(this);return F>-1&&t.stages.splice(F,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(e.Util.warn(b),null)}_getPointerById(O){return this._pointerPositions.find(F=>F.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const F=new i.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),Z=F.getContext()._context,le=this.children;return(O.x||O.y)&&Z.translate(-1*O.x,-1*O.y),le.forEach(function(ce){if(!ce.isVisible())return;const W=ce._toKonvaCanvas(O);Z.drawImage(W._canvas,O.x,O.y,W.getWidth()/W.getPixelRatio(),W.getHeight()/W.getPixelRatio())}),F}getIntersection(O){if(!O)return null;const F=this.children,Z=F.length,le=Z-1;for(let ce=le;ce>=0;ce--){const W=F[ce].getIntersection(O);if(W)return W}return null}_resizeDOM(){const O=this.width(),F=this.height();this.content&&(this.content.style.width=O+m,this.content.style.height=F+m),this.bufferCanvas.setSize(O,F),this.bufferHitCanvas.setSize(O,F),this.children.forEach(Z=>{Z.setSize({width:O,height:F}),Z.draw()})}add(O,...F){if(arguments.length>1){for(let le=0;le<arguments.length;le++)this.add(arguments[le]);return this}super.add(O);const Z=this.children.length;return Z>ee&&e.Util.warn("The stage has "+Z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),s.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return c.hasPointerCapture(O,this)}setPointerCapture(O){c.setPointerCapture(O,this)}releaseCapture(O){c.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&ue.forEach(([O,F])=>{this.content.addEventListener(O,Z=>{this[F](Z)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const F=U(O.type);F&&this._fire(F.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const F=U(O.type);F&&this._fire(F.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let F=this[O+"targetShape"];return F&&!F.getStage()&&(F=null),F}_pointerleave(O){const F=U(O.type),Z=I(O.type);if(!F)return;this.setPointersPositions(O);const le=this._getTargetShape(Z),ce=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;le&&ce?(le._fireAndBubble(F.pointerout,{evt:O}),le._fireAndBubble(F.pointerleave,{evt:O}),this._fire(F.pointerleave,{evt:O,target:this,currentTarget:this}),this[Z+"targetShape"]=null):ce&&(this._fire(F.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(F.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const F=U(O.type),Z=I(O.type);if(!F)return;this.setPointersPositions(O);let le=!1;this._changedPointerPositions.forEach(ce=>{const W=this.getIntersection(ce);if(o.DD.justDragged=!1,s.Konva["_"+Z+"ListenClick"]=!0,!W||!W.isListening()){this[Z+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&W.setPointerCapture(ce.id),this[Z+"ClickStartShape"]=W,W._fireAndBubble(F.pointerdown,{evt:O,pointerId:ce.id}),le=!0;const X=O.type.indexOf("touch")>=0;W.preventDefault()&&O.cancelable&&X&&O.preventDefault()}),le||this._fire(F.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const F=U(O.type),Z=I(O.type);if(!F||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const ce={};let W=!1;const X=this._getTargetShape(Z);this._changedPointerPositions.forEach(dt=>{const Fe=c.getCapturedShape(dt.id)||this.getIntersection(dt),Re=dt.id,Je={evt:O,pointerId:Re},gt=X!==Fe;if(gt&&X&&(X._fireAndBubble(F.pointerout,{...Je},Fe),X._fireAndBubble(F.pointerleave,{...Je},Fe)),Fe){if(ce[Fe._id])return;ce[Fe._id]=!0}Fe&&Fe.isListening()?(W=!0,gt&&(Fe._fireAndBubble(F.pointerover,{...Je},X),Fe._fireAndBubble(F.pointerenter,{...Je},X),this[Z+"targetShape"]=Fe),Fe._fireAndBubble(F.pointermove,{...Je})):X&&(this._fire(F.pointerover,{evt:O,target:this,currentTarget:this,pointerId:Re}),this[Z+"targetShape"]=null)}),W||this._fire(F.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const F=U(O.type),Z=I(O.type);if(!F)return;this.setPointersPositions(O);const le=this[Z+"ClickStartShape"],ce=this[Z+"ClickEndShape"],W={};let X=!1;this._changedPointerPositions.forEach(dt=>{const Fe=c.getCapturedShape(dt.id)||this.getIntersection(dt);if(Fe){if(Fe.releaseCapture(dt.id),W[Fe._id])return;W[Fe._id]=!0}const Re=dt.id,Je={evt:O,pointerId:Re};let gt=!1;s.Konva["_"+Z+"InDblClickWindow"]?(gt=!0,clearTimeout(this[Z+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+Z+"InDblClickWindow"]=!0,clearTimeout(this[Z+"DblTimeout"])),this[Z+"DblTimeout"]=setTimeout(function(){s.Konva["_"+Z+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Fe&&Fe.isListening()?(X=!0,this[Z+"ClickEndShape"]=Fe,Fe._fireAndBubble(F.pointerup,{...Je}),s.Konva["_"+Z+"ListenClick"]&&le&&le===Fe&&(Fe._fireAndBubble(F.pointerclick,{...Je}),gt&&ce&&ce===Fe&&Fe._fireAndBubble(F.pointerdblclick,{...Je}))):(this[Z+"ClickEndShape"]=null,s.Konva["_"+Z+"ListenClick"]&&this._fire(F.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:Re}),gt&&this._fire(F.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:Re}))}),X||this._fire(F.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+Z+"ListenClick"]=!1,O.cancelable&&Z!=="touch"&&Z!=="pointer"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const F=this.getIntersection(this.getPointerPosition());F&&F.isListening()?F._fireAndBubble(Q,{evt:O}):this._fire(Q,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const F=this.getIntersection(this.getPointerPosition());F&&F.isListening()?F._fireAndBubble(Pe,{evt:O}):this._fire(Pe,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const F=c.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());F&&F._fireAndBubble($,c.createEvent(O)),c.releaseCapture(O.pointerId)}_lostpointercapture(O){c.releaseCapture(O.pointerId)}setPointersPositions(O){const F=this._getContentPosition();let Z=null,le=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,ce=>{this._pointerPositions.push({id:ce.identifier,x:(ce.clientX-F.left)/F.scaleX,y:(ce.clientY-F.top)/F.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,ce=>{this._changedPointerPositions.push({id:ce.identifier,x:(ce.clientX-F.left)/F.scaleX,y:(ce.clientY-F.top)/F.scaleY})})):(Z=(O.clientX-F.left)/F.scaleX,le=(O.clientY-F.top)/F.scaleY,this.pointerPos={x:Z,y:le},this._pointerPositions=[{x:Z,y:le,id:e.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:Z,y:le,id:e.Util._getFirstPointerId(O)}])}_setPointerPosition(O){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}t.Stage=T,T.prototype.nodeType=d,(0,a._registerNode)(T),n.Factory.addGetterSetter(T,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(M=>{M.batchDraw()})})})(U7);var ap={},Vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=rt,n=dn,r=lt,s=nn,i=Ue,o=rt,a=Ka,c="hasShadow",d="shadowRGBA",f="patternImage",m="linearGradient",y="radialGradient";let v;function _(){return v||(v=n.Util.createCanvasElement().getContext("2d"),v)}t.shapes={};function E(G){const V=this.attrs.fillRule;V?G.fill(V):G.fill()}function k(G){G.stroke()}function p(G){const V=this.attrs.fillRule;V?G.fill(V):G.fill()}function w(G){G.stroke()}function g(){this._clearCache(c)}function C(){this._clearCache(d)}function $(){this._clearCache(f)}function N(){this._clearCache(m)}function j(){this._clearCache(y)}class A extends s.Node{constructor(V){super(V);let H;for(;H=n.Util.getRandomColor(),!(H&&!(H in t.shapes)););this.colorKey=H,t.shapes[H]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const H=_().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(H&&H.setTransform){const Q=new n.Transform;Q.translate(this.fillPatternX(),this.fillPatternY()),Q.rotate(e.Konva.getAngle(this.fillPatternRotation())),Q.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Q.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ie=Q.getMatrix(),se=typeof DOMMatrix>"u"?{a:ie[0],b:ie[1],c:ie[2],d:ie[3],e:ie[4],f:ie[5]}:new DOMMatrix(ie);H.setTransform(se)}return H}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const V=this.fillLinearGradientColorStops();if(V){const H=_(),Q=this.fillLinearGradientStartPoint(),ie=this.fillLinearGradientEndPoint(),se=H.createLinearGradient(Q.x,Q.y,ie.x,ie.y);for(let ae=0;ae<V.length;ae+=2)se.addColorStop(V[ae],V[ae+1]);return se}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const V=this.fillRadialGradientColorStops();if(V){const H=_(),Q=this.fillRadialGradientStartPoint(),ie=this.fillRadialGradientEndPoint(),se=H.createRadialGradient(Q.x,Q.y,this.fillRadialGradientStartRadius(),ie.x,ie.y,this.fillRadialGradientEndRadius());for(let ae=0;ae<V.length;ae+=2)se.addColorStop(V[ae],V[ae+1]);return se}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const V=n.Util.colorToRGBA(this.shadowColor());if(V)return"rgba("+V.r+","+V.g+","+V.b+","+V.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const V=this.hitStrokeWidth();return V==="auto"?this.hasStroke():this.strokeEnabled()&&!!V}intersects(V){const H=this.getStage();if(!H)return!1;const Q=H.bufferHitCanvas;return Q.getContext().clear(),this.drawHit(Q,void 0,!0),Q.context.getImageData(Math.round(V.x),Math.round(V.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(V){var H;if(!((H=this.attrs.perfectDrawEnabled)!==null&&H!==void 0?H:!0))return!1;const ie=V||this.hasFill(),se=this.hasStroke(),ae=this.getAbsoluteOpacity()!==1;if(ie&&se&&ae)return!0;const ye=this.hasShadow(),Pe=this.shadowForStrokeEnabled();return!!(ie&&se&&ye&&Pe)}setStrokeHitEnabled(V){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),V?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const V=this.size();return{x:this._centroid?-V.width/2:0,y:this._centroid?-V.height/2:0,width:V.width,height:V.height}}getClientRect(V={}){let H=!1,Q=this.getParent();for(;Q;){if(Q.isCached()){H=!0;break}Q=Q.getParent()}const ie=V.skipTransform,se=V.relativeTo||H&&this.getStage()||void 0,ae=this.getSelfRect(),Pe=!V.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,ee=ae.width+Pe,ue=ae.height+Pe,L=!V.skipShadow&&this.hasShadow(),I=L?this.shadowOffsetX():0,U=L?this.shadowOffsetY():0,z=ee+Math.abs(I),b=ue+Math.abs(U),T=L&&this.shadowBlur()||0,M=z+T*2,O=b+T*2,F={width:M,height:O,x:-(Pe/2+T)+Math.min(I,0)+ae.x,y:-(Pe/2+T)+Math.min(U,0)+ae.y};return ie?F:this._transformedRect(F,se)}drawScene(V,H,Q){const ie=this.getLayer(),se=V||ie.getCanvas(),ae=se.getContext(),ye=this._getCanvasCache(),Pe=this.getSceneFunc(),ee=this.hasShadow();let ue;const L=H===this;if(!this.isVisible()&&!L)return this;if(ye){ae.save();const I=this.getAbsoluteTransform(H).getMatrix();return ae.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedSceneCanvas(ae),ae.restore(),this}if(!Pe)return this;if(ae.save(),this._useBufferCanvas()){ue=this.getStage();const I=Q||ue.bufferCanvas,U=I.getContext();U.clear(),U.save(),U._applyLineJoin(this);const z=this.getAbsoluteTransform(H).getMatrix();U.transform(z[0],z[1],z[2],z[3],z[4],z[5]),Pe.call(this,U,this),U.restore();const b=I.pixelRatio;ee&&ae._applyShadow(this),ae._applyOpacity(this),ae._applyGlobalCompositeOperation(this),ae.drawImage(I._canvas,I.x||0,I.y||0,I.width/b,I.height/b)}else{if(ae._applyLineJoin(this),!L){const I=this.getAbsoluteTransform(H).getMatrix();ae.transform(I[0],I[1],I[2],I[3],I[4],I[5]),ae._applyOpacity(this),ae._applyGlobalCompositeOperation(this)}ee&&ae._applyShadow(this),Pe.call(this,ae,this)}return ae.restore(),this}drawHit(V,H,Q=!1){if(!this.shouldDrawHit(H,Q))return this;const ie=this.getLayer(),se=V||ie.hitCanvas,ae=se&&se.getContext(),ye=this.hitFunc()||this.sceneFunc(),Pe=this._getCanvasCache(),ee=Pe&&Pe.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),ee){ae.save();const L=this.getAbsoluteTransform(H).getMatrix();return ae.transform(L[0],L[1],L[2],L[3],L[4],L[5]),this._drawCachedHitCanvas(ae),ae.restore(),this}if(!ye)return this;if(ae.save(),ae._applyLineJoin(this),!(this===H)){const L=this.getAbsoluteTransform(H).getMatrix();ae.transform(L[0],L[1],L[2],L[3],L[4],L[5])}return ye.call(this,ae,this),ae.restore(),this}drawHitFromCache(V=0){const H=this._getCanvasCache(),Q=this._getCachedSceneCanvas(),ie=H.hit,se=ie.getContext(),ae=ie.getWidth(),ye=ie.getHeight();se.clear(),se.drawImage(Q._canvas,0,0,ae,ye);try{const Pe=se.getImageData(0,0,ae,ye),ee=Pe.data,ue=ee.length,L=n.Util._hexToRgb(this.colorKey);for(let I=0;I<ue;I+=4)ee[I+3]>V?(ee[I]=L.r,ee[I+1]=L.g,ee[I+2]=L.b,ee[I+3]=255):ee[I+3]=0;se.putImageData(Pe,0,0)}catch(Pe){n.Util.error("Unable to draw hit graph from cached scene canvas. "+Pe.message)}return this}hasPointerCapture(V){return a.hasPointerCapture(V,this)}setPointerCapture(V){a.setPointerCapture(V,this)}releaseCapture(V){a.releaseCapture(V,this)}}t.Shape=A,A.prototype._fillFunc=E,A.prototype._strokeFunc=k,A.prototype._fillFuncHit=p,A.prototype._strokeFuncHit=w,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,o._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",$),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",N),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",j),r.Factory.addGetterSetter(A,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"lineJoin"),r.Factory.addGetterSetter(A,"lineCap"),r.Factory.addGetterSetter(A,"sceneFunc"),r.Factory.addGetterSetter(A,"hitFunc"),r.Factory.addGetterSetter(A,"dash"),r.Factory.addGetterSetter(A,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(A,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternImage"),r.Factory.addGetterSetter(A,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(A,"fillEnabled",!0),r.Factory.addGetterSetter(A,"strokeEnabled",!0),r.Factory.addGetterSetter(A,"shadowEnabled",!0),r.Factory.addGetterSetter(A,"dashEnabled",!0),r.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(A,"fillPriority","color"),r.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(A,"fillPatternRotation",0),r.Factory.addGetterSetter(A,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Vn);Object.defineProperty(ap,"__esModule",{value:!0});ap.Layer=void 0;const co=dn,V1=hu,qu=nn,G3=lt,_9=Ci,_re=Ue,wre=Vn,Sre=rt,kre="#",bre="beforeDraw",Ere="draw",H7=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Cre=H7.length;let Ed=class extends V1.Container{constructor(e){super(e),this.canvas=new _9.SceneCanvas,this.hitCanvas=new _9.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){qu.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!qu.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(qu.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(qu.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return qu.Node.prototype.remove.call(this),e&&e.parentNode&&co.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&co.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),qu.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){co.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){co.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,co.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let s=0;s<Cre;s++){const i=H7[s],o=this._getIntersection({x:e.x+i.x*n,y:e.y+i.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=r[3];if(s===255){const i=co.Util._rgbToHex(r[0],r[1],r[2]),o=wre.shapes[kre+i];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n,r){const s=this.getLayer(),i=e||s&&s.getCanvas();return this._fire(bre,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),V1.Container.prototype.drawScene.call(this,i,n,r),this._fire(Ere,{node:this}),this}drawHit(e,n){const r=this.getLayer(),s=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),V1.Container.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){co.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return co.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return co.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};ap.Layer=Ed;Ed.prototype.nodeType="Layer";(0,Sre._registerNode)(Ed);G3.Factory.addGetterSetter(Ed,"imageSmoothingEnabled",!0);G3.Factory.addGetterSetter(Ed,"clearBeforeDraw",!0);G3.Factory.addGetterSetter(Ed,"hitGraphEnabled",!0,(0,_re.getBooleanValidator)());var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.FastLayer=void 0;const Pre=dn,$re=ap,Tre=rt;class H3 extends $re.Layer{constructor(e){super(e),this.listening(!1),Pre.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Vy.FastLayer=H3;H3.prototype.nodeType="FastLayer";(0,Tre._registerNode)(H3);var Cd={};Object.defineProperty(Cd,"__esModule",{value:!0});Cd.Group=void 0;const xre=dn,Nre=hu,Rre=rt;class q3 extends Nre.Container{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&xre.Util.throw("You may only add groups and shapes to groups.")}}Cd.Group=q3;q3.prototype.nodeType="Group";(0,Rre._registerNode)(q3);var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.Animation=void 0;const G1=rt,w9=dn,H1=function(){return G1.glob.performance&&G1.glob.performance.now?function(){return G1.glob.performance.now()}:function(){return new Date().getTime()}}();class Bi{constructor(e,n){this.id=Bi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:H1(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let s=0;s<r;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Bi.animations,r=n.length;for(let s=0;s<r;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=H1(),Bi._addAnimation(this),this}stop(){return Bi._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,s=r.length;for(let i=0;i<s;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const s=n[r],i=s.layers,o=s.func;s._updateFrameObject(H1());const a=i.length;let c;if(o?c=o.call(s,s.frame)!==!1:c=!0,!!c)for(let d=0;d<a;d++){const f=i[d];f._id!==void 0&&(e[f._id]=f)}}for(const r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Bi;e.animations.length?(e._runFrames(),w9.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,w9.Util.requestAnimFrame(this._animationLoop))}}Pd.Animation=Bi;Bi.animations=[];Bi.animIdCounter=0;Bi.animRunning=!1;var q7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=dn,n=Pd,r=nn,s=rt,i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,c=3,d=["fill","stroke","shadowColor"];let f=0;class m{constructor(_,E,k,p,w,g,C){this.prop=_,this.propFunc=E,this.begin=p,this._pos=p,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=w-this.begin,this.pause()}fire(_){const E=this[_];E&&E()}setTime(_){_>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_,this.update())}getTime(){return this._time}setPosition(_){this.prevPos=this._pos,this.propFunc(_),this._pos=_}getPosition(_){return _===void 0&&(_=this._time),this.func(_,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_){this.pause(),this._time=_,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const _=this.getTimer()-this._startTime;this.state===a?this.setTime(_):this.state===c&&this.setTime(this.duration-_)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(_){const E=this,k=_.node,p=k._id,w=_.easing||t.Easings.Linear,g=!!_.yoyo;let C,$;typeof _.duration>"u"?C=.3:_.duration===0?C=.001:C=_.duration,this.node=k,this._id=f++;const N=k.getLayer()||(k instanceof s.Konva.Stage?k.getLayers():null);N||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},N),this.tween=new m($,function(j){E._tweenFunc(j)},w,0,1,C*1e3,g),this._addListeners(),y.attrs[p]||(y.attrs[p]={}),y.attrs[p][this._id]||(y.attrs[p][this._id]={}),y.tweens[p]||(y.tweens[p]={});for($ in _)i[$]===void 0&&this._addAttr($,_[$]);this.reset(),this.onFinish=_.onFinish,this.onReset=_.onReset,this.onUpdate=_.onUpdate}_addAttr(_,E){const k=this.node,p=k._id;let w,g,C,$,N;const j=y.tweens[p][_];j&&delete y.attrs[p][j][_];let A=k.getAttr(_);if(e.Util._isArray(E))if(w=[],g=Math.max(E.length,A.length),_==="points"&&E.length!==A.length&&(E.length>A.length?($=A,A=e.Util._prepareArrayForTween(A,E,k.closed())):(C=E,E=e.Util._prepareArrayForTween(E,A,k.closed()))),_.indexOf("fill")===0)for(let G=0;G<g;G++)if(G%2===0)w.push(E[G]-A[G]);else{const V=e.Util.colorToRGBA(A[G]);N=e.Util.colorToRGBA(E[G]),A[G]=V,w.push({r:N.r-V.r,g:N.g-V.g,b:N.b-V.b,a:N.a-V.a})}else for(let G=0;G<g;G++)w.push(E[G]-A[G]);else d.indexOf(_)!==-1?(A=e.Util.colorToRGBA(A),N=e.Util.colorToRGBA(E),w={r:N.r-A.r,g:N.g-A.g,b:N.b-A.b,a:N.a-A.a}):w=E-A;y.attrs[p][this._id][_]={start:A,diff:w,end:E,trueEnd:C,trueStart:$},y.tweens[p][_]=this._id}_tweenFunc(_){const E=this.node,k=y.attrs[E._id][this._id];let p,w,g,C,$,N,j,A;for(p in k){if(w=k[p],g=w.start,C=w.diff,A=w.end,e.Util._isArray(g))if($=[],j=Math.max(g.length,A.length),p.indexOf("fill")===0)for(N=0;N<j;N++)N%2===0?$.push((g[N]||0)+C[N]*_):$.push("rgba("+Math.round(g[N].r+C[N].r*_)+","+Math.round(g[N].g+C[N].g*_)+","+Math.round(g[N].b+C[N].b*_)+","+(g[N].a+C[N].a*_)+")");else for(N=0;N<j;N++)$.push((g[N]||0)+C[N]*_);else d.indexOf(p)!==-1?$="rgba("+Math.round(g.r+C.r*_)+","+Math.round(g.g+C.g*_)+","+Math.round(g.b+C.b*_)+","+(g.a+C.a*_)+")":$=g+C*_;E.setAttr(p,$)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const _=this.node,E=y.attrs[_._id][this._id];E.points&&E.points.trueEnd&&_.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const _=this.node,E=y.attrs[_._id][this._id];E.points&&E.points.trueStart&&_.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_){return this.tween.seek(_*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const _=this.node._id,E=this._id,k=y.tweens[_];this.pause(),this.anim&&this.anim.stop();for(const p in k)delete y.tweens[_][p];delete y.attrs[_][E],y.tweens[_]&&(Object.keys(y.tweens[_]).length===0&&delete y.tweens[_],Object.keys(y.attrs[_]).length===0&&delete y.attrs[_])}}t.Tween=y,y.attrs={},y.tweens={},r.Node.prototype.to=function(v){const _=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),_&&_()},new y(v).play()},t.Easings={BackEaseIn(v,_,E,k){return E*(v/=k)*v*((1.70158+1)*v-1.70158)+_},BackEaseOut(v,_,E,k){return E*((v=v/k-1)*v*((1.70158+1)*v+1.70158)+1)+_},BackEaseInOut(v,_,E,k){let p=1.70158;return(v/=k/2)<1?E/2*(v*v*(((p*=1.525)+1)*v-p))+_:E/2*((v-=2)*v*(((p*=1.525)+1)*v+p)+2)+_},ElasticEaseIn(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k)===1?_+E:(w||(w=k*.3),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),-(p*Math.pow(2,10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w))+_)},ElasticEaseOut(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k)===1?_+E:(w||(w=k*.3),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),p*Math.pow(2,-10*v)*Math.sin((v*k-g)*(2*Math.PI)/w)+E+_)},ElasticEaseInOut(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k/2)===2?_+E:(w||(w=k*(.3*1.5)),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),v<1?-.5*(p*Math.pow(2,10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w))+_:p*Math.pow(2,-10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w)*.5+E+_)},BounceEaseOut(v,_,E,k){return(v/=k)<1/2.75?E*(7.5625*v*v)+_:v<2/2.75?E*(7.5625*(v-=1.5/2.75)*v+.75)+_:v<2.5/2.75?E*(7.5625*(v-=2.25/2.75)*v+.9375)+_:E*(7.5625*(v-=2.625/2.75)*v+.984375)+_},BounceEaseIn(v,_,E,k){return E-t.Easings.BounceEaseOut(k-v,0,E,k)+_},BounceEaseInOut(v,_,E,k){return v<k/2?t.Easings.BounceEaseIn(v*2,0,E,k)*.5+_:t.Easings.BounceEaseOut(v*2-k,0,E,k)*.5+E*.5+_},EaseIn(v,_,E,k){return E*(v/=k)*v+_},EaseOut(v,_,E,k){return-E*(v/=k)*(v-2)+_},EaseInOut(v,_,E,k){return(v/=k/2)<1?E/2*v*v+_:-E/2*(--v*(v-2)-1)+_},StrongEaseIn(v,_,E,k){return E*(v/=k)*v*v*v*v+_},StrongEaseOut(v,_,E,k){return E*((v=v/k-1)*v*v*v*v+1)+_},StrongEaseInOut(v,_,E,k){return(v/=k/2)<1?E/2*v*v*v*v*v+_:E/2*((v-=2)*v*v*v*v+2)+_},Linear(v,_,E,k){return E*v/k+_}}})(q7);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=rt,n=dn,r=nn,s=hu,i=U7,o=ap,a=Vy,c=Cd,d=Ly,f=Vn,m=Pd,y=q7,v=No,_=Ci;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:s.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:c.Group,DD:d.DD,Shape:f.Shape,shapes:f.shapes,Animation:m.Animation,Tween:y.Tween,Easings:y.Easings,Context:v.Context,Canvas:_.Canvas}),t.default=t.Konva})(j0);var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.Arc=void 0;const Hy=lt,Ore=Vn,S9=rt,qy=Ue,Ire=rt;class Vo extends Ore.Shape{_sceneFunc(e){const n=S9.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),s=S9.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),c=Math.sin(Math.min(s,Math.PI/2)),d=i*(i>0?e:n),f=o*n,m=a*(a>0?e:n),y=c*(c>0?n:e);return{x:d,y:r?-1*y:m,width:f-d,height:y-m}}}Gy.Arc=Vo;Vo.prototype._centroid=!0;Vo.prototype.className="Arc";Vo.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Ire._registerNode)(Vo);Hy.Factory.addGetterSetter(Vo,"innerRadius",0,(0,qy.getNumberValidator)());Hy.Factory.addGetterSetter(Vo,"outerRadius",0,(0,qy.getNumberValidator)());Hy.Factory.addGetterSetter(Vo,"angle",0,(0,qy.getNumberValidator)());Hy.Factory.addGetterSetter(Vo,"clockwise",!1,(0,qy.getBooleanValidator)());var By={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.Line=void 0;const Zy=lt,Are=rt,Mre=Vn,B7=Ue;function wS(t,e,n,r,s,i,o){const a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),c=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2)),d=o*a/(a+c),f=o*c/(a+c),m=n-d*(s-t),y=r-d*(i-e),v=n+f*(s-t),_=r+f*(i-e);return[m,y,v,_]}function k9(t,e){const n=t.length,r=[];for(let s=2;s<n-2;s+=2){const i=wS(t[s-2],t[s-1],t[s],t[s+1],t[s+2],t[s+3],e);isNaN(i[0])||(r.push(i[0]),r.push(i[1]),r.push(t[s]),r.push(t[s+1]),r.push(i[2]),r.push(i[3]))}return r}let Qa=class extends Mre.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),r=n.length,s=this.tension(),i=this.closed(),o=this.bezier();if(!r)return;let a=0;if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&r>4){const c=this.getTensionPoints(),d=c.length;for(a=i?0:4,i||e.quadraticCurveTo(c[0],c[1],c[2],c[3]);a<d-2;)e.bezierCurveTo(c[a++],c[a++],c[a++],c[a++],c[a++],c[a++]);i||e.quadraticCurveTo(c[d-2],c[d-1],n[r-2],n[r-1])}else if(o)for(a=2;a<r;)e.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);else for(a=2;a<r;a+=2)e.lineTo(n[a],n[a+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():k9(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,r=this.tension(),s=wS(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=wS(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=k9(e,r);return[s[2],s[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],r=e[0],s=e[1],i=e[1],o,a;for(let c=0;c<e.length/2;c++)o=e[c*2],a=e[c*2+1],n=Math.min(n,o),r=Math.max(r,o),s=Math.min(s,a),i=Math.max(i,a);return{x:n,y:s,width:r-n,height:i-s}}};lp.Line=Qa;Qa.prototype.className="Line";Qa.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Are._registerNode)(Qa);Zy.Factory.addGetterSetter(Qa,"closed",!1);Zy.Factory.addGetterSetter(Qa,"bezier",!1);Zy.Factory.addGetterSetter(Qa,"tension",0,(0,B7.getNumberValidator)());Zy.Factory.addGetterSetter(Qa,"points",[],(0,B7.getNumberArrayValidator)());var $d={},Z7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,c)=>{let d,f;const y=c/2;d=0;for(let v=0;v<20;v++)f=y*t.tValues[20][v]+y,d+=t.cValues[20][v]*r(o,a,f);return y*d};t.getCubicArcLength=e;const n=(o,a,c)=>{c===void 0&&(c=1);const d=o[0]-2*o[1]+o[2],f=a[0]-2*a[1]+a[2],m=2*o[1]-2*o[0],y=2*a[1]-2*a[0],v=4*(d*d+f*f),_=4*(d*m+f*y),E=m*m+y*y;if(v===0)return c*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const k=_/(2*v),p=E/v,w=c+k,g=p-k*k,C=w*w+g>0?Math.sqrt(w*w+g):0,$=k*k+g>0?Math.sqrt(k*k+g):0,N=k+Math.sqrt(k*k+g)!==0?g*Math.log(Math.abs((w+C)/(k+$))):0;return Math.sqrt(v)/2*(w*C-k*$+N)};t.getQuadraticArcLength=n;function r(o,a,c){const d=s(1,c,o),f=s(1,c,a),m=d*d+f*f;return Math.sqrt(m)}const s=(o,a,c)=>{const d=c.length-1;let f,m;if(d===0)return 0;if(o===0){m=0;for(let y=0;y<=d;y++)m+=t.binomialCoefficients[d][y]*Math.pow(1-a,d-y)*Math.pow(a,y)*c[y];return m}else{f=new Array(d);for(let y=0;y<d;y++)f[y]=d*(c[y+1]-c[y]);return s(o-1,a,f)}},i=(o,a,c)=>{let d=1,f=o/a,m=(o-c(f))/a,y=0;for(;d>.001;){const v=c(f+m),_=Math.abs(o-v)/a;if(_<d)d=_,f+=m;else{const E=c(f-m),k=Math.abs(o-E)/a;k<d?(d=k,f-=m):m/=2}if(y++,y>500)break}return f};t.t2length=i})(Z7);Object.defineProperty($d,"__esModule",{value:!0});$d.Path=void 0;const jre=lt,zre=rt,Dre=Vn,Bu=Z7;class jn extends Dre.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=jn.parsePathData(this.data()),this.pathLength=jn.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let r=!1;for(let s=0;s<n.length;s++){const i=n[s].command,o=n[s].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],c=o[1],d=o[2],f=o[3],m=o[4],y=o[5],v=o[6],_=o[7],E=d>f?d:f,k=d>f?1:d/f,p=d>f?f/d:1;e.translate(a,c),e.rotate(v),e.scale(k,p),e.arc(0,0,E,m,m+y,1-_),e.scale(1/k,1/p),e.rotate(-v),e.translate(-a,-c);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(c){if(c.command==="A"){const d=c.points[4],f=c.points[5],m=c.points[4]+f;let y=Math.PI/180;if(Math.abs(d-m)<y&&(y=Math.abs(d-m)),f<0)for(let v=d-y;v>m;v-=y){const _=jn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}else for(let v=d+y;v<m;v+=y){const _=jn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}}else if(c.command==="C")for(let d=0;d<=1;d+=.01){const f=jn.getPointOnCubicBezier(d,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(f.x,f.y)}else e=e.concat(c.points)});let n=e[0],r=e[0],s=e[1],i=e[1],o,a;for(let c=0;c<e.length/2;c++)o=e[c*2],a=e[c*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(s=Math.min(s,a),i=Math.max(i,a));return{x:n,y:s,width:r-n,height:i-s}}getLength(){return this.pathLength}getPointAtLength(e){return jn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,s){return Math.sqrt((r-e)*(r-e)+(s-n)*(s-n))}static getPathLength(e){let n=0;for(let r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let r,s=0,i=n.length;if(!i)return null;for(;s<i&&e>n[s].pathLength;)e-=n[s].pathLength,++s;if(s===i)return r=n[s-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return n[s].command==="M"?(r=n[s].points.slice(0,2),{x:r[0],y:r[1]}):{x:n[s].start.x,y:n[s].start.y};const o=n[s],a=o.points;switch(o.command){case"L":return jn.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return jn.getPointOnCubicBezier((0,Bu.t2length)(e,jn.getPathLength(n),E=>(0,Bu.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],E)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return jn.getPointOnQuadraticBezier((0,Bu.t2length)(e,jn.getPathLength(n),E=>(0,Bu.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],E)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const c=a[0],d=a[1],f=a[2],m=a[3],y=a[5],v=a[6];let _=a[4];return _+=y*e/o.pathLength,jn.getPointOnEllipticalArc(c,d,f,m,_,v)}return null}static getPointOnLine(e,n,r,s,i,o,a){o=o??n,a=a??r;const c=this.getLineLength(n,r,s,i);if(c<1e-10)return{x:n,y:r};if(s===n)return{x:o,y:a+(i>r?e:-e)};const d=(i-r)/(s-n),f=Math.sqrt(e*e/(1+d*d))*(s<n?-1:1),m=d*f;if(Math.abs(a-r-d*(o-n))<1e-10)return{x:o+f,y:a+m};const y=((o-n)*(s-n)+(a-r)*(i-r))/(c*c),v=n+y*(s-n),_=r+y*(i-r),E=this.getLineLength(o,a,v,_),k=Math.sqrt(e*e-E*E),p=Math.sqrt(k*k/(1+d*d))*(s<n?-1:1),w=d*p;return{x:v+p,y:_+w}}static getPointOnCubicBezier(e,n,r,s,i,o,a,c,d){function f(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function y(k){return 3*k*(1-k)*(1-k)}function v(k){return(1-k)*(1-k)*(1-k)}const _=c*f(e)+o*m(e)+s*y(e)+n*v(e),E=d*f(e)+a*m(e)+i*y(e)+r*v(e);return{x:_,y:E}}static getPointOnQuadraticBezier(e,n,r,s,i,o,a){function c(v){return v*v}function d(v){return 2*v*(1-v)}function f(v){return(1-v)*(1-v)}const m=o*c(e)+s*d(e)+n*f(e),y=a*c(e)+i*d(e)+r*f(e);return{x:m,y}}static getPointOnEllipticalArc(e,n,r,s,i,o){const a=Math.cos(o),c=Math.sin(o),d={x:r*Math.cos(i),y:s*Math.sin(i)};return{x:e+(d.x*a-d.y*c),y:n+(d.x*c+d.y*a)}}static parsePathData(e){if(!e)return[];let n=e;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let m=0;m<r.length;m++)n=n.replace(new RegExp(r[m],"g"),"|"+r[m]);const s=n.split("|"),i=[],o=[];let a=0,c=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let f;for(let m=1;m<s.length;m++){let y=s[m],v=y.charAt(0);for(y=y.slice(1),o.length=0;f=d.exec(y);)o.push(f[0]);const _=[];for(let E=0,k=o.length;E<k;E++){if(o[E]==="00"){_.push(0,0);continue}const p=parseFloat(o[E]);isNaN(p)?_.push(0):_.push(p)}for(;_.length>0&&!isNaN(_[0]);){let E="",k=[];const p=a,w=c;let g,C,$,N,j,A,G,V,H,Q;switch(v){case"l":a+=_.shift(),c+=_.shift(),E="L",k.push(a,c);break;case"L":a=_.shift(),c=_.shift(),k.push(a,c);break;case"m":const ie=_.shift(),se=_.shift();if(a+=ie,c+=se,E="M",i.length>2&&i[i.length-1].command==="z"){for(let ae=i.length-2;ae>=0;ae--)if(i[ae].command==="M"){a=i[ae].points[0]+ie,c=i[ae].points[1]+se;break}}k.push(a,c),v="l";break;case"M":a=_.shift(),c=_.shift(),E="M",k.push(a,c),v="L";break;case"h":a+=_.shift(),E="L",k.push(a,c);break;case"H":a=_.shift(),E="L",k.push(a,c);break;case"v":c+=_.shift(),E="L",k.push(a,c);break;case"V":c=_.shift(),E="L",k.push(a,c);break;case"C":k.push(_.shift(),_.shift(),_.shift(),_.shift()),a=_.shift(),c=_.shift(),k.push(a,c);break;case"c":k.push(a+_.shift(),c+_.shift(),a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="C",k.push(a,c);break;case"S":C=a,$=c,g=i[i.length-1],g.command==="C"&&(C=a+(a-g.points[2]),$=c+(c-g.points[3])),k.push(C,$,_.shift(),_.shift()),a=_.shift(),c=_.shift(),E="C",k.push(a,c);break;case"s":C=a,$=c,g=i[i.length-1],g.command==="C"&&(C=a+(a-g.points[2]),$=c+(c-g.points[3])),k.push(C,$,a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="C",k.push(a,c);break;case"Q":k.push(_.shift(),_.shift()),a=_.shift(),c=_.shift(),k.push(a,c);break;case"q":k.push(a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="Q",k.push(a,c);break;case"T":C=a,$=c,g=i[i.length-1],g.command==="Q"&&(C=a+(a-g.points[0]),$=c+(c-g.points[1])),a=_.shift(),c=_.shift(),E="Q",k.push(C,$,a,c);break;case"t":C=a,$=c,g=i[i.length-1],g.command==="Q"&&(C=a+(a-g.points[0]),$=c+(c-g.points[1])),a+=_.shift(),c+=_.shift(),E="Q",k.push(C,$,a,c);break;case"A":N=_.shift(),j=_.shift(),A=_.shift(),G=_.shift(),V=_.shift(),H=a,Q=c,a=_.shift(),c=_.shift(),E="A",k=this.convertEndpointToCenterParameterization(H,Q,a,c,G,V,N,j,A);break;case"a":N=_.shift(),j=_.shift(),A=_.shift(),G=_.shift(),V=_.shift(),H=a,Q=c,a+=_.shift(),c+=_.shift(),E="A",k=this.convertEndpointToCenterParameterization(H,Q,a,c,G,V,N,j,A);break}i.push({command:E||v,points:k,start:{x:p,y:w},pathLength:this.calcLength(p,w,E||v,k)})}(v==="z"||v==="Z")&&i.push({command:"z",points:[],start:void 0,pathLength:0})}return i}static calcLength(e,n,r,s){let i,o,a,c;const d=jn;switch(r){case"L":return d.getLineLength(e,n,s[0],s[1]);case"C":return(0,Bu.getCubicArcLength)([e,s[0],s[2],s[4]],[n,s[1],s[3],s[5]],1);case"Q":return(0,Bu.getQuadraticArcLength)([e,s[0],s[2]],[n,s[1],s[3]],1);case"A":i=0;const f=s[4],m=s[5],y=s[4]+m;let v=Math.PI/180;if(Math.abs(f-y)<v&&(v=Math.abs(f-y)),o=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),m<0)for(c=f-v;c>y;c-=v)a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(c=f+v;c<y;c+=v)a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],y,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,s,i,o,a,c,d){const f=d*(Math.PI/180),m=Math.cos(f)*(e-r)/2+Math.sin(f)*(n-s)/2,y=-1*Math.sin(f)*(e-r)/2+Math.cos(f)*(n-s)/2,v=m*m/(a*a)+y*y/(c*c);v>1&&(a*=Math.sqrt(v),c*=Math.sqrt(v));let _=Math.sqrt((a*a*(c*c)-a*a*(y*y)-c*c*(m*m))/(a*a*(y*y)+c*c*(m*m)));i===o&&(_*=-1),isNaN(_)&&(_=0);const E=_*a*y/c,k=_*-c*m/a,p=(e+r)/2+Math.cos(f)*E-Math.sin(f)*k,w=(n+s)/2+Math.sin(f)*E+Math.cos(f)*k,g=function(V){return Math.sqrt(V[0]*V[0]+V[1]*V[1])},C=function(V,H){return(V[0]*H[0]+V[1]*H[1])/(g(V)*g(H))},$=function(V,H){return(V[0]*H[1]<V[1]*H[0]?-1:1)*Math.acos(C(V,H))},N=$([1,0],[(m-E)/a,(y-k)/c]),j=[(m-E)/a,(y-k)/c],A=[(-1*m-E)/a,(-1*y-k)/c];let G=$(j,A);return C(j,A)<=-1&&(G=Math.PI),C(j,A)>=1&&(G=0),o===0&&G>0&&(G=G-2*Math.PI),o===1&&G<0&&(G=G+2*Math.PI),[p,w,a,c,N,G,f,o]}}$d.Path=jn;jn.prototype.className="Path";jn.prototype._attrsAffectingSize=["data"];(0,zre._registerNode)(jn);jre.Factory.addGetterSetter(jn,"data");Object.defineProperty(By,"__esModule",{value:!0});By.Arrow=void 0;const Wy=lt,Fre=lp,W7=Ue,Lre=rt,b9=$d;class mu extends Fre.Line{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,r=this.points();let s=r;const i=this.tension()!==0&&r.length>4;i&&(s=this.getTensionPoints());const o=this.pointerLength(),a=r.length;let c,d;if(i){const y=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],r[a-2],r[a-1]],v=b9.Path.calcLength(s[s.length-4],s[s.length-3],"C",y),_=b9.Path.getPointOnQuadraticBezier(Math.min(1,1-o/v),y[0],y[1],y[2],y[3],y[4],y[5]);c=r[a-2]-_.x,d=r[a-1]-_.y}else c=r[a-2]-r[a-4],d=r[a-1]-r[a-3];const f=(Math.atan2(d,c)+n)%n,m=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(f),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(c=(s[0]+s[2])/2-r[0],d=(s[1]+s[3])/2-r[1]):(c=r[2]-r[0],d=r[3]-r[1]),e.rotate((Math.atan2(-d,-c)+n)%n),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}By.Arrow=mu;mu.prototype.className="Arrow";(0,Lre._registerNode)(mu);Wy.Factory.addGetterSetter(mu,"pointerLength",10,(0,W7.getNumberValidator)());Wy.Factory.addGetterSetter(mu,"pointerWidth",10,(0,W7.getNumberValidator)());Wy.Factory.addGetterSetter(mu,"pointerAtBeginning",!1);Wy.Factory.addGetterSetter(mu,"pointerAtEnding",!0);var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.Circle=void 0;const Ure=lt,Vre=Vn,Gre=Ue,Hre=rt;let Td=class extends Vre.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Ky.Circle=Td;Td.prototype._centroid=!0;Td.prototype.className="Circle";Td.prototype._attrsAffectingSize=["radius"];(0,Hre._registerNode)(Td);Ure.Factory.addGetterSetter(Td,"radius",0,(0,Gre.getNumberValidator)());var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});Qy.Ellipse=void 0;const B3=lt,qre=Vn,K7=Ue,Bre=rt;class Ya extends qre.Shape{_sceneFunc(e){const n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Qy.Ellipse=Ya;Ya.prototype.className="Ellipse";Ya.prototype._centroid=!0;Ya.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Bre._registerNode)(Ya);B3.Factory.addComponentsGetterSetter(Ya,"radius",["x","y"]);B3.Factory.addGetterSetter(Ya,"radiusX",0,(0,K7.getNumberValidator)());B3.Factory.addGetterSetter(Ya,"radiusY",0,(0,K7.getNumberValidator)());var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.Image=void 0;const q1=dn,gu=lt,Zre=Vn,Wre=rt,up=Ue;class Ws extends Zre.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),s=this.cornerRadius(),i=this.attrs.image;let o;if(i){const a=this.attrs.cropWidth,c=this.attrs.cropHeight;a&&c?o=[i,this.cropX(),this.cropY(),a,c,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||s)&&(e.beginPath(),s?q1.Util.drawRoundedRectPath(e,n,r,s):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(s&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const n=this.width(),r=this.height(),s=this.cornerRadius();e.beginPath(),s?q1.Util.drawRoundedRectPath(e,n,r,s):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){const s=q1.Util.createImageElement();s.onload=function(){const i=new Ws({image:s});n(i)},s.onerror=r,s.crossOrigin="Anonymous",s.src=e}}Yy.Image=Ws;Ws.prototype.className="Image";(0,Wre._registerNode)(Ws);gu.Factory.addGetterSetter(Ws,"cornerRadius",0,(0,up.getNumberOrArrayOfNumbersValidator)(4));gu.Factory.addGetterSetter(Ws,"image");gu.Factory.addComponentsGetterSetter(Ws,"crop",["x","y","width","height"]);gu.Factory.addGetterSetter(Ws,"cropX",0,(0,up.getNumberValidator)());gu.Factory.addGetterSetter(Ws,"cropY",0,(0,up.getNumberValidator)());gu.Factory.addGetterSetter(Ws,"cropWidth",0,(0,up.getNumberValidator)());gu.Factory.addGetterSetter(Ws,"cropHeight",0,(0,up.getNumberValidator)());var ad={};Object.defineProperty(ad,"__esModule",{value:!0});ad.Tag=ad.Label=void 0;const Xy=lt,Kre=Vn,Qre=Cd,Z3=Ue,Q7=rt,Y7=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Yre="Change.konva",Xre="none",SS="up",kS="right",bS="down",ES="left",Jre=Y7.length;class W3 extends Qre.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,r;const s=function(){n._sync()};for(r=0;r<Jre;r++)e.on(Y7[r]+Yre,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),r,s,i,o,a,c,d;if(e&&n){switch(r=e.width(),s=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),d=n.pointerHeight(),a=0,c=0,i){case SS:a=r/2,c=-1*d;break;case kS:a=r+o,c=s/2;break;case bS:a=r/2,c=s+d;break;case ES:a=-1*o,c=s/2;break}n.setAttrs({x:-1*a,y:-1*c,width:r,height:s}),e.setAttrs({x:-1*a,y:-1*c})}}}ad.Label=W3;W3.prototype.className="Label";(0,Q7._registerNode)(W3);class yu extends Kre.Shape{_sceneFunc(e){const n=this.width(),r=this.height(),s=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let c=0,d=0,f=0,m=0;typeof a=="number"?c=d=f=m=Math.min(a,n/2,r/2):(c=Math.min(a[0]||0,n/2,r/2),d=Math.min(a[1]||0,n/2,r/2),m=Math.min(a[2]||0,n/2,r/2),f=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(c,0),s===SS&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-d,0),e.arc(n-d,d,d,Math.PI*3/2,0,!1),s===kS&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-m),e.arc(n-m,r-m,m,0,Math.PI/2,!1),s===bS&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(f,r),e.arc(f,r-f,f,Math.PI/2,Math.PI,!1),s===ES&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,r=this.pointerWidth(),s=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return i===SS?(n-=s,a+=s):i===bS?a+=s:i===ES?(e-=r*1.5,o+=r):i===kS&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}}ad.Tag=yu;yu.prototype.className="Tag";(0,Q7._registerNode)(yu);Xy.Factory.addGetterSetter(yu,"pointerDirection",Xre);Xy.Factory.addGetterSetter(yu,"pointerWidth",0,(0,Z3.getNumberValidator)());Xy.Factory.addGetterSetter(yu,"pointerHeight",0,(0,Z3.getNumberValidator)());Xy.Factory.addGetterSetter(yu,"cornerRadius",0,(0,Z3.getNumberOrArrayOfNumbersValidator)(4));var cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.Rect=void 0;const ese=lt,tse=Vn,nse=rt,rse=dn,sse=Ue;let Jy=class extends tse.Shape{_sceneFunc(e){const n=this.cornerRadius(),r=this.width(),s=this.height();e.beginPath(),n?rse.Util.drawRoundedRectPath(e,r,s,n):e.rect(0,0,r,s),e.closePath(),e.fillStrokeShape(this)}};cp.Rect=Jy;Jy.prototype.className="Rect";(0,nse._registerNode)(Jy);ese.Factory.addGetterSetter(Jy,"cornerRadius",0,(0,sse.getNumberOrArrayOfNumbersValidator)(4));var ev={};Object.defineProperty(ev,"__esModule",{value:!0});ev.RegularPolygon=void 0;const X7=lt,ise=Vn,J7=Ue,ose=rt;class vu extends ise.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let s=0;s<e;s++)r.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();let n=e[0].x,r=e[0].y,s=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),s=Math.min(s,o.y),i=Math.max(i,o.y)}),{x:n,y:s,width:r-n,height:i-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}ev.RegularPolygon=vu;vu.prototype.className="RegularPolygon";vu.prototype._centroid=!0;vu.prototype._attrsAffectingSize=["radius"];(0,ose._registerNode)(vu);X7.Factory.addGetterSetter(vu,"radius",0,(0,J7.getNumberValidator)());X7.Factory.addGetterSetter(vu,"sides",0,(0,J7.getNumberValidator)());var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.Ring=void 0;const eO=lt,ase=Vn,tO=Ue,lse=rt,E9=Math.PI*2;class _u extends ase.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,E9,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),E9,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}tv.Ring=_u;_u.prototype.className="Ring";_u.prototype._centroid=!0;_u.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,lse._registerNode)(_u);eO.Factory.addGetterSetter(_u,"innerRadius",0,(0,tO.getNumberValidator)());eO.Factory.addGetterSetter(_u,"outerRadius",0,(0,tO.getNumberValidator)());var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.Sprite=void 0;const wu=lt,use=Vn,cse=Pd,nO=Ue,dse=rt;class no extends use.Shape{constructor(e){super(e),this._updated=!0,this.anim=new cse.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),r=this.frameIndex(),s=r*4,i=this.animations()[n],o=this.frameOffsets(),a=i[s+0],c=i[s+1],d=i[s+2],f=i[s+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,d,f),e.closePath(),e.fillStrokeShape(this)),m)if(o){const y=o[n],v=r*2;e.drawImage(m,a,c,d,f,y[v+0],y[v+1],d,f)}else e.drawImage(m,a,c,d,f,0,0,d,f)}_hitFunc(e){const n=this.animation(),r=this.frameIndex(),s=r*4,i=this.animations()[n],o=this.frameOffsets(),a=i[s+2],c=i[s+3];if(e.beginPath(),o){const d=o[n],f=r*2;e.rect(d[f+0],d[f+1],a,c)}else e.rect(0,0,a,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),r=this.animations(),s=r[n],i=s.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}nv.Sprite=no;no.prototype.className="Sprite";(0,dse._registerNode)(no);wu.Factory.addGetterSetter(no,"animation");wu.Factory.addGetterSetter(no,"animations");wu.Factory.addGetterSetter(no,"frameOffsets");wu.Factory.addGetterSetter(no,"image");wu.Factory.addGetterSetter(no,"frameIndex",0,(0,nO.getNumberValidator)());wu.Factory.addGetterSetter(no,"frameRate",17,(0,nO.getNumberValidator)());wu.Factory.backCompat(no,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.Star=void 0;const K3=lt,fse=Vn,Q3=Ue,hse=rt;class Xa extends fse.Shape{_sceneFunc(e){const n=this.innerRadius(),r=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(let i=1;i<s*2;i++){const o=i%2===0?r:n,a=o*Math.sin(i*Math.PI/s),c=-1*o*Math.cos(i*Math.PI/s);e.lineTo(a,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}rv.Star=Xa;Xa.prototype.className="Star";Xa.prototype._centroid=!0;Xa.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,hse._registerNode)(Xa);K3.Factory.addGetterSetter(Xa,"numPoints",5,(0,Q3.getNumberValidator)());K3.Factory.addGetterSetter(Xa,"innerRadius",0,(0,Q3.getNumberValidator)());K3.Factory.addGetterSetter(Xa,"outerRadius",0,(0,Q3.getNumberValidator)());var xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.Text=void 0;xd.stringToArray=Sl;const CS=dn,Pr=lt,pse=Vn,B1=rt,Ja=Ue,mse=rt;function Sl(t){return[...t].reduce((e,n,r,s)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const i=s[r+1];i&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(i)?(e.push(n+i),s[r+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(s[r+1]||""))?e.push(n+s[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Zu="auto",gse="center",rO="inherit",df="justify",yse="Change.konva",vse="2d",C9="-",sO="left",_se="text",wse="Text",Sse="top",kse="bottom",P9="middle",iO="normal",bse="px ",qm=" ",Ese="right",$9="rtl",Cse="word",Pse="char",T9="none",Z1="",oO=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],$se=oO.length;function Tse(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}let Bm;function W1(){return Bm||(Bm=CS.Util.createCanvasElement().getContext(vse),Bm)}function xse(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Nse(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Rse(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let yn=class extends pse.Shape{constructor(e){super(Rse(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<$se;n++)this.on(oO[n]+yse,this._setTextData);this._setTextData()}_sceneFunc(e){const n=this.textArr,r=n.length;if(!this.text())return;let s=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,a=this.verticalAlign(),c=this.direction(),d=0,f=this.align(),m=this.getWidth(),y=this.letterSpacing(),v=this.fill(),_=this.textDecoration(),E=_.indexOf("underline")!==-1,k=_.indexOf("line-through")!==-1,p;c=c===rO?e.direction:c;let w=o/2,g=P9;if(B1.Konva._fixTextRendering){const C=this.measureSize("M");g="alphabetic",w=(C.fontBoundingBoxAscent-C.fontBoundingBoxDescent)/2+o/2}for(c===$9&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",g),e.setAttr("textAlign",sO),a===P9?d=(this.getHeight()-r*o-s*2)/2:a===kse&&(d=this.getHeight()-r*o-s*2),e.translate(s,d+s),p=0;p<r;p++){let C=0,$=0;const N=n[p],j=N.text,A=N.width,G=N.lastInParagraph;if(e.save(),f===Ese?C+=m-A-s*2:f===gse&&(C+=(m-A-s*2)/2),E){e.save(),e.beginPath();const V=B1.Konva._fixTextRendering?Math.round(i/4):Math.round(i/2),H=C,Q=w+$+V;e.moveTo(H,Q);const ie=f===df&&!G?m-s*2:A;e.lineTo(H+Math.round(ie),Q),e.lineWidth=i/15;const se=this._getLinearGradient();e.strokeStyle=se||v,e.stroke(),e.restore()}if(k){e.save(),e.beginPath();const V=B1.Konva._fixTextRendering?-Math.round(i/4):0;e.moveTo(C,w+$+V);const H=f===df&&!G?m-s*2:A;e.lineTo(C+Math.round(H),w+$+V),e.lineWidth=i/15;const Q=this._getLinearGradient();e.strokeStyle=Q||v,e.stroke(),e.restore()}if(c!==$9&&(y!==0||f===df)){const V=j.split(" ").length-1,H=Sl(j);for(let Q=0;Q<H.length;Q++){const ie=H[Q];ie===" "&&!G&&f===df&&(C+=(m-s*2-A)/V),this._partialTextX=C,this._partialTextY=w+$,this._partialText=ie,e.fillStrokeShape(this),C+=this.measureSize(ie).width+y}}else y!==0&&e.setAttr("letterSpacing",`${y}px`),this._partialTextX=C,this._partialTextY=w+$,this._partialText=j,e.fillStrokeShape(this);e.restore(),r>1&&(w+=o)}}_hitFunc(e){const n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=CS.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(_se,n),this}getWidth(){return this.attrs.width===Zu||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Zu||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return CS.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,s,i,o,a,c,d,f,m,y;let v=W1(),_=this.fontSize(),E;v.save(),v.font=this._getContextFont(),E=v.measureText(e),v.restore();const k=_/100;return{actualBoundingBoxAscent:(n=E.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*k,actualBoundingBoxDescent:(r=E.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(s=E.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*k,actualBoundingBoxRight:(i=E.actualBoundingBoxRight)!==null&&i!==void 0?i:75.732421875*k,alphabeticBaseline:(o=E.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=E.emHeightAscent)!==null&&a!==void 0?a:100*k,emHeightDescent:(c=E.emHeightDescent)!==null&&c!==void 0?c:-20*k,fontBoundingBoxAscent:(d=E.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*k,fontBoundingBoxDescent:(f=E.fontBoundingBoxDescent)!==null&&f!==void 0?f:21*k,hangingBaseline:(m=E.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*k,ideographicBaseline:(y=E.ideographicBaseline)!==null&&y!==void 0?y:-21*k,width:E.width,height:_}}_getContextFont(){return this.fontStyle()+qm+this.fontVariant()+qm+(this.fontSize()+bse)+Tse(this.fontFamily())}_addTextLine(e){this.align()===df&&(e=e.trim());const r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),r=e.length;return W1().measureText(e).width+n*r}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),r=0,s=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,a=i!==Zu&&i!==void 0,c=o!==Zu&&o!==void 0,d=this.padding(),f=i-d*2,m=o-d*2,y=0,v=this.wrap(),_=v!==T9,E=v!==Pse&&_,k=this.ellipsis();this.textArr=[],W1().font=this._getContextFont();const p=k?this._getTextWidth(Z1):0;for(let w=0,g=e.length;w<g;++w){let C=e[w],$=this._getTextWidth(C);if(a&&$>f)for(;C.length>0;){let N=0,j=Sl(C).length,A="",G=0;for(;N<j;){const V=N+j>>>1,H=Sl(C),Q=H.slice(0,V+1).join(""),ie=this._getTextWidth(Q);(k&&c&&y+s>m?ie+p:ie)<=f?(N=V+1,A=Q,G=ie):j=V}if(A){if(E){const Q=Sl(C),ie=Sl(A),se=Q[ie.length],ae=se===qm||se===C9;let ye;if(ae&&G<=f)ye=ie.length;else{const Pe=ie.lastIndexOf(qm),ee=ie.lastIndexOf(C9);ye=Math.max(Pe,ee)+1}ye>0&&(N=ye,A=Q.slice(0,N).join(""),G=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),r=Math.max(r,G),y+=s,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(C=Sl(C).slice(N).join("").trimLeft(),C.length>0&&($=this._getTextWidth(C),$<=f)){this._addTextLine(C),y+=s,r=Math.max(r,$);break}}else break}else this._addTextLine(C),y+=s,r=Math.max(r,$),this._shouldHandleEllipsis(y)&&w<g-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&y+s>m)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){const n=+this.fontSize(),r=this.lineHeight()*n,s=this.attrs.height,i=s!==Zu&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==T9)||i&&e+r>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Zu&&e!==void 0,r=this.padding(),s=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!i||(n&&(this._getTextWidth(o.text+Z1)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Z1))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};xd.Text=yn;yn.prototype._fillFunc=xse;yn.prototype._strokeFunc=Nse;yn.prototype.className=wse;yn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,mse._registerNode)(yn);Pr.Factory.overWriteSetter(yn,"width",(0,Ja.getNumberOrAutoValidator)());Pr.Factory.overWriteSetter(yn,"height",(0,Ja.getNumberOrAutoValidator)());Pr.Factory.addGetterSetter(yn,"direction",rO);Pr.Factory.addGetterSetter(yn,"fontFamily","Arial");Pr.Factory.addGetterSetter(yn,"fontSize",12,(0,Ja.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"fontStyle",iO);Pr.Factory.addGetterSetter(yn,"fontVariant",iO);Pr.Factory.addGetterSetter(yn,"padding",0,(0,Ja.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"align",sO);Pr.Factory.addGetterSetter(yn,"verticalAlign",Sse);Pr.Factory.addGetterSetter(yn,"lineHeight",1,(0,Ja.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"wrap",Cse);Pr.Factory.addGetterSetter(yn,"ellipsis",!1,(0,Ja.getBooleanValidator)());Pr.Factory.addGetterSetter(yn,"letterSpacing",0,(0,Ja.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"text","",(0,Ja.getStringValidator)());Pr.Factory.addGetterSetter(yn,"textDecoration","");var sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.TextPath=void 0;const K1=dn,Ti=lt,Ose=Vn,ff=$d,Q1=xd,aO=Ue,Ise=rt,Ase="",lO="normal";function uO(t){t.fillText(this.partialText,0,0)}function cO(t){t.strokeText(this.partialText,0,0)}class Gn extends Ose.Shape{constructor(e){super(e),this.dummyCanvas=K1.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ff.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:ff.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ff.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),r=this.fill(),s=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(let o=0;o<i.length;o++){e.save();const a=i[o].p0;e.translate(a.x,a.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;e.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const s=n[r].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return K1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Q1.Text.prototype.setText.call(this,e)}_getContextFont(){return Q1.Text.prototype._getContextFont.call(this)}_getTextSize(e){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const s=r.measureText(e);return r.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),s=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const c=(0,Q1.stringToArray)(this.text());let d=a;for(let f=0;f<c.length;f++){const m=this._getPointAtLength(d);if(!m)return;let y=this._getTextSize(c[f]).width+r;if(c[f]===" "&&s==="justify"){const w=this.text().split(" ").length-1;y+=(this.pathLength-o)/w}const v=this._getPointAtLength(d+y);if(!v)return;const _=ff.Path.getLineLength(m.x,m.y,v.x,v.y);let E=0;if(i)try{E=i(c[f-1],c[f])*this.fontSize()}catch{E=0}m.x+=E,v.x+=E,this.textWidth+=E;const k=ff.Path.getPointOnLine(E+_/2,m.x,m.y,v.x,v.y),p=Math.atan2(v.y-m.y,v.x-m.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:c[f],rotation:p,p0:m,p1:v}),d+=y}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(d){e.push(d.p0.x),e.push(d.p0.y),e.push(d.p1.x),e.push(d.p1.y)});let n=e[0]||0,r=e[0]||0,s=e[1]||0,i=e[1]||0,o,a;for(let d=0;d<e.length/2;d++)o=e[d*2],a=e[d*2+1],n=Math.min(n,o),r=Math.max(r,o),s=Math.min(s,a),i=Math.max(i,a);const c=this.fontSize();return{x:n-c/2,y:s-c/2,width:r-n+c,height:i-s+c}}destroy(){return K1.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}sv.TextPath=Gn;Gn.prototype._fillFunc=uO;Gn.prototype._strokeFunc=cO;Gn.prototype._fillFuncHit=uO;Gn.prototype._strokeFuncHit=cO;Gn.prototype.className="TextPath";Gn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,Ise._registerNode)(Gn);Ti.Factory.addGetterSetter(Gn,"data");Ti.Factory.addGetterSetter(Gn,"fontFamily","Arial");Ti.Factory.addGetterSetter(Gn,"fontSize",12,(0,aO.getNumberValidator)());Ti.Factory.addGetterSetter(Gn,"fontStyle",lO);Ti.Factory.addGetterSetter(Gn,"align","left");Ti.Factory.addGetterSetter(Gn,"letterSpacing",0,(0,aO.getNumberValidator)());Ti.Factory.addGetterSetter(Gn,"textBaseline","middle");Ti.Factory.addGetterSetter(Gn,"fontVariant",lO);Ti.Factory.addGetterSetter(Gn,"text",Ase);Ti.Factory.addGetterSetter(Gn,"textDecoration","");Ti.Factory.addGetterSetter(Gn,"kerningFunc",void 0);var iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.Transformer=void 0;const It=dn,Et=lt,x9=nn,Mse=Vn,jse=cp,N9=Cd,di=rt,el=Ue,zse=rt,dO="tr-konva",Dse=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${dO}`).join(" "),R9="nodesRect",Fse=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Lse={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Use="ontouchstart"in di.Konva._global;function Vse(t,e,n){if(t==="rotater")return n;e+=It.Util.degToRad(Lse[t]||0);const r=(It.Util.radToDeg(e)%360+360)%360;return It.Util._inRange(r,315+22.5,360)||It.Util._inRange(r,0,22.5)?"ns-resize":It.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":It.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":It.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":It.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":It.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":It.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":It.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(It.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const D0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Gse(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function fO(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),s=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:s}}function Hse(t,e){const n=Gse(t);return fO(t,e,n)}function qse(t,e,n){let r=e;for(let s=0;s<t.length;s++){const i=di.Konva.getAngle(t[s]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let PS=0;class mt extends N9.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Dse,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return It.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return dO+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(s=>s.isAncestorOf(this)?(It.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const i=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,i)}s.on(Fse.map(o=>o+`.${this._getEventNamespace()}`).join(" "),i),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,i),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const s=e.getAbsolutePosition(),i=s.x-n.x,o=s.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const c=a.getAbsolutePosition();a.setAbsolutePosition({x:c.x+i,y:c.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R9),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R9,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=s.x*i.x-e.offsetX()*i.x,c=s.y*i.y-e.offsetY()*i.y,d=(di.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:o.x+a*Math.cos(d)+c*Math.sin(-d),y:o.y+c*Math.cos(d)+a*Math.sin(d),width:s.width*i.x,height:s.height*i.y,rotation:d};return fO(f,-di.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(d=>{const f=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}],y=d.getAbsoluteTransform();m.forEach(function(v){const _=y.point(v);n.push(_)})});const r=new It.Transform;r.rotate(-di.Konva.getAngle(this.rotation()));let s=1/0,i=1/0,o=-1/0,a=-1/0;n.forEach(function(d){const f=r.point(d);s===void 0&&(s=o=f.x,i=a=f.y),s=Math.min(s,f.x),i=Math.min(i,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),r.invert();const c=r.point({x:s,y:i});return{x:c.x,y:c.y,width:o-s,height:a-i,rotation:di.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),D0.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new jse.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Use?10:"auto"}),r=this;n.on("mousedown touchstart",function(s){r._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{const s=di.Konva.getAngle(this.rotation()),i=this.rotateAnchorCursor(),o=Vse(e,s,i);n.getStage().content&&(n.getStage().content.style.cursor=o),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new Mse.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const s=r.getParent(),i=s.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.moveTo(r.width()/2,-i),s.rotateEnabled()&&s.rotateLineVisible()&&n.lineTo(r.width()/2,-s.rotateAnchorOffset()*It.Util._sign(r.height())-i),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.fillStrokeShape(r)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,s=n.height,i=Math.sqrt(Math.pow(r,2)+Math.pow(s,2));this.sin=Math.abs(s/i),this.cos=Math.abs(r/i),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},PS++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){let n,r,s;const i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let c={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const d=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(d,c,e)),i.setAbsolutePosition(c);const f=i.getAbsolutePosition();if(d.x===f.x&&d.y===f.y)return;if(this._movingAnchorName==="rotater"){const w=this._getNodeRect();n=i.x()-w.width/2,r=-i.y()+w.height/2;let g=Math.atan2(-r,n)+Math.PI/2;w.height<0&&(g-=Math.PI);const $=di.Konva.getAngle(this.rotation())+g,N=di.Konva.getAngle(this.rotationSnapTolerance()),A=qse(this.rotationSnaps(),$,N)-w.rotation,G=Hse(w,A);this._fitNodesInto(G,e);return}const m=this.shiftBehavior();let y;m==="inverted"?y=this.keepRatio()&&!e.shiftKey:m==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;let v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(w.x-i.x(),2)+Math.pow(w.y-i.y(),2));const g=this.findOne(".top-left").x()>w.x?-1:1,C=this.findOne(".top-left").y()>w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".top-left").x(w.x-n),this.findOne(".top-left").y(w.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(i.y());else if(this._movingAnchorName==="top-right"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(i.x()-w.x,2)+Math.pow(w.y-i.y(),2));const g=this.findOne(".top-right").x()<w.x?-1:1,C=this.findOne(".top-right").y()>w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".top-right").x(w.x+n),this.findOne(".top-right").y(w.y-r)}var _=i.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(i.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(i.x());else if(this._movingAnchorName==="bottom-left"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(w.x-i.x(),2)+Math.pow(i.y()-w.y,2));const g=w.x<i.x()?-1:1,C=i.y()<w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,i.x(w.x-n),i.y(w.y+r)}_=i.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(i.y());else if(this._movingAnchorName==="bottom-right"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(i.x()-w.x,2)+Math.pow(i.y()-w.y,2));const g=this.findOne(".bottom-right").x()<w.x?-1:1,C=this.findOne(".bottom-right").y()<w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".bottom-right").x(w.x+n),this.findOne(".bottom-right").y(w.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(v=this.centeredScaling()||e.altKey,v){const w=this.findOne(".top-left"),g=this.findOne(".bottom-right"),C=w.x(),$=w.y(),N=this.getWidth()-g.x(),j=this.getHeight()-g.y();g.move({x:-C,y:-$}),w.move({x:N,y:j})}const E=this.findOne(".top-left").getAbsolutePosition();n=E.x,r=E.y;const k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),p=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:k,height:p,rotation:di.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();PS--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(s=>{var i;s._fire("transformend",{evt:e,target:s}),(i=s.getLayer())===null||i===void 0||i.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const r=this._getNodeRect(),s=1;if(It.Util._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(It.Util._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const i=new It.Transform;if(i.rotate(di.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=i.point({x:-this.padding()*2,y:0});e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=i.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=i.point({x:0,y:-this.padding()*2});e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=i.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(r,e);y?e=y:It.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new It.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/o,r.height/o);const c=new It.Transform,d=e.width/o,f=e.height/o;this.flipEnabled()===!1?(c.translate(e.x,e.y),c.rotate(e.rotation),c.translate(e.width<0?e.width:0,e.height<0?e.height:0),c.scale(Math.abs(d),Math.abs(f))):(c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(d,f));const m=c.multiply(a.invert());this._nodes.forEach(y=>{var v;const _=y.getParent().getAbsoluteTransform(),E=y.getTransform().copy();E.translate(y.offsetX(),y.offsetY());const k=new It.Transform;k.multiply(_.copy().invert()).multiply(m).multiply(_).multiply(E);const p=k.decompose();y.setAttrs(p),(v=y.getLayer())===null||v===void 0||v.batchDraw()}),this.rotation(It.Util._getRotation(e.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(It.Util._getRotation(n.rotation));const r=n.width,s=n.height,i=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),c=this.anchorSize(),d=this.find("._anchor");d.forEach(m=>{m.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+a,offsetY:c/2+a,visible:o&&i.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+a,visible:o&&i.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-a,offsetY:c/2+a,visible:o&&i.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:c/2+a,visible:o&&i.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:s/2,offsetX:c/2-a,visible:o&&i.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:c/2+a,offsetY:c/2-a,visible:o&&i.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:s,offsetY:c/2-a,visible:o&&i.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:s,offsetX:c/2-a,offsetY:c/2-a,visible:o&&i.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*It.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const f=this.anchorStyleFunc();f&&d.forEach(m=>{f(m)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),N9.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return x9.Node.prototype.toObject.call(this)}clone(e){return x9.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}iv.Transformer=mt;mt.isTransforming=()=>PS>0;function Bse(t){return t instanceof Array||It.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){D0.indexOf(e)===-1&&It.Util.warn("Unknown anchor name: "+e+". Available names are: "+D0.join(", "))}),t||[]}mt.prototype.className="Transformer";(0,zse._registerNode)(mt);Et.Factory.addGetterSetter(mt,"enabledAnchors",D0,Bse);Et.Factory.addGetterSetter(mt,"flipEnabled",!0,(0,el.getBooleanValidator)());Et.Factory.addGetterSetter(mt,"resizeEnabled",!0);Et.Factory.addGetterSetter(mt,"anchorSize",10,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"rotateEnabled",!0);Et.Factory.addGetterSetter(mt,"rotateLineVisible",!0);Et.Factory.addGetterSetter(mt,"rotationSnaps",[]);Et.Factory.addGetterSetter(mt,"rotateAnchorOffset",50,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"rotateAnchorCursor","crosshair");Et.Factory.addGetterSetter(mt,"rotationSnapTolerance",5,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderEnabled",!0);Et.Factory.addGetterSetter(mt,"anchorStroke","rgb(0, 161, 255)");Et.Factory.addGetterSetter(mt,"anchorStrokeWidth",1,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"anchorFill","white");Et.Factory.addGetterSetter(mt,"anchorCornerRadius",0,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderStroke","rgb(0, 161, 255)");Et.Factory.addGetterSetter(mt,"borderStrokeWidth",1,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderDash");Et.Factory.addGetterSetter(mt,"keepRatio",!0);Et.Factory.addGetterSetter(mt,"shiftBehavior","default");Et.Factory.addGetterSetter(mt,"centeredScaling",!1);Et.Factory.addGetterSetter(mt,"ignoreStroke",!1);Et.Factory.addGetterSetter(mt,"padding",0,(0,el.getNumberValidator)());Et.Factory.addGetterSetter(mt,"nodes");Et.Factory.addGetterSetter(mt,"node");Et.Factory.addGetterSetter(mt,"boundBoxFunc");Et.Factory.addGetterSetter(mt,"anchorDragBoundFunc");Et.Factory.addGetterSetter(mt,"anchorStyleFunc");Et.Factory.addGetterSetter(mt,"shouldOverdrawWholeArea",!1);Et.Factory.addGetterSetter(mt,"useSingleNodeRotation",!0);Et.Factory.backCompat(mt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.Wedge=void 0;const av=lt,Zse=Vn,Wse=rt,hO=Ue,Kse=rt;class Go extends Zse.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Wse.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}ov.Wedge=Go;Go.prototype.className="Wedge";Go.prototype._centroid=!0;Go.prototype._attrsAffectingSize=["radius"];(0,Kse._registerNode)(Go);av.Factory.addGetterSetter(Go,"radius",0,(0,hO.getNumberValidator)());av.Factory.addGetterSetter(Go,"angle",0,(0,hO.getNumberValidator)());av.Factory.addGetterSetter(Go,"clockwise",!1);av.Factory.backCompat(Go,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var lv={};Object.defineProperty(lv,"__esModule",{value:!0});lv.Blur=void 0;const O9=lt,Qse=nn,Yse=Ue;function I9(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Xse=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Jse=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function eie(t,e){const n=t.data,r=t.width,s=t.height;let i,o,a,c,d,f,m,y,v,_,E,k,p,w,g,C,$,N,j,A;const G=e+e+1,V=r-1,H=s-1,Q=e+1,ie=Q*(Q+1)/2,se=new I9,ae=Xse[e],ye=Jse[e];let Pe=null,ee=se,ue=null,L=null;for(let I=1;I<G;I++)ee=ee.next=new I9,I===Q&&(Pe=ee);ee.next=se,a=o=0;for(let I=0;I<s;I++){k=p=w=g=c=d=f=m=0,y=Q*(C=n[o]),v=Q*($=n[o+1]),_=Q*(N=n[o+2]),E=Q*(j=n[o+3]),c+=ie*C,d+=ie*$,f+=ie*N,m+=ie*j,ee=se;for(let U=0;U<Q;U++)ee.r=C,ee.g=$,ee.b=N,ee.a=j,ee=ee.next;for(let U=1;U<Q;U++)i=o+((V<U?V:U)<<2),c+=(ee.r=C=n[i])*(A=Q-U),d+=(ee.g=$=n[i+1])*A,f+=(ee.b=N=n[i+2])*A,m+=(ee.a=j=n[i+3])*A,k+=C,p+=$,w+=N,g+=j,ee=ee.next;ue=se,L=Pe;for(let U=0;U<r;U++)n[o+3]=j=m*ae>>ye,j!==0?(j=255/j,n[o]=(c*ae>>ye)*j,n[o+1]=(d*ae>>ye)*j,n[o+2]=(f*ae>>ye)*j):n[o]=n[o+1]=n[o+2]=0,c-=y,d-=v,f-=_,m-=E,y-=ue.r,v-=ue.g,_-=ue.b,E-=ue.a,i=a+((i=U+e+1)<V?i:V)<<2,k+=ue.r=n[i],p+=ue.g=n[i+1],w+=ue.b=n[i+2],g+=ue.a=n[i+3],c+=k,d+=p,f+=w,m+=g,ue=ue.next,y+=C=L.r,v+=$=L.g,_+=N=L.b,E+=j=L.a,k-=C,p-=$,w-=N,g-=j,L=L.next,o+=4;a+=r}for(let I=0;I<r;I++){p=w=g=k=d=f=m=c=0,o=I<<2,y=Q*(C=n[o]),v=Q*($=n[o+1]),_=Q*(N=n[o+2]),E=Q*(j=n[o+3]),c+=ie*C,d+=ie*$,f+=ie*N,m+=ie*j,ee=se;for(let z=0;z<Q;z++)ee.r=C,ee.g=$,ee.b=N,ee.a=j,ee=ee.next;let U=r;for(let z=1;z<=e;z++)o=U+I<<2,c+=(ee.r=C=n[o])*(A=Q-z),d+=(ee.g=$=n[o+1])*A,f+=(ee.b=N=n[o+2])*A,m+=(ee.a=j=n[o+3])*A,k+=C,p+=$,w+=N,g+=j,ee=ee.next,z<H&&(U+=r);o=I,ue=se,L=Pe;for(let z=0;z<s;z++)i=o<<2,n[i+3]=j=m*ae>>ye,j>0?(j=255/j,n[i]=(c*ae>>ye)*j,n[i+1]=(d*ae>>ye)*j,n[i+2]=(f*ae>>ye)*j):n[i]=n[i+1]=n[i+2]=0,c-=y,d-=v,f-=_,m-=E,y-=ue.r,v-=ue.g,_-=ue.b,E-=ue.a,i=I+((i=z+Q)<H?i:H)*r<<2,c+=k+=ue.r=n[i],d+=p+=ue.g=n[i+1],f+=w+=ue.b=n[i+2],m+=g+=ue.a=n[i+3],ue=ue.next,y+=C=L.r,v+=$=L.g,_+=N=L.b,E+=j=L.a,k-=C,p-=$,w-=N,g-=j,L=L.next,o+=r}}const tie=function(e){const n=Math.round(this.blurRadius());n>0&&eie(e,n)};lv.Blur=tie;O9.Factory.addGetterSetter(Qse.Node,"blurRadius",0,(0,Yse.getNumberValidator)(),O9.Factory.afterSetFilter);var uv={};Object.defineProperty(uv,"__esModule",{value:!0});uv.Brighten=void 0;const A9=lt,nie=nn,rie=Ue,sie=function(t){const e=this.brightness()*255,n=t.data,r=n.length;for(let s=0;s<r;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};uv.Brighten=sie;A9.Factory.addGetterSetter(nie.Node,"brightness",0,(0,rie.getNumberValidator)(),A9.Factory.afterSetFilter);var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.Contrast=void 0;const M9=lt,iie=nn,oie=Ue,aie=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length;let s=150,i=150,o=150;for(let a=0;a<r;a+=4)s=n[a],i=n[a+1],o=n[a+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s=s<0?0:s>255?255:s,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[a]=s,n[a+1]=i,n[a+2]=o};cv.Contrast=aie;M9.Factory.addGetterSetter(iie.Node,"contrast",0,(0,oie.getNumberValidator)(),M9.Factory.afterSetFilter);var dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.Emboss=void 0;const Ga=lt,fv=nn,lie=dn,pO=Ue,uie=function(t){const e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),s=this.embossBlend(),i=t.data,o=t.width,a=t.height,c=o*4;let d=0,f=0,m=a;switch(r){case"top-left":d=-1,f=-1;break;case"top":d=-1,f=0;break;case"top-right":d=-1,f=1;break;case"right":d=0,f=1;break;case"bottom-right":d=1,f=1;break;case"bottom":d=1,f=0;break;case"bottom-left":d=1,f=-1;break;case"left":d=0,f=-1;break;default:lie.Util.error("Unknown emboss direction: "+r)}do{const y=(m-1)*c;let v=d;m+v<1&&(v=0),m+v>a&&(v=0);const _=(m-1+v)*o*4;let E=o;do{const k=y+(E-1)*4;let p=f;E+p<1&&(p=0),E+p>o&&(p=0);const w=_+(E-1+p)*4,g=i[k]-i[w],C=i[k+1]-i[w+1],$=i[k+2]-i[w+2];let N=g;const j=N>0?N:-N,A=C>0?C:-C,G=$>0?$:-$;if(A>j&&(N=C),G>j&&(N=$),N*=e,s){const V=i[k]+N,H=i[k+1]+N,Q=i[k+2]+N;i[k]=V>255?255:V<0?0:V,i[k+1]=H>255?255:H<0?0:H,i[k+2]=Q>255?255:Q<0?0:Q}else{let V=n-N;V<0?V=0:V>255&&(V=255),i[k]=i[k+1]=i[k+2]=V}}while(--E)}while(--m)};dv.Emboss=uie;Ga.Factory.addGetterSetter(fv.Node,"embossStrength",.5,(0,pO.getNumberValidator)(),Ga.Factory.afterSetFilter);Ga.Factory.addGetterSetter(fv.Node,"embossWhiteLevel",.5,(0,pO.getNumberValidator)(),Ga.Factory.afterSetFilter);Ga.Factory.addGetterSetter(fv.Node,"embossDirection","top-left",void 0,Ga.Factory.afterSetFilter);Ga.Factory.addGetterSetter(fv.Node,"embossBlend",!1,void 0,Ga.Factory.afterSetFilter);var hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.Enhance=void 0;const j9=lt,cie=nn,die=Ue;function Y1(t,e,n,r,s){const i=n-e,o=s-r;if(i===0)return r+o/2;if(o===0)return r;let a=(t-e)/i;return a=o*a+r,a}const fie=function(t){const e=t.data,n=e.length;let r=e[0],s=r,i,o=e[1],a=o,c,d=e[2],f=d,m;const y=this.enhance();if(y===0)return;for(let g=0;g<n;g+=4)i=e[g+0],i<r?r=i:i>s&&(s=i),c=e[g+1],c<o?o=c:c>a&&(a=c),m=e[g+2],m<d?d=m:m>f&&(f=m);s===r&&(s=255,r=0),a===o&&(a=255,o=0),f===d&&(f=255,d=0);let v,_,E,k,p,w;if(y>0)v=s+y*(255-s),_=r-y*(r-0),E=a+y*(255-a),k=o-y*(o-0),p=f+y*(255-f),w=d-y*(d-0);else{const g=(s+r)*.5;v=s+y*(s-g),_=r+y*(r-g);const C=(a+o)*.5;E=a+y*(a-C),k=o+y*(o-C);const $=(f+d)*.5;p=f+y*(f-$),w=d+y*(d-$)}for(let g=0;g<n;g+=4)e[g+0]=Y1(e[g+0],r,s,_,v),e[g+1]=Y1(e[g+1],o,a,k,E),e[g+2]=Y1(e[g+2],d,f,w,p)};hv.Enhance=fie;j9.Factory.addGetterSetter(cie.Node,"enhance",0,(0,die.getNumberValidator)(),j9.Factory.afterSetFilter);var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.Grayscale=void 0;const hie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const s=.34*e[r]+.5*e[r+1]+.16*e[r+2];e[r]=s,e[r+1]=s,e[r+2]=s}};pv.Grayscale=hie;var mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.HSL=void 0;const ld=lt,Y3=nn,X3=Ue;ld.Factory.addGetterSetter(Y3.Node,"hue",0,(0,X3.getNumberValidator)(),ld.Factory.afterSetFilter);ld.Factory.addGetterSetter(Y3.Node,"saturation",0,(0,X3.getNumberValidator)(),ld.Factory.afterSetFilter);ld.Factory.addGetterSetter(Y3.Node,"luminance",0,(0,X3.getNumberValidator)(),ld.Factory.afterSetFilter);const pie=function(t){const e=t.data,n=e.length,r=1,s=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=r*s*Math.cos(i*Math.PI/180),c=r*s*Math.sin(i*Math.PI/180),d=.299*r+.701*a+.167*c,f=.587*r-.587*a+.33*c,m=.114*r-.114*a-.497*c,y=.299*r-.299*a-.328*c,v=.587*r+.413*a+.035*c,_=.114*r-.114*a+.293*c,E=.299*r-.3*a+1.25*c,k=.587*r-.586*a-1.05*c,p=.114*r+.886*a-.2*c;let w,g,C,$;for(let N=0;N<n;N+=4)w=e[N+0],g=e[N+1],C=e[N+2],$=e[N+3],e[N+0]=d*w+f*g+m*C+o,e[N+1]=y*w+v*g+_*C+o,e[N+2]=E*w+k*g+p*C+o,e[N+3]=$};mv.HSL=pie;var gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.HSV=void 0;const ud=lt,J3=nn,eb=Ue,mie=function(t){const e=t.data,n=e.length,r=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=r*s*Math.cos(i*Math.PI/180),a=r*s*Math.sin(i*Math.PI/180),c=.299*r+.701*o+.167*a,d=.587*r-.587*o+.33*a,f=.114*r-.114*o-.497*a,m=.299*r-.299*o-.328*a,y=.587*r+.413*o+.035*a,v=.114*r-.114*o+.293*a,_=.299*r-.3*o+1.25*a,E=.587*r-.586*o-1.05*a,k=.114*r+.886*o-.2*a;for(let p=0;p<n;p+=4){const w=e[p+0],g=e[p+1],C=e[p+2],$=e[p+3];e[p+0]=c*w+d*g+f*C,e[p+1]=m*w+y*g+v*C,e[p+2]=_*w+E*g+k*C,e[p+3]=$}};gv.HSV=mie;ud.Factory.addGetterSetter(J3.Node,"hue",0,(0,eb.getNumberValidator)(),ud.Factory.afterSetFilter);ud.Factory.addGetterSetter(J3.Node,"saturation",0,(0,eb.getNumberValidator)(),ud.Factory.afterSetFilter);ud.Factory.addGetterSetter(J3.Node,"value",0,(0,eb.getNumberValidator)(),ud.Factory.afterSetFilter);var yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.Invert=void 0;const gie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};yv.Invert=gie;var vv={};Object.defineProperty(vv,"__esModule",{value:!0});vv.Kaleidoscope=void 0;const F0=lt,mO=nn,z9=dn,gO=Ue,yie=function(t,e,n){const r=t.data,s=e.data,i=t.width,o=t.height,a=n.polarCenterX||i/2,c=n.polarCenterY||o/2;let d=Math.sqrt(a*a+c*c),f=i-a,m=o-c;const y=Math.sqrt(f*f+m*m);d=y>d?y:d;const v=o,_=i,E=360/_*Math.PI/180;for(let k=0;k<_;k+=1){const p=Math.sin(k*E),w=Math.cos(k*E);for(let g=0;g<v;g+=1){f=Math.floor(a+d*g/v*w),m=Math.floor(c+d*g/v*p);let C=(m*i+f)*4;const $=r[C+0],N=r[C+1],j=r[C+2],A=r[C+3];C=(k+g*i)*4,s[C+0]=$,s[C+1]=N,s[C+2]=j,s[C+3]=A}}},vie=function(t,e,n){const r=t.data,s=e.data,i=t.width,o=t.height,a=n.polarCenterX||i/2,c=n.polarCenterY||o/2;let d=Math.sqrt(a*a+c*c),f=i-a,m=o-c;const y=Math.sqrt(f*f+m*m);d=y>d?y:d;const v=o,_=i,E=0;let k,p;for(f=0;f<i;f+=1)for(m=0;m<o;m+=1){const w=f-a,g=m-c,C=Math.sqrt(w*w+g*g)*v/d;let $=(Math.atan2(g,w)*180/Math.PI+360+E)%360;$=$*_/360,k=Math.floor($),p=Math.floor(C);let N=(p*i+k)*4;const j=r[N+0],A=r[N+1],G=r[N+2],V=r[N+3];N=(m*i+f)*4,s[N+0]=j,s[N+1]=A,s[N+2]=G,s[N+3]=V}},_ie=function(t){const e=t.width,n=t.height;let r,s,i,o,a,c,d,f,m,y,v=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(_%360)/360);if(v<1)return;const k=z9.Util.createCanvasElement();k.width=e,k.height=n;const p=k.getContext("2d").getImageData(0,0,e,n);z9.Util.releaseCanvas(k),yie(t,p,{polarCenterX:e/2,polarCenterY:n/2});let w=e/Math.pow(2,v);for(;w<=8;)w=w*2,v-=1;w=Math.ceil(w);let g=w,C=0,$=g,N=1;for(E+w>e&&(C=g,$=0,N=-1),s=0;s<n;s+=1)for(r=C;r!==$;r+=N)i=Math.round(r+E)%e,m=(e*s+i)*4,a=p.data[m+0],c=p.data[m+1],d=p.data[m+2],f=p.data[m+3],y=(e*s+r)*4,p.data[y+0]=a,p.data[y+1]=c,p.data[y+2]=d,p.data[y+3]=f;for(s=0;s<n;s+=1)for(g=Math.floor(w),o=0;o<v;o+=1){for(r=0;r<g+1;r+=1)m=(e*s+r)*4,a=p.data[m+0],c=p.data[m+1],d=p.data[m+2],f=p.data[m+3],y=(e*s+g*2-r-1)*4,p.data[y+0]=a,p.data[y+1]=c,p.data[y+2]=d,p.data[y+3]=f;g*=2}vie(p,t,{})};vv.Kaleidoscope=_ie;F0.Factory.addGetterSetter(mO.Node,"kaleidoscopePower",2,(0,gO.getNumberValidator)(),F0.Factory.afterSetFilter);F0.Factory.addGetterSetter(mO.Node,"kaleidoscopeAngle",0,(0,gO.getNumberValidator)(),F0.Factory.afterSetFilter);var _v={};Object.defineProperty(_v,"__esModule",{value:!0});_v.Mask=void 0;const D9=lt,wie=nn,Sie=Ue;function Zm(t,e,n){let r=(n*t.width+e)*4;const s=[];return s.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),s}function hf(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function kie(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function bie(t,e){const n=Zm(t,0,0),r=Zm(t,t.width-1,0),s=Zm(t,0,t.height-1),i=Zm(t,t.width-1,t.height-1),o=e||10;if(hf(n,r)<o&&hf(r,i)<o&&hf(i,s)<o&&hf(s,n)<o){const a=kie([r,n,i,s]),c=[];for(let d=0;d<t.width*t.height;d++){const f=hf(a,[t.data[d*4],t.data[d*4+1],t.data[d*4+2]]);c[d]=f<o?0:255}return c}}function Eie(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Cie(t,e,n){const r=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f===255*8?255:0}return o}function Pie(t,e,n){const r=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f>=255*4?255:0}return o}function $ie(t,e,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f}return o}const Tie=function(t){const e=this.threshold();let n=bie(t,e);return n&&(n=Cie(n,t.width,t.height),n=Pie(n,t.width,t.height),n=$ie(n,t.width,t.height),Eie(t,n)),t};_v.Mask=Tie;D9.Factory.addGetterSetter(wie.Node,"threshold",0,(0,Sie.getNumberValidator)(),D9.Factory.afterSetFilter);var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.Noise=void 0;const F9=lt,xie=nn,Nie=Ue,Rie=function(t){const e=this.noise()*255,n=t.data,r=n.length,s=e/2;for(let i=0;i<r;i+=4)n[i+0]+=s-2*s*Math.random(),n[i+1]+=s-2*s*Math.random(),n[i+2]+=s-2*s*Math.random()};wv.Noise=Rie;F9.Factory.addGetterSetter(xie.Node,"noise",.2,(0,Nie.getNumberValidator)(),F9.Factory.afterSetFilter);var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.Pixelate=void 0;const L9=lt,Oie=dn,Iie=nn,Aie=Ue,Mie=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,s=Math.ceil(n/e),i=Math.ceil(r/e),o=t.data;if(e<=0){Oie.Util.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let c=0;c<i;c+=1){let d=0,f=0,m=0,y=0;const v=a*e,_=v+e,E=c*e,k=E+e;let p=0;for(let w=v;w<_;w+=1)if(!(w>=n))for(let g=E;g<k;g+=1){if(g>=r)continue;const C=(n*g+w)*4;d+=o[C+0],f+=o[C+1],m+=o[C+2],y+=o[C+3],p+=1}d=d/p,f=f/p,m=m/p,y=y/p;for(let w=v;w<_;w+=1)if(!(w>=n))for(let g=E;g<k;g+=1){if(g>=r)continue;const C=(n*g+w)*4;o[C+0]=d,o[C+1]=f,o[C+2]=m,o[C+3]=y}}};Sv.Pixelate=Mie;L9.Factory.addGetterSetter(Iie.Node,"pixelSize",8,(0,Aie.getNumberValidator)(),L9.Factory.afterSetFilter);var kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.Posterize=void 0;const U9=lt,jie=nn,zie=Ue,Die=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,s=255/e;for(let i=0;i<r;i+=1)n[i]=Math.floor(n[i]/s)*s};kv.Posterize=Die;U9.Factory.addGetterSetter(jie.Node,"levels",.5,(0,zie.getNumberValidator)(),U9.Factory.afterSetFilter);var bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.RGB=void 0;const L0=lt,tb=nn,Fie=Ue,Lie=function(t){const e=t.data,n=e.length,r=this.red(),s=this.green(),i=this.blue();for(let o=0;o<n;o+=4){const a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255;e[o]=a*r,e[o+1]=a*s,e[o+2]=a*i,e[o+3]=e[o+3]}};bv.RGB=Lie;L0.Factory.addGetterSetter(tb.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});L0.Factory.addGetterSetter(tb.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});L0.Factory.addGetterSetter(tb.Node,"blue",0,Fie.RGBComponent,L0.Factory.afterSetFilter);var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.RGBA=void 0;const Oh=lt,Cv=nn,Uie=Ue,Vie=function(t){const e=t.data,n=e.length,r=this.red(),s=this.green(),i=this.blue(),o=this.alpha();for(let a=0;a<n;a+=4){const c=1-o;e[a]=r*o+e[a]*c,e[a+1]=s*o+e[a+1]*c,e[a+2]=i*o+e[a+2]*c}};Ev.RGBA=Vie;Oh.Factory.addGetterSetter(Cv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Oh.Factory.addGetterSetter(Cv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Oh.Factory.addGetterSetter(Cv.Node,"blue",0,Uie.RGBComponent,Oh.Factory.afterSetFilter);Oh.Factory.addGetterSetter(Cv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.Sepia=void 0;const Gie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const s=e[r+0],i=e[r+1],o=e[r+2];e[r+0]=Math.min(255,s*.393+i*.769+o*.189),e[r+1]=Math.min(255,s*.349+i*.686+o*.168),e[r+2]=Math.min(255,s*.272+i*.534+o*.131)}};Pv.Sepia=Gie;var $v={};Object.defineProperty($v,"__esModule",{value:!0});$v.Solarize=void 0;const Hie=function(t){const e=t.data,n=t.width,r=t.height,s=n*4;let i=r;do{const o=(i-1)*s;let a=n;do{const c=o+(a-1)*4;let d=e[c],f=e[c+1],m=e[c+2];d>127&&(d=255-d),f>127&&(f=255-f),m>127&&(m=255-m),e[c]=d,e[c+1]=f,e[c+2]=m}while(--a)}while(--i)};$v.Solarize=Hie;var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.Threshold=void 0;const V9=lt,qie=nn,Bie=Ue,Zie=function(t){const e=this.threshold()*255,n=t.data,r=n.length;for(let s=0;s<r;s+=1)n[s]=n[s]<e?0:255};Tv.Threshold=Zie;V9.Factory.addGetterSetter(qie.Node,"threshold",.5,(0,Bie.getNumberValidator)(),V9.Factory.afterSetFilter);Object.defineProperty(Dy,"__esModule",{value:!0});Dy.Konva=void 0;const G9=j0,Wie=Gy,Kie=By,Qie=Ky,Yie=Qy,Xie=Yy,H9=ad,Jie=lp,eoe=$d,toe=cp,noe=ev,roe=tv,soe=nv,ioe=rv,ooe=xd,aoe=sv,loe=iv,uoe=ov,coe=lv,doe=uv,foe=cv,hoe=dv,poe=hv,moe=pv,goe=mv,yoe=gv,voe=yv,_oe=vv,woe=_v,Soe=wv,koe=Sv,boe=kv,Eoe=bv,Coe=Ev,Poe=Pv,$oe=$v,Toe=Tv;Dy.Konva=G9.Konva.Util._assign(G9.Konva,{Arc:Wie.Arc,Arrow:Kie.Arrow,Circle:Qie.Circle,Ellipse:Yie.Ellipse,Image:Xie.Image,Label:H9.Label,Tag:H9.Tag,Line:Jie.Line,Path:eoe.Path,Rect:toe.Rect,RegularPolygon:noe.RegularPolygon,Ring:roe.Ring,Sprite:soe.Sprite,Star:ioe.Star,Text:ooe.Text,TextPath:aoe.TextPath,Transformer:loe.Transformer,Wedge:uoe.Wedge,Filters:{Blur:coe.Blur,Brighten:doe.Brighten,Contrast:foe.Contrast,Emboss:hoe.Emboss,Enhance:poe.Enhance,Grayscale:moe.Grayscale,HSL:goe.HSL,HSV:yoe.HSV,Invert:voe.Invert,Kaleidoscope:_oe.Kaleidoscope,Mask:woe.Mask,Noise:Soe.Noise,Pixelate:koe.Pixelate,Posterize:boe.Posterize,RGB:Eoe.RGB,RGBA:Coe.RGBA,Sepia:Poe.Sepia,Solarize:$oe.Solarize,Threshold:Toe.Threshold}});var xoe=z7.exports;Object.defineProperty(xoe,"__esModule",{value:!0});const Noe=Dy;z7.exports=Noe.Konva;var $S={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=j0;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=j0;t.exports=r.Konva})($S,$S.exports);var Roe=$S.exports;const Ih=Fh(Roe);var yO={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ooe=function(e){var n={},r=K,s=Of,i=Object.assign;function o(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,h=1;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),$=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}function j(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case f:return"Fragment";case d:return"Portal";case y:return"Profiler";case m:return"StrictMode";case k:return"Suspense";case p:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case _:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case E:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case w:return u=l.displayName||null,u!==null?u:j(l.type)||"Memo";case g:u=l._payload,l=l._init;try{return j(l(u))}catch{}}return null}function A(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(u);case 8:return u===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function G(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,u.flags&4098&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function V(l){if(G(l)!==l)throw Error(o(188))}function H(l){var u=l.alternate;if(!u){if(u=G(l),u===null)throw Error(o(188));return u!==l?null:l}for(var h=l,S=u;;){var P=h.return;if(P===null)break;var x=P.alternate;if(x===null){if(S=P.return,S!==null){h=S;continue}break}if(P.child===x.child){for(x=P.child;x;){if(x===h)return V(P),l;if(x===S)return V(P),u;x=x.sibling}throw Error(o(188))}if(h.return!==S.return)h=P,S=x;else{for(var D=!1,Y=P.child;Y;){if(Y===h){D=!0,h=P,S=x;break}if(Y===S){D=!0,S=P,h=x;break}Y=Y.sibling}if(!D){for(Y=x.child;Y;){if(Y===h){D=!0,h=x,S=P;break}if(Y===S){D=!0,S=x,h=P;break}Y=Y.sibling}if(!D)throw Error(o(189))}}if(h.alternate!==S)throw Error(o(190))}if(h.tag!==3)throw Error(o(188));return h.stateNode.current===h?l:u}function Q(l){return l=H(l),l!==null?ie(l):null}function ie(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ie(l);if(u!==null)return u;l=l.sibling}return null}function se(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=se(l);if(u!==null)return u}l=l.sibling}return null}var ae=Array.isArray,ye=e.getPublicInstance,Pe=e.getRootHostContext,ee=e.getChildHostContext,ue=e.prepareForCommit,L=e.resetAfterCommit,I=e.createInstance,U=e.appendInitialChild,z=e.finalizeInitialChildren,b=e.prepareUpdate,T=e.shouldSetTextContent,M=e.createTextInstance,O=e.scheduleTimeout,F=e.cancelTimeout,Z=e.noTimeout,le=e.isPrimaryRenderer,ce=e.supportsMutation,W=e.supportsPersistence,X=e.supportsHydration,dt=e.getInstanceFromNode,Fe=e.preparePortalMount,Re=e.getCurrentEventPriority,Je=e.detachDeletedInstance,gt=e.supportsMicrotasks,vn=e.scheduleMicrotask,Vt=e.supportsTestSelectors,$t=e.findFiberRoot,Nn=e.getBoundingRect,Pn=e.getTextContent,fn=e.isHiddenSubtree,as=e.matchAccessibilityRole,Rn=e.setFocusIfFocusable,Ks=e.setupIntersectionObserver,fr=e.appendChild,nl=e.appendChildToContainer,Nd=e.commitTextUpdate,CO=e.commitMount,PO=e.commitUpdate,$O=e.insertBefore,TO=e.insertInContainerBefore,xO=e.removeChild,NO=e.removeChildFromContainer,sb=e.resetTextContent,RO=e.hideInstance,OO=e.hideTextInstance,IO=e.unhideInstance,AO=e.unhideTextInstance,MO=e.clearContainer,jO=e.cloneInstance,ib=e.createContainerChildSet,ob=e.appendChildToContainerChildSet,zO=e.finalizeContainerChildren,Nv=e.replaceContainerChildren,ab=e.cloneHiddenInstance,lb=e.cloneHiddenTextInstance,DO=e.canHydrateInstance,FO=e.canHydrateTextInstance,LO=e.canHydrateSuspenseInstance,ub=e.isSuspenseInstancePending,Rv=e.isSuspenseInstanceFallback,UO=e.getSuspenseInstanceFallbackErrorDetails,VO=e.registerSuspenseInstanceRetry,dp=e.getNextHydratableSibling,GO=e.getFirstHydratableChild,HO=e.getFirstHydratableChildWithinContainer,qO=e.getFirstHydratableChildWithinSuspenseInstance,BO=e.hydrateInstance,ZO=e.hydrateTextInstance,WO=e.hydrateSuspenseInstance,KO=e.getNextHydratableInstanceAfterSuspenseInstance,QO=e.commitHydratedContainer,YO=e.commitHydratedSuspenseInstance,XO=e.clearSuspenseBoundary,JO=e.clearSuspenseBoundaryFromContainer,eI=e.shouldDeleteUnhydratedTailInstances,tI=e.didNotMatchHydratedContainerTextInstance,nI=e.didNotMatchHydratedTextInstance,Ov;function Rd(l){if(Ov===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Ov=u&&u[1]||""}return`
`+Ov+l}var Iv=!1;function Av(l,u){if(!l||Iv)return"";Iv=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(pe){var S=pe}Reflect.construct(l,[],u)}else{try{u.call()}catch(pe){S=pe}l.call(u.prototype)}else{try{throw Error()}catch(pe){S=pe}l()}}catch(pe){if(pe&&S&&typeof pe.stack=="string"){for(var P=pe.stack.split(`
`),x=S.stack.split(`
`),D=P.length-1,Y=x.length-1;1<=D&&0<=Y&&P[D]!==x[Y];)Y--;for(;1<=D&&0<=Y;D--,Y--)if(P[D]!==x[Y]){if(D!==1||Y!==1)do if(D--,Y--,0>Y||P[D]!==x[Y]){var re=`
`+P[D].replace(" at new "," at ");return l.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",l.displayName)),re}while(1<=D&&0<=Y);break}}}finally{Iv=!1,Error.prepareStackTrace=h}return(l=l?l.displayName||l.name:"")?Rd(l):""}var rI=Object.prototype.hasOwnProperty,Mv=[],ku=-1;function Ho(l){return{current:l}}function Gt(l){0>ku||(l.current=Mv[ku],Mv[ku]=null,ku--)}function Dt(l,u){ku++,Mv[ku]=l.current,l.current=u}var qo={},hr=Ho(qo),Lr=Ho(!1),rl=qo;function bu(l,u){var h=l.type.contextTypes;if(!h)return qo;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===u)return S.__reactInternalMemoizedMaskedChildContext;var P={},x;for(x in h)P[x]=u[x];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=P),P}function Ur(l){return l=l.childContextTypes,l!=null}function fp(){Gt(Lr),Gt(hr)}function cb(l,u,h){if(hr.current!==qo)throw Error(o(168));Dt(hr,u),Dt(Lr,h)}function db(l,u,h){var S=l.stateNode;if(u=u.childContextTypes,typeof S.getChildContext!="function")return h;S=S.getChildContext();for(var P in S)if(!(P in u))throw Error(o(108,A(l)||"Unknown",P));return i({},h,S)}function hp(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||qo,rl=hr.current,Dt(hr,l),Dt(Lr,Lr.current),!0}function fb(l,u,h){var S=l.stateNode;if(!S)throw Error(o(169));h?(l=db(l,u,rl),S.__reactInternalMemoizedMergedChildContext=l,Gt(Lr),Gt(hr),Dt(hr,l)):Gt(Lr),Dt(Lr,h)}var Qs=Math.clz32?Math.clz32:oI,sI=Math.log,iI=Math.LN2;function oI(l){return l>>>=0,l===0?32:31-(sI(l)/iI|0)|0}var pp=64,mp=4194304;function Od(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function gp(l,u){var h=l.pendingLanes;if(h===0)return 0;var S=0,P=l.suspendedLanes,x=l.pingedLanes,D=h&268435455;if(D!==0){var Y=D&~P;Y!==0?S=Od(Y):(x&=D,x!==0&&(S=Od(x)))}else D=h&~P,D!==0?S=Od(D):x!==0&&(S=Od(x));if(S===0)return 0;if(u!==0&&u!==S&&!(u&P)&&(P=S&-S,x=u&-u,P>=x||P===16&&(x&4194240)!==0))return u;if(S&4&&(S|=h&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=S;0<u;)h=31-Qs(u),P=1<<h,S|=l[h],u&=~P;return S}function aI(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lI(l,u){for(var h=l.suspendedLanes,S=l.pingedLanes,P=l.expirationTimes,x=l.pendingLanes;0<x;){var D=31-Qs(x),Y=1<<D,re=P[D];re===-1?(!(Y&h)||Y&S)&&(P[D]=aI(Y,u)):re<=u&&(l.expiredLanes|=Y),x&=~Y}}function jv(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function hb(){var l=pp;return pp<<=1,!(pp&4194240)&&(pp=64),l}function zv(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function Id(l,u,h){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Qs(u),l[u]=h}function uI(l,u){var h=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<h;){var P=31-Qs(h),x=1<<P;u[P]=0,S[P]=-1,l[P]=-1,h&=~x}}function Dv(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var S=31-Qs(h),P=1<<S;P&u|l[S]&u&&(l[S]|=u),h&=~P}}var _t=0;function pb(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Fv=s.unstable_scheduleCallback,mb=s.unstable_cancelCallback,cI=s.unstable_shouldYield,dI=s.unstable_requestPaint,Hn=s.unstable_now,Lv=s.unstable_ImmediatePriority,fI=s.unstable_UserBlockingPriority,Uv=s.unstable_NormalPriority,hI=s.unstable_IdlePriority,yp=null,xi=null;function pI(l){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(yp,l,void 0,(l.current.flags&128)===128)}catch{}}function mI(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ys=typeof Object.is=="function"?Object.is:mI,ro=null,vp=!1,Vv=!1;function gb(l){ro===null?ro=[l]:ro.push(l)}function gI(l){vp=!0,gb(l)}function Ni(){if(!Vv&&ro!==null){Vv=!0;var l=0,u=_t;try{var h=ro;for(_t=1;l<h.length;l++){var S=h[l];do S=S(!0);while(S!==null)}ro=null,vp=!1}catch(P){throw ro!==null&&(ro=ro.slice(l+1)),Fv(Lv,Ni),P}finally{_t=u,Vv=!1}}return null}var Eu=[],Cu=0,_p=null,wp=0,bs=[],Es=0,sl=null,so=1,io="";function il(l,u){Eu[Cu++]=wp,Eu[Cu++]=_p,_p=l,wp=u}function yb(l,u,h){bs[Es++]=so,bs[Es++]=io,bs[Es++]=sl,sl=l;var S=so;l=io;var P=32-Qs(S)-1;S&=~(1<<P),h+=1;var x=32-Qs(u)+P;if(30<x){var D=P-P%5;x=(S&(1<<D)-1).toString(32),S>>=D,P-=D,so=1<<32-Qs(u)+P|h<<P|S,io=x+l}else so=1<<x|h<<P|S,io=l}function Gv(l){l.return!==null&&(il(l,1),yb(l,1,0))}function Hv(l){for(;l===_p;)_p=Eu[--Cu],Eu[Cu]=null,wp=Eu[--Cu],Eu[Cu]=null;for(;l===sl;)sl=bs[--Es],bs[Es]=null,io=bs[--Es],bs[Es]=null,so=bs[--Es],bs[Es]=null}var ls=null,Cs=null,Qt=!1,Ad=!1,Xs=null;function vb(l,u){var h=Ns(5,null,null,0);h.elementType="DELETED",h.stateNode=u,h.return=l,u=l.deletions,u===null?(l.deletions=[h],l.flags|=16):u.push(h)}function _b(l,u){switch(l.tag){case 5:return u=DO(u,l.type,l.pendingProps),u!==null?(l.stateNode=u,ls=l,Cs=GO(u),!0):!1;case 6:return u=FO(u,l.pendingProps),u!==null?(l.stateNode=u,ls=l,Cs=null,!0):!1;case 13:if(u=LO(u),u!==null){var h=sl!==null?{id:so,overflow:io}:null;return l.memoizedState={dehydrated:u,treeContext:h,retryLane:1073741824},h=Ns(18,null,null,0),h.stateNode=u,h.return=l,l.child=h,ls=l,Cs=null,!0}return!1;default:return!1}}function qv(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Bv(l){if(Qt){var u=Cs;if(u){var h=u;if(!_b(l,u)){if(qv(l))throw Error(o(418));u=dp(h);var S=ls;u&&_b(l,u)?vb(S,h):(l.flags=l.flags&-4097|2,Qt=!1,ls=l)}}else{if(qv(l))throw Error(o(418));l.flags=l.flags&-4097|2,Qt=!1,ls=l}}}function wb(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ls=l}function Sp(l){if(!X||l!==ls)return!1;if(!Qt)return wb(l),Qt=!0,!1;if(l.tag!==3&&(l.tag!==5||eI(l.type)&&!T(l.type,l.memoizedProps))){var u=Cs;if(u){if(qv(l))throw Sb(),Error(o(418));for(;u;)vb(l,u),u=dp(u)}}if(wb(l),l.tag===13){if(!X)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));Cs=KO(l)}else Cs=ls?dp(l.stateNode):null;return!0}function Sb(){for(var l=Cs;l;)l=dp(l)}function Pu(){X&&(Cs=ls=null,Ad=Qt=!1)}function Zv(l){Xs===null?Xs=[l]:Xs.push(l)}var yI=a.ReactCurrentBatchConfig;function kp(l,u){if(Ys(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),S=Object.keys(u);if(h.length!==S.length)return!1;for(S=0;S<h.length;S++){var P=h[S];if(!rI.call(u,P)||!Ys(l[P],u[P]))return!1}return!0}function vI(l){switch(l.tag){case 5:return Rd(l.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return l=Av(l.type,!1),l;case 11:return l=Av(l.type.render,!1),l;case 1:return l=Av(l.type,!0),l;default:return""}}function Md(l,u,h){if(l=h.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(o(309));var S=h.stateNode}if(!S)throw Error(o(147,l));var P=S,x=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===x?u.ref:(u=function(D){var Y=P.refs;D===null?delete Y[x]:Y[x]=D},u._stringRef=x,u)}if(typeof l!="string")throw Error(o(284));if(!h._owner)throw Error(o(290,l))}return l}function bp(l,u){throw l=Object.prototype.toString.call(u),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function kb(l){var u=l._init;return u(l._payload)}function bb(l){function u(te,J){if(l){var oe=te.deletions;oe===null?(te.deletions=[J],te.flags|=16):oe.push(J)}}function h(te,J){if(!l)return null;for(;J!==null;)u(te,J),J=J.sibling;return null}function S(te,J){for(te=new Map;J!==null;)J.key!==null?te.set(J.key,J):te.set(J.index,J),J=J.sibling;return te}function P(te,J){return te=Xo(te,J),te.index=0,te.sibling=null,te}function x(te,J,oe){return te.index=oe,l?(oe=te.alternate,oe!==null?(oe=oe.index,oe<J?(te.flags|=2,J):oe):(te.flags|=2,J)):(te.flags|=1048576,J)}function D(te){return l&&te.alternate===null&&(te.flags|=2),te}function Y(te,J,oe,be){return J===null||J.tag!==6?(J=V_(oe,te.mode,be),J.return=te,J):(J=P(J,oe),J.return=te,J)}function re(te,J,oe,be){var De=oe.type;return De===f?Ne(te,J,oe.props.children,be,oe.key):J!==null&&(J.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&kb(De)===J.type)?(be=P(J,oe.props),be.ref=Md(te,J,oe),be.return=te,be):(be=em(oe.type,oe.key,oe.props,null,te.mode,be),be.ref=Md(te,J,oe),be.return=te,be)}function pe(te,J,oe,be){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=G_(oe,te.mode,be),J.return=te,J):(J=P(J,oe.children||[]),J.return=te,J)}function Ne(te,J,oe,be,De){return J===null||J.tag!==7?(J=fl(oe,te.mode,be,De),J.return=te,J):(J=P(J,oe),J.return=te,J)}function Be(te,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number")return J=V_(""+J,te.mode,oe),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case c:return oe=em(J.type,J.key,J.props,null,te.mode,oe),oe.ref=Md(te,null,J),oe.return=te,oe;case d:return J=G_(J,te.mode,oe),J.return=te,J;case g:var be=J._init;return Be(te,be(J._payload),oe)}if(ae(J)||N(J))return J=fl(J,te.mode,oe,null),J.return=te,J;bp(te,J)}return null}function ke(te,J,oe,be){var De=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return De!==null?null:Y(te,J,""+oe,be);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:return oe.key===De?re(te,J,oe,be):null;case d:return oe.key===De?pe(te,J,oe,be):null;case g:return De=oe._init,ke(te,J,De(oe._payload),be)}if(ae(oe)||N(oe))return De!==null?null:Ne(te,J,oe,be,null);bp(te,oe)}return null}function Ht(te,J,oe,be,De){if(typeof be=="string"&&be!==""||typeof be=="number")return te=te.get(oe)||null,Y(J,te,""+be,De);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case c:return te=te.get(be.key===null?oe:be.key)||null,re(J,te,be,De);case d:return te=te.get(be.key===null?oe:be.key)||null,pe(J,te,be,De);case g:var et=be._init;return Ht(te,J,oe,et(be._payload),De)}if(ae(be)||N(be))return te=te.get(oe)||null,Ne(J,te,be,De,null);bp(J,be)}return null}function At(te,J,oe,be){for(var De=null,et=null,Ze=J,wt=J=0,Zn=null;Ze!==null&&wt<oe.length;wt++){Ze.index>wt?(Zn=Ze,Ze=null):Zn=Ze.sibling;var St=ke(te,Ze,oe[wt],be);if(St===null){Ze===null&&(Ze=Zn);break}l&&Ze&&St.alternate===null&&u(te,Ze),J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St,Ze=Zn}if(wt===oe.length)return h(te,Ze),Qt&&il(te,wt),De;if(Ze===null){for(;wt<oe.length;wt++)Ze=Be(te,oe[wt],be),Ze!==null&&(J=x(Ze,J,wt),et===null?De=Ze:et.sibling=Ze,et=Ze);return Qt&&il(te,wt),De}for(Ze=S(te,Ze);wt<oe.length;wt++)Zn=Ht(Ze,te,wt,oe[wt],be),Zn!==null&&(l&&Zn.alternate!==null&&Ze.delete(Zn.key===null?wt:Zn.key),J=x(Zn,J,wt),et===null?De=Zn:et.sibling=Zn,et=Zn);return l&&Ze.forEach(function(Jo){return u(te,Jo)}),Qt&&il(te,wt),De}function qr(te,J,oe,be){var De=N(oe);if(typeof De!="function")throw Error(o(150));if(oe=De.call(oe),oe==null)throw Error(o(151));for(var et=De=null,Ze=J,wt=J=0,Zn=null,St=oe.next();Ze!==null&&!St.done;wt++,St=oe.next()){Ze.index>wt?(Zn=Ze,Ze=null):Zn=Ze.sibling;var Jo=ke(te,Ze,St.value,be);if(Jo===null){Ze===null&&(Ze=Zn);break}l&&Ze&&Jo.alternate===null&&u(te,Ze),J=x(Jo,J,wt),et===null?De=Jo:et.sibling=Jo,et=Jo,Ze=Zn}if(St.done)return h(te,Ze),Qt&&il(te,wt),De;if(Ze===null){for(;!St.done;wt++,St=oe.next())St=Be(te,St.value,be),St!==null&&(J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St);return Qt&&il(te,wt),De}for(Ze=S(te,Ze);!St.done;wt++,St=oe.next())St=Ht(Ze,te,wt,St.value,be),St!==null&&(l&&St.alternate!==null&&Ze.delete(St.key===null?wt:St.key),J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St);return l&&Ze.forEach(function(WI){return u(te,WI)}),Qt&&il(te,wt),De}function uo(te,J,oe,be){if(typeof oe=="object"&&oe!==null&&oe.type===f&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:e:{for(var De=oe.key,et=J;et!==null;){if(et.key===De){if(De=oe.type,De===f){if(et.tag===7){h(te,et.sibling),J=P(et,oe.props.children),J.return=te,te=J;break e}}else if(et.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&kb(De)===et.type){h(te,et.sibling),J=P(et,oe.props),J.ref=Md(te,et,oe),J.return=te,te=J;break e}h(te,et);break}else u(te,et);et=et.sibling}oe.type===f?(J=fl(oe.props.children,te.mode,be,oe.key),J.return=te,te=J):(be=em(oe.type,oe.key,oe.props,null,te.mode,be),be.ref=Md(te,J,oe),be.return=te,te=be)}return D(te);case d:e:{for(et=oe.key;J!==null;){if(J.key===et)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){h(te,J.sibling),J=P(J,oe.children||[]),J.return=te,te=J;break e}else{h(te,J);break}else u(te,J);J=J.sibling}J=G_(oe,te.mode,be),J.return=te,te=J}return D(te);case g:return et=oe._init,uo(te,J,et(oe._payload),be)}if(ae(oe))return At(te,J,oe,be);if(N(oe))return qr(te,J,oe,be);bp(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,J!==null&&J.tag===6?(h(te,J.sibling),J=P(J,oe),J.return=te,te=J):(h(te,J),J=V_(oe,te.mode,be),J.return=te,te=J),D(te)):h(te,J)}return uo}var $u=bb(!0),Eb=bb(!1),Ep=Ho(null),Cp=null,Tu=null,Wv=null;function Kv(){Wv=Tu=Cp=null}function Cb(l,u,h){le?(Dt(Ep,u._currentValue),u._currentValue=h):(Dt(Ep,u._currentValue2),u._currentValue2=h)}function Qv(l){var u=Ep.current;Gt(Ep),le?l._currentValue=u:l._currentValue2=u}function Yv(l,u,h){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===h)break;l=l.return}}function xu(l,u){Cp=l,Wv=Tu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&u&&(Vr=!0),l.firstContext=null)}function Ps(l){var u=le?l._currentValue:l._currentValue2;if(Wv!==l)if(l={context:l,memoizedValue:u,next:null},Tu===null){if(Cp===null)throw Error(o(308));Tu=l,Cp.dependencies={lanes:0,firstContext:l}}else Tu=Tu.next=l;return u}var ol=null;function Xv(l){ol===null?ol=[l]:ol.push(l)}function Pb(l,u,h,S){var P=u.interleaved;return P===null?(h.next=h,Xv(u)):(h.next=P.next,P.next=h),u.interleaved=h,Ri(l,S)}function Ri(l,u){l.lanes|=u;var h=l.alternate;for(h!==null&&(h.lanes|=u),h=l,l=l.return;l!==null;)l.childLanes|=u,h=l.alternate,h!==null&&(h.childLanes|=u),h=l,l=l.return;return h.tag===3?h.stateNode:null}var Bo=!1;function Jv(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $b(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function oo(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Zo(l,u,h){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,st&2){var P=S.pending;return P===null?u.next=u:(u.next=P.next,P.next=u),S.pending=u,Ri(l,h)}return P=S.interleaved,P===null?(u.next=u,Xv(S)):(u.next=P.next,P.next=u),S.interleaved=u,Ri(l,h)}function Pp(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194240)!==0)){var S=u.lanes;S&=l.pendingLanes,h|=S,u.lanes=h,Dv(l,h)}}function Tb(l,u){var h=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,h===S)){var P=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};x===null?P=x=D:x=x.next=D,h=h.next}while(h!==null);x===null?P=x=u:x=x.next=u}else P=x=u;h={baseState:S.baseState,firstBaseUpdate:P,lastBaseUpdate:x,shared:S.shared,effects:S.effects},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}function $p(l,u,h,S){var P=l.updateQueue;Bo=!1;var x=P.firstBaseUpdate,D=P.lastBaseUpdate,Y=P.shared.pending;if(Y!==null){P.shared.pending=null;var re=Y,pe=re.next;re.next=null,D===null?x=pe:D.next=pe,D=re;var Ne=l.alternate;Ne!==null&&(Ne=Ne.updateQueue,Y=Ne.lastBaseUpdate,Y!==D&&(Y===null?Ne.firstBaseUpdate=pe:Y.next=pe,Ne.lastBaseUpdate=re))}if(x!==null){var Be=P.baseState;D=0,Ne=pe=re=null,Y=x;do{var ke=Y.lane,Ht=Y.eventTime;if((S&ke)===ke){Ne!==null&&(Ne=Ne.next={eventTime:Ht,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var At=l,qr=Y;switch(ke=u,Ht=h,qr.tag){case 1:if(At=qr.payload,typeof At=="function"){Be=At.call(Ht,Be,ke);break e}Be=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=qr.payload,ke=typeof At=="function"?At.call(Ht,Be,ke):At,ke==null)break e;Be=i({},Be,ke);break e;case 2:Bo=!0}}Y.callback!==null&&Y.lane!==0&&(l.flags|=64,ke=P.effects,ke===null?P.effects=[Y]:ke.push(Y))}else Ht={eventTime:Ht,lane:ke,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ne===null?(pe=Ne=Ht,re=Be):Ne=Ne.next=Ht,D|=ke;if(Y=Y.next,Y===null){if(Y=P.shared.pending,Y===null)break;ke=Y,Y=ke.next,ke.next=null,P.lastBaseUpdate=ke,P.shared.pending=null}}while(!0);if(Ne===null&&(re=Be),P.baseState=re,P.firstBaseUpdate=pe,P.lastBaseUpdate=Ne,u=P.shared.interleaved,u!==null){P=u;do D|=P.lane,P=P.next;while(P!==u)}else x===null&&(P.shared.lanes=0);ll|=D,l.lanes=D,l.memoizedState=Be}}function xb(l,u,h){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var S=l[u],P=S.callback;if(P!==null){if(S.callback=null,S=h,typeof P!="function")throw Error(o(191,P));P.call(S)}}}var jd={},$s=Ho(jd),zd=Ho(jd),Nu=Ho(jd);function Oi(l){if(l===jd)throw Error(o(174));return l}function e_(l,u){Dt(Nu,u),Dt(zd,l),Dt($s,jd),l=Pe(u),Gt($s),Dt($s,l)}function Ru(){Gt($s),Gt(zd),Gt(Nu)}function Nb(l){var u=Oi(Nu.current),h=Oi($s.current);u=ee(h,l.type,u),h!==u&&(Dt(zd,l),Dt($s,u))}function t_(l){zd.current===l&&(Gt($s),Gt(zd))}var rn=Ho(0);function Tp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||ub(h)||Rv(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var n_=[];function r_(){for(var l=0;l<n_.length;l++){var u=n_[l];le?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}n_.length=0}var xp=a.ReactCurrentDispatcher,s_=a.ReactCurrentBatchConfig,al=0,sn=null,On=null,qn=null,Np=!1,Dd=!1,Fd=0,_I=0;function pr(){throw Error(o(321))}function i_(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ys(l[h],u[h]))return!1;return!0}function o_(l,u,h,S,P,x){if(al=x,sn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,xp.current=l===null||l.memoizedState===null?bI:EI,l=h(S,P),Dd){x=0;do{if(Dd=!1,Fd=0,25<=x)throw Error(o(301));x+=1,qn=On=null,u.updateQueue=null,xp.current=CI,l=h(S,P)}while(Dd)}if(xp.current=Ip,u=On!==null&&On.next!==null,al=0,qn=On=sn=null,Np=!1,u)throw Error(o(300));return l}function a_(){var l=Fd!==0;return Fd=0,l}function Ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?sn.memoizedState=qn=l:qn=qn.next=l,qn}function Ts(){if(On===null){var l=sn.alternate;l=l!==null?l.memoizedState:null}else l=On.next;var u=qn===null?sn.memoizedState:qn.next;if(u!==null)qn=u,On=l;else{if(l===null)throw Error(o(310));On=l,l={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},qn===null?sn.memoizedState=qn=l:qn=qn.next=l}return qn}function Ld(l,u){return typeof u=="function"?u(l):u}function l_(l){var u=Ts(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=l;var S=On,P=S.baseQueue,x=h.pending;if(x!==null){if(P!==null){var D=P.next;P.next=x.next,x.next=D}S.baseQueue=P=x,h.pending=null}if(P!==null){x=P.next,S=S.baseState;var Y=D=null,re=null,pe=x;do{var Ne=pe.lane;if((al&Ne)===Ne)re!==null&&(re=re.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),S=pe.hasEagerState?pe.eagerState:l(S,pe.action);else{var Be={lane:Ne,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};re===null?(Y=re=Be,D=S):re=re.next=Be,sn.lanes|=Ne,ll|=Ne}pe=pe.next}while(pe!==null&&pe!==x);re===null?D=S:re.next=Y,Ys(S,u.memoizedState)||(Vr=!0),u.memoizedState=S,u.baseState=D,u.baseQueue=re,h.lastRenderedState=S}if(l=h.interleaved,l!==null){P=l;do x=P.lane,sn.lanes|=x,ll|=x,P=P.next;while(P!==l)}else P===null&&(h.lanes=0);return[u.memoizedState,h.dispatch]}function u_(l){var u=Ts(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=l;var S=h.dispatch,P=h.pending,x=u.memoizedState;if(P!==null){h.pending=null;var D=P=P.next;do x=l(x,D.action),D=D.next;while(D!==P);Ys(x,u.memoizedState)||(Vr=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),h.lastRenderedState=x}return[x,S]}function Rb(){}function Ob(l,u){var h=sn,S=Ts(),P=u(),x=!Ys(S.memoizedState,P);if(x&&(S.memoizedState=P,Vr=!0),S=S.queue,c_(Mb.bind(null,h,S,l),[l]),S.getSnapshot!==u||x||qn!==null&&qn.memoizedState.tag&1){if(h.flags|=2048,Ud(9,Ab.bind(null,h,S,P,u),void 0,null),Bn===null)throw Error(o(349));al&30||Ib(h,u,P)}return P}function Ib(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=sn.updateQueue,u===null?(u={lastEffect:null,stores:null},sn.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function Ab(l,u,h,S){u.value=h,u.getSnapshot=S,jb(u)&&zb(l)}function Mb(l,u,h){return h(function(){jb(u)&&zb(l)})}function jb(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ys(l,h)}catch{return!0}}function zb(l){var u=Ri(l,1);u!==null&&xs(u,l,1,-1)}function Db(l){var u=Ii();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:l},u.queue=l,l=l.dispatch=kI.bind(null,sn,l),[u.memoizedState,l]}function Ud(l,u,h,S){return l={tag:l,create:u,destroy:h,deps:S,next:null},u=sn.updateQueue,u===null?(u={lastEffect:null,stores:null},sn.updateQueue=u,u.lastEffect=l.next=l):(h=u.lastEffect,h===null?u.lastEffect=l.next=l:(S=h.next,h.next=l,l.next=S,u.lastEffect=l)),l}function Fb(){return Ts().memoizedState}function Rp(l,u,h,S){var P=Ii();sn.flags|=l,P.memoizedState=Ud(1|u,h,void 0,S===void 0?null:S)}function Op(l,u,h,S){var P=Ts();S=S===void 0?null:S;var x=void 0;if(On!==null){var D=On.memoizedState;if(x=D.destroy,S!==null&&i_(S,D.deps)){P.memoizedState=Ud(u,h,x,S);return}}sn.flags|=l,P.memoizedState=Ud(1|u,h,x,S)}function Lb(l,u){return Rp(8390656,8,l,u)}function c_(l,u){return Op(2048,8,l,u)}function Ub(l,u){return Op(4,2,l,u)}function Vb(l,u){return Op(4,4,l,u)}function Gb(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Hb(l,u,h){return h=h!=null?h.concat([l]):null,Op(4,4,Gb.bind(null,u,l),h)}function d_(){}function qb(l,u){var h=Ts();u=u===void 0?null:u;var S=h.memoizedState;return S!==null&&u!==null&&i_(u,S[1])?S[0]:(h.memoizedState=[l,u],l)}function Bb(l,u){var h=Ts();u=u===void 0?null:u;var S=h.memoizedState;return S!==null&&u!==null&&i_(u,S[1])?S[0]:(l=l(),h.memoizedState=[l,u],l)}function Zb(l,u,h){return al&21?(Ys(h,u)||(h=hb(),sn.lanes|=h,ll|=h,l.baseState=!0),u):(l.baseState&&(l.baseState=!1,Vr=!0),l.memoizedState=h)}function wI(l,u){var h=_t;_t=h!==0&&4>h?h:4,l(!0);var S=s_.transition;s_.transition={};try{l(!1),u()}finally{_t=h,s_.transition=S}}function Wb(){return Ts().memoizedState}function SI(l,u,h){var S=Qo(l);if(h={lane:S,action:h,hasEagerState:!1,eagerState:null,next:null},Kb(l))Qb(u,h);else if(h=Pb(l,u,h,S),h!==null){var P=yr();xs(h,l,S,P),Yb(h,u,S)}}function kI(l,u,h){var S=Qo(l),P={lane:S,action:h,hasEagerState:!1,eagerState:null,next:null};if(Kb(l))Qb(u,P);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var D=u.lastRenderedState,Y=x(D,h);if(P.hasEagerState=!0,P.eagerState=Y,Ys(Y,D)){var re=u.interleaved;re===null?(P.next=P,Xv(u)):(P.next=re.next,re.next=P),u.interleaved=P;return}}catch{}finally{}h=Pb(l,u,P,S),h!==null&&(P=yr(),xs(h,l,S,P),Yb(h,u,S))}}function Kb(l){var u=l.alternate;return l===sn||u!==null&&u===sn}function Qb(l,u){Dd=Np=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function Yb(l,u,h){if(h&4194240){var S=u.lanes;S&=l.pendingLanes,h|=S,u.lanes=h,Dv(l,h)}}var Ip={readContext:Ps,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},bI={readContext:Ps,useCallback:function(l,u){return Ii().memoizedState=[l,u===void 0?null:u],l},useContext:Ps,useEffect:Lb,useImperativeHandle:function(l,u,h){return h=h!=null?h.concat([l]):null,Rp(4194308,4,Gb.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Rp(4194308,4,l,u)},useInsertionEffect:function(l,u){return Rp(4,2,l,u)},useMemo:function(l,u){var h=Ii();return u=u===void 0?null:u,l=l(),h.memoizedState=[l,u],l},useReducer:function(l,u,h){var S=Ii();return u=h!==void 0?h(u):u,S.memoizedState=S.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},S.queue=l,l=l.dispatch=SI.bind(null,sn,l),[S.memoizedState,l]},useRef:function(l){var u=Ii();return l={current:l},u.memoizedState=l},useState:Db,useDebugValue:d_,useDeferredValue:function(l){return Ii().memoizedState=l},useTransition:function(){var l=Db(!1),u=l[0];return l=wI.bind(null,l[1]),Ii().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,h){var S=sn,P=Ii();if(Qt){if(h===void 0)throw Error(o(407));h=h()}else{if(h=u(),Bn===null)throw Error(o(349));al&30||Ib(S,u,h)}P.memoizedState=h;var x={value:h,getSnapshot:u};return P.queue=x,Lb(Mb.bind(null,S,x,l),[l]),S.flags|=2048,Ud(9,Ab.bind(null,S,x,h,u),void 0,null),h},useId:function(){var l=Ii(),u=Bn.identifierPrefix;if(Qt){var h=io,S=so;h=(S&~(1<<32-Qs(S)-1)).toString(32)+h,u=":"+u+"R"+h,h=Fd++,0<h&&(u+="H"+h.toString(32)),u+=":"}else h=_I++,u=":"+u+"r"+h.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},EI={readContext:Ps,useCallback:qb,useContext:Ps,useEffect:c_,useImperativeHandle:Hb,useInsertionEffect:Ub,useLayoutEffect:Vb,useMemo:Bb,useReducer:l_,useRef:Fb,useState:function(){return l_(Ld)},useDebugValue:d_,useDeferredValue:function(l){var u=Ts();return Zb(u,On.memoizedState,l)},useTransition:function(){var l=l_(Ld)[0],u=Ts().memoizedState;return[l,u]},useMutableSource:Rb,useSyncExternalStore:Ob,useId:Wb,unstable_isNewReconciler:!1},CI={readContext:Ps,useCallback:qb,useContext:Ps,useEffect:c_,useImperativeHandle:Hb,useInsertionEffect:Ub,useLayoutEffect:Vb,useMemo:Bb,useReducer:u_,useRef:Fb,useState:function(){return u_(Ld)},useDebugValue:d_,useDeferredValue:function(l){var u=Ts();return On===null?u.memoizedState=l:Zb(u,On.memoizedState,l)},useTransition:function(){var l=u_(Ld)[0],u=Ts().memoizedState;return[l,u]},useMutableSource:Rb,useSyncExternalStore:Ob,useId:Wb,unstable_isNewReconciler:!1};function Js(l,u){if(l&&l.defaultProps){u=i({},u),l=l.defaultProps;for(var h in l)u[h]===void 0&&(u[h]=l[h]);return u}return u}function f_(l,u,h,S){u=l.memoizedState,h=h(S,u),h=h==null?u:i({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Ap={isMounted:function(l){return(l=l._reactInternals)?G(l)===l:!1},enqueueSetState:function(l,u,h){l=l._reactInternals;var S=yr(),P=Qo(l),x=oo(S,P);x.payload=u,h!=null&&(x.callback=h),u=Zo(l,x,P),u!==null&&(xs(u,l,P,S),Pp(u,l,P))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var S=yr(),P=Qo(l),x=oo(S,P);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=Zo(l,x,P),u!==null&&(xs(u,l,P,S),Pp(u,l,P))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=yr(),S=Qo(l),P=oo(h,S);P.tag=2,u!=null&&(P.callback=u),u=Zo(l,P,S),u!==null&&(xs(u,l,S,h),Pp(u,l,S))}};function Xb(l,u,h,S,P,x,D){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,x,D):u.prototype&&u.prototype.isPureReactComponent?!kp(h,S)||!kp(P,x):!0}function Jb(l,u,h){var S=!1,P=qo,x=u.contextType;return typeof x=="object"&&x!==null?x=Ps(x):(P=Ur(u)?rl:hr.current,S=u.contextTypes,x=(S=S!=null)?bu(l,P):qo),u=new u(h,x),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ap,l.stateNode=u,u._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=P,l.__reactInternalMemoizedMaskedChildContext=x),u}function e5(l,u,h,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,S),u.state!==l&&Ap.enqueueReplaceState(u,u.state,null)}function h_(l,u,h,S){var P=l.stateNode;P.props=h,P.state=l.memoizedState,P.refs={},Jv(l);var x=u.contextType;typeof x=="object"&&x!==null?P.context=Ps(x):(x=Ur(u)?rl:hr.current,P.context=bu(l,x)),P.state=l.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(f_(l,u,x,h),P.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(u=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),u!==P.state&&Ap.enqueueReplaceState(P,P.state,null),$p(l,h,P,S),P.state=l.memoizedState),typeof P.componentDidMount=="function"&&(l.flags|=4194308)}function Ou(l,u){try{var h="",S=u;do h+=vI(S),S=S.return;while(S);var P=h}catch(x){P=`
Error generating stack: `+x.message+`
`+x.stack}return{value:l,source:u,stack:P,digest:null}}function p_(l,u,h){return{value:l,source:null,stack:h??null,digest:u??null}}function m_(l,u){try{console.error(u.value)}catch(h){setTimeout(function(){throw h})}}var PI=typeof WeakMap=="function"?WeakMap:Map;function t5(l,u,h){h=oo(-1,h),h.tag=3,h.payload={element:null};var S=u.value;return h.callback=function(){Wp||(Wp=!0,M_=S),m_(l,u)},h}function n5(l,u,h){h=oo(-1,h),h.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var P=u.value;h.payload=function(){return S(P)},h.callback=function(){m_(l,u)}}var x=l.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(h.callback=function(){m_(l,u),typeof S!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})}),h}function r5(l,u,h){var S=l.pingCache;if(S===null){S=l.pingCache=new PI;var P=new Set;S.set(u,P)}else P=S.get(u),P===void 0&&(P=new Set,S.set(u,P));P.has(h)||(P.add(h),l=LI.bind(null,l,u,h),u.then(l,l))}function s5(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function i5(l,u,h,S,P){return l.mode&1?(l.flags|=65536,l.lanes=P,l):(l===u?l.flags|=65536:(l.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(u=oo(-1,1),u.tag=2,Zo(h,u,1))),h.lanes|=1),l)}var $I=a.ReactCurrentOwner,Vr=!1;function $r(l,u,h,S){u.child=l===null?Eb(u,null,h,S):$u(u,l.child,h,S)}function o5(l,u,h,S,P){h=h.render;var x=u.ref;return xu(u,P),S=o_(l,u,h,S,x,P),h=a_(),l!==null&&!Vr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~P,ao(l,u,P)):(Qt&&h&&Gv(u),u.flags|=1,$r(l,u,S,P),u.child)}function a5(l,u,h,S,P){if(l===null){var x=h.type;return typeof x=="function"&&!U_(x)&&x.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(u.tag=15,u.type=x,l5(l,u,x,S,P)):(l=em(h.type,null,S,u,u.mode,P),l.ref=u.ref,l.return=u,u.child=l)}if(x=l.child,!(l.lanes&P)){var D=x.memoizedProps;if(h=h.compare,h=h!==null?h:kp,h(D,S)&&l.ref===u.ref)return ao(l,u,P)}return u.flags|=1,l=Xo(x,S),l.ref=u.ref,l.return=u,u.child=l}function l5(l,u,h,S,P){if(l!==null){var x=l.memoizedProps;if(kp(x,S)&&l.ref===u.ref)if(Vr=!1,u.pendingProps=S=x,(l.lanes&P)!==0)l.flags&131072&&(Vr=!0);else return u.lanes=l.lanes,ao(l,u,P)}return g_(l,u,h,S,P)}function u5(l,u,h){var S=u.pendingProps,P=S.children,x=l!==null?l.memoizedState:null;if(S.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Au,us),us|=h;else{if(!(h&1073741824))return l=x!==null?x.baseLanes|h:h,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Dt(Au,us),us|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=x!==null?x.baseLanes:h,Dt(Au,us),us|=S}else x!==null?(S=x.baseLanes|h,u.memoizedState=null):S=h,Dt(Au,us),us|=S;return $r(l,u,P,h),u.child}function c5(l,u){var h=u.ref;(l===null&&h!==null||l!==null&&l.ref!==h)&&(u.flags|=512,u.flags|=2097152)}function g_(l,u,h,S,P){var x=Ur(h)?rl:hr.current;return x=bu(u,x),xu(u,P),h=o_(l,u,h,S,x,P),S=a_(),l!==null&&!Vr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~P,ao(l,u,P)):(Qt&&S&&Gv(u),u.flags|=1,$r(l,u,h,P),u.child)}function d5(l,u,h,S,P){if(Ur(h)){var x=!0;hp(u)}else x=!1;if(xu(u,P),u.stateNode===null)jp(l,u),Jb(u,h,S),h_(u,h,S,P),S=!0;else if(l===null){var D=u.stateNode,Y=u.memoizedProps;D.props=Y;var re=D.context,pe=h.contextType;typeof pe=="object"&&pe!==null?pe=Ps(pe):(pe=Ur(h)?rl:hr.current,pe=bu(u,pe));var Ne=h.getDerivedStateFromProps,Be=typeof Ne=="function"||typeof D.getSnapshotBeforeUpdate=="function";Be||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==S||re!==pe)&&e5(u,D,S,pe),Bo=!1;var ke=u.memoizedState;D.state=ke,$p(u,S,D,P),re=u.memoizedState,Y!==S||ke!==re||Lr.current||Bo?(typeof Ne=="function"&&(f_(u,h,Ne,S),re=u.memoizedState),(Y=Bo||Xb(u,h,Y,S,ke,re,pe))?(Be||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=re),D.props=S,D.state=re,D.context=pe,S=Y):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{D=u.stateNode,$b(l,u),Y=u.memoizedProps,pe=u.type===u.elementType?Y:Js(u.type,Y),D.props=pe,Be=u.pendingProps,ke=D.context,re=h.contextType,typeof re=="object"&&re!==null?re=Ps(re):(re=Ur(h)?rl:hr.current,re=bu(u,re));var Ht=h.getDerivedStateFromProps;(Ne=typeof Ht=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(Y!==Be||ke!==re)&&e5(u,D,S,re),Bo=!1,ke=u.memoizedState,D.state=ke,$p(u,S,D,P);var At=u.memoizedState;Y!==Be||ke!==At||Lr.current||Bo?(typeof Ht=="function"&&(f_(u,h,Ht,S),At=u.memoizedState),(pe=Bo||Xb(u,h,pe,S,ke,At,re)||!1)?(Ne||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(S,At,re),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(S,At,re)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||Y===l.memoizedProps&&ke===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&ke===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=At),D.props=S,D.state=At,D.context=re,S=pe):(typeof D.componentDidUpdate!="function"||Y===l.memoizedProps&&ke===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&ke===l.memoizedState||(u.flags|=1024),S=!1)}return y_(l,u,h,S,x,P)}function y_(l,u,h,S,P,x){c5(l,u);var D=(u.flags&128)!==0;if(!S&&!D)return P&&fb(u,h,!1),ao(l,u,x);S=u.stateNode,$I.current=u;var Y=D&&typeof h.getDerivedStateFromError!="function"?null:S.render();return u.flags|=1,l!==null&&D?(u.child=$u(u,l.child,null,x),u.child=$u(u,null,Y,x)):$r(l,u,Y,x),u.memoizedState=S.state,P&&fb(u,h,!0),u.child}function f5(l){var u=l.stateNode;u.pendingContext?cb(l,u.pendingContext,u.pendingContext!==u.context):u.context&&cb(l,u.context,!1),e_(l,u.containerInfo)}function h5(l,u,h,S,P){return Pu(),Zv(P),u.flags|=256,$r(l,u,h,S),u.child}var v_={dehydrated:null,treeContext:null,retryLane:0};function __(l){return{baseLanes:l,cachePool:null,transitions:null}}function p5(l,u,h){var S=u.pendingProps,P=rn.current,x=!1,D=(u.flags&128)!==0,Y;if((Y=D)||(Y=l!==null&&l.memoizedState===null?!1:(P&2)!==0),Y?(x=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(P|=1),Dt(rn,P&1),l===null)return Bv(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(u.mode&1?Rv(l)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(D=S.children,l=S.fallback,x?(S=u.mode,x=u.child,D={mode:"hidden",children:D},!(S&1)&&x!==null?(x.childLanes=0,x.pendingProps=D):x=tm(D,S,0,null),l=fl(l,S,h,null),x.return=u,l.return=u,x.sibling=l,u.child=x,u.child.memoizedState=__(h),u.memoizedState=v_,l):w_(u,D));if(P=l.memoizedState,P!==null&&(Y=P.dehydrated,Y!==null))return TI(l,u,D,S,Y,P,h);if(x){x=S.fallback,D=u.mode,P=l.child,Y=P.sibling;var re={mode:"hidden",children:S.children};return!(D&1)&&u.child!==P?(S=u.child,S.childLanes=0,S.pendingProps=re,u.deletions=null):(S=Xo(P,re),S.subtreeFlags=P.subtreeFlags&14680064),Y!==null?x=Xo(Y,x):(x=fl(x,D,h,null),x.flags|=2),x.return=u,S.return=u,S.sibling=x,u.child=S,S=x,x=u.child,D=l.child.memoizedState,D=D===null?__(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},x.memoizedState=D,x.childLanes=l.childLanes&~h,u.memoizedState=v_,S}return x=l.child,l=x.sibling,S=Xo(x,{mode:"visible",children:S.children}),!(u.mode&1)&&(S.lanes=h),S.return=u,S.sibling=null,l!==null&&(h=u.deletions,h===null?(u.deletions=[l],u.flags|=16):h.push(l)),u.child=S,u.memoizedState=null,S}function w_(l,u){return u=tm({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Mp(l,u,h,S){return S!==null&&Zv(S),$u(u,l.child,null,h),l=w_(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function TI(l,u,h,S,P,x,D){if(h)return u.flags&256?(u.flags&=-257,S=p_(Error(o(422))),Mp(l,u,D,S)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(x=S.fallback,P=u.mode,S=tm({mode:"visible",children:S.children},P,0,null),x=fl(x,P,D,null),x.flags|=2,S.return=u,x.return=u,S.sibling=x,u.child=S,u.mode&1&&$u(u,l.child,null,D),u.child.memoizedState=__(D),u.memoizedState=v_,x);if(!(u.mode&1))return Mp(l,u,D,null);if(Rv(P))return S=UO(P).digest,x=Error(o(419)),S=p_(x,S,void 0),Mp(l,u,D,S);if(h=(D&l.childLanes)!==0,Vr||h){if(S=Bn,S!==null){switch(D&-D){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=P&(S.suspendedLanes|D)?0:P,P!==0&&P!==x.retryLane&&(x.retryLane=P,Ri(l,P),xs(S,l,P,-1))}return L_(),S=p_(Error(o(421))),Mp(l,u,D,S)}return ub(P)?(u.flags|=128,u.child=l.child,u=UI.bind(null,l),VO(P,u),null):(l=x.treeContext,X&&(Cs=qO(P),ls=u,Qt=!0,Xs=null,Ad=!1,l!==null&&(bs[Es++]=so,bs[Es++]=io,bs[Es++]=sl,so=l.id,io=l.overflow,sl=u)),u=w_(u,S.children),u.flags|=4096,u)}function m5(l,u,h){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),Yv(l.return,u,h)}function S_(l,u,h,S,P){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:h,tailMode:P}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=S,x.tail=h,x.tailMode=P)}function g5(l,u,h){var S=u.pendingProps,P=S.revealOrder,x=S.tail;if($r(l,u,S.children,h),S=rn.current,S&2)S=S&1|2,u.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&m5(l,h,u);else if(l.tag===19)m5(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(Dt(rn,S),!(u.mode&1))u.memoizedState=null;else switch(P){case"forwards":for(h=u.child,P=null;h!==null;)l=h.alternate,l!==null&&Tp(l)===null&&(P=h),h=h.sibling;h=P,h===null?(P=u.child,u.child=null):(P=h.sibling,h.sibling=null),S_(u,!1,P,h,x);break;case"backwards":for(h=null,P=u.child,u.child=null;P!==null;){if(l=P.alternate,l!==null&&Tp(l)===null){u.child=P;break}l=P.sibling,P.sibling=h,h=P,P=l}S_(u,!0,h,null,x);break;case"together":S_(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function jp(l,u){!(u.mode&1)&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ao(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),ll|=u.lanes,!(h&u.childLanes))return null;if(l!==null&&u.child!==l.child)throw Error(o(153));if(u.child!==null){for(l=u.child,h=Xo(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Xo(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function xI(l,u,h){switch(u.tag){case 3:f5(u),Pu();break;case 5:Nb(u);break;case 1:Ur(u.type)&&hp(u);break;case 4:e_(u,u.stateNode.containerInfo);break;case 10:Cb(u,u.type._context,u.memoizedProps.value);break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Dt(rn,rn.current&1),u.flags|=128,null):h&u.child.childLanes?p5(l,u,h):(Dt(rn,rn.current&1),l=ao(l,u,h),l!==null?l.sibling:null);Dt(rn,rn.current&1);break;case 19:if(S=(h&u.childLanes)!==0,l.flags&128){if(S)return g5(l,u,h);u.flags|=128}var P=u.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Dt(rn,rn.current),S)break;return null;case 22:case 23:return u.lanes=0,u5(l,u,h)}return ao(l,u,h)}function Ai(l){l.flags|=4}function y5(l,u){if(l!==null&&l.child===u.child)return!0;if(u.flags&16)return!1;for(l=u.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var Vd,Gd,zp,Dp;if(ce)Vd=function(l,u){for(var h=u.child;h!==null;){if(h.tag===5||h.tag===6)U(l,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Gd=function(){},zp=function(l,u,h,S,P){if(l=l.memoizedProps,l!==S){var x=u.stateNode,D=Oi($s.current);h=b(x,h,l,S,P,D),(u.updateQueue=h)&&Ai(u)}},Dp=function(l,u,h,S){h!==S&&Ai(u)};else if(W){Vd=function(l,u,h,S){for(var P=u.child;P!==null;){if(P.tag===5){var x=P.stateNode;h&&S&&(x=ab(x,P.type,P.memoizedProps,P)),U(l,x)}else if(P.tag===6)x=P.stateNode,h&&S&&(x=lb(x,P.memoizedProps,P)),U(l,x);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)x=P.child,x!==null&&(x.return=P),Vd(l,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===u)break;for(;P.sibling===null;){if(P.return===null||P.return===u)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var v5=function(l,u,h,S){for(var P=u.child;P!==null;){if(P.tag===5){var x=P.stateNode;h&&S&&(x=ab(x,P.type,P.memoizedProps,P)),ob(l,x)}else if(P.tag===6)x=P.stateNode,h&&S&&(x=lb(x,P.memoizedProps,P)),ob(l,x);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)x=P.child,x!==null&&(x.return=P),v5(l,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===u)break;for(;P.sibling===null;){if(P.return===null||P.return===u)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Gd=function(l,u){var h=u.stateNode;if(!y5(l,u)){l=h.containerInfo;var S=ib(l);v5(S,u,!1,!1),h.pendingChildren=S,Ai(u),zO(l,S)}},zp=function(l,u,h,S,P){var x=l.stateNode,D=l.memoizedProps;if((l=y5(l,u))&&D===S)u.stateNode=x;else{var Y=u.stateNode,re=Oi($s.current),pe=null;D!==S&&(pe=b(Y,h,D,S,P,re)),l&&pe===null?u.stateNode=x:(x=jO(x,pe,h,D,S,u,l,Y),z(x,h,S,P,re)&&Ai(u),u.stateNode=x,l?Ai(u):Vd(x,u,!1,!1))}},Dp=function(l,u,h,S){h!==S?(l=Oi(Nu.current),h=Oi($s.current),u.stateNode=M(S,l,h,u),Ai(u)):u.stateNode=l.stateNode}}else Gd=function(){},zp=function(){},Dp=function(){};function Hd(l,u){if(!Qt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var S=null;h!==null;)h.alternate!==null&&(S=h),h=h.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function mr(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,S=0;if(u)for(var P=l.child;P!==null;)h|=P.lanes|P.childLanes,S|=P.subtreeFlags&14680064,S|=P.flags&14680064,P.return=l,P=P.sibling;else for(P=l.child;P!==null;)h|=P.lanes|P.childLanes,S|=P.subtreeFlags,S|=P.flags,P.return=l,P=P.sibling;return l.subtreeFlags|=S,l.childLanes=h,u}function NI(l,u,h){var S=u.pendingProps;switch(Hv(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(u),null;case 1:return Ur(u.type)&&fp(),mr(u),null;case 3:return h=u.stateNode,Ru(),Gt(Lr),Gt(hr),r_(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Sp(u)?Ai(u):l===null||l.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,Xs!==null&&(D_(Xs),Xs=null))),Gd(l,u),mr(u),null;case 5:t_(u),h=Oi(Nu.current);var P=u.type;if(l!==null&&u.stateNode!=null)zp(l,u,P,S,h),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!S){if(u.stateNode===null)throw Error(o(166));return mr(u),null}if(l=Oi($s.current),Sp(u)){if(!X)throw Error(o(175));l=BO(u.stateNode,u.type,u.memoizedProps,h,l,u,!Ad),u.updateQueue=l,l!==null&&Ai(u)}else{var x=I(P,S,h,l,u);Vd(x,u,!1,!1),u.stateNode=x,z(x,P,S,h,l)&&Ai(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return mr(u),null;case 6:if(l&&u.stateNode!=null)Dp(l,u,l.memoizedProps,S);else{if(typeof S!="string"&&u.stateNode===null)throw Error(o(166));if(l=Oi(Nu.current),h=Oi($s.current),Sp(u)){if(!X)throw Error(o(176));if(l=u.stateNode,h=u.memoizedProps,(S=ZO(l,h,u,!Ad))&&(P=ls,P!==null))switch(P.tag){case 3:tI(P.stateNode.containerInfo,l,h,(P.mode&1)!==0);break;case 5:nI(P.type,P.memoizedProps,P.stateNode,l,h,(P.mode&1)!==0)}S&&Ai(u)}else u.stateNode=M(S,l,h,u)}return mr(u),null;case 13:if(Gt(rn),S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Qt&&Cs!==null&&u.mode&1&&!(u.flags&128))Sb(),Pu(),u.flags|=98560,P=!1;else if(P=Sp(u),S!==null&&S.dehydrated!==null){if(l===null){if(!P)throw Error(o(318));if(!X)throw Error(o(344));if(P=u.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(o(317));WO(P,u)}else Pu(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;mr(u),P=!1}else Xs!==null&&(D_(Xs),Xs=null),P=!0;if(!P)return u.flags&65536?u:null}return u.flags&128?(u.lanes=h,u):(h=S!==null,h!==(l!==null&&l.memoizedState!==null)&&h&&(u.child.flags|=8192,u.mode&1&&(l===null||rn.current&1?In===0&&(In=3):L_())),u.updateQueue!==null&&(u.flags|=4),mr(u),null);case 4:return Ru(),Gd(l,u),l===null&&Fe(u.stateNode.containerInfo),mr(u),null;case 10:return Qv(u.type._context),mr(u),null;case 17:return Ur(u.type)&&fp(),mr(u),null;case 19:if(Gt(rn),P=u.memoizedState,P===null)return mr(u),null;if(S=(u.flags&128)!==0,x=P.rendering,x===null)if(S)Hd(P,!1);else{if(In!==0||l!==null&&l.flags&128)for(l=u.child;l!==null;){if(x=Tp(l),x!==null){for(u.flags|=128,Hd(P,!1),l=x.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=h,h=u.child;h!==null;)S=h,P=l,S.flags&=14680066,x=S.alternate,x===null?(S.childLanes=0,S.lanes=P,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=x.childLanes,S.lanes=x.lanes,S.child=x.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=x.memoizedProps,S.memoizedState=x.memoizedState,S.updateQueue=x.updateQueue,S.type=x.type,P=x.dependencies,S.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),h=h.sibling;return Dt(rn,rn.current&1|2),u.child}l=l.sibling}P.tail!==null&&Hn()>A_&&(u.flags|=128,S=!0,Hd(P,!1),u.lanes=4194304)}else{if(!S)if(l=Tp(x),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),Hd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!x.alternate&&!Qt)return mr(u),null}else 2*Hn()-P.renderingStartTime>A_&&h!==1073741824&&(u.flags|=128,S=!0,Hd(P,!1),u.lanes=4194304);P.isBackwards?(x.sibling=u.child,u.child=x):(l=P.last,l!==null?l.sibling=x:u.child=x,P.last=x)}return P.tail!==null?(u=P.tail,P.rendering=u,P.tail=u.sibling,P.renderingStartTime=Hn(),u.sibling=null,l=rn.current,Dt(rn,S?l&1|2:l&1),u):(mr(u),null);case 22:case 23:return F_(),h=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==h&&(u.flags|=8192),h&&u.mode&1?us&1073741824&&(mr(u),ce&&u.subtreeFlags&6&&(u.flags|=8192)):mr(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}function RI(l,u){switch(Hv(u),u.tag){case 1:return Ur(u.type)&&fp(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ru(),Gt(Lr),Gt(hr),r_(),l=u.flags,l&65536&&!(l&128)?(u.flags=l&-65537|128,u):null;case 5:return t_(u),null;case 13:if(Gt(rn),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Pu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Gt(rn),null;case 4:return Ru(),null;case 10:return Qv(u.type._context),null;case 22:case 23:return F_(),null;case 24:return null;default:return null}}var Fp=!1,gr=!1,OI=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Iu(l,u){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(S){Yt(l,u,S)}else h.current=null}function k_(l,u,h){try{h()}catch(S){Yt(l,u,S)}}var _5=!1;function II(l,u){for(ue(l.containerInfo),$e=u;$e!==null;)if(l=$e,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,$e=u;else for(;$e!==null;){l=$e;try{var h=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var S=h.memoizedProps,P=h.memoizedState,x=l.stateNode,D=x.getSnapshotBeforeUpdate(l.elementType===l.type?S:Js(l.type,S),P);x.__reactInternalSnapshotBeforeUpdate=D}break;case 3:ce&&MO(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Yt(l,l.return,Y)}if(u=l.sibling,u!==null){u.return=l.return,$e=u;break}$e=l.return}return h=_5,_5=!1,h}function qd(l,u,h){var S=u.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var P=S=S.next;do{if((P.tag&l)===l){var x=P.destroy;P.destroy=void 0,x!==void 0&&k_(u,h,x)}P=P.next}while(P!==S)}}function Lp(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&l)===l){var S=h.create;h.destroy=S()}h=h.next}while(h!==u)}}function b_(l){var u=l.ref;if(u!==null){var h=l.stateNode;switch(l.tag){case 5:l=ye(h);break;default:l=h}typeof u=="function"?u(l):u.current=l}}function w5(l){var u=l.alternate;u!==null&&(l.alternate=null,w5(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Je(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function S5(l){return l.tag===5||l.tag===3||l.tag===4}function k5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||S5(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function E_(l,u,h){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?TO(h,l,u):nl(h,l);else if(S!==4&&(l=l.child,l!==null))for(E_(l,u,h),l=l.sibling;l!==null;)E_(l,u,h),l=l.sibling}function C_(l,u,h){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?$O(h,l,u):fr(h,l);else if(S!==4&&(l=l.child,l!==null))for(C_(l,u,h),l=l.sibling;l!==null;)C_(l,u,h),l=l.sibling}var Jn=null,ei=!1;function Mi(l,u,h){for(h=h.child;h!==null;)P_(l,u,h),h=h.sibling}function P_(l,u,h){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(yp,h)}catch{}switch(h.tag){case 5:gr||Iu(h,u);case 6:if(ce){var S=Jn,P=ei;Jn=null,Mi(l,u,h),Jn=S,ei=P,Jn!==null&&(ei?NO(Jn,h.stateNode):xO(Jn,h.stateNode))}else Mi(l,u,h);break;case 18:ce&&Jn!==null&&(ei?JO(Jn,h.stateNode):XO(Jn,h.stateNode));break;case 4:ce?(S=Jn,P=ei,Jn=h.stateNode.containerInfo,ei=!0,Mi(l,u,h),Jn=S,ei=P):(W&&(S=h.stateNode.containerInfo,P=ib(S),Nv(S,P)),Mi(l,u,h));break;case 0:case 11:case 14:case 15:if(!gr&&(S=h.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){P=S=S.next;do{var x=P,D=x.destroy;x=x.tag,D!==void 0&&(x&2||x&4)&&k_(h,u,D),P=P.next}while(P!==S)}Mi(l,u,h);break;case 1:if(!gr&&(Iu(h,u),S=h.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=h.memoizedProps,S.state=h.memoizedState,S.componentWillUnmount()}catch(Y){Yt(h,u,Y)}Mi(l,u,h);break;case 21:Mi(l,u,h);break;case 22:h.mode&1?(gr=(S=gr)||h.memoizedState!==null,Mi(l,u,h),gr=S):Mi(l,u,h);break;default:Mi(l,u,h)}}function b5(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var h=l.stateNode;h===null&&(h=l.stateNode=new OI),u.forEach(function(S){var P=VI.bind(null,l,S);h.has(S)||(h.add(S),S.then(P,P))})}}function ti(l,u){var h=u.deletions;if(h!==null)for(var S=0;S<h.length;S++){var P=h[S];try{var x=l,D=u;if(ce){var Y=D;e:for(;Y!==null;){switch(Y.tag){case 5:Jn=Y.stateNode,ei=!1;break e;case 3:Jn=Y.stateNode.containerInfo,ei=!0;break e;case 4:Jn=Y.stateNode.containerInfo,ei=!0;break e}Y=Y.return}if(Jn===null)throw Error(o(160));P_(x,D,P),Jn=null,ei=!1}else P_(x,D,P);var re=P.alternate;re!==null&&(re.return=null),P.return=null}catch(pe){Yt(P,u,pe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)E5(u,l),u=u.sibling}function E5(l,u){var h=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ti(u,l),ji(l),S&4){try{qd(3,l,l.return),Lp(3,l)}catch(ke){Yt(l,l.return,ke)}try{qd(5,l,l.return)}catch(ke){Yt(l,l.return,ke)}}break;case 1:ti(u,l),ji(l),S&512&&h!==null&&Iu(h,h.return);break;case 5:if(ti(u,l),ji(l),S&512&&h!==null&&Iu(h,h.return),ce){if(l.flags&32){var P=l.stateNode;try{sb(P)}catch(ke){Yt(l,l.return,ke)}}if(S&4&&(P=l.stateNode,P!=null)){var x=l.memoizedProps;if(h=h!==null?h.memoizedProps:x,S=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{PO(P,u,S,h,x,l)}catch(ke){Yt(l,l.return,ke)}}}break;case 6:if(ti(u,l),ji(l),S&4&&ce){if(l.stateNode===null)throw Error(o(162));P=l.stateNode,x=l.memoizedProps,h=h!==null?h.memoizedProps:x;try{Nd(P,h,x)}catch(ke){Yt(l,l.return,ke)}}break;case 3:if(ti(u,l),ji(l),S&4){if(ce&&X&&h!==null&&h.memoizedState.isDehydrated)try{QO(u.containerInfo)}catch(ke){Yt(l,l.return,ke)}if(W){P=u.containerInfo,x=u.pendingChildren;try{Nv(P,x)}catch(ke){Yt(l,l.return,ke)}}}break;case 4:if(ti(u,l),ji(l),S&4&&W){x=l.stateNode,P=x.containerInfo,x=x.pendingChildren;try{Nv(P,x)}catch(ke){Yt(l,l.return,ke)}}break;case 13:ti(u,l),ji(l),P=l.child,P.flags&8192&&(x=P.memoizedState!==null,P.stateNode.isHidden=x,!x||P.alternate!==null&&P.alternate.memoizedState!==null||(I_=Hn())),S&4&&b5(l);break;case 22:var D=h!==null&&h.memoizedState!==null;if(l.mode&1?(gr=(h=gr)||D,ti(u,l),gr=h):ti(u,l),ji(l),S&8192){if(h=l.memoizedState!==null,(l.stateNode.isHidden=h)&&!D&&l.mode&1)for($e=l,S=l.child;S!==null;){for(u=$e=S;$e!==null;){D=$e;var Y=D.child;switch(D.tag){case 0:case 11:case 14:case 15:qd(4,D,D.return);break;case 1:Iu(D,D.return);var re=D.stateNode;if(typeof re.componentWillUnmount=="function"){var pe=D,Ne=D.return;try{var Be=pe;re.props=Be.memoizedProps,re.state=Be.memoizedState,re.componentWillUnmount()}catch(ke){Yt(pe,Ne,ke)}}break;case 5:Iu(D,D.return);break;case 22:if(D.memoizedState!==null){$5(u);continue}}Y!==null?(Y.return=D,$e=Y):$5(u)}S=S.sibling}if(ce){e:if(S=null,ce)for(u=l;;){if(u.tag===5){if(S===null){S=u;try{P=u.stateNode,h?RO(P):IO(u.stateNode,u.memoizedProps)}catch(ke){Yt(l,l.return,ke)}}}else if(u.tag===6){if(S===null)try{x=u.stateNode,h?OO(x):AO(x,u.memoizedProps)}catch(ke){Yt(l,l.return,ke)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;S===u&&(S=null),u=u.return}S===u&&(S=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:ti(u,l),ji(l),S&4&&b5(l);break;case 21:break;default:ti(u,l),ji(l)}}function ji(l){var u=l.flags;if(u&2){try{if(ce){e:{for(var h=l.return;h!==null;){if(S5(h)){var S=h;break e}h=h.return}throw Error(o(160))}switch(S.tag){case 5:var P=S.stateNode;S.flags&32&&(sb(P),S.flags&=-33);var x=k5(l);C_(l,x,P);break;case 3:case 4:var D=S.stateNode.containerInfo,Y=k5(l);E_(l,Y,D);break;default:throw Error(o(161))}}}catch(re){Yt(l,l.return,re)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function AI(l,u,h){$e=l,C5(l)}function C5(l,u,h){for(var S=(l.mode&1)!==0;$e!==null;){var P=$e,x=P.child;if(P.tag===22&&S){var D=P.memoizedState!==null||Fp;if(!D){var Y=P.alternate,re=Y!==null&&Y.memoizedState!==null||gr;Y=Fp;var pe=gr;if(Fp=D,(gr=re)&&!pe)for($e=P;$e!==null;)D=$e,re=D.child,D.tag===22&&D.memoizedState!==null?T5(P):re!==null?(re.return=D,$e=re):T5(P);for(;x!==null;)$e=x,C5(x),x=x.sibling;$e=P,Fp=Y,gr=pe}P5(l)}else P.subtreeFlags&8772&&x!==null?(x.return=P,$e=x):P5(l)}}function P5(l){for(;$e!==null;){var u=$e;if(u.flags&8772){var h=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:gr||Lp(5,u);break;case 1:var S=u.stateNode;if(u.flags&4&&!gr)if(h===null)S.componentDidMount();else{var P=u.elementType===u.type?h.memoizedProps:Js(u.type,h.memoizedProps);S.componentDidUpdate(P,h.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var x=u.updateQueue;x!==null&&xb(u,x,S);break;case 3:var D=u.updateQueue;if(D!==null){if(h=null,u.child!==null)switch(u.child.tag){case 5:h=ye(u.child.stateNode);break;case 1:h=u.child.stateNode}xb(u,D,h)}break;case 5:var Y=u.stateNode;h===null&&u.flags&4&&CO(Y,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(X&&u.memoizedState===null){var re=u.alternate;if(re!==null){var pe=re.memoizedState;if(pe!==null){var Ne=pe.dehydrated;Ne!==null&&YO(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}gr||u.flags&512&&b_(u)}catch(Be){Yt(u,u.return,Be)}}if(u===l){$e=null;break}if(h=u.sibling,h!==null){h.return=u.return,$e=h;break}$e=u.return}}function $5(l){for(;$e!==null;){var u=$e;if(u===l){$e=null;break}var h=u.sibling;if(h!==null){h.return=u.return,$e=h;break}$e=u.return}}function T5(l){for(;$e!==null;){var u=$e;try{switch(u.tag){case 0:case 11:case 15:var h=u.return;try{Lp(4,u)}catch(re){Yt(u,h,re)}break;case 1:var S=u.stateNode;if(typeof S.componentDidMount=="function"){var P=u.return;try{S.componentDidMount()}catch(re){Yt(u,P,re)}}var x=u.return;try{b_(u)}catch(re){Yt(u,x,re)}break;case 5:var D=u.return;try{b_(u)}catch(re){Yt(u,D,re)}}}catch(re){Yt(u,u.return,re)}if(u===l){$e=null;break}var Y=u.sibling;if(Y!==null){Y.return=u.return,$e=Y;break}$e=u.return}}var Up=0,Vp=1,Gp=2,Hp=3,qp=4;if(typeof Symbol=="function"&&Symbol.for){var Bd=Symbol.for;Up=Bd("selector.component"),Vp=Bd("selector.has_pseudo_class"),Gp=Bd("selector.role"),Hp=Bd("selector.test_id"),qp=Bd("selector.text")}function $_(l){var u=dt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(l=$t(l),l===null)throw Error(o(362));return l.stateNode.current}function T_(l,u){switch(u.$$typeof){case Up:if(l.type===u.value)return!0;break;case Vp:e:{u=u.value,l=[l,0];for(var h=0;h<l.length;){var S=l[h++],P=l[h++],x=u[P];if(S.tag!==5||!fn(S)){for(;x!=null&&T_(S,x);)P++,x=u[P];if(P===u.length){u=!0;break e}else for(S=S.child;S!==null;)l.push(S,P),S=S.sibling}}u=!1}return u;case Gp:if(l.tag===5&&as(l.stateNode,u.value))return!0;break;case qp:if((l.tag===5||l.tag===6)&&(l=Pn(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Hp:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function x_(l){switch(l.$$typeof){case Up:return"<"+(j(l.value)||"Unknown")+">";case Vp:return":has("+(x_(l)||"")+")";case Gp:return'[role="'+l.value+'"]';case qp:return'"'+l.value+'"';case Hp:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function x5(l,u){var h=[];l=[l,0];for(var S=0;S<l.length;){var P=l[S++],x=l[S++],D=u[x];if(P.tag!==5||!fn(P)){for(;D!=null&&T_(P,D);)x++,D=u[x];if(x===u.length)h.push(P);else for(P=P.child;P!==null;)l.push(P,x),P=P.sibling}}return h}function N_(l,u){if(!Vt)throw Error(o(363));l=$_(l),l=x5(l,u),u=[],l=Array.from(l);for(var h=0;h<l.length;){var S=l[h++];if(S.tag===5)fn(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return u}var MI=Math.ceil,Bp=a.ReactCurrentDispatcher,R_=a.ReactCurrentOwner,_n=a.ReactCurrentBatchConfig,st=0,Bn=null,$n=null,er=0,us=0,Au=Ho(0),In=0,Zd=null,ll=0,Zp=0,O_=0,Wd=null,Gr=null,I_=0,A_=1/0,lo=null;function Mu(){A_=Hn()+500}var Wp=!1,M_=null,Wo=null,Kp=!1,Ko=null,Qp=0,Kd=0,j_=null,Yp=-1,Xp=0;function yr(){return st&6?Hn():Yp!==-1?Yp:Yp=Hn()}function Qo(l){return l.mode&1?st&2&&er!==0?er&-er:yI.transition!==null?(Xp===0&&(Xp=hb()),Xp):(l=_t,l!==0?l:Re()):1}function xs(l,u,h,S){if(50<Kd)throw Kd=0,j_=null,Error(o(185));Id(l,h,S),(!(st&2)||l!==Bn)&&(l===Bn&&(!(st&2)&&(Zp|=h),In===4&&Yo(l,er)),Hr(l,S),h===1&&st===0&&!(u.mode&1)&&(Mu(),vp&&Ni()))}function Hr(l,u){var h=l.callbackNode;lI(l,u);var S=gp(l,l===Bn?er:0);if(S===0)h!==null&&mb(h),l.callbackNode=null,l.callbackPriority=0;else if(u=S&-S,l.callbackPriority!==u){if(h!=null&&mb(h),u===1)l.tag===0?gI(R5.bind(null,l)):gb(R5.bind(null,l)),gt?vn(function(){!(st&6)&&Ni()}):Fv(Lv,Ni),h=null;else{switch(pb(S)){case 1:h=Lv;break;case 4:h=fI;break;case 16:h=Uv;break;case 536870912:h=hI;break;default:h=Uv}h=L5(h,N5.bind(null,l))}l.callbackPriority=u,l.callbackNode=h}}function N5(l,u){if(Yp=-1,Xp=0,st&6)throw Error(o(327));var h=l.callbackNode;if(dl()&&l.callbackNode!==h)return null;var S=gp(l,l===Bn?er:0);if(S===0)return null;if(S&30||S&l.expiredLanes||u)u=Jp(l,S);else{u=S;var P=st;st|=2;var x=A5();(Bn!==l||er!==u)&&(lo=null,Mu(),ul(l,u));do try{DI();break}catch(Y){I5(l,Y)}while(!0);Kv(),Bp.current=x,st=P,$n!==null?u=0:(Bn=null,er=0,u=In)}if(u!==0){if(u===2&&(P=jv(l),P!==0&&(S=P,u=z_(l,P))),u===1)throw h=Zd,ul(l,0),Yo(l,S),Hr(l,Hn()),h;if(u===6)Yo(l,S);else{if(P=l.current.alternate,!(S&30)&&!jI(P)&&(u=Jp(l,S),u===2&&(x=jv(l),x!==0&&(S=x,u=z_(l,x))),u===1))throw h=Zd,ul(l,0),Yo(l,S),Hr(l,Hn()),h;switch(l.finishedWork=P,l.finishedLanes=S,u){case 0:case 1:throw Error(o(345));case 2:cl(l,Gr,lo);break;case 3:if(Yo(l,S),(S&130023424)===S&&(u=I_+500-Hn(),10<u)){if(gp(l,0)!==0)break;if(P=l.suspendedLanes,(P&S)!==S){yr(),l.pingedLanes|=l.suspendedLanes&P;break}l.timeoutHandle=O(cl.bind(null,l,Gr,lo),u);break}cl(l,Gr,lo);break;case 4:if(Yo(l,S),(S&4194240)===S)break;for(u=l.eventTimes,P=-1;0<S;){var D=31-Qs(S);x=1<<D,D=u[D],D>P&&(P=D),S&=~x}if(S=P,S=Hn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*MI(S/1960))-S,10<S){l.timeoutHandle=O(cl.bind(null,l,Gr,lo),S);break}cl(l,Gr,lo);break;case 5:cl(l,Gr,lo);break;default:throw Error(o(329))}}}return Hr(l,Hn()),l.callbackNode===h?N5.bind(null,l):null}function z_(l,u){var h=Wd;return l.current.memoizedState.isDehydrated&&(ul(l,u).flags|=256),l=Jp(l,u),l!==2&&(u=Gr,Gr=h,u!==null&&D_(u)),l}function D_(l){Gr===null?Gr=l:Gr.push.apply(Gr,l)}function jI(l){for(var u=l;;){if(u.flags&16384){var h=u.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var S=0;S<h.length;S++){var P=h[S],x=P.getSnapshot;P=P.value;try{if(!Ys(x(),P))return!1}catch{return!1}}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Yo(l,u){for(u&=~O_,u&=~Zp,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var h=31-Qs(u),S=1<<h;l[h]=-1,u&=~S}}function R5(l){if(st&6)throw Error(o(327));dl();var u=gp(l,0);if(!(u&1))return Hr(l,Hn()),null;var h=Jp(l,u);if(l.tag!==0&&h===2){var S=jv(l);S!==0&&(u=S,h=z_(l,S))}if(h===1)throw h=Zd,ul(l,0),Yo(l,u),Hr(l,Hn()),h;if(h===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,cl(l,Gr,lo),Hr(l,Hn()),null}function O5(l){Ko!==null&&Ko.tag===0&&!(st&6)&&dl();var u=st;st|=1;var h=_n.transition,S=_t;try{if(_n.transition=null,_t=1,l)return l()}finally{_t=S,_n.transition=h,st=u,!(st&6)&&Ni()}}function F_(){us=Au.current,Gt(Au)}function ul(l,u){l.finishedWork=null,l.finishedLanes=0;var h=l.timeoutHandle;if(h!==Z&&(l.timeoutHandle=Z,F(h)),$n!==null)for(h=$n.return;h!==null;){var S=h;switch(Hv(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&fp();break;case 3:Ru(),Gt(Lr),Gt(hr),r_();break;case 5:t_(S);break;case 4:Ru();break;case 13:Gt(rn);break;case 19:Gt(rn);break;case 10:Qv(S.type._context);break;case 22:case 23:F_()}h=h.return}if(Bn=l,$n=l=Xo(l.current,null),er=us=u,In=0,Zd=null,O_=Zp=ll=0,Gr=Wd=null,ol!==null){for(u=0;u<ol.length;u++)if(h=ol[u],S=h.interleaved,S!==null){h.interleaved=null;var P=S.next,x=h.pending;if(x!==null){var D=x.next;x.next=P,S.next=D}h.pending=S}ol=null}return l}function I5(l,u){do{var h=$n;try{if(Kv(),xp.current=Ip,Np){for(var S=sn.memoizedState;S!==null;){var P=S.queue;P!==null&&(P.pending=null),S=S.next}Np=!1}if(al=0,qn=On=sn=null,Dd=!1,Fd=0,R_.current=null,h===null||h.return===null){In=1,Zd=u,$n=null;break}e:{var x=l,D=h.return,Y=h,re=u;if(u=er,Y.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var pe=re,Ne=Y,Be=Ne.tag;if(!(Ne.mode&1)&&(Be===0||Be===11||Be===15)){var ke=Ne.alternate;ke?(Ne.updateQueue=ke.updateQueue,Ne.memoizedState=ke.memoizedState,Ne.lanes=ke.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Ht=s5(D);if(Ht!==null){Ht.flags&=-257,i5(Ht,D,Y,x,u),Ht.mode&1&&r5(x,pe,u),u=Ht,re=pe;var At=u.updateQueue;if(At===null){var qr=new Set;qr.add(re),u.updateQueue=qr}else At.add(re);break e}else{if(!(u&1)){r5(x,pe,u),L_();break e}re=Error(o(426))}}else if(Qt&&Y.mode&1){var uo=s5(D);if(uo!==null){!(uo.flags&65536)&&(uo.flags|=256),i5(uo,D,Y,x,u),Zv(Ou(re,Y));break e}}x=re=Ou(re,Y),In!==4&&(In=2),Wd===null?Wd=[x]:Wd.push(x),x=D;do{switch(x.tag){case 3:x.flags|=65536,u&=-u,x.lanes|=u;var te=t5(x,re,u);Tb(x,te);break e;case 1:Y=re;var J=x.type,oe=x.stateNode;if(!(x.flags&128)&&(typeof J.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Wo===null||!Wo.has(oe)))){x.flags|=65536,u&=-u,x.lanes|=u;var be=n5(x,Y,u);Tb(x,be);break e}}x=x.return}while(x!==null)}j5(h)}catch(De){u=De,$n===h&&h!==null&&($n=h=h.return);continue}break}while(!0)}function A5(){var l=Bp.current;return Bp.current=Ip,l===null?Ip:l}function L_(){(In===0||In===3||In===2)&&(In=4),Bn===null||!(ll&268435455)&&!(Zp&268435455)||Yo(Bn,er)}function Jp(l,u){var h=st;st|=2;var S=A5();(Bn!==l||er!==u)&&(lo=null,ul(l,u));do try{zI();break}catch(P){I5(l,P)}while(!0);if(Kv(),st=h,Bp.current=S,$n!==null)throw Error(o(261));return Bn=null,er=0,In}function zI(){for(;$n!==null;)M5($n)}function DI(){for(;$n!==null&&!cI();)M5($n)}function M5(l){var u=F5(l.alternate,l,us);l.memoizedProps=l.pendingProps,u===null?j5(l):$n=u,R_.current=null}function j5(l){var u=l;do{var h=u.alternate;if(l=u.return,u.flags&32768){if(h=RI(h,u),h!==null){h.flags&=32767,$n=h;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{In=6,$n=null;return}}else if(h=NI(h,u,us),h!==null){$n=h;return}if(u=u.sibling,u!==null){$n=u;return}$n=u=l}while(u!==null);In===0&&(In=5)}function cl(l,u,h){var S=_t,P=_n.transition;try{_n.transition=null,_t=1,FI(l,u,h,S)}finally{_n.transition=P,_t=S}return null}function FI(l,u,h,S){do dl();while(Ko!==null);if(st&6)throw Error(o(327));h=l.finishedWork;var P=l.finishedLanes;if(h===null)return null;if(l.finishedWork=null,l.finishedLanes=0,h===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var x=h.lanes|h.childLanes;if(uI(l,x),l===Bn&&($n=Bn=null,er=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Kp||(Kp=!0,L5(Uv,function(){return dl(),null})),x=(h.flags&15990)!==0,h.subtreeFlags&15990||x){x=_n.transition,_n.transition=null;var D=_t;_t=1;var Y=st;st|=4,R_.current=null,II(l,h),E5(h,l),L(l.containerInfo),l.current=h,AI(h),dI(),st=Y,_t=D,_n.transition=x}else l.current=h;if(Kp&&(Kp=!1,Ko=l,Qp=P),x=l.pendingLanes,x===0&&(Wo=null),pI(h.stateNode),Hr(l,Hn()),u!==null)for(S=l.onRecoverableError,h=0;h<u.length;h++)P=u[h],S(P.value,{componentStack:P.stack,digest:P.digest});if(Wp)throw Wp=!1,l=M_,M_=null,l;return Qp&1&&l.tag!==0&&dl(),x=l.pendingLanes,x&1?l===j_?Kd++:(Kd=0,j_=l):Kd=0,Ni(),null}function dl(){if(Ko!==null){var l=pb(Qp),u=_n.transition,h=_t;try{if(_n.transition=null,_t=16>l?16:l,Ko===null)var S=!1;else{if(l=Ko,Ko=null,Qp=0,st&6)throw Error(o(331));var P=st;for(st|=4,$e=l.current;$e!==null;){var x=$e,D=x.child;if($e.flags&16){var Y=x.deletions;if(Y!==null){for(var re=0;re<Y.length;re++){var pe=Y[re];for($e=pe;$e!==null;){var Ne=$e;switch(Ne.tag){case 0:case 11:case 15:qd(8,Ne,x)}var Be=Ne.child;if(Be!==null)Be.return=Ne,$e=Be;else for(;$e!==null;){Ne=$e;var ke=Ne.sibling,Ht=Ne.return;if(w5(Ne),Ne===pe){$e=null;break}if(ke!==null){ke.return=Ht,$e=ke;break}$e=Ht}}}var At=x.alternate;if(At!==null){var qr=At.child;if(qr!==null){At.child=null;do{var uo=qr.sibling;qr.sibling=null,qr=uo}while(qr!==null)}}$e=x}}if(x.subtreeFlags&2064&&D!==null)D.return=x,$e=D;else e:for(;$e!==null;){if(x=$e,x.flags&2048)switch(x.tag){case 0:case 11:case 15:qd(9,x,x.return)}var te=x.sibling;if(te!==null){te.return=x.return,$e=te;break e}$e=x.return}}var J=l.current;for($e=J;$e!==null;){D=$e;var oe=D.child;if(D.subtreeFlags&2064&&oe!==null)oe.return=D,$e=oe;else e:for(D=J;$e!==null;){if(Y=$e,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:Lp(9,Y)}}catch(De){Yt(Y,Y.return,De)}if(Y===D){$e=null;break e}var be=Y.sibling;if(be!==null){be.return=Y.return,$e=be;break e}$e=Y.return}}if(st=P,Ni(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(yp,l)}catch{}S=!0}return S}finally{_t=h,_n.transition=u}}return!1}function z5(l,u,h){u=Ou(h,u),u=t5(l,u,1),l=Zo(l,u,1),u=yr(),l!==null&&(Id(l,1,u),Hr(l,u))}function Yt(l,u,h){if(l.tag===3)z5(l,l,h);else for(;u!==null;){if(u.tag===3){z5(u,l,h);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Wo===null||!Wo.has(S))){l=Ou(h,l),l=n5(u,l,1),u=Zo(u,l,1),l=yr(),u!==null&&(Id(u,1,l),Hr(u,l));break}}u=u.return}}function LI(l,u,h){var S=l.pingCache;S!==null&&S.delete(u),u=yr(),l.pingedLanes|=l.suspendedLanes&h,Bn===l&&(er&h)===h&&(In===4||In===3&&(er&130023424)===er&&500>Hn()-I_?ul(l,0):O_|=h),Hr(l,u)}function D5(l,u){u===0&&(l.mode&1?(u=mp,mp<<=1,!(mp&130023424)&&(mp=4194304)):u=1);var h=yr();l=Ri(l,u),l!==null&&(Id(l,u,h),Hr(l,h))}function UI(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),D5(l,h)}function VI(l,u){var h=0;switch(l.tag){case 13:var S=l.stateNode,P=l.memoizedState;P!==null&&(h=P.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(u),D5(l,h)}var F5;F5=function(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps||Lr.current)Vr=!0;else{if(!(l.lanes&h)&&!(u.flags&128))return Vr=!1,xI(l,u,h);Vr=!!(l.flags&131072)}else Vr=!1,Qt&&u.flags&1048576&&yb(u,wp,u.index);switch(u.lanes=0,u.tag){case 2:var S=u.type;jp(l,u),l=u.pendingProps;var P=bu(u,hr.current);xu(u,h),P=o_(null,u,S,l,P,h);var x=a_();return u.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ur(S)?(x=!0,hp(u)):x=!1,u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Jv(u),P.updater=Ap,u.stateNode=P,P._reactInternals=u,h_(u,S,l,h),u=y_(null,u,S,!0,x,h)):(u.tag=0,Qt&&x&&Gv(u),$r(null,u,P,h),u=u.child),u;case 16:S=u.elementType;e:{switch(jp(l,u),l=u.pendingProps,P=S._init,S=P(S._payload),u.type=S,P=u.tag=HI(S),l=Js(S,l),P){case 0:u=g_(null,u,S,l,h);break e;case 1:u=d5(null,u,S,l,h);break e;case 11:u=o5(null,u,S,l,h);break e;case 14:u=a5(null,u,S,Js(S.type,l),h);break e}throw Error(o(306,S,""))}return u;case 0:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:Js(S,P),g_(l,u,S,P,h);case 1:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:Js(S,P),d5(l,u,S,P,h);case 3:e:{if(f5(u),l===null)throw Error(o(387));S=u.pendingProps,x=u.memoizedState,P=x.element,$b(l,u),$p(u,S,null,h);var D=u.memoizedState;if(S=D.element,X&&x.isDehydrated)if(x={element:S,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){P=Ou(Error(o(423)),u),u=h5(l,u,S,h,P);break e}else if(S!==P){P=Ou(Error(o(424)),u),u=h5(l,u,S,h,P);break e}else for(X&&(Cs=HO(u.stateNode.containerInfo),ls=u,Qt=!0,Xs=null,Ad=!1),h=Eb(u,null,S,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Pu(),S===P){u=ao(l,u,h);break e}$r(l,u,S,h)}u=u.child}return u;case 5:return Nb(u),l===null&&Bv(u),S=u.type,P=u.pendingProps,x=l!==null?l.memoizedProps:null,D=P.children,T(S,P)?D=null:x!==null&&T(S,x)&&(u.flags|=32),c5(l,u),$r(l,u,D,h),u.child;case 6:return l===null&&Bv(u),null;case 13:return p5(l,u,h);case 4:return e_(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=$u(u,null,S,h):$r(l,u,S,h),u.child;case 11:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:Js(S,P),o5(l,u,S,P,h);case 7:return $r(l,u,u.pendingProps,h),u.child;case 8:return $r(l,u,u.pendingProps.children,h),u.child;case 12:return $r(l,u,u.pendingProps.children,h),u.child;case 10:e:{if(S=u.type._context,P=u.pendingProps,x=u.memoizedProps,D=P.value,Cb(u,S,D),x!==null)if(Ys(x.value,D)){if(x.children===P.children&&!Lr.current){u=ao(l,u,h);break e}}else for(x=u.child,x!==null&&(x.return=u);x!==null;){var Y=x.dependencies;if(Y!==null){D=x.child;for(var re=Y.firstContext;re!==null;){if(re.context===S){if(x.tag===1){re=oo(-1,h&-h),re.tag=2;var pe=x.updateQueue;if(pe!==null){pe=pe.shared;var Ne=pe.pending;Ne===null?re.next=re:(re.next=Ne.next,Ne.next=re),pe.pending=re}}x.lanes|=h,re=x.alternate,re!==null&&(re.lanes|=h),Yv(x.return,h,u),Y.lanes|=h;break}re=re.next}}else if(x.tag===10)D=x.type===u.type?null:x.child;else if(x.tag===18){if(D=x.return,D===null)throw Error(o(341));D.lanes|=h,Y=D.alternate,Y!==null&&(Y.lanes|=h),Yv(D,h,u),D=x.sibling}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===u){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}$r(l,u,P.children,h),u=u.child}return u;case 9:return P=u.type,S=u.pendingProps.children,xu(u,h),P=Ps(P),S=S(P),u.flags|=1,$r(l,u,S,h),u.child;case 14:return S=u.type,P=Js(S,u.pendingProps),P=Js(S.type,P),a5(l,u,S,P,h);case 15:return l5(l,u,u.type,u.pendingProps,h);case 17:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:Js(S,P),jp(l,u),u.tag=1,Ur(S)?(l=!0,hp(u)):l=!1,xu(u,h),Jb(u,S,P),h_(u,S,P,h),y_(null,u,S,!0,l,h);case 19:return g5(l,u,h);case 22:return u5(l,u,h)}throw Error(o(156,u.tag))};function L5(l,u){return Fv(l,u)}function GI(l,u,h,S){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(l,u,h,S){return new GI(l,u,h,S)}function U_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function HI(l){if(typeof l=="function")return U_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===E)return 11;if(l===w)return 14}return 2}function Xo(l,u){var h=l.alternate;return h===null?(h=Ns(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&14680064,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h}function em(l,u,h,S,P,x){var D=2;if(S=l,typeof l=="function")U_(l)&&(D=1);else if(typeof l=="string")D=5;else e:switch(l){case f:return fl(h.children,P,x,u);case m:D=8,P|=8;break;case y:return l=Ns(12,h,u,P|2),l.elementType=y,l.lanes=x,l;case k:return l=Ns(13,h,u,P),l.elementType=k,l.lanes=x,l;case p:return l=Ns(19,h,u,P),l.elementType=p,l.lanes=x,l;case C:return tm(h,P,x,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:D=10;break e;case _:D=9;break e;case E:D=11;break e;case w:D=14;break e;case g:D=16,S=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return u=Ns(D,h,u,P),u.elementType=l,u.type=S,u.lanes=x,u}function fl(l,u,h,S){return l=Ns(7,l,S,u),l.lanes=h,l}function tm(l,u,h,S){return l=Ns(22,l,S,u),l.elementType=C,l.lanes=h,l.stateNode={isHidden:!1},l}function V_(l,u,h){return l=Ns(6,l,null,u),l.lanes=h,l}function G_(l,u,h){return u=Ns(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function qI(l,u,h,S,P){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Z,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zv(0),this.expirationTimes=zv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zv(0),this.identifierPrefix=S,this.onRecoverableError=P,X&&(this.mutableSourceEagerHydrationData=null)}function U5(l,u,h,S,P,x,D,Y,re){return l=new qI(l,u,h,Y,re),u===1?(u=1,x===!0&&(u|=8)):u=0,x=Ns(3,null,null,u),l.current=x,x.stateNode=l,x.memoizedState={element:S,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jv(x),l}function V5(l){if(!l)return qo;l=l._reactInternals;e:{if(G(l)!==l||l.tag!==1)throw Error(o(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ur(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(l.tag===1){var h=l.type;if(Ur(h))return db(l,h,u)}return u}function G5(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=Q(u),l===null?null:l.stateNode}function H5(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function nm(l,u){H5(l,u),(l=l.alternate)&&H5(l,u)}function BI(l){return l=Q(l),l===null?null:l.stateNode}function ZI(){return null}return n.attemptContinuousHydration=function(l){if(l.tag===13){var u=Ri(l,134217728);if(u!==null){var h=yr();xs(u,l,134217728,h)}nm(l,134217728)}},n.attemptDiscreteHydration=function(l){if(l.tag===13){var u=Ri(l,1);if(u!==null){var h=yr();xs(u,l,1,h)}nm(l,1)}},n.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=Qo(l),h=Ri(l,u);if(h!==null){var S=yr();xs(h,l,u,S)}nm(l,u)}},n.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var h=Od(u.pendingLanes);h!==0&&(Dv(u,h|1),Hr(u,Hn()),!(st&6)&&(Mu(),Ni()))}break;case 13:O5(function(){var S=Ri(l,1);if(S!==null){var P=yr();xs(S,l,1,P)}}),nm(l,1)}},n.batchedUpdates=function(l,u){var h=st;st|=1;try{return l(u)}finally{st=h,st===0&&(Mu(),vp&&Ni())}},n.createComponentSelector=function(l){return{$$typeof:Up,value:l}},n.createContainer=function(l,u,h,S,P,x,D){return U5(l,u,!1,null,h,S,P,x,D)},n.createHasPseudoClassSelector=function(l){return{$$typeof:Vp,value:l}},n.createHydrationContainer=function(l,u,h,S,P,x,D,Y,re){return l=U5(h,S,!0,l,P,x,D,Y,re),l.context=V5(null),h=l.current,S=yr(),P=Qo(h),x=oo(S,P),x.callback=u??null,Zo(h,x,P),l.current.lanes=P,Id(l,P,S),Hr(l,S),l},n.createPortal=function(l,u,h){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:l,containerInfo:u,implementation:h}},n.createRoleSelector=function(l){return{$$typeof:Gp,value:l}},n.createTestNameSelector=function(l){return{$$typeof:Hp,value:l}},n.createTextSelector=function(l){return{$$typeof:qp,value:l}},n.deferredUpdates=function(l){var u=_t,h=_n.transition;try{return _n.transition=null,_t=16,l()}finally{_t=u,_n.transition=h}},n.discreteUpdates=function(l,u,h,S,P){var x=_t,D=_n.transition;try{return _n.transition=null,_t=1,l(u,h,S,P)}finally{_t=x,_n.transition=D,st===0&&Mu()}},n.findAllNodes=N_,n.findBoundingRects=function(l,u){if(!Vt)throw Error(o(363));u=N_(l,u),l=[];for(var h=0;h<u.length;h++)l.push(Nn(u[h]));for(u=l.length-1;0<u;u--){h=l[u];for(var S=h.x,P=S+h.width,x=h.y,D=x+h.height,Y=u-1;0<=Y;Y--)if(u!==Y){var re=l[Y],pe=re.x,Ne=pe+re.width,Be=re.y,ke=Be+re.height;if(S>=pe&&x>=Be&&P<=Ne&&D<=ke){l.splice(u,1);break}else if(S!==pe||h.width!==re.width||ke<x||Be>D){if(!(x!==Be||h.height!==re.height||Ne<S||pe>P)){pe>S&&(re.width+=pe-S,re.x=S),Ne<P&&(re.width=P-pe),l.splice(u,1);break}}else{Be>x&&(re.height+=Be-x,re.y=x),ke<D&&(re.height=D-Be),l.splice(u,1);break}}}return l},n.findHostInstance=G5,n.findHostInstanceWithNoPortals=function(l){return l=H(l),l=l!==null?se(l):null,l===null?null:l.stateNode},n.findHostInstanceWithWarning=function(l){return G5(l)},n.flushControlled=function(l){var u=st;st|=1;var h=_n.transition,S=_t;try{_n.transition=null,_t=1,l()}finally{_t=S,_n.transition=h,st=u,st===0&&(Mu(),Ni())}},n.flushPassiveEffects=dl,n.flushSync=O5,n.focusWithin=function(l,u){if(!Vt)throw Error(o(363));for(l=$_(l),u=x5(l,u),u=Array.from(u),l=0;l<u.length;){var h=u[l++];if(!fn(h)){if(h.tag===5&&Rn(h.stateNode))return!0;for(h=h.child;h!==null;)u.push(h),h=h.sibling}}return!1},n.getCurrentUpdatePriority=function(){return _t},n.getFindAllNodesFailureDescription=function(l,u){if(!Vt)throw Error(o(363));var h=0,S=[];l=[$_(l),0];for(var P=0;P<l.length;){var x=l[P++],D=l[P++],Y=u[D];if((x.tag!==5||!fn(x))&&(T_(x,Y)&&(S.push(x_(Y)),D++,D>h&&(h=D)),D<u.length))for(x=x.child;x!==null;)l.push(x,D),x=x.sibling}if(h<u.length){for(l=[];h<u.length;h++)l.push(x_(u[h]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},n.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return ye(l.child.stateNode);default:return l.child.stateNode}},n.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:BI,findFiberByHostInstance:l.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{yp=u.inject(l),xi=u}catch{}l=!!u.checkDCE}}return l},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(l,u,h,S){if(!Vt)throw Error(o(363));l=N_(l,u);var P=Ks(l,h,S).disconnect;return{disconnect:function(){P()}}},n.registerMutableSourceForHydration=function(l,u){var h=u._getVersion;h=h(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,h]:l.mutableSourceEagerHydrationData.push(u,h)},n.runWithPriority=function(l,u){var h=_t;try{return _t=l,u()}finally{_t=h}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(l,u,h,S){var P=u.current,x=yr(),D=Qo(P);return h=V5(h),u.context===null?u.context=h:u.pendingContext=h,u=oo(x,D),u.payload={element:l},S=S===void 0?null:S,S!==null&&(u.callback=S),l=Zo(P,u,D),l!==null&&(xs(l,P,D,x),Pp(l,P,D)),D},n};yO.exports=Ooe;var Ioe=yO.exports;const Aoe=Fh(Ioe);var vO={exports:{}},Su={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Su.ConcurrentRoot=1;Su.ContinuousEventPriority=4;Su.DefaultEventPriority=16;Su.DiscreteEventPriority=1;Su.IdleEventPriority=536870912;Su.LegacyRoot=0;vO.exports=Su;var _O=vO.exports;const q9={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let B9=!1,Z9=!1;const nb=".react-konva-event",Moe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,joe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,zoe={};function xv(t,e,n=zoe){if(!B9&&"zIndex"in e&&(console.warn(joe),B9=!0),!Z9&&e.draggable){var r=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;r&&!s&&(console.warn(Moe),Z9=!0)}for(var i in n)if(!q9[i]){var o=i.slice(0,2)==="on",a=n[i]!==e[i];if(o&&a){var c=i.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t.off(c,n[i])}var d=!e.hasOwnProperty(i);d&&t.setAttr(i,void 0)}var f=e._useStrictMode,m={},y=!1;const v={};for(var i in e)if(!q9[i]){var o=i.slice(0,2)==="on",_=n[i]!==e[i];if(o&&_){var c=i.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[i]&&(v[c]=e[i])}!o&&(e[i]!==n[i]||f&&e[i]!==t.getAttr(i))&&(y=!0,m[i]=e[i])}y&&(t.setAttrs(m),tl(t));for(var c in v)t.on(c+nb,v[c])}function tl(t){if(!rt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const wO={},Doe={};Ih.Node.prototype._applyProps=xv;function Foe(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),tl(t)}function Loe(t,e,n){let r=Ih[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Ih.Group);const s={},i={};for(var o in e){var a=o.slice(0,2)==="on";a?i[o]=e[o]:s[o]=e[o]}const c=new r(s);return xv(c,i),c}function Uoe(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Voe(t,e,n){return!1}function Goe(t){return t}function Hoe(){return null}function qoe(){return null}function Boe(t,e,n,r){return Doe}function Zoe(){}function Woe(t){}function Koe(t,e){return!1}function Qoe(){return wO}function Yoe(){return wO}const Xoe=setTimeout,Joe=clearTimeout,eae=-1;function tae(t,e){return!1}const nae=!1,rae=!0,sae=!0;function iae(t,e){e.parent===t?e.moveToTop():t.add(e),tl(t)}function oae(t,e){e.parent===t?e.moveToTop():t.add(e),tl(t)}function SO(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),tl(t)}function aae(t,e,n){SO(t,e,n)}function lae(t,e){e.destroy(),e.off(nb),tl(t)}function uae(t,e){e.destroy(),e.off(nb),tl(t)}function cae(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function dae(t,e,n){}function fae(t,e,n,r,s){xv(t,s,r)}function hae(t){t.hide(),tl(t)}function pae(t){}function mae(t,e){(e.visible==null||e.visible)&&t.show()}function gae(t,e){}function yae(t){}function vae(){}const _ae=()=>_O.DefaultEventPriority,wae=Object.freeze(Object.defineProperty({__proto__:null,appendChild:iae,appendChildToContainer:oae,appendInitialChild:Foe,cancelTimeout:Joe,clearContainer:yae,commitMount:dae,commitTextUpdate:cae,commitUpdate:fae,createInstance:Loe,createTextInstance:Uoe,detachDeletedInstance:vae,finalizeInitialChildren:Voe,getChildHostContext:Yoe,getCurrentEventPriority:_ae,getPublicInstance:Goe,getRootHostContext:Qoe,hideInstance:hae,hideTextInstance:pae,idlePriority:Of.unstable_IdlePriority,insertBefore:SO,insertInContainerBefore:aae,isPrimaryRenderer:nae,noTimeout:eae,now:Of.unstable_now,prepareForCommit:Hoe,preparePortalMount:qoe,prepareUpdate:Boe,removeChild:lae,removeChildFromContainer:uae,resetAfterCommit:Zoe,resetTextContent:Woe,run:Of.unstable_runWithPriority,scheduleTimeout:Xoe,shouldDeprioritizeSubtree:Koe,shouldSetTextContent:tae,supportsMutation:sae,unhideInstance:mae,unhideTextInstance:gae,warnsIfNotActing:rae},Symbol.toStringTag,{value:"Module"}));var Sae=Object.defineProperty,kae=Object.defineProperties,bae=Object.getOwnPropertyDescriptors,W9=Object.getOwnPropertySymbols,Eae=Object.prototype.hasOwnProperty,Cae=Object.prototype.propertyIsEnumerable,K9=(t,e,n)=>e in t?Sae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q9=(t,e)=>{for(var n in e||(e={}))Eae.call(e,n)&&K9(t,n,e[n]);if(W9)for(var n of W9(e))Cae.call(e,n)&&K9(t,n,e[n]);return t},Pae=(t,e)=>kae(t,bae(e)),Y9,X9;typeof window<"u"&&((Y9=window.document)!=null&&Y9.createElement||((X9=window.navigator)==null?void 0:X9.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function kO(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const s=kO(r,e,n);if(s)return s;r=r.sibling}}function bO(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const J9=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=J9;return}return J9.apply(this,arguments)};const rb=bO(K.createContext(null));class EO extends K.Component{render(){return K.createElement(rb.Provider,{value:this._reactInternals},this.props.children)}}function $ae(){const t=K.useContext(rb);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const s=kO(r,!1,i=>{let o=i.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(s)return s}},[t,e])}function Tae(){const t=$ae(),[e]=K.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const s=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;s&&s!==rb&&!e.has(s)&&e.set(s,K.useContext(bO(s)))}n=n.return}return e}function xae(){const t=Tae();return K.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>K.createElement(e,null,K.createElement(n.Provider,Pae(Q9({},r),{value:t.get(n)}))),e=>K.createElement(EO,Q9({},e))),[t])}function Nae(t){const e=Ie.useRef({});return Ie.useLayoutEffect(()=>{e.current=t}),Ie.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Rae=t=>{const e=Ie.useRef(null),n=Ie.useRef(null),r=Ie.useRef(null),s=Nae(t),i=xae(),o=a=>{const{forwardedRef:c}=t;c&&(typeof c=="function"?c(a):c.current=a)};return Ie.useLayoutEffect(()=>(n.current=new Ih.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=Rf.createContainer(n.current,_O.LegacyRoot,!1,null),Rf.updateContainer(Ie.createElement(i,{},t.children),r.current),()=>{Ih.isBrowser&&(o(null),Rf.updateContainer(null,r.current,null),n.current.destroy())}),[]),Ie.useLayoutEffect(()=>{o(n.current),xv(n.current,t,s),Rf.updateContainer(Ie.createElement(i,{},t.children),r.current,null)}),Ie.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},Oae="Layer",X1="Rect",Br="Circle",ze="Line",Wu="Text",Rf=Aoe(wae);Rf.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Ie.version,rendererPackageName:"react-konva"});const Iae=Ie.forwardRef((t,e)=>Ie.createElement(EO,{},Ie.createElement(Rae,{...t,forwardedRef:e}))),Aae=({onComponentAdd:t,onComponentConnect:e,onWireDisconnect:n,onComponentUpdate:r,onReset:s,components:i})=>{const[o,a]=K.useState(""),[c,d]=K.useState(""),[f,m]=K.useState(!1),y=w=>["battery","bulb","led","resistor","switch","capacitor","ground","connect","disconnect","remove","unlink","add","reset","circuit","move","drag","place","align","wire"].some(C=>w.toLowerCase().includes(C)),v=w=>{const g=w.toLowerCase(),C=[];return g.includes("battery")&&C.push("battery"),(g.includes("bulb")||g.includes("light"))&&C.push("bulb"),g.includes("led")&&C.push("led"),g.includes("resistor")&&C.push("resistor"),g.includes("switch")&&C.push("switch"),g.includes("capacitor")&&C.push("capacitor"),g.includes("ground")&&C.push("ground"),{components:C,shouldConnect:g.includes("connect")&&!g.includes("disconnect"),shouldDisconnect:g.includes("disconnect")||g.includes("unlink")||g.includes("remove")&&g.includes("wire"),shouldReset:g.includes("reset"),shouldMove:g.includes("move")||g.includes("drag")||g.includes("place"),moveTarget:C[0],position:_(g)}},_=w=>{let g=400,C=300;return w.includes("center")?(g=400,C=300):w.includes("left")?(g=200,C=300):w.includes("right")?(g=600,C=300):w.includes("top")||w.includes("above")?(g=400,C=200):(w.includes("bottom")||w.includes("below"))&&(g=400,C=400),g=Math.round(g/40)*40,C=Math.round(C/40)*40,{x:g,y:C}},E=w=>{switch(w){case"battery":return{voltage:9,maxCurrent:1};case"resistor":return{resistance:100};case"bulb":return{power:60,resistance:240};case"switch":return{closed:!0};case"led":return{forwardVoltage:2.1,maxCurrent:.02};case"capacitor":return{capacitance:.001};default:return{}}},k=async w=>{if(!y(w)){d("Please describe a circuit action.");return}const{components:g,shouldConnect:C,shouldDisconnect:$,shouldReset:N,shouldMove:j,moveTarget:A,position:G}=v(w);if(N){s(),d("Circuit reset.");return}if($&&n){const se=g[0],ae=g[1];if(se&&ae){const ye=i.find(ee=>ee.type===se),Pe=i.find(ee=>ee.type===ae);ye&&Pe?(n(ye.id,"right",Pe.id,"left"),d(`Connection removed between ${se} and ${ae}.`)):d("Components not found for disconnection.")}else d("Please specify which components to disconnect.");return}if(j&&A){const se=i.find(ae=>ae.type===A);se?(r(se.id,"position",G),d(`${A} moved.`)):d(`${A} not found.`);return}if(g.length===0){d("No valid components found.");return}const V=[],H=[];g.forEach(se=>{const ae=i.find(ye=>ye.type===se);ae?V.push(ae):H.push(se)});const Q=[];H.forEach((se,ae)=>{const ye={id:`component-${Date.now()}-${ae}`,type:se,position:{x:200+ae*120,y:300},properties:E(se),nodes:[`node-${Date.now()}-${ae}-1`,`node-${Date.now()}-${ae}-2`],health:"normal"};t(ye),Q.push(ye)});const ie=[...V,...Q];C&&ie.length>1?(setTimeout(()=>{const se=ie.find(Pe=>Pe.type==="battery"),ae=ie.find(Pe=>Pe.type==="switch"),ye=ie.find(Pe=>["bulb","led","resistor"].includes(Pe.type));se&&ae&&ye?(e(se.id,ae.id,"right","left"),e(ae.id,ye.id,"right","left")):se&&ye&&!ae&&e(se.id,ye.id,"right","left")},100),H.length>0?d(`${H.join(", ")} added and connected.`):d("Components connected.")):H.length>0?d(`${H.join(", ")} added.`):d("Components already exist.")},p=async w=>{w.preventDefault(),!(!o.trim()||f)&&(m(!0),await k(o.trim()),m(!1),a(""))};return R.jsxs("div",{className:"generative-assistant",children:[R.jsxs("form",{onSubmit:p,children:[R.jsx("input",{type:"text",value:o,onChange:w=>a(w.target.value),placeholder:"add battery and bulb",disabled:f}),R.jsx("button",{type:"submit",disabled:f||!o.trim(),children:""})]}),c&&R.jsx("div",{className:"action-result",children:c})]})},Wm={wire:{emoji:"",label:"Wire"},battery:{emoji:"",label:"Battery"},resistor:{emoji:"",label:"Resistor"},bulb:{emoji:"",label:"Light Bulb"},switch:{emoji:"",label:"Switch"},led:{emoji:"",label:"LED"},capacitor:{emoji:"",label:"Capacitor"},ground:{emoji:"",label:"Ground"},inductor:{emoji:"",label:"Inductor"},diode:{emoji:"",label:"Diode"},potentiometer:{emoji:"",label:"Potentiometer"},fuse:{emoji:"",label:"Fuse"},disconnect:{emoji:"",label:"Disconnect"},move:{emoji:"",label:"Move"}},Mae=({components:t,wires:e,onComponentAdd:n,onComponentConnect:r,onWireDisconnect:s,onComponentRemove:i,onComponentUpdate:o,onReset:a,updateCircuitSimulation:c})=>{var U,z;const[d,f]=K.useState("wire"),[m,y]=K.useState(""),[v,_]=K.useState(null),[E,k]=K.useState(null),[p,w]=K.useState(null),[g,C]=K.useState(new Set),[$,N]=K.useState(new Set(["Connection","Power Sources","Passive Components","Active Components"])),[j]=K.useState(!1),[A]=K.useState(!1),[G,V]=K.useState(!1),[H,Q]=K.useState(null),ie=[{title:"Connection",components:[{type:"wire",label:"Wire",emoji:""},{type:"disconnect",label:"Disconnect",emoji:""},{type:"move",label:"Move",emoji:""}]},{title:"Power Sources",components:[{type:"battery",label:"Battery",emoji:""},{type:"ground",label:"Ground",emoji:""}]},{title:"Passive Components",components:[{type:"resistor",label:"Resistor",emoji:""},{type:"capacitor",label:"Capacitor",emoji:""},{type:"inductor",label:"Inductor",emoji:""},{type:"potentiometer",label:"Potentiometer",emoji:""}]},{title:"Active Components",components:[{type:"led",label:"LED",emoji:""},{type:"bulb",label:"Light Bulb",emoji:""},{type:"switch",label:"Switch",emoji:""},{type:"diode",label:"Diode",emoji:""},{type:"resistor",label:"Transistor",emoji:""}]},{title:"Other Components",components:[{type:"fuse",label:"Fuse",emoji:""},{type:"inductor",label:"Transformer",emoji:""},{type:"switch",label:"Relay",emoji:""},{type:"bulb",label:"Motor",emoji:""},{type:"resistor",label:"Speaker",emoji:""},{type:"resistor",label:"Microphone",emoji:""},{type:"resistor",label:"Antenna",emoji:""},{type:"capacitor",label:"Crystal",emoji:""},{type:"resistor",label:"Op-Amp",emoji:""}]}],se=b=>{N(T=>{const M=new Set(T);return M.has(b)?M.delete(b):M.add(b),M})},ae=ie.map(b=>({...b,components:b.components.filter(({label:T})=>T.toLowerCase().includes(m.toLowerCase()))})).filter(b=>b.components.length>0),ye=d==="wire",Pe=d==="disconnect",ee=b=>{const T=b.target.getStage(),M=T==null?void 0:T.getPointerPosition();if(M&&(w(null),!ye&&!Pe&&k(null),!Pe)){if(ye){let O=null;for(const F of t){const Z={x:F.position.x-25,y:F.position.y},le={x:F.position.x+25,y:F.position.y},ce=Math.sqrt((Z.x-M.x)**2+(Z.y-M.y)**2),W=Math.sqrt((le.x-M.x)**2+(le.y-M.y)**2);if(ce<15){O={componentId:F.id,terminal:"left"};break}else if(W<15){O={componentId:F.id,terminal:"right"};break}}if(O){v?(v.componentId!==O.componentId&&r(v.componentId,O.componentId,v.terminal,O.terminal),_(null)):_(O);return}else _(null)}else if(!G&&d!=="move"&&d!=="wire"&&d!=="disconnect"){const O={id:`component-${Date.now()}`,type:d,position:{x:M.x,y:M.y},rotation:0,properties:L(d),nodes:[`node-${Date.now()}-1`,`node-${Date.now()}-2`],health:"normal"};n(O)}}},ue=()=>{a(),C(new Set)};Ie.useEffect(()=>{const b=T=>{(T.key==="Delete"||T.key==="Backspace")&&E&&(s(E.from,E.fromTerminal,E.to,E.toTerminal),k(null)),T.key==="Escape"&&(k(null),w(null),_(null))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[E,s]);const L=b=>{switch(b){case"wire":return{};case"disconnect":return{};case"move":return{};case"battery":return{voltage:9,maxCurrent:1};case"resistor":return{resistance:100};case"bulb":return{power:60,resistance:240};case"switch":return{closed:!0};case"led":return{forwardVoltage:2.1,maxCurrent:.02};case"capacitor":return{capacitance:.001};case"ground":return{};case"inductor":return{inductance:.01};case"diode":return{forwardVoltage:.7};case"potentiometer":return{resistance:1e3,position:.5};case"fuse":return{maxCurrent:1,blown:!1};default:return{}}},I=b=>{const{position:T,type:M,properties:O}=b,Z=(b.health||"normal")==="normal"?"#333":"red",le=(v==null?void 0:v.componentId)===b.id,ce=le?"#00ff00":Z,W=T.x,X=T.y;switch(M){case"battery":const dt=(O.current||0)>0?"#0066cc":ce;return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-8,X],stroke:dt,strokeWidth:2}),R.jsx(ze,{points:[W-8,X-20,W-8,X+20],stroke:dt,strokeWidth:4}),R.jsx(ze,{points:[W+8,X-15,W+8,X+15],stroke:dt,strokeWidth:2}),R.jsx(ze,{points:[W+8,X,W+25,X],stroke:dt,strokeWidth:2}),R.jsx(Wu,{x:W-5,y:X-35,text:"+",fontSize:14,fill:dt}),R.jsx(Wu,{x:W+12,y:X-35,text:"-",fontSize:14,fill:dt}),le&&R.jsx(Br,{x:W,y:X,radius:35,stroke:"#00ff00",strokeWidth:3})]},b.id);case"resistor":const Fe=(O.current||0)>.01?"#ff6600":Z;return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-30,X,W-15,X],stroke:Fe,strokeWidth:2}),R.jsx(X1,{x:W-15,y:X-6,width:30,height:12,stroke:Fe,strokeWidth:2,fill:"white"}),R.jsx(ze,{points:[W+15,X,W+30,X],stroke:Fe,strokeWidth:2}),R.jsx(Wu,{x:W-8,y:X+3,text:"R",fontSize:10,fill:Fe})]},b.id);case"bulb":const Re=O.glowing,Je=Re?"#ffff66":"white",gt=Re?"#ffcc00":Z;return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-15,X],stroke:gt,strokeWidth:2}),R.jsx(Br,{x:W,y:X,radius:15,stroke:gt,strokeWidth:2,fill:Je}),R.jsx(ze,{points:[W-8,X-8,W+8,X+8],stroke:gt,strokeWidth:1}),R.jsx(ze,{points:[W-8,X+8,W+8,X-8],stroke:gt,strokeWidth:1}),R.jsx(ze,{points:[W+15,X,W+25,X],stroke:gt,strokeWidth:2}),Re&&R.jsx(Br,{x:W,y:X,radius:20,stroke:"#ffff66",strokeWidth:1,opacity:.3})]},b.id);case"switch":const vn=O.closed!==!1,Vt=vn?0:-15;return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-10,X],stroke:Z,strokeWidth:2}),R.jsx(Br,{x:W-10,y:X,radius:2,fill:Z}),R.jsx(ze,{points:[W-10,X,W+8,X+Vt],stroke:vn?"#00cc00":"#cc0000",strokeWidth:2}),R.jsx(Br,{x:W+10,y:X,radius:2,fill:Z}),R.jsx(ze,{points:[W+10,X,W+25,X],stroke:Z,strokeWidth:2})]},b.id);case"led":const $t=O.glowing,Nn=$t?"#ff0000":"#660000";return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-10,X],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-10,X-8,W+10,X,W-10,X+8,W-10,X-8],stroke:Z,strokeWidth:2,fill:"white"}),R.jsx(ze,{points:[W+10,X-8,W+10,X+8],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+10,X,W+25,X],stroke:Z,strokeWidth:2}),R.jsx(Br,{x:W,y:X,radius:3,fill:Nn}),$t&&R.jsxs(R.Fragment,{children:[R.jsx(ze,{points:[W+5,X-15,W+12,X-22],stroke:"red",strokeWidth:2}),R.jsx(ze,{points:[W+12,X-22,W+10,X-20],stroke:"red",strokeWidth:2}),R.jsx(ze,{points:[W+12,X-22,W+14,X-20],stroke:"red",strokeWidth:2}),R.jsx(Br,{x:W,y:X,radius:12,stroke:"#ff6666",strokeWidth:1,opacity:.4})]})]},b.id);case"capacitor":const Pn=O.charging,fn=Pn?"#0066ff":Z;return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-5,X],stroke:fn,strokeWidth:2}),R.jsx(ze,{points:[W-5,X-15,W-5,X+15],stroke:fn,strokeWidth:3}),R.jsx(ze,{points:[W+5,X-15,W+5,X+15],stroke:fn,strokeWidth:3}),R.jsx(ze,{points:[W+5,X,W+25,X],stroke:fn,strokeWidth:2}),Pn&&R.jsx(Wu,{x:W-8,y:X-25,text:"",fontSize:12,fill:"#0066ff"})]},b.id);case"ground":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W,X-20,W,X],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-15,X,W+15,X],stroke:Z,strokeWidth:3}),R.jsx(ze,{points:[W-10,X+5,W+10,X+5],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-5,X+10,W+5,X+10],stroke:Z,strokeWidth:1})]},b.id);case"inductor":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-15,X],stroke:Z,strokeWidth:2}),[0,1,2].map(fr=>R.jsx(Br,{x:W-10+fr*7,y:X-4,radius:4,stroke:Z,strokeWidth:2,fill:"none"},fr)),R.jsx(ze,{points:[W+11,X,W+25,X],stroke:Z,strokeWidth:2})]},b.id);case"diode":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-10,X],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-10,X-8,W+10,X,W-10,X+8,W-10,X-8],stroke:Z,strokeWidth:2,fill:"white"}),R.jsx(ze,{points:[W+10,X-8,W+10,X+8],stroke:Z,strokeWidth:3}),R.jsx(ze,{points:[W+10,X,W+25,X],stroke:Z,strokeWidth:2})]},b.id);case"potentiometer":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-30,X,W-15,X],stroke:Z,strokeWidth:2}),R.jsx(X1,{x:W-15,y:X-6,width:30,height:12,stroke:Z,strokeWidth:2,fill:"white"}),R.jsx(ze,{points:[W+15,X,W+30,X],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W,X-15,W,X-6],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-3,X-18,W+3,X-12],stroke:Z,strokeWidth:2}),R.jsx(Wu,{x:W-8,y:X+3,text:"POT",fontSize:8,fill:Z})]},b.id);case"fuse":const as=O.blown,Rn=as?"red":Z,Ks=as?"X":"F";return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-15,X],stroke:Rn,strokeWidth:2}),R.jsx(X1,{x:W-15,y:X-5,width:30,height:10,stroke:Rn,strokeWidth:2,fill:"white"}),R.jsx(ze,{points:[W+15,X,W+25,X],stroke:Rn,strokeWidth:2}),!as&&R.jsx(ze,{points:[W-10,X,W+10,X],stroke:Rn,strokeWidth:1}),R.jsx(Wu,{x:W-6,y:X+3,text:Ks,fontSize:8,fill:Rn})]},b.id);case"resistor":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-10,X],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-10,X-15,W-10,X+15],stroke:Z,strokeWidth:3}),R.jsx(ze,{points:[W-10,X-8,W+15,X-15],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W-10,X+8,W+15,X+15],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+15,X-15,W+15,X-25],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+15,X+15,W+15,X+25],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+12,X+12,W+18,X+18],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+15,X+15,W+12,X+12],stroke:Z,strokeWidth:2})]},b.id);case"inductor":return R.jsxs(Ie.Fragment,{children:[R.jsx(ze,{points:[W-25,X,W-15,X],stroke:Z,strokeWidth:2}),[0,1,2].map(fr=>R.jsx(Br,{x:W-10+fr*3,y:X-4,radius:3,stroke:Z,strokeWidth:2,fill:"none"},fr)),R.jsx(ze,{points:[W-2,X-15,W-2,X+15],stroke:Z,strokeWidth:2}),R.jsx(ze,{points:[W+2,X-15,W+2,X+15],stroke:Z,strokeWidth:2}),[0,1,2].map(fr=>R.jsx(Br,{x:W+6+fr*3,y:X-4,radius:3,stroke:Z,strokeWidth:2,fill:"none"},fr+3)),R.jsx(ze,{points:[W+15,X,W+25,X],stroke:Z,strokeWidth:2})]},b.id);default:return R.jsx(Br,{x:W,y:X,radius:8,fill:"gray",stroke:Z},b.id)}};return R.jsxs("div",{className:"circuit-workspace",children:[R.jsxs("div",{className:`component-sidebar ${j?"mobile-open":""}`,children:[R.jsxs("div",{className:"sidebar-header",children:[R.jsx("h2",{className:"sidebar-title",children:"Components"}),R.jsx("input",{type:"text",placeholder:"Search components...",className:"search-input",value:m,onChange:b=>y(b.target.value)}),(ye||Pe||v||G)&&R.jsx("div",{className:"selected-info",children:ye?v?"Click another component terminal to connect":"Click component terminals to connect them":Pe?"Click any wire to disconnect it":G?"Move Mode: Click and drag components to reposition them":`Selected: ${(U=Wm[d])==null?void 0:U.emoji} ${(z=Wm[d])==null?void 0:z.label}`}),E&&R.jsx("div",{className:"selected-wire-info",children:"Wire selected - Press Delete to disconnect or right-click for options"})]}),R.jsx("div",{className:"component-sections",children:ae.map(b=>R.jsxs("div",{className:"component-section",children:[R.jsxs("div",{className:"section-header",onClick:()=>se(b.title),children:[R.jsx("h3",{className:"section-title",children:b.title}),R.jsx("div",{className:`section-toggle ${$.has(b.title)?"expanded":""}`,children:""})]}),R.jsx("div",{className:`component-list ${$.has(b.title)?"":"collapsed"}`,children:b.components.map(({type:T,label:M,emoji:O})=>R.jsxs("button",{onClick:()=>{T==="move"?(V(!G),f("move")):(f(T),V(!1)),_(null)},className:`component-item ${d===T?"selected":""} ${T==="move"&&G?"move-active":""}`,children:[R.jsx("span",{className:"component-icon",children:O}),R.jsx("span",{children:M})]},T))})]},b.title))})]}),R.jsx("div",{className:"canvas-area",children:R.jsxs("div",{className:"canvas-container",children:[t.length===0&&R.jsx("div",{className:"empty-canvas-message",children:R.jsxs("div",{className:"message-content",children:[R.jsx("h3",{children:"Start Building Your Circuit"}),R.jsx("p",{children:"Select a component from the left panel, then click on the board to place it"}),R.jsxs("div",{className:"message-hint",children:[R.jsx("span",{className:"hint-icon",children:""}),R.jsx("span",{children:"Choose components"}),R.jsx("span",{className:"hint-arrow",children:""}),R.jsx("span",{className:"hint-icon",children:""}),R.jsx("span",{children:"Click to place"})]})]})}),R.jsx(Iae,{width:520,height:600,onClick:ee,onMouseDown:b=>{if(G){const T=b.target.getStage(),M=T==null?void 0:T.getPointerPosition();if(!M)return;const O=t.find(F=>Math.sqrt((F.position.x-M.x)**2+(F.position.y-M.y)**2)<50);O&&(Q(O.id),console.log("Selected component:",O.type),b.evt.preventDefault())}},onMouseMove:b=>{if(G&&H){const T=b.target.getStage(),M=T==null?void 0:T.getPointerPosition();M&&(o(H,"position",M),b.evt.preventDefault())}},onMouseUp:b=>{G&&H&&(Q(null),console.log("Released component"),b.evt.preventDefault())},style:{display:"block",margin:"0 auto",cursor:G?"move":"default"},children:R.jsxs(Oae,{children:[ye&&t.map(b=>R.jsxs(Ie.Fragment,{children:[R.jsx(Br,{x:b.position.x-25,y:b.position.y,radius:6,fill:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?"#EF4444":"#10B981",stroke:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?"#DC2626":"#059669",strokeWidth:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?2:1}),R.jsx(Br,{x:b.position.x+25,y:b.position.y,radius:6,fill:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?"#EF4444":"#10B981",stroke:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?"#DC2626":"#059669",strokeWidth:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?2:1})]},`terminals-${b.id}`)),e.map((b,T)=>{const M=t.find(le=>le.id===b.from),O=t.find(le=>le.id===b.to);if(!M||!O)return null;const F=b.fromTerminal==="left"?M.position.x-25:M.position.x+25,Z=b.toTerminal==="left"?O.position.x-25:O.position.x+25;return R.jsx(ze,{points:[F,M.position.y,Z,O.position.y],stroke:E===b?"#DC2626":"#6366F1",strokeWidth:E===b?4:3,hitStrokeWidth:10,onClick:le=>{le.cancelBubble=!0,Pe?s(b.from,b.fromTerminal,b.to,b.toTerminal):k(b)},onContextMenu:le=>{le.evt.preventDefault();const ce=le.target.getStage(),W=ce==null?void 0:ce.getPointerPosition();W&&w({x:W.x,y:W.y,wire:b})}},`user-wire-${T}`)}),t.map((b,T)=>{if(T===0)return null;const M=t[T-1],O=`${M.id}-${b.id}`;return g.has(O)?null:R.jsx(ze,{points:[M.position.x+25,M.position.y,b.position.x-25,b.position.y],stroke:"#9CA3AF",strokeWidth:2,dash:[5,5],hitStrokeWidth:10,onClick:F=>{F.cancelBubble=!0,Pe&&(C(Z=>new Set([...Z,O])),setTimeout(c,0))},onContextMenu:F=>{F.evt.preventDefault();const Z=F.target.getStage(),le=Z==null?void 0:Z.getPointerPosition();le&&w({x:le.x,y:le.y,wire:{type:"auto",connectionId:O}})}},`auto-wire-${b.id}`)}),t.map(I),G&&H&&(()=>{const b=t.find(T=>T.id===H);return b?R.jsx(Br,{x:b.position.x,y:b.position.y,radius:40,stroke:"#ff6600",strokeWidth:3,dash:[5,5]},`move-highlight-${H}`):null})()]})})]})}),R.jsxs("div",{className:`controls-sidebar ${A?"mobile-open":""}`,children:[R.jsxs("div",{className:"controls-header",children:[R.jsx("h2",{className:"controls-title",children:"Active Components"}),R.jsx("p",{className:"controls-subtitle",children:"Components on the board"})]}),R.jsx("div",{className:"stats-section",children:R.jsxs("div",{className:"stats-grid",children:[R.jsxs("div",{className:"stat-card",children:[R.jsx("span",{className:"stat-number",children:t.length}),R.jsx("span",{className:"stat-label",children:"Parts"})]}),R.jsxs("div",{className:"stat-card",children:[R.jsx("span",{className:"stat-number",children:e.length}),R.jsx("span",{className:"stat-label",children:"Wires"})]})]})}),R.jsx("div",{className:"components-section",children:t.filter(b=>b.type!=="wire").map(b=>{var T,M;return R.jsxs("div",{className:"board-component",children:[R.jsxs("div",{className:"component-header",children:[R.jsxs("div",{className:"component-info",children:[R.jsx("span",{className:"component-emoji",children:(T=Wm[b.type])==null?void 0:T.emoji}),R.jsx("span",{className:"component-name",children:(M=Wm[b.type])==null?void 0:M.label})]}),R.jsx("button",{className:"remove-btn",onClick:()=>i(b.id),title:"Remove component",children:""})]}),R.jsxs("div",{className:"component-controls",children:[b.type==="battery"&&R.jsxs("div",{className:"control-group",children:[R.jsxs("span",{className:"control-label",children:["Voltage: ",R.jsxs("span",{className:"control-value",children:[b.properties.voltage,"V"]})]}),R.jsx("input",{type:"range",min:"1",max:"24",value:b.properties.voltage||9,onChange:O=>o(b.id,"voltage",parseInt(O.target.value)),className:"control-slider"})]}),b.type==="resistor"&&R.jsxs("div",{className:"control-group",children:[R.jsxs("span",{className:"control-label",children:["Resistance: ",R.jsxs("span",{className:"control-value",children:[b.properties.resistance,""]})]}),R.jsx("input",{type:"range",min:"10",max:"1000",step:"10",value:b.properties.resistance||100,onChange:O=>o(b.id,"resistance",parseInt(O.target.value)),className:"control-slider"})]}),b.type==="led"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.glowing?"on":"off"}`}),R.jsx("span",{children:b.properties.glowing?"ON":"OFF"})]})]}),b.type==="bulb"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.spinning?"on":"off"}`}),R.jsx("span",{children:b.properties.spinning?"SPINNING":"STOPPED"})]})]}),b.type==="bulb"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.glowing?"on":"off"}`}),R.jsx("span",{children:b.properties.glowing?"ON":"OFF"})]})]}),b.type==="switch"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Switch:"}),R.jsx("button",{onClick:()=>o(b.id,"closed",!b.properties.closed),className:`switch-btn ${b.properties.closed?"closed":"open"}`,children:b.properties.closed?"CLOSED":"OPEN"})]})]})]},b.id)})})]}),R.jsx(Aae,{onComponentAdd:n,onComponentConnect:r,onWireDisconnect:s,onComponentUpdate:o,onReset:ue,components:t}),p&&R.jsx("div",{className:"wire-context-menu",style:{position:"absolute",left:p.x,top:p.y,background:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e3},children:R.jsx("button",{onClick:()=>{p.wire.type==="auto"?(C(b=>new Set([...b,p.wire.connectionId])),setTimeout(c,0)):s(p.wire.from,p.wire.fromTerminal,p.wire.to,p.wire.toTerminal),w(null),k(null)},style:{background:"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:"3px",cursor:"pointer"},children:"Disconnect Wire"})})]})},jae=({onLaunchPlayground:t,onLaunchAI:e})=>R.jsxs("div",{className:"homepage",children:[R.jsx("nav",{className:"homepage-nav",children:R.jsxs("div",{className:"nav-container",children:[R.jsx("div",{className:"nav-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("div",{className:"logo-icon",children:""}),R.jsx("span",{children:"OpenCircuit"})]})}),R.jsxs("div",{className:"nav-center",children:[R.jsx("a",{href:"#home",className:"nav-link active",children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link",onClick:n=>{n.preventDefault(),t()},children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link",onClick:n=>{n.preventDefault(),e()},children:"AI"})]}),R.jsx("div",{className:"nav-right",children:R.jsx("button",{className:"cta-button",onClick:t,children:"Launch Playground"})})]})}),R.jsx("section",{className:"hero",children:R.jsxs("div",{className:"hero-container",children:[R.jsxs("div",{className:"hero-left",children:[R.jsx("h1",{className:"hero-title",children:"Build. Connect. Understand Electricity."}),R.jsx("p",{className:"hero-subtitle",children:"A free, interactive electrical playground that lets learners build real circuits and understand how electricity flows  without labs, tools, or prompts."}),R.jsxs("div",{className:"hero-actions",children:[R.jsx("button",{className:"cta-button primary",onClick:t,children:"Launch Playground"}),R.jsx("button",{className:"cta-button secondary",onClick:e,children:"Ask AI Assistant"})]})]}),R.jsx("div",{className:"hero-right",children:R.jsxs("div",{className:"product-preview",children:[R.jsx("div",{className:"preview-header",children:R.jsxs("div",{className:"preview-dots",children:[R.jsx("span",{}),R.jsx("span",{}),R.jsx("span",{})]})}),R.jsxs("div",{className:"preview-content",children:[R.jsxs("div",{className:"preview-sidebar",children:[R.jsx("div",{className:"component-item",children:" Battery"}),R.jsx("div",{className:"component-item",children:" Bulb"}),R.jsx("div",{className:"component-item",children:" Switch"}),R.jsx("div",{className:"component-item",children:" LED"})]}),R.jsxs("div",{className:"preview-canvas",children:[R.jsx("div",{className:"circuit-element battery",children:""}),R.jsx("div",{className:"wire glowing"}),R.jsx("div",{className:"circuit-element bulb glowing",children:""})]})]})]})})]})}),R.jsx("section",{className:"value-props",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"value-grid",children:[R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"Learn by Building"}),R.jsx("p",{children:"Drag components and wire real circuits"})]}),R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"No Prompts. No Bots."}),R.jsx("p",{children:"The interface explains itself through visuals"})]}),R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"Accessible Everywhere"}),R.jsx("p",{children:"Runs in any browser, even on low-end devices"})]})]})})}),R.jsx("section",{className:"how-it-works",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"How It Works"}),R.jsxs("div",{className:"steps",children:[R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"1"}),R.jsx("h3",{children:"Choose Components"}),R.jsx("p",{children:"Select from batteries, bulbs, switches, and more"})]}),R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"2"}),R.jsx("h3",{children:"Connect Circuits"}),R.jsx("p",{children:"Wire components together with simple clicks"})]}),R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"3"}),R.jsx("h3",{children:"See Electricity Come Alive"}),R.jsx("p",{children:"Watch bulbs glow and circuits respond in real-time"})]})]})]})}),R.jsx("section",{className:"audience",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"Who It's For"}),R.jsxs("div",{className:"audience-grid",children:[R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Students"}),R.jsx("p",{children:"Learn electrical concepts through hands-on experimentation"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Teachers"}),R.jsx("p",{children:"Demonstrate circuits without expensive lab equipment"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Self-learners"}),R.jsx("p",{children:"Explore electricity at your own pace, anywhere"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Under-resourced Schools"}),R.jsx("p",{children:"Access quality electrical education without physical labs"})]})]})]})}),R.jsx("section",{className:"technology",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"tech-content",children:[R.jsx("h2",{children:"Powered by Generative UI (Tambo)"}),R.jsx("p",{children:"OpenCircuit uses AI to adapt the interface to what's happening in your circuit, showing the right information at the right time  without asking questions."})]})})}),R.jsx("section",{className:"final-cta",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"Start Building Circuits Today"}),R.jsx("button",{className:"cta-button primary large",onClick:t,children:"Launch Playground"})]})}),R.jsx("footer",{className:"footer",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"footer-content",children:[R.jsx("div",{className:"footer-left",children:R.jsx("span",{children:"OpenCircuit  2026"})}),R.jsx("div",{className:"footer-right"})]})})})]}),zae=({onBack:t,onGoToPlayground:e})=>{const[n,r]=K.useState(""),[s,i]=K.useState(!1),[o,a]=K.useState(null),c=y=>["voltage","current","resistance","ohm","circuit","led","capacitor","resistor","battery","power","electrical","electronics","ac","dc","transistor","diode","inductor","switch","wire","ground","frequency"].some(_=>y.toLowerCase().includes(_)),d=async y=>{var v,_,E,k,p,w;if(!c(y))return{type:"refusal",message:"I focus on electrical and circuit-related topics. Try asking about voltage, current, or components."};try{const g="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",C=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-8b-instant",messages:[{role:"system",content:"You are an electrical engineering tutor. Explain electrical concepts clearly for beginners. Keep responses concise and educational."},{role:"user",content:`Explain this electrical concept: ${y}`}],temperature:.3,max_tokens:300})});if(!C.ok){const H=await C.text();throw console.error("Groq API response:",H),new Error(`Groq API error: ${C.status}`)}const N=(_=(v=(await C.json()).choices[0])==null?void 0:v.message)==null?void 0:_.content;if(!N)throw new Error("No response from Groq");const j=N.split(`
`).filter(H=>H.trim()),A=((E=j[0])==null?void 0:E.replace(/\*\*/g,"").replace(/#+\s*/,""))||y,G=j.find(H=>!H.startsWith("**")&&!H.startsWith("-")&&H.length>50)||N.substring(0,200),V=j.filter(H=>H.startsWith("-")).map(H=>H.replace(/^-\s*/,"").replace(/\*\*/g,"")).slice(0,4);return{type:"concept",title:A,explanation:G.replace(/\*\*/g,""),breakdown:V.length>0?V:[(k=N.split(".")[0])==null?void 0:k.replace(/\*\*/g,""),(p=N.split(".")[1])==null?void 0:p.replace(/\*\*/g,""),(w=N.split(".")[2])==null?void 0:w.replace(/\*\*/g,"")].filter(Boolean)}}catch(g){console.error("Groq API error:",g);const C={current:{type:"concept",title:"Electric Current",explanation:"Electric current is the flow of electric charge through a conductor, measured in amperes (A).",breakdown:["Current flows from positive to negative terminal","Measured in amperes (A) or milliamperes (mA)","Higher current means more charge flowing per second","Current is what actually does the work in circuits"],formula:"I = Q/t (Current = Charge/Time)",example:"A 1A current means 1 coulomb of charge flows past a point every second"},voltage:{type:"concept",title:"Voltage",explanation:"Voltage is the electrical pressure that pushes current through a circuit.",breakdown:["Measured in volts (V)","Higher voltage can push more current","Like water pressure in pipes","Voltage difference creates current flow"],formula:"V = I  R (Ohm's Law)",example:"A 9V battery provides 9 volts of electrical pressure"}},$=Object.keys(C).find(N=>y.toLowerCase().includes(N));return $?C[$]:{type:"error",message:"Unable to generate explanation. Please try again or check your connection."}}},f=async y=>{if(y.preventDefault(),!!n.trim()){i(!0);try{const v=await d(n);a(v)}catch{a({type:"error",message:"Unable to generate explanation. Please try again."})}finally{i(!1)}}},m=()=>{if(!o)return null;switch(o.type){case"refusal":return R.jsx("div",{className:"explanation-card refusal",children:R.jsx("p",{children:o.message})});case"concept":return R.jsx("div",{className:"explanation-layout",children:R.jsxs("div",{className:"concept-card",children:[R.jsx("h2",{children:o.title}),R.jsx("p",{className:"main-explanation",children:o.explanation}),o.formula&&R.jsxs("div",{className:"formula-block",children:[R.jsx("h3",{children:"Formula"}),R.jsx("div",{className:"formula",children:o.formula})]}),o.breakdown&&R.jsxs("div",{className:"breakdown-panel",children:[R.jsx("h3",{children:"Key Points"}),R.jsx("ul",{children:o.breakdown.map((y,v)=>R.jsx("li",{children:y},v))})]}),o.example&&R.jsxs("div",{className:"example-block",children:[R.jsx("h3",{children:"Example"}),R.jsx("p",{children:o.example})]})]})});case"component":return R.jsx("div",{className:"explanation-layout",children:R.jsxs("div",{className:"component-card",children:[R.jsx("h2",{children:o.title}),R.jsx("p",{className:"main-explanation",children:o.explanation}),R.jsxs("div",{className:"breakdown-panel",children:[R.jsx("h3",{children:"Why This Matters"}),R.jsx("ul",{children:o.breakdown.map((y,v)=>R.jsx("li",{children:y},v))})]}),o.formula&&R.jsxs("div",{className:"formula-block",children:[R.jsx("h3",{children:"Calculation"}),R.jsx("div",{className:"formula",children:o.formula})]}),o.safety&&R.jsxs("div",{className:"safety-note",children:[R.jsx("h3",{children:" Safety Note"}),R.jsx("p",{children:o.safety})]})]})});default:return R.jsx("div",{className:"explanation-card general",children:R.jsx("p",{children:o.explanation})})}};return R.jsxs("div",{className:"ai-page",children:[R.jsxs("header",{className:"ai-header",children:[R.jsx("div",{className:"nav-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("span",{className:"logo-icon",children:""}),R.jsx("span",{className:"logo-text",children:"OpenCircuit"})]})}),R.jsxs("div",{className:"nav-center",children:[R.jsx("a",{href:"#home",className:"nav-link",onClick:y=>{y.preventDefault(),t()},children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link",onClick:y=>{y.preventDefault(),e()},children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link active",children:"AI"})]}),R.jsx("div",{className:"nav-right"})]}),R.jsxs("main",{className:"ai-main",children:[R.jsx("div",{className:"question-section",children:R.jsxs("form",{onSubmit:f,className:"question-form",children:[R.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Ask about electrical concepts... (e.g., What is Ohm's Law?)",disabled:s,className:"question-input"}),R.jsx("button",{type:"submit",disabled:s||!n.trim(),children:s?"...":"Ask"})]})}),R.jsx("div",{className:"explanation-area",children:m()}),R.jsxs("aside",{className:"quick-reference",children:[R.jsx("h3",{children:"Quick Reference"}),R.jsxs("div",{className:"reference-card",children:[R.jsx("h4",{children:"Key Formulas"}),R.jsxs("div",{className:"formula-list",children:[R.jsx("div",{children:"V = I  R (Ohm's Law)"}),R.jsx("div",{children:"P = V  I (Power)"}),R.jsx("div",{children:"Q = C  V (Capacitor)"})]})]}),R.jsxs("div",{className:"reference-card",children:[R.jsx("h4",{children:"Common Questions"}),R.jsxs("ul",{className:"topic-list",children:[R.jsx("li",{onClick:()=>r("What is Ohm's Law?"),children:"Ohm's Law"}),R.jsx("li",{onClick:()=>r("Why use resistor with LED?"),children:"LED Resistors"}),R.jsx("li",{onClick:()=>r("How does capacitor work?"),children:"Capacitors"}),R.jsx("li",{onClick:()=>r("AC vs DC difference?"),children:"AC vs DC"})]})]})]})]})]})};on({width:ys().default(800),height:ys().default(600),showGrid:Jl().default(!1),highlightNodes:qh(Ot()).optional()});const Dae=on({value:ys(),unit:Ot().default("A"),max:ys().optional(),position:eu(["top-right","top-left","bottom-right","bottom-left"]).default("top-right")}),Fae=on({value:ys(),unit:Ot().default("V"),range:qh(ys()).optional(),position:eu(["top-right","top-left","bottom-right","bottom-left"]).default("top-right")}),Lae=on({type:eu(["short_circuit","overcurrent","reverse_polarity","component_failure"]),severity:eu(["warning","critical"]),message:Ot().optional(),takeover:Jl().default(!1)}),Uae=on({intensity:ys().min(0).max(1),direction:eu(["forward","reverse"]).default("forward"),paths:qh(on({from:Ot(),to:Ot(),current:ys()})).optional()}),Vae=on({charging:Jl(),voltage:ys(),timeConstant:ys().optional(),showEquation:Jl().default(!1)}),Gae=on({componentId:Ot(),reversed:Jl(),showCorrection:Jl().default(!0)}),Hae=on({components:qh(on({id:Ot(),health:eu(["normal","stressed","damaged","blown"]),temperature:ys().optional()}))}),qae=on({strength:ys(),componentId:Ot(),showFieldLines:Jl().default(!0)}),Bae=on({mode:eu(["voltage","current","resistance"]),probeA:Ot().optional(),probeB:Ot().optional(),reading:ys().optional()}),Zae=({value:t,unit:e,max:n,position:r})=>R.jsxs("div",{className:`current-meter ${r}`,children:[R.jsxs("div",{className:"meter-display",children:[R.jsx("span",{className:"value",children:t.toFixed(3)}),R.jsx("span",{className:"unit",children:e})]}),R.jsx("div",{className:"meter-label",children:"Current"}),n&&R.jsx("div",{className:"meter-bar",children:R.jsx("div",{className:"meter-fill",style:{width:`${Math.min(100,t/n*100)}%`}})})]}),Wae=({value:t,unit:e,range:n,position:r})=>R.jsxs("div",{className:`voltage-meter ${r}`,children:[R.jsxs("div",{className:"meter-display",children:[R.jsx("span",{className:"value",children:t.toFixed(1)}),R.jsx("span",{className:"unit",children:e})]}),R.jsx("div",{className:"meter-label",children:"Voltage"}),n&&R.jsxs("div",{className:"meter-range",children:["Range: ",n[0],"V - ",n[1],"V"]})]}),Kae=({type:t,severity:e,message:n,takeover:r})=>R.jsxs("div",{className:`safety-alert ${e} ${r?"takeover":""}`,children:[R.jsx("div",{className:"alert-icon",children:""}),R.jsx("div",{className:"alert-message",children:n||(t==="short_circuit"?"SHORT CIRCUIT DETECTED!":t==="overcurrent"?"OVERCURRENT CONDITION!":t==="reverse_polarity"?"REVERSE POLARITY!":"COMPONENT FAILURE!")}),r&&R.jsxs("div",{className:"alert-actions",children:[R.jsx("button",{className:"reset-btn",children:"Reset Circuit"}),R.jsx("button",{className:"replace-btn",children:"Replace Components"})]})]}),Qae=({intensity:t,direction:e,paths:n})=>R.jsxs("div",{className:"power-flow-viz",children:[R.jsxs("div",{className:"flow-indicator",style:{opacity:t,animation:`pulse ${2-t}s infinite`},children:[e==="forward"?"":""," Power Flowing (",(t*100).toFixed(0),"%)"]}),n&&R.jsx("div",{className:"flow-paths",children:n.map((r,s)=>R.jsxs("div",{className:"path-info",children:[r.from,"  ",r.to,": ",r.current.toFixed(3),"A"]},s))})]}),Yae=({charging:t,voltage:e,timeConstant:n,showEquation:r})=>R.jsxs("div",{className:"charge-graph",children:[R.jsx("div",{className:"graph-title",children:"Capacitor"}),R.jsxs("div",{className:"charge-status",children:[t?" Charging":" Discharging"," (",e.toFixed(2),"V)"]}),n&&R.jsxs("div",{className:"time-constant",children:[" = ",n.toFixed(2),"s"]}),r&&R.jsx("div",{className:"equation",children:"V(t) = V(1 - e^(-t/))"})]}),Xae=({componentId:t,reversed:e,showCorrection:n})=>R.jsxs("div",{className:"polarity-indicator",children:[R.jsxs("div",{className:"polarity-warning",children:[" Component ",t,": ",e?"Reverse":"Correct"," Polarity"]}),e&&n&&R.jsx("div",{className:"correction-hint",children:" Flip component to allow current flow"})]}),Jae=({components:t})=>R.jsxs("div",{className:"component-health",children:[R.jsx("div",{className:"health-title",children:"Component Status"}),t.map(e=>R.jsxs("div",{className:`health-item ${e.health}`,children:[R.jsx("span",{className:"component-id",children:e.id}),R.jsx("span",{className:"health-status",children:e.health}),e.temperature&&R.jsxs("span",{className:"temperature",children:[e.temperature,"C"]})]},e.id))]}),ele=({strength:t,componentId:e,showFieldLines:n})=>R.jsxs("div",{className:"magnetic-field",children:[R.jsx("div",{className:"field-title",children:"Magnetic Field"}),R.jsxs("div",{className:"field-strength",children:["Component ",e,": ",t.toFixed(2)," Tesla"]}),n&&R.jsx("div",{className:"field-visualization",children:" Field lines visible"})]}),tle=({mode:t,probeA:e,probeB:n,reading:r})=>R.jsxs("div",{className:"multimeter",children:[R.jsx("div",{className:"meter-title",children:"Digital Multimeter"}),R.jsxs("div",{className:"meter-mode",children:["Mode: ",t.toUpperCase()]}),R.jsxs("div",{className:"probe-status",children:["Probe A: ",e||"Not connected",R.jsx("br",{}),"Probe B: ",n||"Not connected"]}),r!==void 0&&R.jsxs("div",{className:"meter-reading",children:[r.toFixed(3)," ",t==="voltage"?"V":t==="current"?"A":""]})]});class nle{constructor(){Rs(this,"state");Rs(this,"nodeMap");Rs(this,"componentMap");this.nodeMap=new Map,this.componentMap=new Map,this.state={nodes:[],components:[],wires:[],semanticState:{powerFlowActive:!1,openCircuit:!1,shortCircuit:!1,reversePolarityDetected:!1,overcurrentDetected:!1,capacitorCharging:!1,componentFailure:[],safetyRiskLevel:"none"}}}addComponent(e){this.componentMap.set(e.id,e),this.state.components=Array.from(this.componentMap.values()),this.updateCircuit()}connectNodes(e,n){this.state.wires.push({id:`wire-${Date.now()}`,fromNode:e,toNode:n,current:0,from:e,to:n}),this.updateCircuit()}updateCircuit(){this.initializeNodes(),this.calculateVoltages(),this.calculateCurrents(),this.updateComponentStates(),this.checkFailures()}initializeNodes(){this.state.components.forEach(e=>{e.nodes.forEach(n=>{if(!this.nodeMap.has(n)){const r={id:n,x:0,y:0,connections:[],voltage:0,current:0};this.nodeMap.set(n,r)}})}),this.state.nodes=Array.from(this.nodeMap.values())}calculateVoltages(){this.nodeMap.forEach(n=>{n.voltage!==void 0&&(n.voltage=0)}),this.state.components.filter(n=>n.type==="battery"&&(!n.health||n.health==="normal")).forEach(n=>{const[r,s]=n.nodes,i=n.properties.voltage||9;this.propagateVoltage(r,i),this.propagateVoltage(s,0)})}propagateVoltage(e,n){const r=this.nodeMap.get(e);r&&r.voltage!==void 0&&(r.voltage=n,this.state.wires.forEach(s=>{const i=this.nodeMap.get(s.from||s.fromNode),o=this.nodeMap.get(s.to||s.toNode);(s.from||s.fromNode)===e&&(o==null?void 0:o.voltage)===0?this.propagateVoltage(s.to||s.toNode,n):(s.to||s.toNode)===e&&(i==null?void 0:i.voltage)===0&&this.propagateVoltage(s.from||s.fromNode,n)}))}calculateCurrents(){this.state.components.forEach(e=>{var a,c;const[n,r]=e.nodes,s=((a=this.nodeMap.get(n))==null?void 0:a.voltage)||0,i=((c=this.nodeMap.get(r))==null?void 0:c.voltage)||0,o=Math.abs(s-i);switch(e.type){case"resistor":const d=e.properties.resistance||1e3;e.properties.current=o/d;break;case"bulb":const f=e.properties.resistance||240;e.properties.current=o/f,e.properties.glowing=e.properties.current>.01;break;case"led":const m=e.properties.forwardVoltage||2.1;o>=m?(e.properties.current=(o-m)/100,e.properties.glowing=!0):(e.properties.current=0,e.properties.glowing=!1);break;case"capacitor":e.properties.charging=o>.1,e.properties.voltage=o;break}})}updateComponentStates(){this.state.components.forEach(e=>{switch(e.type){case"switch":e.properties.closed=e.properties.closed!==!1;break;case"fuse":const n=e.properties.current||0,r=e.properties.maxCurrent||1;n>r&&(e.properties.blown=!0,e.health="blown");break;case"inductor":const s=e.properties.primaryVoltage||0,i=(e.properties.secondaryTurns||50)/(e.properties.primaryTurns||100);e.properties.secondaryVoltage=s*i;break}})}checkFailures(){this.state.components.forEach(e=>{const n=e.properties.current||0,r=e.properties.maxCurrent||.1;n>r&&(e.health="blown")})}getSemantics(){const e=this.state.components.some(i=>i.type==="battery"&&(!i.health||i.health==="normal")),n=this.hasClosedCircuit(),r=this.detectShortCircuit(),s=this.state.components.some(i=>i.health&&i.health!=="normal");return{powerFlowActive:e&&n&&!r,openCircuit:!n,shortCircuit:r,reversePolarityDetected:this.detectReversePolarity(),overcurrentDetected:this.detectOvercurrent(),capacitorCharging:this.detectCapacitorCharging(),componentFailure:s?["component"]:[],safetyRiskLevel:r?"high":s?"medium":"none"}}hasClosedCircuit(){return this.state.wires.length>0&&this.componentMap.size>1}detectShortCircuit(){return this.state.components.some(e=>e.type==="battery"&&(e.properties.current||0)>1)}detectReversePolarity(){return this.state.components.some(e=>e.type==="led"&&(e.properties.voltage||0)<0)}detectOvercurrent(){return this.state.components.some(e=>(e.properties.current||0)>(e.properties.maxCurrent||.1))}detectCapacitorCharging(){return this.state.components.some(e=>e.type==="capacitor"&&(e.properties.charging||!1))}getState(){return this.state}}const rle=()=>{const[t]=K.useState(()=>new nle),[e,n]=K.useState([]),[r,s]=K.useState([]),i=y=>{t.addComponent(y),n(v=>[...v,y])},o=y=>{n(v=>v.filter(_=>_.id!==y)),s(v=>v.filter(_=>_.from!==y&&_.to!==y)),setTimeout(f,0)},a=(y,v,_)=>{n(E=>{const k=E.map(N=>N.id===y?v==="position"?{...N,position:_}:{...N,properties:{...N.properties,[v]:_}}:N),p=k.find(N=>N.type==="battery"),w=k.filter(N=>N.type==="switch"),g=k.filter(N=>N.type==="bulb"),C=k.filter(N=>N.type==="led"),$=k.filter(N=>N.type==="bulb");return g.forEach(N=>{N.properties.glowing=!1,N.properties.current=0}),C.forEach(N=>{N.properties.glowing=!1,N.properties.current=0}),$.forEach(N=>{N.properties.spinning=!1}),p&&r.length>=1&&(w.length===0||w.every(j=>j.properties.closed===!0))&&(g.forEach(j=>{j.properties.glowing=!0,j.properties.current=.5}),C.forEach(j=>{j.properties.glowing=!0,j.properties.current=.02}),$.forEach(j=>{j.properties.spinning=!0,j.properties.current=.8})),k})},c=(y,v,_,E)=>{t.connectNodes(y,v);const k=[...r,{from:y,to:v,fromTerminal:_,toTerminal:E}];s(k),n(p=>{const w=p.map(A=>({...A}));w.forEach(A=>{A.type==="bulb"&&(A.properties.glowing=!1,A.properties.current=0),A.type==="led"&&(A.properties.glowing=!1,A.properties.current=0),A.type==="bulb"&&(A.properties.spinning=!1)});const g=w.find(A=>A.type==="battery"),C=w.filter(A=>A.type==="switch"),$=w.filter(A=>A.type==="bulb"),N=w.filter(A=>A.type==="led"),j=w.filter(A=>A.type==="bulb");return g&&k.length>=1&&(C.length===0||C.every(G=>G.properties.closed===!0))&&($.forEach(G=>{G.properties.glowing=!0,G.properties.current=.5}),N.forEach(G=>{G.properties.glowing=!0,G.properties.current=.02}),j.forEach(G=>{G.properties.spinning=!0,G.properties.current=.8})),w})},d=(y,v,_,E)=>{s(k=>k.filter(p=>!(p.from===y&&p.fromTerminal===v&&p.to===_&&p.toTerminal===E)&&!(p.from===_&&p.fromTerminal===E&&p.to===y&&p.toTerminal===v))),setTimeout(f,0)},f=()=>{n(y=>{const v=y.map(p=>({...p}));v.forEach(p=>{p.type==="bulb"&&(p.properties.glowing=!1,p.properties.current=0)});const _=v.find(p=>p.type==="battery"),E=v.filter(p=>p.type==="switch"),k=v.filter(p=>p.type==="bulb");return _&&k.length>0&&r.length>=2&&(E.length===0||E.every(w=>w.properties.closed===!0))&&r.length>=v.length-1&&k.forEach(g=>{g.properties.glowing=!0,g.properties.current=.5}),v})},m=()=>{n([]),s([])};return R.jsx("div",{className:"circuit-workspace",children:R.jsx(Mae,{components:e,wires:r,onComponentAdd:i,onComponentConnect:c,onWireDisconnect:d,onComponentRemove:o,onComponentUpdate:a,onReset:m,updateCircuitSimulation:f})})},sle=()=>{const t="tambo_h9DtPlxhQc64RlVyf0J5VA8a0qpA0GzyFMOM4tyGPcZtNltFzj7JZFvB0ziwUvp5W4iATKLiHYdSOGSYmzBmkpp91EGmvpJGk068Xpy2/9Q=",[e,n]=K.useState(!1),[r,s]=K.useState(!1);return!e&&!r?R.jsx(jae,{onLaunchPlayground:()=>n(!0),onLaunchAI:()=>s(!0)}):r?R.jsx(zae,{onBack:()=>s(!1),onGoToPlayground:()=>{s(!1),n(!0)}}):R.jsxs("div",{className:"app",children:[R.jsxs("header",{className:"app-header",children:[R.jsx("div",{className:"header-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("div",{className:"logo-icon",children:""}),R.jsx("span",{children:"OpenCircuit"})]})}),R.jsxs("div",{className:"header-center",children:[R.jsx("a",{href:"#home",className:"nav-link",onClick:i=>{i.preventDefault(),n(!1),s(!1)},children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link active",children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link",onClick:i=>{i.preventDefault(),n(!1),s(!0)},children:"AI"})]}),R.jsx("div",{className:"header-right"})]}),R.jsx("main",{className:"app-main",children:R.jsx($ne,{apiKey:t,components:[{name:"CurrentMeter",description:"Displays current flow measurements in the circuit",component:Zae,propsSchema:Dae},{name:"VoltageMeter",description:"Shows voltage measurements across circuit components",component:Wae,propsSchema:Fae},{name:"SafetyAlert",description:"Critical safety warnings for dangerous circuit conditions",component:Kae,propsSchema:Lae},{name:"PowerFlowVisualizer",description:"Visual representation of power flow through the circuit",component:Qae,propsSchema:Uae},{name:"ChargeGraph",description:"Graph showing charge accumulation over time",component:Yae,propsSchema:Vae},{name:"PolarityIndicator",description:"Shows positive and negative terminals",component:Xae,propsSchema:Gae},{name:"ComponentHealth",description:"Health status of circuit components",component:Jae,propsSchema:Hae},{name:"MagneticField",description:"Visualization of magnetic fields around components",component:ele,propsSchema:qae},{name:"Multimeter",description:"Digital multimeter for comprehensive measurements",component:tle,propsSchema:Bae}],children:R.jsx(rle,{})})})]})};J1.createRoot(document.getElementById("root")).render(R.jsx(Ie.StrictMode,{children:R.jsx(sle,{})}));const tce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),rce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Ile as $,eV as A,tV as B,sV as C,iV as D,oV as E,dV as F,dx as G,aV as H,cx as I,lV as J,uV as K,XU as L,Uue as M,cV as N,f0 as O,fV as P,Tt as Q,ri as R,Uz as S,IT as T,JF as U,sF as V,_ue as W,dL as X,oF as Y,Ele as Z,zu as _,ox as a,nF as a$,Cle as a0,rF as a1,bh as a2,WD as a3,QD as a4,tF as a5,Tle as a6,I8 as a7,BD as a8,ZD as a9,$le as aA,Ole as aB,mF as aC,lF as aD,YD as aE,RD as aF,ID as aG,dF as aH,HT as aI,jle as aJ,xD as aK,HD as aL,qD as aM,UD as aN,LD as aO,GD as aP,VD as aQ,uF as aR,JD as aS,FD as aT,Ule as aU,fF as aV,Ale as aW,Dle as aX,AD as aY,iF as aZ,yF as a_,MD as aa,jD as ab,vF as ac,xn as ad,dD as ae,bD as af,N8 as ag,SD as ah,yD as ai,x8 as aj,_D as ak,mD as al,fD as am,CD as an,gD as ao,hD as ap,uD as aq,cD as ar,PD as as,ED as at,vD as au,pD as av,kD as aw,uy as ax,wD as ay,wF as az,AU as b,ug as b$,pF as b0,O8 as b1,eF as b2,aF as b3,hF as b4,j8 as b5,gF as b6,Lle as b7,_F as b8,ly as b9,FF as bA,LF as bB,Yle as bC,QF as bD,Iue as bE,zF as bF,DF as bG,Xle as bH,Qle as bI,iue as bJ,WF as bK,Hle as bL,NF as bM,RF as bN,fL as bO,sue as bP,Nue as bQ,yue as bR,UF as bS,bF as bT,TF as bU,oL as bV,bue as bW,Pue as bX,Ble as bY,Zle as bZ,a2 as b_,cF as ba,z8 as bb,Mle as bc,cy as bd,Kt as be,zle as bf,xle as bg,Fle as bh,M8 as bi,Ke as bj,zD as bk,OD as bl,ND as bm,Nle as bn,A8 as bo,Rle as bp,DD as bq,wle as br,ne as bs,Gle as bt,Vle as bu,$D as bv,NC as bw,Mz as bx,qle as by,XF as bz,ax as c,cL as c$,TC as c0,sL as c1,KF as c2,Wle as c3,Jle as c4,vue as c5,MF as c6,jF as c7,HF as c8,GF as c9,YF as cA,xue as cB,ZF as cC,Tue as cD,Zh as cE,qT as cF,BT as cG,Aue as cH,aue as cI,Due as cJ,pue as cK,Mue as cL,wue as cM,hL as cN,tL as cO,ZT as cP,KT as cQ,kue as cR,hue as cS,iL as cT,kF as cU,Lue as cV,Fue as cW,Oue as cX,tue as cY,jue as cZ,uL as c_,BF as ca,qF as cb,VF as cc,AF as cd,zue as ce,L8 as cf,Cue as cg,nL as ch,o2 as ci,lg as cj,Sue as ck,F8 as cl,due as cm,mue as cn,c0 as co,fue as cp,xC as cq,oue as cr,xF as cs,Eue as ct,lue as cu,eL as cv,cue as cw,Rue as cx,uue as cy,aL as cz,jC as d,$ue as d0,lL as d1,Kle as d2,eue as d3,OF as d4,nue as d5,gue as d6,rL as d7,D8 as d8,EF as d9,nce as dA,rce as dB,CF as da,PF as db,$F as dc,rue as dd,IF as de,Wa as df,Ji as dg,Qz as dh,Yz as di,s2 as dj,Sf as dk,R8 as dl,KD as dm,XD as dn,ble as dp,Ple as dq,SF as dr,WT as ds,Jz as dt,Xz as du,pL as dv,kle as dw,Sle as dx,TD as dy,tce as dz,MU as e,jU as f,IU as g,zU as h,OU as i,Vue as j,lx as k,DU as l,ux as m,bt as n,LU as o,is as p,UU as q,VU as r,HU as s,qU as t,WU as u,KU as v,QU as w,YU as x,JU as y,mV as z};
