var KI=Object.defineProperty;var qb=t=>{throw TypeError(t)};var QI=(t,e,n)=>e in t?KI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Os=(t,e,n)=>QI(t,typeof e!="symbol"?e+"":e,n),q_=(t,e,n)=>e.has(t)||qb("Cannot "+n);var Z=(t,e,n)=>(q_(t,e,"read from private field"),n?n.call(t):e.get(t)),ze=(t,e,n)=>e.has(t)?qb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),we=(t,e,n,r)=>(q_(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),tt=(t,e,n)=>(q_(t,e,"access private method"),n);var sm=(t,e,n,r)=>({set _(s){we(t,e,s,n)},get _(){return Z(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dP={exports:{}},V0={},fP={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=Symbol.for("react.element"),YI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),eA=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),iA=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),Bb=Symbol.iterator;function aA(t){return t===null||typeof t!="object"?null:(t=Bb&&t[Bb]||t["@@iterator"],typeof t=="function"?t:null)}var hP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pP=Object.assign,mP={};function dd(t,e,n){this.props=t,this.context=e,this.refs=mP,this.updater=n||hP}dd.prototype.isReactComponent={};dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gP(){}gP.prototype=dd.prototype;function xS(t,e,n){this.props=t,this.context=e,this.refs=mP,this.updater=n||hP}var NS=xS.prototype=new gP;NS.constructor=xS;pP(NS,dd.prototype);NS.isPureReactComponent=!0;var Wb=Array.isArray,yP=Object.prototype.hasOwnProperty,RS={current:null},vP={key:!0,ref:!0,__self:!0,__source:!0};function _P(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yP.call(e,r)&&!vP.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Uh,type:t,key:i,ref:o,props:s,_owner:RS.current}}function lA(t,e){return{$$typeof:Uh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function OS(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uh}function uA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zb=/\/+/g;function B_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uA(""+t.key):e.toString(36)}function Qm(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uh:case YI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+B_(o,0):r,Wb(s)?(n="",t!=null&&(n=t.replace(Zb,"$&/")+"/"),Qm(s,e,n,"",function(d){return d})):s!=null&&(OS(s)&&(s=lA(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Wb(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+B_(i,a);o+=Qm(i,e,n,c,s)}else if(c=aA(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+B_(i,a++),o+=Qm(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function im(t,e,n){if(t==null)return t;var r=[],s=0;return Qm(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dr={current:null},Ym={transition:null},dA={ReactCurrentDispatcher:Dr,ReactCurrentBatchConfig:Ym,ReactCurrentOwner:RS};function wP(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:im,forEach:function(t,e,n){im(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return im(t,function(){e++}),e},toArray:function(t){return im(t,function(e){return e})||[]},only:function(t){if(!OS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=dd;ct.Fragment=XI;ct.Profiler=eA;ct.PureComponent=xS;ct.StrictMode=JI;ct.Suspense=sA;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;ct.act=wP;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pP({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=RS.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)yP.call(e,c)&&!vP.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Uh,type:t.type,key:s,ref:i,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:nA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tA,_context:t},t.Consumer=t};ct.createElement=_P;ct.createFactory=function(t){var e=_P.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:rA,render:t}};ct.isValidElement=OS;ct.lazy=function(t){return{$$typeof:oA,_payload:{_status:-1,_result:t},_init:cA}};ct.memo=function(t,e){return{$$typeof:iA,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Ym.transition;Ym.transition={};try{t()}finally{Ym.transition=e}};ct.unstable_act=wP;ct.useCallback=function(t,e){return Dr.current.useCallback(t,e)};ct.useContext=function(t){return Dr.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return Dr.current.useDeferredValue(t)};ct.useEffect=function(t,e){return Dr.current.useEffect(t,e)};ct.useId=function(){return Dr.current.useId()};ct.useImperativeHandle=function(t,e,n){return Dr.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return Dr.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return Dr.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return Dr.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return Dr.current.useReducer(t,e,n)};ct.useRef=function(t){return Dr.current.useRef(t)};ct.useState=function(t){return Dr.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return Dr.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return Dr.current.useTransition()};ct.version="18.3.1";fP.exports=ct;var Q=fP.exports;const Te=Lh(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA=Q,hA=Symbol.for("react.element"),pA=Symbol.for("react.fragment"),mA=Object.prototype.hasOwnProperty,gA=fA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yA={key:!0,ref:!0,__self:!0,__source:!0};function SP(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mA.call(e,r)&&!yA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hA,type:t,key:i,ref:o,props:s,_owner:gA.current}}V0.Fragment=pA;V0.jsx=SP;V0.jsxs=SP;dP.exports=V0;var R=dP.exports,J1={},kP={exports:{}},_s={},bP={exports:{}},EP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ue){var L=ee.length;ee.push(ue);e:for(;0<L;){var I=L-1>>>1,V=ee[I];if(0<s(V,ue))ee[I]=ue,ee[L]=V,L=I;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ue=ee[0],L=ee.pop();if(L!==ue){ee[0]=L;e:for(var I=0,V=ee.length,z=V>>>1;I<z;){var b=2*(I+1)-1,T=ee[b],j=b+1,O=ee[j];if(0>s(T,L))j<V&&0>s(O,T)?(ee[I]=O,ee[j]=L,I=j):(ee[I]=T,ee[b]=L,I=b);else if(j<V&&0>s(O,L))ee[I]=O,ee[j]=L,I=j;else break e}}return ue}function s(ee,ue){var L=ee.sortIndex-ue.sortIndex;return L!==0?L:ee.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],f=1,m=null,y=3,v=!1,_=!1,E=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(ee){for(var ue=n(d);ue!==null;){if(ue.callback===null)r(d);else if(ue.startTime<=ee)r(d),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=n(d)}}function C(ee){if(E=!1,g(ee),!_)if(n(c)!==null)_=!0,ve($);else{var ue=n(d);ue!==null&&$e(C,ue.startTime-ee)}}function $(ee,ue){_=!1,E&&(E=!1,p(A),A=-1),v=!0;var L=y;try{for(g(ue),m=n(c);m!==null&&(!(m.expirationTime>ue)||ee&&!B());){var I=m.callback;if(typeof I=="function"){m.callback=null,y=m.priorityLevel;var V=I(m.expirationTime<=ue);ue=t.unstable_now(),typeof V=="function"?m.callback=V:m===n(c)&&r(c),g(ue)}else r(c);m=n(c)}if(m!==null)var z=!0;else{var b=n(d);b!==null&&$e(C,b.startTime-ue),z=!1}return z}finally{m=null,y=L,v=!1}}var N=!1,M=null,A=-1,q=5,G=-1;function B(){return!(t.unstable_now()-G<q)}function Y(){if(M!==null){var ee=t.unstable_now();G=ee;var ue=!0;try{ue=M(!0,ee)}finally{ue?ie():(N=!1,M=null)}}else N=!1}var ie;if(typeof w=="function")ie=function(){w(Y)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ae=se.port2;se.port1.onmessage=Y,ie=function(){ae.postMessage(null)}}else ie=function(){k(Y,0)};function ve(ee){M=ee,N||(N=!0,ie())}function $e(ee,ue){A=k(function(){ee(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,ve($))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var L=y;y=ue;try{return ee()}finally{y=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ue){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var L=y;y=ee;try{return ue()}finally{y=L}},t.unstable_scheduleCallback=function(ee,ue,L){var I=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?I+L:I):L=I,ee){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,ee={id:f++,callback:ue,priorityLevel:ee,startTime:L,expirationTime:V,sortIndex:-1},L>I?(ee.sortIndex=L,e(d,ee),n(c)===null&&ee===n(d)&&(E?(p(A),A=-1):E=!0,$e(C,L-I))):(ee.sortIndex=V,e(c,ee),_||v||(_=!0,ve($))),ee},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(ee){var ue=y;return function(){var L=y;y=ue;try{return ee.apply(this,arguments)}finally{y=L}}}})(EP);bP.exports=EP;var If=bP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=Q,gs=If;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CP=new Set,ih={};function uu(t,e){Hc(t,e),Hc(t+"Capture",e)}function Hc(t,e){for(ih[t]=e,t=0;t<e.length;t++)CP.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ew=Object.prototype.hasOwnProperty,_A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kb={},Qb={};function wA(t){return ew.call(Qb,t)?!0:ew.call(Kb,t)?!1:_A.test(t)?Qb[t]=!0:(Kb[t]=!0,!1)}function SA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kA(t,e,n,r){if(e===null||typeof e>"u"||SA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cr[t]=new Fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cr[e]=new Fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cr[t]=new Fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cr[t]=new Fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cr[t]=new Fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cr[t]=new Fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cr[t]=new Fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cr[t]=new Fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cr[t]=new Fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var IS=/[\-:]([a-z])/g;function AS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(IS,AS);cr[e]=new Fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(IS,AS);cr[e]=new Fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(IS,AS);cr[e]=new Fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cr[t]=new Fr(t,1,!1,t.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cr[t]=new Fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function jS(t,e,n,r){var s=cr.hasOwnProperty(e)?cr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kA(e,n,s,r)&&(n=null),r||s===null?wA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vo=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,om=Symbol.for("react.element"),ic=Symbol.for("react.portal"),oc=Symbol.for("react.fragment"),MS=Symbol.for("react.strict_mode"),tw=Symbol.for("react.profiler"),PP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),zS=Symbol.for("react.forward_ref"),nw=Symbol.for("react.suspense"),rw=Symbol.for("react.suspense_list"),DS=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),TP=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function Qd(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var un=Object.assign,W_;function mf(t){if(W_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);W_=e&&e[1]||""}return`
`+W_+t}var Z_=!1;function K_(t,e){if(!t||Z_)return"";Z_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Z_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mf(t):""}function bA(t){switch(t.tag){case 5:return mf(t.type);case 16:return mf("Lazy");case 13:return mf("Suspense");case 19:return mf("SuspenseList");case 0:case 2:case 15:return t=K_(t.type,!1),t;case 11:return t=K_(t.type.render,!1),t;case 1:return t=K_(t.type,!0),t;default:return""}}function sw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oc:return"Fragment";case ic:return"Portal";case tw:return"Profiler";case MS:return"StrictMode";case nw:return"Suspense";case rw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $P:return(t.displayName||"Context")+".Consumer";case PP:return(t._context.displayName||"Context")+".Provider";case zS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DS:return e=t.displayName||null,e!==null?e:sw(t.type)||"Memo";case da:e=t._payload,t=t._init;try{return sw(t(e))}catch{}}return null}function EA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sw(e);case 8:return e===MS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Va(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CA(t){var e=xP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function am(t){t._valueTracker||(t._valueTracker=CA(t))}function NP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iw(t,e){var n=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Va(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RP(t,e){e=e.checked,e!=null&&jS(t,"checked",e,!1)}function ow(t,e){RP(t,e);var n=Va(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?aw(t,e.type,n):e.hasOwnProperty("defaultValue")&&aw(t,e.type,Va(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function aw(t,e,n){(e!=="number"||xg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gf=Array.isArray;function wc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Va(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function lw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if(gf(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Va(n)}}function OP(t,e){var n=Va(e.value),r=Va(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lm,AP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lm=lm||document.createElement("div"),lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PA=["Webkit","ms","Moz","O"];Object.keys(Af).forEach(function(t){PA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Af[e]=Af[t]})});function jP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Af.hasOwnProperty(t)&&Af[t]?(""+e).trim():e+"px"}function MP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $A=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cw(t,e){if(e){if($A[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function dw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fw=null;function FS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hw=null,Sc=null,kc=null;function nE(t){if(t=Hh(t)){if(typeof hw!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=W0(e),hw(t.stateNode,t.type,e))}}function zP(t){Sc?kc?kc.push(t):kc=[t]:Sc=t}function DP(){if(Sc){var t=Sc,e=kc;if(kc=Sc=null,nE(t),e)for(t=0;t<e.length;t++)nE(e[t])}}function FP(t,e){return t(e)}function LP(){}var Q_=!1;function UP(t,e,n){if(Q_)return t(e,n);Q_=!0;try{return FP(t,e,n)}finally{Q_=!1,(Sc!==null||kc!==null)&&(LP(),DP())}}function ah(t,e){var n=t.stateNode;if(n===null)return null;var r=W0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var pw=!1;if(jo)try{var Yd={};Object.defineProperty(Yd,"passive",{get:function(){pw=!0}}),window.addEventListener("test",Yd,Yd),window.removeEventListener("test",Yd,Yd)}catch{pw=!1}function TA(t,e,n,r,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var jf=!1,Ng=null,Rg=!1,mw=null,xA={onError:function(t){jf=!0,Ng=t}};function NA(t,e,n,r,s,i,o,a,c){jf=!1,Ng=null,TA.apply(xA,arguments)}function RA(t,e,n,r,s,i,o,a,c){if(NA.apply(this,arguments),jf){if(jf){var d=Ng;jf=!1,Ng=null}else throw Error(fe(198));Rg||(Rg=!0,mw=d)}}function cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rE(t){if(cu(t)!==t)throw Error(fe(188))}function OA(t){var e=t.alternate;if(!e){if(e=cu(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rE(s),t;if(i===r)return rE(s),e;i=i.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function GP(t){return t=OA(t),t!==null?HP(t):null}function HP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HP(t);if(e!==null)return e;t=t.sibling}return null}var qP=gs.unstable_scheduleCallback,sE=gs.unstable_cancelCallback,IA=gs.unstable_shouldYield,AA=gs.unstable_requestPaint,bn=gs.unstable_now,jA=gs.unstable_getCurrentPriorityLevel,LS=gs.unstable_ImmediatePriority,BP=gs.unstable_UserBlockingPriority,Og=gs.unstable_NormalPriority,MA=gs.unstable_LowPriority,WP=gs.unstable_IdlePriority,G0=null,Ji=null;function zA(t){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(G0,t,void 0,(t.current.flags&128)===128)}catch{}}var bi=Math.clz32?Math.clz32:LA,DA=Math.log,FA=Math.LN2;function LA(t){return t>>>=0,t===0?32:31-(DA(t)/FA|0)|0}var um=64,cm=4194304;function yf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ig(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=yf(a):(i&=o,i!==0&&(r=yf(i)))}else o=n&~s,o!==0?r=yf(o):i!==0&&(r=yf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bi(e),s=1<<n,r|=t[n],e&=~s;return r}function UA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-bi(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=UA(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function gw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZP(){var t=um;return um<<=1,!(um&4194240)&&(um=64),t}function Y_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bi(e),t[e]=n}function GA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-bi(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function US(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bi(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Nt=0;function KP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QP,VS,YP,XP,JP,yw=!1,dm=[],Ra=null,Oa=null,Ia=null,lh=new Map,uh=new Map,ma=[],HA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iE(t,e){switch(t){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":lh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uh.delete(e.pointerId)}}function Xd(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hh(e),e!==null&&VS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qA(t,e,n,r,s){switch(e){case"focusin":return Ra=Xd(Ra,t,e,n,r,s),!0;case"dragenter":return Oa=Xd(Oa,t,e,n,r,s),!0;case"mouseover":return Ia=Xd(Ia,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return lh.set(i,Xd(lh.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uh.set(i,Xd(uh.get(i)||null,t,e,n,r,s)),!0}return!1}function e$(t){var e=Rl(t.target);if(e!==null){var n=cu(e);if(n!==null){if(e=n.tag,e===13){if(e=VP(n),e!==null){t.blockedOn=e,JP(t.priority,function(){YP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fw=r,n.target.dispatchEvent(r),fw=null}else return e=Hh(n),e!==null&&VS(e),t.blockedOn=n,!1;e.shift()}return!0}function oE(t,e,n){Xm(t)&&n.delete(e)}function BA(){yw=!1,Ra!==null&&Xm(Ra)&&(Ra=null),Oa!==null&&Xm(Oa)&&(Oa=null),Ia!==null&&Xm(Ia)&&(Ia=null),lh.forEach(oE),uh.forEach(oE)}function Jd(t,e){t.blockedOn===e&&(t.blockedOn=null,yw||(yw=!0,gs.unstable_scheduleCallback(gs.unstable_NormalPriority,BA)))}function ch(t){function e(s){return Jd(s,t)}if(0<dm.length){Jd(dm[0],t);for(var n=1;n<dm.length;n++){var r=dm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ra!==null&&Jd(Ra,t),Oa!==null&&Jd(Oa,t),Ia!==null&&Jd(Ia,t),lh.forEach(e),uh.forEach(e),n=0;n<ma.length;n++)r=ma[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ma.length&&(n=ma[0],n.blockedOn===null);)e$(n),n.blockedOn===null&&ma.shift()}var bc=Vo.ReactCurrentBatchConfig,Ag=!0;function WA(t,e,n,r){var s=Nt,i=bc.transition;bc.transition=null;try{Nt=1,GS(t,e,n,r)}finally{Nt=s,bc.transition=i}}function ZA(t,e,n,r){var s=Nt,i=bc.transition;bc.transition=null;try{Nt=4,GS(t,e,n,r)}finally{Nt=s,bc.transition=i}}function GS(t,e,n,r){if(Ag){var s=vw(t,e,n,r);if(s===null)a1(t,e,r,jg,n),iE(t,r);else if(qA(s,t,e,n,r))r.stopPropagation();else if(iE(t,r),e&4&&-1<HA.indexOf(t)){for(;s!==null;){var i=Hh(s);if(i!==null&&QP(i),i=vw(t,e,n,r),i===null&&a1(t,e,r,jg,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else a1(t,e,r,null,n)}}var jg=null;function vw(t,e,n,r){if(jg=null,t=FS(r),t=Rl(t),t!==null)if(e=cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jg=t,null}function t$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jA()){case LS:return 1;case BP:return 4;case Og:case MA:return 16;case WP:return 536870912;default:return 16}default:return 16}}var $a=null,HS=null,Jm=null;function n$(){if(Jm)return Jm;var t,e=HS,n=e.length,r,s="value"in $a?$a.value:$a.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Jm=s.slice(t,1<r?1-r:void 0)}function eg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fm(){return!0}function aE(){return!1}function ws(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fm:aE,this.isPropagationStopped=aE,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fm)},persist:function(){},isPersistent:fm}),e}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qS=ws(fd),Gh=un({},fd,{view:0,detail:0}),KA=ws(Gh),X_,J_,ef,H0=un({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ef&&(ef&&t.type==="mousemove"?(X_=t.screenX-ef.screenX,J_=t.screenY-ef.screenY):J_=X_=0,ef=t),X_)},movementY:function(t){return"movementY"in t?t.movementY:J_}}),lE=ws(H0),QA=un({},H0,{dataTransfer:0}),YA=ws(QA),XA=un({},Gh,{relatedTarget:0}),e1=ws(XA),JA=un({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),ej=ws(JA),tj=un({},fd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nj=ws(tj),rj=un({},fd,{data:0}),uE=ws(rj),sj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ij={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oj[t])?!!e[t]:!1}function BS(){return aj}var lj=un({},Gh,{key:function(t){if(t.key){var e=sj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ij[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BS,charCode:function(t){return t.type==="keypress"?eg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uj=ws(lj),cj=un({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cE=ws(cj),dj=un({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BS}),fj=ws(dj),hj=un({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),pj=ws(hj),mj=un({},H0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gj=ws(mj),yj=[9,13,27,32],WS=jo&&"CompositionEvent"in window,Mf=null;jo&&"documentMode"in document&&(Mf=document.documentMode);var vj=jo&&"TextEvent"in window&&!Mf,r$=jo&&(!WS||Mf&&8<Mf&&11>=Mf),dE=" ",fE=!1;function s$(t,e){switch(t){case"keyup":return yj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i$(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ac=!1;function _j(t,e){switch(t){case"compositionend":return i$(e);case"keypress":return e.which!==32?null:(fE=!0,dE);case"textInput":return t=e.data,t===dE&&fE?null:t;default:return null}}function wj(t,e){if(ac)return t==="compositionend"||!WS&&s$(t,e)?(t=n$(),Jm=HS=$a=null,ac=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r$&&e.locale!=="ko"?null:e.data;default:return null}}var Sj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sj[t.type]:e==="textarea"}function o$(t,e,n,r){zP(r),e=Mg(e,"onChange"),0<e.length&&(n=new qS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zf=null,dh=null;function kj(t){y$(t,0)}function q0(t){var e=cc(t);if(NP(e))return t}function bj(t,e){if(t==="change")return e}var a$=!1;if(jo){var t1;if(jo){var n1="oninput"in document;if(!n1){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),n1=typeof pE.oninput=="function"}t1=n1}else t1=!1;a$=t1&&(!document.documentMode||9<document.documentMode)}function mE(){zf&&(zf.detachEvent("onpropertychange",l$),dh=zf=null)}function l$(t){if(t.propertyName==="value"&&q0(dh)){var e=[];o$(e,dh,t,FS(t)),UP(kj,e)}}function Ej(t,e,n){t==="focusin"?(mE(),zf=e,dh=n,zf.attachEvent("onpropertychange",l$)):t==="focusout"&&mE()}function Cj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return q0(dh)}function Pj(t,e){if(t==="click")return q0(e)}function $j(t,e){if(t==="input"||t==="change")return q0(e)}function Tj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:Tj;function fh(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ew.call(e,s)||!Ti(t[s],e[s]))return!1}return!0}function gE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yE(t,e){var n=gE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gE(n)}}function u$(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u$(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c$(){for(var t=window,e=xg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xg(t.document)}return e}function ZS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xj(t){var e=c$(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u$(n.ownerDocument.documentElement,n)){if(r!==null&&ZS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=yE(n,i);var o=yE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Nj=jo&&"documentMode"in document&&11>=document.documentMode,lc=null,_w=null,Df=null,ww=!1;function vE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ww||lc==null||lc!==xg(r)||(r=lc,"selectionStart"in r&&ZS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Df&&fh(Df,r)||(Df=r,r=Mg(_w,"onSelect"),0<r.length&&(e=new qS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lc)))}function hm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uc={animationend:hm("Animation","AnimationEnd"),animationiteration:hm("Animation","AnimationIteration"),animationstart:hm("Animation","AnimationStart"),transitionend:hm("Transition","TransitionEnd")},r1={},d$={};jo&&(d$=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function B0(t){if(r1[t])return r1[t];if(!uc[t])return t;var e=uc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d$)return r1[t]=e[n];return t}var f$=B0("animationend"),h$=B0("animationiteration"),p$=B0("animationstart"),m$=B0("transitionend"),g$=new Map,_E="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wa(t,e){g$.set(t,e),uu(e,[t])}for(var s1=0;s1<_E.length;s1++){var i1=_E[s1],Rj=i1.toLowerCase(),Oj=i1[0].toUpperCase()+i1.slice(1);Wa(Rj,"on"+Oj)}Wa(f$,"onAnimationEnd");Wa(h$,"onAnimationIteration");Wa(p$,"onAnimationStart");Wa("dblclick","onDoubleClick");Wa("focusin","onFocus");Wa("focusout","onBlur");Wa(m$,"onTransitionEnd");Hc("onMouseEnter",["mouseout","mouseover"]);Hc("onMouseLeave",["mouseout","mouseover"]);Hc("onPointerEnter",["pointerout","pointerover"]);Hc("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ij=new Set("cancel close invalid load scroll toggle".split(" ").concat(vf));function wE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RA(r,e,void 0,t),t.currentTarget=null}function y$(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;wE(s,a,d),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;wE(s,a,d),i=c}}}if(Rg)throw t=mw,Rg=!1,mw=null,t}function qt(t,e){var n=e[Cw];n===void 0&&(n=e[Cw]=new Set);var r=t+"__bubble";n.has(r)||(v$(e,t,2,!1),n.add(r))}function o1(t,e,n){var r=0;e&&(r|=4),v$(n,t,r,e)}var pm="_reactListening"+Math.random().toString(36).slice(2);function hh(t){if(!t[pm]){t[pm]=!0,CP.forEach(function(n){n!=="selectionchange"&&(Ij.has(n)||o1(n,!1,t),o1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pm]||(e[pm]=!0,o1("selectionchange",!1,e))}}function v$(t,e,n,r){switch(t$(e)){case 1:var s=WA;break;case 4:s=ZA;break;default:s=GS}n=s.bind(null,e,n,t),s=void 0,!pw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function a1(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UP(function(){var d=i,f=FS(n),m=[];e:{var y=g$.get(t);if(y!==void 0){var v=qS,_=t;switch(t){case"keypress":if(eg(n)===0)break e;case"keydown":case"keyup":v=uj;break;case"focusin":_="focus",v=e1;break;case"focusout":_="blur",v=e1;break;case"beforeblur":case"afterblur":v=e1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=lE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=YA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=fj;break;case f$:case h$:case p$:v=ej;break;case m$:v=pj;break;case"scroll":v=KA;break;case"wheel":v=gj;break;case"copy":case"cut":case"paste":v=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=cE}var E=(e&4)!==0,k=!E&&t==="scroll",p=E?y!==null?y+"Capture":null:y;E=[];for(var w=d,g;w!==null;){g=w;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,p!==null&&(C=ah(w,p),C!=null&&E.push(ph(w,C,g)))),k)break;w=w.return}0<E.length&&(y=new v(y,_,null,n,f),m.push({event:y,listeners:E}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",y&&n!==fw&&(_=n.relatedTarget||n.fromElement)&&(Rl(_)||_[Mo]))break e;if((v||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=d,_=_?Rl(_):null,_!==null&&(k=cu(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=d),v!==_)){if(E=lE,C="onMouseLeave",p="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(E=cE,C="onPointerLeave",p="onPointerEnter",w="pointer"),k=v==null?y:cc(v),g=_==null?y:cc(_),y=new E(C,w+"leave",v,n,f),y.target=k,y.relatedTarget=g,C=null,Rl(f)===d&&(E=new E(p,w+"enter",_,n,f),E.target=g,E.relatedTarget=k,C=E),k=C,v&&_)t:{for(E=v,p=_,w=0,g=E;g;g=Du(g))w++;for(g=0,C=p;C;C=Du(C))g++;for(;0<w-g;)E=Du(E),w--;for(;0<g-w;)p=Du(p),g--;for(;w--;){if(E===p||p!==null&&E===p.alternate)break t;E=Du(E),p=Du(p)}E=null}else E=null;v!==null&&SE(m,y,v,E,!1),_!==null&&k!==null&&SE(m,k,_,E,!0)}}e:{if(y=d?cc(d):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var $=bj;else if(hE(y))if(a$)$=$j;else{$=Cj;var N=Ej}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&($=Pj);if($&&($=$(t,d))){o$(m,$,n,f);break e}N&&N(t,y,d),t==="focusout"&&(N=y._wrapperState)&&N.controlled&&y.type==="number"&&aw(y,"number",y.value)}switch(N=d?cc(d):window,t){case"focusin":(hE(N)||N.contentEditable==="true")&&(lc=N,_w=d,Df=null);break;case"focusout":Df=_w=lc=null;break;case"mousedown":ww=!0;break;case"contextmenu":case"mouseup":case"dragend":ww=!1,vE(m,n,f);break;case"selectionchange":if(Nj)break;case"keydown":case"keyup":vE(m,n,f)}var M;if(WS)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ac?s$(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(r$&&n.locale!=="ko"&&(ac||A!=="onCompositionStart"?A==="onCompositionEnd"&&ac&&(M=n$()):($a=f,HS="value"in $a?$a.value:$a.textContent,ac=!0)),N=Mg(d,A),0<N.length&&(A=new uE(A,t,null,n,f),m.push({event:A,listeners:N}),M?A.data=M:(M=i$(n),M!==null&&(A.data=M)))),(M=vj?_j(t,n):wj(t,n))&&(d=Mg(d,"onBeforeInput"),0<d.length&&(f=new uE("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=M))}y$(m,e)})}function ph(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ah(t,n),i!=null&&r.unshift(ph(t,i,s)),i=ah(t,e),i!=null&&r.push(ph(t,i,s))),t=t.return}return r}function Du(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=ah(n,i),c!=null&&o.unshift(ph(n,c,a))):s||(c=ah(n,i),c!=null&&o.push(ph(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Aj=/\r\n?/g,jj=/\u0000|\uFFFD/g;function kE(t){return(typeof t=="string"?t:""+t).replace(Aj,`
`).replace(jj,"")}function mm(t,e,n){if(e=kE(e),kE(t)!==e&&n)throw Error(fe(425))}function zg(){}var Sw=null,kw=null;function bw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ew=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(t){return bE.resolve(null).then(t).catch(Dj)}:Ew;function Dj(t){setTimeout(function(){throw t})}function l1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ch(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ch(e)}function Aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hd=Math.random().toString(36).slice(2),qi="__reactFiber$"+hd,mh="__reactProps$"+hd,Mo="__reactContainer$"+hd,Cw="__reactEvents$"+hd,Fj="__reactListeners$"+hd,Lj="__reactHandles$"+hd;function Rl(t){var e=t[qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mo]||n[qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EE(t);t!==null;){if(n=t[qi])return n;t=EE(t)}return e}t=n,n=t.parentNode}return null}function Hh(t){return t=t[qi]||t[Mo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function W0(t){return t[mh]||null}var Pw=[],dc=-1;function Za(t){return{current:t}}function Zt(t){0>dc||(t.current=Pw[dc],Pw[dc]=null,dc--)}function Lt(t,e){dc++,Pw[dc]=t.current,t.current=e}var Ga={},Cr=Za(Ga),ns=Za(!1),Wl=Ga;function qc(t,e){var n=t.type.contextTypes;if(!n)return Ga;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rs(t){return t=t.childContextTypes,t!=null}function Dg(){Zt(ns),Zt(Cr)}function CE(t,e,n){if(Cr.current!==Ga)throw Error(fe(168));Lt(Cr,e),Lt(ns,n)}function _$(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(fe(108,EA(t)||"Unknown",s));return un({},n,r)}function Fg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ga,Wl=Cr.current,Lt(Cr,t),Lt(ns,ns.current),!0}function PE(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=_$(t,e,Wl),r.__reactInternalMemoizedMergedChildContext=t,Zt(ns),Zt(Cr),Lt(Cr,t)):Zt(ns),Lt(ns,n)}var wo=null,Z0=!1,u1=!1;function w$(t){wo===null?wo=[t]:wo.push(t)}function Uj(t){Z0=!0,w$(t)}function Ka(){if(!u1&&wo!==null){u1=!0;var t=0,e=Nt;try{var n=wo;for(Nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wo=null,Z0=!1}catch(s){throw wo!==null&&(wo=wo.slice(t+1)),qP(LS,Ka),s}finally{Nt=e,u1=!1}}return null}var fc=[],hc=0,Lg=null,Ug=0,Ls=[],Us=0,Zl=null,Co=1,Po="";function _l(t,e){fc[hc++]=Ug,fc[hc++]=Lg,Lg=t,Ug=e}function S$(t,e,n){Ls[Us++]=Co,Ls[Us++]=Po,Ls[Us++]=Zl,Zl=t;var r=Co;t=Po;var s=32-bi(r)-1;r&=~(1<<s),n+=1;var i=32-bi(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Co=1<<32-bi(e)+s|n<<s|r,Po=i+t}else Co=1<<i|n<<s|r,Po=t}function KS(t){t.return!==null&&(_l(t,1),S$(t,1,0))}function QS(t){for(;t===Lg;)Lg=fc[--hc],fc[hc]=null,Ug=fc[--hc],fc[hc]=null;for(;t===Zl;)Zl=Ls[--Us],Ls[Us]=null,Po=Ls[--Us],Ls[Us]=null,Co=Ls[--Us],Ls[Us]=null}var ms=null,ps=null,Jt=!1,vi=null;function k$(t,e){var n=Vs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $E(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ms=t,ps=Aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ms=t,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zl!==null?{id:Co,overflow:Po}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ms=t,ps=null,!0):!1;default:return!1}}function $w(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tw(t){if(Jt){var e=ps;if(e){var n=e;if(!$E(t,e)){if($w(t))throw Error(fe(418));e=Aa(n.nextSibling);var r=ms;e&&$E(t,e)?k$(r,n):(t.flags=t.flags&-4097|2,Jt=!1,ms=t)}}else{if($w(t))throw Error(fe(418));t.flags=t.flags&-4097|2,Jt=!1,ms=t}}}function TE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function gm(t){if(t!==ms)return!1;if(!Jt)return TE(t),Jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bw(t.type,t.memoizedProps)),e&&(e=ps)){if($w(t))throw b$(),Error(fe(418));for(;e;)k$(t,e),e=Aa(e.nextSibling)}if(TE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ps=Aa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ps=null}}else ps=ms?Aa(t.stateNode.nextSibling):null;return!0}function b$(){for(var t=ps;t;)t=Aa(t.nextSibling)}function Bc(){ps=ms=null,Jt=!1}function YS(t){vi===null?vi=[t]:vi.push(t)}var Vj=Vo.ReactCurrentBatchConfig;function tf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function ym(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xE(t){var e=t._init;return e(t._payload)}function E$(t){function e(p,w){if(t){var g=p.deletions;g===null?(p.deletions=[w],p.flags|=16):g.push(w)}}function n(p,w){if(!t)return null;for(;w!==null;)e(p,w),w=w.sibling;return null}function r(p,w){for(p=new Map;w!==null;)w.key!==null?p.set(w.key,w):p.set(w.index,w),w=w.sibling;return p}function s(p,w){return p=Da(p,w),p.index=0,p.sibling=null,p}function i(p,w,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<w?(p.flags|=2,w):g):(p.flags|=2,w)):(p.flags|=1048576,w)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,w,g,C){return w===null||w.tag!==6?(w=g1(g,p.mode,C),w.return=p,w):(w=s(w,g),w.return=p,w)}function c(p,w,g,C){var $=g.type;return $===oc?f(p,w,g.props.children,C,g.key):w!==null&&(w.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===da&&xE($)===w.type)?(C=s(w,g.props),C.ref=tf(p,w,g),C.return=p,C):(C=ag(g.type,g.key,g.props,null,p.mode,C),C.ref=tf(p,w,g),C.return=p,C)}function d(p,w,g,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==g.containerInfo||w.stateNode.implementation!==g.implementation?(w=y1(g,p.mode,C),w.return=p,w):(w=s(w,g.children||[]),w.return=p,w)}function f(p,w,g,C,$){return w===null||w.tag!==7?(w=Bl(g,p.mode,C,$),w.return=p,w):(w=s(w,g),w.return=p,w)}function m(p,w,g){if(typeof w=="string"&&w!==""||typeof w=="number")return w=g1(""+w,p.mode,g),w.return=p,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case om:return g=ag(w.type,w.key,w.props,null,p.mode,g),g.ref=tf(p,null,w),g.return=p,g;case ic:return w=y1(w,p.mode,g),w.return=p,w;case da:var C=w._init;return m(p,C(w._payload),g)}if(gf(w)||Qd(w))return w=Bl(w,p.mode,g,null),w.return=p,w;ym(p,w)}return null}function y(p,w,g,C){var $=w!==null?w.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return $!==null?null:a(p,w,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case om:return g.key===$?c(p,w,g,C):null;case ic:return g.key===$?d(p,w,g,C):null;case da:return $=g._init,y(p,w,$(g._payload),C)}if(gf(g)||Qd(g))return $!==null?null:f(p,w,g,C,null);ym(p,g)}return null}function v(p,w,g,C,$){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(g)||null,a(w,p,""+C,$);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case om:return p=p.get(C.key===null?g:C.key)||null,c(w,p,C,$);case ic:return p=p.get(C.key===null?g:C.key)||null,d(w,p,C,$);case da:var N=C._init;return v(p,w,g,N(C._payload),$)}if(gf(C)||Qd(C))return p=p.get(g)||null,f(w,p,C,$,null);ym(w,C)}return null}function _(p,w,g,C){for(var $=null,N=null,M=w,A=w=0,q=null;M!==null&&A<g.length;A++){M.index>A?(q=M,M=null):q=M.sibling;var G=y(p,M,g[A],C);if(G===null){M===null&&(M=q);break}t&&M&&G.alternate===null&&e(p,M),w=i(G,w,A),N===null?$=G:N.sibling=G,N=G,M=q}if(A===g.length)return n(p,M),Jt&&_l(p,A),$;if(M===null){for(;A<g.length;A++)M=m(p,g[A],C),M!==null&&(w=i(M,w,A),N===null?$=M:N.sibling=M,N=M);return Jt&&_l(p,A),$}for(M=r(p,M);A<g.length;A++)q=v(M,p,A,g[A],C),q!==null&&(t&&q.alternate!==null&&M.delete(q.key===null?A:q.key),w=i(q,w,A),N===null?$=q:N.sibling=q,N=q);return t&&M.forEach(function(B){return e(p,B)}),Jt&&_l(p,A),$}function E(p,w,g,C){var $=Qd(g);if(typeof $!="function")throw Error(fe(150));if(g=$.call(g),g==null)throw Error(fe(151));for(var N=$=null,M=w,A=w=0,q=null,G=g.next();M!==null&&!G.done;A++,G=g.next()){M.index>A?(q=M,M=null):q=M.sibling;var B=y(p,M,G.value,C);if(B===null){M===null&&(M=q);break}t&&M&&B.alternate===null&&e(p,M),w=i(B,w,A),N===null?$=B:N.sibling=B,N=B,M=q}if(G.done)return n(p,M),Jt&&_l(p,A),$;if(M===null){for(;!G.done;A++,G=g.next())G=m(p,G.value,C),G!==null&&(w=i(G,w,A),N===null?$=G:N.sibling=G,N=G);return Jt&&_l(p,A),$}for(M=r(p,M);!G.done;A++,G=g.next())G=v(M,p,A,G.value,C),G!==null&&(t&&G.alternate!==null&&M.delete(G.key===null?A:G.key),w=i(G,w,A),N===null?$=G:N.sibling=G,N=G);return t&&M.forEach(function(Y){return e(p,Y)}),Jt&&_l(p,A),$}function k(p,w,g,C){if(typeof g=="object"&&g!==null&&g.type===oc&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case om:e:{for(var $=g.key,N=w;N!==null;){if(N.key===$){if($=g.type,$===oc){if(N.tag===7){n(p,N.sibling),w=s(N,g.props.children),w.return=p,p=w;break e}}else if(N.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===da&&xE($)===N.type){n(p,N.sibling),w=s(N,g.props),w.ref=tf(p,N,g),w.return=p,p=w;break e}n(p,N);break}else e(p,N);N=N.sibling}g.type===oc?(w=Bl(g.props.children,p.mode,C,g.key),w.return=p,p=w):(C=ag(g.type,g.key,g.props,null,p.mode,C),C.ref=tf(p,w,g),C.return=p,p=C)}return o(p);case ic:e:{for(N=g.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===g.containerInfo&&w.stateNode.implementation===g.implementation){n(p,w.sibling),w=s(w,g.children||[]),w.return=p,p=w;break e}else{n(p,w);break}else e(p,w);w=w.sibling}w=y1(g,p.mode,C),w.return=p,p=w}return o(p);case da:return N=g._init,k(p,w,N(g._payload),C)}if(gf(g))return _(p,w,g,C);if(Qd(g))return E(p,w,g,C);ym(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,w!==null&&w.tag===6?(n(p,w.sibling),w=s(w,g),w.return=p,p=w):(n(p,w),w=g1(g,p.mode,C),w.return=p,p=w),o(p)):n(p,w)}return k}var Wc=E$(!0),C$=E$(!1),Vg=Za(null),Gg=null,pc=null,XS=null;function JS(){XS=pc=Gg=null}function e4(t){var e=Vg.current;Zt(Vg),t._currentValue=e}function xw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ec(t,e){Gg=t,XS=pc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ts=!0),t.firstContext=null)}function qs(t){var e=t._currentValue;if(XS!==t)if(t={context:t,memoizedValue:e,next:null},pc===null){if(Gg===null)throw Error(fe(308));pc=t,Gg.dependencies={lanes:0,firstContext:t}}else pc=pc.next=t;return e}var Ol=null;function t4(t){Ol===null?Ol=[t]:Ol.push(t)}function P$(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,t4(e)):(n.next=s.next,s.next=n),e.interleaved=n,zo(t,r)}function zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fa=!1;function n4(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $$(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $o(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ja(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zo(t,n)}return s=r.interleaved,s===null?(e.next=e,t4(r)):(e.next=s.next,s.next=e),r.interleaved=e,zo(t,n)}function tg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,US(t,n)}}function NE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hg(t,e,n,r){var s=t.updateQueue;fa=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,f=d=c=null,a=i;do{var y=a.lane,v=a.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(y=e,v=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){m=_.call(v,m,y);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,y=typeof _=="function"?_.call(v,m,y):_,y==null)break e;m=un({},m,y);break e;case 2:fa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[a]:y.push(a))}else v={eventTime:v,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=v,c=m):f=f.next=v,o|=y;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ql|=o,t.lanes=o,t.memoizedState=m}}function RE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var qh={},eo=Za(qh),gh=Za(qh),yh=Za(qh);function Il(t){if(t===qh)throw Error(fe(174));return t}function r4(t,e){switch(Lt(yh,e),Lt(gh,t),Lt(eo,qh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uw(e,t)}Zt(eo),Lt(eo,e)}function Zc(){Zt(eo),Zt(gh),Zt(yh)}function T$(t){Il(yh.current);var e=Il(eo.current),n=uw(e,t.type);e!==n&&(Lt(gh,t),Lt(eo,n))}function s4(t){gh.current===t&&(Zt(eo),Zt(gh))}var an=Za(0);function qg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var c1=[];function i4(){for(var t=0;t<c1.length;t++)c1[t]._workInProgressVersionPrimary=null;c1.length=0}var ng=Vo.ReactCurrentDispatcher,d1=Vo.ReactCurrentBatchConfig,Kl=0,ln=null,zn=null,Kn=null,Bg=!1,Ff=!1,vh=0,Gj=0;function vr(){throw Error(fe(321))}function o4(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function a4(t,e,n,r,s,i){if(Kl=i,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ng.current=t===null||t.memoizedState===null?Wj:Zj,t=n(r,s),Ff){i=0;do{if(Ff=!1,vh=0,25<=i)throw Error(fe(301));i+=1,Kn=zn=null,e.updateQueue=null,ng.current=Kj,t=n(r,s)}while(Ff)}if(ng.current=Wg,e=zn!==null&&zn.next!==null,Kl=0,Kn=zn=ln=null,Bg=!1,e)throw Error(fe(300));return t}function l4(){var t=vh!==0;return vh=0,t}function Ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?ln.memoizedState=Kn=t:Kn=Kn.next=t,Kn}function Bs(){if(zn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=zn.next;var e=Kn===null?ln.memoizedState:Kn.next;if(e!==null)Kn=e,zn=t;else{if(t===null)throw Error(fe(310));zn=t,t={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Kn===null?ln.memoizedState=Kn=t:Kn=Kn.next=t}return Kn}function _h(t,e){return typeof e=="function"?e(t):e}function f1(t){var e=Bs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=zn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,d=i;do{var f=d.lane;if((Kl&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,o=r):c=c.next=m,ln.lanes|=f,Ql|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=a,Ti(r,e.memoizedState)||(ts=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ln.lanes|=i,Ql|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function h1(t){var e=Bs(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ti(i,e.memoizedState)||(ts=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x$(){}function N$(t,e){var n=ln,r=Bs(),s=e(),i=!Ti(r.memoizedState,s);if(i&&(r.memoizedState=s,ts=!0),r=r.queue,u4(I$.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Kn!==null&&Kn.memoizedState.tag&1){if(n.flags|=2048,wh(9,O$.bind(null,n,r,s,e),void 0,null),Yn===null)throw Error(fe(349));Kl&30||R$(n,e,s)}return s}function R$(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O$(t,e,n,r){e.value=n,e.getSnapshot=r,A$(e)&&j$(t)}function I$(t,e,n){return n(function(){A$(e)&&j$(t)})}function A$(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function j$(t){var e=zo(t,1);e!==null&&Ei(e,t,1,-1)}function OE(t){var e=Ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_h,lastRenderedState:t},e.queue=t,t=t.dispatch=Bj.bind(null,ln,t),[e.memoizedState,t]}function wh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M$(){return Bs().memoizedState}function rg(t,e,n,r){var s=Ui();ln.flags|=t,s.memoizedState=wh(1|e,n,void 0,r===void 0?null:r)}function K0(t,e,n,r){var s=Bs();r=r===void 0?null:r;var i=void 0;if(zn!==null){var o=zn.memoizedState;if(i=o.destroy,r!==null&&o4(r,o.deps)){s.memoizedState=wh(e,n,i,r);return}}ln.flags|=t,s.memoizedState=wh(1|e,n,i,r)}function IE(t,e){return rg(8390656,8,t,e)}function u4(t,e){return K0(2048,8,t,e)}function z$(t,e){return K0(4,2,t,e)}function D$(t,e){return K0(4,4,t,e)}function F$(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function L$(t,e,n){return n=n!=null?n.concat([t]):null,K0(4,4,F$.bind(null,e,t),n)}function c4(){}function U$(t,e){var n=Bs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o4(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function V$(t,e){var n=Bs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&o4(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function G$(t,e,n){return Kl&21?(Ti(n,e)||(n=ZP(),ln.lanes|=n,Ql|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ts=!0),t.memoizedState=n)}function Hj(t,e){var n=Nt;Nt=n!==0&&4>n?n:4,t(!0);var r=d1.transition;d1.transition={};try{t(!1),e()}finally{Nt=n,d1.transition=r}}function H$(){return Bs().memoizedState}function qj(t,e,n){var r=za(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q$(t))B$(e,n);else if(n=P$(t,e,n,r),n!==null){var s=jr();Ei(n,t,r,s),W$(n,e,r)}}function Bj(t,e,n){var r=za(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q$(t))B$(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ti(a,o)){var c=e.interleaved;c===null?(s.next=s,t4(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=P$(t,e,s,r),n!==null&&(s=jr(),Ei(n,t,r,s),W$(n,e,r))}}function q$(t){var e=t.alternate;return t===ln||e!==null&&e===ln}function B$(t,e){Ff=Bg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,US(t,n)}}var Wg={readContext:qs,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},Wj={readContext:qs,useCallback:function(t,e){return Ui().memoizedState=[t,e===void 0?null:e],t},useContext:qs,useEffect:IE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rg(4194308,4,F$.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rg(4194308,4,t,e)},useInsertionEffect:function(t,e){return rg(4,2,t,e)},useMemo:function(t,e){var n=Ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qj.bind(null,ln,t),[r.memoizedState,t]},useRef:function(t){var e=Ui();return t={current:t},e.memoizedState=t},useState:OE,useDebugValue:c4,useDeferredValue:function(t){return Ui().memoizedState=t},useTransition:function(){var t=OE(!1),e=t[0];return t=Hj.bind(null,t[1]),Ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ln,s=Ui();if(Jt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Yn===null)throw Error(fe(349));Kl&30||R$(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,IE(I$.bind(null,r,i,t),[t]),r.flags|=2048,wh(9,O$.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ui(),e=Yn.identifierPrefix;if(Jt){var n=Po,r=Co;n=(r&~(1<<32-bi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Zj={readContext:qs,useCallback:U$,useContext:qs,useEffect:u4,useImperativeHandle:L$,useInsertionEffect:z$,useLayoutEffect:D$,useMemo:V$,useReducer:f1,useRef:M$,useState:function(){return f1(_h)},useDebugValue:c4,useDeferredValue:function(t){var e=Bs();return G$(e,zn.memoizedState,t)},useTransition:function(){var t=f1(_h)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:x$,useSyncExternalStore:N$,useId:H$,unstable_isNewReconciler:!1},Kj={readContext:qs,useCallback:U$,useContext:qs,useEffect:u4,useImperativeHandle:L$,useInsertionEffect:z$,useLayoutEffect:D$,useMemo:V$,useReducer:h1,useRef:M$,useState:function(){return h1(_h)},useDebugValue:c4,useDeferredValue:function(t){var e=Bs();return zn===null?e.memoizedState=t:G$(e,zn.memoizedState,t)},useTransition:function(){var t=h1(_h)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:x$,useSyncExternalStore:N$,useId:H$,unstable_isNewReconciler:!1};function pi(t,e){if(t&&t.defaultProps){e=un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Q0={isMounted:function(t){return(t=t._reactInternals)?cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jr(),s=za(t),i=$o(r,s);i.payload=e,n!=null&&(i.callback=n),e=ja(t,i,s),e!==null&&(Ei(e,t,s,r),tg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jr(),s=za(t),i=$o(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ja(t,i,s),e!==null&&(Ei(e,t,s,r),tg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jr(),r=za(t),s=$o(n,r);s.tag=2,e!=null&&(s.callback=e),e=ja(t,s,r),e!==null&&(Ei(e,t,r,n),tg(e,t,r))}};function AE(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fh(n,r)||!fh(s,i):!0}function Z$(t,e,n){var r=!1,s=Ga,i=e.contextType;return typeof i=="object"&&i!==null?i=qs(i):(s=rs(e)?Wl:Cr.current,r=e.contextTypes,i=(r=r!=null)?qc(t,s):Ga),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Q0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function jE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Q0.enqueueReplaceState(e,e.state,null)}function Rw(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},n4(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qs(i):(i=rs(e)?Wl:Cr.current,s.context=qc(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nw(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Q0.enqueueReplaceState(s,s.state,null),Hg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Kc(t,e){try{var n="",r=e;do n+=bA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function p1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ow(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qj=typeof WeakMap=="function"?WeakMap:Map;function K$(t,e,n){n=$o(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kg||(Kg=!0,Vw=r),Ow(t,e)},n}function Q$(t,e,n){n=$o(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ow(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ow(t,e),typeof r!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ME(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Qj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cM.bind(null,t,e,n),e.then(t,t))}function zE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DE(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$o(-1,1),e.tag=2,ja(n,e,1))),n.lanes|=1),t)}var Yj=Vo.ReactCurrentOwner,ts=!1;function Rr(t,e,n,r){e.child=t===null?C$(e,null,n,r):Wc(e,t.child,n,r)}function FE(t,e,n,r,s){n=n.render;var i=e.ref;return Ec(e,s),r=a4(t,e,n,r,i,s),n=l4(),t!==null&&!ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Jt&&n&&KS(e),e.flags|=1,Rr(t,e,r,s),e.child)}function LE(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!v4(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y$(t,e,i,r,s)):(t=ag(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fh,n(o,r)&&t.ref===e.ref)return Do(t,e,s)}return e.flags|=1,t=Da(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y$(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fh(i,r)&&t.ref===e.ref)if(ts=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ts=!0);else return e.lanes=t.lanes,Do(t,e,s)}return Iw(t,e,n,r,s)}function X$(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(gc,hs),hs|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(gc,hs),hs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Lt(gc,hs),hs|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Lt(gc,hs),hs|=r;return Rr(t,e,s,n),e.child}function J$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Iw(t,e,n,r,s){var i=rs(n)?Wl:Cr.current;return i=qc(e,i),Ec(e,s),n=a4(t,e,n,r,i,s),r=l4(),t!==null&&!ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Do(t,e,s)):(Jt&&r&&KS(e),e.flags|=1,Rr(t,e,n,s),e.child)}function UE(t,e,n,r,s){if(rs(n)){var i=!0;Fg(e)}else i=!1;if(Ec(e,s),e.stateNode===null)sg(t,e),Z$(e,n,r),Rw(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qs(d):(d=rs(n)?Wl:Cr.current,d=qc(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&jE(e,o,r,d),fa=!1;var y=e.memoizedState;o.state=y,Hg(e,r,o,s),c=e.memoizedState,a!==r||y!==c||ns.current||fa?(typeof f=="function"&&(Nw(e,n,f,r),c=e.memoizedState),(a=fa||AE(e,n,a,r,y,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,$$(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:pi(e.type,a),o.props=d,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qs(c):(c=rs(n)?Wl:Cr.current,c=qc(e,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||y!==c)&&jE(e,o,r,c),fa=!1,y=e.memoizedState,o.state=y,Hg(e,r,o,s);var _=e.memoizedState;a!==m||y!==_||ns.current||fa?(typeof v=="function"&&(Nw(e,n,v,r),_=e.memoizedState),(d=fa||AE(e,n,d,r,y,_,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Aw(t,e,n,r,i,s)}function Aw(t,e,n,r,s,i){J$(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&PE(e,n,!1),Do(t,e,i);r=e.stateNode,Yj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Wc(e,t.child,null,i),e.child=Wc(e,null,a,i)):Rr(t,e,a,i),e.memoizedState=r.state,s&&PE(e,n,!0),e.child}function e8(t){var e=t.stateNode;e.pendingContext?CE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CE(t,e.context,!1),r4(t,e.containerInfo)}function VE(t,e,n,r,s){return Bc(),YS(s),e.flags|=256,Rr(t,e,n,r),e.child}var jw={dehydrated:null,treeContext:null,retryLane:0};function Mw(t){return{baseLanes:t,cachePool:null,transitions:null}}function t8(t,e,n){var r=e.pendingProps,s=an.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Lt(an,s&1),t===null)return Tw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=J0(o,r,0,null),t=Bl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mw(n),e.memoizedState=jw,t):d4(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Xj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Da(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Da(a,i):(i=Bl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jw,r}return i=t.child,t=i.sibling,r=Da(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function d4(t,e){return e=J0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vm(t,e,n,r){return r!==null&&YS(r),Wc(e,t.child,null,n),t=d4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=p1(Error(fe(422))),vm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=J0({mode:"visible",children:r.children},s,0,null),i=Bl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Wc(e,t.child,null,o),e.child.memoizedState=Mw(o),e.memoizedState=jw,i);if(!(e.mode&1))return vm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(fe(419)),r=p1(i,r,void 0),vm(t,e,o,r)}if(a=(o&t.childLanes)!==0,ts||a){if(r=Yn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zo(t,s),Ei(r,t,s,-1))}return y4(),r=p1(Error(fe(421))),vm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ps=Aa(s.nextSibling),ms=e,Jt=!0,vi=null,t!==null&&(Ls[Us++]=Co,Ls[Us++]=Po,Ls[Us++]=Zl,Co=t.id,Po=t.overflow,Zl=e),e=d4(e,r.children),e.flags|=4096,e)}function GE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xw(t.return,e,n)}function m1(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function n8(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rr(t,e,r.children,n),r=an.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GE(t,n,e);else if(t.tag===19)GE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(an,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),m1(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}m1(e,!0,n,null,i);break;case"together":m1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Do(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ql|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=Da(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Da(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jj(t,e,n){switch(e.tag){case 3:e8(e),Bc();break;case 5:T$(e);break;case 1:rs(e.type)&&Fg(e);break;case 4:r4(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Lt(Vg,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Lt(an,an.current&1),e.flags|=128,null):n&e.child.childLanes?t8(t,e,n):(Lt(an,an.current&1),t=Do(t,e,n),t!==null?t.sibling:null);Lt(an,an.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return n8(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Lt(an,an.current),r)break;return null;case 22:case 23:return e.lanes=0,X$(t,e,n)}return Do(t,e,n)}var r8,zw,s8,i8;r8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zw=function(){};s8=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Il(eo.current);var i=null;switch(n){case"input":s=iw(t,s),r=iw(t,r),i=[];break;case"select":s=un({},s,{value:void 0}),r=un({},r,{value:void 0}),i=[];break;case"textarea":s=lw(t,s),r=lw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zg)}cw(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ih.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ih.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&qt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};i8=function(t,e,n,r){n!==r&&(e.flags|=4)};function nf(t,e){if(!Jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _r(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eM(t,e,n){var r=e.pendingProps;switch(QS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(e),null;case 1:return rs(e.type)&&Dg(),_r(e),null;case 3:return r=e.stateNode,Zc(),Zt(ns),Zt(Cr),i4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vi!==null&&(qw(vi),vi=null))),zw(t,e),_r(e),null;case 5:s4(e);var s=Il(yh.current);if(n=e.type,t!==null&&e.stateNode!=null)s8(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return _r(e),null}if(t=Il(eo.current),gm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[qi]=e,r[mh]=i,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(s=0;s<vf.length;s++)qt(vf[s],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":Xb(r,i),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qt("invalid",r);break;case"textarea":eE(r,i),qt("invalid",r)}cw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&mm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&mm(r.textContent,a,t),s=["children",""+a]):ih.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",r)}switch(n){case"input":am(r),Jb(r,i,!0);break;case"textarea":am(r),tE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zg)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qi]=e,t[mh]=r,r8(t,e,!1,!1),e.stateNode=t;e:{switch(o=dw(n,r),n){case"dialog":qt("cancel",t),qt("close",t),s=r;break;case"iframe":case"object":case"embed":qt("load",t),s=r;break;case"video":case"audio":for(s=0;s<vf.length;s++)qt(vf[s],t);s=r;break;case"source":qt("error",t),s=r;break;case"img":case"image":case"link":qt("error",t),qt("load",t),s=r;break;case"details":qt("toggle",t),s=r;break;case"input":Xb(t,r),s=iw(t,r),qt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=un({},r,{value:void 0}),qt("invalid",t);break;case"textarea":eE(t,r),s=lw(t,r),qt("invalid",t);break;default:s=r}cw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?MP(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AP(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&oh(t,c):typeof c=="number"&&oh(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ih.hasOwnProperty(i)?c!=null&&i==="onScroll"&&qt("scroll",t):c!=null&&jS(t,i,c,o))}switch(n){case"input":am(t),Jb(t,r,!1);break;case"textarea":am(t),tE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Va(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?wc(t,!!r.multiple,i,!1):r.defaultValue!=null&&wc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _r(e),null;case 6:if(t&&e.stateNode!=null)i8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=Il(yh.current),Il(eo.current),gm(e)){if(r=e.stateNode,n=e.memoizedProps,r[qi]=e,(i=r.nodeValue!==n)&&(t=ms,t!==null))switch(t.tag){case 3:mm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qi]=e,e.stateNode=r}return _r(e),null;case 13:if(Zt(an),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Jt&&ps!==null&&e.mode&1&&!(e.flags&128))b$(),Bc(),e.flags|=98560,i=!1;else if(i=gm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(fe(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[qi]=e}else Bc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_r(e),i=!1}else vi!==null&&(qw(vi),vi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||an.current&1?Un===0&&(Un=3):y4())),e.updateQueue!==null&&(e.flags|=4),_r(e),null);case 4:return Zc(),zw(t,e),t===null&&hh(e.stateNode.containerInfo),_r(e),null;case 10:return e4(e.type._context),_r(e),null;case 17:return rs(e.type)&&Dg(),_r(e),null;case 19:if(Zt(an),i=e.memoizedState,i===null)return _r(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)nf(i,!1);else{if(Un!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qg(t),o!==null){for(e.flags|=128,nf(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(an,an.current&1|2),e.child}t=t.sibling}i.tail!==null&&bn()>Qc&&(e.flags|=128,r=!0,nf(i,!1),e.lanes=4194304)}else{if(!r)if(t=qg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Jt)return _r(e),null}else 2*bn()-i.renderingStartTime>Qc&&n!==1073741824&&(e.flags|=128,r=!0,nf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=bn(),e.sibling=null,n=an.current,Lt(an,r?n&1|2:n&1),e):(_r(e),null);case 22:case 23:return g4(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hs&1073741824&&(_r(e),e.subtreeFlags&6&&(e.flags|=8192)):_r(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function tM(t,e){switch(QS(e),e.tag){case 1:return rs(e.type)&&Dg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zc(),Zt(ns),Zt(Cr),i4(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return s4(e),null;case 13:if(Zt(an),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Bc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Zt(an),null;case 4:return Zc(),null;case 10:return e4(e.type._context),null;case 22:case 23:return g4(),null;case 24:return null;default:return null}}var _m=!1,Er=!1,nM=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function mc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(t,e,r)}else n.current=null}function Dw(t,e,n){try{n()}catch(r){pn(t,e,r)}}var HE=!1;function rM(t,e){if(Sw=Ag,t=c$(),ZS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,f=0,m=t,y=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)y=m,m=v;for(;;){if(m===t)break t;if(y===n&&++d===s&&(a=o),y===i&&++f===r&&(c=o),(v=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kw={focusedElem:t,selectionRange:n},Ag=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,k=_.memoizedState,p=e.stateNode,w=p.getSnapshotBeforeUpdate(e.elementType===e.type?E:pi(e.type,E),k);p.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(C){pn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return _=HE,HE=!1,_}function Lf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dw(e,n,i)}s=s.next}while(s!==r)}}function Y0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o8(t){var e=t.alternate;e!==null&&(t.alternate=null,o8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qi],delete e[mh],delete e[Cw],delete e[Fj],delete e[Lj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a8(t){return t.tag===5||t.tag===3||t.tag===4}function qE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zg));else if(r!==4&&(t=t.child,t!==null))for(Lw(t,e,n),t=t.sibling;t!==null;)Lw(t,e,n),t=t.sibling}function Uw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uw(t,e,n),t=t.sibling;t!==null;)Uw(t,e,n),t=t.sibling}var sr=null,yi=!1;function ra(t,e,n){for(n=n.child;n!==null;)l8(t,e,n),n=n.sibling}function l8(t,e,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(G0,n)}catch{}switch(n.tag){case 5:Er||mc(n,e);case 6:var r=sr,s=yi;sr=null,ra(t,e,n),sr=r,yi=s,sr!==null&&(yi?(t=sr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):sr.removeChild(n.stateNode));break;case 18:sr!==null&&(yi?(t=sr,n=n.stateNode,t.nodeType===8?l1(t.parentNode,n):t.nodeType===1&&l1(t,n),ch(t)):l1(sr,n.stateNode));break;case 4:r=sr,s=yi,sr=n.stateNode.containerInfo,yi=!0,ra(t,e,n),sr=r,yi=s;break;case 0:case 11:case 14:case 15:if(!Er&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Dw(n,e,o),s=s.next}while(s!==r)}ra(t,e,n);break;case 1:if(!Er&&(mc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pn(n,e,a)}ra(t,e,n);break;case 21:ra(t,e,n);break;case 22:n.mode&1?(Er=(r=Er)||n.memoizedState!==null,ra(t,e,n),Er=r):ra(t,e,n);break;default:ra(t,e,n)}}function BE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nM),e.forEach(function(r){var s=fM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function si(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sr=a.stateNode,yi=!1;break e;case 3:sr=a.stateNode.containerInfo,yi=!0;break e;case 4:sr=a.stateNode.containerInfo,yi=!0;break e}a=a.return}if(sr===null)throw Error(fe(160));l8(i,o,s),sr=null,yi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){pn(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u8(e,t),e=e.sibling}function u8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(si(e,t),Li(t),r&4){try{Lf(3,t,t.return),Y0(3,t)}catch(E){pn(t,t.return,E)}try{Lf(5,t,t.return)}catch(E){pn(t,t.return,E)}}break;case 1:si(e,t),Li(t),r&512&&n!==null&&mc(n,n.return);break;case 5:if(si(e,t),Li(t),r&512&&n!==null&&mc(n,n.return),t.flags&32){var s=t.stateNode;try{oh(s,"")}catch(E){pn(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&RP(s,i),dw(a,o);var d=dw(a,i);for(o=0;o<c.length;o+=2){var f=c[o],m=c[o+1];f==="style"?MP(s,m):f==="dangerouslySetInnerHTML"?AP(s,m):f==="children"?oh(s,m):jS(s,f,m,d)}switch(a){case"input":ow(s,i);break;case"textarea":OP(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?wc(s,!!i.multiple,v,!1):y!==!!i.multiple&&(i.defaultValue!=null?wc(s,!!i.multiple,i.defaultValue,!0):wc(s,!!i.multiple,i.multiple?[]:"",!1))}s[mh]=i}catch(E){pn(t,t.return,E)}}break;case 6:if(si(e,t),Li(t),r&4){if(t.stateNode===null)throw Error(fe(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){pn(t,t.return,E)}}break;case 3:if(si(e,t),Li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ch(e.containerInfo)}catch(E){pn(t,t.return,E)}break;case 4:si(e,t),Li(t);break;case 13:si(e,t),Li(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(p4=bn())),r&4&&BE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Er=(d=Er)||f,si(e,t),Er=d):si(e,t),Li(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Ne=t,f=t.child;f!==null;){for(m=Ne=f;Ne!==null;){switch(y=Ne,v=y.child,y.tag){case 0:case 11:case 14:case 15:Lf(4,y,y.return);break;case 1:mc(y,y.return);var _=y.stateNode;if(typeof _.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){pn(r,n,E)}}break;case 5:mc(y,y.return);break;case 22:if(y.memoizedState!==null){ZE(m);continue}}v!==null?(v.return=y,Ne=v):ZE(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=jP("display",o))}catch(E){pn(t,t.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(E){pn(t,t.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:si(e,t),Li(t),r&4&&BE(t);break;case 21:break;default:si(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a8(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oh(s,""),r.flags&=-33);var i=qE(t);Uw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qE(t);Lw(t,a,o);break;default:throw Error(fe(161))}}catch(c){pn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sM(t,e,n){Ne=t,c8(t)}function c8(t,e,n){for(var r=(t.mode&1)!==0;Ne!==null;){var s=Ne,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_m;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Er;a=_m;var d=Er;if(_m=o,(Er=c)&&!d)for(Ne=s;Ne!==null;)o=Ne,c=o.child,o.tag===22&&o.memoizedState!==null?KE(s):c!==null?(c.return=o,Ne=c):KE(s);for(;i!==null;)Ne=i,c8(i),i=i.sibling;Ne=s,_m=a,Er=d}WE(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ne=i):WE(t)}}function WE(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Er||Y0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Er)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&RE(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&ch(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Er||e.flags&512&&Fw(e)}catch(y){pn(e,e.return,y)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function ZE(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function KE(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Y0(4,e)}catch(c){pn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pn(e,s,c)}}var i=e.return;try{Fw(e)}catch(c){pn(e,i,c)}break;case 5:var o=e.return;try{Fw(e)}catch(c){pn(e,o,c)}}}catch(c){pn(e,e.return,c)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var iM=Math.ceil,Zg=Vo.ReactCurrentDispatcher,f4=Vo.ReactCurrentOwner,Hs=Vo.ReactCurrentBatchConfig,vt=0,Yn=null,Tn=null,ur=0,hs=0,gc=Za(0),Un=0,Sh=null,Ql=0,X0=0,h4=0,Uf=null,Xr=null,p4=0,Qc=1/0,_o=null,Kg=!1,Vw=null,Ma=null,wm=!1,Ta=null,Qg=0,Vf=0,Gw=null,ig=-1,og=0;function jr(){return vt&6?bn():ig!==-1?ig:ig=bn()}function za(t){return t.mode&1?vt&2&&ur!==0?ur&-ur:Vj.transition!==null?(og===0&&(og=ZP()),og):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:t$(t.type)),t):1}function Ei(t,e,n,r){if(50<Vf)throw Vf=0,Gw=null,Error(fe(185));Vh(t,n,r),(!(vt&2)||t!==Yn)&&(t===Yn&&(!(vt&2)&&(X0|=n),Un===4&&ga(t,ur)),ss(t,r),n===1&&vt===0&&!(e.mode&1)&&(Qc=bn()+500,Z0&&Ka()))}function ss(t,e){var n=t.callbackNode;VA(t,e);var r=Ig(t,t===Yn?ur:0);if(r===0)n!==null&&sE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sE(n),e===1)t.tag===0?Uj(QE.bind(null,t)):w$(QE.bind(null,t)),zj(function(){!(vt&6)&&Ka()}),n=null;else{switch(KP(r)){case 1:n=LS;break;case 4:n=BP;break;case 16:n=Og;break;case 536870912:n=WP;break;default:n=Og}n=v8(n,d8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d8(t,e){if(ig=-1,og=0,vt&6)throw Error(fe(327));var n=t.callbackNode;if(Cc()&&t.callbackNode!==n)return null;var r=Ig(t,t===Yn?ur:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yg(t,r);else{e=r;var s=vt;vt|=2;var i=h8();(Yn!==t||ur!==e)&&(_o=null,Qc=bn()+500,ql(t,e));do try{lM();break}catch(a){f8(t,a)}while(!0);JS(),Zg.current=i,vt=s,Tn!==null?e=0:(Yn=null,ur=0,e=Un)}if(e!==0){if(e===2&&(s=gw(t),s!==0&&(r=s,e=Hw(t,s))),e===1)throw n=Sh,ql(t,0),ga(t,r),ss(t,bn()),n;if(e===6)ga(t,r);else{if(s=t.current.alternate,!(r&30)&&!oM(s)&&(e=Yg(t,r),e===2&&(i=gw(t),i!==0&&(r=i,e=Hw(t,i))),e===1))throw n=Sh,ql(t,0),ga(t,r),ss(t,bn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:wl(t,Xr,_o);break;case 3:if(ga(t,r),(r&130023424)===r&&(e=p4+500-bn(),10<e)){if(Ig(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ew(wl.bind(null,t,Xr,_o),e);break}wl(t,Xr,_o);break;case 4:if(ga(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-bi(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=bn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iM(r/1960))-r,10<r){t.timeoutHandle=Ew(wl.bind(null,t,Xr,_o),r);break}wl(t,Xr,_o);break;case 5:wl(t,Xr,_o);break;default:throw Error(fe(329))}}}return ss(t,bn()),t.callbackNode===n?d8.bind(null,t):null}function Hw(t,e){var n=Uf;return t.current.memoizedState.isDehydrated&&(ql(t,e).flags|=256),t=Yg(t,e),t!==2&&(e=Xr,Xr=n,e!==null&&qw(e)),t}function qw(t){Xr===null?Xr=t:Xr.push.apply(Xr,t)}function oM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ti(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ga(t,e){for(e&=~h4,e&=~X0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bi(e),r=1<<n;t[n]=-1,e&=~r}}function QE(t){if(vt&6)throw Error(fe(327));Cc();var e=Ig(t,0);if(!(e&1))return ss(t,bn()),null;var n=Yg(t,e);if(t.tag!==0&&n===2){var r=gw(t);r!==0&&(e=r,n=Hw(t,r))}if(n===1)throw n=Sh,ql(t,0),ga(t,e),ss(t,bn()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wl(t,Xr,_o),ss(t,bn()),null}function m4(t,e){var n=vt;vt|=1;try{return t(e)}finally{vt=n,vt===0&&(Qc=bn()+500,Z0&&Ka())}}function Yl(t){Ta!==null&&Ta.tag===0&&!(vt&6)&&Cc();var e=vt;vt|=1;var n=Hs.transition,r=Nt;try{if(Hs.transition=null,Nt=1,t)return t()}finally{Nt=r,Hs.transition=n,vt=e,!(vt&6)&&Ka()}}function g4(){hs=gc.current,Zt(gc)}function ql(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mj(n)),Tn!==null)for(n=Tn.return;n!==null;){var r=n;switch(QS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dg();break;case 3:Zc(),Zt(ns),Zt(Cr),i4();break;case 5:s4(r);break;case 4:Zc();break;case 13:Zt(an);break;case 19:Zt(an);break;case 10:e4(r.type._context);break;case 22:case 23:g4()}n=n.return}if(Yn=t,Tn=t=Da(t.current,null),ur=hs=e,Un=0,Sh=null,h4=X0=Ql=0,Xr=Uf=null,Ol!==null){for(e=0;e<Ol.length;e++)if(n=Ol[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ol=null}return t}function f8(t,e){do{var n=Tn;try{if(JS(),ng.current=Wg,Bg){for(var r=ln.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bg=!1}if(Kl=0,Kn=zn=ln=null,Ff=!1,vh=0,f4.current=null,n===null||n.return===null){Un=1,Sh=e,Tn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=ur,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=zE(o);if(v!==null){v.flags&=-257,DE(v,o,a,i,e),v.mode&1&&ME(i,d,e),e=v,c=d;var _=e.updateQueue;if(_===null){var E=new Set;E.add(c),e.updateQueue=E}else _.add(c);break e}else{if(!(e&1)){ME(i,d,e),y4();break e}c=Error(fe(426))}}else if(Jt&&a.mode&1){var k=zE(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),DE(k,o,a,i,e),YS(Kc(c,a));break e}}i=c=Kc(c,a),Un!==4&&(Un=2),Uf===null?Uf=[i]:Uf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=K$(i,c,e);NE(i,p);break e;case 1:a=c;var w=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ma===null||!Ma.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Q$(i,a,e);NE(i,C);break e}}i=i.return}while(i!==null)}m8(n)}catch($){e=$,Tn===n&&n!==null&&(Tn=n=n.return);continue}break}while(!0)}function h8(){var t=Zg.current;return Zg.current=Wg,t===null?Wg:t}function y4(){(Un===0||Un===3||Un===2)&&(Un=4),Yn===null||!(Ql&268435455)&&!(X0&268435455)||ga(Yn,ur)}function Yg(t,e){var n=vt;vt|=2;var r=h8();(Yn!==t||ur!==e)&&(_o=null,ql(t,e));do try{aM();break}catch(s){f8(t,s)}while(!0);if(JS(),vt=n,Zg.current=r,Tn!==null)throw Error(fe(261));return Yn=null,ur=0,Un}function aM(){for(;Tn!==null;)p8(Tn)}function lM(){for(;Tn!==null&&!IA();)p8(Tn)}function p8(t){var e=y8(t.alternate,t,hs);t.memoizedProps=t.pendingProps,e===null?m8(t):Tn=e,f4.current=null}function m8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tM(n,e),n!==null){n.flags&=32767,Tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Un=6,Tn=null;return}}else if(n=eM(n,e,hs),n!==null){Tn=n;return}if(e=e.sibling,e!==null){Tn=e;return}Tn=e=t}while(e!==null);Un===0&&(Un=5)}function wl(t,e,n){var r=Nt,s=Hs.transition;try{Hs.transition=null,Nt=1,uM(t,e,n,r)}finally{Hs.transition=s,Nt=r}return null}function uM(t,e,n,r){do Cc();while(Ta!==null);if(vt&6)throw Error(fe(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GA(t,i),t===Yn&&(Tn=Yn=null,ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wm||(wm=!0,v8(Og,function(){return Cc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Hs.transition,Hs.transition=null;var o=Nt;Nt=1;var a=vt;vt|=4,f4.current=null,rM(t,n),u8(n,t),xj(kw),Ag=!!Sw,kw=Sw=null,t.current=n,sM(n),AA(),vt=a,Nt=o,Hs.transition=i}else t.current=n;if(wm&&(wm=!1,Ta=t,Qg=s),i=t.pendingLanes,i===0&&(Ma=null),zA(n.stateNode),ss(t,bn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Kg)throw Kg=!1,t=Vw,Vw=null,t;return Qg&1&&t.tag!==0&&Cc(),i=t.pendingLanes,i&1?t===Gw?Vf++:(Vf=0,Gw=t):Vf=0,Ka(),null}function Cc(){if(Ta!==null){var t=KP(Qg),e=Hs.transition,n=Nt;try{if(Hs.transition=null,Nt=16>t?16:t,Ta===null)var r=!1;else{if(t=Ta,Ta=null,Qg=0,vt&6)throw Error(fe(331));var s=vt;for(vt|=4,Ne=t.current;Ne!==null;){var i=Ne,o=i.child;if(Ne.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(Ne=d;Ne!==null;){var f=Ne;switch(f.tag){case 0:case 11:case 15:Lf(8,f,i)}var m=f.child;if(m!==null)m.return=f,Ne=m;else for(;Ne!==null;){f=Ne;var y=f.sibling,v=f.return;if(o8(f),f===d){Ne=null;break}if(y!==null){y.return=v,Ne=y;break}Ne=v}}}var _=i.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var k=E.sibling;E.sibling=null,E=k}while(E!==null)}}Ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ne=o;else e:for(;Ne!==null;){if(i=Ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Lf(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Ne=p;break e}Ne=i.return}}var w=t.current;for(Ne=w;Ne!==null;){o=Ne;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,Ne=g;else e:for(o=w;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Y0(9,a)}}catch($){pn(a,a.return,$)}if(a===o){Ne=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Ne=C;break e}Ne=a.return}}if(vt=s,Ka(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(G0,t)}catch{}r=!0}return r}finally{Nt=n,Hs.transition=e}}return!1}function YE(t,e,n){e=Kc(n,e),e=K$(t,e,1),t=ja(t,e,1),e=jr(),t!==null&&(Vh(t,1,e),ss(t,e))}function pn(t,e,n){if(t.tag===3)YE(t,t,n);else for(;e!==null;){if(e.tag===3){YE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ma===null||!Ma.has(r))){t=Kc(n,t),t=Q$(e,t,1),e=ja(e,t,1),t=jr(),e!==null&&(Vh(e,1,t),ss(e,t));break}}e=e.return}}function cM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jr(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(ur&n)===n&&(Un===4||Un===3&&(ur&130023424)===ur&&500>bn()-p4?ql(t,0):h4|=n),ss(t,e)}function g8(t,e){e===0&&(t.mode&1?(e=cm,cm<<=1,!(cm&130023424)&&(cm=4194304)):e=1);var n=jr();t=zo(t,e),t!==null&&(Vh(t,e,n),ss(t,n))}function dM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g8(t,n)}function fM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),g8(t,n)}var y8;y8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ns.current)ts=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ts=!1,Jj(t,e,n);ts=!!(t.flags&131072)}else ts=!1,Jt&&e.flags&1048576&&S$(e,Ug,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sg(t,e),t=e.pendingProps;var s=qc(e,Cr.current);Ec(e,n),s=a4(null,e,r,t,s,n);var i=l4();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rs(r)?(i=!0,Fg(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,n4(e),s.updater=Q0,e.stateNode=s,s._reactInternals=e,Rw(e,r,t,n),e=Aw(null,e,r,!0,i,n)):(e.tag=0,Jt&&i&&KS(e),Rr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pM(r),t=pi(r,t),s){case 0:e=Iw(null,e,r,t,n);break e;case 1:e=UE(null,e,r,t,n);break e;case 11:e=FE(null,e,r,t,n);break e;case 14:e=LE(null,e,r,pi(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),Iw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),UE(t,e,r,s,n);case 3:e:{if(e8(e),t===null)throw Error(fe(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$$(t,e),Hg(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Kc(Error(fe(423)),e),e=VE(t,e,r,n,s);break e}else if(r!==s){s=Kc(Error(fe(424)),e),e=VE(t,e,r,n,s);break e}else for(ps=Aa(e.stateNode.containerInfo.firstChild),ms=e,Jt=!0,vi=null,n=C$(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bc(),r===s){e=Do(t,e,n);break e}Rr(t,e,r,n)}e=e.child}return e;case 5:return T$(e),t===null&&Tw(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,bw(r,s)?o=null:i!==null&&bw(r,i)&&(e.flags|=32),J$(t,e),Rr(t,e,o,n),e.child;case 6:return t===null&&Tw(e),null;case 13:return t8(t,e,n);case 4:return r4(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wc(e,null,r,n):Rr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),FE(t,e,r,s,n);case 7:return Rr(t,e,e.pendingProps,n),e.child;case 8:return Rr(t,e,e.pendingProps.children,n),e.child;case 12:return Rr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Lt(Vg,r._currentValue),r._currentValue=o,i!==null)if(Ti(i.value,o)){if(i.children===s.children&&!ns.current){e=Do(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$o(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),xw(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xw(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ec(e,n),s=qs(s),r=r(s),e.flags|=1,Rr(t,e,r,n),e.child;case 14:return r=e.type,s=pi(r,e.pendingProps),s=pi(r.type,s),LE(t,e,r,s,n);case 15:return Y$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pi(r,s),sg(t,e),e.tag=1,rs(r)?(t=!0,Fg(e)):t=!1,Ec(e,n),Z$(e,r,s),Rw(e,r,s,n),Aw(null,e,r,!0,t,n);case 19:return n8(t,e,n);case 22:return X$(t,e,n)}throw Error(fe(156,e.tag))};function v8(t,e){return qP(t,e)}function hM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(t,e,n,r){return new hM(t,e,n,r)}function v4(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pM(t){if(typeof t=="function")return v4(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zS)return 11;if(t===DS)return 14}return 2}function Da(t,e){var n=t.alternate;return n===null?(n=Vs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ag(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")v4(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oc:return Bl(n.children,s,i,e);case MS:o=8,s|=8;break;case tw:return t=Vs(12,n,e,s|2),t.elementType=tw,t.lanes=i,t;case nw:return t=Vs(13,n,e,s),t.elementType=nw,t.lanes=i,t;case rw:return t=Vs(19,n,e,s),t.elementType=rw,t.lanes=i,t;case TP:return J0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PP:o=10;break e;case $P:o=9;break e;case zS:o=11;break e;case DS:o=14;break e;case da:o=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=Vs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Bl(t,e,n,r){return t=Vs(7,t,r,e),t.lanes=n,t}function J0(t,e,n,r){return t=Vs(22,t,r,e),t.elementType=TP,t.lanes=n,t.stateNode={isHidden:!1},t}function g1(t,e,n){return t=Vs(6,t,null,e),t.lanes=n,t}function y1(t,e,n){return e=Vs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y_(0),this.expirationTimes=Y_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y_(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _4(t,e,n,r,s,i,o,a,c){return t=new mM(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},n4(i),t}function gM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ic,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _8(t){if(!t)return Ga;t=t._reactInternals;e:{if(cu(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(rs(n))return _$(t,n,e)}return e}function w8(t,e,n,r,s,i,o,a,c){return t=_4(n,r,!0,t,s,i,o,a,c),t.context=_8(null),n=t.current,r=jr(),s=za(n),i=$o(r,s),i.callback=e??null,ja(n,i,s),t.current.lanes=s,Vh(t,s,r),ss(t,r),t}function ey(t,e,n,r){var s=e.current,i=jr(),o=za(s);return n=_8(n),e.context===null?e.context=n:e.pendingContext=n,e=$o(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ja(s,e,o),t!==null&&(Ei(t,s,o,i),tg(t,s,o)),o}function Xg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function w4(t,e){XE(t,e),(t=t.alternate)&&XE(t,e)}function yM(){return null}var S8=typeof reportError=="function"?reportError:function(t){console.error(t)};function S4(t){this._internalRoot=t}ty.prototype.render=S4.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));ey(t,e,null,null)};ty.prototype.unmount=S4.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yl(function(){ey(null,t,null,null)}),e[Mo]=null}};function ty(t){this._internalRoot=t}ty.prototype.unstable_scheduleHydration=function(t){if(t){var e=XP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ma.length&&e!==0&&e<ma[n].priority;n++);ma.splice(n,0,t),n===0&&e$(t)}};function k4(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JE(){}function vM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xg(o);i.call(d)}}var o=w8(e,r,t,0,null,!1,!1,"",JE);return t._reactRootContainer=o,t[Mo]=o.current,hh(t.nodeType===8?t.parentNode:t),Yl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Xg(c);a.call(d)}}var c=_4(t,0,!1,null,null,!1,!1,"",JE);return t._reactRootContainer=c,t[Mo]=c.current,hh(t.nodeType===8?t.parentNode:t),Yl(function(){ey(e,c,n,r)}),c}function ry(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Xg(o);a.call(c)}}ey(e,o,t,s)}else o=vM(n,e,t,s,r);return Xg(o)}QP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yf(e.pendingLanes);n!==0&&(US(e,n|1),ss(e,bn()),!(vt&6)&&(Qc=bn()+500,Ka()))}break;case 13:Yl(function(){var r=zo(t,1);if(r!==null){var s=jr();Ei(r,t,1,s)}}),w4(t,1)}};VS=function(t){if(t.tag===13){var e=zo(t,134217728);if(e!==null){var n=jr();Ei(e,t,134217728,n)}w4(t,134217728)}};YP=function(t){if(t.tag===13){var e=za(t),n=zo(t,e);if(n!==null){var r=jr();Ei(n,t,e,r)}w4(t,e)}};XP=function(){return Nt};JP=function(t,e){var n=Nt;try{return Nt=t,e()}finally{Nt=n}};hw=function(t,e,n){switch(e){case"input":if(ow(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=W0(r);if(!s)throw Error(fe(90));NP(r),ow(r,s)}}}break;case"textarea":OP(t,n);break;case"select":e=n.value,e!=null&&wc(t,!!n.multiple,e,!1)}};FP=m4;LP=Yl;var _M={usingClientEntryPoint:!1,Events:[Hh,cc,W0,zP,DP,m4]},rf={findFiberByHostInstance:Rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wM={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GP(t),t===null?null:t.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||yM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sm.isDisabled&&Sm.supportsFiber)try{G0=Sm.inject(wM),Ji=Sm}catch{}}_s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_M;_s.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k4(e))throw Error(fe(200));return gM(t,e,null,n)};_s.createRoot=function(t,e){if(!k4(t))throw Error(fe(299));var n=!1,r="",s=S8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_4(t,1,!1,null,null,n,!1,r,s),t[Mo]=e.current,hh(t.nodeType===8?t.parentNode:t),new S4(e)};_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=GP(e),t=t===null?null:t.stateNode,t};_s.flushSync=function(t){return Yl(t)};_s.hydrate=function(t,e,n){if(!ny(e))throw Error(fe(200));return ry(null,t,e,!0,n)};_s.hydrateRoot=function(t,e,n){if(!k4(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=S8;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w8(e,null,t,1,n??null,s,!1,i,o),t[Mo]=e.current,hh(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ty(e)};_s.render=function(t,e,n){if(!ny(e))throw Error(fe(200));return ry(null,t,e,!1,n)};_s.unmountComponentAtNode=function(t){if(!ny(t))throw Error(fe(40));return t._reactRootContainer?(Yl(function(){ry(null,null,t,!1,function(){t._reactRootContainer=null,t[Mo]=null})}),!0):!1};_s.unstable_batchedUpdates=m4;_s.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ny(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return ry(t,e,n,!1,r)};_s.version="18.3.1-next-f1338f8080-20240426";function k8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k8)}catch(t){console.error(t)}}k8(),kP.exports=_s;var SM=kP.exports,eC=SM;J1.createRoot=eC.createRoot,J1.hydrateRoot=eC.hydrateRoot;const{getOwnPropertyNames:kM,getOwnPropertySymbols:bM}=Object,{hasOwnProperty:EM}=Object.prototype;function v1(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function km(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);const c=t(n,r,s);return i.delete(n),i.delete(r),c}}function CM(t){return t!=null?t[Symbol.toStringTag]:void 0}function tC(t){return kM(t).concat(bM(t))}const PM=Object.hasOwn||((t,e)=>EM.call(t,e));function du(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const $M="__v",TM="__o",xM="_owner",{getOwnPropertyDescriptor:nC,keys:rC}=Object;function NM(t,e){return t.byteLength===e.byteLength&&Jg(new Uint8Array(t),new Uint8Array(e))}function RM(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function OM(t,e){return t.byteLength===e.byteLength&&Jg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function IM(t,e){return du(t.getTime(),e.getTime())}function AM(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function jM(t,e){return t===e}function sC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,a,c=0;for(;(o=i.next())&&!o.done;){const d=e.entries();let f=!1,m=0;for(;(a=d.next())&&!a.done;){if(s[m]){m++;continue}const y=o.value,v=a.value;if(n.equals(y[0],v[0],c,m,t,e,n)&&n.equals(y[1],v[1],y[0],v[0],t,e,n)){f=s[m]=!0;break}m++}if(!f)return!1;c++}return!0}const MM=du;function zM(t,e,n){const r=rC(t);let s=r.length;if(rC(e).length!==s)return!1;for(;s-- >0;)if(!b8(t,e,n,r[s]))return!1;return!0}function sf(t,e,n){const r=tC(t);let s=r.length;if(tC(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=r[s],!b8(t,e,n,i)||(o=nC(t,i),a=nC(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function DM(t,e){return du(t.valueOf(),e.valueOf())}function FM(t,e){return t.source===e.source&&t.flags===e.flags}function iC(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const c=e.values();let d=!1,f=0;for(;(a=c.next())&&!a.done;){if(!s[f]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function Jg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function LM(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function b8(t,e,n,r){return(r===xM||r===TM||r===$M)&&(t.$$typeof||e.$$typeof)?!0:PM(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const UM="[object ArrayBuffer]",VM="[object Arguments]",GM="[object Boolean]",HM="[object DataView]",qM="[object Date]",BM="[object Error]",WM="[object Map]",ZM="[object Number]",KM="[object Object]",QM="[object RegExp]",YM="[object Set]",XM="[object String]",JM={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ez="[object URL]",tz=Object.prototype.toString;function nz({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:_}){return function(k,p,w){if(k===p)return!0;if(k==null||p==null)return!1;const g=typeof k;if(g!==typeof p)return!1;if(g!=="object")return g==="number"?a(k,p,w):g==="function"?i(k,p,w):!1;const C=k.constructor;if(C!==p.constructor)return!1;if(C===Object)return c(k,p,w);if(Array.isArray(k))return e(k,p,w);if(C===Date)return r(k,p,w);if(C===RegExp)return f(k,p,w);if(C===Map)return o(k,p,w);if(C===Set)return m(k,p,w);const $=tz.call(k);if($===qM)return r(k,p,w);if($===QM)return f(k,p,w);if($===WM)return o(k,p,w);if($===YM)return m(k,p,w);if($===KM)return typeof k.then!="function"&&typeof p.then!="function"&&c(k,p,w);if($===ez)return v(k,p,w);if($===BM)return s(k,p,w);if($===VM)return c(k,p,w);if(JM[$])return y(k,p,w);if($===UM)return t(k,p,w);if($===HM)return n(k,p,w);if($===GM||$===ZM||$===XM)return d(k,p,w);if(_){let N=_[$];if(!N){const M=CM(k);M&&(N=_[M])}if(N)return N(k,p,w)}return!1}}function rz({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:NM,areArraysEqual:n?sf:RM,areDataViewsEqual:OM,areDatesEqual:IM,areErrorsEqual:AM,areFunctionsEqual:jM,areMapsEqual:n?v1(sC,sf):sC,areNumbersEqual:MM,areObjectsEqual:n?sf:zM,arePrimitiveWrappersEqual:DM,areRegExpsEqual:FM,areSetsEqual:n?v1(iC,sf):iC,areTypedArraysEqual:n?v1(Jg,sf):Jg,areUrlsEqual:LM,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=km(r.areArraysEqual),i=km(r.areMapsEqual),o=km(r.areObjectsEqual),a=km(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return r}function sz(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function iz({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(a,c){const{cache:d=t?new WeakMap:void 0,meta:f}=n();return e(a,c,{cache:d,equals:r,meta:f,strict:s})};if(t)return function(a,c){return e(a,c,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(a,c){return e(a,c,i)}}const oz=Qa();Qa({strict:!0});Qa({circular:!0});Qa({circular:!0,strict:!0});Qa({createInternalComparator:()=>du});Qa({strict:!0,createInternalComparator:()=>du});Qa({circular:!0,createInternalComparator:()=>du});Qa({circular:!0,createInternalComparator:()=>du,strict:!0});function Qa(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=rz(t),o=nz(i),a=n?n(o):sz(o);return iz({circular:e,comparator:o,createState:r,equals:a,strict:s})}var yt;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yt||(yt={}));var oC;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(oC||(oC={}));const Re=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ha=t=>{switch(typeof t){case"undefined":return Re.undefined;case"string":return Re.string;case"number":return Number.isNaN(t)?Re.nan:Re.number;case"boolean":return Re.boolean;case"function":return Re.function;case"bigint":return Re.bigint;case"symbol":return Re.symbol;case"object":return Array.isArray(t)?Re.array:t===null?Re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Re.promise:typeof Map<"u"&&t instanceof Map?Re.map:typeof Set<"u"&&t instanceof Set?Re.set:typeof Date<"u"&&t instanceof Date?Re.date:Re.object;default:return Re.unknown}},he=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Fo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return s(this),r}static assert(e){if(!(e instanceof Fo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fo.create=t=>new Fo(t);const Bw=(t,e)=>{let n;switch(t.code){case he.invalid_type:t.received===Re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case he.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case he.invalid_union:n="Invalid input";break;case he.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case he.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case he.invalid_arguments:n="Invalid function arguments";break;case he.invalid_return_type:n="Invalid function return type";break;case he.invalid_date:n="Invalid date";break;case he.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case he.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case he.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case he.custom:n="Invalid input";break;case he.invalid_intersection_types:n="Intersection results could not be merged";break;case he.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case he.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let az=Bw;function lz(){return az}const uz=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)a=d(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function Se(t,e){const n=lz(),r=uz({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Bw?void 0:Bw].filter(s=>!!s)});t.common.issues.push(r)}class Mr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ve;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Mr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ve;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ve=Object.freeze({status:"aborted"}),_f=t=>({status:"dirty",value:t}),Ws=t=>({status:"valid",value:t}),aC=t=>t.status==="aborted",lC=t=>t.status==="dirty",Yc=t=>t.status==="valid",e0=t=>typeof Promise<"u"&&t instanceof Promise;var Ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class to{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uC=(t,e)=>{if(Yc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fo(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:s}}let ht=class{get description(){return this._def.description}_getType(e){return ha(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mr,ctx:{common:e.parent.common,data:e.data,parsedType:ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(e0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ha(e)},s=this._parseSync({data:e,path:r.path,parent:r});return uC(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ha(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Yc(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Yc(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ha(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(e0(s)?s:Promise.resolve(s));return uC(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:he.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Jl({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return To.create(this,this._def)}nullable(){return eu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xc.create(this)}promise(){return o0.create(this,this._def)}or(e){return r0.create([this,e],this._def)}and(e){return s0.create(this,e,this._def)}transform(e){return new Jl({...Xe(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new a0({...Xe(this._def),innerType:this,defaultValue:n,typeName:me.ZodDefault})}brand(){return new T8({typeName:me.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new l0({...Xe(this._def),innerType:this,catchValue:n,typeName:me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return b4.create(this,e)}readonly(){return u0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const cz=/^c[^\s-]{8,}$/i,dz=/^[0-9a-z]+$/,fz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hz=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pz=/^[a-z0-9_-]{21}$/i,mz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _1;const _z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Sz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,kz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ez=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,E8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Cz=new RegExp(`^${E8}$`);function C8(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function Pz(t){return new RegExp(`^${C8(t)}$`)}function $z(t){let e=`${E8}T${C8(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Tz(t,e){return!!((e==="v4"||!e)&&_z.test(t)||(e==="v6"||!e)&&Sz.test(t))}function xz(t,e){if(!mz.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Nz(t,e){return!!((e==="v4"||!e)&&wz.test(t)||(e==="v6"||!e)&&kz.test(t))}let t0=class wf extends ht{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Re.string){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:Re.string,received:i.parsedType}),Ve}const r=new Mr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Se(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Se(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")yz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"email",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")_1||(_1=new RegExp(vz,"u")),_1.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"emoji",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")hz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"uuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")pz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"nanoid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")cz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")dz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid2",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")fz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ulid",code:he.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Se(s,{validation:"url",code:he.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"regex",code:he.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?$z(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Cz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Pz(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?gz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"duration",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Tz(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ip",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?xz(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"jwt",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Nz(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cidr",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?bz.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"base64",code:he.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Ez.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"base64url",code:he.invalid_string,message:i.message}),r.dirty()):yt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:he.invalid_string,...Ae.errToObj(r)})}_addCheck(e){return new wf({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ae.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ae.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ae.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ae.errToObj(n)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new wf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};t0.create=t=>new t0({checks:[],typeName:me.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Xe(t)});function Rz(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}let Ww=class Zw extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Re.number){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:Re.number,received:i.parsedType}),Ve}let r;const s=new Mr;for(const i of this._def.checks)i.kind==="int"?yt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:he.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Rz(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:he.not_finite,message:i.message}),s.dirty()):yt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,r,s){return new Zw({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ae.toString(s)}]})}_addCheck(e){return new Zw({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Ww.create=t=>new Ww({checks:[],typeName:me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class kh extends ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Re.bigint)return this._getInvalidInput(e);let r;const s=new Mr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):yt.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:Re.bigint,received:n.parsedType}),Ve}gte(e,n){return this.setLimit("min",e,!0,Ae.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ae.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ae.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ae.toString(n))}setLimit(e,n,r,s){return new kh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ae.toString(s)}]})}_addCheck(e){return new kh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}kh.create=t=>new kh({checks:[],typeName:me.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Xe(t)});let Kw=class extends ht{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Re.boolean){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.boolean,received:r.parsedType}),Ve}return Ws(e.data)}};Kw.create=t=>new Kw({typeName:me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class n0 extends ht{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Re.date){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:Re.date,received:i.parsedType}),Ve}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_date}),Ve}const r=new Mr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):yt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new n0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}n0.create=t=>new n0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:me.ZodDate,...Xe(t)});class cC extends ht{_parse(e){if(this._getType(e)!==Re.symbol){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.symbol,received:r.parsedType}),Ve}return Ws(e.data)}}cC.create=t=>new cC({typeName:me.ZodSymbol,...Xe(t)});class Qw extends ht{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.undefined,received:r.parsedType}),Ve}return Ws(e.data)}}Qw.create=t=>new Qw({typeName:me.ZodUndefined,...Xe(t)});let Yw=class extends ht{_parse(e){if(this._getType(e)!==Re.null){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.null,received:r.parsedType}),Ve}return Ws(e.data)}};Yw.create=t=>new Yw({typeName:me.ZodNull,...Xe(t)});let Xw=class extends ht{constructor(){super(...arguments),this._any=!0}_parse(e){return Ws(e.data)}};Xw.create=t=>new Xw({typeName:me.ZodAny,...Xe(t)});let dC=class extends ht{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ws(e.data)}};dC.create=t=>new dC({typeName:me.ZodUnknown,...Xe(t)});let Ha=class extends ht{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:Re.never,received:n.parsedType}),Ve}};Ha.create=t=>new Ha({typeName:me.ZodNever,...Xe(t)});class fC extends ht{_parse(e){if(this._getType(e)!==Re.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.void,received:r.parsedType}),Ve}return Ws(e.data)}}fC.create=t=>new fC({typeName:me.ZodVoid,...Xe(t)});let Xc=class lg extends ht{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Re.array)return Se(n,{code:he.invalid_type,expected:Re.array,received:n.parsedType}),Ve;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Se(n,{code:o?he.too_big:he.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Se(n,{code:he.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Se(n,{code:he.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new to(n,o,n.path,a)))).then(o=>Mr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new to(n,o,n.path,a)));return Mr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new lg({...this._def,minLength:{value:e,message:Ae.toString(n)}})}max(e,n){return new lg({...this._def,maxLength:{value:e,message:Ae.toString(n)}})}length(e,n){return new lg({...this._def,exactLength:{value:e,message:Ae.toString(n)}})}nonempty(e){return this.min(1,e)}};Xc.create=(t,e)=>new Xc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Xe(e)});function Qu(t){if(t instanceof Lo){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=To.create(Qu(r))}return new Lo({...t._def,shape:()=>e})}else return t instanceof Xc?new Xc({...t._def,type:Qu(t.element)}):t instanceof To?To.create(Qu(t.unwrap())):t instanceof eu?eu.create(Qu(t.unwrap())):t instanceof Xl?Xl.create(t.items.map(e=>Qu(e))):t}let Lo=class ui extends ht{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Re.object){const d=this._getOrReturnCtx(e);return Se(d,{code:he.invalid_type,expected:Re.object,received:d.parsedType}),Ve}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ha&&this._def.unknownKeys==="strip"))for(const d in s.data)o.includes(d)||a.push(d);const c=[];for(const d of o){const f=i[d],m=s.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new to(s,m,s.path,d)),alwaysSet:d in s.data})}if(this._def.catchall instanceof Ha){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:s.data[f]}});else if(d==="strict")a.length>0&&(Se(s,{code:he.unrecognized_keys,keys:a}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of a){const m=s.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new to(s,m,s.path,f)),alwaysSet:f in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const m=await f.key,y=await f.value;d.push({key:m,value:y,alwaysSet:f.alwaysSet})}return d}).then(d=>Mr.mergeObjectSync(r,d)):Mr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new ui({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:Ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ui({...this._def,unknownKeys:"strip"})}passthrough(){return new ui({...this._def,unknownKeys:"passthrough"})}extend(e){return new ui({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ui({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ui({...this._def,catchall:e})}pick(e){const n={};for(const r of yt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ui({...this._def,shape:()=>n})}omit(e){const n={};for(const r of yt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new ui({...this._def,shape:()=>n})}deepPartial(){return Qu(this)}partial(e){const n={};for(const r of yt.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new ui({...this._def,shape:()=>n})}required(e){const n={};for(const r of yt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof To;)i=i._def.innerType;n[r]=i}return new ui({...this._def,shape:()=>n})}keyof(){return $8(yt.objectKeys(this.shape))}};Lo.create=(t,e)=>new Lo({shape:()=>t,unknownKeys:"strip",catchall:Ha.create(),typeName:me.ZodObject,...Xe(e)});Lo.strictCreate=(t,e)=>new Lo({shape:()=>t,unknownKeys:"strict",catchall:Ha.create(),typeName:me.ZodObject,...Xe(e)});Lo.lazycreate=(t,e)=>new Lo({shape:t,unknownKeys:"strip",catchall:Ha.create(),typeName:me.ZodObject,...Xe(e)});let r0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Fo(a.ctx.common.issues));return Se(n,{code:he.invalid_union,unionErrors:o}),Ve}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Fo(c));return Se(n,{code:he.invalid_union,unionErrors:a}),Ve}}get options(){return this._def.options}};r0.create=(t,e)=>new r0({options:t,typeName:me.ZodUnion,...Xe(e)});const mo=t=>t instanceof t2?mo(t.schema):t instanceof Jl?mo(t.innerType()):t instanceof i0?[t.value]:t instanceof sy?t.options:t instanceof r2?yt.objectValues(t.enum):t instanceof a0?mo(t._def.innerType):t instanceof Qw?[void 0]:t instanceof Yw?[null]:t instanceof To?[void 0,...mo(t.unwrap())]:t instanceof eu?[null,...mo(t.unwrap())]:t instanceof T8||t instanceof u0?mo(t.unwrap()):t instanceof l0?mo(t._def.innerType):[];let Oz=class P8 extends ht{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.object)return Se(n,{code:he.invalid_type,expected:Re.object,received:n.parsedType}),Ve;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Se(n,{code:he.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=mo(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new P8({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Xe(r)})}};function Jw(t,e){const n=ha(t),r=ha(e);if(t===e)return{valid:!0,data:t};if(n===Re.object&&r===Re.object){const s=yt.objectKeys(e),i=yt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Jw(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Re.array&&r===Re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Jw(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Re.date&&r===Re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let s0=class extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(aC(i)||aC(o))return Ve;const a=Jw(i.value,o.value);return a.valid?((lC(i)||lC(o))&&n.dirty(),{status:n.value,value:a.data}):(Se(r,{code:he.invalid_intersection_types}),Ve)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};s0.create=(t,e,n)=>new s0({left:t,right:e,typeName:me.ZodIntersection,...Xe(n)});class Xl extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.array)return Se(r,{code:he.invalid_type,expected:Re.array,received:r.parsedType}),Ve;if(r.data.length<this._def.items.length)return Se(r,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&r.data.length>this._def.items.length&&(Se(r,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new to(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Mr.mergeArray(n,o)):Mr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Xl({...this._def,rest:e})}}Xl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xl({items:t,typeName:me.ZodTuple,rest:null,...Xe(e)})};let Iz=class e2 extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.object)return Se(r,{code:he.invalid_type,expected:Re.object,received:r.parsedType}),Ve;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new to(r,a,r.path,a)),value:o._parse(new to(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Mr.mergeObjectAsync(n,s):Mr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ht?new e2({keyType:e,valueType:n,typeName:me.ZodRecord,...Xe(r)}):new e2({keyType:t0.create(),valueType:e,typeName:me.ZodRecord,...Xe(n)})}};class hC extends ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.map)return Se(r,{code:he.invalid_type,expected:Re.map,received:r.parsedType}),Ve;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],d)=>({key:s._parse(new to(r,a,r.path,[d,"key"])),value:i._parse(new to(r,c,r.path,[d,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return Ve;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return Ve;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),a.set(d.value,f.value)}return{status:n.value,value:a}}}}hC.create=(t,e,n)=>new hC({valueType:e,keyType:t,typeName:me.ZodMap,...Xe(n)});class bh extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Re.set)return Se(r,{code:he.invalid_type,expected:Re.set,received:r.parsedType}),Ve;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Se(r,{code:he.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Se(r,{code:he.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const f of c){if(f.status==="aborted")return Ve;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const a=[...r.data.values()].map((c,d)=>i._parse(new to(r,c,r.path,d)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new bh({...this._def,minSize:{value:e,message:Ae.toString(n)}})}max(e,n){return new bh({...this._def,maxSize:{value:e,message:Ae.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}bh.create=(t,e)=>new bh({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Xe(e)});class t2 extends ht{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}t2.create=(t,e)=>new t2({getter:t,typeName:me.ZodLazy,...Xe(e)});let i0=class extends ht{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:he.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:e.data}}get value(){return this._def.value}};i0.create=(t,e)=>new i0({value:t,typeName:me.ZodLiteral,...Xe(e)});function $8(t,e){return new sy({values:t,typeName:me.ZodEnum,...Xe(e)})}let sy=class n2 extends ht{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{expected:yt.joinValues(r),received:n.parsedType,code:he.invalid_type}),Ve}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{received:n.data,code:he.invalid_enum_value,options:r}),Ve}return Ws(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return n2.create(e,{...this._def,...n})}exclude(e,n=this._def){return n2.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};sy.create=$8;class r2 extends ht{_parse(e){const n=yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Re.string&&r.parsedType!==Re.number){const s=yt.objectValues(n);return Se(r,{expected:yt.joinValues(s),received:r.parsedType,code:he.invalid_type}),Ve}if(this._cache||(this._cache=new Set(yt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=yt.objectValues(n);return Se(r,{received:r.data,code:he.invalid_enum_value,options:s}),Ve}return Ws(e.data)}get enum(){return this._def.values}}r2.create=(t,e)=>new r2({values:t,typeName:me.ZodNativeEnum,...Xe(e)});class o0 extends ht{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Re.promise&&n.common.async===!1)return Se(n,{code:he.invalid_type,expected:Re.promise,received:n.parsedType}),Ve;const r=n.parsedType===Re.promise?n.data:Promise.resolve(n.data);return Ws(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}o0.create=(t,e)=>new o0({type:t,typeName:me.ZodPromise,...Xe(e)});class Jl extends ht{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Se(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Ve;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?Ve:c.status==="dirty"||n.value==="dirty"?_f(c.value):c});{if(n.value==="aborted")return Ve;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Ve:a.status==="dirty"||n.value==="dirty"?_f(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ve:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yc(o))return Ve;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):Ve);yt.assertNever(s)}}Jl.create=(t,e,n)=>new Jl({schema:t,typeName:me.ZodEffects,effect:e,...Xe(n)});Jl.createWithPreprocess=(t,e,n)=>new Jl({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Xe(n)});let To=class extends ht{_parse(e){return this._getType(e)===Re.undefined?Ws(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};To.create=(t,e)=>new To({innerType:t,typeName:me.ZodOptional,...Xe(e)});let eu=class extends ht{_parse(e){return this._getType(e)===Re.null?Ws(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};eu.create=(t,e)=>new eu({innerType:t,typeName:me.ZodNullable,...Xe(e)});let a0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};a0.create=(t,e)=>new a0({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});let l0=class extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return e0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};l0.create=(t,e)=>new l0({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class pC extends ht{_parse(e){if(this._getType(e)!==Re.nan){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:Re.nan,received:r.parsedType}),Ve}return{status:"valid",value:e.data}}}pC.create=t=>new pC({typeName:me.ZodNaN,...Xe(t)});class T8 extends ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class b4 extends ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ve:i.status==="dirty"?(n.dirty(),_f(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ve:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new b4({in:e,out:n,typeName:me.ZodPipeline})}}let u0=class extends ht{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Yc(s)&&(s.value=Object.freeze(s.value)),s);return e0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}};u0.create=(t,e)=>new u0({innerType:t,typeName:me.ZodReadonly,...Xe(e)});var me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));const Ot=t0.create,ys=Ww.create,tu=Kw.create,bm=Xw.create;Ha.create;const Bh=Xc.create,on=Lo.create;r0.create;const mC=Oz.create;s0.create;Xl.create;const Em=Iz.create,Cm=i0.create,nu=sy.create;o0.create;To.create;eu.create;const Az=t=>()=>!Array.isArray(t)||t.length===0?null:{components:t.map(e=>{if(typeof e!="object"||e===null)return{id:"unknown",componentName:"unknown",description:"invalid component",props:void 0,propsSchema:"Not specified",state:void 0,isSelectedForInteraction:!1,stateSchema:"Not specified"};const n=e;return{id:String(n.id??"unknown"),componentName:String(n.name??"unknown"),description:String(n.description??""),props:n.props,propsSchema:n.propsSchema?"Available - use component-specific update tools":"Not specified",state:n.state,isSelectedForInteraction:n.isSelectedForInteraction??!1,stateSchema:n.stateSchema?"Available - use component-specific update tools":"Not specified"}})},jz=Object.freeze({status:"aborted"});function ne(t,e,n){function r(a,c){var d;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(d=a._zod).traits??(d.traits=new Set),a._zod.traits.add(t),e(a,c);for(const f in o.prototype)f in a||Object.defineProperty(a,f,{value:o.prototype[f].bind(a)});a._zod.constr=o,a._zod.def=c}const s=(n==null?void 0:n.Parent)??Object;class i extends s{}Object.defineProperty(i,"name",{value:t});function o(a){var c;const d=n!=null&&n.Parent?new i:this;r(d,a),(c=d._zod).deferred??(c.deferred=[]);for(const f of d._zod.deferred)f();return d}return Object.defineProperty(o,"init",{value:r}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>{var c,d;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(d=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:d.has(t)}}),Object.defineProperty(o,"name",{value:t}),o}const wle=Symbol("zod_brand");class Eh extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const s2={};function no(t){return t&&Object.assign(s2,t),s2}function Mz(t){return t}function zz(t){return t}function Dz(t){}function Fz(t){throw new Error}function Lz(t){}function E4(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Uz(t,e="|"){return t.map(n=>I8(n)).join(e)}function x8(t,e){return typeof e=="bigint"?e.toString():e}function iy(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function fu(t){return t==null}function oy(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function N8(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}function kt(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Wh(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Vz(t,e){return e?e.reduce((n,r)=>n==null?void 0:n[r],t):t}function Gz(t){const e=Object.keys(t),n=e.map(r=>t[r]);return Promise.all(n).then(r=>{const s={};for(let i=0;i<e.length;i++)s[e[i]]=r[i];return s})}function Hz(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function Yu(t){return JSON.stringify(t)}const C4=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Ch(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const R8=iy(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Ph(t){if(Ch(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(Ch(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function qz(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}const Bz=t=>{const e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},c0=new Set(["string","number","symbol"]),O8=new Set(["string","number","bigint","boolean","symbol","undefined"]);function hu(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ya(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function de(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Wz(t){let e;return new Proxy({},{get(n,r,s){return e??(e=t()),Reflect.get(e,r,s)},set(n,r,s,i){return e??(e=t()),Reflect.set(e,r,s,i)},has(n,r){return e??(e=t()),Reflect.has(e,r)},deleteProperty(n,r){return e??(e=t()),Reflect.deleteProperty(e,r)},ownKeys(n){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(n,r){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,r)},defineProperty(n,r,s){return e??(e=t()),Reflect.defineProperty(e,r,s)}})}function I8(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function A8(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const j8={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},M8={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function z8(t,e){const n={},r=t._zod.def;for(const s in e){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&(n[s]=r.shape[s])}return Ya(t,{...t._zod.def,shape:n,checks:[]})}function D8(t,e){const n={...t._zod.def.shape},r=t._zod.def;for(const s in e){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);e[s]&&delete n[s]}return Ya(t,{...t._zod.def,shape:n,checks:[]})}function F8(t,e){if(!Ph(e))throw new Error("Invalid input to extend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Wh(this,"shape",r),r},checks:[]};return Ya(t,n)}function L8(t,e){return Ya(t,{...t._zod.def,get shape(){const n={...t._zod.def.shape,...e._zod.def.shape};return Wh(this,"shape",n),n},catchall:e._zod.def.catchall,checks:[]})}function U8(t,e,n){const r=e._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in r))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=t?new t({type:"optional",innerType:r[i]}):r[i])}else for(const i in r)s[i]=t?new t({type:"optional",innerType:r[i]}):r[i];return Ya(e,{...e._zod.def,shape:s,checks:[]})}function V8(t,e,n){const r=e._zod.def.shape,s={...r};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new t({type:"nonoptional",innerType:r[i]}))}else for(const i in r)s[i]=new t({type:"nonoptional",innerType:r[i]});return Ya(e,{...e._zod.def,shape:s,checks:[]})}function Pc(t,e=0){var n;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function Gs(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Sf(t){return typeof t=="string"?t:t==null?void 0:t.message}function xi(t,e,n){var s,i,o,a,c,d;const r={...t,path:t.path??[]};if(!t.message){const f=Sf((o=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,t))??Sf((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??Sf((c=n.customError)==null?void 0:c.call(n,t))??Sf((d=n.localeError)==null?void 0:d.call(n,t))??"Invalid input";r.message=f}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function ay(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function ly(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Jc(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}function Zz(t){return Object.entries(t).filter(([e,n])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}class Kz{constructor(...e){}}const Sle=Object.freeze(Object.defineProperty({__proto__:null,BIGINT_FORMAT_RANGES:M8,Class:Kz,NUMBER_FORMAT_RANGES:j8,aborted:Pc,allowsEval:R8,assert:Lz,assertEqual:Mz,assertIs:Dz,assertNever:Fz,assertNotEqual:zz,assignProp:Wh,cached:iy,captureStackTrace:C4,cleanEnum:Zz,cleanRegex:oy,clone:Ya,createTransparentProxy:Wz,defineLazy:kt,esc:Yu,escapeRegex:hu,extend:F8,finalizeIssue:xi,floatSafeRemainder:N8,getElementAtPath:Vz,getEnumValues:E4,getLengthableOrigin:ly,getParsedType:Bz,getSizableOrigin:ay,isObject:Ch,isPlainObject:Ph,issue:Jc,joinValues:Uz,jsonStringifyReplacer:x8,merge:L8,normalizeParams:de,nullish:fu,numKeys:qz,omit:D8,optionalKeys:A8,partial:U8,pick:z8,prefixIssues:Gs,primitiveTypes:O8,promiseAllObject:Gz,propertyKeyTypes:c0,randomString:Hz,required:V8,stringifyPrimitive:I8,unwrapMessage:Sf},Symbol.toStringTag,{value:"Module"})),G8=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,x8,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},H8=ne("$ZodError",G8),uy=ne("$ZodError",G8,{Parent:Error});function Qz(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function Yz(t,e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>s({issues:a}));else if(o.code==="invalid_key")s({issues:o.issues});else if(o.code==="invalid_element")s({issues:o.issues});else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(a[d]=a[d]||{_errors:[]},a[d]._errors.push(n(o))):a[d]=a[d]||{_errors:[]},a=a[d],c++}}};return s(t),r}function kle(t,e){const n=e||function(i){return i.message},r={errors:[]},s=(i,o=[])=>{var a,c;for(const d of i.issues)if(d.code==="invalid_union"&&d.errors.length)d.errors.map(f=>s({issues:f},d.path));else if(d.code==="invalid_key")s({issues:d.issues},d.path);else if(d.code==="invalid_element")s({issues:d.issues},d.path);else{const f=[...o,...d.path];if(f.length===0){r.errors.push(n(d));continue}let m=r,y=0;for(;y<f.length;){const v=f[y],_=y===f.length-1;typeof v=="string"?(m.properties??(m.properties={}),(a=m.properties)[v]??(a[v]={errors:[]}),m=m.properties[v]):(m.items??(m.items=[]),(c=m.items)[v]??(c[v]={errors:[]}),m=m.items[v]),_&&m.errors.push(n(d)),y++}}};return s(t),r}function Xz(t){const e=[];for(const n of t)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function ble(t){var r;const e=[],n=[...t.issues].sort((s,i)=>s.path.length-i.path.length);for(const s of n)e.push(` ${s.message}`),(r=s.path)!=null&&r.length&&e.push(`   at ${Xz(s.path)}`);return e.join(`
`)}const q8=t=>(e,n,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Eh;if(o.issues.length){const a=new((s==null?void 0:s.Err)??t)(o.issues.map(c=>xi(c,i,no())));throw C4(a,s==null?void 0:s.callee),a}return o.value},Ele=q8(uy),B8=t=>async(e,n,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new((s==null?void 0:s.Err)??t)(o.issues.map(c=>xi(c,i,no())));throw C4(a,s==null?void 0:s.callee),a}return o.value},Cle=B8(uy),W8=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new Eh;return i.issues.length?{success:!1,error:new(t??H8)(i.issues.map(o=>xi(o,s,no())))}:{success:!0,data:i.value}},Z8=W8(uy),K8=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:n,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new t(i.issues.map(o=>xi(o,s,no())))}:{success:!0,data:i.value}},Jz=K8(uy),Q8=/^[cC][^\s-]{8,}$/,Y8=/^[0-9a-z]+$/,X8=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,J8=/^[0-9a-vA-V]{20}$/,eT=/^[A-Za-z0-9]{27}$/,tT=/^[a-zA-Z0-9_-]{21}$/,nT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,eD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ed=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,tD=ed(4),nD=ed(6),rD=ed(7),sT=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,sD=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,iD=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,oD=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,aD=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,iT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function oT(){return new RegExp(iT,"u")}const aT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,uT=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cT=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dT=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,P4=/^[A-Za-z0-9_-]*$/,fT=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,lD=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,hT=/^\+(?:[0-9]){6,14}[0-9]$/,pT="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",mT=new RegExp(`^${pT}$`);function gT(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function yT(t){return new RegExp(`^${gT(t)}$`)}function vT(t){const e=gT({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${pT}T(?:${r})$`)}const _T=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},wT=/^\d+n?$/,ST=/^\d+$/,kT=/^-?\d+(?:\.\d+)?/i,bT=/true|false/i,ET=/null/i,CT=/undefined/i,PT=/^[^A-Z]*$/,$T=/^[^a-z]*$/,Ple=Object.freeze(Object.defineProperty({__proto__:null,_emoji:iT,base64:dT,base64url:P4,bigint:wT,boolean:bT,browserEmail:aD,cidrv4:uT,cidrv6:cT,cuid:Q8,cuid2:Y8,date:mT,datetime:vT,domain:lD,duration:nT,e164:hT,email:sT,emoji:oT,extendedDuration:eD,guid:rT,hostname:fT,html5Email:sD,integer:ST,ipv4:aT,ipv6:lT,ksuid:eT,lowercase:PT,nanoid:tT,null:ET,number:kT,rfc5322Email:iD,string:_T,time:yT,ulid:X8,undefined:CT,unicodeEmail:oD,uppercase:$T,uuid:ed,uuid4:tD,uuid6:nD,uuid7:rD,xid:J8},Symbol.toStringTag,{value:"Module"})),xn=ne("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),TT={number:"number",bigint:"bigint",object:"date"},xT=ne("$ZodCheckLessThan",(t,e)=>{xn.init(t,e);const n=TT[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),NT=ne("$ZodCheckGreaterThan",(t,e)=>{xn.init(t,e);const n=TT[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),uD=ne("$ZodCheckMultipleOf",(t,e)=>{xn.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):N8(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),cD=ne("$ZodCheckNumberFormat",(t,e)=>{var o;xn.init(t,e),e.format=e.format||"float64";const n=(o=e.format)==null?void 0:o.includes("int"),r=n?"int":"number",[s,i]=j8[e.format];t._zod.onattach.push(a=>{const c=a._zod.bag;c.format=e.format,c.minimum=s,c.maximum=i,n&&(c.pattern=ST)}),t._zod.check=a=>{const c=a.value;if(n){if(!Number.isInteger(c)){a.issues.push({expected:r,format:e.format,code:"invalid_type",input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}c<s&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),c>i&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:i,inst:t})}}),dD=ne("$ZodCheckBigIntFormat",(t,e)=>{xn.init(t,e);const[n,r]=M8[e.format];t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,i.minimum=n,i.maximum=r}),t._zod.check=s=>{const i=s.value;i<n&&s.issues.push({origin:"bigint",input:i,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),i>r&&s.issues.push({origin:"bigint",input:i,code:"too_big",maximum:r,inst:t})}}),fD=ne("$ZodCheckMaxSize",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;s.size<=e.maximum||r.issues.push({origin:ay(s),code:"too_big",maximum:e.maximum,input:s,inst:t,continue:!e.abort})}}),hD=ne("$ZodCheckMinSize",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;s.size>=e.minimum||r.issues.push({origin:ay(s),code:"too_small",minimum:e.minimum,input:s,inst:t,continue:!e.abort})}}),pD=ne("$ZodCheckSizeEquals",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.size!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.size,s.maximum=e.size,s.size=e.size}),t._zod.check=r=>{const s=r.value,i=s.size;if(i===e.size)return;const o=i>e.size;r.issues.push({origin:ay(s),...o?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),mD=ne("$ZodCheckMaxLength",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const o=ly(s);r.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),gD=ne("$ZodCheckMinLength",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const o=ly(s);r.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),yD=ne("$ZodCheckLengthEquals",(t,e)=>{var n;xn.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!fu(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,i=s.length;if(i===e.length)return;const o=ly(s),a=i>e.length;r.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),cy=ne("$ZodCheckStringFormat",(t,e)=>{var n,r;xn.init(t,e),t._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),vD=ne("$ZodCheckRegex",(t,e)=>{cy.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),_D=ne("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=PT),cy.init(t,e)}),wD=ne("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=$T),cy.init(t,e)}),SD=ne("$ZodCheckIncludes",(t,e)=>{xn.init(t,e);const n=hu(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),kD=ne("$ZodCheckStartsWith",(t,e)=>{xn.init(t,e);const n=new RegExp(`^${hu(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),bD=ne("$ZodCheckEndsWith",(t,e)=>{xn.init(t,e);const n=new RegExp(`.*${hu(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}});function gC(t,e,n){t.issues.length&&e.issues.push(...Gs(n,t.issues))}const ED=ne("$ZodCheckProperty",(t,e)=>{xn.init(t,e),t._zod.check=n=>{const r=e.schema._zod.run({value:n.value[e.property],issues:[]},{});if(r instanceof Promise)return r.then(s=>gC(s,n,e.property));gC(r,n,e.property)}}),CD=ne("$ZodCheckMimeType",(t,e)=>{xn.init(t,e);const n=new Set(e.mime);t._zod.onattach.push(r=>{r._zod.bag.mime=e.mime}),t._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:e.mime,input:r.value.type,inst:t})}}),PD=ne("$ZodCheckOverwrite",(t,e)=>{xn.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class $D{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(i=>`  ${i}`)];return new e(...n,s.join(`
`))}}const TD={major:4,minor:0,patch:0},Ke=ne("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=TD;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const o of i._zod.onattach)o(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const i=(o,a,c)=>{let d=Pc(o),f;for(const m of a){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(d)continue;const y=o.issues.length,v=m._zod.check(o);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new Eh;if(f||v instanceof Promise)f=(f??Promise.resolve()).then(async()=>{await v,o.issues.length!==y&&(d||(d=Pc(o,y)))});else{if(o.issues.length===y)continue;d||(d=Pc(o,y))}}return f?f.then(()=>o):o};t._zod.run=(o,a)=>{const c=t._zod.parse(o,a);if(c instanceof Promise){if(a.async===!1)throw new Eh;return c.then(d=>i(d,r,a))}return i(c,r,a)}}t["~standard"]={validate:i=>{var o;try{const a=Z8(t,i);return a.success?{value:a.data}:{issues:(o=a.error)==null?void 0:o.issues}}catch{return Jz(t,i).then(c=>{var d;return c.success?{value:c.data}:{issues:(d=c.error)==null?void 0:d.issues}})}},vendor:"zod",version:1}}),dy=ne("$ZodString",(t,e)=>{var n;Ke.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??_T(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),Kt=ne("$ZodStringFormat",(t,e)=>{cy.init(t,e),dy.init(t,e)}),xD=ne("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=rT),Kt.init(t,e)}),ND=ne("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=ed(r))}else e.pattern??(e.pattern=ed());Kt.init(t,e)}),RD=ne("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=sT),Kt.init(t,e)}),OD=ne("$ZodURL",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{try{const r=n.value,s=new URL(r),i=s.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:fT.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),!r.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),ID=ne("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=oT()),Kt.init(t,e)}),AD=ne("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=tT),Kt.init(t,e)}),jD=ne("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Q8),Kt.init(t,e)}),MD=ne("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Y8),Kt.init(t,e)}),zD=ne("$ZodULID",(t,e)=>{e.pattern??(e.pattern=X8),Kt.init(t,e)}),DD=ne("$ZodXID",(t,e)=>{e.pattern??(e.pattern=J8),Kt.init(t,e)}),FD=ne("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=eT),Kt.init(t,e)}),LD=ne("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=vT(e)),Kt.init(t,e)}),UD=ne("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=mT),Kt.init(t,e)}),VD=ne("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=yT(e)),Kt.init(t,e)}),GD=ne("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=nT),Kt.init(t,e)}),HD=ne("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=aT),Kt.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),qD=ne("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=lT),Kt.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),BD=ne("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=uT),Kt.init(t,e)}),WD=ne("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=cT),Kt.init(t,e),t._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const i=Number(s);if(`${i}`!==s)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function RT(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const ZD=ne("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=dT),Kt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{RT(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function KD(t){if(!P4.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return RT(n)}const QD=ne("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=P4),Kt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{KD(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),YD=ne("$ZodE164",(t,e)=>{e.pattern??(e.pattern=hT),Kt.init(t,e)});function XD(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const JD=ne("$ZodJWT",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{XD(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),$le=ne("$ZodCustomStringFormat",(t,e)=>{Kt.init(t,e),t._zod.check=n=>{e.fn(n.value)||n.issues.push({code:"invalid_format",format:e.format,input:n.value,inst:t,continue:!e.abort})}}),OT=ne("$ZodNumber",(t,e)=>{Ke.init(t,e),t._zod.pattern=t._zod.bag.pattern??kT,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),n}}),eF=ne("$ZodNumber",(t,e)=>{cD.init(t,e),OT.init(t,e)}),IT=ne("$ZodBoolean",(t,e)=>{Ke.init(t,e),t._zod.pattern=bT,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),tF=ne("$ZodBigInt",(t,e)=>{Ke.init(t,e),t._zod.pattern=wT,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:t}),n}}),Tle=ne("$ZodBigInt",(t,e)=>{dD.init(t,e),tF.init(t,e)}),xle=ne("$ZodSymbol",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return typeof s=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:s,inst:t}),n}}),Nle=ne("$ZodUndefined",(t,e)=>{Ke.init(t,e),t._zod.pattern=CT,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,r)=>{const s=n.value;return typeof s>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:s,inst:t}),n}}),nF=ne("$ZodNull",(t,e)=>{Ke.init(t,e),t._zod.pattern=ET,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{const s=n.value;return s===null||n.issues.push({expected:"null",code:"invalid_type",input:s,inst:t}),n}}),rF=ne("$ZodAny",(t,e)=>{Ke.init(t,e),t._zod.parse=n=>n}),sF=ne("$ZodUnknown",(t,e)=>{Ke.init(t,e),t._zod.parse=n=>n}),iF=ne("$ZodNever",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),Rle=ne("$ZodVoid",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return typeof s>"u"||n.issues.push({expected:"void",code:"invalid_type",input:s,inst:t}),n}}),Ole=ne("$ZodDate",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}const s=n.value,i=s instanceof Date;return i&&!Number.isNaN(s.getTime())||n.issues.push({expected:"date",code:"invalid_type",input:s,...i?{received:"Invalid Date"}:{},inst:t}),n}});function yC(t,e,n){t.issues.length&&e.issues.push(...Gs(n,t.issues)),e.value[n]=t.value}const oF=ne("$ZodArray",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],c=e.element._zod.run({value:a,issues:[]},r);c instanceof Promise?i.push(c.then(d=>yC(d,n,o))):yC(c,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Pm(t,e,n){t.issues.length&&e.issues.push(...Gs(n,t.issues)),e.value[n]=t.value}function vC(t,e,n,r){t.issues.length?r[n]===void 0?n in r?e.value[n]=void 0:e.value[n]=t.value:e.issues.push(...Gs(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}const aF=ne("$ZodObject",(t,e)=>{Ke.init(t,e);const n=iy(()=>{const m=Object.keys(e.shape);for(const v of m)if(!(e.shape[v]instanceof Ke))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const y=A8(e.shape);return{shape:e.shape,keys:m,keySet:new Set(m),numKeys:m.length,optionalKeys:new Set(y)}});kt(t._zod,"propValues",()=>{const m=e.shape,y={};for(const v in m){const _=m[v]._zod;if(_.values){y[v]??(y[v]=new Set);for(const E of _.values)y[v].add(E)}}return y});const r=m=>{const y=new $D(["shape","payload","ctx"]),v=n.value,_=w=>{const g=Yu(w);return`shape[${g}]._zod.run({ value: input[${g}], issues: [] }, ctx)`};y.write("const input = payload.value;");const E=Object.create(null);let k=0;for(const w of v.keys)E[w]=`key_${k++}`;y.write("const newResult = {}");for(const w of v.keys)if(v.optionalKeys.has(w)){const g=E[w];y.write(`const ${g} = ${_(w)};`);const C=Yu(w);y.write(`
        if (${g}.issues.length) {
          if (input[${C}] === undefined) {
            if (${C} in input) {
              newResult[${C}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${g}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${C}, ...iss.path] : [${C}],
              }))
            );
          }
        } else if (${g}.value === undefined) {
          if (${C} in input) newResult[${C}] = undefined;
        } else {
          newResult[${C}] = ${g}.value;
        }
        `)}else{const g=E[w];y.write(`const ${g} = ${_(w)};`),y.write(`
          if (${g}.issues.length) payload.issues = payload.issues.concat(${g}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Yu(w)}, ...iss.path] : [${Yu(w)}]
          })));`),y.write(`newResult[${Yu(w)}] = ${g}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const p=y.compile();return(w,g)=>p(m,w,g)};let s;const i=Ch,o=!s2.jitless,c=o&&R8.value,d=e.catchall;let f;t._zod.parse=(m,y)=>{f??(f=n.value);const v=m.value;if(!i(v))return m.issues.push({expected:"object",code:"invalid_type",input:v,inst:t}),m;const _=[];if(o&&c&&(y==null?void 0:y.async)===!1&&y.jitless!==!0)s||(s=r(e.shape)),m=s(m,y);else{m.value={};const g=f.shape;for(const C of f.keys){const $=g[C],N=$._zod.run({value:v[C],issues:[]},y),M=$._zod.optin==="optional"&&$._zod.optout==="optional";N instanceof Promise?_.push(N.then(A=>M?vC(A,m,C,v):Pm(A,m,C))):M?vC(N,m,C,v):Pm(N,m,C)}}if(!d)return _.length?Promise.all(_).then(()=>m):m;const E=[],k=f.keySet,p=d._zod,w=p.def.type;for(const g of Object.keys(v)){if(k.has(g))continue;if(w==="never"){E.push(g);continue}const C=p.run({value:v[g],issues:[]},y);C instanceof Promise?_.push(C.then($=>Pm($,m,g))):Pm(C,m,g)}return E.length&&m.issues.push({code:"unrecognized_keys",keys:E,input:v,inst:t}),_.length?Promise.all(_).then(()=>m):m}});function _C(t,e,n,r){for(const s of t)if(s.issues.length===0)return e.value=s.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(s=>s.issues.map(i=>xi(i,r,no())))}),e}const AT=ne("$ZodUnion",(t,e)=>{Ke.init(t,e),kt(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),kt(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),kt(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),kt(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){const n=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${n.map(r=>oy(r.source)).join("|")})$`)}}),t._zod.parse=(n,r)=>{let s=!1;const i=[];for(const o of e.options){const a=o._zod.run({value:n.value,issues:[]},r);if(a instanceof Promise)i.push(a),s=!0;else{if(a.issues.length===0)return a;i.push(a)}}return s?Promise.all(i).then(o=>_C(o,n,t,r)):_C(i,n,t,r)}}),lF=ne("$ZodDiscriminatedUnion",(t,e)=>{AT.init(t,e);const n=t._zod.parse;kt(t._zod,"propValues",()=>{const s={};for(const i of e.options){const o=i._zod.propValues;if(!o||Object.keys(o).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(i)}"`);for(const[a,c]of Object.entries(o)){s[a]||(s[a]=new Set);for(const d of c)s[a].add(d)}}return s});const r=iy(()=>{const s=e.options,i=new Map;for(const o of s){const a=o._zod.propValues[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(const c of a){if(i.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);i.set(c,o)}}return i});t._zod.parse=(s,i)=>{const o=s.value;if(!Ch(o))return s.issues.push({code:"invalid_type",expected:"object",input:o,inst:t}),s;const a=r.value.get(o==null?void 0:o[e.discriminator]);return a?a._zod.run(s,i):e.unionFallback?n(s,i):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:o,path:[e.discriminator],inst:t}),s)}}),uF=ne("$ZodIntersection",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,i=e.left._zod.run({value:s,issues:[]},r),o=e.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||o instanceof Promise?Promise.all([i,o]).then(([c,d])=>wC(n,c,d)):wC(n,i,o)}});function i2(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Ph(t)&&Ph(e)){const n=Object.keys(e),r=Object.keys(t).filter(i=>n.indexOf(i)!==-1),s={...t,...e};for(const i of r){const o=i2(t[i],e[i]);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};s[i]=o.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r],o=i2(s,i);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function wC(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Pc(t))return t;const r=i2(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const Ile=ne("$ZodTuple",(t,e)=>{Ke.init(t,e);const n=e.items,r=n.length-[...n].reverse().findIndex(s=>s._zod.optin!=="optional");t._zod.parse=(s,i)=>{const o=s.value;if(!Array.isArray(o))return s.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),s;s.value=[];const a=[];if(!e.rest){const d=o.length>n.length,f=o.length<r-1;if(d||f)return s.issues.push({input:o,inst:t,origin:"array",...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}}),s}let c=-1;for(const d of n){if(c++,c>=o.length&&c>=r)continue;const f=d._zod.run({value:o[c],issues:[]},i);f instanceof Promise?a.push(f.then(m=>$m(m,s,c))):$m(f,s,c)}if(e.rest){const d=o.slice(n.length);for(const f of d){c++;const m=e.rest._zod.run({value:f,issues:[]},i);m instanceof Promise?a.push(m.then(y=>$m(y,s,c))):$m(m,s,c)}}return a.length?Promise.all(a).then(()=>s):s}});function $m(t,e,n){t.issues.length&&e.issues.push(...Gs(n,t.issues)),e.value[n]=t.value}const cF=ne("$ZodRecord",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Ph(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:t}),n;const i=[];if(e.keyType._zod.values){const o=e.keyType._zod.values;n.value={};for(const c of o)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const d=e.valueType._zod.run({value:s[c],issues:[]},r);d instanceof Promise?i.push(d.then(f=>{f.issues.length&&n.issues.push(...Gs(c,f.issues)),n.value[c]=f.value})):(d.issues.length&&n.issues.push(...Gs(c,d.issues)),n.value[c]=d.value)}let a;for(const c in s)o.has(c)||(a=a??[],a.push(c));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:t,keys:a})}else{n.value={};for(const o of Reflect.ownKeys(s)){if(o==="__proto__")continue;const a=e.keyType._zod.run({value:o,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(d=>xi(d,r,no())),input:o,path:[o],inst:t}),n.value[a.value]=a.value;continue}const c=e.valueType._zod.run({value:s[o],issues:[]},r);c instanceof Promise?i.push(c.then(d=>{d.issues.length&&n.issues.push(...Gs(o,d.issues)),n.value[a.value]=d.value})):(c.issues.length&&n.issues.push(...Gs(o,c.issues)),n.value[a.value]=c.value)}}return i.length?Promise.all(i).then(()=>n):n}}),Ale=ne("$ZodMap",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!(s instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:s,inst:t}),n;const i=[];n.value=new Map;for(const[o,a]of s){const c=e.keyType._zod.run({value:o,issues:[]},r),d=e.valueType._zod.run({value:a,issues:[]},r);c instanceof Promise||d instanceof Promise?i.push(Promise.all([c,d]).then(([f,m])=>{SC(f,m,n,o,s,t,r)})):SC(c,d,n,o,s,t,r)}return i.length?Promise.all(i).then(()=>n):n}});function SC(t,e,n,r,s,i,o){t.issues.length&&(c0.has(typeof r)?n.issues.push(...Gs(r,t.issues)):n.issues.push({origin:"map",code:"invalid_key",input:s,inst:i,issues:t.issues.map(a=>xi(a,o,no()))})),e.issues.length&&(c0.has(typeof r)?n.issues.push(...Gs(r,e.issues)):n.issues.push({origin:"map",code:"invalid_element",input:s,inst:i,key:r,issues:e.issues.map(a=>xi(a,o,no()))})),n.value.set(t.value,e.value)}const jle=ne("$ZodSet",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!(s instanceof Set))return n.issues.push({input:s,inst:t,expected:"set",code:"invalid_type"}),n;const i=[];n.value=new Set;for(const o of s){const a=e.valueType._zod.run({value:o,issues:[]},r);a instanceof Promise?i.push(a.then(c=>kC(c,n))):kC(a,n)}return i.length?Promise.all(i).then(()=>n):n}});function kC(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}const dF=ne("$ZodEnum",(t,e)=>{Ke.init(t,e);const n=E4(e.entries);t._zod.values=new Set(n),t._zod.pattern=new RegExp(`^(${n.filter(r=>c0.has(typeof r)).map(r=>typeof r=="string"?hu(r):r.toString()).join("|")})$`),t._zod.parse=(r,s)=>{const i=r.value;return t._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:t}),r}}),fF=ne("$ZodLiteral",(t,e)=>{Ke.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?hu(n):n?n.toString():String(n)).join("|")})$`),t._zod.parse=(n,r)=>{const s=n.value;return t._zod.values.has(s)||n.issues.push({code:"invalid_value",values:e.values,input:s,inst:t}),n}}),Mle=ne("$ZodFile",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;return s instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:s,inst:t}),n}}),jT=ne("$ZodTransform",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(n.value=o,n));if(s instanceof Promise)throw new Eh;return n.value=s,n}}),hF=ne("$ZodOptional",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",t._zod.optout="optional",kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),kt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${oy(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(n,r):n.value===void 0?n:e.innerType._zod.run(n,r)}),pF=ne("$ZodNullable",(t,e)=>{Ke.init(t,e),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${oy(n.source)}|null)$`):void 0}),kt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),mF=ne("$ZodDefault",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>bC(i,e)):bC(s,e)}});function bC(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const gF=ne("$ZodPrefault",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),yF=ne("$ZodNonOptional",(t,e)=>{Ke.init(t,e),kt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>EC(i,t)):EC(s,t)}});function EC(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const zle=ne("$ZodSuccess",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.issues.length===0,n)):(n.value=s.issues.length===0,n)}}),vF=ne("$ZodCatch",(t,e)=>{Ke.init(t,e),t._zod.optin="optional",kt(t._zod,"optout",()=>e.innerType._zod.optout),kt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(i=>(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>xi(o,r,no()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(i=>xi(i,r,no()))},input:n.value}),n.issues=[]),n)}}),Dle=ne("$ZodNaN",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:t,expected:"nan",code:"invalid_type"}),n)}),MT=ne("$ZodPipe",(t,e)=>{Ke.init(t,e),kt(t._zod,"values",()=>e.in._zod.values),kt(t._zod,"optin",()=>e.in._zod.optin),kt(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(n,r)=>{const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(i=>CC(i,e,r)):CC(s,e,r)}});function CC(t,e,n){return Pc(t)?t:e.out._zod.run({value:t.value,issues:t.issues},n)}const _F=ne("$ZodReadonly",(t,e)=>{Ke.init(t,e),kt(t._zod,"propValues",()=>e.innerType._zod.propValues),kt(t._zod,"values",()=>e.innerType._zod.values),kt(t._zod,"optin",()=>e.innerType._zod.optin),kt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(PC):PC(s)}});function PC(t){return t.value=Object.freeze(t.value),t}const Fle=ne("$ZodTemplateLiteral",(t,e)=>{Ke.init(t,e);const n=[];for(const r of e.parts)if(r instanceof Ke){if(!r._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...r._zod.traits].shift()}`);const s=r._zod.pattern instanceof RegExp?r._zod.pattern.source:r._zod.pattern;if(!s)throw new Error(`Invalid template literal part: ${r._zod.traits}`);const i=s.startsWith("^")?1:0,o=s.endsWith("$")?s.length-1:s.length;n.push(s.slice(i,o))}else if(r===null||O8.has(typeof r))n.push(hu(`${r}`));else throw new Error(`Invalid template literal part: ${r}`);t._zod.pattern=new RegExp(`^${n.join("")}$`),t._zod.parse=(r,s)=>typeof r.value!="string"?(r.issues.push({input:r.value,inst:t,expected:"template_literal",code:"invalid_type"}),r):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:t,code:"invalid_format",format:"template_literal",pattern:t._zod.pattern.source}),r)}),Lle=ne("$ZodPromise",(t,e)=>{Ke.init(t,e),t._zod.parse=(n,r)=>Promise.resolve(n.value).then(s=>e.innerType._zod.run({value:s,issues:[]},r))}),Ule=ne("$ZodLazy",(t,e)=>{Ke.init(t,e),kt(t._zod,"innerType",()=>e.getter()),kt(t._zod,"pattern",()=>t._zod.innerType._zod.pattern),kt(t._zod,"propValues",()=>t._zod.innerType._zod.propValues),kt(t._zod,"optin",()=>t._zod.innerType._zod.optin),kt(t._zod,"optout",()=>t._zod.innerType._zod.optout),t._zod.parse=(n,r)=>t._zod.innerType._zod.run(n,r)}),wF=ne("$ZodCustom",(t,e)=>{xn.init(t,e),Ke.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(i=>$C(i,n,r,t));$C(s,n,r,t)}});function $C(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(Jc(s))}}const Vle=Symbol("ZodOutput"),Gle=Symbol("ZodInput");class zT{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function SF(){return new zT}const kf=SF();function kF(t,e){return new t({type:"string",...de(e)})}function Hle(t,e){return new t({type:"string",coerce:!0,...de(e)})}function bF(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...de(e)})}function TC(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...de(e)})}function EF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...de(e)})}function CF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...de(e)})}function PF(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...de(e)})}function $F(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...de(e)})}function DT(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...de(e)})}function TF(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...de(e)})}function xF(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...de(e)})}function NF(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...de(e)})}function RF(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...de(e)})}function OF(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...de(e)})}function IF(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...de(e)})}function AF(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...de(e)})}function jF(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...de(e)})}function MF(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...de(e)})}function zF(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...de(e)})}function DF(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...de(e)})}function FF(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...de(e)})}function LF(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...de(e)})}function UF(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...de(e)})}function VF(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...de(e)})}const qle={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function GF(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...de(e)})}function HF(t,e){return new t({type:"string",format:"date",check:"string_format",...de(e)})}function qF(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...de(e)})}function BF(t,e){return new t({type:"string",format:"duration",check:"string_format",...de(e)})}function WF(t,e){return new t({type:"number",checks:[],...de(e)})}function ZF(t,e){return new t({type:"number",coerce:!0,checks:[],...de(e)})}function KF(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...de(e)})}function Ble(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...de(e)})}function Wle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...de(e)})}function Zle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...de(e)})}function Kle(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...de(e)})}function QF(t,e){return new t({type:"boolean",...de(e)})}function Qle(t,e){return new t({type:"boolean",coerce:!0,...de(e)})}function Yle(t,e){return new t({type:"bigint",...de(e)})}function Xle(t,e){return new t({type:"bigint",coerce:!0,...de(e)})}function Jle(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...de(e)})}function eue(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...de(e)})}function tue(t,e){return new t({type:"symbol",...de(e)})}function nue(t,e){return new t({type:"undefined",...de(e)})}function YF(t,e){return new t({type:"null",...de(e)})}function XF(t){return new t({type:"any"})}function JF(t){return new t({type:"unknown"})}function eL(t,e){return new t({type:"never",...de(e)})}function rue(t,e){return new t({type:"void",...de(e)})}function sue(t,e){return new t({type:"date",...de(e)})}function iue(t,e){return new t({type:"date",coerce:!0,...de(e)})}function oue(t,e){return new t({type:"nan",...de(e)})}function o2(t,e){return new xT({check:"less_than",...de(e),value:t,inclusive:!1})}function ug(t,e){return new xT({check:"less_than",...de(e),value:t,inclusive:!0})}function a2(t,e){return new NT({check:"greater_than",...de(e),value:t,inclusive:!1})}function cg(t,e){return new NT({check:"greater_than",...de(e),value:t,inclusive:!0})}function aue(t){return a2(0,t)}function lue(t){return o2(0,t)}function uue(t){return ug(0,t)}function cue(t){return cg(0,t)}function xC(t,e){return new uD({check:"multiple_of",...de(e),value:t})}function due(t,e){return new fD({check:"max_size",...de(e),maximum:t})}function fue(t,e){return new hD({check:"min_size",...de(e),minimum:t})}function hue(t,e){return new pD({check:"size_equals",...de(e),size:t})}function FT(t,e){return new mD({check:"max_length",...de(e),maximum:t})}function d0(t,e){return new gD({check:"min_length",...de(e),minimum:t})}function LT(t,e){return new yD({check:"length_equals",...de(e),length:t})}function tL(t,e){return new vD({check:"string_format",format:"regex",...de(e),pattern:t})}function nL(t){return new _D({check:"string_format",format:"lowercase",...de(t)})}function rL(t){return new wD({check:"string_format",format:"uppercase",...de(t)})}function sL(t,e){return new SD({check:"string_format",format:"includes",...de(e),includes:t})}function iL(t,e){return new kD({check:"string_format",format:"starts_with",...de(e),prefix:t})}function oL(t,e){return new bD({check:"string_format",format:"ends_with",...de(e),suffix:t})}function pue(t,e,n){return new ED({check:"property",property:t,schema:e,...de(n)})}function mue(t,e){return new CD({check:"mime_type",mime:t,...de(e)})}function Zh(t){return new PD({check:"overwrite",tx:t})}function aL(t){return Zh(e=>e.normalize(t))}function lL(){return Zh(t=>t.trim())}function uL(){return Zh(t=>t.toLowerCase())}function cL(){return Zh(t=>t.toUpperCase())}function dL(t,e,n){return new t({type:"array",element:e,...de(n)})}function gue(t,e,n){return new t({type:"union",options:e,...de(n)})}function yue(t,e,n,r){return new t({type:"union",options:n,discriminator:e,...de(r)})}function vue(t,e,n){return new t({type:"intersection",left:e,right:n})}function _ue(t,e,n,r){const s=n instanceof Ke,i=s?r:n,o=s?n:null;return new t({type:"tuple",items:e,rest:o,...de(i)})}function wue(t,e,n,r){return new t({type:"record",keyType:e,valueType:n,...de(r)})}function Sue(t,e,n,r){return new t({type:"map",keyType:e,valueType:n,...de(r)})}function kue(t,e,n){return new t({type:"set",valueType:e,...de(n)})}function bue(t,e,n){const r=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new t({type:"enum",entries:r,...de(n)})}function Eue(t,e,n){return new t({type:"enum",entries:e,...de(n)})}function Cue(t,e,n){return new t({type:"literal",values:Array.isArray(e)?e:[e],...de(n)})}function Pue(t,e){return new t({type:"file",...de(e)})}function $ue(t,e){return new t({type:"transform",transform:e})}function Tue(t,e){return new t({type:"optional",innerType:e})}function xue(t,e){return new t({type:"nullable",innerType:e})}function Nue(t,e,n){return new t({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():n}})}function Rue(t,e,n){return new t({type:"nonoptional",innerType:e,...de(n)})}function Oue(t,e){return new t({type:"success",innerType:e})}function Iue(t,e,n){return new t({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}function Aue(t,e,n){return new t({type:"pipe",in:e,out:n})}function jue(t,e){return new t({type:"readonly",innerType:e})}function Mue(t,e,n){return new t({type:"template_literal",parts:e,...de(n)})}function zue(t,e){return new t({type:"lazy",getter:e})}function Due(t,e){return new t({type:"promise",innerType:e})}function fL(t,e,n){const r=de(n);return r.abort??(r.abort=!0),new t({type:"custom",check:"custom",fn:e,...r})}function hL(t,e,n){return new t({type:"custom",check:"custom",fn:e,...de(n)})}function Fue(t,e){const n=de(e);let r=n.truthy??["true","1","yes","on","y","enabled"],s=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(r=r.map(_=>typeof _=="string"?_.toLowerCase():_),s=s.map(_=>typeof _=="string"?_.toLowerCase():_));const i=new Set(r),o=new Set(s),a=t.Pipe??MT,c=t.Boolean??IT,d=t.String??dy,f=t.Transform??jT,m=new f({type:"transform",transform:(_,E)=>{let k=_;return n.case!=="sensitive"&&(k=k.toLowerCase()),i.has(k)?!0:o.has(k)?!1:(E.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...o],input:E.value,inst:m}),{})},error:n.error}),y=new a({type:"pipe",in:new d({type:"string",error:n.error}),out:m,error:n.error});return new a({type:"pipe",in:y,out:new c({type:"boolean",error:n.error}),error:n.error})}function Lue(t,e,n,r={}){const s=de(r),i={...de(r),check:"string_format",type:"string",format:e,fn:typeof n=="function"?n:a=>n.test(a),...s};return n instanceof RegExp&&(i.pattern=n),new t(i)}class NC{constructor(e){this.counter=0,this.metadataRegistry=(e==null?void 0:e.metadata)??kf,this.target=(e==null?void 0:e.target)??"draft-2020-12",this.unrepresentable=(e==null?void 0:e.unrepresentable)??"throw",this.override=(e==null?void 0:e.override)??(()=>{}),this.io=(e==null?void 0:e.io)??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var m,y,v;var r;const s=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o)return o.count++,n.schemaPath.includes(e)&&(o.cycle=n.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,a);const c=(y=(m=e._zod).toJSONSchema)==null?void 0:y.call(m);if(c)a.schema=c;else{const _={...n,schemaPath:[...n.schemaPath,e],path:n.path},E=e._zod.parent;if(E)a.ref=E,this.process(E,_),this.seen.get(E).isParent=!0;else{const k=a.schema;switch(s.type){case"string":{const p=k;p.type="string";const{minimum:w,maximum:g,format:C,patterns:$,contentEncoding:N}=e._zod.bag;if(typeof w=="number"&&(p.minLength=w),typeof g=="number"&&(p.maxLength=g),C&&(p.format=i[C]??C,p.format===""&&delete p.format),N&&(p.contentEncoding=N),$&&$.size>0){const M=[...$];M.length===1?p.pattern=M[0].source:M.length>1&&(a.schema.allOf=[...M.map(A=>({...this.target==="draft-7"?{type:"string"}:{},pattern:A.source}))])}break}case"number":{const p=k,{minimum:w,maximum:g,format:C,multipleOf:$,exclusiveMaximum:N,exclusiveMinimum:M}=e._zod.bag;typeof C=="string"&&C.includes("int")?p.type="integer":p.type="number",typeof M=="number"&&(p.exclusiveMinimum=M),typeof w=="number"&&(p.minimum=w,typeof M=="number"&&(M>=w?delete p.minimum:delete p.exclusiveMinimum)),typeof N=="number"&&(p.exclusiveMaximum=N),typeof g=="number"&&(p.maximum=g,typeof N=="number"&&(N<=g?delete p.maximum:delete p.exclusiveMaximum)),typeof $=="number"&&(p.multipleOf=$);break}case"boolean":{const p=k;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{k.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{k.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=k,{minimum:w,maximum:g}=e._zod.bag;typeof w=="number"&&(p.minItems=w),typeof g=="number"&&(p.maxItems=g),p.type="array",p.items=this.process(s.element,{..._,path:[..._.path,"items"]});break}case"object":{const p=k;p.type="object",p.properties={};const w=s.shape;for(const $ in w)p.properties[$]=this.process(w[$],{..._,path:[..._.path,"properties",$]});const g=new Set(Object.keys(w)),C=new Set([...g].filter($=>{const N=s.shape[$]._zod;return this.io==="input"?N.optin===void 0:N.optout===void 0}));C.size>0&&(p.required=Array.from(C)),((v=s.catchall)==null?void 0:v._zod.def.type)==="never"?p.additionalProperties=!1:s.catchall?s.catchall&&(p.additionalProperties=this.process(s.catchall,{..._,path:[..._.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=k;p.anyOf=s.options.map((w,g)=>this.process(w,{..._,path:[..._.path,"anyOf",g]}));break}case"intersection":{const p=k,w=this.process(s.left,{..._,path:[..._.path,"allOf",0]}),g=this.process(s.right,{..._,path:[..._.path,"allOf",1]}),C=N=>"allOf"in N&&Object.keys(N).length===1,$=[...C(w)?w.allOf:[w],...C(g)?g.allOf:[g]];p.allOf=$;break}case"tuple":{const p=k;p.type="array";const w=s.items.map(($,N)=>this.process($,{..._,path:[..._.path,"prefixItems",N]}));if(this.target==="draft-2020-12"?p.prefixItems=w:p.items=w,s.rest){const $=this.process(s.rest,{..._,path:[..._.path,"items"]});this.target==="draft-2020-12"?p.items=$:p.additionalItems=$}s.rest&&(p.items=this.process(s.rest,{..._,path:[..._.path,"items"]}));const{minimum:g,maximum:C}=e._zod.bag;typeof g=="number"&&(p.minItems=g),typeof C=="number"&&(p.maxItems=C);break}case"record":{const p=k;p.type="object",p.propertyNames=this.process(s.keyType,{..._,path:[..._.path,"propertyNames"]}),p.additionalProperties=this.process(s.valueType,{..._,path:[..._.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=k,w=E4(s.entries);w.every(g=>typeof g=="number")&&(p.type="number"),w.every(g=>typeof g=="string")&&(p.type="string"),p.enum=w;break}case"literal":{const p=k,w=[];for(const g of s.values)if(g===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof g=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");w.push(Number(g))}else w.push(g);if(w.length!==0)if(w.length===1){const g=w[0];p.type=g===null?"null":typeof g,p.const=g}else w.every(g=>typeof g=="number")&&(p.type="number"),w.every(g=>typeof g=="string")&&(p.type="string"),w.every(g=>typeof g=="boolean")&&(p.type="string"),w.every(g=>g===null)&&(p.type="null"),p.enum=w;break}case"file":{const p=k,w={type:"string",format:"binary",contentEncoding:"binary"},{minimum:g,maximum:C,mime:$}=e._zod.bag;g!==void 0&&(w.minLength=g),C!==void 0&&(w.maxLength=C),$?$.length===1?(w.contentMediaType=$[0],Object.assign(p,w)):p.anyOf=$.map(N=>({...w,contentMediaType:N})):Object.assign(p,w);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(s.innerType,_);k.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,_),a.ref=s.innerType;break}case"success":{const p=k;p.type="boolean";break}case"default":{this.process(s.innerType,_),a.ref=s.innerType,k.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,_),a.ref=s.innerType,this.io==="input"&&(k._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,_),a.ref=s.innerType;let p;try{p=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}k.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=k,w=e._zod.pattern;if(!w)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=w.source;break}case"pipe":{const p=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(p,_),a.ref=p;break}case"readonly":{this.process(s.innerType,_),a.ref=s.innerType,k.readOnly=!0;break}case"promise":{this.process(s.innerType,_),a.ref=s.innerType;break}case"optional":{this.process(s.innerType,_),a.ref=s.innerType;break}case"lazy":{const p=e._zod.innerType;this.process(p,_),a.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const d=this.metadataRegistry.get(e);return d&&Object.assign(a.schema,d),this.io==="input"&&jn(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,n){var f,m,y,v,_,E;const r={cycles:(n==null?void 0:n.cycles)??"ref",reused:(n==null?void 0:n.reused)??"inline",external:(n==null?void 0:n.external)??void 0},s=this.seen.get(e);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=k=>{var $;const p=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){const N=($=r.external.registry.get(k[0]))==null?void 0:$.id,M=r.external.uri??(q=>q);if(N)return{ref:M(N)};const A=k[1].defId??k[1].schema.id??`schema${this.counter++}`;return k[1].defId=A,{defId:A,ref:`${M("__shared")}#/${p}/${A}`}}if(k[1]===s)return{ref:"#"};const g=`#/${p}/`,C=k[1].schema.id??`__schema${this.counter++}`;return{defId:C,ref:g+C}},o=k=>{if(k[1].schema.$ref)return;const p=k[1],{ref:w,defId:g}=i(k);p.def={...p.schema},g&&(p.defId=g);const C=p.schema;for(const $ in C)delete C[$];C.$ref=w};if(r.cycles==="throw")for(const k of this.seen.entries()){const p=k[1];if(p.cycle)throw new Error(`Cycle detected: #/${(f=p.cycle)==null?void 0:f.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const k of this.seen.entries()){const p=k[1];if(e===k[0]){o(k);continue}if(r.external){const g=(m=r.external.registry.get(k[0]))==null?void 0:m.id;if(e!==k[0]&&g){o(k);continue}}if((y=this.metadataRegistry.get(k[0]))==null?void 0:y.id){o(k);continue}if(p.cycle){o(k);continue}if(p.count>1&&r.reused==="ref"){o(k);continue}}const a=(k,p)=>{const w=this.seen.get(k),g=w.def??w.schema,C={...g};if(w.ref===null)return;const $=w.ref;if(w.ref=null,$){a($,p);const N=this.seen.get($).schema;N.$ref&&p.target==="draft-7"?(g.allOf=g.allOf??[],g.allOf.push(N)):(Object.assign(g,N),Object.assign(g,C))}w.isParent||this.override({zodSchema:k,jsonSchema:g,path:w.path??[]})};for(const k of[...this.seen.entries()].reverse())a(k[0],{target:this.target});const c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),(v=r.external)!=null&&v.uri){const k=(_=r.external.registry.get(e))==null?void 0:_.id;if(!k)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(k)}Object.assign(c,s.def);const d=((E=r.external)==null?void 0:E.defs)??{};for(const k of this.seen.entries()){const p=k[1];p.def&&p.defId&&(d[p.defId]=p.def)}r.external||Object.keys(d).length>0&&(this.target==="draft-2020-12"?c.$defs=d:c.definitions=d);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}}function pL(t,e){if(t instanceof zT){const r=new NC(e),s={};for(const a of t._idmap.entries()){const[c,d]=a;r.process(d)}const i={},o={registry:t,uri:e==null?void 0:e.uri,defs:s};for(const a of t._idmap.entries()){const[c,d]=a;i[c]=r.emit(d,{...e,external:o})}if(Object.keys(s).length>0){const a=r.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[a]:s}}return{schemas:i}}const n=new NC(e);return n.process(t),n.emit(t,e)}function jn(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const s=t._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return jn(s.element,n);case"object":{for(const i in s.shape)if(jn(s.shape[i],n))return!0;return!1}case"union":{for(const i of s.options)if(jn(i,n))return!0;return!1}case"intersection":return jn(s.left,n)||jn(s.right,n);case"tuple":{for(const i of s.items)if(jn(i,n))return!0;return!!(s.rest&&jn(s.rest,n))}case"record":return jn(s.keyType,n)||jn(s.valueType,n);case"map":return jn(s.keyType,n)||jn(s.valueType,n);case"set":return jn(s.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return jn(s.innerType,n);case"lazy":return jn(s.getter(),n);case"default":return jn(s.innerType,n);case"prefault":return jn(s.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return jn(s.in,n)||jn(s.out,n);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}const mL=ne("ZodISODateTime",(t,e)=>{LD.init(t,e),cn.init(t,e)});function UT(t){return GF(mL,t)}const gL=ne("ZodISODate",(t,e)=>{UD.init(t,e),cn.init(t,e)});function yL(t){return HF(gL,t)}const vL=ne("ZodISOTime",(t,e)=>{VD.init(t,e),cn.init(t,e)});function _L(t){return qF(vL,t)}const wL=ne("ZodISODuration",(t,e)=>{GD.init(t,e),cn.init(t,e)});function SL(t){return BF(wL,t)}const kL=(t,e)=>{H8.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>Yz(t,n)},flatten:{value:n=>Qz(t,n)},addIssue:{value:n=>t.issues.push(n)},addIssues:{value:n=>t.issues.push(...n)},isEmpty:{get(){return t.issues.length===0}}})},fy=ne("ZodError",kL,{Parent:Error}),bL=q8(fy),EL=B8(fy),CL=W8(fy),PL=K8(fy),tn=ne("ZodType",(t,e)=>(Ke.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),t.clone=(n,r)=>Ya(t,n,r),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t),t.parse=(n,r)=>bL(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>CL(t,n,r),t.parseAsync=async(n,r)=>EL(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>PL(t,n,r),t.spa=t.safeParseAsync,t.refine=(n,r)=>t.check(vU(n,r)),t.superRefine=n=>t.check(_U(n)),t.overwrite=n=>t.check(Zh(n)),t.optional=()=>gn(t),t.nullable=()=>IC(t),t.nullish=()=>gn(IC(t)),t.nonoptional=n=>cU(t,n),t.array=()=>ye(t),t.or=n=>Rt([t,n]),t.and=n=>T4(t,n),t.transform=n=>u2(t,ZT(n)),t.default=n=>aU(t,n),t.prefault=n=>uU(t,n),t.catch=n=>fU(t,n),t.pipe=n=>u2(t,n),t.readonly=()=>mU(t),t.describe=n=>{const r=t.clone();return kf.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=kf.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return kf.get(t);const r=t.clone();return kf.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),VT=ne("_ZodString",(t,e)=>{dy.init(t,e),tn.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(tL(...r)),t.includes=(...r)=>t.check(sL(...r)),t.startsWith=(...r)=>t.check(iL(...r)),t.endsWith=(...r)=>t.check(oL(...r)),t.min=(...r)=>t.check(d0(...r)),t.max=(...r)=>t.check(FT(...r)),t.length=(...r)=>t.check(LT(...r)),t.nonempty=(...r)=>t.check(d0(1,...r)),t.lowercase=r=>t.check(nL(r)),t.uppercase=r=>t.check(rL(r)),t.trim=()=>t.check(lL()),t.normalize=(...r)=>t.check(aL(...r)),t.toLowerCase=()=>t.check(uL()),t.toUpperCase=()=>t.check(cL())}),$L=ne("ZodString",(t,e)=>{dy.init(t,e),VT.init(t,e),t.email=n=>t.check(bF(TL,n)),t.url=n=>t.check(DT(GT,n)),t.jwt=n=>t.check(VF(HL,n)),t.emoji=n=>t.check(TF(NL,n)),t.guid=n=>t.check(TC(RC,n)),t.uuid=n=>t.check(EF(Tm,n)),t.uuidv4=n=>t.check(CF(Tm,n)),t.uuidv6=n=>t.check(PF(Tm,n)),t.uuidv7=n=>t.check($F(Tm,n)),t.nanoid=n=>t.check(xF(RL,n)),t.guid=n=>t.check(TC(RC,n)),t.cuid=n=>t.check(NF(OL,n)),t.cuid2=n=>t.check(RF(IL,n)),t.ulid=n=>t.check(OF(AL,n)),t.base64=n=>t.check(FF(UL,n)),t.base64url=n=>t.check(LF(VL,n)),t.xid=n=>t.check(IF(jL,n)),t.ksuid=n=>t.check(AF(ML,n)),t.ipv4=n=>t.check(jF(zL,n)),t.ipv6=n=>t.check(MF(DL,n)),t.cidrv4=n=>t.check(zF(FL,n)),t.cidrv6=n=>t.check(DF(LL,n)),t.e164=n=>t.check(UF(GL,n)),t.datetime=n=>t.check(UT(n)),t.date=n=>t.check(yL(n)),t.time=n=>t.check(_L(n)),t.duration=n=>t.check(SL(n))});function K(t){return kF($L,t)}const cn=ne("ZodStringFormat",(t,e)=>{Kt.init(t,e),VT.init(t,e)}),TL=ne("ZodEmail",(t,e)=>{RD.init(t,e),cn.init(t,e)}),RC=ne("ZodGUID",(t,e)=>{xD.init(t,e),cn.init(t,e)}),Tm=ne("ZodUUID",(t,e)=>{ND.init(t,e),cn.init(t,e)}),GT=ne("ZodURL",(t,e)=>{OD.init(t,e),cn.init(t,e)});function xL(t){return DT(GT,t)}const NL=ne("ZodEmoji",(t,e)=>{ID.init(t,e),cn.init(t,e)}),RL=ne("ZodNanoID",(t,e)=>{AD.init(t,e),cn.init(t,e)}),OL=ne("ZodCUID",(t,e)=>{jD.init(t,e),cn.init(t,e)}),IL=ne("ZodCUID2",(t,e)=>{MD.init(t,e),cn.init(t,e)}),AL=ne("ZodULID",(t,e)=>{zD.init(t,e),cn.init(t,e)}),jL=ne("ZodXID",(t,e)=>{DD.init(t,e),cn.init(t,e)}),ML=ne("ZodKSUID",(t,e)=>{FD.init(t,e),cn.init(t,e)}),zL=ne("ZodIPv4",(t,e)=>{HD.init(t,e),cn.init(t,e)}),DL=ne("ZodIPv6",(t,e)=>{qD.init(t,e),cn.init(t,e)}),FL=ne("ZodCIDRv4",(t,e)=>{BD.init(t,e),cn.init(t,e)}),LL=ne("ZodCIDRv6",(t,e)=>{WD.init(t,e),cn.init(t,e)}),UL=ne("ZodBase64",(t,e)=>{ZD.init(t,e),cn.init(t,e)}),VL=ne("ZodBase64URL",(t,e)=>{QD.init(t,e),cn.init(t,e)}),GL=ne("ZodE164",(t,e)=>{YD.init(t,e),cn.init(t,e)}),HL=ne("ZodJWT",(t,e)=>{JD.init(t,e),cn.init(t,e)}),$4=ne("ZodNumber",(t,e)=>{OT.init(t,e),tn.init(t,e),t.gt=(r,s)=>t.check(a2(r,s)),t.gte=(r,s)=>t.check(cg(r,s)),t.min=(r,s)=>t.check(cg(r,s)),t.lt=(r,s)=>t.check(o2(r,s)),t.lte=(r,s)=>t.check(ug(r,s)),t.max=(r,s)=>t.check(ug(r,s)),t.int=r=>t.check(OC(r)),t.safe=r=>t.check(OC(r)),t.positive=r=>t.check(a2(0,r)),t.nonnegative=r=>t.check(cg(0,r)),t.negative=r=>t.check(o2(0,r)),t.nonpositive=r=>t.check(ug(0,r)),t.multipleOf=(r,s)=>t.check(xC(r,s)),t.step=(r,s)=>t.check(xC(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Pt(t){return WF($4,t)}const qL=ne("ZodNumberFormat",(t,e)=>{eF.init(t,e),$4.init(t,e)});function OC(t){return KF(qL,t)}const BL=ne("ZodBoolean",(t,e)=>{IT.init(t,e),tn.init(t,e)});function Ut(t){return QF(BL,t)}const WL=ne("ZodNull",(t,e)=>{nF.init(t,e),tn.init(t,e)});function HT(t){return YF(WL,t)}const ZL=ne("ZodAny",(t,e)=>{rF.init(t,e),tn.init(t,e)});function KL(){return XF(ZL)}const QL=ne("ZodUnknown",(t,e)=>{sF.init(t,e),tn.init(t,e)});function xt(){return JF(QL)}const YL=ne("ZodNever",(t,e)=>{iF.init(t,e),tn.init(t,e)});function XL(t){return eL(YL,t)}const JL=ne("ZodArray",(t,e)=>{oF.init(t,e),tn.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(d0(n,r)),t.nonempty=n=>t.check(d0(1,n)),t.max=(n,r)=>t.check(FT(n,r)),t.length=(n,r)=>t.check(LT(n,r)),t.unwrap=()=>t.element});function ye(t,e){return dL(JL,t,e)}const qT=ne("ZodObject",(t,e)=>{aF.init(t,e),tn.init(t,e),kt(t,"shape",()=>e.shape),t.keyof=()=>Ss(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:xt()}),t.loose=()=>t.clone({...t._zod.def,catchall:xt()}),t.strict=()=>t.clone({...t._zod.def,catchall:XL()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>F8(t,n),t.merge=n=>L8(t,n),t.pick=n=>z8(t,n),t.omit=n=>D8(t,n),t.partial=(...n)=>U8(KT,t,n[0]),t.required=(...n)=>V8(QT,t,n[0])});function _e(t,e){const n={type:"object",get shape(){return Wh(this,"shape",{...t}),this.shape},...de(e)};return new qT(n)}function Qn(t,e){return new qT({type:"object",get shape(){return Wh(this,"shape",{...t}),this.shape},catchall:xt(),...de(e)})}const BT=ne("ZodUnion",(t,e)=>{AT.init(t,e),tn.init(t,e),t.options=e.options});function Rt(t,e){return new BT({type:"union",options:t,...de(e)})}const eU=ne("ZodDiscriminatedUnion",(t,e)=>{BT.init(t,e),lF.init(t,e)});function WT(t,e,n){return new eU({type:"union",options:e,discriminator:t,...de(n)})}const tU=ne("ZodIntersection",(t,e)=>{uF.init(t,e),tn.init(t,e)});function T4(t,e){return new tU({type:"intersection",left:t,right:e})}const nU=ne("ZodRecord",(t,e)=>{cF.init(t,e),tn.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function en(t,e,n){return new nU({type:"record",keyType:t,valueType:e,...de(n)})}const l2=ne("ZodEnum",(t,e)=>{dF.init(t,e),tn.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const i={};for(const o of r)if(n.has(o))i[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new l2({...e,checks:[],...de(s),entries:i})},t.exclude=(r,s)=>{const i={...e.entries};for(const o of r)if(n.has(o))delete i[o];else throw new Error(`Key ${o} not found in enum`);return new l2({...e,checks:[],...de(s),entries:i})}});function Ss(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new l2({type:"enum",entries:n,...de(e)})}const rU=ne("ZodLiteral",(t,e)=>{fF.init(t,e),tn.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function ke(t,e){return new rU({type:"literal",values:Array.isArray(t)?t:[t],...de(e)})}const sU=ne("ZodTransform",(t,e)=>{jT.init(t,e),tn.init(t,e),t._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(Jc(i,n.value,e));else{const o=i;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!0),n.issues.push(Jc(o))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(i=>(n.value=i,n)):(n.value=s,n)}});function ZT(t){return new sU({type:"transform",transform:t})}const KT=ne("ZodOptional",(t,e)=>{hF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function gn(t){return new KT({type:"optional",innerType:t})}const iU=ne("ZodNullable",(t,e)=>{pF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function IC(t){return new iU({type:"nullable",innerType:t})}const oU=ne("ZodDefault",(t,e)=>{mF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function aU(t,e){return new oU({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const lU=ne("ZodPrefault",(t,e)=>{gF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function uU(t,e){return new lU({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const QT=ne("ZodNonOptional",(t,e)=>{yF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function cU(t,e){return new QT({type:"nonoptional",innerType:t,...de(e)})}const dU=ne("ZodCatch",(t,e)=>{vF.init(t,e),tn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function fU(t,e){return new dU({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const hU=ne("ZodPipe",(t,e)=>{MT.init(t,e),tn.init(t,e),t.in=e.in,t.out=e.out});function u2(t,e){return new hU({type:"pipe",in:t,out:e})}const pU=ne("ZodReadonly",(t,e)=>{_F.init(t,e),tn.init(t,e)});function mU(t){return new pU({type:"readonly",innerType:t})}const YT=ne("ZodCustom",(t,e)=>{wF.init(t,e),tn.init(t,e)});function gU(t){const e=new xn({check:"custom"});return e._zod.check=t,e}function yU(t,e){return fL(YT,t??(()=>!0),e)}function vU(t,e={}){return hL(YT,t,e)}function _U(t){const e=gU(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Jc(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(Jc(s))}},t(n.value,n)));return e}function XT(t,e){return u2(ZT(t),e)}const wU={custom:"custom"};function SU(t){return ZF($4,t)}const kU=Rt([ke("object"),ke("array"),ke("string"),ke("number"),ke("integer"),ke("boolean"),ke("null"),ye(Rt([ke("object"),ke("array"),ke("string"),ke("number"),ke("integer"),ke("boolean"),ke("null")]))]),bU=Qn({type:kU.optional(),properties:en(K(),xt()).optional(),items:Rt([ye(xt()),xt()]).optional(),required:ye(K()).optional(),additionalProperties:Rt([Ut(),xt()]).optional(),enum:ye(xt()).optional(),const:xt().optional(),$ref:K().optional(),$id:K().optional(),$schema:K().optional(),title:K().optional(),description:K().optional()}).refine(t=>t.type!==void 0||t.properties!==void 0||t.items!==void 0||t.enum!==void 0||t.const!==void 0||t.$ref!==void 0);function x4(t){return t===null||typeof t!="object"?!1:bU.safeParse(t).success}function AC(t){const{required:e,...n}=t;return n}const EU="modulepreload",CU=function(t){return"/"+t},jC={},Fu=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=CU(c),c in jC)return;jC[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":EU,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},JT=Symbol.for("quansync.getIsAsync");class ex extends Error{constructor(e="Unexpected promise in sync context"){super(e),this.name="QuansyncError"}}function N4(t){return t&&typeof t=="object"&&typeof t.then=="function"}function PU(t){return t&&typeof t=="object"&&typeof t[Symbol.iterator]=="function"&&"__quansync"in t}function R4(t){const e=function*(...r){return(yield JT)?yield t.async.apply(this,r):t.sync.apply(this,r)};function n(...r){const s=e.apply(this,r);return s.then=(...i)=>t.async.apply(this,r).then(...i),s.__quansync=!0,s}return n.sync=t.sync,n.async=t.async,n}function $U(t){return R4({async:()=>Promise.resolve(t),sync:()=>{if(N4(t))throw new ex;return t}})}function c2(t,e){if(t===JT)return e;if(PU(t))return e?rx(t):nx(t);if(!e&&N4(t))throw new ex;return t}const tx=t=>t;function nx(t,e=tx){let n=t.next();for(;!n.done;)try{n=t.next(c2(e(n.value,!1)))}catch(r){n=t.throw(r)}return c2(n.value)}async function rx(t,e=tx){let n=t.next();for(;!n.done;)try{n=t.next(await c2(e(n.value,!0),!0))}catch(r){n=t.throw(r)}return n.value}function TU(t,e){return R4({name:t.name,async(...n){return rx(t.apply(this,n),e==null?void 0:e.onYield)},sync(...n){return nx(t.apply(this,n),e==null?void 0:e.onYield)}})}function sx(t,e){return N4(t)?$U(t):typeof t=="function"?TU(t,e):R4(t)}sx({async:()=>Promise.resolve(!0),sync:()=>!1});const f0=new Map;class ix extends Error{constructor(e){super(`standard-json: Unsupported schema vendor "${e}".`)}}class Uue extends Error{constructor(e){super(`standard-json: Missing dependencies "${e}".`)}}const xU=async t=>{const e=f0.get(t);if(e)return e;let n;switch(t){case"arktype":n=(await Fu(async()=>{const{default:s}=await import("./arktype-aI7TBD0R-Dg-cTJfT.js");return{default:s}},[])).default();break;case"effect":n=(await Fu(async()=>{const{default:s}=await import("./effect-QlVUlMFu-D1fPJQl5.js");return{default:s}},[])).default();break;case"sury":n=(await Fu(async()=>{const{default:s}=await import("./sury-CWZTCd75-9LCX0W6g.js");return{default:s}},[])).default();break;case"typebox":n=(await Fu(async()=>{const{default:s}=await import("./typebox-Dei93FPO-DVTFrS1_.js");return{default:s}},[])).default();break;case"valibot":n=(await Fu(async()=>{const{default:s}=await import("./valibot--1zFm7rT-BLErfmGp.js");return{default:s}},[])).default();break;case"zod":n=(await Fu(async()=>{const{default:s}=await import("./zod-Bwrt9trS-Ck9k7WIo.js");return{default:s}},[])).default();break;default:throw new ix(t)}const r=await n;return f0.set(t,r),r},NU=sx({sync:(t,e)=>{const n=t["~standard"].vendor,r=f0.get(n);if(!r)throw new ix(n);return r(t,e)},async:async(t,e)=>(await xU(t["~standard"].vendor))(t,e)});function RU(t,e){f0.set(t,e)}const OU=Symbol("Let zodToJsonSchema decide on which parser to use"),Vue=(t,e)=>{if(e.description)try{return{...t,...JSON.parse(e.description)}}catch{}return t},MC={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},IU=t=>typeof t=="string"?{...MC,name:t}:{...MC,...t},AU=t=>{const e=IU(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function ox(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Tt(t,e,n,r,s){t[e]=n,ox(t,e,r,s)}const ax=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")};function is(t){if(t.target!=="openAi")return{};const e=[...t.basePath,t.definitionPath,t.openAiAnyTypeName];return t.flags.hasReferencedOpenAiAnyType=!0,{$ref:t.$refStrategy==="relative"?ax(e,t.currentPath):e.join("/")}}function jU(t,e){var r,s,i;const n={type:"array"};return(r=t.type)!=null&&r._def&&((i=(s=t.type)==null?void 0:s._def)==null?void 0:i.typeName)!==me.ZodAny&&(n.items=bt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Tt(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Tt(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Tt(n,"minItems",t.exactLength.value,t.exactLength.message,e),Tt(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function MU(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function zU(){return{type:"boolean"}}function lx(t,e){return bt(t.type._def,e)}const DU=(t,e)=>bt(t.innerType._def,e);function ux(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>ux(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return FU(t,e)}}const FU=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Tt(n,"minimum",r.value,r.message,e);break;case"max":Tt(n,"maximum",r.value,r.message,e);break}return n};function LU(t,e){return{...bt(t.innerType._def,e),default:t.defaultValue()}}function UU(t,e){return e.effectStrategy==="input"?bt(t.schema._def,e):is(e)}function VU(t){return{type:"string",enum:Array.from(t.values)}}const GU=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function HU(t,e){const n=[bt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),bt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(GU(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...c}=i;o=c}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function qU(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let w1;const ii={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(w1===void 0&&(w1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),w1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function cx(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":oi(n,"email",r.message,e);break;case"format:idn-email":oi(n,"idn-email",r.message,e);break;case"pattern:zod":Tr(n,ii.email,r.message,e);break}break;case"url":oi(n,"uri",r.message,e);break;case"uuid":oi(n,"uuid",r.message,e);break;case"regex":Tr(n,r.regex,r.message,e);break;case"cuid":Tr(n,ii.cuid,r.message,e);break;case"cuid2":Tr(n,ii.cuid2,r.message,e);break;case"startsWith":Tr(n,RegExp(`^${S1(r.value,e)}`),r.message,e);break;case"endsWith":Tr(n,RegExp(`${S1(r.value,e)}$`),r.message,e);break;case"datetime":oi(n,"date-time",r.message,e);break;case"date":oi(n,"date",r.message,e);break;case"time":oi(n,"time",r.message,e);break;case"duration":oi(n,"duration",r.message,e);break;case"length":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{Tr(n,RegExp(S1(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&oi(n,"ipv4",r.message,e),r.version!=="v4"&&oi(n,"ipv6",r.message,e);break}case"base64url":Tr(n,ii.base64url,r.message,e);break;case"jwt":Tr(n,ii.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Tr(n,ii.ipv4Cidr,r.message,e),r.version!=="v4"&&Tr(n,ii.ipv6Cidr,r.message,e);break}case"emoji":Tr(n,ii.emoji(),r.message,e);break;case"ulid":{Tr(n,ii.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{oi(n,"binary",r.message,e);break}case"contentEncoding:base64":{Tt(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Tr(n,ii.base64,r.message,e);break}}break}case"nanoid":Tr(n,ii.nanoid,r.message,e)}return n}function S1(t,e){return e.patternStrategy==="escape"?WU(t):t}const BU=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function WU(t){let e="";for(let n=0;n<t.length;n++)BU.has(t[n])||(e+="\\"),e+=t[n];return e}function oi(t,e,n,r){var s;t.format||(s=t.anyOf)!=null&&s.some(i=>i.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Tt(t,"format",e,n,r)}function Tr(t,e,n,r){var s;t.pattern||(s=t.allOf)!=null&&s.some(i=>i.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:zC(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Tt(t,"pattern",zC(e,r),n,r)}function zC(t,e){var c;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,o=!1,a=!1;for(let d=0;d<r.length;d++){if(i){s+=r[d],i=!1;continue}if(n.i){if(o){if(r[d].match(/[a-z]/)){a?(s+=r[d],s+=`${r[d-2]}-${r[d]}`.toUpperCase(),a=!1):r[d+1]==="-"&&((c=r[d+2])!=null&&c.match(/[a-z]/))?(s+=r[d],a=!0):s+=`${r[d]}${r[d].toUpperCase()}`;continue}}else if(r[d].match(/[a-z]/)){s+=`[${r[d]}${r[d].toUpperCase()}]`;continue}}if(n.m){if(r[d]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[d]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[d]==="."){s+=o?`${r[d]}\r
`:`[${r[d]}\r
]`;continue}s+=r[d],r[d]==="\\"?i=!0:o&&r[d]==="]"?o=!1:!o&&r[d]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function dx(t,e){var r,s,i,o,a,c;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===me.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((d,f)=>({...d,[f]:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]})??is(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};const n={type:"object",additionalProperties:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return n;if(((s=t.keyType)==null?void 0:s._def.typeName)===me.ZodString&&((i=t.keyType._def.checks)!=null&&i.length)){const{type:d,...f}=cx(t.keyType._def,e);return{...n,propertyNames:f}}else{if(((o=t.keyType)==null?void 0:o._def.typeName)===me.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===me.ZodBranded&&t.keyType._def.type._def.typeName===me.ZodString&&((c=t.keyType._def.type._def.checks)!=null&&c.length)){const{type:d,...f}=lx(t.keyType._def,e);return{...n,propertyNames:f}}}return n}function ZU(t,e){if(e.mapStrategy==="record")return dx(t,e);const n=bt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||is(e),r=bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||is(e);return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function KU(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function QU(t){return t.target==="openAi"?void 0:{not:is({...t,currentPath:[...t.currentPath,"not"]})}}function YU(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const h0={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function XU(t,e){if(e.target==="openApi3")return DC(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in h0&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const o=h0[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return DC(t,e)}const DC=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>bt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function JU(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:h0[t.innerType._def.typeName],nullable:!0}:{type:[h0[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=bt(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function eV(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",ox(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function tV(t,e){const n=e.target==="openAi",r={type:"object",properties:{}},s=[],i=t.shape();for(const a in i){let c=i[a];if(c===void 0||c._def===void 0)continue;let d=rV(c);d&&n&&(c._def.typeName==="ZodOptional"&&(c=c._def.innerType),c.isNullable()||(c=c.nullable()),d=!1);const f=bt(c._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});f!==void 0&&(r.properties[a]=f,d||s.push(a))}s.length&&(r.required=s);const o=nV(t,e);return o!==void 0&&(r.additionalProperties=o),r}function nV(t,e){if(t.catchall._def.typeName!=="ZodNever")return bt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function rV(t){try{return t.isOptional()}catch{return!0}}const sV=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return bt(t.innerType._def,e);const n=bt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:is(e)},n]}:is(e)},iV=(t,e)=>{if(e.pipeStrategy==="input")return bt(t.in._def,e);if(e.pipeStrategy==="output")return bt(t.out._def,e);const n=bt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=bt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function oV(t,e){return bt(t.type._def,e)}function aV(t,e){const r={type:"array",uniqueItems:!0,items:bt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Tt(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Tt(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function lV(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>bt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:bt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>bt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function uV(t){return{not:is(t)}}function cV(t){return is(t)}const dV=(t,e)=>bt(t.innerType._def,e),fV=(t,e,n)=>{switch(e){case me.ZodString:return cx(t,n);case me.ZodNumber:return eV(t,n);case me.ZodObject:return tV(t,n);case me.ZodBigInt:return MU(t,n);case me.ZodBoolean:return zU();case me.ZodDate:return ux(t,n);case me.ZodUndefined:return uV(n);case me.ZodNull:return YU(n);case me.ZodArray:return jU(t,n);case me.ZodUnion:case me.ZodDiscriminatedUnion:return XU(t,n);case me.ZodIntersection:return HU(t,n);case me.ZodTuple:return lV(t,n);case me.ZodRecord:return dx(t,n);case me.ZodLiteral:return qU(t,n);case me.ZodEnum:return VU(t);case me.ZodNativeEnum:return KU(t);case me.ZodNullable:return JU(t,n);case me.ZodOptional:return sV(t,n);case me.ZodMap:return ZU(t,n);case me.ZodSet:return aV(t,n);case me.ZodLazy:return()=>t.getter()._def;case me.ZodPromise:return oV(t,n);case me.ZodNaN:case me.ZodNever:return QU(n);case me.ZodEffects:return UU(t,n);case me.ZodAny:return is(n);case me.ZodUnknown:return cV(n);case me.ZodDefault:return LU(t,n);case me.ZodBranded:return lx(t,n);case me.ZodReadonly:return dV(t,n);case me.ZodCatch:return DU(t,n);case me.ZodPipeline:return iV(t,n);case me.ZodFunction:case me.ZodVoid:case me.ZodSymbol:return;default:return(r=>{})()}};function bt(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const c=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(c!==OU)return c}if(r&&!n){const c=hV(r,e);if(c!==void 0)return c}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=fV(t,t.typeName,e),o=typeof i=="function"?bt(i(),e):i;if(o&&pV(t,e,o),e.postProcess){const c=e.postProcess(o,t,e);return s.jsonSchema=o,c}return s.jsonSchema=o,o}const hV=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:ax(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),is(e)):e.$refStrategy==="seen"?is(e):void 0}},pV=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),mV=(t,e)=>{const n=AU(e);let r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((c,[d,f])=>({...c,[d]:bt(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,d]},!0)??is(n)}),{}):void 0;const s=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=bt(t._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??is(n),o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:n.$refStrategy==="relative"?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};function pd(t){if(typeof t!="object"||t===null||!("~standard"in t))return!1;const e=t["~standard"];return typeof e!="object"||e===null?!1:"version"in e&&e.version===1&&"vendor"in e&&typeof e.vendor=="string"&&"validate"in e&&typeof e.validate=="function"}RU("zod",t=>t&&typeof t=="object"&&"_zod"in t?pL(t):mV(t));function td(t){return pd(t)?NU.sync(t):t}function gV(t){const e=t.properties??{};return Object.entries(e).map(([n,r])=>({name:n,type:r&&typeof r=="object"&&"type"in r?r.type:"object",description:r&&typeof r=="object"&&"description"in r?r.description??"":"",isRequired:Array.isArray(t.required)?t.required.includes(n):!1,schema:typeof r=="object"&&r!==null?r:{}}))}function yV(t){const e=t.inputSchema;let n;if(x4(e))n=e;else if(pd(e))n=td(e);else return console.warn("Unknown inputSchema type, returning empty parameters"),[];return gV(n)}function vV(t){return t.type==="object"&&typeof t.additionalProperties=="object"&&t.additionalProperties!==null}function cs(t,e,n){if(vV(t)){const s=e.length?e.join("."):"(root)";throw new Error(`Record types (objects with dynamic keys) are not supported in ${n}. Found at path "${s}". Replace it with an object using explicit keys.`)}if(t.properties)for(const[s,i]of Object.entries(t.properties))typeof i=="object"&&i!==null&&cs(i,[...e,s],n);typeof t.additionalProperties=="object"&&t.additionalProperties!==null&&cs(t.additionalProperties,[...e,"[*]"],n),t.items&&(Array.isArray(t.items)?t.items.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`${i}`],n)}):typeof t.items=="object"&&cs(t.items,[...e,"[]"],n));const r=t.prefixItems;Array.isArray(r)&&r.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`${i}`],n)}),t.allOf&&t.allOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`&${i}`],n)}),t.anyOf&&t.anyOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`|${i}`],n)}),t.oneOf&&t.oneOf.forEach((s,i)=>{typeof s=="object"&&s!==null&&cs(s,[...e,`|${i}`],n)}),typeof t.not=="object"&&t.not!==null&&cs(t.not,[...e,"!"],n),typeof t.if=="object"&&t.if!==null&&cs(t.if,[...e,"if"],n),typeof t.then=="object"&&t.then!==null&&cs(t.then,[...e,"then"],n),typeof t.else=="object"&&t.else!==null&&cs(t.else,[...e,"else"],n)}function fx(t,e="schema"){if(!t)return;let n;try{if(pd(t)){const r=td(t);if(!r||Object.keys(r).length===0)return;n=r}else if(typeof t=="object"&&t!==null&&"type"in t)n=t;else return}catch{return}cs(n,[],e)}function $h(t,e){if(!/^[a-zA-Z0-9_-]+$/.test(t))throw new Error(`${e} "${t}" must only contain letters, numbers, underscores, and hyphens.`)}function Ms(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function kn(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}let hx=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return hx=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};function d2(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const f2=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class vs extends Error{}class zr extends vs{constructor(e,n,r,s){super(`${zr.makeMessage(e,n,r)}`),this.status=e,this.headers=s,this.error=n}static makeMessage(e,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,n,r,s){if(!e||!s)return new hy({message:r,cause:f2(n)});const i=n;return e===400?new mx(e,i,r,s):e===401?new gx(e,i,r,s):e===403?new yx(e,i,r,s):e===404?new vx(e,i,r,s):e===409?new _x(e,i,r,s):e===422?new wx(e,i,r,s):e===429?new Sx(e,i,r,s):e>=500?new kx(e,i,r,s):new zr(e,i,r,s)}}class h2 extends zr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class hy extends zr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class px extends hy{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mx extends zr{}class gx extends zr{}class yx extends zr{}class vx extends zr{}class _x extends zr{}class wx extends zr{}class Sx extends zr{}class kx extends zr{}const _V=/^[a-z][a-z0-9+.-]*:/i,wV=t=>_V.test(t);let p2=t=>(p2=Array.isArray,p2(t)),FC=p2;function SV(t){return typeof t!="object"?{}:t??{}}function kV(t){if(!t)return!0;for(const e in t)return!1;return!0}function bV(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const EV=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new vs(`${t} must be an integer`);if(e<0)throw new vs(`${t} must be a positive integer`);return e},CV=t=>{try{return JSON.parse(t)}catch{return}},PV=t=>new Promise(e=>setTimeout(e,t)),Xu="0.84.0";function $V(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const TV=()=>{var n;const t=$V();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xu,"X-Stainless-OS":UC(Deno.build.os),"X-Stainless-Arch":LC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((n=Deno.version)==null?void 0:n.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xu,"X-Stainless-OS":UC(globalThis.process.platform??"unknown"),"X-Stainless-Arch":LC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=xV();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,o=r[3]||0;return{browser:e,version:`${s}.${i}.${o}`}}}return null}const LC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",UC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let VC;const NV=()=>VC??(VC=TV());function RV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new TamboAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Ex(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bx({start(){},async pull(n){const{done:r,value:s}=await e.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=e.return)==null?void 0:n.call(e))}})}function Cx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function OV(t){var r,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(r=t[Symbol.asyncIterator]()).return)==null?void 0:s.call(r));return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const IV=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function AV(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}let GC;function O4(t){let e;return(GC??(e=new globalThis.TextEncoder,GC=e.encode.bind(e)))(t)}let HC;function qC(t){let e;return(HC??(e=new globalThis.TextDecoder,HC=e.decode.bind(e)))(t)}var ds,fs;class py{constructor(){ds.set(this,void 0),fs.set(this,void 0),Ms(this,ds,new Uint8Array),Ms(this,fs,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?O4(e):e;Ms(this,ds,AV([kn(this,ds,"f"),n]));const r=[];let s;for(;(s=jV(kn(this,ds,"f"),kn(this,fs,"f")))!=null;){if(s.carriage&&kn(this,fs,"f")==null){Ms(this,fs,s.index);continue}if(kn(this,fs,"f")!=null&&(s.index!==kn(this,fs,"f")+1||s.carriage)){r.push(qC(kn(this,ds,"f").subarray(0,kn(this,fs,"f")-1))),Ms(this,ds,kn(this,ds,"f").subarray(kn(this,fs,"f"))),Ms(this,fs,null);continue}const i=kn(this,fs,"f")!==null?s.preceding-1:s.preceding,o=qC(kn(this,ds,"f").subarray(0,i));r.push(o),Ms(this,ds,kn(this,ds,"f").subarray(s.index)),Ms(this,fs,null)}return r}flush(){return kn(this,ds,"f").length?this.decode(`
`):[]}}ds=new WeakMap,fs=new WeakMap;py.NEWLINE_CHARS=new Set([`
`,"\r"]);py.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function jV(t,e){for(let s=e??0;s<t.length;s++){if(t[s]===10)return{preceding:s,index:s+1,carriage:!1};if(t[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function MV(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}const p0={off:0,error:200,warn:300,info:400,debug:500},BC=(t,e,n)=>{if(t){if(bV(p0,t))return t;Nr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(p0))}`)}};function bf(){}function xm(t,e,n){return!e||p0[t]>p0[n]?bf:e[t].bind(e)}const zV={error:bf,warn:bf,info:bf,debug:bf};let WC=new WeakMap;function Nr(t){const e=t.logger,n=t.logLevel??"off";if(!e)return zV;const r=WC.get(e);if(r&&r[0]===n)return r[1];const s={error:xm("error",e,n),warn:xm("warn",e,n),info:xm("info",e,n),debug:xm("debug",e,n)};return WC.set(e,[n,s]),s}const Sl=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var of;class yc{constructor(e,n,r){this.iterator=e,of.set(this,void 0),this.controller=n,Ms(this,of,r)}static fromSSEResponse(e,n,r){let s=!1;const i=r?Nr(r):console;async function*o(){if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const c of DV(e,n))try{yield JSON.parse(c.data)}catch(d){throw i.error("Could not parse message into JSON:",c.data),i.error("From chunk:",c.raw),d}a=!0}catch(c){if(d2(c))return;throw c}finally{a||n.abort()}}return new yc(o,n,r)}static fromReadableStream(e,n,r){let s=!1;async function*i(){const a=new py,c=Cx(e);for await(const d of c)for(const f of a.decode(d))yield f;for(const d of a.flush())yield d}async function*o(){if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const c of i())a||c&&(yield JSON.parse(c));a=!0}catch(c){if(d2(c))return;throw c}finally{a||n.abort()}}return new yc(o,n,r)}[(of=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const o=r.next();e.push(o),n.push(o)}return i.shift()}});return[new yc(()=>s(e),this.controller,kn(this,of,"f")),new yc(()=>s(n),this.controller,kn(this,of,"f"))]}toReadableStream(){const e=this;let n;return bx({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const o=O4(JSON.stringify(s)+`
`);r.enqueue(o)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)==null?void 0:r.call(n))}})}}async function*DV(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new vs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new vs("Attempted to iterate over a response with no body");const n=new LV,r=new py,s=Cx(t.body);for await(const i of FV(s))for(const o of r.decode(i)){const a=n.decode(o);a&&(yield a)}for(const i of r.flush()){const o=n.decode(i);o&&(yield o)}}async function*FV(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?O4(n):n;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let i;for(;(i=MV(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class LV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,s]=UV(e,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function UV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function Px(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{var m;if(e.options.stream)return Nr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):yc.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const a=n.headers.get("content-type"),c=(m=a==null?void 0:a.split(";")[0])==null?void 0:m.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Nr(t).debug(`[${r}] response parsed`,Sl({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}var Ef;class my extends Promise{constructor(e,n,r=Px){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,Ef.set(this,void 0),Ms(this,Ef,e)}_thenUnwrap(e){return new my(kn(this,Ef,"f"),this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(kn(this,Ef,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ef=new WeakMap;var Nm;class VV{constructor(e,n,r,s){Nm.set(this,void 0),Ms(this,Nm,e),this.options=s,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new vs("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await kn(this,Nm,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Nm=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class GV extends my{constructor(e,n,r){super(e,n,async(s,i)=>new r(s,i.response,await Px(s,i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class HV extends VV{constructor(e,n,r,s){super(e,n,r,s),this.items=r.items||[],this.total=r.total||0,this.count=r.count||0}getPaginatedItems(){return this.items??[]}nextPageRequestOptions(){const e=this.options.query.offset??0,n=this.getPaginatedItems().length,r=e+n,s=this.total;return s&&r<s?{...this.options,query:{...SV(this.options.query),offset:r}}:null}}const $x=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Gf(t,e,n){return $x(),new File(t,e??"unknown_file",n)}function dg(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Tx=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",qV=async(t,e)=>({...t,body:await WV(t.body,e)}),ZC=new WeakMap;function BV(t){const e=typeof t=="function"?t:t.fetch,n=ZC.get(e);if(n)return n;const r=(async()=>{try{const s="Response"in e?e.Response:(await e("data:,")).constructor,i=new FormData;return i.toString()!==await new s(i).text()}catch{return!0}})();return ZC.set(e,r),r}const WV=async(t,e)=>{if(!await BV(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([r,s])=>m2(n,r,s))),n},ZV=t=>t instanceof Blob&&"name"in t,m2=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Gf([await n.blob()],dg(n)));else if(Tx(n))t.append(e,Gf([await new Response(Ex(n)).blob()],dg(n)));else if(ZV(n))t.append(e,n,dg(n));else if(Array.isArray(n))await Promise.all(n.map(r=>m2(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,s])=>m2(t,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},xx=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",KV=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&xx(t),QV=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function YV(t,e,n){if($x(),t=await t,KV(t))return t instanceof File?t:Gf([await t.arrayBuffer()],t.name);if(QV(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Gf(await g2(s),e,n)}const r=await g2(t);if(e||(e=dg(t)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n={...n,type:s})}return Gf(r,e,n)}async function g2(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(xx(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Tx(t))for await(const r of t)e.push(...await g2(r));else{const r=(n=t==null?void 0:t.constructor)==null?void 0:n.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${XV(t)}`)}return e}function XV(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class os{constructor(e){this._client=e}}class Nx extends os{transcribe(e,n){return this._client.post("/audio/transcribe",qV({body:e,...n},this._client))}}const Rx=Symbol("brand.privateNullableHeaders");function*JV(t){if(!t)return;if(Rx in t){const{values:r,nulls:s}=t;yield*r.entries();for(const i of s)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():FC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=FC(r[1])?r[1]:[r[1]];let o=!1;for(const a of i)a!==void 0&&(e&&!o&&(o=!0,yield[s,null]),yield[s,a])}}const wi=t=>{const e=new Headers,n=new Set;for(const r of t){const s=new Set;for(const[i,o]of JV(r)){const a=i.toLowerCase();s.has(a)||(e.delete(i),s.add(a)),o===null?(e.delete(i),n.add(a)):(e.append(i,o),n.delete(a))}}return{[Rx]:!0,values:e,nulls:n}};class Ox extends os{getMcpToken(e,n){return this._client.post("/auth/mcp/access-token",{body:e,...n})}getToken(e,n){return this._client.post("/oauth/token",{body:e,...n,headers:wi([{"Content-Type":"application/x-www-form-urlencoded"},n==null?void 0:n.headers])})}}function Ix(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const KC=Object.freeze(Object.create(null)),eG=(t=Ix)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],o=n.reduce((f,m,y)=>{var E;/[?#]/.test(m)&&(s=!0);const v=r[y];let _=(s?encodeURIComponent:t)(""+v);return y!==r.length&&(v==null||typeof v=="object"&&v.toString===((E=Object.getPrototypeOf(Object.getPrototypeOf(v.hasOwnProperty??KC)??KC))==null?void 0:E.toString))&&(_=v+"",i.push({start:f.length+m.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),f+m+(y===r.length?"":_)},""),a=o.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(a))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,m)=>f.start-m.start),i.length>0){let f=0;const m=i.reduce((y,v)=>{const _=" ".repeat(v.start-f),E="^".repeat(v.length);return f=v.start+v.length,y+_+E},"");throw new vs(`Path parameters result in path with invalid segments:
${i.map(y=>y.error).join(`
`)}
${o}
${m}`)}return o},Ft=eG(Ix);class Ax extends os{retrieve(e,n){return this._client.get(Ft`/registry/${e}`,n)}}class jx extends os{list(e,n){return this._client.get(Ft`/projects/${e}/api-keys`,n)}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/projects/${s}/api-key/${e}`,r)}}class Mx extends os{list(e,n){return this._client.get(Ft`/projects/${e}/provider-keys`,n)}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/projects/${s}/provider-key/${e}`,r)}}class gy extends os{constructor(){super(...arguments),this.apiKey=new jx(this._client),this.providerKey=new Mx(this._client)}retrieve(e,n){return this._client.get(Ft`/projects/${e}`,n)}delete(e,n){return this._client.delete(Ft`/projects/${e}`,n)}getCurrent(e){return this._client.get("/projects",e)}}gy.APIKey=jx;gy.ProviderKey=Mx;let zx=class extends os{create(e,n,r){return this._client.post(Ft`/threads/${e}/messages`,{body:n,...r})}list(e,n={},r){return this._client.get(Ft`/threads/${e}/messages`,{query:n,...r})}delete(e,n,r){const{id:s}=n;return this._client.delete(Ft`/threads/${s}/messages/${e}`,{...r,headers:wi([{Accept:"*/*"},r==null?void 0:r.headers])})}updateComponentState(e,n,r){const{id:s,...i}=n;return this._client.put(Ft`/threads/${s}/messages/${e}/component-state`,{body:i,...r})}};class Dx extends os{list(e,n,r){const{id:s}=n;return this._client.get(Ft`/threads/${s}/messages/${e}/suggestions`,r)}generate(e,n,r){const{id:s,...i}=n;return this._client.post(Ft`/threads/${s}/messages/${e}/suggestions`,{body:i,...r})}}let yy=class extends os{constructor(){super(...arguments),this.messages=new zx(this._client),this.suggestions=new Dx(this._client)}create(e,n){return this._client.post("/threads",{body:e,...n})}retrieve(e,n={},r){return this._client.get(Ft`/threads/${e}`,{query:n,...r})}update(e,n,r){return this._client.put(Ft`/threads/${e}`,{body:n,...r})}list(e,n={},r){return this._client.getAPIList(Ft`/threads/project/${e}`,HV,{query:n,...r})}delete(e,n){return this._client.delete(Ft`/threads/${e}`,{...n,headers:wi([{Accept:"*/*"},n==null?void 0:n.headers])})}advance(e){return this._client.post("/threads/advance",e)}advanceByID(e,n,r){return this._client.post(Ft`/threads/${e}/advance`,{body:n,...r})}cancel(e,n){return this._client.post(Ft`/threads/${e}/cancel`,n)}generateName(e,n={},r){const{contextKey:s}=n??{};return this._client.post(Ft`/threads/${e}/generate-name`,{query:{contextKey:s},...r})}};yy.Messages=zx;yy.Suggestions=Dx;class pu extends os{constructor(){super(...arguments),this.registry=new Ax(this._client),this.projects=new gy(this._client),this.threads=new yy(this._client),this.auth=new Ox(this._client),this.audio=new Nx(this._client)}}pu.Registry=Ax;pu.Projects=gy;pu.Threads=yy;pu.Auth=Ox;pu.Audio=Nx;class Fx extends os{presign(e,n){return this._client.post("/storage/presign",{body:e,...n})}}class Lx extends os{list(e,n={},r){return this._client.get(Ft`/v1/threads/${e}/messages`,{query:n,...r})}get(e,n,r){const{threadId:s}=n;return this._client.get(Ft`/v1/threads/${s}/messages/${e}`,r)}}class Ux extends os{create(e,n){return this._client.post("/v1/threads/runs",{body:e,...n,headers:wi([{Accept:"text/event-stream"},n==null?void 0:n.headers]),stream:!0})}delete(e,n,r){const{threadId:s}=n;return this._client.delete(Ft`/v1/threads/${s}/runs/${e}`,r)}run(e,n,r){return this._client.post(Ft`/v1/threads/${e}/runs`,{body:n,...r,headers:wi([{Accept:"text/event-stream"},r==null?void 0:r.headers]),stream:!0})}}class vy extends os{constructor(){super(...arguments),this.messages=new Lx(this._client),this.runs=new Ux(this._client)}create(e,n){return this._client.post("/v1/threads",{body:e,...n})}retrieve(e,n){return this._client.get(Ft`/v1/threads/${e}`,n)}list(e={},n){return this._client.get("/v1/threads",{query:e,...n})}delete(e,n){return this._client.delete(Ft`/v1/threads/${e}`,{...n,headers:wi([{Accept:"*/*"},n==null?void 0:n.headers])})}}vy.Messages=Lx;vy.Runs=Ux;var k1={};const b1=t=>{var e,n,r,s;if(typeof globalThis.process<"u")return((e=k1==null?void 0:k1[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(s=(r=(n=globalThis.Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:s.trim()};var y2,I4,fg,Vx;const Gx={production:"https://api.tambo.co",staging:"https://hydra-api-dev.up.railway.app"};class En{constructor({baseURL:e=b1("TAMBO_AI_BASE_URL"),apiKey:n=b1("TAMBO_API_KEY")??null,bearer:r=null,...s}={}){y2.add(this),fg.set(this,void 0),this.beta=new pu(this),this.storage=new Fx(this),this.threads=new vy(this);const i={apiKey:n,bearer:r,...s,baseURL:e,environment:s.environment??"production"};if(e&&s.environment)throw new vs("Ambiguous URL; The `baseURL` option (or TAMBO_AI_BASE_URL env var) and the `environment` option are given. If you want to use the environment you must pass baseURL: null");this.baseURL=i.baseURL||Gx[i.environment||"production"],this.timeout=i.timeout??I4.DEFAULT_TIMEOUT,this.logger=i.logger??console;const o="warn";this.logLevel=o,this.logLevel=BC(i.logLevel,"ClientOptions.logLevel",this)??BC(b1("TAMBO_AI_LOG"),"process.env['TAMBO_AI_LOG']",this)??o,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??0,this.fetch=i.fetch??RV(),Ms(this,fg,IV),this._options=i,this.apiKey=n,this.bearer=r}withOptions(e){return new this.constructor({...this._options,environment:e.environment?e.environment:void 0,baseURL:e.environment?void 0:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,bearer:this.bearer,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-api-key"))&&!n.has("x-api-key")&&!(this.bearer&&e.get("authorization"))&&!n.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or bearer to be set. Or for one of the "x-api-key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return wi([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return wi([{"x-api-key":this.apiKey}])}async bearerAuth(e){if(this.bearer!=null)return wi([{Authorization:`Bearer ${this.bearer}`}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new vs(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Xu}`}defaultIdempotencyKey(){return`stainless-node-retry-${hx()}`}makeStatusError(e,n,r,s){return zr.generate(e,n,r,s)}buildURL(e,n,r){const s=!kn(this,y2,"m",Vx).call(this)&&r||this.baseURL,i=wV(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return kV(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:n,...s})))}request(e,n=null){return new my(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var k,p;const s=await e,i=s.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(s);const{req:o,url:a,timeout:c}=await this.buildRequest(s,{retryCount:i-n});await this.prepareRequest(o,{url:a,options:s});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),f=r===void 0?"":`, retryOf: ${r}`,m=Date.now();if(Nr(this).debug(`[${d}] sending request`,Sl({retryOfRequestLogID:r,method:s.method,url:a,options:s,headers:o.headers})),(k=s.signal)!=null&&k.aborted)throw new h2;const y=new AbortController,v=await this.fetchWithTimeout(a,o,c,y).catch(f2),_=Date.now();if(v instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if((p=s.signal)!=null&&p.aborted)throw new h2;const g=d2(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return Nr(this).info(`[${d}] connection ${g?"timed out":"failed"} - ${w}`),Nr(this).debug(`[${d}] connection ${g?"timed out":"failed"} (${w})`,Sl({retryOfRequestLogID:r,url:a,durationMs:_-m,message:v.message})),this.retryRequest(s,n,r??d);throw Nr(this).info(`[${d}] connection ${g?"timed out":"failed"} - error; no more retries left`),Nr(this).debug(`[${d}] connection ${g?"timed out":"failed"} (error; no more retries left)`,Sl({retryOfRequestLogID:r,url:a,durationMs:_-m,message:v.message})),g?new px:new hy({cause:v})}const E=`[${d}${f}] ${o.method} ${a} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${_-m}ms`;if(!v.ok){const w=await this.shouldRetry(v);if(n&&w){const A=`retrying, ${n} attempts remaining`;return await OV(v.body),Nr(this).info(`${E} - ${A}`),Nr(this).debug(`[${d}] response error (${A})`,Sl({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:_-m})),this.retryRequest(s,n,r??d,v.headers)}const g=w?"error; no more retries left":"error; not retryable";Nr(this).info(`${E} - ${g}`);const C=await v.text().catch(A=>f2(A).message),$=CV(C),N=$?void 0:C;throw Nr(this).debug(`[${d}] response error (${g})`,Sl({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:N,durationMs:Date.now()-m})),this.makeStatusError(v.status,$,N,v.headers)}return Nr(this).info(E),Nr(this).debug(`[${d}] response start`,Sl({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:_-m})),{response:v,options:s,controller:y,requestLogID:d,retryOfRequestLogID:r,startTime:m}}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}requestAPIList(e,n){const r=this.makeRequest(n,null,void 0);return new GV(this,r,e)}async fetchWithTimeout(e,n,r,s){const{signal:i,method:o,...a}=n||{};i&&i.addEventListener("abort",()=>s.abort());const c=setTimeout(()=>s.abort(),r),d=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,f={signal:s.signal,...d?{duplex:"half"}:{},method:"GET",...a};o&&(f.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,s){let i;const o=s==null?void 0:s.get("retry-after-ms");if(o){const c=parseFloat(o);Number.isNaN(c)||(i=c)}const a=s==null?void 0:s.get("retry-after");if(a&&!i){const c=parseFloat(a);Number.isNaN(c)?i=Date.parse(a)-Date.now():i=c*1e3}if(!(i&&0<=i&&i<60*1e3)){const c=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,c)}return await PV(i),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,o=Math.min(1*Math.pow(2,i),5),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){const r={...e},{method:s,path:i,query:o,defaultBaseURL:a}=r,c=this.buildURL(i,o,a);"timeout"in r&&EV("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:d,body:f}=this.buildBody({options:r}),m=await this.buildHeaders({options:e,method:s,bodyHeaders:d,retryCount:n});return{req:{method:s,headers:m,...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&f instanceof globalThis.ReadableStream&&{duplex:"half"},...f&&{body:f},...this.fetchOptions??{},...r.fetchOptions??{}},url:c,timeout:r.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const o=wi([i,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...NV()},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=wi([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ex(e)}:kn(this,fg,"f").call(this,{body:e,headers:r})}}I4=En,fg=new WeakMap,y2=new WeakSet,Vx=function(){return this.baseURL!==Gx[this._options.environment||"production"]};En.TamboAI=I4;En.DEFAULT_TIMEOUT=6e4;En.TamboAIError=vs;En.APIError=zr;En.APIConnectionError=hy;En.APIConnectionTimeoutError=px;En.APIUserAbortError=h2;En.NotFoundError=vx;En.ConflictError=_x;En.RateLimitError=Sx;En.BadRequestError=mx;En.AuthenticationError=gx;En.InternalServerError=kx;En.PermissionDeniedError=yx;En.UnprocessableEntityError=wx;En.toFile=YV;En.Beta=pu;En.Storage=Fx;En.Threads=vy;async function QC(t,e,n,r){let i=0;for(;;)try{const a=await t.post(`/threads${n?`/${n}`:""}/advancestream`,{body:e,...r,headers:{...r==null?void 0:r.headers,Accept:"text/event-stream"}}).asResponse();return tG(a)}catch(o){if(i<2){i++,console.warn(`Request failed, attempting retry ${i}/2`);continue}throw o}}async function*tG(t){const e=new TextDecoder,n=5;let r=0;const s=t.body.getReader();for(;;)try{const{done:i,value:o}=await s.read();if(i)break;const c=e.decode(o).split(`
`).filter(d=>d.trim());for(const d of c){if(d==="data: DONE")continue;if(d.startsWith("error: "))throw new Error(d.slice(7));const f=d.startsWith("data: ")?d.slice(6):d;if(f)try{yield JSON.parse(f),r=0}catch{if(r<n){r++,console.warn(`Failed to parse JSON chunk, skipping. Attempt ${r}/${n}`);continue}throw new Error("Failed to parse JSON after multiple chunks.")}}}catch(i){throw s.releaseLock(),i}}var md=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nG={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},va,TS,eP,rG=(eP=class{constructor(){ze(this,va,nG);ze(this,TS,!1)}setTimeoutProvider(t){we(this,va,t)}setTimeout(t,e){return Z(this,va).setTimeout(t,e)}clearTimeout(t){Z(this,va).clearTimeout(t)}setInterval(t,e){return Z(this,va).setInterval(t,e)}clearInterval(t){Z(this,va).clearInterval(t)}},va=new WeakMap,TS=new WeakMap,eP),Al=new rG;function sG(t){setTimeout(t,0)}var ru=typeof window>"u"||"Deno"in globalThis;function Ar(){}function iG(t,e){return typeof t=="function"?t(e):t}function v2(t){return typeof t=="number"&&t>=0&&t!==1/0}function Hx(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Fa(t,e){return typeof t=="function"?t(e):t}function Fs(t,e){return typeof t=="function"?t(e):t}function YC(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==A4(o,e.options))return!1}else if(!Th(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function XC(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(su(e.options.mutationKey)!==su(i))return!1}else if(!Th(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function A4(t,e){return((e==null?void 0:e.queryKeyHashFn)||su)(t)}function su(t){return JSON.stringify(t,(e,n)=>_2(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Th(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Th(t[n],e[n])):!1}var oG=Object.prototype.hasOwnProperty;function qx(t,e,n=0){if(t===e)return t;if(n>500)return e;const r=JC(t)&&JC(e);if(!r&&!(_2(t)&&_2(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,c=r?new Array(a):{};let d=0;for(let f=0;f<a;f++){const m=r?f:o[f],y=t[m],v=e[m];if(y===v){c[m]=y,(r?f<i:oG.call(t,m))&&d++;continue}if(y===null||v===null||typeof y!="object"||typeof v!="object"){c[m]=v;continue}const _=qx(y,v,n+1);c[m]=_,_===y&&d++}return i===a&&d===i?t:c}function m0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function JC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _2(t){if(!e6(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!e6(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e6(t){return Object.prototype.toString.call(t)==="[object Object]"}function aG(t){return new Promise(e=>{Al.setTimeout(e,t)})}function w2(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?qx(t,e):e}function lG(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function uG(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var j4=Symbol();function Bx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===j4?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function M4(t,e){return typeof t=="function"?t(...e):!!t}function cG(t,e,n){let r=!1,s;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(s??(s=e()),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),t}var Ml,_a,Oc,tP,dG=(tP=class extends md{constructor(){super();ze(this,Ml);ze(this,_a);ze(this,Oc);we(this,Oc,e=>{if(!ru&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,_a)||this.setEventListener(Z(this,Oc))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,_a))==null||e.call(this),we(this,_a,void 0))}setEventListener(e){var n;we(this,Oc,e),(n=Z(this,_a))==null||n.call(this),we(this,_a,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Z(this,Ml)!==e&&(we(this,Ml,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Z(this,Ml)=="boolean"?Z(this,Ml):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ml=new WeakMap,_a=new WeakMap,Oc=new WeakMap,tP),z4=new dG;function S2(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var fG=sG;function hG(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=fG;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Ln=hG(),Ic,wa,Ac,nP,pG=(nP=class extends md{constructor(){super();ze(this,Ic,!0);ze(this,wa);ze(this,Ac);we(this,Ac,e=>{if(!ru&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Z(this,wa)||this.setEventListener(Z(this,Ac))}onUnsubscribe(){var e;this.hasListeners()||((e=Z(this,wa))==null||e.call(this),we(this,wa,void 0))}setEventListener(e){var n;we(this,Ac,e),(n=Z(this,wa))==null||n.call(this),we(this,wa,e(this.setOnline.bind(this)))}setOnline(e){Z(this,Ic)!==e&&(we(this,Ic,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Z(this,Ic)}},Ic=new WeakMap,wa=new WeakMap,Ac=new WeakMap,nP),g0=new pG;function mG(t){return Math.min(1e3*2**t,3e4)}function Wx(t){return(t??"online")==="online"?g0.isOnline():!0}var k2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zx(t){let e=!1,n=0,r;const s=S2(),i=()=>s.status!=="pending",o=E=>{var k;if(!i()){const p=new k2(E);y(p),(k=t.onCancel)==null||k.call(t,p)}},a=()=>{e=!0},c=()=>{e=!1},d=()=>z4.isFocused()&&(t.networkMode==="always"||g0.isOnline())&&t.canRun(),f=()=>Wx(t.networkMode)&&t.canRun(),m=E=>{i()||(r==null||r(),s.resolve(E))},y=E=>{i()||(r==null||r(),s.reject(E))},v=()=>new Promise(E=>{var k;r=p=>{(i()||d())&&E(p)},(k=t.onPause)==null||k.call(t)}).then(()=>{var E;r=void 0,i()||(E=t.onContinue)==null||E.call(t)}),_=()=>{if(i())return;let E;const k=n===0?t.initialPromise:void 0;try{E=k??t.fn()}catch(p){E=Promise.reject(p)}Promise.resolve(E).then(m).catch(p=>{var N;if(i())return;const w=t.retry??(ru?0:3),g=t.retryDelay??mG,C=typeof g=="function"?g(n,p):g,$=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,p);if(e||!$){y(p);return}n++,(N=t.onFail)==null||N.call(t,n,p),aG(C).then(()=>d()?void 0:v()).then(()=>{e?y(p):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:f,start:()=>(f()?_():v().then(_),s)}}var zl,rP,Kx=(rP=class{constructor(){ze(this,zl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v2(this.gcTime)&&we(this,zl,Al.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ru?1/0:5*60*1e3))}clearGcTimeout(){Z(this,zl)&&(Al.clearTimeout(Z(this,zl)),we(this,zl,void 0))}},zl=new WeakMap,rP),Dl,jc,js,Fl,Zn,jh,Ll,mi,go,sP,gG=(sP=class extends Kx{constructor(e){super();ze(this,mi);ze(this,Dl);ze(this,jc);ze(this,js);ze(this,Fl);ze(this,Zn);ze(this,jh);ze(this,Ll);we(this,Ll,!1),we(this,jh,e.defaultOptions),this.setOptions(e.options),this.observers=[],we(this,Fl,e.client),we(this,js,Z(this,Fl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,we(this,Dl,n6(this.options)),this.state=e.state??Z(this,Dl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Z(this,Zn))==null?void 0:e.promise}setOptions(e){if(this.options={...Z(this,jh),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=n6(this.options);n.data!==void 0&&(this.setState(t6(n.data,n.dataUpdatedAt)),we(this,Dl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,js).remove(this)}setData(e,n){const r=w2(this.state.data,e,this.options);return tt(this,mi,go).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){tt(this,mi,go).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=Z(this,Zn))==null?void 0:r.promise;return(s=Z(this,Zn))==null||s.cancel(e),n?n.then(Ar).catch(Ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,Dl))}isActive(){return this.observers.some(e=>Fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===j4||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Fa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Hx(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Z(this,Zn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Z(this,Zn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Z(this,js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Z(this,Zn)&&(Z(this,Ll)?Z(this,Zn).cancel({revert:!0}):Z(this,Zn).cancelRetry()),this.scheduleGc()),Z(this,js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||tt(this,mi,go).call(this,{type:"invalidate"})}async fetch(e,n){var c,d,f,m,y,v,_,E,k,p,w,g;if(this.state.fetchStatus!=="idle"&&((c=Z(this,Zn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Zn))return Z(this,Zn).continueRetry(),Z(this,Zn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find($=>$.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,s=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(we(this,Ll,!0),r.signal)})},i=()=>{const C=Bx(this.options,n),N=(()=>{const M={client:Z(this,Fl),queryKey:this.queryKey,meta:this.meta};return s(M),M})();return we(this,Ll,!1),this.options.persister?this.options.persister(C,N,this):C(N)},a=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Z(this,Fl),state:this.state,fetchFn:i};return s(C),C})();(d=this.options.behavior)==null||d.onFetch(a,this),we(this,jc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=a.fetchOptions)==null?void 0:f.meta))&&tt(this,mi,go).call(this,{type:"fetch",meta:(m=a.fetchOptions)==null?void 0:m.meta}),we(this,Zn,Zx({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:C=>{C instanceof k2&&C.revert&&this.setState({...Z(this,jc),fetchStatus:"idle"}),r.abort()},onFail:(C,$)=>{tt(this,mi,go).call(this,{type:"failed",failureCount:C,error:$})},onPause:()=>{tt(this,mi,go).call(this,{type:"pause"})},onContinue:()=>{tt(this,mi,go).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const C=await Z(this,Zn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(v=(y=Z(this,js).config).onSuccess)==null||v.call(y,C,this),(E=(_=Z(this,js).config).onSettled)==null||E.call(_,C,this.state.error,this),C}catch(C){if(C instanceof k2){if(C.silent)return Z(this,Zn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw tt(this,mi,go).call(this,{type:"error",error:C}),(p=(k=Z(this,js).config).onError)==null||p.call(k,C,this),(g=(w=Z(this,js).config).onSettled)==null||g.call(w,this.state.data,C,this),C}finally{this.scheduleGc()}}},Dl=new WeakMap,jc=new WeakMap,js=new WeakMap,Fl=new WeakMap,Zn=new WeakMap,jh=new WeakMap,Ll=new WeakMap,mi=new WeakSet,go=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Qx(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...t6(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return we(this,jc,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ln.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Z(this,js).notify({query:this,type:"updated",action:e})})},sP);function Qx(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function t6(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function n6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Wr,pt,Mh,xr,Ul,Mc,So,Sa,zh,zc,Dc,Vl,Gl,ka,Fc,Ct,Cf,b2,E2,C2,P2,$2,T2,x2,Yx,iP,yG=(iP=class extends md{constructor(e,n){super();ze(this,Ct);ze(this,Wr);ze(this,pt);ze(this,Mh);ze(this,xr);ze(this,Ul);ze(this,Mc);ze(this,So);ze(this,Sa);ze(this,zh);ze(this,zc);ze(this,Dc);ze(this,Vl);ze(this,Gl);ze(this,ka);ze(this,Fc,new Set);this.options=n,we(this,Wr,e),we(this,Sa,null),we(this,So,S2()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Z(this,pt).addObserver(this),r6(Z(this,pt),this.options)?tt(this,Ct,Cf).call(this):this.updateResult(),tt(this,Ct,P2).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return N2(Z(this,pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return N2(Z(this,pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,tt(this,Ct,$2).call(this),tt(this,Ct,T2).call(this),Z(this,pt).removeObserver(this)}setOptions(e){const n=this.options,r=Z(this,pt);if(this.options=Z(this,Wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fs(this.options.enabled,Z(this,pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");tt(this,Ct,x2).call(this),Z(this,pt).setOptions(this.options),n._defaulted&&!m0(this.options,n)&&Z(this,Wr).getQueryCache().notify({type:"observerOptionsUpdated",query:Z(this,pt),observer:this});const s=this.hasListeners();s&&s6(Z(this,pt),r,this.options,n)&&tt(this,Ct,Cf).call(this),this.updateResult(),s&&(Z(this,pt)!==r||Fs(this.options.enabled,Z(this,pt))!==Fs(n.enabled,Z(this,pt))||Fa(this.options.staleTime,Z(this,pt))!==Fa(n.staleTime,Z(this,pt)))&&tt(this,Ct,b2).call(this);const i=tt(this,Ct,E2).call(this);s&&(Z(this,pt)!==r||Fs(this.options.enabled,Z(this,pt))!==Fs(n.enabled,Z(this,pt))||i!==Z(this,ka))&&tt(this,Ct,C2).call(this,i)}getOptimisticResult(e){const n=Z(this,Wr).getQueryCache().build(Z(this,Wr),e),r=this.createResult(n,e);return _G(this,r)&&(we(this,xr,r),we(this,Mc,this.options),we(this,Ul,Z(this,pt).state)),r}getCurrentResult(){return Z(this,xr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Z(this,So).status==="pending"&&Z(this,So).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){Z(this,Fc).add(e)}getCurrentQuery(){return Z(this,pt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Z(this,Wr).defaultQueryOptions(e),r=Z(this,Wr).getQueryCache().build(Z(this,Wr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return tt(this,Ct,Cf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Z(this,xr)))}createResult(e,n){var q;const r=Z(this,pt),s=this.options,i=Z(this,xr),o=Z(this,Ul),a=Z(this,Mc),d=e!==r?e.state:Z(this,Mh),{state:f}=e;let m={...f},y=!1,v;if(n._optimisticResults){const G=this.hasListeners(),B=!G&&r6(e,n),Y=G&&s6(e,r,n,s);(B||Y)&&(m={...m,...Qx(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:_,errorUpdatedAt:E,status:k}=m;v=m.data;let p=!1;if(n.placeholderData!==void 0&&v===void 0&&k==="pending"){let G;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(G=i.data,p=!0):G=typeof n.placeholderData=="function"?n.placeholderData((q=Z(this,Dc))==null?void 0:q.state.data,Z(this,Dc)):n.placeholderData,G!==void 0&&(k="success",v=w2(i==null?void 0:i.data,G,n),y=!0)}if(n.select&&v!==void 0&&!p)if(i&&v===(o==null?void 0:o.data)&&n.select===Z(this,zh))v=Z(this,zc);else try{we(this,zh,n.select),v=n.select(v),v=w2(i==null?void 0:i.data,v,n),we(this,zc,v),we(this,Sa,null)}catch(G){we(this,Sa,G)}Z(this,Sa)&&(_=Z(this,Sa),v=Z(this,zc),E=Date.now(),k="error");const w=m.fetchStatus==="fetching",g=k==="pending",C=k==="error",$=g&&w,N=v!==void 0,A={status:k,fetchStatus:m.fetchStatus,isPending:g,isSuccess:k==="success",isError:C,isInitialLoading:$,isLoading:$,data:v,dataUpdatedAt:m.dataUpdatedAt,error:_,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!g,isLoadingError:C&&!N,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&N,isStale:D4(e,n),refetch:this.refetch,promise:Z(this,So),isEnabled:Fs(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const G=A.data!==void 0,B=A.status==="error"&&!G,Y=ae=>{B?ae.reject(A.error):G&&ae.resolve(A.data)},ie=()=>{const ae=we(this,So,A.promise=S2());Y(ae)},se=Z(this,So);switch(se.status){case"pending":e.queryHash===r.queryHash&&Y(se);break;case"fulfilled":(B||A.data!==se.value)&&ie();break;case"rejected":(!B||A.error!==se.reason)&&ie();break}}return A}updateResult(){const e=Z(this,xr),n=this.createResult(Z(this,pt),this.options);if(we(this,Ul,Z(this,pt).state),we(this,Mc,this.options),Z(this,Ul).data!==void 0&&we(this,Dc,Z(this,pt)),m0(n,e))return;we(this,xr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Z(this,Fc).size)return!0;const o=new Set(i??Z(this,Fc));return this.options.throwOnError&&o.add("error"),Object.keys(Z(this,xr)).some(a=>{const c=a;return Z(this,xr)[c]!==e[c]&&o.has(c)})};tt(this,Ct,Yx).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&tt(this,Ct,P2).call(this)}},Wr=new WeakMap,pt=new WeakMap,Mh=new WeakMap,xr=new WeakMap,Ul=new WeakMap,Mc=new WeakMap,So=new WeakMap,Sa=new WeakMap,zh=new WeakMap,zc=new WeakMap,Dc=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,ka=new WeakMap,Fc=new WeakMap,Ct=new WeakSet,Cf=function(e){tt(this,Ct,x2).call(this);let n=Z(this,pt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ar)),n},b2=function(){tt(this,Ct,$2).call(this);const e=Fa(this.options.staleTime,Z(this,pt));if(ru||Z(this,xr).isStale||!v2(e))return;const r=Hx(Z(this,xr).dataUpdatedAt,e)+1;we(this,Vl,Al.setTimeout(()=>{Z(this,xr).isStale||this.updateResult()},r))},E2=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Z(this,pt)):this.options.refetchInterval)??!1},C2=function(e){tt(this,Ct,T2).call(this),we(this,ka,e),!(ru||Fs(this.options.enabled,Z(this,pt))===!1||!v2(Z(this,ka))||Z(this,ka)===0)&&we(this,Gl,Al.setInterval(()=>{(this.options.refetchIntervalInBackground||z4.isFocused())&&tt(this,Ct,Cf).call(this)},Z(this,ka)))},P2=function(){tt(this,Ct,b2).call(this),tt(this,Ct,C2).call(this,tt(this,Ct,E2).call(this))},$2=function(){Z(this,Vl)&&(Al.clearTimeout(Z(this,Vl)),we(this,Vl,void 0))},T2=function(){Z(this,Gl)&&(Al.clearInterval(Z(this,Gl)),we(this,Gl,void 0))},x2=function(){const e=Z(this,Wr).getQueryCache().build(Z(this,Wr),this.options);if(e===Z(this,pt))return;const n=Z(this,pt);we(this,pt,e),we(this,Mh,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Yx=function(e){Ln.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Z(this,xr))}),Z(this,Wr).getQueryCache().notify({query:Z(this,pt),type:"observerResultsUpdated"})})},iP);function vG(t,e){return Fs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function r6(t,e){return vG(t,e)||t.state.data!==void 0&&N2(t,e,e.refetchOnMount)}function N2(t,e,n){if(Fs(e.enabled,t)!==!1&&Fa(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&D4(t,e)}return!1}function s6(t,e,n,r){return(t!==e||Fs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&D4(t,n)}function D4(t,e){return Fs(e.enabled,t)!==!1&&t.isStaleByTime(Fa(e.staleTime,t))}function _G(t,e){return!m0(t.getCurrentResult(),e)}function i6(t){return{onFetch:(e,n)=>{var f,m,y,v,_;const r=e.options,s=(y=(m=(f=e.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const d=async()=>{let E=!1;const k=g=>{cG(g,()=>e.signal,()=>E=!0)},p=Bx(e.options,e.fetchOptions),w=async(g,C,$)=>{if(E)return Promise.reject();if(C==null&&g.pages.length)return Promise.resolve(g);const M=(()=>{const B={client:e.client,queryKey:e.queryKey,pageParam:C,direction:$?"backward":"forward",meta:e.options.meta};return k(B),B})(),A=await p(M),{maxPages:q}=e.options,G=$?uG:lG;return{pages:G(g.pages,A,q),pageParams:G(g.pageParams,C,q)}};if(s&&i.length){const g=s==="backward",C=g?wG:o6,$={pages:i,pageParams:o},N=C(r,$);a=await w($,N,g)}else{const g=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:o6(r,a);if(c>0&&C==null)break;a=await w(a,C),c++}while(c<g)}return a};e.options.persister?e.fetchFn=()=>{var E,k;return(k=(E=e.options).persister)==null?void 0:k.call(E,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function o6(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function wG(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Dh,Vi,kr,Hl,Gi,ua,oP,SG=(oP=class extends Kx{constructor(e){super();ze(this,Gi);ze(this,Dh);ze(this,Vi);ze(this,kr);ze(this,Hl);we(this,Dh,e.client),this.mutationId=e.mutationId,we(this,kr,e.mutationCache),we(this,Vi,[]),this.state=e.state||Xx(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Z(this,Vi).includes(e)||(Z(this,Vi).push(e),this.clearGcTimeout(),Z(this,kr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){we(this,Vi,Z(this,Vi).filter(n=>n!==e)),this.scheduleGc(),Z(this,kr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Z(this,Vi).length||(this.state.status==="pending"?this.scheduleGc():Z(this,kr).remove(this))}continue(){var e;return((e=Z(this,Hl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,c,d,f,m,y,v,_,E,k,p,w,g,C,$,N,M;const n=()=>{tt(this,Gi,ua).call(this,{type:"continue"})},r={client:Z(this,Dh),meta:this.options.meta,mutationKey:this.options.mutationKey};we(this,Hl,Zx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(A,q)=>{tt(this,Gi,ua).call(this,{type:"failed",failureCount:A,error:q})},onPause:()=>{tt(this,Gi,ua).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,kr).canRun(this)}));const s=this.state.status==="pending",i=!Z(this,Hl).canStart();try{if(s)n();else{tt(this,Gi,ua).call(this,{type:"pending",variables:e,isPaused:i}),Z(this,kr).config.onMutate&&await Z(this,kr).config.onMutate(e,this,r);const q=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e,r));q!==this.state.context&&tt(this,Gi,ua).call(this,{type:"pending",context:q,variables:e,isPaused:i})}const A=await Z(this,Hl).start();return await((d=(c=Z(this,kr).config).onSuccess)==null?void 0:d.call(c,A,e,this.state.context,this,r)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,A,e,this.state.context,r)),await((v=(y=Z(this,kr).config).onSettled)==null?void 0:v.call(y,A,null,this.state.variables,this.state.context,this,r)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,A,null,e,this.state.context,r)),tt(this,Gi,ua).call(this,{type:"success",data:A}),A}catch(A){try{await((p=(k=Z(this,kr).config).onError)==null?void 0:p.call(k,A,e,this.state.context,this,r))}catch(q){Promise.reject(q)}try{await((g=(w=this.options).onError)==null?void 0:g.call(w,A,e,this.state.context,r))}catch(q){Promise.reject(q)}try{await(($=(C=Z(this,kr).config).onSettled)==null?void 0:$.call(C,void 0,A,this.state.variables,this.state.context,this,r))}catch(q){Promise.reject(q)}try{await((M=(N=this.options).onSettled)==null?void 0:M.call(N,void 0,A,e,this.state.context,r))}catch(q){Promise.reject(q)}throw tt(this,Gi,ua).call(this,{type:"error",error:A}),A}finally{Z(this,kr).runNext(this)}}},Dh=new WeakMap,Vi=new WeakMap,kr=new WeakMap,Hl=new WeakMap,Gi=new WeakSet,ua=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ln.batch(()=>{Z(this,Vi).forEach(r=>{r.onMutationUpdate(e)}),Z(this,kr).notify({mutation:this,type:"updated",action:e})})},oP);function Xx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ko,gi,Fh,aP,kG=(aP=class extends md{constructor(e={}){super();ze(this,ko);ze(this,gi);ze(this,Fh);this.config=e,we(this,ko,new Set),we(this,gi,new Map),we(this,Fh,0)}build(e,n,r){const s=new SG({client:e,mutationCache:this,mutationId:++sm(this,Fh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Z(this,ko).add(e);const n=Rm(e);if(typeof n=="string"){const r=Z(this,gi).get(n);r?r.push(e):Z(this,gi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Z(this,ko).delete(e)){const n=Rm(e);if(typeof n=="string"){const r=Z(this,gi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Z(this,gi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rm(e);if(typeof n=="string"){const r=Z(this,gi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Rm(e);if(typeof n=="string"){const s=(r=Z(this,gi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ln.batch(()=>{Z(this,ko).forEach(e=>{this.notify({type:"removed",mutation:e})}),Z(this,ko).clear(),Z(this,gi).clear()})}getAll(){return Array.from(Z(this,ko))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>XC(n,r))}findAll(e={}){return this.getAll().filter(n=>XC(e,n))}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ln.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ar))))}},ko=new WeakMap,gi=new WeakMap,Fh=new WeakMap,aP);function Rm(t){var e;return(e=t.options.scope)==null?void 0:e.id}var bo,ba,Zr,Eo,Ao,hg,R2,lP,bG=(lP=class extends md{constructor(n,r){super();ze(this,Ao);ze(this,bo);ze(this,ba);ze(this,Zr);ze(this,Eo);we(this,bo,n),this.setOptions(r),this.bindMethods(),tt(this,Ao,hg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=Z(this,bo).defaultMutationOptions(n),m0(this.options,r)||Z(this,bo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Z(this,Zr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&su(r.mutationKey)!==su(this.options.mutationKey)?this.reset():((s=Z(this,Zr))==null?void 0:s.state.status)==="pending"&&Z(this,Zr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Z(this,Zr))==null||n.removeObserver(this)}onMutationUpdate(n){tt(this,Ao,hg).call(this),tt(this,Ao,R2).call(this,n)}getCurrentResult(){return Z(this,ba)}reset(){var n;(n=Z(this,Zr))==null||n.removeObserver(this),we(this,Zr,void 0),tt(this,Ao,hg).call(this),tt(this,Ao,R2).call(this)}mutate(n,r){var s;return we(this,Eo,r),(s=Z(this,Zr))==null||s.removeObserver(this),we(this,Zr,Z(this,bo).getMutationCache().build(Z(this,bo),this.options)),Z(this,Zr).addObserver(this),Z(this,Zr).execute(n)}},bo=new WeakMap,ba=new WeakMap,Zr=new WeakMap,Eo=new WeakMap,Ao=new WeakSet,hg=function(){var r;const n=((r=Z(this,Zr))==null?void 0:r.state)??Xx();we(this,ba,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},R2=function(n){Ln.batch(()=>{var r,s,i,o,a,c,d,f;if(Z(this,Eo)&&this.hasListeners()){const m=Z(this,ba).variables,y=Z(this,ba).context,v={client:Z(this,bo),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(s=(r=Z(this,Eo)).onSuccess)==null||s.call(r,n.data,m,y,v)}catch(_){Promise.reject(_)}try{(o=(i=Z(this,Eo)).onSettled)==null||o.call(i,n.data,null,m,y,v)}catch(_){Promise.reject(_)}}else if((n==null?void 0:n.type)==="error"){try{(c=(a=Z(this,Eo)).onError)==null||c.call(a,n.error,m,y,v)}catch(_){Promise.reject(_)}try{(f=(d=Z(this,Eo)).onSettled)==null||f.call(d,void 0,n.error,m,y,v)}catch(_){Promise.reject(_)}}}this.listeners.forEach(m=>{m(Z(this,ba))})})},lP),Hi,uP,EG=(uP=class extends md{constructor(e={}){super();ze(this,Hi);this.config=e,we(this,Hi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??A4(s,n);let o=this.get(i);return o||(o=new gG({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Z(this,Hi).has(e.queryHash)||(Z(this,Hi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Z(this,Hi).get(e.queryHash);n&&(e.destroy(),n===e&&Z(this,Hi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Z(this,Hi).get(e)}getAll(){return[...Z(this,Hi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>YC(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>YC(e,r)):n}notify(e){Ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Hi=new WeakMap,uP),hn,Ea,Ca,Lc,Uc,Pa,Vc,Gc,cP,CG=(cP=class{constructor(t={}){ze(this,hn);ze(this,Ea);ze(this,Ca);ze(this,Lc);ze(this,Uc);ze(this,Pa);ze(this,Vc);ze(this,Gc);we(this,hn,t.queryCache||new EG),we(this,Ea,t.mutationCache||new kG),we(this,Ca,t.defaultOptions||{}),we(this,Lc,new Map),we(this,Uc,new Map),we(this,Pa,0)}mount(){sm(this,Pa)._++,Z(this,Pa)===1&&(we(this,Vc,z4.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,hn).onFocus())})),we(this,Gc,g0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Z(this,hn).onOnline())})))}unmount(){var t,e;sm(this,Pa)._--,Z(this,Pa)===0&&((t=Z(this,Vc))==null||t.call(this),we(this,Vc,void 0),(e=Z(this,Gc))==null||e.call(this),we(this,Gc,void 0))}isFetching(t){return Z(this,hn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Z(this,Ea).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,hn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Z(this,hn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Fa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Z(this,hn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Z(this,hn).get(r.queryHash),i=s==null?void 0:s.state.data,o=iG(e,i);if(o!==void 0)return Z(this,hn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ln.batch(()=>Z(this,hn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Z(this,hn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Z(this,hn);Ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Z(this,hn);return Ln.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ln.batch(()=>Z(this,hn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ar).catch(Ar)}invalidateQueries(t,e={}){return Ln.batch(()=>(Z(this,hn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ln.batch(()=>Z(this,hn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ar)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Z(this,hn).build(this,e);return n.isStaleByTime(Fa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ar).catch(Ar)}fetchInfiniteQuery(t){return t.behavior=i6(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ar).catch(Ar)}ensureInfiniteQueryData(t){return t.behavior=i6(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return g0.isOnline()?Z(this,Ea).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,hn)}getMutationCache(){return Z(this,Ea)}getDefaultOptions(){return Z(this,Ca)}setDefaultOptions(t){we(this,Ca,t)}setQueryDefaults(t,e){Z(this,Lc).set(su(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Z(this,Lc).values()],n={};return e.forEach(r=>{Th(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Z(this,Uc).set(su(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Z(this,Uc).values()],n={};return e.forEach(r=>{Th(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Z(this,Ca).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=A4(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===j4&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Z(this,Ca).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Z(this,hn).clear(),Z(this,Ea).clear()}},hn=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,Lc=new WeakMap,Uc=new WeakMap,Pa=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,cP),PG=Q.createContext(void 0),Jx=t=>{const e=Q.useContext(PG);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},eN=Q.createContext(!1),$G=()=>Q.useContext(eN);eN.Provider;function TG(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xG=Q.createContext(TG()),NG=()=>Q.useContext(xG),RG=(t,e,n)=>{const r=n!=null&&n.state.error&&typeof t.throwOnError=="function"?M4(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},OG=t=>{Q.useEffect(()=>{t.clearReset()},[t])},IG=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||M4(n,[t.error,r])),AG=t=>{if(t.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},jG=(t,e)=>t.isLoading&&t.isFetching&&!e,MG=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,a6=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function zG(t,e,n){var y,v,_,E;const r=$G(),s=NG(),i=Jx(n),o=i.defaultQueryOptions(t);(v=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_beforeQuery)==null||v.call(y,o);const a=i.getQueryCache().get(o.queryHash);o._optimisticResults=r?"isRestoring":"optimistic",AG(o),RG(o,s,a),OG(s);const c=!i.getQueryCache().get(o.queryHash),[d]=Q.useState(()=>new e(i,o)),f=d.getOptimisticResult(o),m=!r&&t.subscribed!==!1;if(Q.useSyncExternalStore(Q.useCallback(k=>{const p=m?d.subscribe(Ln.batchCalls(k)):Ar;return d.updateResult(),p},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),Q.useEffect(()=>{d.setOptions(o)},[o,d]),MG(o,f))throw a6(o,d,s);if(IG({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:a,suspense:o.suspense}))throw f.error;if((E=(_=i.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||E.call(_,o,f),o.experimental_prefetchInRender&&!ru&&jG(f,r)){const k=c?a6(o,d,s):a==null?void 0:a.promise;k==null||k.catch(Ar).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function DG(t,e){return zG(t,yG,e)}function FG(t,e){const n=Jx(e),[r]=Q.useState(()=>new bG(n,t));Q.useEffect(()=>{r.setOptions(t)},[r,t]);const s=Q.useSyncExternalStore(Q.useCallback(o=>r.subscribe(Ln.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=Q.useCallback((o,a)=>{r.mutate(o,a).catch(Ar)},[r]);if(s.error&&M4(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const LG="0.70.0",UG={version:LG};function VG(t,e,n){var i;const r=DG({queryKey:["tambo-session-token",n],queryFn:async()=>{const o={grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",subject_token:n,subject_token_type:"urn:ietf:params:oauth:token-type:access_token"},a=new URLSearchParams(o).toString(),c=new TextEncoder().encode(a);return await t.beta.auth.getToken(c)},enabled:!!n,refetchInterval:o=>{var a;return(a=o.state.data)!=null&&a.expires_in?o.state.data.expires_in*1e3:!1}},e),s=((i=r.data)==null?void 0:i.access_token)??null;return Q.useEffect(()=>{t.bearer=s},[s,t]),r}const gd=Q.createContext(void 0),GG=({children:t,tamboUrl:e,apiKey:n,environment:r,userToken:s,additionalHeaders:i})=>{const o=Q.useMemo(()=>({apiKey:n,defaultHeaders:{"X-Tambo-React-Version":UG.version,...i},baseURL:e??void 0,environment:r??void 0}),[i,n,e,r]),a=Q.useMemo(()=>new En(o),[o]),c=Q.useMemo(()=>new CG,[]),{isFetching:d}=VG(a,c,s);return Te.createElement(gd.Provider,{value:{client:a,queryClient:c,isUpdatingToken:d,additionalHeaders:o.defaultHeaders}},t)},tN=()=>{const t=Te.useContext(gd);if(t===void 0)throw new Error("useTamboClient must be used within a TamboClientProvider");return t.client},nN=()=>{const t=Te.useContext(gd);if(t===void 0)throw new Error("useTamboQueryClient must be used within a TamboClientProvider");return t.queryClient};var qa;(function(t){t.SSE="sse",t.HTTP="http"})(qa||(qa={}));function rN(t){const e=t.customHeaders?JSON.stringify(Object.entries(t.customHeaders).map(([n,r])=>[n.toLowerCase(),r]).sort(([n],[r])=>n.localeCompare(r))):"";return`${t.url}|${t.transport??qa.HTTP}|${e}`}function HG(t){var e;try{const r=new URL(t).hostname;let i=[...r.split(".")];i.length>=3&&i[i.length-1].length<=3&&i[i.length-2].length<=3?i=i.slice(0,-2):i.length>=2&&(i=i.slice(0,-1));const o=new Set(["www","api","mcp","app","staging","dev","prod"]);for(let a=i.length-1;a>=0;a--){const c=i[a];if(c&&!o.has(c.toLowerCase()))return c.toLowerCase()}return((e=i[i.length-1])==null?void 0:e.toLowerCase())||r}catch{return t.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}}function E1(t){const e=typeof t=="string"?{url:t,transport:qa.HTTP}:t,n=e.serverKey??HG(e.url),r=e.transport??qa.HTTP;return{...e,transport:r,serverKey:n}}function qG(t){if(t.length===0)return t;const e=new Map;for(const s of t){const i=rN(s);e.set(i,s)}const n=Array.from(e.values()),r=new Map;return n.map(s=>{const i=s.serverKey,o=(r.get(i)??0)+1;return r.set(i,o),o===1?s:{...s,serverKey:`${i}-${o}`}})}function BG(t){return t.type==="object"||t.properties!==void 0}function WG(t,e){let n;if(pd(t))try{n=td(t)}catch{return}else if(x4(t))n=t;else return;if(!BG(n))throw new Error(`${e} must be an object schema (e.g., z.object({...})). Received type: "${n.type??"unknown"}". Tool parameters are passed as a single object argument.`)}function ZG(t){if(!t||typeof t!="object")throw new Error("Tool must be an object");const e="name"in t&&typeof t.name=="string"?t.name:"<unknown>";if("toolSchema"in t)throw new Error(`Tool "${e}" uses deprecated "toolSchema" property. Migrate to "inputSchema" and "outputSchema" properties. See migration guide: https://tambo.ai/docs/migration/toolschema`);if(!("name"in t)||typeof t.name!="string")throw new Error("Tool must have a 'name' property of type string");if(!("description"in t)||typeof t.description!="string")throw new Error(`Tool "${t.name}" must have a 'description' property of type string`);if(!("tool"in t)||typeof t.tool!="function")throw new Error(`Tool "${t.name}" must have a 'tool' property of type function`);if(!("inputSchema"in t))throw new Error(`Tool "${t.name}" must have an 'inputSchema' property`);if(!("outputSchema"in t))throw new Error(`Tool "${t.name}" must have an 'outputSchema' property`);if($h(t.name,"tool"),t.inputSchema&&(WG(t.inputSchema,`inputSchema of tool "${t.name}"`),fx(t.inputSchema,`inputSchema of tool "${t.name}"`)),"maxCalls"in t&&t.maxCalls!==void 0&&t.maxCalls!==null){const n=t.maxCalls;if(typeof n!="number"||!Number.isInteger(n)||n<0)throw new Error(`maxCalls for tool "${t.name}" must be a positive integer`)}}function KG(t,e,n){if(t)return console.warn("propsDefinition is deprecated. Use propsSchema instead."),t;if(pd(e))try{return td(e)}catch(r){throw console.error(`Error converting ${n} props schema to JSON Schema:`,r),new Error(`Error converting ${n} props schema to JSON Schema: ${r}`)}if(x4(e))return e;throw new Error(`Invalid props schema for ${n}`)}function QG(t){const{name:e,propsSchema:n,propsDefinition:r}=t;if($h(e,"component"),!n&&!r)throw new Error(`Component ${e} must have either propsSchema (recommended) or propsDefinition defined`);if(n&&r)throw new Error(`Component ${e} cannot have both propsSchema and propsDefinition defined. Use only one. We recommend using propsSchema.`);return n&&fx(n,`propsSchema of component "${e}"`),{props:KG(r,n,e)}}function YG(t,e,n,r){if($h(t,"component"),$h(e,"tool"),!n)throw new Error(`Component ${t} not found in registry`);if(!r)throw new Error(`Tool ${e} not found in registry`)}function l6(t,e){const n=t!=null,r=e!=null;if(n!==r)throw new Error(`Both listResources and getResource must be provided together, or neither should be provided. Got: listResources=${n?"defined":"undefined"}, getResource=${r?"defined":"undefined"}`)}function C1(t){if(!t.uri)throw new Error("Resource must have a 'uri' field");if(!t.name)throw new Error(`Resource with URI '${t.uri}' must have a 'name' field`)}const F4=Q.createContext({componentList:{},toolRegistry:{},componentToolAssociations:{},mcpServerInfos:[],resources:[],resourceSource:null,registerComponent:()=>{},registerTool:()=>{},registerTools:()=>{},addToolAssociation:()=>{},registerMcpServer:()=>{},registerMcpServers:()=>{},registerResource:()=>{},registerResources:()=>{},registerResourceSource:()=>{}}),XG=({children:t,components:e,tools:n,mcpServers:r,resources:s,listResources:i,getResource:o,onCallUnregisteredTool:a})=>{const[c,d]=Q.useState({}),[f,m]=Q.useState({}),[y,v]=Q.useState({}),[_,E]=Q.useState([]),[k,p]=Q.useState([]),[w,g]=Q.useState([]),[C,$]=Q.useState(null),N=Q.useCallback(ee=>(ue,L)=>(ZG(L),ue[L.name]&&ee&&console.warn(`Overwriting tool ${L.name}`),{...ue,[L.name]:L}),[]),M=Q.useCallback((ee,ue=!0)=>{m(L=>N(ue)(L,ee))},[N]),A=Q.useCallback((ee,ue=!0)=>{m(L=>ee.reduce(N(ue),L))},[N]),q=Q.useCallback(ee=>{const ue=E1(ee);p(L=>[...L,ue])},[]),G=Q.useCallback(ee=>{const ue=ee.map(E1);p(L=>[...L,...ue])},[]),B=Q.useCallback((ee,ue)=>{YG(ee,ue.name,!!c[ee],!!f[ue.name]),v(L=>({...L,[ee]:[...L[ee]||[],ue.name]}))},[c,f]),Y=Q.useCallback((ee,ue=!0)=>{const{name:L,description:I,component:V,loadingComponent:z,associatedTools:b}=ee,{props:T}=QG(ee);d(j=>(j[L]&&ue&&console.warn(`overwriting component ${L}`),{...j,[L]:{component:V,loadingComponent:z,name:L,description:I,props:T,contextTools:[]}})),b&&(A(b),v(j=>({...j,[L]:b.map(O=>O.name)})))},[A]);Q.useEffect(()=>{e&&e.forEach(ee=>{Y(ee,!1)})},[Y,e]),Q.useEffect(()=>{n&&A(n,!1)},[A,n]),Q.useEffect(()=>{if(!r||r.length===0){E([]);return}const ee=r.map(E1);E(ee)},[r]),Q.useEffect(()=>{l6(i,o),s?(s.forEach(ee=>C1(ee)),g(s)):g([]),$(i&&o?{listResources:i,getResource:o}:null)},[s,i,o]);const ie=Q.useCallback(ee=>{C1(ee),g(ue=>[...ue,ee])},[]),se=Q.useCallback(ee=>{ee.forEach(ue=>C1(ue)),g(ue=>[...ue,...ee])},[]),ae=Q.useCallback(ee=>{l6(ee.listResources,ee.getResource),$(ee)},[]),ve=Q.useMemo(()=>{const ee=[..._,...k];return qG(ee)},[_,k]),$e={componentList:c,toolRegistry:f,componentToolAssociations:y,mcpServerInfos:ve,resources:w,resourceSource:C,registerComponent:Y,registerTool:M,registerTools:A,addToolAssociation:B,registerMcpServer:q,registerMcpServers:G,registerResource:ie,registerResources:se,registerResourceSource:ae,onCallUnregisteredTool:a};return Te.createElement(F4.Provider,{value:$e},t)},_y=()=>Q.useContext(F4),JG=()=>Q.useContext(F4).mcpServerInfos,sN=Q.createContext({registerComponent:()=>{},registerTool:()=>{},registerTools:()=>{},addToolAssociation:()=>{}}),eH=({children:t})=>{const e=tN(),{registerComponent:n,addToolAssociation:r,registerTool:s,registerTools:i}=_y(),o={client:e,registerComponent:n,registerTool:s,registerTools:i,addToolAssociation:r};return Te.createElement(sN.Provider,{value:o},t)},iN=()=>Q.useContext(sN);async function tH(t){const e=Object.entries(t);return e.length===0?[]:(await Promise.all(e.map(async([r,s])=>{try{const i=await s();return i==null?null:{name:r,context:i}}catch(i){return console.error(`Error running context helper ${r}:`,i),null}}))).filter(Boolean)}const oN=Q.createContext(null),nH=({children:t,contextHelpers:e})=>{const[n,r]=Q.useState({}),s=Q.useCallback((d,f)=>{r(m=>({...m,[d]:f}))},[]),i=Q.useCallback((d,f)=>{r(m=>{const{[d]:y,...v}=m;return f===void 0||y===f?v:m})},[]);Q.useEffect(()=>{const d=[];if(e)for(const[f,m]of Object.entries(e))s(f,m),d.push([f,m]);return()=>{for(const[f,m]of d)i(f,m)}},[s,e,i]);const o=Q.useCallback(async()=>await tH(n),[n]),a=Q.useCallback(()=>n,[n]),c=Q.useMemo(()=>({getAdditionalContext:o,getContextHelpers:a,addContextHelper:s,removeContextHelper:i}),[o,a,s,i]);return Te.createElement(oN.Provider,{value:c},t)},wy=()=>{const t=Q.useContext(oN);return t||{getAdditionalContext:async()=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},getContextHelpers:()=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},addContextHelper:(e,n)=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")},removeContextHelper:e=>{throw new Error("useTamboContextHelpers must be used within a TamboContextHelpersProvider")}}},aN=Q.createContext({interactableComponents:[],addInteractableComponent:()=>"",removeInteractableComponent:()=>{},updateInteractableComponentProps:()=>"",getInteractableComponent:()=>{},getInteractableComponentsByName:()=>[],clearAllInteractableComponents:()=>{},setInteractableState:()=>{},getInteractableComponentState:()=>{},setInteractableSelected:()=>{},clearInteractableSelections:()=>{}}),rH=({children:t})=>{const[e,n]=Q.useState([]),{registerTool:r}=iN(),{addContextHelper:s,removeContextHelper:i}=wy(),o=Q.useMemo(()=>Az(e),[e]);Q.useEffect(()=>(s("interactables",o),()=>{i("interactables")}),[o,s,i]),Q.useEffect(()=>{e.length>0&&(r({name:"get_all_interactable_components",description:"Only use this tool if the user is asking about interactable components.Get all currently interactable components with their details including their current props. These are components that you can interact with on behalf of the user.",tool:()=>({components:e}),inputSchema:on({}),outputSchema:on({components:Bh(on({id:Ot(),name:Ot(),props:Em(Ot(),bm()),propsSchema:Em(Ot(),bm()).optional()}))})}),r({name:"get_interactable_component_by_id",description:"Get a specific interactable component by its ID",tool:({componentId:$})=>{const N=e.find(M=>M.id===$);return N?{success:!0,component:{id:N.id,componentName:N.name,props:N.props}}:{success:!1,error:`Component with ID ${$} not found`}},inputSchema:on({componentId:Ot().describe("The ID of the component")}),outputSchema:mC("success",[on({success:Cm(!0),component:on({id:Ot(),componentName:Ot(),props:Em(Ot(),bm())}).optional()}),on({success:Cm(!1),error:Ot()})])}),r({name:"remove_interactable_component",description:"Remove an interactable component from the system",tool:({componentId:$})=>{const N=e.find(M=>M.id===$);return N?(n(M=>M.filter(A=>A.id!==$)),{success:!0,componentId:$,removedComponent:{id:N.id,componentName:N.name,props:N.props}}):{success:!1,error:`Component with ID ${$} not found`}},inputSchema:on({componentId:Ot().describe("The ID of the component")}),outputSchema:mC("success",[on({success:Cm(!0),componentId:Ot(),removedComponent:on({id:Ot(),componentName:Ot(),props:Em(Ot(),bm())})}),on({success:Cm(!1),error:Ot()})])}))},[e,r]);const a=Q.useCallback(($,N)=>!N||Object.keys(N).length===0?`Warning: No props provided for component with ID ${$}.`:(n(M=>{const A=M.find(ie=>ie.id===$);if(!A||!Object.entries(N).some(([ie,se])=>A.props[ie]!==se))return M;const G={...A,props:{...A.props,...N}},B=[...M],Y=M.findIndex(ie=>ie.id===$);return B[Y]=G,B}),"Updated successfully"),[]),c=Q.useCallback(($,N)=>!N||Object.keys(N).length===0?`Warning: No state values provided for component with ID ${$}.`:(n((M=[])=>{const A=M.find(Y=>Y.id===$);if(!A)return M;const q=A.state??{},G={...q,...N};if(oz(q,G))return M;const B={...A,state:G};return M.map(Y=>Y.id===$?B:Y)}),"Updated successfully"),[]),d=Q.useCallback(($,N=60)=>{const M="update_component_props_",A=N-M.length;if($.id.length>A)throw new Error(`Interactable component id ${$.id} is too long. It must be less than ${A} characters.`);let q;if($.propsSchema){const B=td($.propsSchema);q=AC(B)}else q={type:"object",additionalProperties:!0};const G={type:"object",properties:{componentId:{type:"string",description:"The ID of the interactable component to update"},newProps:{...q,description:"The props to update. Provide only the props you want to change."}},required:["componentId","newProps"]};r({name:`${M}${$.id}`,description:`Update the props of interactable component ${$.id} (${$.name}). Provide partial props (only props to change).`,tool:({componentId:B,newProps:Y})=>a(B,Y),inputSchema:G,outputSchema:Ot()})},[r,a]),f=Q.useCallback(($,N=60)=>{const M="update_component_state_",A=N-M.length;if($.id.length>A)throw new Error(`Interactable component id ${$.id} is too long. It must be less than ${A} characters.`);let q={type:"object",additionalProperties:!0};if($.stateSchema){const B=td($.stateSchema);q=AC(B)}const G={type:"object",properties:{componentId:{type:"string",description:"The ID of the interactable component to update"},newState:{...q,description:"The state values to update. Provide only the keys you want to change."}},required:["componentId","newState"]};r({name:`${M}${$.id}`,description:`Update the state of interactable component ${$.id} (${$.name}). You may provide partial state (only keys to change).`,tool:({componentId:B,newState:Y})=>c(B,Y),inputSchema:G,outputSchema:Ot()})},[r,c]),m=Q.useCallback($=>{$h($.name,"component");const N=`-${Math.random().toString(36).slice(2,5)}`,M=`${$.name}${N}`,A={...$,id:M,state:$.state??{}};return d(A),f(A),n(q=>[...q,A]),M},[d,f]),y=Q.useCallback($=>{n(N=>N.filter(M=>M.id!==$))},[]),v=Q.useCallback($=>e.find(N=>N.id===$),[e]),_=Q.useCallback($=>e.filter(N=>N.name===$),[e]),E=Q.useCallback(()=>{n([])},[]),k=Q.useCallback(($,N,M)=>{n(A=>{const q=A.find(Y=>Y.id===$);if(!q)return console.warn(`Tried to update state for component ${$} but it was not found.`),A;const G={...q,state:{...q.state,[N]:M}};return A.map(Y=>Y.id===$?G:Y)})},[]),p=Q.useCallback($=>{const N=e.find(M=>M.id===$);return N==null?void 0:N.state},[e]),w=Q.useCallback(($,N)=>{n(M=>{let A=!1;const q=M.map(G=>G.id!==$?G:(A=!0,G.isSelected===N?G:{...G,isSelected:N}));return A?q:M})},[]),g=Q.useCallback(()=>{n($=>$.some(N=>N.isSelected)?$.map(N=>N.isSelected?{...N,isSelected:!1}:N):$)},[]),C={interactableComponents:e,addInteractableComponent:m,removeInteractableComponent:y,updateInteractableComponentProps:a,getInteractableComponent:v,getInteractableComponentsByName:_,clearAllInteractableComponents:E,setInteractableState:k,getInteractableComponentState:p,setInteractableSelected:w,clearInteractableSelections:g};return Te.createElement(aN.Provider,{value:C},t)},lN=()=>Q.useContext(aN),sH=Q.createContext(null),iH=({children:t,message:e,interactableMetadata:n})=>{const r=n?{...e,interactableMetadata:n}:e;return Te.createElement(sH.Provider,{value:r,key:e.id},t)};function oH(t,e,n){return Te.createElement(iH,{message:e,interactableMetadata:n},t)}function aH(){const[t,e]=Q.useState([]),n=async a=>await new Promise((c,d)=>{const f=new FileReader;f.onload=()=>c(f.result),f.onerror=d,f.readAsDataURL(a)}),r=Q.useCallback(async a=>{if(!a.type.startsWith("image/"))throw new Error("Only image files are allowed");const c=await n(a),d={id:crypto.randomUUID(),name:a.name,dataUrl:c,file:a,size:a.size,type:a.type};e(f=>[...f,d])},[]),s=Q.useCallback(async a=>{const c=a.filter(f=>f.type.startsWith("image/"));if(c.length===0)throw new Error("No valid image files provided");const d=await Promise.all(c.map(async f=>{const m=await n(f);return{id:crypto.randomUUID(),name:f.name,dataUrl:m,file:f,size:f.size,type:f.type}}));e(f=>[...f,...d])},[]),i=Q.useCallback(a=>{e(c=>c.filter(d=>d.id!==a))},[]),o=Q.useCallback(()=>{e([])},[]);return{images:t,addImage:r,addImages:s,removeImage:i,clearImages:o}}var br;(function(t){t.IDLE="IDLE",t.CHOOSING_COMPONENT="CHOOSING_COMPONENT",t.FETCHING_CONTEXT="FETCHING_CONTEXT",t.HYDRATING_COMPONENT="HYDRATING_COMPONENT",t.STREAMING_RESPONSE="STREAMING_RESPONSE",t.COMPLETE="COMPLETE",t.ERROR="ERROR",t.CANCELLED="CANCELLED"})(br||(br={}));function uN(t){return[br.IDLE,br.COMPLETE,br.ERROR,br.CANCELLED].includes(t)}function lH(t){const e=t.trim();return e.length===0?{isValid:!1,error:new Error("Message cannot be empty"),sanitizedInput:e}:e.length>1e4?{isValid:!1,error:new Error("Message is too long (max 10000 characters)"),sanitizedInput:e}:{isValid:!0,sanitizedInput:e}}const Hf={BROWSER_SIDE:"browser-side",TAMBO_INTERNAL:"tambo-internal",TAMBO_REGISTRY:"tambo-registry"},uH="registry";function cH(t){return!!t&&typeof t=="object"&&"type"in t&&typeof t.type=="string"}function dH(t){return Array.isArray(t)&&t.every(e=>cH(e))}function O2(t){if(typeof t=="string")return t;try{return JSON.stringify(t)??String(t)}catch{return String(t)}}var cN={},I2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(I2);(function(t){var e=sc&&sc.__createBinding||(Object.create?function(d,f,m,y){y===void 0&&(y=m);var v=Object.getOwnPropertyDescriptor(f,m);(!v||("get"in v?!f.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(d,y,v)}:function(d,f,m,y){y===void 0&&(y=m),d[y]=f[m]}),n=sc&&sc.__exportStar||function(d,f){for(var m in d)m!=="default"&&!Object.prototype.hasOwnProperty.call(f,m)&&e(f,d,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=I2;Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(I2,t);class s extends Error{}t.PartialJSON=s;class i extends Error{}t.MalformedJSON=i;function o(d,f=r.Allow.ALL){if(typeof d!="string")throw new TypeError(`expecting str, got ${typeof d}`);if(!d.trim())throw new Error(`${d} is empty`);return a(d.trim(),f)}t.parseJSON=o;const a=(d,f)=>{const m=d.length;let y=0;const v=$=>{throw new s(`${$} at position ${y}`)},_=$=>{throw new i(`${$} at position ${y}`)},E=()=>(C(),y>=m&&v("Unexpected end of input"),d[y]==='"'?k():d[y]==="{"?p():d[y]==="["?w():d.substring(y,y+4)==="null"||r.Allow.NULL&f&&m-y<4&&"null".startsWith(d.substring(y))?(y+=4,null):d.substring(y,y+4)==="true"||r.Allow.BOOL&f&&m-y<4&&"true".startsWith(d.substring(y))?(y+=4,!0):d.substring(y,y+5)==="false"||r.Allow.BOOL&f&&m-y<5&&"false".startsWith(d.substring(y))?(y+=5,!1):d.substring(y,y+8)==="Infinity"||r.Allow.INFINITY&f&&m-y<8&&"Infinity".startsWith(d.substring(y))?(y+=8,1/0):d.substring(y,y+9)==="-Infinity"||r.Allow._INFINITY&f&&1<m-y&&m-y<9&&"-Infinity".startsWith(d.substring(y))?(y+=9,-1/0):d.substring(y,y+3)==="NaN"||r.Allow.NAN&f&&m-y<3&&"NaN".startsWith(d.substring(y))?(y+=3,NaN):g()),k=()=>{const $=y;let N=!1;for(y++;y<m&&(d[y]!=='"'||N&&d[y-1]==="\\");)N=d[y]==="\\"?!N:!1,y++;if(d.charAt(y)=='"')try{return JSON.parse(d.substring($,++y-Number(N)))}catch(M){_(String(M))}else if(r.Allow.STR&f)try{return JSON.parse(d.substring($,y-Number(N))+'"')}catch{return JSON.parse(d.substring($,d.lastIndexOf("\\"))+'"')}v("Unterminated string literal")},p=()=>{y++,C();const $={};try{for(;d[y]!=="}";){if(C(),y>=m&&r.Allow.OBJ&f)return $;const N=k();C(),y++;try{const M=E();$[N]=M}catch(M){if(r.Allow.OBJ&f)return $;throw M}C(),d[y]===","&&y++}}catch{if(r.Allow.OBJ&f)return $;v("Expected '}' at end of object")}return y++,$},w=()=>{y++;const $=[];try{for(;d[y]!=="]";)$.push(E()),C(),d[y]===","&&y++}catch{if(r.Allow.ARR&f)return $;v("Expected ']' at end of array")}return y++,$},g=()=>{if(y===0){d==="-"&&_("Not sure what '-' is");try{return JSON.parse(d)}catch(N){if(r.Allow.NUM&f)try{return JSON.parse(d.substring(0,d.lastIndexOf("e")))}catch{}_(String(N))}}const $=y;for(d[y]==="-"&&y++;d[y]&&",]}".indexOf(d[y])===-1;)y++;y==m&&!(r.Allow.NUM&f)&&v("Unterminated number literal");try{return JSON.parse(d.substring($,y))}catch{d.substring($,y)==="-"&&v("Not sure what '-' is");try{return JSON.parse(d.substring($,d.lastIndexOf("e")))}catch(M){_(String(M))}}},C=()=>{for(;y<m&&` 
\r	`.includes(d[y]);)y++};return E()},c=o;t.parse=c})(cN);function fH(t){return t===null||typeof t!="object"&&typeof t!="function"?!1:typeof t.then=="function"}const hH=(t,e,n)=>{const r=[];for(const[s,i]of Object.entries(t)){const a=(n[s]||[]).map(c=>{const d=e[c];return d?L4(d):null}).filter(c=>c!==null);r.push({name:i.name,description:i.description,props:i.props,contextTools:a})}return r},pH=(t,e)=>Object.values(t).filter(n=>!Object.values(e).flat().includes(n.name)),mH=(t,e)=>{const n=e[t];if(!n)throw new Error(`Tambo tried to use Component ${t}, but it was not found.`);return n},L4=t=>{const e=yV(t);return{name:t.name,description:t.description,parameters:e,..."maxCalls"in t&&t.maxCalls!==void 0?{maxCalls:t.maxCalls}:{},..."annotations"in t&&t.annotations!==void 0?{annotations:t.annotations}:{}}};function P1(t,e){var c,d,f;if(!((c=t.component)!=null&&c.componentName))throw new Error("Component not found");const n=cN.parse(JSON.stringify(t.component.props)),r=mH(t.component.componentName,e);let s=n;if(pd(r.props)){const m=r.props["~standard"].validate(n);if(fH(m))throw new Error("Async schema validation is not supported for component props");if("value"in m)s=m.value;else{const y=((f=(d=m.issues)==null?void 0:d[0])==null?void 0:f.message)??"Schema validation failed";throw new Error(`Component props validation failed: ${y}`)}}const i=Te.createElement(r.component,s),o={...t,component:{...t.component,props:s}},a=oH(i,o);return{...o,renderedComponent:a}}const u6=async(t,e,n)=>{if(!(t!=null&&t.toolName))throw new Error("Tool name is required");try{const{tool:r,tamboTool:s}=gH(t.toolName,e);if(!r){if(n)return{result:await n(t.toolName,t.parameters)};throw new Error(`Tool ${t.toolName} not found in registry`)}return{result:await yH(t,r),tamboTool:s}}catch(r){return console.error("Error in calling tool: ",r),{result:`When attempting to call tool ${t.toolName} the following error occurred: ${r}. Explain to the user that the tool call failed and try again if needed.`,error:r instanceof Error?r.message:"Unknown error"}}},gH=(t,e)=>{const n=e[t];if(!n)return{tool:null,tamboTool:null};const r=L4(n);return{tool:{getComponentContext:n.tool,definition:r},tamboTool:n}},yH=async(t,e)=>{const n=t.parameters??[],r=Object.fromEntries(n.map(s=>[s.parameterName,s.parameterValue]));return await e.getComponentContext(r)},dN=Q.createContext(void 0),vH=({children:t,generationStage:e,statusMessage:n})=>{const r=uN(e),s=Q.useMemo(()=>({generationStage:e,generationStatusMessage:n,isIdle:r}),[e,n,r]);return Te.createElement(dN.Provider,{value:s},t)},Bi={id:"placeholder",messages:[],createdAt:"",projectId:"",updatedAt:"",metadata:{}},Sy=Q.createContext({thread:Bi,currentThreadId:Bi.id,currentThread:Bi,threadMap:{[Bi.id]:Bi},setThreadMap:()=>{throw new Error("setThreadMap not implemented")},switchCurrentThread:()=>{throw new Error("switchCurrentThread not implemented")},startNewThread:()=>{throw new Error("startNewThread not implemented")},updateThreadName:()=>{throw new Error("updateThreadName not implemented")},generateThreadName:()=>{throw new Error("generateThreadName not implemented")},addThreadMessage:()=>{throw new Error("updateThreadMessageHistory not implemented")},streaming:!0,updateThreadMessage:()=>{throw new Error("updateThreadMessage not implemented")},sendThreadMessage:()=>{throw new Error("sendThreadMessage not implemented")},cancel:()=>{throw new Error("cancel not implemented")}}),_H=({children:t,streaming:e=!0,initialMessages:n=[],autoGenerateThreadName:r=!0,autoGenerateNameThreshold:s=3,contextKey:i})=>{const o=Q.useMemo(()=>({id:"placeholder",messages:n.map(b=>({...b,id:b.id??crypto.randomUUID(),threadId:"placeholder",createdAt:b.createdAt??new Date().toISOString(),componentState:b.componentState??{}})),createdAt:"",projectId:"",updatedAt:"",metadata:{},contextKey:i}),[i,n]),[a,c]=Q.useState({[o.id]:o}),d=tN(),f=nN(),{componentList:m,toolRegistry:y,componentToolAssociations:v,onCallUnregisteredTool:_}=_y(),{getAdditionalContext:E}=wy(),[k,p]=Q.useState(!1),w=Q.useRef(k),[g,C]=Q.useState(o.id),$=a[g],N=($==null?void 0:$.generationStage)??br.IDLE,M=($==null?void 0:$.statusMessage)??"",A=Q.useMemo(()=>{const b=new Map;if($)for(const T of $.messages)b.set(T.id,T);return b},[$]);Q.useEffect(()=>{w.current=k},[k]);const q=Q.useCallback(async(b,T)=>{try{const j=await d.beta.projects.getCurrent();f.setQueryData(["threads",j.id,T],b),await f.invalidateQueries({queryKey:["threads"]})}catch(j){console.warn("Failed to update threads cache:",j)}},[d.beta.projects,f]),G=Q.useCallback(async(b,T)=>{const j={...Bi,id:b,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await q(O=>O&&{...O,items:[j,...O.items??[]],total:(O.total??0)+1,count:(O.count??0)+1},T)},[q]),B=Q.useCallback(async(b,T,j)=>{await q(O=>O!=null&&O.items?{...O,items:O.items.map(F=>F.id===b?T(F):F),total:O.total,count:O.count}:O,j)},[q]),Y=Q.useCallback(async b=>{const T=await d.beta.threads.retrieve(b),j={...T,messages:T.messages.map(O=>{var F;return A.has(O.id)?{...A.get(O.id),...O}:(F=O.component)!=null&&F.componentName?P1(O,m):O})};c(O=>({...O,[b]:j}))},[d.beta.threads,m,A]);Q.useEffect(()=>{async function b(){try{await Y(g)}catch(T){console.error("Failed to fetch thread:",T)}}g&&g!==o.id&&!a[g]&&b().catch(T=>{console.error("Unexpected error in loadThread:",T)})},[g,Y,a,o.id]);const ie=Q.useCallback(async(b,T=!0,j=new Date().toISOString())=>{var le;if(!$)return console.warn("Cannot add messages if we do not have a current thread"),[];const O={...b,createdAt:j},F=b.threadId,W=O.id;if(c(ce=>{var Ie;if(!F)return ce;const U=((Ie=ce[F])==null?void 0:Ie.messages)||[],dt=U.find(Je=>Je.id===W)?U.map(Je=>Je.id===W?O:Je):[...U,O];return{...ce,[F]:{...ce[F],messages:dt}}}),T)try{await d.beta.threads.messages.create(b.threadId,{content:b.content,role:b.role,additionalContext:O.additionalContext})}catch(ce){throw console.error("Failed to add message to server",ce),c(U=>{var Fe;const dt=(((Fe=U[F])==null?void 0:Fe.messages)||[]).filter(Ie=>Ie.id!==W);return{...U,[F]:{...U[F],messages:dt}}}),ce}return((le=a[F])==null?void 0:le.messages)||[]},[d.beta.threads.messages,$,a]),se=Q.useCallback(async(b,T,j=!0,O=new Date().toISOString())=>{if(c(F=>{var ce;const le=(((ce=F[T.threadId])==null?void 0:ce.messages)||[]).map(U=>U.id===b?{...U,...T,id:U.id,createdAt:T.createdAt??U.createdAt??O}:U);return{...F,[T.threadId]:{...F[T.threadId],messages:le}}}),j&&T.content&&T.role)try{await d.beta.threads.messages.create(T.threadId,{content:T.content,role:T.role,additionalContext:T.additionalContext})}catch(F){throw console.error("Failed to update message on server",F),c(W=>{var ce,U;const le=(U=(ce=W[T.threadId])==null?void 0:ce.messages)==null?void 0:U.filter(H=>H.id!==b);return{...W,[T.threadId]:{...W[T.threadId],messages:le}}}),F}},[d.beta.threads.messages]),ae=Q.useCallback(async(b,T)=>{if(b??(b=g),b===o.id)return console.warn("Cannot generate name for empty thread"),a[b];const j=await d.beta.threads.generateName(b);return c(O=>O[b]?{...O,[b]:{...O[b],name:j.name}}:O),await B(b,O=>({...O,name:j.name}),T),j},[d.beta.threads,g,a,o.id,B]),ve=Q.useCallback((b,T)=>{c(j=>{const O=j[b];if(!O||!r||s==null||O.id===o.id)return j;const F=O.messages.length;return!O.name&&F>=s&&ae(b,T).catch(W=>{console.error("Failed to generate thread name:",W)}),j})},[r,s,o.id,ae]),$e=Q.useCallback(()=>{C(o.id),c(b=>({...b,[o.id]:o}))},[o]),ee=Q.useCallback(async(b,T)=>{var O;T??(T=g);const j=(O=a[T])==null?void 0:O.name;if(c(F=>F[T]?{...F,[T]:{...F[T],name:b}}:F),T!==o.id)try{const F=await d.beta.projects.getCurrent();await d.beta.threads.update(T,{name:b,projectId:F.id})}catch(F){throw console.error("Failed to update thread name on server",F),c(W=>W[T]?{...W,[T]:{...W[T],name:j}}:W),F}},[g,d.beta.projects,d.beta.threads,o.id,a]),ue=Q.useCallback(async(b,T=!0)=>{if(b===o.id){console.warn("Switching to placeholder thread, may be a bug.");return}C(b),c(j=>j[b]?j:{...j,[b]:{...j[o.id],id:b}}),T&&await Y(b)},[Y,o]),L=Q.useCallback((b,T,j)=>{c(O=>({...O,[b]:{...O[b],generationStage:T,statusMessage:j}}))},[]),I=Q.useCallback(async b=>{b??(b=g);const T=($==null?void 0:$.generationStage)??br.IDLE;uN(T)||(p(!0),c(j=>j[b]?{...j,[b]:{...j[b],generationStage:br.CANCELLED,messages:j[b].messages.map(O=>O.id===j[b].messages[j[b].messages.length-1].id?{...O,isCancelled:!0}:O)}}:j),await d.beta.threads.cancel(b))},[d.beta.threads,g,$==null?void 0:$.generationStage]),V=Q.useCallback(async(b,T,j,O)=>{var ce,U,H,dt,Fe;if(w.current)return p(!1),Om(j);let F,W=!1;L(j,br.STREAMING_RESPONSE);for await(const Ie of b)if(Ie.mcpAccessToken&&c(Je=>{const gt=Je[j];return gt?{...Je,[j]:{...gt,mcpAccessToken:Ie.mcpAccessToken}}:Je}),Ie.responseMessageDto.toolCallRequest){const Je=Ie.responseMessageDto.toolCallRequest.toolName;L(Ie.responseMessageDto.threadId,br.FETCHING_CONTEXT),await se(Ie.responseMessageDto.id,{...Ie.responseMessageDto},!1);const gt=await u6(Ie.responseMessageDto.toolCallRequest,y,_);if(w.current)return p(!1),Om(j);const vn=await wH(gt),Vt={...T,initialMessages:void 0,...Je?{toolCallCounts:{...T.toolCallCounts??{},[Je]:(((ce=T.toolCallCounts)==null?void 0:ce[Je])??0)+1}}:{},messageToAppend:{content:vn,role:"tool",actionType:"tool_response",component:Ie.responseMessageDto.component,tool_call_id:Ie.responseMessageDto.tool_call_id,error:gt.error}};await se(Ie.responseMessageDto.id,{...Ie.responseMessageDto,error:gt.error},!1),await ie({threadId:Ie.responseMessageDto.threadId,content:vn,role:"tool",id:crypto.randomUUID(),createdAt:new Date().toISOString(),componentState:{},actionType:"tool_response",tool_call_id:Ie.responseMessageDto.tool_call_id,error:gt.error},!1),L(Ie.responseMessageDto.threadId,br.STREAMING_RESPONSE);const $t=await QC(d,Vt,Ie.responseMessageDto.threadId);return await V($t,Vt,Ie.responseMessageDto.threadId,O)}else{if(w.current)return p(!1),F??Om(j);if(!W&&Ie.responseMessageDto.threadId&&Ie.responseMessageDto.threadId!==($==null?void 0:$.id)){W=!0;const Je=g===Bi.id;await ue(Ie.responseMessageDto.threadId,!1),Je&&(await G(Ie.responseMessageDto.threadId,O),ve(Ie.responseMessageDto.threadId,O))}if(!F)F=(U=Ie.responseMessageDto.component)!=null&&U.componentName?P1(Ie.responseMessageDto,m):Ie.responseMessageDto,await ie(F,!1);else{if((H=Ie.responseMessageDto.component)!=null&&H.toolCallRequest){const{toolName:vn}=Ie.responseMessageDto.component.toolCallRequest,Vt=vn?y[vn]:void 0;(((dt=Vt==null?void 0:Vt.annotations)==null?void 0:dt.tamboStreamableHint)??!1)&&await u6(Ie.responseMessageDto.component.toolCallRequest,y,_)}const Je=F.id;(Fe=Ie.responseMessageDto.component)!=null&&Fe.componentName?F=P1(Ie.responseMessageDto,m):F=Ie.responseMessageDto,Ie.responseMessageDto.id!==Je?await ie(F,!1):await se(F.id,F,!1)}}const le=(F==null?void 0:F.threadId)??j;return L(le,br.COMPLETE),ve(le,O),F??{...Om(le),content:[{type:"text",text:"Error processing stream"}]}},[ie,G,ve,d,m,$==null?void 0:$.id,g,_,ue,y,se,L]),z=Q.useCallback(async(b,T={})=>{p(!1);const{threadId:j=g??o.id,streamResponse:O=e,forceToolChoice:F,contextKey:W,additionalContext:le,content:ce}=T;if(!O)throw new Error("Non-streaming mode is deprecated. Use streaming mode instead.");L(j,br.FETCHING_CONTEXT);const U=await E(),H={...le??{}};for(const $t of U)H[$t.name]=$t.context;const dt=crypto.randomUUID(),Fe=ce??[{type:"text",text:b}];await ie({content:Fe,renderedComponent:null,role:"user",threadId:j,id:dt,createdAt:new Date().toISOString(),componentState:{},additionalContext:H},!1),ve(j,W);const Ie=hH(m,y,v),Je=pH(y,v),gt={},vn={messageToAppend:{content:Fe,role:"user",additionalContext:H},contextKey:W,availableComponents:Ie,clientTools:Je.map($t=>L4($t)),forceToolChoice:F,toolCallCounts:gt,...j===o.id&&n.length>0&&{initialMessages:n.map($t=>({content:$t.content,role:$t.role,additionalContext:$t.additionalContext}))}};let Vt;try{Vt=await QC(d,vn,j===o.id?void 0:j)}catch($t){throw L(j,br.ERROR),c(Nn=>{const Pn=Nn[j];return Pn?{...Nn,[j]:{...Pn,messages:Pn.messages.filter(fn=>fn.id!==dt)}}:Nn}),$t}try{return await V(Vt,vn,j,W)}catch($t){throw L(j,br.ERROR),c(Nn=>{const Pn=Nn[j];return Pn?{...Nn,[j]:{...Pn,messages:Pn.messages.filter(fn=>fn.id!==dt)}}:Nn}),$t}},[m,y,v,g,ie,d,L,V,e,E,o.id,n,ve]);return Te.createElement(Sy.Provider,{value:{thread:$,currentThreadId:g,currentThread:$,threadMap:a,setThreadMap:c,switchCurrentThread:ue,startNewThread:$e,updateThreadName:ee,generateThreadName:ae,addThreadMessage:ie,updateThreadMessage:se,streaming:e,cancel:I,sendThreadMessage:z,contextKey:i}},Te.createElement(vH,{generationStage:N,statusMessage:M},t))},fN=()=>{const t=Q.useContext(Sy),e=Q.useContext(dN);if(t===void 0)throw new Error("useTamboThread must be used within a TamboThreadProvider");if(e===void 0)throw new Error("useTamboThread must be used within a TamboThreadProvider");return{...t,...e}};async function wH(t){var e;return t.error?[{type:"text",text:O2(t.result)}]:(e=t.tamboTool)!=null&&e.transformToContent?await t.tamboTool.transformToContent(t.result):[{type:"text",text:O2(t.result)}]}function Om(t){return{threadId:t,content:[{type:"text",text:""}],role:"assistant",createdAt:new Date().toISOString(),id:crypto.randomUUID(),componentState:{}}}const hN=Q.createContext(void 0),SH=({children:t})=>{const e=Q.useContext(gd);if(!e)throw new Error("TamboMcpTokenProvider must be used within a TamboClientProvider");const{client:n}=e,r=n.baseURL,s=Q.useContext(Sy),i=(s==null?void 0:s.currentThread)??null,o=(s==null?void 0:s.currentThreadId)??null,a=Q.useMemo(()=>(s==null?void 0:s.setThreadMap)??(()=>{}),[s==null?void 0:s.setThreadMap]),c=Q.useRef(null),d=Q.useMemo(()=>(i==null?void 0:i.mcpAccessToken)??null,[i]);Q.useEffect(()=>{const m=c.current!==o;c.current=o;const y=o===Bi.id;m&&o&&!y&&i&&!i.mcpAccessToken&&(async()=>{try{const E=await n.beta.auth.getMcpToken({threadId:o});E.mcpAccessToken&&a(k=>{const p=k[o];return p?{...k,[o]:{...p,mcpAccessToken:E.mcpAccessToken}}:k})}catch(E){console.error(`Failed to fetch MCP token for thread ${o}:`,E)}})()},[o,i,n,a]);const f=Q.useMemo(()=>({mcpAccessToken:d,tamboBaseUrl:r}),[d,r]);return Te.createElement(hN.Provider,{value:f},t)},kH=t=>{const e=Q.useContext(hN);if(e===void 0)throw new Error("useTamboMcpToken must be used within a TamboMcpTokenProvider");const n=Q.useContext(gd);if(!n)throw new Error("useTamboMcpToken must be used within a TamboClientProvider");const{client:r}=n,s=Q.useContext(Sy),i=(s==null?void 0:s.currentThreadId)??null,[o,a]=Q.useState(null),c=Q.useRef(!1),d=i===Bi.id,f=t&&(!i||d)&&!e.mcpAccessToken&&!o&&!c.current;return Q.useEffect(()=>{f&&(c.current=!0,(async()=>{try{const v=await r.beta.auth.getMcpToken({contextKey:t});v.mcpAccessToken&&a(v.mcpAccessToken)}catch(v){console.error("Failed to fetch threadless MCP token:",v)}})())},[f,r,t]),Q.useEffect(()=>{i&&i!==Bi.id&&(a(null),c.current=!1)},[i]),{mcpAccessToken:e.mcpAccessToken??o,tamboBaseUrl:e.tamboBaseUrl}};function bH(t){return"requestedSchema"in t}function EH(){const[t,e]=Q.useState(null),[n,r]=Q.useState(null),s=Q.useCallback(async(i,o)=>await new Promise((a,c)=>{if(!bH(i.params)){const f="mode"in i.params?String(i.params.mode):"unknown";c(new Error(`Unsupported MCP elicitation params: expected requestedSchema (form mode), got mode=${f}`));return}if(e({message:i.params.message,requestedSchema:i.params.requestedSchema,signal:o.signal}),o.signal.aborted){e(null),c(new Error("Request aborted"));return}const d=()=>{e(null),r(null),c(new Error("Request aborted"))};o.signal.addEventListener("abort",d,{once:!0}),r(()=>f=>{o.signal.removeEventListener("abort",d),e(null),r(null),a(f)})}),[]);return{elicitation:t,setElicitation:e,resolveElicitation:n,setResolveElicitation:r,defaultElicitationHandler:s}}function ky(t){return!!t._zod}function pa(t,e){return ky(t)?Z8(t,e):t.safeParse(e)}function pN(t){var n,r;if(!t)return;let e;if(ky(t)?e=(r=(n=t._zod)==null?void 0:n.def)==null?void 0:r.shape:e=t.shape,!!e){if(typeof e=="function")try{return e()}catch{return}return e}}function CH(t){var s;if(ky(t)){const o=(s=t._zod)==null?void 0:s.def;if(o){if(o.value!==void 0)return o.value;if(Array.isArray(o.values)&&o.values.length>0)return o.values[0]}}const n=t._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}const r=t.value;if(r!==void 0)return r}const by="2025-11-25",PH=[by,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],kl="io.modelcontextprotocol/related-task",Ey="2.0",lr=yU(t=>t!==null&&(typeof t=="object"||typeof t=="function")),mN=Rt([K(),Pt().int()]),gN=K();Qn({ttl:Rt([Pt(),HT()]).optional(),pollInterval:Pt().optional()});const $H=_e({ttl:Pt().optional()}),TH=_e({taskId:K()}),U4=Qn({progressToken:mN.optional(),[kl]:TH.optional()}),ks=_e({_meta:U4.optional()}),Kh=ks.extend({task:$H.optional()}),xH=t=>Kh.safeParse(t).success,dr=_e({method:K(),params:ks.loose().optional()}),Zs=_e({_meta:U4.optional()}),Ks=_e({method:K(),params:Zs.loose().optional()}),fr=Qn({_meta:U4.optional()}),Cy=Rt([K(),Pt().int()]),yN=_e({jsonrpc:ke(Ey),id:Cy,...dr.shape}).strict(),A2=t=>yN.safeParse(t).success,vN=_e({jsonrpc:ke(Ey),...Ks.shape}).strict(),NH=t=>vN.safeParse(t).success,V4=_e({jsonrpc:ke(Ey),id:Cy,result:fr}).strict(),Pf=t=>V4.safeParse(t).success;var Ze;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(Ze||(Ze={}));const G4=_e({jsonrpc:ke(Ey),id:Cy.optional(),error:_e({code:Pt().int(),message:K(),data:xt().optional()})}).strict(),RH=t=>G4.safeParse(t).success,pg=Rt([yN,vN,V4,G4]);Rt([V4,G4]);const vc=fr.strict(),OH=Zs.extend({requestId:Cy.optional(),reason:K().optional()}),H4=Ks.extend({method:ke("notifications/cancelled"),params:OH}),IH=_e({src:K(),mimeType:K().optional(),sizes:ye(K()).optional(),theme:Ss(["light","dark"]).optional()}),Qh=_e({icons:ye(IH).optional()}),nd=_e({name:K(),title:K().optional()}),_N=nd.extend({...nd.shape,...Qh.shape,version:K(),websiteUrl:K().optional(),description:K().optional()}),AH=T4(_e({applyDefaults:Ut().optional()}),en(K(),xt())),jH=XT(t=>t&&typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length===0?{form:{}}:t,T4(_e({form:AH.optional(),url:lr.optional()}),en(K(),xt()).optional())),MH=Qn({list:lr.optional(),cancel:lr.optional(),requests:Qn({sampling:Qn({createMessage:lr.optional()}).optional(),elicitation:Qn({create:lr.optional()}).optional()}).optional()}),zH=Qn({list:lr.optional(),cancel:lr.optional(),requests:Qn({tools:Qn({call:lr.optional()}).optional()}).optional()}),DH=_e({experimental:en(K(),lr).optional(),sampling:_e({context:lr.optional(),tools:lr.optional()}).optional(),elicitation:jH.optional(),roots:_e({listChanged:Ut().optional()}).optional(),tasks:MH.optional()}),FH=ks.extend({protocolVersion:K(),capabilities:DH,clientInfo:_N}),LH=dr.extend({method:ke("initialize"),params:FH}),UH=_e({experimental:en(K(),lr).optional(),logging:lr.optional(),completions:lr.optional(),prompts:_e({listChanged:Ut().optional()}).optional(),resources:_e({subscribe:Ut().optional(),listChanged:Ut().optional()}).optional(),tools:_e({listChanged:Ut().optional()}).optional(),tasks:zH.optional()}),wN=fr.extend({protocolVersion:K(),capabilities:UH,serverInfo:_N,instructions:K().optional()}),SN=Ks.extend({method:ke("notifications/initialized"),params:Zs.optional()}),VH=t=>SN.safeParse(t).success,q4=dr.extend({method:ke("ping"),params:ks.optional()}),GH=_e({progress:Pt(),total:gn(Pt()),message:gn(K())}),HH=_e({...Zs.shape,...GH.shape,progressToken:mN}),B4=Ks.extend({method:ke("notifications/progress"),params:HH}),qH=ks.extend({cursor:gN.optional()}),Yh=dr.extend({params:qH.optional()}),Xh=fr.extend({nextCursor:gN.optional()}),BH=Ss(["working","input_required","completed","failed","cancelled"]),Jh=_e({taskId:K(),status:BH,ttl:Rt([Pt(),HT()]),createdAt:K(),lastUpdatedAt:K(),pollInterval:gn(Pt()),statusMessage:gn(K())}),xh=fr.extend({task:Jh}),WH=Zs.merge(Jh),y0=Ks.extend({method:ke("notifications/tasks/status"),params:WH}),W4=dr.extend({method:ke("tasks/get"),params:ks.extend({taskId:K()})}),Z4=fr.merge(Jh),K4=dr.extend({method:ke("tasks/result"),params:ks.extend({taskId:K()})});fr.loose();const Q4=Yh.extend({method:ke("tasks/list")}),Y4=Xh.extend({tasks:ye(Jh)}),X4=dr.extend({method:ke("tasks/cancel"),params:ks.extend({taskId:K()})}),ZH=fr.merge(Jh),kN=_e({uri:K(),mimeType:gn(K()),_meta:en(K(),xt()).optional()}),bN=kN.extend({text:K()}),J4=K().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),EN=kN.extend({blob:J4}),ep=Ss(["user","assistant"]),yd=_e({audience:ye(ep).optional(),priority:Pt().min(0).max(1).optional(),lastModified:UT({offset:!0}).optional()}),CN=_e({...nd.shape,...Qh.shape,uri:K(),description:gn(K()),mimeType:gn(K()),annotations:yd.optional(),_meta:gn(Qn({}))}),KH=_e({...nd.shape,...Qh.shape,uriTemplate:K(),description:gn(K()),mimeType:gn(K()),annotations:yd.optional(),_meta:gn(Qn({}))}),QH=Yh.extend({method:ke("resources/list")}),PN=Xh.extend({resources:ye(CN)}),YH=Yh.extend({method:ke("resources/templates/list")}),$N=Xh.extend({resourceTemplates:ye(KH)}),ek=ks.extend({uri:K()}),XH=ek,JH=dr.extend({method:ke("resources/read"),params:XH}),TN=fr.extend({contents:ye(Rt([bN,EN]))}),xN=Ks.extend({method:ke("notifications/resources/list_changed"),params:Zs.optional()}),eq=ek,tq=dr.extend({method:ke("resources/subscribe"),params:eq}),nq=ek,rq=dr.extend({method:ke("resources/unsubscribe"),params:nq}),sq=Zs.extend({uri:K()}),iq=Ks.extend({method:ke("notifications/resources/updated"),params:sq}),oq=_e({name:K(),description:gn(K()),required:gn(Ut())}),aq=_e({...nd.shape,...Qh.shape,description:gn(K()),arguments:gn(ye(oq)),_meta:gn(Qn({}))}),lq=Yh.extend({method:ke("prompts/list")}),NN=Xh.extend({prompts:ye(aq)}),uq=ks.extend({name:K(),arguments:en(K(),K()).optional()}),cq=dr.extend({method:ke("prompts/get"),params:uq}),tk=_e({type:ke("text"),text:K(),annotations:yd.optional(),_meta:en(K(),xt()).optional()}),nk=_e({type:ke("image"),data:J4,mimeType:K(),annotations:yd.optional(),_meta:en(K(),xt()).optional()}),rk=_e({type:ke("audio"),data:J4,mimeType:K(),annotations:yd.optional(),_meta:en(K(),xt()).optional()}),dq=_e({type:ke("tool_use"),name:K(),id:K(),input:en(K(),xt()),_meta:en(K(),xt()).optional()}),fq=_e({type:ke("resource"),resource:Rt([bN,EN]),annotations:yd.optional(),_meta:en(K(),xt()).optional()}),hq=CN.extend({type:ke("resource_link")}),sk=Rt([tk,nk,rk,hq,fq]),pq=_e({role:ep,content:sk}),RN=fr.extend({description:K().optional(),messages:ye(pq)}),ON=Ks.extend({method:ke("notifications/prompts/list_changed"),params:Zs.optional()}),mq=_e({title:K().optional(),readOnlyHint:Ut().optional(),destructiveHint:Ut().optional(),idempotentHint:Ut().optional(),openWorldHint:Ut().optional()}),gq=_e({taskSupport:Ss(["required","optional","forbidden"]).optional()}),IN=_e({...nd.shape,...Qh.shape,description:K().optional(),inputSchema:_e({type:ke("object"),properties:en(K(),lr).optional(),required:ye(K()).optional()}).catchall(xt()),outputSchema:_e({type:ke("object"),properties:en(K(),lr).optional(),required:ye(K()).optional()}).catchall(xt()).optional(),annotations:mq.optional(),execution:gq.optional(),_meta:en(K(),xt()).optional()}),yq=Yh.extend({method:ke("tools/list")}),AN=Xh.extend({tools:ye(IN)}),Py=fr.extend({content:ye(sk).default([]),structuredContent:en(K(),xt()).optional(),isError:Ut().optional()});Py.or(fr.extend({toolResult:xt()}));const vq=Kh.extend({name:K(),arguments:en(K(),xt()).optional()}),_q=dr.extend({method:ke("tools/call"),params:vq}),jN=Ks.extend({method:ke("notifications/tools/list_changed"),params:Zs.optional()}),wq=_e({autoRefresh:Ut().default(!0),debounceMs:Pt().int().nonnegative().default(300)}),MN=Ss(["debug","info","notice","warning","error","critical","alert","emergency"]),Sq=ks.extend({level:MN}),kq=dr.extend({method:ke("logging/setLevel"),params:Sq}),bq=Zs.extend({level:MN,logger:K().optional(),data:xt()}),Eq=Ks.extend({method:ke("notifications/message"),params:bq}),Cq=_e({name:K().optional()}),Pq=_e({hints:ye(Cq).optional(),costPriority:Pt().min(0).max(1).optional(),speedPriority:Pt().min(0).max(1).optional(),intelligencePriority:Pt().min(0).max(1).optional()}),$q=_e({mode:Ss(["auto","required","none"]).optional()}),Tq=_e({type:ke("tool_result"),toolUseId:K().describe("The unique identifier for the corresponding tool call."),content:ye(sk).default([]),structuredContent:_e({}).loose().optional(),isError:Ut().optional(),_meta:en(K(),xt()).optional()}),xq=WT("type",[tk,nk,rk]),v0=WT("type",[tk,nk,rk,dq,Tq]),Nq=_e({role:ep,content:Rt([v0,ye(v0)]),_meta:en(K(),xt()).optional()}),Rq=Kh.extend({messages:ye(Nq),modelPreferences:Pq.optional(),systemPrompt:K().optional(),includeContext:Ss(["none","thisServer","allServers"]).optional(),temperature:Pt().optional(),maxTokens:Pt().int(),stopSequences:ye(K()).optional(),metadata:lr.optional(),tools:ye(IN).optional(),toolChoice:$q.optional()}),qf=dr.extend({method:ke("sampling/createMessage"),params:Rq}),zN=fr.extend({model:K(),stopReason:gn(Ss(["endTurn","stopSequence","maxTokens"]).or(K())),role:ep,content:xq}),DN=fr.extend({model:K(),stopReason:gn(Ss(["endTurn","stopSequence","maxTokens","toolUse"]).or(K())),role:ep,content:Rt([v0,ye(v0)])}),Oq=_e({type:ke("boolean"),title:K().optional(),description:K().optional(),default:Ut().optional()}),Iq=_e({type:ke("string"),title:K().optional(),description:K().optional(),minLength:Pt().optional(),maxLength:Pt().optional(),format:Ss(["email","uri","date","date-time"]).optional(),default:K().optional()}),Aq=_e({type:Ss(["number","integer"]),title:K().optional(),description:K().optional(),minimum:Pt().optional(),maximum:Pt().optional(),default:Pt().optional()}),jq=_e({type:ke("string"),title:K().optional(),description:K().optional(),enum:ye(K()),default:K().optional()}),Mq=_e({type:ke("string"),title:K().optional(),description:K().optional(),oneOf:ye(_e({const:K(),title:K()})),default:K().optional()}),zq=_e({type:ke("string"),title:K().optional(),description:K().optional(),enum:ye(K()),enumNames:ye(K()).optional(),default:K().optional()}),Dq=Rt([jq,Mq]),Fq=_e({type:ke("array"),title:K().optional(),description:K().optional(),minItems:Pt().optional(),maxItems:Pt().optional(),items:_e({type:ke("string"),enum:ye(K())}),default:ye(K()).optional()}),Lq=_e({type:ke("array"),title:K().optional(),description:K().optional(),minItems:Pt().optional(),maxItems:Pt().optional(),items:_e({anyOf:ye(_e({const:K(),title:K()}))}),default:ye(K()).optional()}),Uq=Rt([Fq,Lq]),Vq=Rt([zq,Dq,Uq]),Gq=Rt([Vq,Oq,Iq,Aq]),Hq=Kh.extend({mode:ke("form").optional(),message:K(),requestedSchema:_e({type:ke("object"),properties:en(K(),Gq),required:ye(K()).optional()})}),qq=Kh.extend({mode:ke("url"),message:K(),elicitationId:K(),url:K().url()}),Bq=Rt([Hq,qq]),Bf=dr.extend({method:ke("elicitation/create"),params:Bq}),Wq=Zs.extend({elicitationId:K()}),Zq=Ks.extend({method:ke("notifications/elicitation/complete"),params:Wq}),FN=fr.extend({action:Ss(["accept","decline","cancel"]),content:XT(t=>t===null?void 0:t,en(K(),Rt([K(),Pt(),Ut(),ye(K())])).optional())}),Kq=_e({type:ke("ref/resource"),uri:K()}),Qq=_e({type:ke("ref/prompt"),name:K()}),Yq=ks.extend({ref:Rt([Qq,Kq]),argument:_e({name:K(),value:K()}),context:_e({arguments:en(K(),K()).optional()}).optional()}),Xq=dr.extend({method:ke("completion/complete"),params:Yq}),LN=fr.extend({completion:Qn({values:ye(K()).max(100),total:gn(Pt().int()),hasMore:gn(Ut())})}),Jq=_e({uri:K().startsWith("file://"),name:K().optional(),_meta:en(K(),xt()).optional()}),eB=dr.extend({method:ke("roots/list"),params:ks.optional()}),tB=fr.extend({roots:ye(Jq)}),nB=Ks.extend({method:ke("notifications/roots/list_changed"),params:Zs.optional()});Rt([q4,LH,Xq,kq,cq,lq,QH,YH,JH,tq,rq,_q,yq,W4,K4,Q4,X4]);Rt([H4,B4,SN,nB,y0]);Rt([vc,zN,DN,FN,tB,Z4,Y4,xh]);Rt([q4,qf,Bf,eB,W4,K4,Q4,X4]);Rt([H4,B4,Eq,iq,xN,jN,ON,y0,Zq]);Rt([vc,wN,LN,RN,NN,PN,$N,TN,Py,AN,Z4,Y4,xh]);class Le extends Error{constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,n,r){if(e===Ze.UrlElicitationRequired&&r){const s=r;if(s.elicitations)return new rB(s.elicitations,n)}return new Le(e,n,r)}}class rB extends Le{constructor(e,n=`URL elicitation${e.length>1?"s":""} required`){super(Ze.UrlElicitationRequired,n,{elicitations:e})}get elicitations(){var e;return((e=this.data)==null?void 0:e.elicitations)??[]}}function ml(t){return t==="completed"||t==="failed"||t==="cancelled"}function c6(t){const e=pN(t),n=e==null?void 0:e.method;if(!n)throw new Error("Schema is missing a method literal");const r=CH(n);if(typeof r!="string")throw new Error("Schema method literal must be a string");return r}function d6(t,e){const n=pa(t,e);if(!n.success)throw n.error;return n.data}const sB=6e4;class iB{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(H4,n=>{this._oncancel(n)}),this.setNotificationHandler(B4,n=>{this._onprogress(n)}),this.setRequestHandler(q4,n=>({})),this._taskStore=e==null?void 0:e.taskStore,this._taskMessageQueue=e==null?void 0:e.taskMessageQueue,this._taskStore&&(this.setRequestHandler(W4,async(n,r)=>{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Le(Ze.InvalidParams,"Failed to retrieve task: Task not found");return{...s}}),this.setRequestHandler(K4,async(n,r)=>{const s=async()=>{var a;const i=n.params.taskId;if(this._taskMessageQueue){let c;for(;c=await this._taskMessageQueue.dequeue(i,r.sessionId);){if(c.type==="response"||c.type==="error"){const d=c.message,f=d.id,m=this._requestResolvers.get(f);if(m)if(this._requestResolvers.delete(f),c.type==="response")m(d);else{const y=d,v=new Le(y.error.code,y.error.message,y.error.data);m(v)}else{const y=c.type==="response"?"Response":"Error";this._onerror(new Error(`${y} handler missing for request ${f}`))}continue}await((a=this._transport)==null?void 0:a.send(c.message,{relatedRequestId:r.requestId}))}}const o=await this._taskStore.getTask(i,r.sessionId);if(!o)throw new Le(Ze.InvalidParams,`Task not found: ${i}`);if(!ml(o.status))return await this._waitForTaskUpdate(i,r.signal),await s();if(ml(o.status)){const c=await this._taskStore.getTaskResult(i,r.sessionId);return this._clearTaskQueue(i),{...c,_meta:{...c._meta,[kl]:{taskId:i}}}}return await s()};return await s()}),this.setRequestHandler(Q4,async(n,r)=>{var s;try{const{tasks:i,nextCursor:o}=await this._taskStore.listTasks((s=n.params)==null?void 0:s.cursor,r.sessionId);return{tasks:i,nextCursor:o,_meta:{}}}catch(i){throw new Le(Ze.InvalidParams,`Failed to list tasks: ${i instanceof Error?i.message:String(i)}`)}}),this.setRequestHandler(X4,async(n,r)=>{try{const s=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!s)throw new Le(Ze.InvalidParams,`Task not found: ${n.params.taskId}`);if(ml(s.status))throw new Le(Ze.InvalidParams,`Cannot cancel task in terminal status: ${s.status}`);await this._taskStore.updateTaskStatus(n.params.taskId,"cancelled","Client cancelled task execution.",r.sessionId),this._clearTaskQueue(n.params.taskId);const i=await this._taskStore.getTask(n.params.taskId,r.sessionId);if(!i)throw new Le(Ze.InvalidParams,`Task not found after cancellation: ${n.params.taskId}`);return{_meta:{},...i}}catch(s){throw s instanceof Le?s:new Le(Ze.InvalidRequest,`Failed to cancel task: ${s instanceof Error?s.message:String(s)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;const n=this._requestHandlerAbortControllers.get(e.params.requestId);n==null||n.abort(e.params.reason)}_setupTimeout(e,n,r,s,i=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:i,onTimeout:s})}_resetTimeout(e){const n=this._timeoutInfo.get(e);if(!n)return!1;const r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),Le.fromError(Ze.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){const n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var i,o,a;this._transport=e;const n=(i=this.transport)==null?void 0:i.onclose;this._transport.onclose=()=>{n==null||n(),this._onclose()};const r=(o=this.transport)==null?void 0:o.onerror;this._transport.onerror=c=>{r==null||r(c),this._onerror(c)};const s=(a=this._transport)==null?void 0:a.onmessage;this._transport.onmessage=(c,d)=>{s==null||s(c,d),Pf(c)||RH(c)?this._onresponse(c):A2(c)?this._onrequest(c,d):NH(c)?this._onnotification(c):this._onerror(new Error(`Unknown message type: ${JSON.stringify(c)}`))},await this._transport.start()}_onclose(){var r;const e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const n=Le.fromError(Ze.ConnectionClosed,"Connection closed");this._transport=void 0,(r=this.onclose)==null||r.call(this);for(const s of e.values())s(n)}_onerror(e){var n;(n=this.onerror)==null||n.call(this,e)}_onnotification(e){const n=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,n){var f,m,y,v;const r=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,s=this._transport,i=(y=(m=(f=e.params)==null?void 0:f._meta)==null?void 0:m[kl])==null?void 0:y.taskId;if(r===void 0){const _={jsonrpc:"2.0",id:e.id,error:{code:Ze.MethodNotFound,message:"Method not found"}};i&&this._taskMessageQueue?this._enqueueTaskMessage(i,{type:"error",message:_,timestamp:Date.now()},s==null?void 0:s.sessionId).catch(E=>this._onerror(new Error(`Failed to enqueue error response: ${E}`))):s==null||s.send(_).catch(E=>this._onerror(new Error(`Failed to send an error response: ${E}`)));return}const o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o);const a=xH(e.params)?e.params.task:void 0,c=this._taskStore?this.requestTaskStore(e,s==null?void 0:s.sessionId):void 0,d={signal:o.signal,sessionId:s==null?void 0:s.sessionId,_meta:(v=e.params)==null?void 0:v._meta,sendNotification:async _=>{const E={relatedRequestId:e.id};i&&(E.relatedTask={taskId:i}),await this.notification(_,E)},sendRequest:async(_,E,k)=>{var g;const p={...k,relatedRequestId:e.id};i&&!p.relatedTask&&(p.relatedTask={taskId:i});const w=((g=p.relatedTask)==null?void 0:g.taskId)??i;return w&&c&&await c.updateTaskStatus(w,"input_required"),await this.request(_,E,p)},authInfo:n==null?void 0:n.authInfo,requestId:e.id,requestInfo:n==null?void 0:n.requestInfo,taskId:i,taskStore:c,taskRequestedTtl:a==null?void 0:a.ttl,closeSSEStream:n==null?void 0:n.closeSSEStream,closeStandaloneSSEStream:n==null?void 0:n.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>r(e,d)).then(async _=>{if(o.signal.aborted)return;const E={result:_,jsonrpc:"2.0",id:e.id};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"response",message:E,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(E))},async _=>{if(o.signal.aborted)return;const E={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(_.code)?_.code:Ze.InternalError,message:_.message??"Internal error",..._.data!==void 0&&{data:_.data}}};i&&this._taskMessageQueue?await this._enqueueTaskMessage(i,{type:"error",message:E,timestamp:Date.now()},s==null?void 0:s.sessionId):await(s==null?void 0:s.send(E))}).catch(_=>this._onerror(new Error(`Failed to send response: ${_}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:n,...r}=e.params,s=Number(n),i=this._progressHandlers.get(s);if(!i){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}const o=this._responseHandlers.get(s),a=this._timeoutInfo.get(s);if(a&&o&&a.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(c){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),o(c);return}i(r)}_onresponse(e){const n=Number(e.id),r=this._requestResolvers.get(n);if(r){if(this._requestResolvers.delete(n),Pf(e))r(e);else{const o=new Le(e.error.code,e.error.message,e.error.data);r(o)}return}const s=this._responseHandlers.get(n);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}this._responseHandlers.delete(n),this._cleanupTimeout(n);let i=!1;if(Pf(e)&&e.result&&typeof e.result=="object"){const o=e.result;if(o.task&&typeof o.task=="object"){const a=o.task;typeof a.taskId=="string"&&(i=!0,this._taskProgressTokens.set(a.taskId,n))}}if(i||this._progressHandlers.delete(n),Pf(e))s(e);else{const o=Le.fromError(e.error.code,e.error.message,e.error.data);s(o)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)==null?void 0:e.close())}async*requestStream(e,n,r){var o,a;const{task:s}=r??{};if(!s){try{yield{type:"result",result:await this.request(e,n,r)}}catch(c){yield{type:"error",error:c instanceof Le?c:new Le(Ze.InternalError,String(c))}}return}let i;try{const c=await this.request(e,xh,r);if(c.task)i=c.task.taskId,yield{type:"taskCreated",task:c.task};else throw new Le(Ze.InternalError,"Task creation did not return a task");for(;;){const d=await this.getTask({taskId:i},r);if(yield{type:"taskStatus",task:d},ml(d.status)){d.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)}:d.status==="failed"?yield{type:"error",error:new Le(Ze.InternalError,`Task ${i} failed`)}:d.status==="cancelled"&&(yield{type:"error",error:new Le(Ze.InternalError,`Task ${i} was cancelled`)});return}if(d.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:i},n,r)};return}const f=d.pollInterval??((o=this._options)==null?void 0:o.defaultTaskPollInterval)??1e3;await new Promise(m=>setTimeout(m,f)),(a=r==null?void 0:r.signal)==null||a.throwIfAborted()}}catch(c){yield{type:"error",error:c instanceof Le?c:new Le(Ze.InternalError,String(c))}}}request(e,n,r){const{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o,task:a,relatedTask:c}=r??{};return new Promise((d,f)=>{var w,g,C,$,N;const m=M=>{f(M)};if(!this._transport){m(new Error("Not connected"));return}if(((w=this._options)==null?void 0:w.enforceStrictCapabilities)===!0)try{this.assertCapabilityForMethod(e.method),a&&this.assertTaskCapability(e.method)}catch(M){m(M);return}(g=r==null?void 0:r.signal)==null||g.throwIfAborted();const y=this._requestMessageId++,v={...e,jsonrpc:"2.0",id:y};r!=null&&r.onprogress&&(this._progressHandlers.set(y,r.onprogress),v.params={...e.params,_meta:{...((C=e.params)==null?void 0:C._meta)||{},progressToken:y}}),a&&(v.params={...v.params,task:a}),c&&(v.params={...v.params,_meta:{...(($=v.params)==null?void 0:$._meta)||{},[kl]:c}});const _=M=>{var q;this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),(q=this._transport)==null||q.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:y,reason:String(M)}},{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(G=>this._onerror(new Error(`Failed to send cancellation: ${G}`)));const A=M instanceof Le?M:new Le(Ze.RequestTimeout,String(M));f(A)};this._responseHandlers.set(y,M=>{var A;if(!((A=r==null?void 0:r.signal)!=null&&A.aborted)){if(M instanceof Error)return f(M);try{const q=pa(n,M.result);q.success?d(q.data):f(q.error)}catch(q){f(q)}}}),(N=r==null?void 0:r.signal)==null||N.addEventListener("abort",()=>{var M;_((M=r==null?void 0:r.signal)==null?void 0:M.reason)});const E=(r==null?void 0:r.timeout)??sB,k=()=>_(Le.fromError(Ze.RequestTimeout,"Request timed out",{timeout:E}));this._setupTimeout(y,E,r==null?void 0:r.maxTotalTimeout,k,(r==null?void 0:r.resetTimeoutOnProgress)??!1);const p=c==null?void 0:c.taskId;if(p){const M=A=>{const q=this._responseHandlers.get(y);q?q(A):this._onerror(new Error(`Response handler missing for side-channeled request ${y}`))};this._requestResolvers.set(y,M),this._enqueueTaskMessage(p,{type:"request",message:v,timestamp:Date.now()}).catch(A=>{this._cleanupTimeout(y),f(A)})}else this._transport.send(v,{relatedRequestId:s,resumptionToken:i,onresumptiontoken:o}).catch(M=>{this._cleanupTimeout(y),f(M)})})}async getTask(e,n){return this.request({method:"tasks/get",params:e},Z4,n)}async getTaskResult(e,n,r){return this.request({method:"tasks/result",params:e},n,r)}async listTasks(e,n){return this.request({method:"tasks/list",params:e},Y4,n)}async cancelTask(e,n){return this.request({method:"tasks/cancel",params:e},ZH,n)}async notification(e,n){var a,c,d,f;if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const r=(a=n==null?void 0:n.relatedTask)==null?void 0:a.taskId;if(r){const m={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...((c=e.params)==null?void 0:c._meta)||{},[kl]:n.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:m,timestamp:Date.now()});return}if((((d=this._options)==null?void 0:d.debouncedNotificationMethods)??[]).includes(e.method)&&!e.params&&!(n!=null&&n.relatedRequestId)&&!(n!=null&&n.relatedTask)){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var y,v;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let m={...e,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(m={...m,params:{...m.params,_meta:{...((y=m.params)==null?void 0:y._meta)||{},[kl]:n.relatedTask}}}),(v=this._transport)==null||v.send(m,n).catch(_=>this._onerror(_))});return}let o={...e,jsonrpc:"2.0"};n!=null&&n.relatedTask&&(o={...o,params:{...o.params,_meta:{...((f=o.params)==null?void 0:f._meta)||{},[kl]:n.relatedTask}}}),await this._transport.send(o,n)}setRequestHandler(e,n){const r=c6(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(s,i)=>{const o=d6(e,s);return Promise.resolve(n(o,i))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){const r=c6(e);this._notificationHandlers.set(r,s=>{const i=d6(e,s);return Promise.resolve(n(i))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){const n=this._taskProgressTokens.get(e);n!==void 0&&(this._progressHandlers.delete(n),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,n,r){var i;if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const s=(i=this._options)==null?void 0:i.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,n,r,s)}async _clearTaskQueue(e,n){if(this._taskMessageQueue){const r=await this._taskMessageQueue.dequeueAll(e,n);for(const s of r)if(s.type==="request"&&A2(s.message)){const i=s.message.id,o=this._requestResolvers.get(i);o?(o(new Le(Ze.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(i)):this._onerror(new Error(`Resolver missing for request ${i} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,n){var s,i;let r=((s=this._options)==null?void 0:s.defaultTaskPollInterval)??1e3;try{const o=await((i=this._taskStore)==null?void 0:i.getTask(e));o!=null&&o.pollInterval&&(r=o.pollInterval)}catch{}return new Promise((o,a)=>{if(n.aborted){a(new Le(Ze.InvalidRequest,"Request cancelled"));return}const c=setTimeout(o,r);n.addEventListener("abort",()=>{clearTimeout(c),a(new Le(Ze.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,n){const r=this._taskStore;if(!r)throw new Error("No task store configured");return{createTask:async s=>{if(!e)throw new Error("No request provided");return await r.createTask(s,e.id,{method:e.method,params:e.params},n)},getTask:async s=>{const i=await r.getTask(s,n);if(!i)throw new Le(Ze.InvalidParams,"Failed to retrieve task: Task not found");return i},storeTaskResult:async(s,i,o)=>{await r.storeTaskResult(s,i,o,n);const a=await r.getTask(s,n);if(a){const c=y0.parse({method:"notifications/tasks/status",params:a});await this.notification(c),ml(a.status)&&this._cleanupTaskProgressHandler(s)}},getTaskResult:s=>r.getTaskResult(s,n),updateTaskStatus:async(s,i,o)=>{const a=await r.getTask(s,n);if(!a)throw new Le(Ze.InvalidParams,`Task "${s}" not found - it may have been cleaned up`);if(ml(a.status))throw new Le(Ze.InvalidParams,`Cannot update task "${s}" from terminal status "${a.status}" to "${i}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(s,i,o,n);const c=await r.getTask(s,n);if(c){const d=y0.parse({method:"notifications/tasks/status",params:c});await this.notification(d),ml(c.status)&&this._cleanupTaskProgressHandler(s)}},listTasks:s=>r.listTasks(s,n)}}}function f6(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function oB(t,e){const n={...t};for(const r in e){const s=r,i=e[s];if(i===void 0)continue;const o=n[s];f6(o)&&f6(i)?n[s]={...o,...i}:n[s]=i}return n}var j2={exports:{}},UN={},Ci={},rd={},tp={},at={},Nh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(w){if(super(),!t.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((g,C)=>`${g}${C}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((g,C)=>(C instanceof n&&(g[C.str]=(g[C.str]||0)+1),g),{})}}t._Code=r,t.nil=new r("");function s(p,...w){const g=[p[0]];let C=0;for(;C<w.length;)a(g,w[C]),g.push(p[++C]);return new r(g)}t._=s;const i=new r("+");function o(p,...w){const g=[v(p[0])];let C=0;for(;C<w.length;)g.push(i),a(g,w[C]),g.push(i,v(p[++C]));return c(g),new r(g)}t.str=o;function a(p,w){w instanceof r?p.push(...w._items):w instanceof n?p.push(w):p.push(m(w))}t.addCodeArg=a;function c(p){let w=1;for(;w<p.length-1;){if(p[w]===i){const g=d(p[w-1],p[w+1]);if(g!==void 0){p.splice(w-1,3,g);continue}p[w++]="+"}w++}}function d(p,w){if(w==='""')return p;if(p==='""')return w;if(typeof p=="string")return w instanceof n||p[p.length-1]!=='"'?void 0:typeof w!="string"?`${p.slice(0,-1)}${w}"`:w[0]==='"'?p.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(p instanceof n))return`"${p}${w.slice(1)}`}function f(p,w){return w.emptyStr()?p:p.emptyStr()?w:o`${p}${w}`}t.strConcat=f;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:v(Array.isArray(p)?p.join(","):p)}function y(p){return new r(v(p))}t.stringify=y;function v(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=v;function _(p){return typeof p=="string"&&t.IDENTIFIER.test(p)?new r(`.${p}`):s`[${p}]`}t.getProperty=_;function E(p){if(typeof p=="string"&&t.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}t.getEsmExportName=E;function k(p){return new r(p.toString())}t.regexpCode=k})(Nh);var M2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Nh;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:d,parent:f}={}){this._names={},this._prefixes=d,this._parent=f}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const f=this._names[d]||this._nameGroup(d);return`${d}${f.index++}`}_nameGroup(d){var f,m;if(!((m=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}t.Scope=s;class i extends e.Name{constructor(d,f){super(f),this.prefix=d}setValue(d,{property:f,itemIndex:m}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(f)}[${m}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:e.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,f){var m;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:v}=y,_=(m=f.key)!==null&&m!==void 0?m:f.ref;let E=this._values[v];if(E){const w=E.get(_);if(w)return w}else E=this._values[v]=new Map;E.set(_,y);const k=this._scope[v]||(this._scope[v]=[]),p=k.length;return k[p]=f.ref,y.setValue(f,{property:v,itemIndex:p}),y}getValue(d,f){const m=this._values[d];if(m)return m.get(f)}scopeRefs(d,f=this._values){return this._reduceValues(f,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,e._)`${d}${m.scopePath}`})}scopeCode(d=this._values,f,m){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},f,m)}_reduceValues(d,f,m={},y){let v=e.nil;for(const _ in d){const E=d[_];if(!E)continue;const k=m[_]=m[_]||new Map;E.forEach(p=>{if(k.has(p))return;k.set(p,r.Started);let w=f(p);if(w){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;v=(0,e._)`${v}${g} ${p} = ${w};${this.opts._n}`}else if(w=y==null?void 0:y(p))v=(0,e._)`${v}${w}${this.opts._n}`;else throw new n(p);k.set(p,r.Completed)})}return v}}t.ValueScope=a})(M2);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Nh,n=M2;var r=Nh;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=M2;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(b,T){return this}}class o extends i{constructor(b,T,j){super(),this.varKind=b,this.name=T,this.rhs=j}render({es5:b,_n:T}){const j=b?n.varKinds.var:this.varKind,O=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${O};`+T}optimizeNames(b,T){if(b[this.name.str])return this.rhs&&(this.rhs=se(this.rhs,b,T)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(b,T,j){super(),this.lhs=b,this.rhs=T,this.sideEffects=j}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,T){if(!(this.lhs instanceof e.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=se(this.rhs,b,T),this}get names(){const b=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ie(b,this.rhs)}}class c extends a{constructor(b,T,j,O){super(b,j,O),this.op=T}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class d extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class f extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class m extends i{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class y extends i{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,T){return this.code=se(this.code,b,T),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends i{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((T,j)=>T+j.render(b),"")}optimizeNodes(){const{nodes:b}=this;let T=b.length;for(;T--;){const j=b[T].optimizeNodes();Array.isArray(j)?b.splice(T,1,...j):j?b[T]=j:b.splice(T,1)}return b.length>0?this:void 0}optimizeNames(b,T){const{nodes:j}=this;let O=j.length;for(;O--;){const F=j[O];F.optimizeNames(b,T)||(ae(b,F.names),j.splice(O,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((b,T)=>Y(b,T.names),{})}}class _ extends v{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class E extends v{}class k extends _{}k.kind="else";class p extends _{constructor(b,T){super(T),this.condition=b}render(b){let T=`if(${this.condition})`+super.render(b);return this.else&&(T+="else "+this.else.render(b)),T}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let T=this.else;if(T){const j=T.optimizeNodes();T=this.else=Array.isArray(j)?new k(j):j}if(T)return b===!1?T instanceof p?T:T.nodes:this.nodes.length?this:new p(ve(b),T instanceof p?[T]:T.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,T){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(b,T),!!(super.optimizeNames(b,T)||this.else))return this.condition=se(this.condition,b,T),this}get names(){const b=super.names;return ie(b,this.condition),this.else&&Y(b,this.else.names),b}}p.kind="if";class w extends _{}w.kind="for";class g extends w{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iteration=se(this.iteration,b,T),this}get names(){return Y(super.names,this.iteration.names)}}class C extends w{constructor(b,T,j,O){super(),this.varKind=b,this.name=T,this.from=j,this.to=O}render(b){const T=b.es5?n.varKinds.var:this.varKind,{name:j,from:O,to:F}=this;return`for(${T} ${j}=${O}; ${j}<${F}; ${j}++)`+super.render(b)}get names(){const b=ie(super.names,this.from);return ie(b,this.to)}}class $ extends w{constructor(b,T,j,O){super(),this.loop=b,this.varKind=T,this.name=j,this.iterable=O}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iterable=se(this.iterable,b,T),this}get names(){return Y(super.names,this.iterable.names)}}class N extends _{constructor(b,T,j){super(),this.name=b,this.args=T,this.async=j}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}N.kind="func";class M extends v{render(b){return"return "+super.render(b)}}M.kind="return";class A extends _{render(b){let T="try"+super.render(b);return this.catch&&(T+=this.catch.render(b)),this.finally&&(T+=this.finally.render(b)),T}optimizeNodes(){var b,T;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(T=this.finally)===null||T===void 0||T.optimizeNodes(),this}optimizeNames(b,T){var j,O;return super.optimizeNames(b,T),(j=this.catch)===null||j===void 0||j.optimizeNames(b,T),(O=this.finally)===null||O===void 0||O.optimizeNames(b,T),this}get names(){const b=super.names;return this.catch&&Y(b,this.catch.names),this.finally&&Y(b,this.finally.names),b}}class q extends _{constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}q.kind="catch";class G extends _{render(b){return"finally"+super.render(b)}}G.kind="finally";class B{constructor(b,T={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...T,_n:T.lines?`
`:""},this._extScope=b,this._scope=new n.Scope({parent:b}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,T){const j=this._extScope.value(b,T);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(b,T){return this._extScope.getValue(b,T)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,T,j,O){const F=this._scope.toName(T);return j!==void 0&&O&&(this._constants[F.str]=j),this._leafNode(new o(b,F,j)),F}const(b,T,j){return this._def(n.varKinds.const,b,T,j)}let(b,T,j){return this._def(n.varKinds.let,b,T,j)}var(b,T,j){return this._def(n.varKinds.var,b,T,j)}assign(b,T,j){return this._leafNode(new a(b,T,j))}add(b,T){return this._leafNode(new c(b,t.operators.ADD,T))}code(b){return typeof b=="function"?b():b!==e.nil&&this._leafNode(new y(b)),this}object(...b){const T=["{"];for(const[j,O]of b)T.length>1&&T.push(","),T.push(j),(j!==O||this.opts.es5)&&(T.push(":"),(0,e.addCodeArg)(T,O));return T.push("}"),new e._Code(T)}if(b,T,j){if(this._blockNode(new p(b)),T&&j)this.code(T).else().code(j).endIf();else if(T)this.code(T).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new p(b))}else(){return this._elseNode(new k)}endIf(){return this._endBlockNode(p,k)}_for(b,T){return this._blockNode(b),T&&this.code(T).endFor(),this}for(b,T){return this._for(new g(b),T)}forRange(b,T,j,O,F=this.opts.es5?n.varKinds.var:n.varKinds.let){const W=this._scope.toName(b);return this._for(new C(F,W,T,j),()=>O(W))}forOf(b,T,j,O=n.varKinds.const){const F=this._scope.toName(b);if(this.opts.es5){const W=T instanceof e.Name?T:this.var("_arr",T);return this.forRange("_i",0,(0,e._)`${W}.length`,le=>{this.var(F,(0,e._)`${W}[${le}]`),j(F)})}return this._for(new $("of",O,F,T),()=>j(F))}forIn(b,T,j,O=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,e._)`Object.keys(${T})`,j);const F=this._scope.toName(b);return this._for(new $("in",O,F,T),()=>j(F))}endFor(){return this._endBlockNode(w)}label(b){return this._leafNode(new d(b))}break(b){return this._leafNode(new f(b))}return(b){const T=new M;if(this._blockNode(T),this.code(b),T.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(M)}try(b,T,j){if(!T&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const O=new A;if(this._blockNode(O),this.code(b),T){const F=this.name("e");this._currNode=O.catch=new q(F),T(F)}return j&&(this._currNode=O.finally=new G,this.code(j)),this._endBlockNode(q,G)}throw(b){return this._leafNode(new m(b))}block(b,T){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(T),this}endBlock(b){const T=this._blockStarts.pop();if(T===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-T;if(j<0||b!==void 0&&j!==b)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${b} expected`);return this._nodes.length=T,this}func(b,T=e.nil,j,O){return this._blockNode(new N(b,T,j)),O&&this.code(O).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,T){const j=this._currNode;if(j instanceof b||T&&j instanceof T)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${T?`${b.kind}/${T.kind}`:b.kind}"`)}_elseNode(b){const T=this._currNode;if(!(T instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=T.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const T=this._nodes;T[T.length-1]=b}}t.CodeGen=B;function Y(z,b){for(const T in b)z[T]=(z[T]||0)+(b[T]||0);return z}function ie(z,b){return b instanceof e._CodeOrName?Y(z,b.names):z}function se(z,b,T){if(z instanceof e.Name)return j(z);if(!O(z))return z;return new e._Code(z._items.reduce((F,W)=>(W instanceof e.Name&&(W=j(W)),W instanceof e._Code?F.push(...W._items):F.push(W),F),[]));function j(F){const W=T[F.str];return W===void 0||b[F.str]!==1?F:(delete b[F.str],W)}function O(F){return F instanceof e._Code&&F._items.some(W=>W instanceof e.Name&&b[W.str]===1&&T[W.str]!==void 0)}}function ae(z,b){for(const T in b)z[T]=(z[T]||0)-(b[T]||0)}function ve(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${V(z)}`}t.not=ve;const $e=I(t.operators.AND);function ee(...z){return z.reduce($e)}t.and=ee;const ue=I(t.operators.OR);function L(...z){return z.reduce(ue)}t.or=L;function I(z){return(b,T)=>b===e.nil?T:T===e.nil?b:(0,e._)`${V(b)} ${z} ${V(T)}`}function V(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(at);var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.checkStrictMode=Ce.getErrorPath=Ce.Type=Ce.useFunc=Ce.setEvaluated=Ce.evaluatedPropsToName=Ce.mergeEvaluated=Ce.eachItem=Ce.unescapeJsonPointer=Ce.escapeJsonPointer=Ce.escapeFragment=Ce.unescapeFragment=Ce.schemaRefOrVal=Ce.schemaHasRulesButRef=Ce.schemaHasRules=Ce.checkUnknownRules=Ce.alwaysValidSchema=Ce.toHash=void 0;const jt=at,aB=Nh;function lB(t){const e={};for(const n of t)e[n]=!0;return e}Ce.toHash=lB;function uB(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(VN(t,e),!GN(e,t.self.RULES.all))}Ce.alwaysValidSchema=uB;function VN(t,e=t.schema){const{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;const s=r.RULES.keywords;for(const i in e)s[i]||BN(t,`unknown keyword: "${i}"`)}Ce.checkUnknownRules=VN;function GN(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(e[n])return!0;return!1}Ce.schemaHasRules=GN;function cB(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}Ce.schemaHasRulesButRef=cB;function dB({topSchemaRef:t,schemaPath:e},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,jt._)`${n}`}return(0,jt._)`${t}${e}${(0,jt.getProperty)(r)}`}Ce.schemaRefOrVal=dB;function fB(t){return HN(decodeURIComponent(t))}Ce.unescapeFragment=fB;function hB(t){return encodeURIComponent(ik(t))}Ce.escapeFragment=hB;function ik(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ce.escapeJsonPointer=ik;function HN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ce.unescapeJsonPointer=HN;function pB(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)}Ce.eachItem=pB;function h6({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const c=o===void 0?i:o instanceof jt.Name?(i instanceof jt.Name?t(s,i,o):e(s,i,o),o):i instanceof jt.Name?(e(s,o,i),i):n(i,o);return a===jt.Name&&!(c instanceof jt.Name)?r(s,c):c}}Ce.mergeEvaluated={props:h6({mergeNames:(t,e,n)=>t.if((0,jt._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,jt._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,jt._)`${n} || {}`).code((0,jt._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,jt._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,jt._)`${n} || {}`),ok(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:qN}),items:h6({mergeNames:(t,e,n)=>t.if((0,jt._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,jt._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,jt._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,jt._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function qN(t,e){if(e===!0)return t.var("props",!0);const n=t.var("props",(0,jt._)`{}`);return e!==void 0&&ok(t,n,e),n}Ce.evaluatedPropsToName=qN;function ok(t,e,n){Object.keys(n).forEach(r=>t.assign((0,jt._)`${e}${(0,jt.getProperty)(r)}`,!0))}Ce.setEvaluated=ok;const p6={};function mB(t,e){return t.scopeValue("func",{ref:e,code:p6[e.code]||(p6[e.code]=new aB._Code(e.code))})}Ce.useFunc=mB;var z2;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(z2||(Ce.Type=z2={}));function gB(t,e,n){if(t instanceof jt.Name){const r=e===z2.Num;return n?r?(0,jt._)`"[" + ${t} + "]"`:(0,jt._)`"['" + ${t} + "']"`:r?(0,jt._)`"/" + ${t}`:(0,jt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,jt.getProperty)(t).toString():"/"+ik(t)}Ce.getErrorPath=gB;function BN(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}Ce.checkStrictMode=BN;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});const wr=at,yB={data:new wr.Name("data"),valCxt:new wr.Name("valCxt"),instancePath:new wr.Name("instancePath"),parentData:new wr.Name("parentData"),parentDataProperty:new wr.Name("parentDataProperty"),rootData:new wr.Name("rootData"),dynamicAnchors:new wr.Name("dynamicAnchors"),vErrors:new wr.Name("vErrors"),errors:new wr.Name("errors"),this:new wr.Name("this"),self:new wr.Name("self"),scope:new wr.Name("scope"),json:new wr.Name("json"),jsonPos:new wr.Name("jsonPos"),jsonLen:new wr.Name("jsonLen"),jsonPart:new wr.Name("jsonPart")};ro.default=yB;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=at,n=Ce,r=ro;t.keywordError={message:({keyword:k})=>(0,e.str)`must pass "${k}" keyword validation`},t.keyword$DataError={message:({keyword:k,schemaType:p})=>p?(0,e.str)`"${k}" keyword must be ${p} ($data)`:(0,e.str)`"${k}" keyword is invalid ($data)`};function s(k,p=t.keywordError,w,g){const{it:C}=k,{gen:$,compositeRule:N,allErrors:M}=C,A=m(k,p,w);g??(N||M)?c($,A):d(C,(0,e._)`[${A}]`)}t.reportError=s;function i(k,p=t.keywordError,w){const{it:g}=k,{gen:C,compositeRule:$,allErrors:N}=g,M=m(k,p,w);c(C,M),$||N||d(g,r.default.vErrors)}t.reportExtraError=i;function o(k,p){k.assign(r.default.errors,p),k.if((0,e._)`${r.default.vErrors} !== null`,()=>k.if(p,()=>k.assign((0,e._)`${r.default.vErrors}.length`,p),()=>k.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:k,keyword:p,schemaValue:w,data:g,errsCount:C,it:$}){if(C===void 0)throw new Error("ajv implementation error");const N=k.name("err");k.forRange("i",C,r.default.errors,M=>{k.const(N,(0,e._)`${r.default.vErrors}[${M}]`),k.if((0,e._)`${N}.instancePath === undefined`,()=>k.assign((0,e._)`${N}.instancePath`,(0,e.strConcat)(r.default.instancePath,$.errorPath))),k.assign((0,e._)`${N}.schemaPath`,(0,e.str)`${$.errSchemaPath}/${p}`),$.opts.verbose&&(k.assign((0,e._)`${N}.schema`,w),k.assign((0,e._)`${N}.data`,g))})}t.extendErrors=a;function c(k,p){const w=k.const("err",p);k.if((0,e._)`${r.default.vErrors} === null`,()=>k.assign(r.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${r.default.vErrors}.push(${w})`),k.code((0,e._)`${r.default.errors}++`)}function d(k,p){const{gen:w,validateName:g,schemaEnv:C}=k;C.$async?w.throw((0,e._)`new ${k.ValidationError}(${p})`):(w.assign((0,e._)`${g}.errors`,p),w.return(!1))}const f={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function m(k,p,w){const{createErrors:g}=k.it;return g===!1?(0,e._)`{}`:y(k,p,w)}function y(k,p,w={}){const{gen:g,it:C}=k,$=[v(C,w),_(k,w)];return E(k,p,$),g.object(...$)}function v({errorPath:k},{instancePath:p}){const w=p?(0,e.str)`${k}${(0,n.getErrorPath)(p,n.Type.Str)}`:k;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,w)]}function _({keyword:k,it:{errSchemaPath:p}},{schemaPath:w,parentSchema:g}){let C=g?p:(0,e.str)`${p}/${k}`;return w&&(C=(0,e.str)`${C}${(0,n.getErrorPath)(w,n.Type.Str)}`),[f.schemaPath,C]}function E(k,{params:p,message:w},g){const{keyword:C,data:$,schemaValue:N,it:M}=k,{opts:A,propertyName:q,topSchemaRef:G,schemaPath:B}=M;g.push([f.keyword,C],[f.params,typeof p=="function"?p(k):p||(0,e._)`{}`]),A.messages&&g.push([f.message,typeof w=="function"?w(k):w]),A.verbose&&g.push([f.schema,N],[f.parentSchema,(0,e._)`${G}${B}`],[r.default.data,$]),q&&g.push([f.propertyName,q])}})(tp);Object.defineProperty(rd,"__esModule",{value:!0});rd.boolOrEmptySchema=rd.topBoolOrEmptySchema=void 0;const vB=tp,_B=at,wB=ro,SB={message:"boolean schema is false"};function kB(t){const{gen:e,schema:n,validateName:r}=t;n===!1?WN(t,!1):typeof n=="object"&&n.$async===!0?e.return(wB.default.data):(e.assign((0,_B._)`${r}.errors`,null),e.return(!0))}rd.topBoolOrEmptySchema=kB;function bB(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),WN(t)):n.var(e,!0)}rd.boolOrEmptySchema=bB;function WN(t,e){const{gen:n,data:r}=t,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,vB.reportError)(s,SB,void 0,e)}var Dn={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.getRules=iu.isJSONType=void 0;const EB=["string","number","integer","boolean","null","object","array"],CB=new Set(EB);function PB(t){return typeof t=="string"&&CB.has(t)}iu.isJSONType=PB;function $B(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}iu.getRules=$B;var xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.shouldUseRule=xo.shouldUseGroup=xo.schemaHasRulesForType=void 0;function TB({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&ZN(t,r)}xo.schemaHasRulesForType=TB;function ZN(t,e){return e.rules.some(n=>KN(t,n))}xo.shouldUseGroup=ZN;function KN(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}xo.shouldUseRule=KN;Object.defineProperty(Dn,"__esModule",{value:!0});Dn.reportTypeError=Dn.checkDataTypes=Dn.checkDataType=Dn.coerceAndCheckDataType=Dn.getJSONTypes=Dn.getSchemaTypes=Dn.DataType=void 0;const xB=iu,NB=xo,RB=tp,Qe=at,QN=Ce;var $c;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})($c||(Dn.DataType=$c={}));function OB(t){const e=YN(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Dn.getSchemaTypes=OB;function YN(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(xB.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Dn.getJSONTypes=YN;function IB(t,e){const{gen:n,data:r,opts:s}=t,i=AB(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,NB.schemaHasRulesForType)(t,e[0]));if(o){const a=ak(e,r,s.strictNumbers,$c.Wrong);n.if(a,()=>{i.length?jB(t,e,i):lk(t)})}return o}Dn.coerceAndCheckDataType=IB;const XN=new Set(["string","number","integer","boolean","null"]);function AB(t,e){return e?t.filter(n=>XN.has(n)||e==="array"&&n==="array"):[]}function jB(t,e,n){const{gen:r,data:s,opts:i}=t,o=r.let("dataType",(0,Qe._)`typeof ${s}`),a=r.let("coerced",(0,Qe._)`undefined`);i.coerceTypes==="array"&&r.if((0,Qe._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,Qe._)`${s}[0]`).assign(o,(0,Qe._)`typeof ${s}`).if(ak(e,s,i.strictNumbers),()=>r.assign(a,s))),r.if((0,Qe._)`${a} !== undefined`);for(const d of n)(XN.has(d)||d==="array"&&i.coerceTypes==="array")&&c(d);r.else(),lk(t),r.endIf(),r.if((0,Qe._)`${a} !== undefined`,()=>{r.assign(s,a),MB(t,a)});function c(d){switch(d){case"string":r.elseIf((0,Qe._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Qe._)`"" + ${s}`).elseIf((0,Qe._)`${s} === null`).assign(a,(0,Qe._)`""`);return;case"number":r.elseIf((0,Qe._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Qe._)`+${s}`);return;case"integer":r.elseIf((0,Qe._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Qe._)`+${s}`);return;case"boolean":r.elseIf((0,Qe._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Qe._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Qe._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Qe._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Qe._)`[${s}]`)}}}function MB({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,Qe._)`${e} !== undefined`,()=>t.assign((0,Qe._)`${e}[${n}]`,r))}function D2(t,e,n,r=$c.Correct){const s=r===$c.Correct?Qe.operators.EQ:Qe.operators.NEQ;let i;switch(t){case"null":return(0,Qe._)`${e} ${s} null`;case"array":i=(0,Qe._)`Array.isArray(${e})`;break;case"object":i=(0,Qe._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Qe._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Qe._)`typeof ${e} ${s} ${t}`}return r===$c.Correct?i:(0,Qe.not)(i);function o(a=Qe.nil){return(0,Qe.and)((0,Qe._)`typeof ${e} == "number"`,a,n?(0,Qe._)`isFinite(${e})`:Qe.nil)}}Dn.checkDataType=D2;function ak(t,e,n,r){if(t.length===1)return D2(t[0],e,n,r);let s;const i=(0,QN.toHash)(t);if(i.array&&i.object){const o=(0,Qe._)`typeof ${e} != "object"`;s=i.null?o:(0,Qe._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Qe.nil;i.number&&delete i.integer;for(const o in i)s=(0,Qe.and)(s,D2(o,e,n,r));return s}Dn.checkDataTypes=ak;const zB={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Qe._)`{type: ${t}}`:(0,Qe._)`{type: ${e}}`};function lk(t){const e=DB(t);(0,RB.reportError)(e,zB)}Dn.reportTypeError=lk;function DB(t){const{gen:e,data:n,schema:r}=t,s=(0,QN.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:t}}var $y={};Object.defineProperty($y,"__esModule",{value:!0});$y.assignDefaults=void 0;const Lu=at,FB=Ce;function LB(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const s in n)m6(t,s,n[s].default);else e==="array"&&Array.isArray(r)&&r.forEach((s,i)=>m6(t,i,s.default))}$y.assignDefaults=LB;function m6(t,e,n){const{gen:r,compositeRule:s,data:i,opts:o}=t;if(n===void 0)return;const a=(0,Lu._)`${i}${(0,Lu.getProperty)(e)}`;if(s){(0,FB.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Lu._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Lu._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,Lu._)`${a} = ${(0,Lu.stringify)(n)}`)}var Qi={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.validateUnion=it.validateArray=it.usePattern=it.callValidateCode=it.schemaProperties=it.allSchemaProperties=it.noPropertyInData=it.propertyInData=it.isOwnProperty=it.hasPropFunc=it.reportMissingProp=it.checkMissingProp=it.checkReportMissingProp=void 0;const Bt=at,uk=Ce,sa=ro,UB=Ce;function VB(t,e){const{gen:n,data:r,it:s}=t;n.if(dk(n,r,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Bt._)`${e}`},!0),t.error()})}it.checkReportMissingProp=VB;function GB({gen:t,data:e,it:{opts:n}},r,s){return(0,Bt.or)(...r.map(i=>(0,Bt.and)(dk(t,e,i,n.ownProperties),(0,Bt._)`${s} = ${i}`)))}it.checkMissingProp=GB;function HB(t,e){t.setParams({missingProperty:e},!0),t.error()}it.reportMissingProp=HB;function JN(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Bt._)`Object.prototype.hasOwnProperty`})}it.hasPropFunc=JN;function ck(t,e,n){return(0,Bt._)`${JN(t)}.call(${e}, ${n})`}it.isOwnProperty=ck;function qB(t,e,n,r){const s=(0,Bt._)`${e}${(0,Bt.getProperty)(n)} !== undefined`;return r?(0,Bt._)`${s} && ${ck(t,e,n)}`:s}it.propertyInData=qB;function dk(t,e,n,r){const s=(0,Bt._)`${e}${(0,Bt.getProperty)(n)} === undefined`;return r?(0,Bt.or)(s,(0,Bt.not)(ck(t,e,n))):s}it.noPropertyInData=dk;function eR(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}it.allSchemaProperties=eR;function BB(t,e){return eR(e).filter(n=>!(0,uk.alwaysValidSchema)(t,e[n]))}it.schemaProperties=BB;function WB({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,c,d){const f=d?(0,Bt._)`${t}, ${e}, ${r}${s}`:e,m=[[sa.default.instancePath,(0,Bt.strConcat)(sa.default.instancePath,i)],[sa.default.parentData,o.parentData],[sa.default.parentDataProperty,o.parentDataProperty],[sa.default.rootData,sa.default.rootData]];o.opts.dynamicRef&&m.push([sa.default.dynamicAnchors,sa.default.dynamicAnchors]);const y=(0,Bt._)`${f}, ${n.object(...m)}`;return c!==Bt.nil?(0,Bt._)`${a}.call(${c}, ${y})`:(0,Bt._)`${a}(${y})`}it.callValidateCode=WB;const ZB=(0,Bt._)`new RegExp`;function KB({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(n,r);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Bt._)`${s.code==="new RegExp"?ZB:(0,UB.useFunc)(t,s)}(${n}, ${r})`})}it.usePattern=KB;function QB(t){const{gen:e,data:n,keyword:r,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const c=e.const("len",(0,Bt._)`${n}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:r,dataProp:d,dataPropType:uk.Type.Num},i),e.if((0,Bt.not)(i),a)})}}it.validateArray=QB;function YB(t){const{gen:e,schema:n,keyword:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,uk.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((c,d)=>{const f=t.subschema({keyword:r,schemaProp:d,compositeRule:!0},a);e.assign(o,(0,Bt._)`${o} || ${a}`),t.mergeValidEvaluated(f,a)||e.if((0,Bt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}it.validateUnion=YB;Object.defineProperty(Qi,"__esModule",{value:!0});Qi.validateKeywordUsage=Qi.validSchemaType=Qi.funcKeywordCode=Qi.macroKeywordCode=void 0;const Or=at,El=ro,XB=it,JB=tp;function eW(t,e){const{gen:n,keyword:r,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=tR(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const d=n.name("valid");t.subschema({schema:a,schemaPath:Or.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}Qi.macroKeywordCode=eW;function tW(t,e){var n;const{gen:r,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;rW(c,e);const d=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,f=tR(r,s,d),m=r.let("valid");t.block$data(m,y),t.ok((n=e.valid)!==null&&n!==void 0?n:m);function y(){if(e.errors===!1)E(),e.modifying&&g6(t),k(()=>t.error());else{const p=e.async?v():_();e.modifying&&g6(t),k(()=>nW(t,p))}}function v(){const p=r.let("ruleErrs",null);return r.try(()=>E((0,Or._)`await `),w=>r.assign(m,!1).if((0,Or._)`${w} instanceof ${c.ValidationError}`,()=>r.assign(p,(0,Or._)`${w}.errors`),()=>r.throw(w))),p}function _(){const p=(0,Or._)`${f}.errors`;return r.assign(p,null),E(Or.nil),p}function E(p=e.async?(0,Or._)`await `:Or.nil){const w=c.opts.passContext?El.default.this:El.default.self,g=!("compile"in e&&!a||e.schema===!1);r.assign(m,(0,Or._)`${p}${(0,XB.callValidateCode)(t,f,w,g)}`,e.modifying)}function k(p){var w;r.if((0,Or.not)((w=e.valid)!==null&&w!==void 0?w:m),p)}}Qi.funcKeywordCode=tW;function g6(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,Or._)`${r.parentData}[${r.parentDataProperty}]`))}function nW(t,e){const{gen:n}=t;n.if((0,Or._)`Array.isArray(${e})`,()=>{n.assign(El.default.vErrors,(0,Or._)`${El.default.vErrors} === null ? ${e} : ${El.default.vErrors}.concat(${e})`).assign(El.default.errors,(0,Or._)`${El.default.vErrors}.length`),(0,JB.extendErrors)(t)},()=>t.error())}function rW({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function tR(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Or.stringify)(n)})}function sW(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Qi.validSchemaType=sW;function iW({schema:t,opts:e,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const c=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Qi.validateKeywordUsage=iW;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.extendSubschemaMode=La.extendSubschemaData=La.getSubschema=void 0;const Wi=at,nR=Ce;function oW(t,{keyword:e,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,Wi._)`${t.schemaPath}${(0,Wi.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,Wi._)`${t.schemaPath}${(0,Wi.getProperty)(e)}${(0,Wi.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,nR.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}La.getSubschema=oW;function aW(t,e,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(n!==void 0){const{errorPath:d,dataPathArr:f,opts:m}=e,y=a.let("data",(0,Wi._)`${e.data}${(0,Wi.getProperty)(n)}`,!0);c(y),t.errorPath=(0,Wi.str)`${d}${(0,nR.getErrorPath)(n,r,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Wi._)`${n}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){const d=s instanceof Wi.Name?s:a.let("data",s,!0);c(d),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}La.extendSubschemaData=aW;function lW(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(t.compositeRule=r),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=n}La.extendSubschemaMode=lW;var or={},Ty=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},rR={exports:{}},xa=rR.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};mg(e,r,s,t,"",t)};xa.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};xa.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};xa.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};xa.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function mg(t,e,n,r,s,i,o,a,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,s,i,o,a,c,d);for(var f in r){var m=r[f];if(Array.isArray(m)){if(f in xa.arrayKeywords)for(var y=0;y<m.length;y++)mg(t,e,n,m[y],s+"/"+f+"/"+y,i,s,f,r,y)}else if(f in xa.propsKeywords){if(m&&typeof m=="object")for(var v in m)mg(t,e,n,m[v],s+"/"+f+"/"+uW(v),i,s,f,r,v)}else(f in xa.keywords||t.allKeys&&!(f in xa.skipKeywords))&&mg(t,e,n,m,s+"/"+f,i,s,f,r)}n(r,s,i,o,a,c,d)}}function uW(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var cW=rR.exports;Object.defineProperty(or,"__esModule",{value:!0});or.getSchemaRefs=or.resolveUrl=or.normalizeId=or._getFullPath=or.getFullPath=or.inlineRef=void 0;const dW=Ce,fW=Ty,hW=cW,pW=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function mW(t,e=!0){return typeof t=="boolean"?!0:e===!0?!F2(t):e?sR(t)<=e:!1}or.inlineRef=mW;const gW=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function F2(t){for(const e in t){if(gW.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(F2)||typeof n=="object"&&F2(n))return!0}return!1}function sR(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!pW.has(n)&&(typeof t[n]=="object"&&(0,dW.eachItem)(t[n],r=>e+=sR(r)),e===1/0))return 1/0}return e}function iR(t,e="",n){n!==!1&&(e=Tc(e));const r=t.parse(e);return oR(t,r)}or.getFullPath=iR;function oR(t,e){return t.serialize(e).split("#")[0]+"#"}or._getFullPath=oR;const yW=/#\/?$/;function Tc(t){return t?t.replace(yW,""):""}or.normalizeId=Tc;function vW(t,e,n){return n=Tc(n),t.resolve(e,n)}or.resolveUrl=vW;const _W=/^[a-z_][-a-z0-9._]*$/i;function wW(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=Tc(t[n]||e),i={"":s},o=iR(r,s,!1),a={},c=new Set;return hW(t,{allKeys:!0},(m,y,v,_)=>{if(_===void 0)return;const E=o+y;let k=i[_];typeof m[n]=="string"&&(k=p.call(this,m[n])),w.call(this,m.$anchor),w.call(this,m.$dynamicAnchor),i[y]=k;function p(g){const C=this.opts.uriResolver.resolve;if(g=Tc(k?C(k,g):g),c.has(g))throw f(g);c.add(g);let $=this.refs[g];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(m,$.schema,g):g!==Tc(E)&&(g[0]==="#"?(d(m,a[g],g),a[g]=m):this.refs[g]=E),g}function w(g){if(typeof g=="string"){if(!_W.test(g))throw new Error(`invalid anchor "${g}"`);p.call(this,`#${g}`)}}}),a;function d(m,y,v){if(y!==void 0&&!fW(m,y))throw f(v)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}or.getSchemaRefs=wW;Object.defineProperty(Ci,"__esModule",{value:!0});Ci.getData=Ci.KeywordCxt=Ci.validateFunctionCode=void 0;const aR=rd,y6=Dn,fk=xo,_0=Dn,SW=$y,Wf=Qi,$1=La,je=at,Ge=ro,kW=or,No=Ce,af=tp;function bW(t){if(cR(t)&&(dR(t),uR(t))){PW(t);return}lR(t,()=>(0,aR.topBoolOrEmptySchema)(t))}Ci.validateFunctionCode=bW;function lR({gen:t,validateName:e,schema:n,schemaEnv:r,opts:s},i){s.code.es5?t.func(e,(0,je._)`${Ge.default.data}, ${Ge.default.valCxt}`,r.$async,()=>{t.code((0,je._)`"use strict"; ${v6(n,s)}`),CW(t,s),t.code(i)}):t.func(e,(0,je._)`${Ge.default.data}, ${EW(s)}`,r.$async,()=>t.code(v6(n,s)).code(i))}function EW(t){return(0,je._)`{${Ge.default.instancePath}="", ${Ge.default.parentData}, ${Ge.default.parentDataProperty}, ${Ge.default.rootData}=${Ge.default.data}${t.dynamicRef?(0,je._)`, ${Ge.default.dynamicAnchors}={}`:je.nil}}={}`}function CW(t,e){t.if(Ge.default.valCxt,()=>{t.var(Ge.default.instancePath,(0,je._)`${Ge.default.valCxt}.${Ge.default.instancePath}`),t.var(Ge.default.parentData,(0,je._)`${Ge.default.valCxt}.${Ge.default.parentData}`),t.var(Ge.default.parentDataProperty,(0,je._)`${Ge.default.valCxt}.${Ge.default.parentDataProperty}`),t.var(Ge.default.rootData,(0,je._)`${Ge.default.valCxt}.${Ge.default.rootData}`),e.dynamicRef&&t.var(Ge.default.dynamicAnchors,(0,je._)`${Ge.default.valCxt}.${Ge.default.dynamicAnchors}`)},()=>{t.var(Ge.default.instancePath,(0,je._)`""`),t.var(Ge.default.parentData,(0,je._)`undefined`),t.var(Ge.default.parentDataProperty,(0,je._)`undefined`),t.var(Ge.default.rootData,Ge.default.data),e.dynamicRef&&t.var(Ge.default.dynamicAnchors,(0,je._)`{}`)})}function PW(t){const{schema:e,opts:n,gen:r}=t;lR(t,()=>{n.$comment&&e.$comment&&hR(t),RW(t),r.let(Ge.default.vErrors,null),r.let(Ge.default.errors,0),n.unevaluated&&$W(t),fR(t),AW(t)})}function $W(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,je._)`${n}.evaluated`),e.if((0,je._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,je._)`${t.evaluated}.props`,(0,je._)`undefined`)),e.if((0,je._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,je._)`${t.evaluated}.items`,(0,je._)`undefined`))}function v6(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,je._)`/*# sourceURL=${n} */`:je.nil}function TW(t,e){if(cR(t)&&(dR(t),uR(t))){xW(t,e);return}(0,aR.boolOrEmptySchema)(t,e)}function uR({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function cR(t){return typeof t.schema!="boolean"}function xW(t,e){const{schema:n,gen:r,opts:s}=t;s.$comment&&n.$comment&&hR(t),OW(t),IW(t);const i=r.const("_errs",Ge.default.errors);fR(t,i),r.var(e,(0,je._)`${i} === ${Ge.default.errors}`)}function dR(t){(0,No.checkUnknownRules)(t),NW(t)}function fR(t,e){if(t.opts.jtd)return _6(t,[],!1,e);const n=(0,y6.getSchemaTypes)(t.schema),r=(0,y6.coerceAndCheckDataType)(t,n);_6(t,n,!r,e)}function NW(t){const{schema:e,errSchemaPath:n,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,No.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function RW(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,No.checkStrictMode)(t,"default is ignored in the schema root")}function OW(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,kW.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function IW(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function hR({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)t.code((0,je._)`${Ge.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,je.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,je._)`${Ge.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function AW(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=t;n.$async?e.if((0,je._)`${Ge.default.errors} === 0`,()=>e.return(Ge.default.data),()=>e.throw((0,je._)`new ${s}(${Ge.default.vErrors})`)):(e.assign((0,je._)`${r}.errors`,Ge.default.vErrors),i.unevaluated&&jW(t),e.return((0,je._)`${Ge.default.errors} === 0`))}function jW({gen:t,evaluated:e,props:n,items:r}){n instanceof je.Name&&t.assign((0,je._)`${e}.props`,n),r instanceof je.Name&&t.assign((0,je._)`${e}.items`,r)}function _6(t,e,n,r){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:d}=t,{RULES:f}=d;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,No.schemaHasRulesButRef)(i,f))){s.block(()=>gR(t,"$ref",f.all.$ref.definition));return}c.jtd||MW(t,e),s.block(()=>{for(const y of f.rules)m(y);m(f.post)});function m(y){(0,fk.shouldUseGroup)(i,y)&&(y.type?(s.if((0,_0.checkDataType)(y.type,o,c.strictNumbers)),w6(t,y),e.length===1&&e[0]===y.type&&n&&(s.else(),(0,_0.reportTypeError)(t)),s.endIf()):w6(t,y),a||s.if((0,je._)`${Ge.default.errors} === ${r||0}`))}}function w6(t,e){const{gen:n,schema:r,opts:{useDefaults:s}}=t;s&&(0,SW.assignDefaults)(t,e.type),n.block(()=>{for(const i of e.rules)(0,fk.shouldUseRule)(r,i)&&gR(t,i.keyword,i.definition,e.type)})}function MW(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(zW(t,e),t.opts.allowUnionTypes||DW(t,e),FW(t,t.dataTypes))}function zW(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{pR(t.dataTypes,n)||hk(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),UW(t,e)}}function DW(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&hk(t,"use allowUnionTypes to allow union type keyword")}function FW(t,e){const n=t.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,fk.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>LW(e,o))&&hk(t,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function LW(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function pR(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function UW(t,e){const n=[];for(const r of t.dataTypes)pR(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function hk(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,No.checkStrictMode)(t,e,t.opts.strictTypes)}let mR=class{constructor(e,n,r){if((0,Wf.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,No.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",yR(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Wf.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ge.default.errors))}result(e,n,r){this.failResult((0,je.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,je.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,je._)`${n} !== undefined && (${(0,je.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?af.reportExtraError:af.reportError)(this,this.def.error,n)}$dataError(){(0,af.reportError)(this,this.def.$dataError||af.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,af.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=je.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=je.nil,n=je.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:o}=this;r.if((0,je.or)((0,je._)`${s} === undefined`,n)),e!==je.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==je.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,je.or)(o(),a());function o(){if(r.length){if(!(n instanceof je.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,je._)`${(0,_0.checkDataTypes)(c,n,i.opts.strictNumbers,_0.DataType.Wrong)}`}return je.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,je._)`!${c}(${n})`}return je.nil}}subschema(e,n){const r=(0,$1.getSubschema)(this.it,e);(0,$1.extendSubschemaData)(r,this.it,e),(0,$1.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return TW(s,n),s}mergeEvaluated(e,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=No.mergeEvaluated.props(s,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=No.mergeEvaluated.items(s,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(e,je.Name)),!0}};Ci.KeywordCxt=mR;function gR(t,e,n,r){const s=new mR(t,n,e);"code"in n?n.code(s,r):s.$data&&n.validate?(0,Wf.funcKeywordCode)(s,n):"macro"in n?(0,Wf.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,Wf.funcKeywordCode)(s,n)}const VW=/^\/(?:[^~]|~0|~1)*$/,GW=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function yR(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let s,i;if(t==="")return Ge.default.rootData;if(t[0]==="/"){if(!VW.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ge.default.rootData}else{const d=GW.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);const f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(c("property/index",f));return r[e-f]}if(f>e)throw new Error(c("data",f));if(i=n[e-f],!s)return i}let o=i;const a=s.split("/");for(const d of a)d&&(i=(0,je._)`${i}${(0,je.getProperty)((0,No.unescapeJsonPointer)(d))}`,o=(0,je._)`${o} && ${i}`);return o;function c(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}Ci.getData=yR;var np={};Object.defineProperty(np,"__esModule",{value:!0});let HW=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};np.default=HW;var vd={};Object.defineProperty(vd,"__esModule",{value:!0});const T1=or;let qW=class extends Error{constructor(e,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,T1.resolveUrl)(e,n,r),this.missingSchema=(0,T1.normalizeId)((0,T1.getFullPath)(e,this.missingRef))}};vd.default=qW;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveSchema=Jr.getCompilingSchema=Jr.resolveRef=Jr.compileSchema=Jr.SchemaEnv=void 0;const ai=at,BW=np,gl=ro,Si=or,S6=Ce,WW=Ci;let xy=class{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,Si.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}};Jr.SchemaEnv=xy;function pk(t){const e=vR.call(this,t);if(e)return e;const n=(0,Si.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ai.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:BW.default,code:(0,ai._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const d={gen:o,allErrors:this.opts.allErrors,data:gl.default.data,parentData:gl.default.parentData,parentDataProperty:gl.default.parentDataProperty,dataNames:[gl.default.data],dataPathArr:[ai.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ai.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:ai.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ai._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(t),(0,WW.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);const m=o.toString();f=`${o.scopeRefs(gl.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));const v=new Function(`${gl.default.self}`,`${gl.default.scope}`,f)(this,this.scope.get());if(this.scope.value(c,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:c,validateCode:m,scopeValues:o._values}),this.opts.unevaluated){const{props:_,items:E}=d;v.evaluated={props:_ instanceof ai.Name?void 0:_,items:E instanceof ai.Name?void 0:E,dynamicProps:_ instanceof ai.Name,dynamicItems:E instanceof ai.Name},v.source&&(v.source.evaluated=(0,ai.stringify)(v.evaluated))}return t.validate=v,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}Jr.compileSchema=pk;function ZW(t,e,n){var r;n=(0,Si.resolveUrl)(this.opts.uriResolver,e,n);const s=t.refs[n];if(s)return s;let i=YW.call(this,t,n);if(i===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new xy({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[n]=KW.call(this,i)}Jr.resolveRef=ZW;function KW(t){return(0,Si.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:pk.call(this,t)}function vR(t){for(const e of this._compilations)if(QW(e,t))return e}Jr.getCompilingSchema=vR;function QW(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function YW(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||Ny.call(this,t,e)}function Ny(t,e){const n=this.opts.uriResolver.parse(e),r=(0,Si._getFullPath)(this.opts.uriResolver,n);let s=(0,Si.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===s)return x1.call(this,n,t);const i=(0,Si.normalizeId)(r),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=Ny.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:x1.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||pk.call(this,o),i===(0,Si.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,d=a[c];return d&&(s=(0,Si.resolveUrl)(this.opts.uriResolver,s,d)),new xy({schema:a,schemaId:c,root:t,baseId:s})}return x1.call(this,n,o)}}Jr.resolveSchema=Ny;const XW=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function x1(t,{baseId:e,schema:n,root:r}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,S6.unescapeFragment)(a)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!XW.has(a)&&d&&(e=(0,Si.resolveUrl)(this.opts.uriResolver,e,d))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,S6.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Si.resolveUrl)(this.opts.uriResolver,e,n.$ref);i=Ny.call(this,r,a)}const{schemaId:o}=this.opts;if(i=i||new xy({schema:n,schemaId:o,root:r,baseId:e}),i.schema!==i.root.schema)return i}const JW="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",eZ="Meta-schema for $data reference (JSON AnySchema extension proposal)",tZ="object",nZ=["$data"],rZ={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},sZ=!1,iZ={$id:JW,description:eZ,type:tZ,required:nZ,properties:rZ,additionalProperties:sZ};var mk={},Ry={exports:{}};const oZ=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),_R=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function wR(t){let e="",n=0,r=0;for(r=0;r<t.length;r++)if(n=t[r].charCodeAt(0),n!==48){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r];break}for(r+=1;r<t.length;r++){if(n=t[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";e+=t[r]}return e}const aZ=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function k6(t){return t.length=0,!0}function lZ(t,e,n){if(t.length){const r=wR(t);if(r!=="")e.push(r);else return n.error=!0,!1;t.length=0}return!0}function uZ(t){let e=0;const n={error:!1,address:"",zone:""},r=[],s=[];let i=!1,o=!1,a=lZ;for(let c=0;c<t.length;c++){const d=t[c];if(!(d==="["||d==="]"))if(d===":"){if(i===!0&&(o=!0),!a(s,r,n))break;if(++e>7){n.error=!0;break}c>0&&t[c-1]===":"&&(i=!0),r.push(":");continue}else if(d==="%"){if(!a(s,r,n))break;a=k6}else{s.push(d);continue}}return s.length&&(a===k6?n.zone=s.join(""):o?r.push(s.join("")):r.push(wR(s))),n.address=r.join(""),n}function SR(t){if(cZ(t,":")<2)return{host:t,isIPV6:!1};const e=uZ(t);if(e.error)return{host:t,isIPV6:!1};{let n=e.address,r=e.address;return e.zone&&(n+="%"+e.zone,r+="%25"+e.zone),{host:n,isIPV6:!0,escapedHost:r}}}function cZ(t,e){let n=0;for(let r=0;r<t.length;r++)t[r]===e&&n++;return n}function dZ(t){let e=t;const n=[];let r=-1,s=0;for(;s=e.length;){if(s===1){if(e===".")break;if(e==="/"){n.push("/");break}else{n.push(e);break}}else if(s===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){n.push("/");break}}else if(s===3&&e==="/.."){n.length!==0&&n.pop(),n.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),n.length!==0&&n.pop();continue}}if((r=e.indexOf("/",1))===-1){n.push(e);break}else n.push(e.slice(0,r)),e=e.slice(r)}return n.join("")}function fZ(t,e){const n=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=n(t.scheme)),t.userinfo!==void 0&&(t.userinfo=n(t.userinfo)),t.host!==void 0&&(t.host=n(t.host)),t.path!==void 0&&(t.path=n(t.path)),t.query!==void 0&&(t.query=n(t.query)),t.fragment!==void 0&&(t.fragment=n(t.fragment)),t}function hZ(t){const e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let n=unescape(t.host);if(!_R(n)){const r=SR(n);r.isIPV6===!0?n=`[${r.escapedHost}]`:n=t.host}e.push(n)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}var kR={nonSimpleDomain:aZ,recomposeAuthority:hZ,normalizeComponentEncoding:fZ,removeDotSegments:dZ,isIPv4:_R,isUUID:oZ,normalizeIPv6:SR};const{isUUID:pZ}=kR,mZ=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function bR(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function ER(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function CR(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function gZ(t){return t.secure=bR(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function yZ(t){if((t.port===(bR(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,n]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=n,t.resourceName=void 0}return t.fragment=void 0,t}function vZ(t,e){if(!t.path)return t.error="URN can not be parsed",t;const n=t.path.match(mZ);if(n){const r=e.scheme||t.scheme||"urn";t.nid=n[1].toLowerCase(),t.nss=n[2];const s=`${r}:${e.nid||t.nid}`,i=gk(s);t.path=void 0,i&&(t=i.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function _Z(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");const n=e.scheme||t.scheme||"urn",r=t.nid.toLowerCase(),s=`${n}:${e.nid||r}`,i=gk(s);i&&(t=i.serialize(t,e));const o=t,a=t.nss;return o.path=`${r||e.nid}:${a}`,e.skipEscape=!0,o}function wZ(t,e){const n=t;return n.uuid=n.nss,n.nss=void 0,!e.tolerant&&(!n.uuid||!pZ(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function SZ(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const PR={scheme:"http",domainHost:!0,parse:ER,serialize:CR},kZ={scheme:"https",domainHost:PR.domainHost,parse:ER,serialize:CR},gg={scheme:"ws",domainHost:!0,parse:gZ,serialize:yZ},bZ={scheme:"wss",domainHost:gg.domainHost,parse:gg.parse,serialize:gg.serialize},EZ={scheme:"urn",parse:vZ,serialize:_Z,skipNormalize:!0},CZ={scheme:"urn:uuid",parse:wZ,serialize:SZ,skipNormalize:!0},w0={http:PR,https:kZ,ws:gg,wss:bZ,urn:EZ,"urn:uuid":CZ};Object.setPrototypeOf(w0,null);function gk(t){return t&&(w0[t]||w0[t.toLowerCase()])||void 0}var PZ={SCHEMES:w0,getSchemeHandler:gk};const{normalizeIPv6:$Z,removeDotSegments:$f,recomposeAuthority:TZ,normalizeComponentEncoding:Im,isIPv4:xZ,nonSimpleDomain:NZ}=kR,{SCHEMES:RZ,getSchemeHandler:$R}=PZ;function OZ(t,e){return typeof t=="string"?t=Yi(Uo(t,e),e):typeof t=="object"&&(t=Uo(Yi(t,e),e)),t}function IZ(t,e,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=TR(Uo(t,r),Uo(e,r),r,!0);return r.skipEscape=!0,Yi(s,r)}function TR(t,e,n,r){const s={};return r||(t=Uo(Yi(t,n),n),e=Uo(Yi(e,n),n)),n=n||{},!n.tolerant&&e.scheme?(s.scheme=e.scheme,s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=$f(e.path||""),s.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(s.userinfo=e.userinfo,s.host=e.host,s.port=e.port,s.path=$f(e.path||""),s.query=e.query):(e.path?(e.path[0]==="/"?s.path=$f(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?s.path="/"+e.path:t.path?s.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:s.path=e.path,s.path=$f(s.path)),s.query=e.query):(s.path=t.path,e.query!==void 0?s.query=e.query:s.query=t.query),s.userinfo=t.userinfo,s.host=t.host,s.port=t.port),s.scheme=t.scheme),s.fragment=e.fragment,s}function AZ(t,e,n){return typeof t=="string"?(t=unescape(t),t=Yi(Im(Uo(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=Yi(Im(t,!0),{...n,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Yi(Im(Uo(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=Yi(Im(e,!0),{...n,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Yi(t,e){const n={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},r=Object.assign({},e),s=[],i=$R(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&s.push(n.scheme,":");const o=TZ(n);if(o!==void 0&&(r.reference!=="suffix"&&s.push("//"),s.push(o),n.path&&n.path[0]!=="/"&&s.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!i||!i.absolutePath)&&(a=$f(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),s.push(a)}return n.query!==void 0&&s.push("?",n.query),n.fragment!==void 0&&s.push("#",n.fragment),s.join("")}const jZ=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Uo(t,e){const n=Object.assign({},e),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let s=!1;n.reference==="suffix"&&(n.scheme?t=n.scheme+":"+t:t="//"+t);const i=t.match(jZ);if(i){if(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5]),r.host)if(xZ(r.host)===!1){const c=$Z(r.host);r.host=c.host.toLowerCase(),s=c.isIPV6}else s=!0;r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&r.query===void 0&&!r.path?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const o=$R(n.scheme||r.scheme);if(!n.unicodeSupport&&(!o||!o.unicodeSupport)&&r.host&&(n.domainHost||o&&o.domainHost)&&s===!1&&NZ(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(a){r.error=r.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),r.host!==void 0&&(r.host=unescape(r.host))),r.path&&(r.path=escape(unescape(r.path))),r.fragment&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),o&&o.parse&&o.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const yk={SCHEMES:RZ,normalize:OZ,resolve:IZ,resolveComponent:TR,equal:AZ,serialize:Yi,parse:Uo};Ry.exports=yk;Ry.exports.default=yk;Ry.exports.fastUri=yk;var xR=Ry.exports;Object.defineProperty(mk,"__esModule",{value:!0});const NR=xR;NR.code='require("ajv/dist/runtime/uri").default';mk.default=NR;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Ci;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=at;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=np,s=vd,i=iu,o=Jr,a=at,c=or,d=Dn,f=Ce,m=iZ,y=mk,v=(L,I)=>new RegExp(L,I);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function g(L){var I,V,z,b,T,j,O,F,W,le,ce,U,H,dt,Fe,Ie,Je,gt,vn,Vt,$t,Nn,Pn,fn,as;const Rn=L.strict,Ys=(I=L.code)===null||I===void 0?void 0:I.optimize,Ri=Ys===!0||Ys===void 0?1:Ys||0,bs=(z=(V=L.code)===null||V===void 0?void 0:V.regExp)!==null&&z!==void 0?z:v,Lr=(b=L.uriResolver)!==null&&b!==void 0?b:y.default;return{strictSchema:(j=(T=L.strictSchema)!==null&&T!==void 0?T:Rn)!==null&&j!==void 0?j:!0,strictNumbers:(F=(O=L.strictNumbers)!==null&&O!==void 0?O:Rn)!==null&&F!==void 0?F:!0,strictTypes:(le=(W=L.strictTypes)!==null&&W!==void 0?W:Rn)!==null&&le!==void 0?le:"log",strictTuples:(U=(ce=L.strictTuples)!==null&&ce!==void 0?ce:Rn)!==null&&U!==void 0?U:"log",strictRequired:(dt=(H=L.strictRequired)!==null&&H!==void 0?H:Rn)!==null&&dt!==void 0?dt:!1,code:L.code?{...L.code,optimize:Ri,regExp:bs}:{optimize:Ri,regExp:bs},loopRequired:(Fe=L.loopRequired)!==null&&Fe!==void 0?Fe:w,loopEnum:(Ie=L.loopEnum)!==null&&Ie!==void 0?Ie:w,meta:(Je=L.meta)!==null&&Je!==void 0?Je:!0,messages:(gt=L.messages)!==null&&gt!==void 0?gt:!0,inlineRefs:(vn=L.inlineRefs)!==null&&vn!==void 0?vn:!0,schemaId:(Vt=L.schemaId)!==null&&Vt!==void 0?Vt:"$id",addUsedSchema:($t=L.addUsedSchema)!==null&&$t!==void 0?$t:!0,validateSchema:(Nn=L.validateSchema)!==null&&Nn!==void 0?Nn:!0,validateFormats:(Pn=L.validateFormats)!==null&&Pn!==void 0?Pn:!0,unicodeRegExp:(fn=L.unicodeRegExp)!==null&&fn!==void 0?fn:!0,int32range:(as=L.int32range)!==null&&as!==void 0?as:!0,uriResolver:Lr}}class C{constructor(I={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,I=this.opts={...I,...g(I)};const{es5:V,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:V,lines:z}),this.logger=Y(I.logger);const b=I.validateFormats;I.validateFormats=!1,this.RULES=(0,i.getRules)(),$.call(this,k,I,"NOT SUPPORTED"),$.call(this,p,I,"DEPRECATED","warn"),this._metaOpts=G.call(this),I.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),I.keywords&&q.call(this,I.keywords),typeof I.meta=="object"&&this.addMetaSchema(I.meta),M.call(this),I.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:I,meta:V,schemaId:z}=this.opts;let b=m;z==="id"&&(b={...m},b.id=b.$id,delete b.$id),V&&I&&this.addMetaSchema(b,b[z],!1)}defaultMeta(){const{meta:I,schemaId:V}=this.opts;return this.opts.defaultMeta=typeof I=="object"?I[V]||I:void 0}validate(I,V){let z;if(typeof I=="string"){if(z=this.getSchema(I),!z)throw new Error(`no schema with key or ref "${I}"`)}else z=this.compile(I);const b=z(V);return"$async"in z||(this.errors=z.errors),b}compile(I,V){const z=this._addSchema(I,V);return z.validate||this._compileSchemaEnv(z)}compileAsync(I,V){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return b.call(this,I,V);async function b(le,ce){await T.call(this,le.$schema);const U=this._addSchema(le,ce);return U.validate||j.call(this,U)}async function T(le){le&&!this.getSchema(le)&&await b.call(this,{$ref:le},!0)}async function j(le){try{return this._compileSchemaEnv(le)}catch(ce){if(!(ce instanceof s.default))throw ce;return O.call(this,ce),await F.call(this,ce.missingSchema),j.call(this,le)}}function O({missingSchema:le,missingRef:ce}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ce} cannot be resolved`)}async function F(le){const ce=await W.call(this,le);this.refs[le]||await T.call(this,ce.$schema),this.refs[le]||this.addSchema(ce,le,V)}async function W(le){const ce=this._loading[le];if(ce)return ce;try{return await(this._loading[le]=z(le))}finally{delete this._loading[le]}}}addSchema(I,V,z,b=this.opts.validateSchema){if(Array.isArray(I)){for(const j of I)this.addSchema(j,void 0,z,b);return this}let T;if(typeof I=="object"){const{schemaId:j}=this.opts;if(T=I[j],T!==void 0&&typeof T!="string")throw new Error(`schema ${j} must be string`)}return V=(0,c.normalizeId)(V||T),this._checkUnique(V),this.schemas[V]=this._addSchema(I,z,V,b,!0),this}addMetaSchema(I,V,z=this.opts.validateSchema){return this.addSchema(I,V,!0,z),this}validateSchema(I,V){if(typeof I=="boolean")return!0;let z;if(z=I.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(z,I);if(!b&&V){const T="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(T);else throw new Error(T)}return b}getSchema(I){let V;for(;typeof(V=N.call(this,I))=="string";)I=V;if(V===void 0){const{schemaId:z}=this.opts,b=new o.SchemaEnv({schema:{},schemaId:z});if(V=o.resolveSchema.call(this,b,I),!V)return;this.refs[I]=V}return V.validate||this._compileSchemaEnv(V)}removeSchema(I){if(I instanceof RegExp)return this._removeAllSchemas(this.schemas,I),this._removeAllSchemas(this.refs,I),this;switch(typeof I){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const V=N.call(this,I);return typeof V=="object"&&this._cache.delete(V.schema),delete this.schemas[I],delete this.refs[I],this}case"object":{const V=I;this._cache.delete(V);let z=I[this.opts.schemaId];return z&&(z=(0,c.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(I){for(const V of I)this.addKeyword(V);return this}addKeyword(I,V){let z;if(typeof I=="string")z=I,typeof V=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),V.keyword=z);else if(typeof I=="object"&&V===void 0){if(V=I,z=V.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(se.call(this,z,V),!V)return(0,f.eachItem)(z,T=>ae.call(this,T)),this;$e.call(this,V);const b={...V,type:(0,d.getJSONTypes)(V.type),schemaType:(0,d.getJSONTypes)(V.schemaType)};return(0,f.eachItem)(z,b.type.length===0?T=>ae.call(this,T,b):T=>b.type.forEach(j=>ae.call(this,T,b,j))),this}getKeyword(I){const V=this.RULES.all[I];return typeof V=="object"?V.definition:!!V}removeKeyword(I){const{RULES:V}=this;delete V.keywords[I],delete V.all[I];for(const z of V.rules){const b=z.rules.findIndex(T=>T.keyword===I);b>=0&&z.rules.splice(b,1)}return this}addFormat(I,V){return typeof V=="string"&&(V=new RegExp(V)),this.formats[I]=V,this}errorsText(I=this.errors,{separator:V=", ",dataVar:z="data"}={}){return!I||I.length===0?"No errors":I.map(b=>`${z}${b.instancePath} ${b.message}`).reduce((b,T)=>b+V+T)}$dataMetaSchema(I,V){const z=this.RULES.all;I=JSON.parse(JSON.stringify(I));for(const b of V){const T=b.split("/").slice(1);let j=I;for(const O of T)j=j[O];for(const O in z){const F=z[O];if(typeof F!="object")continue;const{$data:W}=F.definition,le=j[O];W&&le&&(j[O]=ue(le))}}return I}_removeAllSchemas(I,V){for(const z in I){const b=I[z];(!V||V.test(z))&&(typeof b=="string"?delete I[z]:b&&!b.meta&&(this._cache.delete(b.schema),delete I[z]))}}_addSchema(I,V,z,b=this.opts.validateSchema,T=this.opts.addUsedSchema){let j;const{schemaId:O}=this.opts;if(typeof I=="object")j=I[O];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof I!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(I);if(F!==void 0)return F;z=(0,c.normalizeId)(j||z);const W=c.getSchemaRefs.call(this,I,z);return F=new o.SchemaEnv({schema:I,schemaId:O,meta:V,baseId:z,localRefs:W}),this._cache.set(F.schema,F),T&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=F),b&&this.validateSchema(I,!0),F}_checkUnique(I){if(this.schemas[I]||this.refs[I])throw new Error(`schema with key or id "${I}" already exists`)}_compileSchemaEnv(I){if(I.meta?this._compileMetaSchema(I):o.compileSchema.call(this,I),!I.validate)throw new Error("ajv implementation error");return I.validate}_compileMetaSchema(I){const V=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,I)}finally{this.opts=V}}}C.ValidationError=r.default,C.MissingRefError=s.default,t.default=C;function $(L,I,V,z="error"){for(const b in L){const T=b;T in I&&this.logger[z](`${V}: option ${b}. ${L[T]}`)}}function N(L){return L=(0,c.normalizeId)(L),this.schemas[L]||this.refs[L]}function M(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const I in L)this.addSchema(L[I],I)}function A(){for(const L in this.opts.formats){const I=this.opts.formats[L];I&&this.addFormat(L,I)}}function q(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const I in L){const V=L[I];V.keyword||(V.keyword=I),this.addKeyword(V)}}function G(){const L={...this.opts};for(const I of _)delete L[I];return L}const B={log(){},warn(){},error(){}};function Y(L){if(L===!1)return B;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const ie=/^[a-z_$][a-z0-9_$:-]*$/i;function se(L,I){const{RULES:V}=this;if((0,f.eachItem)(L,z=>{if(V.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!ie.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function ae(L,I,V){var z;const b=I==null?void 0:I.post;if(V&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:T}=this;let j=b?T.post:T.rules.find(({type:F})=>F===V);if(j||(j={type:V,rules:[]},T.rules.push(j)),T.keywords[L]=!0,!I)return;const O={keyword:L,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ve.call(this,j,O,I.before):j.rules.push(O),T.all[L]=O,(z=I.implements)===null||z===void 0||z.forEach(F=>this.addKeyword(F))}function ve(L,I,V){const z=L.rules.findIndex(b=>b.keyword===V);z>=0?L.rules.splice(z,0,I):(L.rules.push(I),this.logger.warn(`rule ${V} is not defined`))}function $e(L){let{metaSchema:I}=L;I!==void 0&&(L.$data&&this.opts.$data&&(I=ue(I)),L.validateSchema=this.compile(I,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(L){return{anyOf:[L,ee]}}})(UN);var vk={},_k={},wk={};Object.defineProperty(wk,"__esModule",{value:!0});const MZ={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wk.default=MZ;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.callRef=ou.getValidate=void 0;const zZ=vd,b6=it,Kr=at,Uu=ro,E6=Jr,Am=Ce,DZ={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:d}=i;if((n==="#"||n==="#/")&&s===d.baseId)return m();const f=E6.resolveRef.call(c,d,s,n);if(f===void 0)throw new zZ.default(r.opts.uriResolver,s,n);if(f instanceof E6.SchemaEnv)return y(f);return v(f);function m(){if(i===d)return yg(t,o,i,i.$async);const _=e.scopeValue("root",{ref:d});return yg(t,(0,Kr._)`${_}.validate`,d,d.$async)}function y(_){const E=RR(t,_);yg(t,E,_,_.$async)}function v(_){const E=e.scopeValue("schema",a.code.source===!0?{ref:_,code:(0,Kr.stringify)(_)}:{ref:_}),k=e.name("valid"),p=t.subschema({schema:_,dataTypes:[],schemaPath:Kr.nil,topSchemaRef:E,errSchemaPath:n},k);t.mergeEvaluated(p),t.ok(k)}}};function RR(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Kr._)`${n.scopeValue("wrapper",{ref:e})}.validate`}ou.getValidate=RR;function yg(t,e,n,r){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,d=c.passContext?Uu.default.this:Kr.nil;r?f():m();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");const _=s.let("valid");s.try(()=>{s.code((0,Kr._)`await ${(0,b6.callValidateCode)(t,e,d)}`),v(e),o||s.assign(_,!0)},E=>{s.if((0,Kr._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),y(E),o||s.assign(_,!1)}),t.ok(_)}function m(){t.result((0,b6.callValidateCode)(t,e,d),()=>v(e),()=>y(e))}function y(_){const E=(0,Kr._)`${_}.errors`;s.assign(Uu.default.vErrors,(0,Kr._)`${Uu.default.vErrors} === null ? ${E} : ${Uu.default.vErrors}.concat(${E})`),s.assign(Uu.default.errors,(0,Kr._)`${Uu.default.vErrors}.length`)}function v(_){var E;if(!i.opts.unevaluated)return;const k=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(i.props=Am.mergeEvaluated.props(s,k.props,i.props));else{const p=s.var("props",(0,Kr._)`${_}.evaluated.props`);i.props=Am.mergeEvaluated.props(s,p,i.props,Kr.Name)}if(i.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(i.items=Am.mergeEvaluated.items(s,k.items,i.items));else{const p=s.var("items",(0,Kr._)`${_}.evaluated.items`);i.items=Am.mergeEvaluated.items(s,p,i.items,Kr.Name)}}}ou.callRef=yg;ou.default=DZ;Object.defineProperty(_k,"__esModule",{value:!0});const FZ=wk,LZ=ou,UZ=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",FZ.default,LZ.default];_k.default=UZ;var Sk={},kk={};Object.defineProperty(kk,"__esModule",{value:!0});const S0=at,ia=S0.operators,k0={maximum:{okStr:"<=",ok:ia.LTE,fail:ia.GT},minimum:{okStr:">=",ok:ia.GTE,fail:ia.LT},exclusiveMaximum:{okStr:"<",ok:ia.LT,fail:ia.GTE},exclusiveMinimum:{okStr:">",ok:ia.GT,fail:ia.LTE}},VZ={message:({keyword:t,schemaCode:e})=>(0,S0.str)`must be ${k0[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,S0._)`{comparison: ${k0[t].okStr}, limit: ${e}}`},GZ={keyword:Object.keys(k0),type:"number",schemaType:"number",$data:!0,error:VZ,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,S0._)`${n} ${k0[e].fail} ${r} || isNaN(${n})`)}};kk.default=GZ;var bk={};Object.defineProperty(bk,"__esModule",{value:!0});const Zf=at,HZ={message:({schemaCode:t})=>(0,Zf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Zf._)`{multipleOf: ${t}}`},qZ={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:HZ,code(t){const{gen:e,data:n,schemaCode:r,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Zf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Zf._)`${o} !== parseInt(${o})`;t.fail$data((0,Zf._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};bk.default=qZ;var Ek={},Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});function OR(t){const e=t.length;let n=0,r=0,s;for(;r<e;)n++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<e&&(s=t.charCodeAt(r),(s&64512)===56320&&r++);return n}Ck.default=OR;OR.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Ek,"__esModule",{value:!0});const Cl=at,BZ=Ce,WZ=Ck,ZZ={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,Cl.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,Cl._)`{limit: ${t}}`},KZ={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ZZ,code(t){const{keyword:e,data:n,schemaCode:r,it:s}=t,i=e==="maxLength"?Cl.operators.GT:Cl.operators.LT,o=s.opts.unicode===!1?(0,Cl._)`${n}.length`:(0,Cl._)`${(0,BZ.useFunc)(t.gen,WZ.default)}(${n})`;t.fail$data((0,Cl._)`${o} ${i} ${r}`)}};Ek.default=KZ;var Pk={};Object.defineProperty(Pk,"__esModule",{value:!0});const QZ=it,b0=at,YZ={message:({schemaCode:t})=>(0,b0.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,b0._)`{pattern: ${t}}`},XZ={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:YZ,code(t){const{data:e,$data:n,schema:r,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=n?(0,b0._)`(new RegExp(${s}, ${o}))`:(0,QZ.usePattern)(t,r);t.fail$data((0,b0._)`!${a}.test(${e})`)}};Pk.default=XZ;var $k={};Object.defineProperty($k,"__esModule",{value:!0});const Kf=at,JZ={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,Kf.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,Kf._)`{limit: ${t}}`},eK={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:JZ,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxProperties"?Kf.operators.GT:Kf.operators.LT;t.fail$data((0,Kf._)`Object.keys(${n}).length ${s} ${r}`)}};$k.default=eK;var Tk={};Object.defineProperty(Tk,"__esModule",{value:!0});const lf=it,Qf=at,tK=Ce,nK={message:({params:{missingProperty:t}})=>(0,Qf.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Qf._)`{missingProperty: ${t}}`},rK={keyword:"required",type:"object",schemaType:"array",$data:!0,error:nK,code(t){const{gen:e,schema:n,schemaCode:r,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&n.length===0)return;const c=n.length>=a.loopRequired;if(o.allErrors?d():f(),a.strictRequired){const v=t.parentSchema.properties,{definedProperties:_}=t.it;for(const E of n)if((v==null?void 0:v[E])===void 0&&!_.has(E)){const k=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${E}" is not defined at "${k}" (strictRequired)`;(0,tK.checkStrictMode)(o,p,o.opts.strictRequired)}}function d(){if(c||i)t.block$data(Qf.nil,m);else for(const v of n)(0,lf.checkReportMissingProp)(t,v)}function f(){const v=e.let("missing");if(c||i){const _=e.let("valid",!0);t.block$data(_,()=>y(v,_)),t.ok(_)}else e.if((0,lf.checkMissingProp)(t,n,v)),(0,lf.reportMissingProp)(t,v),e.else()}function m(){e.forOf("prop",r,v=>{t.setParams({missingProperty:v}),e.if((0,lf.noPropertyInData)(e,s,v,a.ownProperties),()=>t.error())})}function y(v,_){t.setParams({missingProperty:v}),e.forOf(v,r,()=>{e.assign(_,(0,lf.propertyInData)(e,s,v,a.ownProperties)),e.if((0,Qf.not)(_),()=>{t.error(),e.break()})},Qf.nil)}}};Tk.default=rK;var xk={};Object.defineProperty(xk,"__esModule",{value:!0});const Yf=at,sK={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,Yf.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,Yf._)`{limit: ${t}}`},iK={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:sK,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxItems"?Yf.operators.GT:Yf.operators.LT;t.fail$data((0,Yf._)`${n}.length ${s} ${r}`)}};xk.default=iK;var Nk={},rp={};Object.defineProperty(rp,"__esModule",{value:!0});const IR=Ty;IR.code='require("ajv/dist/runtime/equal").default';rp.default=IR;Object.defineProperty(Nk,"__esModule",{value:!0});const N1=Dn,nr=at,oK=Ce,aK=rp,lK={message:({params:{i:t,j:e}})=>(0,nr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,nr._)`{i: ${t}, j: ${e}}`},uK={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lK,code(t){const{gen:e,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!r&&!s)return;const c=e.let("valid"),d=i.items?(0,N1.getSchemaTypes)(i.items):[];t.block$data(c,f,(0,nr._)`${o} === false`),t.ok(c);function f(){const _=e.let("i",(0,nr._)`${n}.length`),E=e.let("j");t.setParams({i:_,j:E}),e.assign(c,!0),e.if((0,nr._)`${_} > 1`,()=>(m()?y:v)(_,E))}function m(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function y(_,E){const k=e.name("item"),p=(0,N1.checkDataTypes)(d,k,a.opts.strictNumbers,N1.DataType.Wrong),w=e.const("indices",(0,nr._)`{}`);e.for((0,nr._)`;${_}--;`,()=>{e.let(k,(0,nr._)`${n}[${_}]`),e.if(p,(0,nr._)`continue`),d.length>1&&e.if((0,nr._)`typeof ${k} == "string"`,(0,nr._)`${k} += "_"`),e.if((0,nr._)`typeof ${w}[${k}] == "number"`,()=>{e.assign(E,(0,nr._)`${w}[${k}]`),t.error(),e.assign(c,!1).break()}).code((0,nr._)`${w}[${k}] = ${_}`)})}function v(_,E){const k=(0,oK.useFunc)(e,aK.default),p=e.name("outer");e.label(p).for((0,nr._)`;${_}--;`,()=>e.for((0,nr._)`${E} = ${_}; ${E}--;`,()=>e.if((0,nr._)`${k}(${n}[${_}], ${n}[${E}])`,()=>{t.error(),e.assign(c,!1).break(p)})))}}};Nk.default=uK;var Rk={};Object.defineProperty(Rk,"__esModule",{value:!0});const L2=at,cK=Ce,dK=rp,fK={message:"must be equal to constant",params:({schemaCode:t})=>(0,L2._)`{allowedValue: ${t}}`},hK={keyword:"const",$data:!0,error:fK,code(t){const{gen:e,data:n,$data:r,schemaCode:s,schema:i}=t;r||i&&typeof i=="object"?t.fail$data((0,L2._)`!${(0,cK.useFunc)(e,dK.default)}(${n}, ${s})`):t.fail((0,L2._)`${i} !== ${n}`)}};Rk.default=hK;var Ok={};Object.defineProperty(Ok,"__esModule",{value:!0});const Tf=at,pK=Ce,mK=rp,gK={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Tf._)`{allowedValues: ${t}}`},yK={keyword:"enum",schemaType:"array",$data:!0,error:gK,code(t){const{gen:e,data:n,$data:r,schema:s,schemaCode:i,it:o}=t;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const d=()=>c??(c=(0,pK.useFunc)(e,mK.default));let f;if(a||r)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const v=e.const("vSchema",i);f=(0,Tf.or)(...s.map((_,E)=>y(v,E)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",i,v=>e.if((0,Tf._)`${d()}(${n}, ${v})`,()=>e.assign(f,!0).break()))}function y(v,_){const E=s[_];return typeof E=="object"&&E!==null?(0,Tf._)`${d()}(${n}, ${v}[${_}])`:(0,Tf._)`${n} === ${E}`}}};Ok.default=yK;Object.defineProperty(Sk,"__esModule",{value:!0});const vK=kk,_K=bk,wK=Ek,SK=Pk,kK=$k,bK=Tk,EK=xk,CK=Nk,PK=Rk,$K=Ok,TK=[vK.default,_K.default,wK.default,SK.default,kK.default,bK.default,EK.default,CK.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},PK.default,$K.default];Sk.default=TK;var Ik={},_d={};Object.defineProperty(_d,"__esModule",{value:!0});_d.validateAdditionalItems=void 0;const Pl=at,U2=Ce,xK={message:({params:{len:t}})=>(0,Pl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Pl._)`{limit: ${t}}`},NK={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:xK,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,U2.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}AR(t,r)}};function AR(t,e){const{gen:n,schema:r,data:s,keyword:i,it:o}=t;o.items=!0;const a=n.const("len",(0,Pl._)`${s}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,Pl._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,U2.alwaysValidSchema)(o,r)){const d=n.var("valid",(0,Pl._)`${a} <= ${e.length}`);n.if((0,Pl.not)(d),()=>c(d)),t.ok(d)}function c(d){n.forRange("i",e.length,a,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:U2.Type.Num},d),o.allErrors||n.if((0,Pl.not)(d),()=>n.break())})}}_d.validateAdditionalItems=AR;_d.default=NK;var Ak={},wd={};Object.defineProperty(wd,"__esModule",{value:!0});wd.validateTuple=void 0;const C6=at,vg=Ce,RK=it,OK={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return jR(t,"additionalItems",e);n.items=!0,!(0,vg.alwaysValidSchema)(n,e)&&t.ok((0,RK.validateArray)(t))}};function jR(t,e,n=t.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=t;f(s),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=vg.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),d=r.const("len",(0,C6._)`${i}.length`);n.forEach((m,y)=>{(0,vg.alwaysValidSchema)(a,m)||(r.if((0,C6._)`${d} > ${y}`,()=>t.subschema({keyword:o,schemaProp:y,dataProp:y},c)),t.ok(c))});function f(m){const{opts:y,errSchemaPath:v}=a,_=n.length,E=_===m.minItems&&(_===m.maxItems||m[e]===!1);if(y.strictTuples&&!E){const k=`"${o}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;(0,vg.checkStrictMode)(a,k,y.strictTuples)}}}wd.validateTuple=jR;wd.default=OK;Object.defineProperty(Ak,"__esModule",{value:!0});const IK=wd,AK={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,IK.validateTuple)(t,"items")};Ak.default=AK;var jk={};Object.defineProperty(jk,"__esModule",{value:!0});const P6=at,jK=Ce,MK=it,zK=_d,DK={message:({params:{len:t}})=>(0,P6.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,P6._)`{limit: ${t}}`},FK={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:DK,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:s}=n;r.items=!0,!(0,jK.alwaysValidSchema)(r,e)&&(s?(0,zK.validateAdditionalItems)(t,s):t.ok((0,MK.validateArray)(t)))}};jk.default=FK;var Mk={};Object.defineProperty(Mk,"__esModule",{value:!0});const zs=at,jm=Ce,LK={message:({params:{min:t,max:e}})=>e===void 0?(0,zs.str)`must contain at least ${t} valid item(s)`:(0,zs.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,zs._)`{minContains: ${t}}`:(0,zs._)`{minContains: ${t}, maxContains: ${e}}`},UK={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:LK,code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;let o,a;const{minContains:c,maxContains:d}=r;i.opts.next?(o=c===void 0?1:c,a=d):o=1;const f=e.const("len",(0,zs._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,jm.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,jm.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,jm.alwaysValidSchema)(i,n)){let E=(0,zs._)`${f} >= ${o}`;a!==void 0&&(E=(0,zs._)`${E} && ${f} <= ${a}`),t.pass(E);return}i.items=!0;const m=e.name("valid");a===void 0&&o===1?v(m,()=>e.if(m,()=>e.break())):o===0?(e.let(m,!0),a!==void 0&&e.if((0,zs._)`${s}.length > 0`,y)):(e.let(m,!1),y()),t.result(m,()=>t.reset());function y(){const E=e.name("_valid"),k=e.let("count",0);v(E,()=>e.if(E,()=>_(k)))}function v(E,k){e.forRange("i",0,f,p=>{t.subschema({keyword:"contains",dataProp:p,dataPropType:jm.Type.Num,compositeRule:!0},E),k()})}function _(E){e.code((0,zs._)`${E}++`),a===void 0?e.if((0,zs._)`${E} >= ${o}`,()=>e.assign(m,!0).break()):(e.if((0,zs._)`${E} > ${a}`,()=>e.assign(m,!1).break()),o===1?e.assign(m,!0):e.if((0,zs._)`${E} >= ${o}`,()=>e.assign(m,!0)))}}};Mk.default=UK;var MR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=at,n=Ce,r=it;t.error={message:({params:{property:c,depsCount:d,deps:f}})=>{const m=d===1?"property":"properties";return(0,e.str)`must have ${m} ${f} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:f,missingProperty:m}})=>(0,e._)`{property: ${c},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${f}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[d,f]=i(c);o(c,d),a(c,f)}};function i({schema:c}){const d={},f={};for(const m in c){if(m==="__proto__")continue;const y=Array.isArray(c[m])?d:f;y[m]=c[m]}return[d,f]}function o(c,d=c.schema){const{gen:f,data:m,it:y}=c;if(Object.keys(d).length===0)return;const v=f.let("missing");for(const _ in d){const E=d[_];if(E.length===0)continue;const k=(0,r.propertyInData)(f,m,_,y.opts.ownProperties);c.setParams({property:_,depsCount:E.length,deps:E.join(", ")}),y.allErrors?f.if(k,()=>{for(const p of E)(0,r.checkReportMissingProp)(c,p)}):(f.if((0,e._)`${k} && (${(0,r.checkMissingProp)(c,E,v)})`),(0,r.reportMissingProp)(c,v),f.else())}}t.validatePropertyDeps=o;function a(c,d=c.schema){const{gen:f,data:m,keyword:y,it:v}=c,_=f.name("valid");for(const E in d)(0,n.alwaysValidSchema)(v,d[E])||(f.if((0,r.propertyInData)(f,m,E,v.opts.ownProperties),()=>{const k=c.subschema({keyword:y,schemaProp:E},_);c.mergeValidEvaluated(k,_)},()=>f.var(_,!0)),c.ok(_))}t.validateSchemaDeps=a,t.default=s})(MR);var zk={};Object.defineProperty(zk,"__esModule",{value:!0});const zR=at,VK=Ce,GK={message:"property name must be valid",params:({params:t})=>(0,zR._)`{propertyName: ${t.propertyName}}`},HK={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:GK,code(t){const{gen:e,schema:n,data:r,it:s}=t;if((0,VK.alwaysValidSchema)(s,n))return;const i=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,zR.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};zk.default=HK;var Oy={};Object.defineProperty(Oy,"__esModule",{value:!0});const Mm=it,ci=at,qK=ro,zm=Ce,BK={message:"must NOT have additional properties",params:({params:t})=>(0,ci._)`{additionalProperty: ${t.additionalProperty}}`},WK={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:BK,code(t){const{gen:e,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,zm.alwaysValidSchema)(o,n))return;const d=(0,Mm.allSchemaProperties)(r.properties),f=(0,Mm.allSchemaProperties)(r.patternProperties);m(),t.ok((0,ci._)`${i} === ${qK.default.errors}`);function m(){e.forIn("key",s,k=>{!d.length&&!f.length?_(k):e.if(y(k),()=>_(k))})}function y(k){let p;if(d.length>8){const w=(0,zm.schemaRefOrVal)(o,r.properties,"properties");p=(0,Mm.isOwnProperty)(e,w,k)}else d.length?p=(0,ci.or)(...d.map(w=>(0,ci._)`${k} === ${w}`)):p=ci.nil;return f.length&&(p=(0,ci.or)(p,...f.map(w=>(0,ci._)`${(0,Mm.usePattern)(t,w)}.test(${k})`))),(0,ci.not)(p)}function v(k){e.code((0,ci._)`delete ${s}[${k}]`)}function _(k){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){v(k);return}if(n===!1){t.setParams({additionalProperty:k}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,zm.alwaysValidSchema)(o,n)){const p=e.name("valid");c.removeAdditional==="failing"?(E(k,p,!1),e.if((0,ci.not)(p),()=>{t.reset(),v(k)})):(E(k,p),a||e.if((0,ci.not)(p),()=>e.break()))}}function E(k,p,w){const g={keyword:"additionalProperties",dataProp:k,dataPropType:zm.Type.Str};w===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,p)}}};Oy.default=WK;var Dk={};Object.defineProperty(Dk,"__esModule",{value:!0});const ZK=Ci,$6=it,R1=Ce,T6=Oy,KK={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&T6.default.code(new ZK.KeywordCxt(i,T6.default,"additionalProperties"));const o=(0,$6.allSchemaProperties)(n);for(const m of o)i.definedProperties.add(m);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=R1.mergeEvaluated.props(e,(0,R1.toHash)(o),i.props));const a=o.filter(m=>!(0,R1.alwaysValidSchema)(i,n[m]));if(a.length===0)return;const c=e.name("valid");for(const m of a)d(m)?f(m):(e.if((0,$6.propertyInData)(e,s,m,i.opts.ownProperties)),f(m),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(c);function d(m){return i.opts.useDefaults&&!i.compositeRule&&n[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},c)}}};Dk.default=KK;var Fk={};Object.defineProperty(Fk,"__esModule",{value:!0});const x6=it,Dm=at,N6=Ce,R6=Ce,QK={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,x6.allSchemaProperties)(n),c=a.filter(E=>(0,N6.alwaysValidSchema)(i,n[E]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const d=o.strictSchema&&!o.allowMatchingProperties&&s.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof Dm.Name)&&(i.props=(0,R6.evaluatedPropsToName)(e,i.props));const{props:m}=i;y();function y(){for(const E of a)d&&v(E),i.allErrors?_(E):(e.var(f,!0),_(E),e.if(f))}function v(E){for(const k in d)new RegExp(E).test(k)&&(0,N6.checkStrictMode)(i,`property ${k} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){e.forIn("key",r,k=>{e.if((0,Dm._)`${(0,x6.usePattern)(t,E)}.test(${k})`,()=>{const p=c.includes(E);p||t.subschema({keyword:"patternProperties",schemaProp:E,dataProp:k,dataPropType:R6.Type.Str},f),i.opts.unevaluated&&m!==!0?e.assign((0,Dm._)`${m}[${k}]`,!0):!p&&!i.allErrors&&e.if((0,Dm.not)(f),()=>e.break())})})}}};Fk.default=QK;var Lk={};Object.defineProperty(Lk,"__esModule",{value:!0});const YK=Ce,XK={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,YK.alwaysValidSchema)(r,n)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Lk.default=XK;var Uk={};Object.defineProperty(Uk,"__esModule",{value:!0});const JK=it,eQ={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:JK.validateUnion,error:{message:"must match a schema in anyOf"}};Uk.default=eQ;var Vk={};Object.defineProperty(Vk,"__esModule",{value:!0});const _g=at,tQ=Ce,nQ={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,_g._)`{passingSchemas: ${t.passing}}`},rQ={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:nQ,code(t){const{gen:e,schema:n,parentSchema:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(o,()=>t.reset(),()=>t.error(!0));function d(){i.forEach((f,m)=>{let y;(0,tQ.alwaysValidSchema)(s,f)?e.var(c,!0):y=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},c),m>0&&e.if((0,_g._)`${c} && ${o}`).assign(o,!1).assign(a,(0,_g._)`[${a}, ${m}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,m),y&&t.mergeEvaluated(y,_g.Name)})})}}};Vk.default=rQ;var Gk={};Object.defineProperty(Gk,"__esModule",{value:!0});const sQ=Ce,iQ={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=e.name("valid");n.forEach((i,o)=>{if((0,sQ.alwaysValidSchema)(r,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};Gk.default=iQ;var Hk={};Object.defineProperty(Hk,"__esModule",{value:!0});const E0=at,DR=Ce,oQ={message:({params:t})=>(0,E0.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,E0._)`{failingKeyword: ${t.ifClause}}`},aQ={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:oQ,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,DR.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=O6(r,"then"),i=O6(r,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){const f=e.let("ifClause");t.setParams({ifClause:f}),e.if(a,d("then",f),d("else",f))}else s?e.if(a,d("then")):e.if((0,E0.not)(a),d("else"));t.pass(o,()=>t.error(!0));function c(){const f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(f)}function d(f,m){return()=>{const y=t.subschema({keyword:f},a);e.assign(o,a),t.mergeValidEvaluated(y,o),m?e.assign(m,(0,E0._)`${f}`):t.setParams({ifClause:f})}}}};function O6(t,e){const n=t.schema[e];return n!==void 0&&!(0,DR.alwaysValidSchema)(t,n)}Hk.default=aQ;var qk={};Object.defineProperty(qk,"__esModule",{value:!0});const lQ=Ce,uQ={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,lQ.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};qk.default=uQ;Object.defineProperty(Ik,"__esModule",{value:!0});const cQ=_d,dQ=Ak,fQ=wd,hQ=jk,pQ=Mk,mQ=MR,gQ=zk,yQ=Oy,vQ=Dk,_Q=Fk,wQ=Lk,SQ=Uk,kQ=Vk,bQ=Gk,EQ=Hk,CQ=qk;function PQ(t=!1){const e=[wQ.default,SQ.default,kQ.default,bQ.default,EQ.default,CQ.default,gQ.default,yQ.default,mQ.default,vQ.default,_Q.default];return t?e.push(dQ.default,hQ.default):e.push(cQ.default,fQ.default),e.push(pQ.default),e}Ik.default=PQ;var Bk={},Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});const wn=at,$Q={message:({schemaCode:t})=>(0,wn.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,wn._)`{format: ${t}}`},TQ={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:$Q,code(t,e){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:f,self:m}=a;if(!c.validateFormats)return;s?y():v();function y(){const _=n.scopeValue("formats",{ref:m.formats,code:c.code.formats}),E=n.const("fDef",(0,wn._)`${_}[${o}]`),k=n.let("fType"),p=n.let("format");n.if((0,wn._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(k,(0,wn._)`${E}.type || "string"`).assign(p,(0,wn._)`${E}.validate`),()=>n.assign(k,(0,wn._)`"string"`).assign(p,E)),t.fail$data((0,wn.or)(w(),g()));function w(){return c.strictSchema===!1?wn.nil:(0,wn._)`${o} && !${p}`}function g(){const C=f.$async?(0,wn._)`(${E}.async ? await ${p}(${r}) : ${p}(${r}))`:(0,wn._)`${p}(${r})`,$=(0,wn._)`(typeof ${p} == "function" ? ${C} : ${p}.test(${r}))`;return(0,wn._)`${p} && ${p} !== true && ${k} === ${e} && !${$}`}}function v(){const _=m.formats[i];if(!_){w();return}if(_===!0)return;const[E,k,p]=g(_);E===e&&t.pass(C());function w(){if(c.strictSchema===!1){m.logger.warn($());return}throw new Error($());function $(){return`unknown format "${i}" ignored in schema at path "${d}"`}}function g($){const N=$ instanceof RegExp?(0,wn.regexpCode)($):c.code.formats?(0,wn._)`${c.code.formats}${(0,wn.getProperty)(i)}`:void 0,M=n.scopeValue("formats",{key:i,ref:$,code:N});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,wn._)`${M}.validate`]:["string",$,M]}function C(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!f.$async)throw new Error("async format in sync schema");return(0,wn._)`await ${p}(${r})`}return typeof k=="function"?(0,wn._)`${p}(${r})`:(0,wn._)`${p}.test(${r})`}}}};Wk.default=TQ;Object.defineProperty(Bk,"__esModule",{value:!0});const xQ=Wk,NQ=[xQ.default];Bk.default=NQ;var sd={};Object.defineProperty(sd,"__esModule",{value:!0});sd.contentVocabulary=sd.metadataVocabulary=void 0;sd.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];sd.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(vk,"__esModule",{value:!0});const RQ=_k,OQ=Sk,IQ=Ik,AQ=Bk,I6=sd,jQ=[RQ.default,OQ.default,(0,IQ.default)(),AQ.default,I6.metadataVocabulary,I6.contentVocabulary];vk.default=jQ;var Zk={},Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});Iy.DiscrError=void 0;var A6;(function(t){t.Tag="tag",t.Mapping="mapping"})(A6||(Iy.DiscrError=A6={}));Object.defineProperty(Zk,"__esModule",{value:!0});const Ju=at,V2=Iy,j6=Jr,MQ=vd,zQ=Ce,DQ={message:({params:{discrError:t,tagName:e}})=>t===V2.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,Ju._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},FQ={keyword:"discriminator",type:"object",schemaType:"object",error:DQ,code(t){const{gen:e,data:n,schema:r,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),d=e.const("tag",(0,Ju._)`${n}${(0,Ju.getProperty)(a)}`);e.if((0,Ju._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:V2.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function f(){const v=y();e.if(!1);for(const _ in v)e.elseIf((0,Ju._)`${d} === ${_}`),e.assign(c,m(v[_]));e.else(),t.error(!1,{discrError:V2.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function m(v){const _=e.name("valid"),E=t.subschema({keyword:"oneOf",schemaProp:v},_);return t.mergeEvaluated(E,Ju.Name),_}function y(){var v;const _={},E=p(s);let k=!0;for(let C=0;C<o.length;C++){let $=o[C];if($!=null&&$.$ref&&!(0,zQ.schemaHasRulesButRef)($,i.self.RULES)){const M=$.$ref;if($=j6.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,M),$ instanceof j6.SchemaEnv&&($=$.schema),$===void 0)throw new MQ.default(i.opts.uriResolver,i.baseId,M)}const N=(v=$==null?void 0:$.properties)===null||v===void 0?void 0:v[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(E||p($)),w(N,C)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return _;function p({required:C}){return Array.isArray(C)&&C.includes(a)}function w(C,$){if(C.const)g(C.const,$);else if(C.enum)for(const N of C.enum)g(N,$);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(C,$){if(typeof C!="string"||C in _)throw new Error(`discriminator: "${a}" values must be unique strings`);_[C]=$}}}};Zk.default=FQ;const LQ="http://json-schema.org/draft-07/schema#",UQ="http://json-schema.org/draft-07/schema#",VQ="Core schema meta-schema",GQ={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},HQ=["object","boolean"],qQ={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},BQ={$schema:LQ,$id:UQ,title:VQ,definitions:GQ,type:HQ,properties:qQ,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=UN,r=vk,s=Zk,i=BQ,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var d=Ci;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var f=at;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var m=np;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return m.default}});var y=vd;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(j2,j2.exports);var WQ=j2.exports;const ZQ=Lh(WQ);var G2={exports:{}},FR={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(B,Y){return{validate:B,compare:Y}}t.fullFormats={date:e(i,o),time:e(c(!0),d),"date-time":e(y(!0),v),"iso-time":e(c(),f),"iso-date-time":e(y(),_),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:p,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:G,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:g,int32:{type:"number",validate:N},int64:{type:"number",validate:M},float:{type:"number",validate:A},double:{type:"number",validate:A},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,v),"iso-time":e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"iso-date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,_),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function n(B){return B%4===0&&(B%100!==0||B%400===0)}const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(B){const Y=r.exec(B);if(!Y)return!1;const ie=+Y[1],se=+Y[2],ae=+Y[3];return se>=1&&se<=12&&ae>=1&&ae<=(se===2&&n(ie)?29:s[se])}function o(B,Y){if(B&&Y)return B>Y?1:B<Y?-1:0}const a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(B){return function(ie){const se=a.exec(ie);if(!se)return!1;const ae=+se[1],ve=+se[2],$e=+se[3],ee=se[4],ue=se[5]==="-"?-1:1,L=+(se[6]||0),I=+(se[7]||0);if(L>23||I>59||B&&!ee)return!1;if(ae<=23&&ve<=59&&$e<60)return!0;const V=ve-I*ue,z=ae-L*ue-(V<0?1:0);return(z===23||z===-1)&&(V===59||V===-1)&&$e<61}}function d(B,Y){if(!(B&&Y))return;const ie=new Date("2020-01-01T"+B).valueOf(),se=new Date("2020-01-01T"+Y).valueOf();if(ie&&se)return ie-se}function f(B,Y){if(!(B&&Y))return;const ie=a.exec(B),se=a.exec(Y);if(ie&&se)return B=ie[1]+ie[2]+ie[3],Y=se[1]+se[2]+se[3],B>Y?1:B<Y?-1:0}const m=/t|\s/i;function y(B){const Y=c(B);return function(se){const ae=se.split(m);return ae.length===2&&i(ae[0])&&Y(ae[1])}}function v(B,Y){if(!(B&&Y))return;const ie=new Date(B).valueOf(),se=new Date(Y).valueOf();if(ie&&se)return ie-se}function _(B,Y){if(!(B&&Y))return;const[ie,se]=B.split(m),[ae,ve]=Y.split(m),$e=o(ie,ae);if($e!==void 0)return $e||d(se,ve)}const E=/\/|:/,k=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function p(B){return E.test(B)&&k.test(B)}const w=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function g(B){return w.lastIndex=0,w.test(B)}const C=-2147483648,$=2**31-1;function N(B){return Number.isInteger(B)&&B<=$&&B>=C}function M(B){return Number.isInteger(B)}function A(){return!0}const q=/[^\\]\\Z/;function G(B){if(q.test(B))return!1;try{return new RegExp(B),!0}catch{return!1}}})(FR);var LR={},H2={exports:{}},UR={},Pi={},id={},sp={},nt={},Rh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(w){if(super(),!t.IDENTIFIER.test(w))throw new Error("CodeGen: name must be a valid identifier");this.str=w}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class r extends e{constructor(w){super(),this._items=typeof w=="string"?[w]:w}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const w=this._items[0];return w===""||w==='""'}get str(){var w;return(w=this._str)!==null&&w!==void 0?w:this._str=this._items.reduce((g,C)=>`${g}${C}`,"")}get names(){var w;return(w=this._names)!==null&&w!==void 0?w:this._names=this._items.reduce((g,C)=>(C instanceof n&&(g[C.str]=(g[C.str]||0)+1),g),{})}}t._Code=r,t.nil=new r("");function s(p,...w){const g=[p[0]];let C=0;for(;C<w.length;)a(g,w[C]),g.push(p[++C]);return new r(g)}t._=s;const i=new r("+");function o(p,...w){const g=[v(p[0])];let C=0;for(;C<w.length;)g.push(i),a(g,w[C]),g.push(i,v(p[++C]));return c(g),new r(g)}t.str=o;function a(p,w){w instanceof r?p.push(...w._items):w instanceof n?p.push(w):p.push(m(w))}t.addCodeArg=a;function c(p){let w=1;for(;w<p.length-1;){if(p[w]===i){const g=d(p[w-1],p[w+1]);if(g!==void 0){p.splice(w-1,3,g);continue}p[w++]="+"}w++}}function d(p,w){if(w==='""')return p;if(p==='""')return w;if(typeof p=="string")return w instanceof n||p[p.length-1]!=='"'?void 0:typeof w!="string"?`${p.slice(0,-1)}${w}"`:w[0]==='"'?p.slice(0,-1)+w.slice(1):void 0;if(typeof w=="string"&&w[0]==='"'&&!(p instanceof n))return`"${p}${w.slice(1)}`}function f(p,w){return w.emptyStr()?p:p.emptyStr()?w:o`${p}${w}`}t.strConcat=f;function m(p){return typeof p=="number"||typeof p=="boolean"||p===null?p:v(Array.isArray(p)?p.join(","):p)}function y(p){return new r(v(p))}t.stringify=y;function v(p){return JSON.stringify(p).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=v;function _(p){return typeof p=="string"&&t.IDENTIFIER.test(p)?new r(`.${p}`):s`[${p}]`}t.getProperty=_;function E(p){if(typeof p=="string"&&t.IDENTIFIER.test(p))return new r(`${p}`);throw new Error(`CodeGen: invalid export name: ${p}, use explicit $id name mapping`)}t.getEsmExportName=E;function k(p){return new r(p.toString())}t.regexpCode=k})(Rh);var q2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Rh;class n extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var r;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(r||(t.UsedValueState=r={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:d,parent:f}={}){this._names={},this._prefixes=d,this._parent=f}toName(d){return d instanceof e.Name?d:this.name(d)}name(d){return new e.Name(this._newName(d))}_newName(d){const f=this._names[d]||this._nameGroup(d);return`${d}${f.index++}`}_nameGroup(d){var f,m;if(!((m=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||m===void 0)&&m.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}t.Scope=s;class i extends e.Name{constructor(d,f){super(f),this.prefix=d}setValue(d,{property:f,itemIndex:m}){this.value=d,this.scopePath=(0,e._)`.${new e.Name(f)}[${m}]`}}t.ValueScopeName=i;const o=(0,e._)`\n`;class a extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?o:e.nil}}get(){return this._scope}name(d){return new i(d,this._newName(d))}value(d,f){var m;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:v}=y,_=(m=f.key)!==null&&m!==void 0?m:f.ref;let E=this._values[v];if(E){const w=E.get(_);if(w)return w}else E=this._values[v]=new Map;E.set(_,y);const k=this._scope[v]||(this._scope[v]=[]),p=k.length;return k[p]=f.ref,y.setValue(f,{property:v,itemIndex:p}),y}getValue(d,f){const m=this._values[d];if(m)return m.get(f)}scopeRefs(d,f=this._values){return this._reduceValues(f,m=>{if(m.scopePath===void 0)throw new Error(`CodeGen: name "${m}" has no value`);return(0,e._)`${d}${m.scopePath}`})}scopeCode(d=this._values,f,m){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},f,m)}_reduceValues(d,f,m={},y){let v=e.nil;for(const _ in d){const E=d[_];if(!E)continue;const k=m[_]=m[_]||new Map;E.forEach(p=>{if(k.has(p))return;k.set(p,r.Started);let w=f(p);if(w){const g=this.opts.es5?t.varKinds.var:t.varKinds.const;v=(0,e._)`${v}${g} ${p} = ${w};${this.opts._n}`}else if(w=y==null?void 0:y(p))v=(0,e._)`${v}${w}${this.opts._n}`;else throw new n(p);k.set(p,r.Completed)})}return v}}t.ValueScope=a})(q2);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Rh,n=q2;var r=Rh;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}});var s=q2;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class i{optimizeNodes(){return this}optimizeNames(b,T){return this}}class o extends i{constructor(b,T,j){super(),this.varKind=b,this.name=T,this.rhs=j}render({es5:b,_n:T}){const j=b?n.varKinds.var:this.varKind,O=this.rhs===void 0?"":` = ${this.rhs}`;return`${j} ${this.name}${O};`+T}optimizeNames(b,T){if(b[this.name.str])return this.rhs&&(this.rhs=se(this.rhs,b,T)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends i{constructor(b,T,j){super(),this.lhs=b,this.rhs=T,this.sideEffects=j}render({_n:b}){return`${this.lhs} = ${this.rhs};`+b}optimizeNames(b,T){if(!(this.lhs instanceof e.Name&&!b[this.lhs.str]&&!this.sideEffects))return this.rhs=se(this.rhs,b,T),this}get names(){const b=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ie(b,this.rhs)}}class c extends a{constructor(b,T,j,O){super(b,j,O),this.op=T}render({_n:b}){return`${this.lhs} ${this.op}= ${this.rhs};`+b}}class d extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`${this.label}:`+b}}class f extends i{constructor(b){super(),this.label=b,this.names={}}render({_n:b}){return`break${this.label?` ${this.label}`:""};`+b}}class m extends i{constructor(b){super(),this.error=b}render({_n:b}){return`throw ${this.error};`+b}get names(){return this.error.names}}class y extends i{constructor(b){super(),this.code=b}render({_n:b}){return`${this.code};`+b}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(b,T){return this.code=se(this.code,b,T),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class v extends i{constructor(b=[]){super(),this.nodes=b}render(b){return this.nodes.reduce((T,j)=>T+j.render(b),"")}optimizeNodes(){const{nodes:b}=this;let T=b.length;for(;T--;){const j=b[T].optimizeNodes();Array.isArray(j)?b.splice(T,1,...j):j?b[T]=j:b.splice(T,1)}return b.length>0?this:void 0}optimizeNames(b,T){const{nodes:j}=this;let O=j.length;for(;O--;){const F=j[O];F.optimizeNames(b,T)||(ae(b,F.names),j.splice(O,1))}return j.length>0?this:void 0}get names(){return this.nodes.reduce((b,T)=>Y(b,T.names),{})}}class _ extends v{render(b){return"{"+b._n+super.render(b)+"}"+b._n}}class E extends v{}class k extends _{}k.kind="else";class p extends _{constructor(b,T){super(T),this.condition=b}render(b){let T=`if(${this.condition})`+super.render(b);return this.else&&(T+="else "+this.else.render(b)),T}optimizeNodes(){super.optimizeNodes();const b=this.condition;if(b===!0)return this.nodes;let T=this.else;if(T){const j=T.optimizeNodes();T=this.else=Array.isArray(j)?new k(j):j}if(T)return b===!1?T instanceof p?T:T.nodes:this.nodes.length?this:new p(ve(b),T instanceof p?[T]:T.nodes);if(!(b===!1||!this.nodes.length))return this}optimizeNames(b,T){var j;if(this.else=(j=this.else)===null||j===void 0?void 0:j.optimizeNames(b,T),!!(super.optimizeNames(b,T)||this.else))return this.condition=se(this.condition,b,T),this}get names(){const b=super.names;return ie(b,this.condition),this.else&&Y(b,this.else.names),b}}p.kind="if";class w extends _{}w.kind="for";class g extends w{constructor(b){super(),this.iteration=b}render(b){return`for(${this.iteration})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iteration=se(this.iteration,b,T),this}get names(){return Y(super.names,this.iteration.names)}}class C extends w{constructor(b,T,j,O){super(),this.varKind=b,this.name=T,this.from=j,this.to=O}render(b){const T=b.es5?n.varKinds.var:this.varKind,{name:j,from:O,to:F}=this;return`for(${T} ${j}=${O}; ${j}<${F}; ${j}++)`+super.render(b)}get names(){const b=ie(super.names,this.from);return ie(b,this.to)}}class $ extends w{constructor(b,T,j,O){super(),this.loop=b,this.varKind=T,this.name=j,this.iterable=O}render(b){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(b)}optimizeNames(b,T){if(super.optimizeNames(b,T))return this.iterable=se(this.iterable,b,T),this}get names(){return Y(super.names,this.iterable.names)}}class N extends _{constructor(b,T,j){super(),this.name=b,this.args=T,this.async=j}render(b){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(b)}}N.kind="func";class M extends v{render(b){return"return "+super.render(b)}}M.kind="return";class A extends _{render(b){let T="try"+super.render(b);return this.catch&&(T+=this.catch.render(b)),this.finally&&(T+=this.finally.render(b)),T}optimizeNodes(){var b,T;return super.optimizeNodes(),(b=this.catch)===null||b===void 0||b.optimizeNodes(),(T=this.finally)===null||T===void 0||T.optimizeNodes(),this}optimizeNames(b,T){var j,O;return super.optimizeNames(b,T),(j=this.catch)===null||j===void 0||j.optimizeNames(b,T),(O=this.finally)===null||O===void 0||O.optimizeNames(b,T),this}get names(){const b=super.names;return this.catch&&Y(b,this.catch.names),this.finally&&Y(b,this.finally.names),b}}class q extends _{constructor(b){super(),this.error=b}render(b){return`catch(${this.error})`+super.render(b)}}q.kind="catch";class G extends _{render(b){return"finally"+super.render(b)}}G.kind="finally";class B{constructor(b,T={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...T,_n:T.lines?`
`:""},this._extScope=b,this._scope=new n.Scope({parent:b}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(b){return this._scope.name(b)}scopeName(b){return this._extScope.name(b)}scopeValue(b,T){const j=this._extScope.value(b,T);return(this._values[j.prefix]||(this._values[j.prefix]=new Set)).add(j),j}getScopeValue(b,T){return this._extScope.getValue(b,T)}scopeRefs(b){return this._extScope.scopeRefs(b,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(b,T,j,O){const F=this._scope.toName(T);return j!==void 0&&O&&(this._constants[F.str]=j),this._leafNode(new o(b,F,j)),F}const(b,T,j){return this._def(n.varKinds.const,b,T,j)}let(b,T,j){return this._def(n.varKinds.let,b,T,j)}var(b,T,j){return this._def(n.varKinds.var,b,T,j)}assign(b,T,j){return this._leafNode(new a(b,T,j))}add(b,T){return this._leafNode(new c(b,t.operators.ADD,T))}code(b){return typeof b=="function"?b():b!==e.nil&&this._leafNode(new y(b)),this}object(...b){const T=["{"];for(const[j,O]of b)T.length>1&&T.push(","),T.push(j),(j!==O||this.opts.es5)&&(T.push(":"),(0,e.addCodeArg)(T,O));return T.push("}"),new e._Code(T)}if(b,T,j){if(this._blockNode(new p(b)),T&&j)this.code(T).else().code(j).endIf();else if(T)this.code(T).endIf();else if(j)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(b){return this._elseNode(new p(b))}else(){return this._elseNode(new k)}endIf(){return this._endBlockNode(p,k)}_for(b,T){return this._blockNode(b),T&&this.code(T).endFor(),this}for(b,T){return this._for(new g(b),T)}forRange(b,T,j,O,F=this.opts.es5?n.varKinds.var:n.varKinds.let){const W=this._scope.toName(b);return this._for(new C(F,W,T,j),()=>O(W))}forOf(b,T,j,O=n.varKinds.const){const F=this._scope.toName(b);if(this.opts.es5){const W=T instanceof e.Name?T:this.var("_arr",T);return this.forRange("_i",0,(0,e._)`${W}.length`,le=>{this.var(F,(0,e._)`${W}[${le}]`),j(F)})}return this._for(new $("of",O,F,T),()=>j(F))}forIn(b,T,j,O=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(b,(0,e._)`Object.keys(${T})`,j);const F=this._scope.toName(b);return this._for(new $("in",O,F,T),()=>j(F))}endFor(){return this._endBlockNode(w)}label(b){return this._leafNode(new d(b))}break(b){return this._leafNode(new f(b))}return(b){const T=new M;if(this._blockNode(T),this.code(b),T.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(M)}try(b,T,j){if(!T&&!j)throw new Error('CodeGen: "try" without "catch" and "finally"');const O=new A;if(this._blockNode(O),this.code(b),T){const F=this.name("e");this._currNode=O.catch=new q(F),T(F)}return j&&(this._currNode=O.finally=new G,this.code(j)),this._endBlockNode(q,G)}throw(b){return this._leafNode(new m(b))}block(b,T){return this._blockStarts.push(this._nodes.length),b&&this.code(b).endBlock(T),this}endBlock(b){const T=this._blockStarts.pop();if(T===void 0)throw new Error("CodeGen: not in self-balancing block");const j=this._nodes.length-T;if(j<0||b!==void 0&&j!==b)throw new Error(`CodeGen: wrong number of nodes: ${j} vs ${b} expected`);return this._nodes.length=T,this}func(b,T=e.nil,j,O){return this._blockNode(new N(b,T,j)),O&&this.code(O).endFunc(),this}endFunc(){return this._endBlockNode(N)}optimize(b=1){for(;b-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(b){return this._currNode.nodes.push(b),this}_blockNode(b){this._currNode.nodes.push(b),this._nodes.push(b)}_endBlockNode(b,T){const j=this._currNode;if(j instanceof b||T&&j instanceof T)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${T?`${b.kind}/${T.kind}`:b.kind}"`)}_elseNode(b){const T=this._currNode;if(!(T instanceof p))throw new Error('CodeGen: "else" without "if"');return this._currNode=T.else=b,this}get _root(){return this._nodes[0]}get _currNode(){const b=this._nodes;return b[b.length-1]}set _currNode(b){const T=this._nodes;T[T.length-1]=b}}t.CodeGen=B;function Y(z,b){for(const T in b)z[T]=(z[T]||0)+(b[T]||0);return z}function ie(z,b){return b instanceof e._CodeOrName?Y(z,b.names):z}function se(z,b,T){if(z instanceof e.Name)return j(z);if(!O(z))return z;return new e._Code(z._items.reduce((F,W)=>(W instanceof e.Name&&(W=j(W)),W instanceof e._Code?F.push(...W._items):F.push(W),F),[]));function j(F){const W=T[F.str];return W===void 0||b[F.str]!==1?F:(delete b[F.str],W)}function O(F){return F instanceof e._Code&&F._items.some(W=>W instanceof e.Name&&b[W.str]===1&&T[W.str]!==void 0)}}function ae(z,b){for(const T in b)z[T]=(z[T]||0)-(b[T]||0)}function ve(z){return typeof z=="boolean"||typeof z=="number"||z===null?!z:(0,e._)`!${V(z)}`}t.not=ve;const $e=I(t.operators.AND);function ee(...z){return z.reduce($e)}t.and=ee;const ue=I(t.operators.OR);function L(...z){return z.reduce(ue)}t.or=L;function I(z){return(b,T)=>b===e.nil?T:T===e.nil?b:(0,e._)`${V(b)} ${z} ${V(T)}`}function V(z){return z instanceof e.Name?z:(0,e._)`(${z})`}})(nt);var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.checkStrictMode=Pe.getErrorPath=Pe.Type=Pe.useFunc=Pe.setEvaluated=Pe.evaluatedPropsToName=Pe.mergeEvaluated=Pe.eachItem=Pe.unescapeJsonPointer=Pe.escapeJsonPointer=Pe.escapeFragment=Pe.unescapeFragment=Pe.schemaRefOrVal=Pe.schemaHasRulesButRef=Pe.schemaHasRules=Pe.checkUnknownRules=Pe.alwaysValidSchema=Pe.toHash=void 0;const Mt=nt,KQ=Rh;function QQ(t){const e={};for(const n of t)e[n]=!0;return e}Pe.toHash=QQ;function YQ(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(VR(t,e),!GR(e,t.self.RULES.all))}Pe.alwaysValidSchema=YQ;function VR(t,e=t.schema){const{opts:n,self:r}=t;if(!n.strictSchema||typeof e=="boolean")return;const s=r.RULES.keywords;for(const i in e)s[i]||BR(t,`unknown keyword: "${i}"`)}Pe.checkUnknownRules=VR;function GR(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(e[n])return!0;return!1}Pe.schemaHasRules=GR;function XQ(t,e){if(typeof t=="boolean")return!t;for(const n in t)if(n!=="$ref"&&e.all[n])return!0;return!1}Pe.schemaHasRulesButRef=XQ;function JQ({topSchemaRef:t,schemaPath:e},n,r,s){if(!s){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Mt._)`${n}`}return(0,Mt._)`${t}${e}${(0,Mt.getProperty)(r)}`}Pe.schemaRefOrVal=JQ;function eY(t){return HR(decodeURIComponent(t))}Pe.unescapeFragment=eY;function tY(t){return encodeURIComponent(Kk(t))}Pe.escapeFragment=tY;function Kk(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Pe.escapeJsonPointer=Kk;function HR(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Pe.unescapeJsonPointer=HR;function nY(t,e){if(Array.isArray(t))for(const n of t)e(n);else e(t)}Pe.eachItem=nY;function M6({mergeNames:t,mergeToName:e,mergeValues:n,resultToName:r}){return(s,i,o,a)=>{const c=o===void 0?i:o instanceof Mt.Name?(i instanceof Mt.Name?t(s,i,o):e(s,i,o),o):i instanceof Mt.Name?(e(s,o,i),i):n(i,o);return a===Mt.Name&&!(c instanceof Mt.Name)?r(s,c):c}}Pe.mergeEvaluated={props:M6({mergeNames:(t,e,n)=>t.if((0,Mt._)`${n} !== true && ${e} !== undefined`,()=>{t.if((0,Mt._)`${e} === true`,()=>t.assign(n,!0),()=>t.assign(n,(0,Mt._)`${n} || {}`).code((0,Mt._)`Object.assign(${n}, ${e})`))}),mergeToName:(t,e,n)=>t.if((0,Mt._)`${n} !== true`,()=>{e===!0?t.assign(n,!0):(t.assign(n,(0,Mt._)`${n} || {}`),Qk(t,n,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:qR}),items:M6({mergeNames:(t,e,n)=>t.if((0,Mt._)`${n} !== true && ${e} !== undefined`,()=>t.assign(n,(0,Mt._)`${e} === true ? true : ${n} > ${e} ? ${n} : ${e}`)),mergeToName:(t,e,n)=>t.if((0,Mt._)`${n} !== true`,()=>t.assign(n,e===!0?!0:(0,Mt._)`${n} > ${e} ? ${n} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function qR(t,e){if(e===!0)return t.var("props",!0);const n=t.var("props",(0,Mt._)`{}`);return e!==void 0&&Qk(t,n,e),n}Pe.evaluatedPropsToName=qR;function Qk(t,e,n){Object.keys(n).forEach(r=>t.assign((0,Mt._)`${e}${(0,Mt.getProperty)(r)}`,!0))}Pe.setEvaluated=Qk;const z6={};function rY(t,e){return t.scopeValue("func",{ref:e,code:z6[e.code]||(z6[e.code]=new KQ._Code(e.code))})}Pe.useFunc=rY;var B2;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(B2||(Pe.Type=B2={}));function sY(t,e,n){if(t instanceof Mt.Name){const r=e===B2.Num;return n?r?(0,Mt._)`"[" + ${t} + "]"`:(0,Mt._)`"['" + ${t} + "']"`:r?(0,Mt._)`"/" + ${t}`:(0,Mt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Mt.getProperty)(t).toString():"/"+Kk(t)}Pe.getErrorPath=sY;function BR(t,e,n=t.opts.strictSchema){if(n){if(e=`strict mode: ${e}`,n===!0)throw new Error(e);t.self.logger.warn(e)}}Pe.checkStrictMode=BR;var so={};Object.defineProperty(so,"__esModule",{value:!0});const Sr=nt,iY={data:new Sr.Name("data"),valCxt:new Sr.Name("valCxt"),instancePath:new Sr.Name("instancePath"),parentData:new Sr.Name("parentData"),parentDataProperty:new Sr.Name("parentDataProperty"),rootData:new Sr.Name("rootData"),dynamicAnchors:new Sr.Name("dynamicAnchors"),vErrors:new Sr.Name("vErrors"),errors:new Sr.Name("errors"),this:new Sr.Name("this"),self:new Sr.Name("self"),scope:new Sr.Name("scope"),json:new Sr.Name("json"),jsonPos:new Sr.Name("jsonPos"),jsonLen:new Sr.Name("jsonLen"),jsonPart:new Sr.Name("jsonPart")};so.default=iY;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=nt,n=Pe,r=so;t.keywordError={message:({keyword:k})=>(0,e.str)`must pass "${k}" keyword validation`},t.keyword$DataError={message:({keyword:k,schemaType:p})=>p?(0,e.str)`"${k}" keyword must be ${p} ($data)`:(0,e.str)`"${k}" keyword is invalid ($data)`};function s(k,p=t.keywordError,w,g){const{it:C}=k,{gen:$,compositeRule:N,allErrors:M}=C,A=m(k,p,w);g??(N||M)?c($,A):d(C,(0,e._)`[${A}]`)}t.reportError=s;function i(k,p=t.keywordError,w){const{it:g}=k,{gen:C,compositeRule:$,allErrors:N}=g,M=m(k,p,w);c(C,M),$||N||d(g,r.default.vErrors)}t.reportExtraError=i;function o(k,p){k.assign(r.default.errors,p),k.if((0,e._)`${r.default.vErrors} !== null`,()=>k.if(p,()=>k.assign((0,e._)`${r.default.vErrors}.length`,p),()=>k.assign(r.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:k,keyword:p,schemaValue:w,data:g,errsCount:C,it:$}){if(C===void 0)throw new Error("ajv implementation error");const N=k.name("err");k.forRange("i",C,r.default.errors,M=>{k.const(N,(0,e._)`${r.default.vErrors}[${M}]`),k.if((0,e._)`${N}.instancePath === undefined`,()=>k.assign((0,e._)`${N}.instancePath`,(0,e.strConcat)(r.default.instancePath,$.errorPath))),k.assign((0,e._)`${N}.schemaPath`,(0,e.str)`${$.errSchemaPath}/${p}`),$.opts.verbose&&(k.assign((0,e._)`${N}.schema`,w),k.assign((0,e._)`${N}.data`,g))})}t.extendErrors=a;function c(k,p){const w=k.const("err",p);k.if((0,e._)`${r.default.vErrors} === null`,()=>k.assign(r.default.vErrors,(0,e._)`[${w}]`),(0,e._)`${r.default.vErrors}.push(${w})`),k.code((0,e._)`${r.default.errors}++`)}function d(k,p){const{gen:w,validateName:g,schemaEnv:C}=k;C.$async?w.throw((0,e._)`new ${k.ValidationError}(${p})`):(w.assign((0,e._)`${g}.errors`,p),w.return(!1))}const f={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function m(k,p,w){const{createErrors:g}=k.it;return g===!1?(0,e._)`{}`:y(k,p,w)}function y(k,p,w={}){const{gen:g,it:C}=k,$=[v(C,w),_(k,w)];return E(k,p,$),g.object(...$)}function v({errorPath:k},{instancePath:p}){const w=p?(0,e.str)`${k}${(0,n.getErrorPath)(p,n.Type.Str)}`:k;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,w)]}function _({keyword:k,it:{errSchemaPath:p}},{schemaPath:w,parentSchema:g}){let C=g?p:(0,e.str)`${p}/${k}`;return w&&(C=(0,e.str)`${C}${(0,n.getErrorPath)(w,n.Type.Str)}`),[f.schemaPath,C]}function E(k,{params:p,message:w},g){const{keyword:C,data:$,schemaValue:N,it:M}=k,{opts:A,propertyName:q,topSchemaRef:G,schemaPath:B}=M;g.push([f.keyword,C],[f.params,typeof p=="function"?p(k):p||(0,e._)`{}`]),A.messages&&g.push([f.message,typeof w=="function"?w(k):w]),A.verbose&&g.push([f.schema,N],[f.parentSchema,(0,e._)`${G}${B}`],[r.default.data,$]),q&&g.push([f.propertyName,q])}})(sp);Object.defineProperty(id,"__esModule",{value:!0});id.boolOrEmptySchema=id.topBoolOrEmptySchema=void 0;const oY=sp,aY=nt,lY=so,uY={message:"boolean schema is false"};function cY(t){const{gen:e,schema:n,validateName:r}=t;n===!1?WR(t,!1):typeof n=="object"&&n.$async===!0?e.return(lY.default.data):(e.assign((0,aY._)`${r}.errors`,null),e.return(!0))}id.topBoolOrEmptySchema=cY;function dY(t,e){const{gen:n,schema:r}=t;r===!1?(n.var(e,!1),WR(t)):n.var(e,!0)}id.boolOrEmptySchema=dY;function WR(t,e){const{gen:n,data:r}=t,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,oY.reportError)(s,uY,void 0,e)}var Fn={},au={};Object.defineProperty(au,"__esModule",{value:!0});au.getRules=au.isJSONType=void 0;const fY=["string","number","integer","boolean","null","object","array"],hY=new Set(fY);function pY(t){return typeof t=="string"&&hY.has(t)}au.isJSONType=pY;function mY(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}au.getRules=mY;var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.shouldUseRule=Ro.shouldUseGroup=Ro.schemaHasRulesForType=void 0;function gY({schema:t,self:e},n){const r=e.RULES.types[n];return r&&r!==!0&&ZR(t,r)}Ro.schemaHasRulesForType=gY;function ZR(t,e){return e.rules.some(n=>KR(t,n))}Ro.shouldUseGroup=ZR;function KR(t,e){var n;return t[e.keyword]!==void 0||((n=e.definition.implements)===null||n===void 0?void 0:n.some(r=>t[r]!==void 0))}Ro.shouldUseRule=KR;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.reportTypeError=Fn.checkDataTypes=Fn.checkDataType=Fn.coerceAndCheckDataType=Fn.getJSONTypes=Fn.getSchemaTypes=Fn.DataType=void 0;const yY=au,vY=Ro,_Y=sp,Ye=nt,QR=Pe;var xc;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(xc||(Fn.DataType=xc={}));function wY(t){const e=YR(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Fn.getSchemaTypes=wY;function YR(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(yY.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Fn.getJSONTypes=YR;function SY(t,e){const{gen:n,data:r,opts:s}=t,i=kY(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,vY.schemaHasRulesForType)(t,e[0]));if(o){const a=Yk(e,r,s.strictNumbers,xc.Wrong);n.if(a,()=>{i.length?bY(t,e,i):Xk(t)})}return o}Fn.coerceAndCheckDataType=SY;const XR=new Set(["string","number","integer","boolean","null"]);function kY(t,e){return e?t.filter(n=>XR.has(n)||e==="array"&&n==="array"):[]}function bY(t,e,n){const{gen:r,data:s,opts:i}=t,o=r.let("dataType",(0,Ye._)`typeof ${s}`),a=r.let("coerced",(0,Ye._)`undefined`);i.coerceTypes==="array"&&r.if((0,Ye._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,(0,Ye._)`${s}[0]`).assign(o,(0,Ye._)`typeof ${s}`).if(Yk(e,s,i.strictNumbers),()=>r.assign(a,s))),r.if((0,Ye._)`${a} !== undefined`);for(const d of n)(XR.has(d)||d==="array"&&i.coerceTypes==="array")&&c(d);r.else(),Xk(t),r.endIf(),r.if((0,Ye._)`${a} !== undefined`,()=>{r.assign(s,a),EY(t,a)});function c(d){switch(d){case"string":r.elseIf((0,Ye._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Ye._)`"" + ${s}`).elseIf((0,Ye._)`${s} === null`).assign(a,(0,Ye._)`""`);return;case"number":r.elseIf((0,Ye._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Ye._)`+${s}`);return;case"integer":r.elseIf((0,Ye._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Ye._)`+${s}`);return;case"boolean":r.elseIf((0,Ye._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Ye._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Ye._)`${s} === "" || ${s} === 0 || ${s} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Ye._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Ye._)`[${s}]`)}}}function EY({gen:t,parentData:e,parentDataProperty:n},r){t.if((0,Ye._)`${e} !== undefined`,()=>t.assign((0,Ye._)`${e}[${n}]`,r))}function W2(t,e,n,r=xc.Correct){const s=r===xc.Correct?Ye.operators.EQ:Ye.operators.NEQ;let i;switch(t){case"null":return(0,Ye._)`${e} ${s} null`;case"array":i=(0,Ye._)`Array.isArray(${e})`;break;case"object":i=(0,Ye._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,Ye._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,Ye._)`typeof ${e} ${s} ${t}`}return r===xc.Correct?i:(0,Ye.not)(i);function o(a=Ye.nil){return(0,Ye.and)((0,Ye._)`typeof ${e} == "number"`,a,n?(0,Ye._)`isFinite(${e})`:Ye.nil)}}Fn.checkDataType=W2;function Yk(t,e,n,r){if(t.length===1)return W2(t[0],e,n,r);let s;const i=(0,QR.toHash)(t);if(i.array&&i.object){const o=(0,Ye._)`typeof ${e} != "object"`;s=i.null?o:(0,Ye._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Ye.nil;i.number&&delete i.integer;for(const o in i)s=(0,Ye.and)(s,W2(o,e,n,r));return s}Fn.checkDataTypes=Yk;const CY={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Ye._)`{type: ${t}}`:(0,Ye._)`{type: ${e}}`};function Xk(t){const e=PY(t);(0,_Y.reportError)(e,CY)}Fn.reportTypeError=Xk;function PY(t){const{gen:e,data:n,schema:r}=t,s=(0,QR.schemaRefOrVal)(t,r,"type");return{gen:e,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:t}}var Ay={};Object.defineProperty(Ay,"__esModule",{value:!0});Ay.assignDefaults=void 0;const Vu=nt,$Y=Pe;function TY(t,e){const{properties:n,items:r}=t.schema;if(e==="object"&&n)for(const s in n)D6(t,s,n[s].default);else e==="array"&&Array.isArray(r)&&r.forEach((s,i)=>D6(t,i,s.default))}Ay.assignDefaults=TY;function D6(t,e,n){const{gen:r,compositeRule:s,data:i,opts:o}=t;if(n===void 0)return;const a=(0,Vu._)`${i}${(0,Vu.getProperty)(e)}`;if(s){(0,$Y.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Vu._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Vu._)`${c} || ${a} === null || ${a} === ""`),r.if(c,(0,Vu._)`${a} = ${(0,Vu.stringify)(n)}`)}var Xi={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.validateUnion=ot.validateArray=ot.usePattern=ot.callValidateCode=ot.schemaProperties=ot.allSchemaProperties=ot.noPropertyInData=ot.propertyInData=ot.isOwnProperty=ot.hasPropFunc=ot.reportMissingProp=ot.checkMissingProp=ot.checkReportMissingProp=void 0;const Wt=nt,Jk=Pe,oa=so,xY=Pe;function NY(t,e){const{gen:n,data:r,it:s}=t;n.if(t3(n,r,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Wt._)`${e}`},!0),t.error()})}ot.checkReportMissingProp=NY;function RY({gen:t,data:e,it:{opts:n}},r,s){return(0,Wt.or)(...r.map(i=>(0,Wt.and)(t3(t,e,i,n.ownProperties),(0,Wt._)`${s} = ${i}`)))}ot.checkMissingProp=RY;function OY(t,e){t.setParams({missingProperty:e},!0),t.error()}ot.reportMissingProp=OY;function JR(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Wt._)`Object.prototype.hasOwnProperty`})}ot.hasPropFunc=JR;function e3(t,e,n){return(0,Wt._)`${JR(t)}.call(${e}, ${n})`}ot.isOwnProperty=e3;function IY(t,e,n,r){const s=(0,Wt._)`${e}${(0,Wt.getProperty)(n)} !== undefined`;return r?(0,Wt._)`${s} && ${e3(t,e,n)}`:s}ot.propertyInData=IY;function t3(t,e,n,r){const s=(0,Wt._)`${e}${(0,Wt.getProperty)(n)} === undefined`;return r?(0,Wt.or)(s,(0,Wt.not)(e3(t,e,n))):s}ot.noPropertyInData=t3;function e7(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}ot.allSchemaProperties=e7;function AY(t,e){return e7(e).filter(n=>!(0,Jk.alwaysValidSchema)(t,e[n]))}ot.schemaProperties=AY;function jY({schemaCode:t,data:e,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:i},it:o},a,c,d){const f=d?(0,Wt._)`${t}, ${e}, ${r}${s}`:e,m=[[oa.default.instancePath,(0,Wt.strConcat)(oa.default.instancePath,i)],[oa.default.parentData,o.parentData],[oa.default.parentDataProperty,o.parentDataProperty],[oa.default.rootData,oa.default.rootData]];o.opts.dynamicRef&&m.push([oa.default.dynamicAnchors,oa.default.dynamicAnchors]);const y=(0,Wt._)`${f}, ${n.object(...m)}`;return c!==Wt.nil?(0,Wt._)`${a}.call(${c}, ${y})`:(0,Wt._)`${a}(${y})`}ot.callValidateCode=jY;const MY=(0,Wt._)`new RegExp`;function zY({gen:t,it:{opts:e}},n){const r=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(n,r);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Wt._)`${s.code==="new RegExp"?MY:(0,xY.useFunc)(t,s)}(${n}, ${r})`})}ot.usePattern=zY;function DY(t){const{gen:e,data:n,keyword:r,it:s}=t,i=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){const c=e.const("len",(0,Wt._)`${n}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:r,dataProp:d,dataPropType:Jk.Type.Num},i),e.if((0,Wt.not)(i),a)})}}ot.validateArray=DY;function FY(t){const{gen:e,schema:n,keyword:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(c=>(0,Jk.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>n.forEach((c,d)=>{const f=t.subschema({keyword:r,schemaProp:d,compositeRule:!0},a);e.assign(o,(0,Wt._)`${o} || ${a}`),t.mergeValidEvaluated(f,a)||e.if((0,Wt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}ot.validateUnion=FY;Object.defineProperty(Xi,"__esModule",{value:!0});Xi.validateKeywordUsage=Xi.validSchemaType=Xi.funcKeywordCode=Xi.macroKeywordCode=void 0;const Ir=nt,$l=so,LY=ot,UY=sp;function VY(t,e){const{gen:n,keyword:r,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),c=t7(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const d=n.name("valid");t.subschema({schema:a,schemaPath:Ir.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}Xi.macroKeywordCode=VY;function GY(t,e){var n;const{gen:r,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=t;qY(c,e);const d=!a&&e.compile?e.compile.call(c.self,i,o,c):e.validate,f=t7(r,s,d),m=r.let("valid");t.block$data(m,y),t.ok((n=e.valid)!==null&&n!==void 0?n:m);function y(){if(e.errors===!1)E(),e.modifying&&F6(t),k(()=>t.error());else{const p=e.async?v():_();e.modifying&&F6(t),k(()=>HY(t,p))}}function v(){const p=r.let("ruleErrs",null);return r.try(()=>E((0,Ir._)`await `),w=>r.assign(m,!1).if((0,Ir._)`${w} instanceof ${c.ValidationError}`,()=>r.assign(p,(0,Ir._)`${w}.errors`),()=>r.throw(w))),p}function _(){const p=(0,Ir._)`${f}.errors`;return r.assign(p,null),E(Ir.nil),p}function E(p=e.async?(0,Ir._)`await `:Ir.nil){const w=c.opts.passContext?$l.default.this:$l.default.self,g=!("compile"in e&&!a||e.schema===!1);r.assign(m,(0,Ir._)`${p}${(0,LY.callValidateCode)(t,f,w,g)}`,e.modifying)}function k(p){var w;r.if((0,Ir.not)((w=e.valid)!==null&&w!==void 0?w:m),p)}}Xi.funcKeywordCode=GY;function F6(t){const{gen:e,data:n,it:r}=t;e.if(r.parentData,()=>e.assign(n,(0,Ir._)`${r.parentData}[${r.parentDataProperty}]`))}function HY(t,e){const{gen:n}=t;n.if((0,Ir._)`Array.isArray(${e})`,()=>{n.assign($l.default.vErrors,(0,Ir._)`${$l.default.vErrors} === null ? ${e} : ${$l.default.vErrors}.concat(${e})`).assign($l.default.errors,(0,Ir._)`${$l.default.vErrors}.length`),(0,UY.extendErrors)(t)},()=>t.error())}function qY({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function t7(t,e,n){if(n===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ir.stringify)(n)})}function BY(t,e,n=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(t):r==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==r||n&&typeof t>"u")}Xi.validSchemaType=BY;function WY({schema:t,opts:e,self:n,errSchemaPath:r},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const o=s.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){const c=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")n.logger.error(c);else throw new Error(c)}}Xi.validateKeywordUsage=WY;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.extendSubschemaMode=Ua.extendSubschemaData=Ua.getSubschema=void 0;const Zi=nt,n7=Pe;function ZY(t,{keyword:e,schemaProp:n,schema:r,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return n===void 0?{schema:a,schemaPath:(0,Zi._)`${t.schemaPath}${(0,Zi.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[n],schemaPath:(0,Zi._)`${t.schemaPath}${(0,Zi.getProperty)(e)}${(0,Zi.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,n7.escapeFragment)(n)}`}}if(r!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Ua.getSubschema=ZY;function KY(t,e,{dataProp:n,dataPropType:r,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(n!==void 0){const{errorPath:d,dataPathArr:f,opts:m}=e,y=a.let("data",(0,Zi._)`${e.data}${(0,Zi.getProperty)(n)}`,!0);c(y),t.errorPath=(0,Zi.str)`${d}${(0,n7.getErrorPath)(n,r,m.jsPropertySyntax)}`,t.parentDataProperty=(0,Zi._)`${n}`,t.dataPathArr=[...f,t.parentDataProperty]}if(s!==void 0){const d=s instanceof Zi.Name?s:a.let("data",s,!0);c(d),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Ua.extendSubschemaData=KY;function QY(t,{jtdDiscriminator:e,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:i}){r!==void 0&&(t.compositeRule=r),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=n}Ua.extendSubschemaMode=QY;var ar={},r7={exports:{}},Na=r7.exports=function(t,e,n){typeof e=="function"&&(n=e,e={}),n=e.cb||n;var r=typeof n=="function"?n:n.pre||function(){},s=n.post||function(){};wg(e,r,s,t,"",t)};Na.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Na.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Na.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Na.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function wg(t,e,n,r,s,i,o,a,c,d){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,s,i,o,a,c,d);for(var f in r){var m=r[f];if(Array.isArray(m)){if(f in Na.arrayKeywords)for(var y=0;y<m.length;y++)wg(t,e,n,m[y],s+"/"+f+"/"+y,i,s,f,r,y)}else if(f in Na.propsKeywords){if(m&&typeof m=="object")for(var v in m)wg(t,e,n,m[v],s+"/"+f+"/"+YY(v),i,s,f,r,v)}else(f in Na.keywords||t.allKeys&&!(f in Na.skipKeywords))&&wg(t,e,n,m,s+"/"+f,i,s,f,r)}n(r,s,i,o,a,c,d)}}function YY(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var XY=r7.exports;Object.defineProperty(ar,"__esModule",{value:!0});ar.getSchemaRefs=ar.resolveUrl=ar.normalizeId=ar._getFullPath=ar.getFullPath=ar.inlineRef=void 0;const JY=Pe,eX=Ty,tX=XY,nX=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function rX(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Z2(t):e?s7(t)<=e:!1}ar.inlineRef=rX;const sX=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Z2(t){for(const e in t){if(sX.has(e))return!0;const n=t[e];if(Array.isArray(n)&&n.some(Z2)||typeof n=="object"&&Z2(n))return!0}return!1}function s7(t){let e=0;for(const n in t){if(n==="$ref")return 1/0;if(e++,!nX.has(n)&&(typeof t[n]=="object"&&(0,JY.eachItem)(t[n],r=>e+=s7(r)),e===1/0))return 1/0}return e}function i7(t,e="",n){n!==!1&&(e=Nc(e));const r=t.parse(e);return o7(t,r)}ar.getFullPath=i7;function o7(t,e){return t.serialize(e).split("#")[0]+"#"}ar._getFullPath=o7;const iX=/#\/?$/;function Nc(t){return t?t.replace(iX,""):""}ar.normalizeId=Nc;function oX(t,e,n){return n=Nc(n),t.resolve(e,n)}ar.resolveUrl=oX;const aX=/^[a-z_][-a-z0-9._]*$/i;function lX(t,e){if(typeof t=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,s=Nc(t[n]||e),i={"":s},o=i7(r,s,!1),a={},c=new Set;return tX(t,{allKeys:!0},(m,y,v,_)=>{if(_===void 0)return;const E=o+y;let k=i[_];typeof m[n]=="string"&&(k=p.call(this,m[n])),w.call(this,m.$anchor),w.call(this,m.$dynamicAnchor),i[y]=k;function p(g){const C=this.opts.uriResolver.resolve;if(g=Nc(k?C(k,g):g),c.has(g))throw f(g);c.add(g);let $=this.refs[g];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(m,$.schema,g):g!==Nc(E)&&(g[0]==="#"?(d(m,a[g],g),a[g]=m):this.refs[g]=E),g}function w(g){if(typeof g=="string"){if(!aX.test(g))throw new Error(`invalid anchor "${g}"`);p.call(this,`#${g}`)}}}),a;function d(m,y,v){if(y!==void 0&&!eX(m,y))throw f(v)}function f(m){return new Error(`reference "${m}" resolves to more than one schema`)}}ar.getSchemaRefs=lX;Object.defineProperty(Pi,"__esModule",{value:!0});Pi.getData=Pi.KeywordCxt=Pi.validateFunctionCode=void 0;const a7=id,L6=Fn,n3=Ro,C0=Fn,uX=Ay,Xf=Xi,O1=Ua,Me=nt,He=so,cX=ar,Oo=Pe,uf=sp;function dX(t){if(c7(t)&&(d7(t),u7(t))){pX(t);return}l7(t,()=>(0,a7.topBoolOrEmptySchema)(t))}Pi.validateFunctionCode=dX;function l7({gen:t,validateName:e,schema:n,schemaEnv:r,opts:s},i){s.code.es5?t.func(e,(0,Me._)`${He.default.data}, ${He.default.valCxt}`,r.$async,()=>{t.code((0,Me._)`"use strict"; ${U6(n,s)}`),hX(t,s),t.code(i)}):t.func(e,(0,Me._)`${He.default.data}, ${fX(s)}`,r.$async,()=>t.code(U6(n,s)).code(i))}function fX(t){return(0,Me._)`{${He.default.instancePath}="", ${He.default.parentData}, ${He.default.parentDataProperty}, ${He.default.rootData}=${He.default.data}${t.dynamicRef?(0,Me._)`, ${He.default.dynamicAnchors}={}`:Me.nil}}={}`}function hX(t,e){t.if(He.default.valCxt,()=>{t.var(He.default.instancePath,(0,Me._)`${He.default.valCxt}.${He.default.instancePath}`),t.var(He.default.parentData,(0,Me._)`${He.default.valCxt}.${He.default.parentData}`),t.var(He.default.parentDataProperty,(0,Me._)`${He.default.valCxt}.${He.default.parentDataProperty}`),t.var(He.default.rootData,(0,Me._)`${He.default.valCxt}.${He.default.rootData}`),e.dynamicRef&&t.var(He.default.dynamicAnchors,(0,Me._)`${He.default.valCxt}.${He.default.dynamicAnchors}`)},()=>{t.var(He.default.instancePath,(0,Me._)`""`),t.var(He.default.parentData,(0,Me._)`undefined`),t.var(He.default.parentDataProperty,(0,Me._)`undefined`),t.var(He.default.rootData,He.default.data),e.dynamicRef&&t.var(He.default.dynamicAnchors,(0,Me._)`{}`)})}function pX(t){const{schema:e,opts:n,gen:r}=t;l7(t,()=>{n.$comment&&e.$comment&&h7(t),_X(t),r.let(He.default.vErrors,null),r.let(He.default.errors,0),n.unevaluated&&mX(t),f7(t),kX(t)})}function mX(t){const{gen:e,validateName:n}=t;t.evaluated=e.const("evaluated",(0,Me._)`${n}.evaluated`),e.if((0,Me._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Me._)`${t.evaluated}.props`,(0,Me._)`undefined`)),e.if((0,Me._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Me._)`${t.evaluated}.items`,(0,Me._)`undefined`))}function U6(t,e){const n=typeof t=="object"&&t[e.schemaId];return n&&(e.code.source||e.code.process)?(0,Me._)`/*# sourceURL=${n} */`:Me.nil}function gX(t,e){if(c7(t)&&(d7(t),u7(t))){yX(t,e);return}(0,a7.boolOrEmptySchema)(t,e)}function u7({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const n in t)if(e.RULES.all[n])return!0;return!1}function c7(t){return typeof t.schema!="boolean"}function yX(t,e){const{schema:n,gen:r,opts:s}=t;s.$comment&&n.$comment&&h7(t),wX(t),SX(t);const i=r.const("_errs",He.default.errors);f7(t,i),r.var(e,(0,Me._)`${i} === ${He.default.errors}`)}function d7(t){(0,Oo.checkUnknownRules)(t),vX(t)}function f7(t,e){if(t.opts.jtd)return V6(t,[],!1,e);const n=(0,L6.getSchemaTypes)(t.schema),r=(0,L6.coerceAndCheckDataType)(t,n);V6(t,n,!r,e)}function vX(t){const{schema:e,errSchemaPath:n,opts:r,self:s}=t;e.$ref&&r.ignoreKeywordsWithRef&&(0,Oo.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function _X(t){const{schema:e,opts:n}=t;e.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Oo.checkStrictMode)(t,"default is ignored in the schema root")}function wX(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,cX.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function SX(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function h7({gen:t,schemaEnv:e,schema:n,errSchemaPath:r,opts:s}){const i=n.$comment;if(s.$comment===!0)t.code((0,Me._)`${He.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const o=(0,Me.str)`${r}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Me._)`${He.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function kX(t){const{gen:e,schemaEnv:n,validateName:r,ValidationError:s,opts:i}=t;n.$async?e.if((0,Me._)`${He.default.errors} === 0`,()=>e.return(He.default.data),()=>e.throw((0,Me._)`new ${s}(${He.default.vErrors})`)):(e.assign((0,Me._)`${r}.errors`,He.default.vErrors),i.unevaluated&&bX(t),e.return((0,Me._)`${He.default.errors} === 0`))}function bX({gen:t,evaluated:e,props:n,items:r}){n instanceof Me.Name&&t.assign((0,Me._)`${e}.props`,n),r instanceof Me.Name&&t.assign((0,Me._)`${e}.items`,r)}function V6(t,e,n,r){const{gen:s,schema:i,data:o,allErrors:a,opts:c,self:d}=t,{RULES:f}=d;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,Oo.schemaHasRulesButRef)(i,f))){s.block(()=>g7(t,"$ref",f.all.$ref.definition));return}c.jtd||EX(t,e),s.block(()=>{for(const y of f.rules)m(y);m(f.post)});function m(y){(0,n3.shouldUseGroup)(i,y)&&(y.type?(s.if((0,C0.checkDataType)(y.type,o,c.strictNumbers)),G6(t,y),e.length===1&&e[0]===y.type&&n&&(s.else(),(0,C0.reportTypeError)(t)),s.endIf()):G6(t,y),a||s.if((0,Me._)`${He.default.errors} === ${r||0}`))}}function G6(t,e){const{gen:n,schema:r,opts:{useDefaults:s}}=t;s&&(0,uX.assignDefaults)(t,e.type),n.block(()=>{for(const i of e.rules)(0,n3.shouldUseRule)(r,i)&&g7(t,i.keyword,i.definition,e.type)})}function EX(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(CX(t,e),t.opts.allowUnionTypes||PX(t,e),$X(t,t.dataTypes))}function CX(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(n=>{p7(t.dataTypes,n)||r3(t,`type "${n}" not allowed by context "${t.dataTypes.join(",")}"`)}),xX(t,e)}}function PX(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&r3(t,"use allowUnionTypes to allow union type keyword")}function $X(t,e){const n=t.self.RULES.all;for(const r in n){const s=n[r];if(typeof s=="object"&&(0,n3.shouldUseRule)(t.schema,s)){const{type:i}=s.definition;i.length&&!i.some(o=>TX(e,o))&&r3(t,`missing type "${i.join(",")}" for keyword "${r}"`)}}}function TX(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function p7(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function xX(t,e){const n=[];for(const r of t.dataTypes)p7(e,r)?n.push(r):e.includes("integer")&&r==="number"&&n.push("integer");t.dataTypes=n}function r3(t,e){const n=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${n}" (strictTypes)`,(0,Oo.checkStrictMode)(t,e,t.opts.strictTypes)}class m7{constructor(e,n,r){if((0,Xf.validateKeywordUsage)(e,n,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=n.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Oo.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=n,this.$data)this.schemaCode=e.gen.const("vSchema",y7(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Xf.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=e.gen.const("_errs",He.default.errors))}result(e,n,r){this.failResult((0,Me.not)(e),n,r)}failResult(e,n,r){this.gen.if(e),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,n){this.failResult((0,Me.not)(e),void 0,n)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:n}=this;this.fail((0,Me._)`${n} !== undefined && (${(0,Me.or)(this.invalid$data(),e)})`)}error(e,n,r){if(n){this.setParams(n),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,n){(e?uf.reportExtraError:uf.reportError)(this,this.def.error,n)}$dataError(){(0,uf.reportError)(this,this.def.$dataError||uf.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,uf.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,n){n?Object.assign(this.params,e):this.params=e}block$data(e,n,r=Me.nil){this.gen.block(()=>{this.check$data(e,r),n()})}check$data(e=Me.nil,n=Me.nil){if(!this.$data)return;const{gen:r,schemaCode:s,schemaType:i,def:o}=this;r.if((0,Me.or)((0,Me._)`${s} === undefined`,n)),e!==Me.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==Me.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:n,schemaType:r,def:s,it:i}=this;return(0,Me.or)(o(),a());function o(){if(r.length){if(!(n instanceof Me.Name))throw new Error("ajv implementation error");const c=Array.isArray(r)?r:[r];return(0,Me._)`${(0,C0.checkDataTypes)(c,n,i.opts.strictNumbers,C0.DataType.Wrong)}`}return Me.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Me._)`!${c}(${n})`}return Me.nil}}subschema(e,n){const r=(0,O1.getSubschema)(this.it,e);(0,O1.extendSubschemaData)(r,this.it,e),(0,O1.extendSubschemaMode)(r,e);const s={...this.it,...r,items:void 0,props:void 0};return gX(s,n),s}mergeEvaluated(e,n){const{it:r,gen:s}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=Oo.mergeEvaluated.props(s,e.props,r.props,n)),r.items!==!0&&e.items!==void 0&&(r.items=Oo.mergeEvaluated.items(s,e.items,r.items,n)))}mergeValidEvaluated(e,n){const{it:r,gen:s}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return s.if(n,()=>this.mergeEvaluated(e,Me.Name)),!0}}Pi.KeywordCxt=m7;function g7(t,e,n,r){const s=new m7(t,n,e);"code"in n?n.code(s,r):s.$data&&n.validate?(0,Xf.funcKeywordCode)(s,n):"macro"in n?(0,Xf.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,Xf.funcKeywordCode)(s,n)}const NX=/^\/(?:[^~]|~0|~1)*$/,RX=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function y7(t,{dataLevel:e,dataNames:n,dataPathArr:r}){let s,i;if(t==="")return He.default.rootData;if(t[0]==="/"){if(!NX.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=He.default.rootData}else{const d=RX.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);const f=+d[1];if(s=d[2],s==="#"){if(f>=e)throw new Error(c("property/index",f));return r[e-f]}if(f>e)throw new Error(c("data",f));if(i=n[e-f],!s)return i}let o=i;const a=s.split("/");for(const d of a)d&&(i=(0,Me._)`${i}${(0,Me.getProperty)((0,Oo.unescapeJsonPointer)(d))}`,o=(0,Me._)`${o} && ${i}`);return o;function c(d,f){return`Cannot access ${d} ${f} levels up, current level is ${e}`}}Pi.getData=y7;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});class OX extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}ip.default=OX;var Sd={};Object.defineProperty(Sd,"__esModule",{value:!0});const I1=ar;class IX extends Error{constructor(e,n,r,s){super(s||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,I1.resolveUrl)(e,n,r),this.missingSchema=(0,I1.normalizeId)((0,I1.getFullPath)(e,this.missingRef))}}Sd.default=IX;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.resolveSchema=es.getCompilingSchema=es.resolveRef=es.compileSchema=es.SchemaEnv=void 0;const li=nt,AX=ip,yl=so,ki=ar,H6=Pe,jX=Pi;class jy{constructor(e){var n;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(n=e.baseId)!==null&&n!==void 0?n:(0,ki.normalizeId)(r==null?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}es.SchemaEnv=jy;function s3(t){const e=v7.call(this,t);if(e)return e;const n=(0,ki.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:r,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new li.CodeGen(this.scope,{es5:r,lines:s,ownProperties:i});let a;t.$async&&(a=o.scopeValue("Error",{ref:AX.default,code:(0,li._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const d={gen:o,allErrors:this.opts.allErrors,data:yl.default.data,parentData:yl.default.parentData,parentDataProperty:yl.default.parentDataProperty,dataNames:[yl.default.data],dataPathArr:[li.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,li.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:n,baseId:t.baseId||n,schemaPath:li.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,li._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(t),(0,jX.validateFunctionCode)(d),o.optimize(this.opts.code.optimize);const m=o.toString();f=`${o.scopeRefs(yl.default.scope)}return ${m}`,this.opts.code.process&&(f=this.opts.code.process(f,t));const v=new Function(`${yl.default.self}`,`${yl.default.scope}`,f)(this,this.scope.get());if(this.scope.value(c,{ref:v}),v.errors=null,v.schema=t.schema,v.schemaEnv=t,t.$async&&(v.$async=!0),this.opts.code.source===!0&&(v.source={validateName:c,validateCode:m,scopeValues:o._values}),this.opts.unevaluated){const{props:_,items:E}=d;v.evaluated={props:_ instanceof li.Name?void 0:_,items:E instanceof li.Name?void 0:E,dynamicProps:_ instanceof li.Name,dynamicItems:E instanceof li.Name},v.source&&(v.source.evaluated=(0,li.stringify)(v.evaluated))}return t.validate=v,t}catch(m){throw delete t.validate,delete t.validateName,f&&this.logger.error("Error compiling schema, function code:",f),m}finally{this._compilations.delete(t)}}es.compileSchema=s3;function MX(t,e,n){var r;n=(0,ki.resolveUrl)(this.opts.uriResolver,e,n);const s=t.refs[n];if(s)return s;let i=FX.call(this,t,n);if(i===void 0){const o=(r=t.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new jy({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[n]=zX.call(this,i)}es.resolveRef=MX;function zX(t){return(0,ki.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:s3.call(this,t)}function v7(t){for(const e of this._compilations)if(DX(e,t))return e}es.getCompilingSchema=v7;function DX(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function FX(t,e){let n;for(;typeof(n=this.refs[e])=="string";)e=n;return n||this.schemas[e]||My.call(this,t,e)}function My(t,e){const n=this.opts.uriResolver.parse(e),r=(0,ki._getFullPath)(this.opts.uriResolver,n);let s=(0,ki.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&r===s)return A1.call(this,n,t);const i=(0,ki.normalizeId)(r),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){const a=My.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:A1.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||s3.call(this,o),i===(0,ki.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,d=a[c];return d&&(s=(0,ki.resolveUrl)(this.opts.uriResolver,s,d)),new jy({schema:a,schemaId:c,root:t,baseId:s})}return A1.call(this,n,o)}}es.resolveSchema=My;const LX=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function A1(t,{baseId:e,schema:n,root:r}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const c=n[(0,H6.unescapeFragment)(a)];if(c===void 0)return;n=c;const d=typeof n=="object"&&n[this.opts.schemaId];!LX.has(a)&&d&&(e=(0,ki.resolveUrl)(this.opts.uriResolver,e,d))}let i;if(typeof n!="boolean"&&n.$ref&&!(0,H6.schemaHasRulesButRef)(n,this.RULES)){const a=(0,ki.resolveUrl)(this.opts.uriResolver,e,n.$ref);i=My.call(this,r,a)}const{schemaId:o}=this.opts;if(i=i||new jy({schema:n,schemaId:o,root:r,baseId:e}),i.schema!==i.root.schema)return i}const UX="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",VX="Meta-schema for $data reference (JSON AnySchema extension proposal)",GX="object",HX=["$data"],qX={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},BX=!1,WX={$id:UX,description:VX,type:GX,required:HX,properties:qX,additionalProperties:BX};var i3={};Object.defineProperty(i3,"__esModule",{value:!0});const _7=xR;_7.code='require("ajv/dist/runtime/uri").default';i3.default=_7;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=Pi;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var n=nt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ip,s=Sd,i=au,o=es,a=nt,c=ar,d=Fn,f=Pe,m=WX,y=i3,v=(L,I)=>new RegExp(L,I);v.code="new RegExp";const _=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),k={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},p={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},w=200;function g(L){var I,V,z,b,T,j,O,F,W,le,ce,U,H,dt,Fe,Ie,Je,gt,vn,Vt,$t,Nn,Pn,fn,as;const Rn=L.strict,Ys=(I=L.code)===null||I===void 0?void 0:I.optimize,Ri=Ys===!0||Ys===void 0?1:Ys||0,bs=(z=(V=L.code)===null||V===void 0?void 0:V.regExp)!==null&&z!==void 0?z:v,Lr=(b=L.uriResolver)!==null&&b!==void 0?b:y.default;return{strictSchema:(j=(T=L.strictSchema)!==null&&T!==void 0?T:Rn)!==null&&j!==void 0?j:!0,strictNumbers:(F=(O=L.strictNumbers)!==null&&O!==void 0?O:Rn)!==null&&F!==void 0?F:!0,strictTypes:(le=(W=L.strictTypes)!==null&&W!==void 0?W:Rn)!==null&&le!==void 0?le:"log",strictTuples:(U=(ce=L.strictTuples)!==null&&ce!==void 0?ce:Rn)!==null&&U!==void 0?U:"log",strictRequired:(dt=(H=L.strictRequired)!==null&&H!==void 0?H:Rn)!==null&&dt!==void 0?dt:!1,code:L.code?{...L.code,optimize:Ri,regExp:bs}:{optimize:Ri,regExp:bs},loopRequired:(Fe=L.loopRequired)!==null&&Fe!==void 0?Fe:w,loopEnum:(Ie=L.loopEnum)!==null&&Ie!==void 0?Ie:w,meta:(Je=L.meta)!==null&&Je!==void 0?Je:!0,messages:(gt=L.messages)!==null&&gt!==void 0?gt:!0,inlineRefs:(vn=L.inlineRefs)!==null&&vn!==void 0?vn:!0,schemaId:(Vt=L.schemaId)!==null&&Vt!==void 0?Vt:"$id",addUsedSchema:($t=L.addUsedSchema)!==null&&$t!==void 0?$t:!0,validateSchema:(Nn=L.validateSchema)!==null&&Nn!==void 0?Nn:!0,validateFormats:(Pn=L.validateFormats)!==null&&Pn!==void 0?Pn:!0,unicodeRegExp:(fn=L.unicodeRegExp)!==null&&fn!==void 0?fn:!0,int32range:(as=L.int32range)!==null&&as!==void 0?as:!0,uriResolver:Lr}}class C{constructor(I={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,I=this.opts={...I,...g(I)};const{es5:V,lines:z}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:E,es5:V,lines:z}),this.logger=Y(I.logger);const b=I.validateFormats;I.validateFormats=!1,this.RULES=(0,i.getRules)(),$.call(this,k,I,"NOT SUPPORTED"),$.call(this,p,I,"DEPRECATED","warn"),this._metaOpts=G.call(this),I.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),I.keywords&&q.call(this,I.keywords),typeof I.meta=="object"&&this.addMetaSchema(I.meta),M.call(this),I.validateFormats=b}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:I,meta:V,schemaId:z}=this.opts;let b=m;z==="id"&&(b={...m},b.id=b.$id,delete b.$id),V&&I&&this.addMetaSchema(b,b[z],!1)}defaultMeta(){const{meta:I,schemaId:V}=this.opts;return this.opts.defaultMeta=typeof I=="object"?I[V]||I:void 0}validate(I,V){let z;if(typeof I=="string"){if(z=this.getSchema(I),!z)throw new Error(`no schema with key or ref "${I}"`)}else z=this.compile(I);const b=z(V);return"$async"in z||(this.errors=z.errors),b}compile(I,V){const z=this._addSchema(I,V);return z.validate||this._compileSchemaEnv(z)}compileAsync(I,V){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:z}=this.opts;return b.call(this,I,V);async function b(le,ce){await T.call(this,le.$schema);const U=this._addSchema(le,ce);return U.validate||j.call(this,U)}async function T(le){le&&!this.getSchema(le)&&await b.call(this,{$ref:le},!0)}async function j(le){try{return this._compileSchemaEnv(le)}catch(ce){if(!(ce instanceof s.default))throw ce;return O.call(this,ce),await F.call(this,ce.missingSchema),j.call(this,le)}}function O({missingSchema:le,missingRef:ce}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ce} cannot be resolved`)}async function F(le){const ce=await W.call(this,le);this.refs[le]||await T.call(this,ce.$schema),this.refs[le]||this.addSchema(ce,le,V)}async function W(le){const ce=this._loading[le];if(ce)return ce;try{return await(this._loading[le]=z(le))}finally{delete this._loading[le]}}}addSchema(I,V,z,b=this.opts.validateSchema){if(Array.isArray(I)){for(const j of I)this.addSchema(j,void 0,z,b);return this}let T;if(typeof I=="object"){const{schemaId:j}=this.opts;if(T=I[j],T!==void 0&&typeof T!="string")throw new Error(`schema ${j} must be string`)}return V=(0,c.normalizeId)(V||T),this._checkUnique(V),this.schemas[V]=this._addSchema(I,z,V,b,!0),this}addMetaSchema(I,V,z=this.opts.validateSchema){return this.addSchema(I,V,!0,z),this}validateSchema(I,V){if(typeof I=="boolean")return!0;let z;if(z=I.$schema,z!==void 0&&typeof z!="string")throw new Error("$schema must be a string");if(z=z||this.opts.defaultMeta||this.defaultMeta(),!z)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const b=this.validate(z,I);if(!b&&V){const T="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(T);else throw new Error(T)}return b}getSchema(I){let V;for(;typeof(V=N.call(this,I))=="string";)I=V;if(V===void 0){const{schemaId:z}=this.opts,b=new o.SchemaEnv({schema:{},schemaId:z});if(V=o.resolveSchema.call(this,b,I),!V)return;this.refs[I]=V}return V.validate||this._compileSchemaEnv(V)}removeSchema(I){if(I instanceof RegExp)return this._removeAllSchemas(this.schemas,I),this._removeAllSchemas(this.refs,I),this;switch(typeof I){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const V=N.call(this,I);return typeof V=="object"&&this._cache.delete(V.schema),delete this.schemas[I],delete this.refs[I],this}case"object":{const V=I;this._cache.delete(V);let z=I[this.opts.schemaId];return z&&(z=(0,c.normalizeId)(z),delete this.schemas[z],delete this.refs[z]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(I){for(const V of I)this.addKeyword(V);return this}addKeyword(I,V){let z;if(typeof I=="string")z=I,typeof V=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),V.keyword=z);else if(typeof I=="object"&&V===void 0){if(V=I,z=V.keyword,Array.isArray(z)&&!z.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(se.call(this,z,V),!V)return(0,f.eachItem)(z,T=>ae.call(this,T)),this;$e.call(this,V);const b={...V,type:(0,d.getJSONTypes)(V.type),schemaType:(0,d.getJSONTypes)(V.schemaType)};return(0,f.eachItem)(z,b.type.length===0?T=>ae.call(this,T,b):T=>b.type.forEach(j=>ae.call(this,T,b,j))),this}getKeyword(I){const V=this.RULES.all[I];return typeof V=="object"?V.definition:!!V}removeKeyword(I){const{RULES:V}=this;delete V.keywords[I],delete V.all[I];for(const z of V.rules){const b=z.rules.findIndex(T=>T.keyword===I);b>=0&&z.rules.splice(b,1)}return this}addFormat(I,V){return typeof V=="string"&&(V=new RegExp(V)),this.formats[I]=V,this}errorsText(I=this.errors,{separator:V=", ",dataVar:z="data"}={}){return!I||I.length===0?"No errors":I.map(b=>`${z}${b.instancePath} ${b.message}`).reduce((b,T)=>b+V+T)}$dataMetaSchema(I,V){const z=this.RULES.all;I=JSON.parse(JSON.stringify(I));for(const b of V){const T=b.split("/").slice(1);let j=I;for(const O of T)j=j[O];for(const O in z){const F=z[O];if(typeof F!="object")continue;const{$data:W}=F.definition,le=j[O];W&&le&&(j[O]=ue(le))}}return I}_removeAllSchemas(I,V){for(const z in I){const b=I[z];(!V||V.test(z))&&(typeof b=="string"?delete I[z]:b&&!b.meta&&(this._cache.delete(b.schema),delete I[z]))}}_addSchema(I,V,z,b=this.opts.validateSchema,T=this.opts.addUsedSchema){let j;const{schemaId:O}=this.opts;if(typeof I=="object")j=I[O];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof I!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(I);if(F!==void 0)return F;z=(0,c.normalizeId)(j||z);const W=c.getSchemaRefs.call(this,I,z);return F=new o.SchemaEnv({schema:I,schemaId:O,meta:V,baseId:z,localRefs:W}),this._cache.set(F.schema,F),T&&!z.startsWith("#")&&(z&&this._checkUnique(z),this.refs[z]=F),b&&this.validateSchema(I,!0),F}_checkUnique(I){if(this.schemas[I]||this.refs[I])throw new Error(`schema with key or id "${I}" already exists`)}_compileSchemaEnv(I){if(I.meta?this._compileMetaSchema(I):o.compileSchema.call(this,I),!I.validate)throw new Error("ajv implementation error");return I.validate}_compileMetaSchema(I){const V=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,I)}finally{this.opts=V}}}C.ValidationError=r.default,C.MissingRefError=s.default,t.default=C;function $(L,I,V,z="error"){for(const b in L){const T=b;T in I&&this.logger[z](`${V}: option ${b}. ${L[T]}`)}}function N(L){return L=(0,c.normalizeId)(L),this.schemas[L]||this.refs[L]}function M(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const I in L)this.addSchema(L[I],I)}function A(){for(const L in this.opts.formats){const I=this.opts.formats[L];I&&this.addFormat(L,I)}}function q(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const I in L){const V=L[I];V.keyword||(V.keyword=I),this.addKeyword(V)}}function G(){const L={...this.opts};for(const I of _)delete L[I];return L}const B={log(){},warn(){},error(){}};function Y(L){if(L===!1)return B;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const ie=/^[a-z_$][a-z0-9_$:-]*$/i;function se(L,I){const{RULES:V}=this;if((0,f.eachItem)(L,z=>{if(V.keywords[z])throw new Error(`Keyword ${z} is already defined`);if(!ie.test(z))throw new Error(`Keyword ${z} has invalid name`)}),!!I&&I.$data&&!("code"in I||"validate"in I))throw new Error('$data keyword must have "code" or "validate" function')}function ae(L,I,V){var z;const b=I==null?void 0:I.post;if(V&&b)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:T}=this;let j=b?T.post:T.rules.find(({type:F})=>F===V);if(j||(j={type:V,rules:[]},T.rules.push(j)),T.keywords[L]=!0,!I)return;const O={keyword:L,definition:{...I,type:(0,d.getJSONTypes)(I.type),schemaType:(0,d.getJSONTypes)(I.schemaType)}};I.before?ve.call(this,j,O,I.before):j.rules.push(O),T.all[L]=O,(z=I.implements)===null||z===void 0||z.forEach(F=>this.addKeyword(F))}function ve(L,I,V){const z=L.rules.findIndex(b=>b.keyword===V);z>=0?L.rules.splice(z,0,I):(L.rules.push(I),this.logger.warn(`rule ${V} is not defined`))}function $e(L){let{metaSchema:I}=L;I!==void 0&&(L.$data&&this.opts.$data&&(I=ue(I)),L.validateSchema=this.compile(I,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(L){return{anyOf:[L,ee]}}})(UR);var o3={},a3={},l3={};Object.defineProperty(l3,"__esModule",{value:!0});const ZX={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};l3.default=ZX;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.callRef=lu.getValidate=void 0;const KX=Sd,q6=ot,Qr=nt,Gu=so,B6=es,Fm=Pe,QX={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:n,it:r}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=r,{root:d}=i;if((n==="#"||n==="#/")&&s===d.baseId)return m();const f=B6.resolveRef.call(c,d,s,n);if(f===void 0)throw new KX.default(r.opts.uriResolver,s,n);if(f instanceof B6.SchemaEnv)return y(f);return v(f);function m(){if(i===d)return Sg(t,o,i,i.$async);const _=e.scopeValue("root",{ref:d});return Sg(t,(0,Qr._)`${_}.validate`,d,d.$async)}function y(_){const E=w7(t,_);Sg(t,E,_,_.$async)}function v(_){const E=e.scopeValue("schema",a.code.source===!0?{ref:_,code:(0,Qr.stringify)(_)}:{ref:_}),k=e.name("valid"),p=t.subschema({schema:_,dataTypes:[],schemaPath:Qr.nil,topSchemaRef:E,errSchemaPath:n},k);t.mergeEvaluated(p),t.ok(k)}}};function w7(t,e){const{gen:n}=t;return e.validate?n.scopeValue("validate",{ref:e.validate}):(0,Qr._)`${n.scopeValue("wrapper",{ref:e})}.validate`}lu.getValidate=w7;function Sg(t,e,n,r){const{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:c}=i,d=c.passContext?Gu.default.this:Qr.nil;r?f():m();function f(){if(!a.$async)throw new Error("async schema referenced by sync schema");const _=s.let("valid");s.try(()=>{s.code((0,Qr._)`await ${(0,q6.callValidateCode)(t,e,d)}`),v(e),o||s.assign(_,!0)},E=>{s.if((0,Qr._)`!(${E} instanceof ${i.ValidationError})`,()=>s.throw(E)),y(E),o||s.assign(_,!1)}),t.ok(_)}function m(){t.result((0,q6.callValidateCode)(t,e,d),()=>v(e),()=>y(e))}function y(_){const E=(0,Qr._)`${_}.errors`;s.assign(Gu.default.vErrors,(0,Qr._)`${Gu.default.vErrors} === null ? ${E} : ${Gu.default.vErrors}.concat(${E})`),s.assign(Gu.default.errors,(0,Qr._)`${Gu.default.vErrors}.length`)}function v(_){var E;if(!i.opts.unevaluated)return;const k=(E=n==null?void 0:n.validate)===null||E===void 0?void 0:E.evaluated;if(i.props!==!0)if(k&&!k.dynamicProps)k.props!==void 0&&(i.props=Fm.mergeEvaluated.props(s,k.props,i.props));else{const p=s.var("props",(0,Qr._)`${_}.evaluated.props`);i.props=Fm.mergeEvaluated.props(s,p,i.props,Qr.Name)}if(i.items!==!0)if(k&&!k.dynamicItems)k.items!==void 0&&(i.items=Fm.mergeEvaluated.items(s,k.items,i.items));else{const p=s.var("items",(0,Qr._)`${_}.evaluated.items`);i.items=Fm.mergeEvaluated.items(s,p,i.items,Qr.Name)}}}lu.callRef=Sg;lu.default=QX;Object.defineProperty(a3,"__esModule",{value:!0});const YX=l3,XX=lu,JX=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",YX.default,XX.default];a3.default=JX;var u3={},c3={};Object.defineProperty(c3,"__esModule",{value:!0});const P0=nt,aa=P0.operators,$0={maximum:{okStr:"<=",ok:aa.LTE,fail:aa.GT},minimum:{okStr:">=",ok:aa.GTE,fail:aa.LT},exclusiveMaximum:{okStr:"<",ok:aa.LT,fail:aa.GTE},exclusiveMinimum:{okStr:">",ok:aa.GT,fail:aa.LTE}},eJ={message:({keyword:t,schemaCode:e})=>(0,P0.str)`must be ${$0[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,P0._)`{comparison: ${$0[t].okStr}, limit: ${e}}`},tJ={keyword:Object.keys($0),type:"number",schemaType:"number",$data:!0,error:eJ,code(t){const{keyword:e,data:n,schemaCode:r}=t;t.fail$data((0,P0._)`${n} ${$0[e].fail} ${r} || isNaN(${n})`)}};c3.default=tJ;var d3={};Object.defineProperty(d3,"__esModule",{value:!0});const Jf=nt,nJ={message:({schemaCode:t})=>(0,Jf.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Jf._)`{multipleOf: ${t}}`},rJ={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:nJ,code(t){const{gen:e,data:n,schemaCode:r,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Jf._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Jf._)`${o} !== parseInt(${o})`;t.fail$data((0,Jf._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};d3.default=rJ;var f3={},h3={};Object.defineProperty(h3,"__esModule",{value:!0});function S7(t){const e=t.length;let n=0,r=0,s;for(;r<e;)n++,s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<e&&(s=t.charCodeAt(r),(s&64512)===56320&&r++);return n}h3.default=S7;S7.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(f3,"__esModule",{value:!0});const Tl=nt,sJ=Pe,iJ=h3,oJ={message({keyword:t,schemaCode:e}){const n=t==="maxLength"?"more":"fewer";return(0,Tl.str)`must NOT have ${n} than ${e} characters`},params:({schemaCode:t})=>(0,Tl._)`{limit: ${t}}`},aJ={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:oJ,code(t){const{keyword:e,data:n,schemaCode:r,it:s}=t,i=e==="maxLength"?Tl.operators.GT:Tl.operators.LT,o=s.opts.unicode===!1?(0,Tl._)`${n}.length`:(0,Tl._)`${(0,sJ.useFunc)(t.gen,iJ.default)}(${n})`;t.fail$data((0,Tl._)`${o} ${i} ${r}`)}};f3.default=aJ;var p3={};Object.defineProperty(p3,"__esModule",{value:!0});const lJ=ot,T0=nt,uJ={message:({schemaCode:t})=>(0,T0.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,T0._)`{pattern: ${t}}`},cJ={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:uJ,code(t){const{data:e,$data:n,schema:r,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=n?(0,T0._)`(new RegExp(${s}, ${o}))`:(0,lJ.usePattern)(t,r);t.fail$data((0,T0._)`!${a}.test(${e})`)}};p3.default=cJ;var m3={};Object.defineProperty(m3,"__esModule",{value:!0});const eh=nt,dJ={message({keyword:t,schemaCode:e}){const n=t==="maxProperties"?"more":"fewer";return(0,eh.str)`must NOT have ${n} than ${e} properties`},params:({schemaCode:t})=>(0,eh._)`{limit: ${t}}`},fJ={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:dJ,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxProperties"?eh.operators.GT:eh.operators.LT;t.fail$data((0,eh._)`Object.keys(${n}).length ${s} ${r}`)}};m3.default=fJ;var g3={};Object.defineProperty(g3,"__esModule",{value:!0});const cf=ot,th=nt,hJ=Pe,pJ={message:({params:{missingProperty:t}})=>(0,th.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,th._)`{missingProperty: ${t}}`},mJ={keyword:"required",type:"object",schemaType:"array",$data:!0,error:pJ,code(t){const{gen:e,schema:n,schemaCode:r,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&n.length===0)return;const c=n.length>=a.loopRequired;if(o.allErrors?d():f(),a.strictRequired){const v=t.parentSchema.properties,{definedProperties:_}=t.it;for(const E of n)if((v==null?void 0:v[E])===void 0&&!_.has(E)){const k=o.schemaEnv.baseId+o.errSchemaPath,p=`required property "${E}" is not defined at "${k}" (strictRequired)`;(0,hJ.checkStrictMode)(o,p,o.opts.strictRequired)}}function d(){if(c||i)t.block$data(th.nil,m);else for(const v of n)(0,cf.checkReportMissingProp)(t,v)}function f(){const v=e.let("missing");if(c||i){const _=e.let("valid",!0);t.block$data(_,()=>y(v,_)),t.ok(_)}else e.if((0,cf.checkMissingProp)(t,n,v)),(0,cf.reportMissingProp)(t,v),e.else()}function m(){e.forOf("prop",r,v=>{t.setParams({missingProperty:v}),e.if((0,cf.noPropertyInData)(e,s,v,a.ownProperties),()=>t.error())})}function y(v,_){t.setParams({missingProperty:v}),e.forOf(v,r,()=>{e.assign(_,(0,cf.propertyInData)(e,s,v,a.ownProperties)),e.if((0,th.not)(_),()=>{t.error(),e.break()})},th.nil)}}};g3.default=mJ;var y3={};Object.defineProperty(y3,"__esModule",{value:!0});const nh=nt,gJ={message({keyword:t,schemaCode:e}){const n=t==="maxItems"?"more":"fewer";return(0,nh.str)`must NOT have ${n} than ${e} items`},params:({schemaCode:t})=>(0,nh._)`{limit: ${t}}`},yJ={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gJ,code(t){const{keyword:e,data:n,schemaCode:r}=t,s=e==="maxItems"?nh.operators.GT:nh.operators.LT;t.fail$data((0,nh._)`${n}.length ${s} ${r}`)}};y3.default=yJ;var v3={},op={};Object.defineProperty(op,"__esModule",{value:!0});const k7=Ty;k7.code='require("ajv/dist/runtime/equal").default';op.default=k7;Object.defineProperty(v3,"__esModule",{value:!0});const j1=Fn,rr=nt,vJ=Pe,_J=op,wJ={message:({params:{i:t,j:e}})=>(0,rr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,rr._)`{i: ${t}, j: ${e}}`},SJ={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:wJ,code(t){const{gen:e,data:n,$data:r,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!r&&!s)return;const c=e.let("valid"),d=i.items?(0,j1.getSchemaTypes)(i.items):[];t.block$data(c,f,(0,rr._)`${o} === false`),t.ok(c);function f(){const _=e.let("i",(0,rr._)`${n}.length`),E=e.let("j");t.setParams({i:_,j:E}),e.assign(c,!0),e.if((0,rr._)`${_} > 1`,()=>(m()?y:v)(_,E))}function m(){return d.length>0&&!d.some(_=>_==="object"||_==="array")}function y(_,E){const k=e.name("item"),p=(0,j1.checkDataTypes)(d,k,a.opts.strictNumbers,j1.DataType.Wrong),w=e.const("indices",(0,rr._)`{}`);e.for((0,rr._)`;${_}--;`,()=>{e.let(k,(0,rr._)`${n}[${_}]`),e.if(p,(0,rr._)`continue`),d.length>1&&e.if((0,rr._)`typeof ${k} == "string"`,(0,rr._)`${k} += "_"`),e.if((0,rr._)`typeof ${w}[${k}] == "number"`,()=>{e.assign(E,(0,rr._)`${w}[${k}]`),t.error(),e.assign(c,!1).break()}).code((0,rr._)`${w}[${k}] = ${_}`)})}function v(_,E){const k=(0,vJ.useFunc)(e,_J.default),p=e.name("outer");e.label(p).for((0,rr._)`;${_}--;`,()=>e.for((0,rr._)`${E} = ${_}; ${E}--;`,()=>e.if((0,rr._)`${k}(${n}[${_}], ${n}[${E}])`,()=>{t.error(),e.assign(c,!1).break(p)})))}}};v3.default=SJ;var _3={};Object.defineProperty(_3,"__esModule",{value:!0});const K2=nt,kJ=Pe,bJ=op,EJ={message:"must be equal to constant",params:({schemaCode:t})=>(0,K2._)`{allowedValue: ${t}}`},CJ={keyword:"const",$data:!0,error:EJ,code(t){const{gen:e,data:n,$data:r,schemaCode:s,schema:i}=t;r||i&&typeof i=="object"?t.fail$data((0,K2._)`!${(0,kJ.useFunc)(e,bJ.default)}(${n}, ${s})`):t.fail((0,K2._)`${i} !== ${n}`)}};_3.default=CJ;var w3={};Object.defineProperty(w3,"__esModule",{value:!0});const xf=nt,PJ=Pe,$J=op,TJ={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,xf._)`{allowedValues: ${t}}`},xJ={keyword:"enum",schemaType:"array",$data:!0,error:TJ,code(t){const{gen:e,data:n,$data:r,schema:s,schemaCode:i,it:o}=t;if(!r&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=o.opts.loopEnum;let c;const d=()=>c??(c=(0,PJ.useFunc)(e,$J.default));let f;if(a||r)f=e.let("valid"),t.block$data(f,m);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const v=e.const("vSchema",i);f=(0,xf.or)(...s.map((_,E)=>y(v,E)))}t.pass(f);function m(){e.assign(f,!1),e.forOf("v",i,v=>e.if((0,xf._)`${d()}(${n}, ${v})`,()=>e.assign(f,!0).break()))}function y(v,_){const E=s[_];return typeof E=="object"&&E!==null?(0,xf._)`${d()}(${n}, ${v}[${_}])`:(0,xf._)`${n} === ${E}`}}};w3.default=xJ;Object.defineProperty(u3,"__esModule",{value:!0});const NJ=c3,RJ=d3,OJ=f3,IJ=p3,AJ=m3,jJ=g3,MJ=y3,zJ=v3,DJ=_3,FJ=w3,LJ=[NJ.default,RJ.default,OJ.default,IJ.default,AJ.default,jJ.default,MJ.default,zJ.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},DJ.default,FJ.default];u3.default=LJ;var S3={},kd={};Object.defineProperty(kd,"__esModule",{value:!0});kd.validateAdditionalItems=void 0;const xl=nt,Q2=Pe,UJ={message:({params:{len:t}})=>(0,xl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,xl._)`{limit: ${t}}`},VJ={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:UJ,code(t){const{parentSchema:e,it:n}=t,{items:r}=e;if(!Array.isArray(r)){(0,Q2.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}b7(t,r)}};function b7(t,e){const{gen:n,schema:r,data:s,keyword:i,it:o}=t;o.items=!0;const a=n.const("len",(0,xl._)`${s}.length`);if(r===!1)t.setParams({len:e.length}),t.pass((0,xl._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,Q2.alwaysValidSchema)(o,r)){const d=n.var("valid",(0,xl._)`${a} <= ${e.length}`);n.if((0,xl.not)(d),()=>c(d)),t.ok(d)}function c(d){n.forRange("i",e.length,a,f=>{t.subschema({keyword:i,dataProp:f,dataPropType:Q2.Type.Num},d),o.allErrors||n.if((0,xl.not)(d),()=>n.break())})}}kd.validateAdditionalItems=b7;kd.default=VJ;var k3={},bd={};Object.defineProperty(bd,"__esModule",{value:!0});bd.validateTuple=void 0;const W6=nt,kg=Pe,GJ=ot,HJ={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:n}=t;if(Array.isArray(e))return E7(t,"additionalItems",e);n.items=!0,!(0,kg.alwaysValidSchema)(n,e)&&t.ok((0,GJ.validateArray)(t))}};function E7(t,e,n=t.schema){const{gen:r,parentSchema:s,data:i,keyword:o,it:a}=t;f(s),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=kg.mergeEvaluated.items(r,n.length,a.items));const c=r.name("valid"),d=r.const("len",(0,W6._)`${i}.length`);n.forEach((m,y)=>{(0,kg.alwaysValidSchema)(a,m)||(r.if((0,W6._)`${d} > ${y}`,()=>t.subschema({keyword:o,schemaProp:y,dataProp:y},c)),t.ok(c))});function f(m){const{opts:y,errSchemaPath:v}=a,_=n.length,E=_===m.minItems&&(_===m.maxItems||m[e]===!1);if(y.strictTuples&&!E){const k=`"${o}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${v}"`;(0,kg.checkStrictMode)(a,k,y.strictTuples)}}}bd.validateTuple=E7;bd.default=HJ;Object.defineProperty(k3,"__esModule",{value:!0});const qJ=bd,BJ={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,qJ.validateTuple)(t,"items")};k3.default=BJ;var b3={};Object.defineProperty(b3,"__esModule",{value:!0});const Z6=nt,WJ=Pe,ZJ=ot,KJ=kd,QJ={message:({params:{len:t}})=>(0,Z6.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Z6._)`{limit: ${t}}`},YJ={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:QJ,code(t){const{schema:e,parentSchema:n,it:r}=t,{prefixItems:s}=n;r.items=!0,!(0,WJ.alwaysValidSchema)(r,e)&&(s?(0,KJ.validateAdditionalItems)(t,s):t.ok((0,ZJ.validateArray)(t)))}};b3.default=YJ;var E3={};Object.defineProperty(E3,"__esModule",{value:!0});const Ds=nt,Lm=Pe,XJ={message:({params:{min:t,max:e}})=>e===void 0?(0,Ds.str)`must contain at least ${t} valid item(s)`:(0,Ds.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ds._)`{minContains: ${t}}`:(0,Ds._)`{minContains: ${t}, maxContains: ${e}}`},JJ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:XJ,code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;let o,a;const{minContains:c,maxContains:d}=r;i.opts.next?(o=c===void 0?1:c,a=d):o=1;const f=e.const("len",(0,Ds._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Lm.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Lm.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Lm.alwaysValidSchema)(i,n)){let E=(0,Ds._)`${f} >= ${o}`;a!==void 0&&(E=(0,Ds._)`${E} && ${f} <= ${a}`),t.pass(E);return}i.items=!0;const m=e.name("valid");a===void 0&&o===1?v(m,()=>e.if(m,()=>e.break())):o===0?(e.let(m,!0),a!==void 0&&e.if((0,Ds._)`${s}.length > 0`,y)):(e.let(m,!1),y()),t.result(m,()=>t.reset());function y(){const E=e.name("_valid"),k=e.let("count",0);v(E,()=>e.if(E,()=>_(k)))}function v(E,k){e.forRange("i",0,f,p=>{t.subschema({keyword:"contains",dataProp:p,dataPropType:Lm.Type.Num,compositeRule:!0},E),k()})}function _(E){e.code((0,Ds._)`${E}++`),a===void 0?e.if((0,Ds._)`${E} >= ${o}`,()=>e.assign(m,!0).break()):(e.if((0,Ds._)`${E} > ${a}`,()=>e.assign(m,!1).break()),o===1?e.assign(m,!0):e.if((0,Ds._)`${E} >= ${o}`,()=>e.assign(m,!0)))}}};E3.default=JJ;var C7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=nt,n=Pe,r=ot;t.error={message:({params:{property:c,depsCount:d,deps:f}})=>{const m=d===1?"property":"properties";return(0,e.str)`must have ${m} ${f} when property ${c} is present`},params:({params:{property:c,depsCount:d,deps:f,missingProperty:m}})=>(0,e._)`{property: ${c},
    missingProperty: ${m},
    depsCount: ${d},
    deps: ${f}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[d,f]=i(c);o(c,d),a(c,f)}};function i({schema:c}){const d={},f={};for(const m in c){if(m==="__proto__")continue;const y=Array.isArray(c[m])?d:f;y[m]=c[m]}return[d,f]}function o(c,d=c.schema){const{gen:f,data:m,it:y}=c;if(Object.keys(d).length===0)return;const v=f.let("missing");for(const _ in d){const E=d[_];if(E.length===0)continue;const k=(0,r.propertyInData)(f,m,_,y.opts.ownProperties);c.setParams({property:_,depsCount:E.length,deps:E.join(", ")}),y.allErrors?f.if(k,()=>{for(const p of E)(0,r.checkReportMissingProp)(c,p)}):(f.if((0,e._)`${k} && (${(0,r.checkMissingProp)(c,E,v)})`),(0,r.reportMissingProp)(c,v),f.else())}}t.validatePropertyDeps=o;function a(c,d=c.schema){const{gen:f,data:m,keyword:y,it:v}=c,_=f.name("valid");for(const E in d)(0,n.alwaysValidSchema)(v,d[E])||(f.if((0,r.propertyInData)(f,m,E,v.opts.ownProperties),()=>{const k=c.subschema({keyword:y,schemaProp:E},_);c.mergeValidEvaluated(k,_)},()=>f.var(_,!0)),c.ok(_))}t.validateSchemaDeps=a,t.default=s})(C7);var C3={};Object.defineProperty(C3,"__esModule",{value:!0});const P7=nt,eee=Pe,tee={message:"property name must be valid",params:({params:t})=>(0,P7._)`{propertyName: ${t.propertyName}}`},nee={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:tee,code(t){const{gen:e,schema:n,data:r,it:s}=t;if((0,eee.alwaysValidSchema)(s,n))return;const i=e.name("valid");e.forIn("key",r,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,P7.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};C3.default=nee;var zy={};Object.defineProperty(zy,"__esModule",{value:!0});const Um=ot,di=nt,ree=so,Vm=Pe,see={message:"must NOT have additional properties",params:({params:t})=>(0,di._)`{additionalProperty: ${t.additionalProperty}}`},iee={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:see,code(t){const{gen:e,schema:n,parentSchema:r,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Vm.alwaysValidSchema)(o,n))return;const d=(0,Um.allSchemaProperties)(r.properties),f=(0,Um.allSchemaProperties)(r.patternProperties);m(),t.ok((0,di._)`${i} === ${ree.default.errors}`);function m(){e.forIn("key",s,k=>{!d.length&&!f.length?_(k):e.if(y(k),()=>_(k))})}function y(k){let p;if(d.length>8){const w=(0,Vm.schemaRefOrVal)(o,r.properties,"properties");p=(0,Um.isOwnProperty)(e,w,k)}else d.length?p=(0,di.or)(...d.map(w=>(0,di._)`${k} === ${w}`)):p=di.nil;return f.length&&(p=(0,di.or)(p,...f.map(w=>(0,di._)`${(0,Um.usePattern)(t,w)}.test(${k})`))),(0,di.not)(p)}function v(k){e.code((0,di._)`delete ${s}[${k}]`)}function _(k){if(c.removeAdditional==="all"||c.removeAdditional&&n===!1){v(k);return}if(n===!1){t.setParams({additionalProperty:k}),t.error(),a||e.break();return}if(typeof n=="object"&&!(0,Vm.alwaysValidSchema)(o,n)){const p=e.name("valid");c.removeAdditional==="failing"?(E(k,p,!1),e.if((0,di.not)(p),()=>{t.reset(),v(k)})):(E(k,p),a||e.if((0,di.not)(p),()=>e.break()))}}function E(k,p,w){const g={keyword:"additionalProperties",dataProp:k,dataPropType:Vm.Type.Str};w===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(g,p)}}};zy.default=iee;var P3={};Object.defineProperty(P3,"__esModule",{value:!0});const oee=Pi,K6=ot,M1=Pe,Q6=zy,aee={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,parentSchema:r,data:s,it:i}=t;i.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Q6.default.code(new oee.KeywordCxt(i,Q6.default,"additionalProperties"));const o=(0,K6.allSchemaProperties)(n);for(const m of o)i.definedProperties.add(m);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=M1.mergeEvaluated.props(e,(0,M1.toHash)(o),i.props));const a=o.filter(m=>!(0,M1.alwaysValidSchema)(i,n[m]));if(a.length===0)return;const c=e.name("valid");for(const m of a)d(m)?f(m):(e.if((0,K6.propertyInData)(e,s,m,i.opts.ownProperties)),f(m),i.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(m),t.ok(c);function d(m){return i.opts.useDefaults&&!i.compositeRule&&n[m].default!==void 0}function f(m){t.subschema({keyword:"properties",schemaProp:m,dataProp:m},c)}}};P3.default=aee;var $3={};Object.defineProperty($3,"__esModule",{value:!0});const Y6=ot,Gm=nt,X6=Pe,J6=Pe,lee={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:n,data:r,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,Y6.allSchemaProperties)(n),c=a.filter(E=>(0,X6.alwaysValidSchema)(i,n[E]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;const d=o.strictSchema&&!o.allowMatchingProperties&&s.properties,f=e.name("valid");i.props!==!0&&!(i.props instanceof Gm.Name)&&(i.props=(0,J6.evaluatedPropsToName)(e,i.props));const{props:m}=i;y();function y(){for(const E of a)d&&v(E),i.allErrors?_(E):(e.var(f,!0),_(E),e.if(f))}function v(E){for(const k in d)new RegExp(E).test(k)&&(0,X6.checkStrictMode)(i,`property ${k} matches pattern ${E} (use allowMatchingProperties)`)}function _(E){e.forIn("key",r,k=>{e.if((0,Gm._)`${(0,Y6.usePattern)(t,E)}.test(${k})`,()=>{const p=c.includes(E);p||t.subschema({keyword:"patternProperties",schemaProp:E,dataProp:k,dataPropType:J6.Type.Str},f),i.opts.unevaluated&&m!==!0?e.assign((0,Gm._)`${m}[${k}]`,!0):!p&&!i.allErrors&&e.if((0,Gm.not)(f),()=>e.break())})})}}};$3.default=lee;var T3={};Object.defineProperty(T3,"__esModule",{value:!0});const uee=Pe,cee={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:n,it:r}=t;if((0,uee.alwaysValidSchema)(r,n)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};T3.default=cee;var x3={};Object.defineProperty(x3,"__esModule",{value:!0});const dee=ot,fee={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:dee.validateUnion,error:{message:"must match a schema in anyOf"}};x3.default=fee;var N3={};Object.defineProperty(N3,"__esModule",{value:!0});const bg=nt,hee=Pe,pee={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,bg._)`{passingSchemas: ${t.passing}}`},mee={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:pee,code(t){const{gen:e,schema:n,parentSchema:r,it:s}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&r.discriminator)return;const i=n,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(o,()=>t.reset(),()=>t.error(!0));function d(){i.forEach((f,m)=>{let y;(0,hee.alwaysValidSchema)(s,f)?e.var(c,!0):y=t.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},c),m>0&&e.if((0,bg._)`${c} && ${o}`).assign(o,!1).assign(a,(0,bg._)`[${a}, ${m}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,m),y&&t.mergeEvaluated(y,bg.Name)})})}}};N3.default=mee;var R3={};Object.defineProperty(R3,"__esModule",{value:!0});const gee=Pe,yee={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:n,it:r}=t;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=e.name("valid");n.forEach((i,o)=>{if((0,gee.alwaysValidSchema)(r,i))return;const a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};R3.default=yee;var O3={};Object.defineProperty(O3,"__esModule",{value:!0});const x0=nt,$7=Pe,vee={message:({params:t})=>(0,x0.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,x0._)`{failingKeyword: ${t.ifClause}}`},_ee={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vee,code(t){const{gen:e,parentSchema:n,it:r}=t;n.then===void 0&&n.else===void 0&&(0,$7.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const s=e9(r,"then"),i=e9(r,"else");if(!s&&!i)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&i){const f=e.let("ifClause");t.setParams({ifClause:f}),e.if(a,d("then",f),d("else",f))}else s?e.if(a,d("then")):e.if((0,x0.not)(a),d("else"));t.pass(o,()=>t.error(!0));function c(){const f=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(f)}function d(f,m){return()=>{const y=t.subschema({keyword:f},a);e.assign(o,a),t.mergeValidEvaluated(y,o),m?e.assign(m,(0,x0._)`${f}`):t.setParams({ifClause:f})}}}};function e9(t,e){const n=t.schema[e];return n!==void 0&&!(0,$7.alwaysValidSchema)(t,n)}O3.default=_ee;var I3={};Object.defineProperty(I3,"__esModule",{value:!0});const wee=Pe,See={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:n}){e.if===void 0&&(0,wee.checkStrictMode)(n,`"${t}" without "if" is ignored`)}};I3.default=See;Object.defineProperty(S3,"__esModule",{value:!0});const kee=kd,bee=k3,Eee=bd,Cee=b3,Pee=E3,$ee=C7,Tee=C3,xee=zy,Nee=P3,Ree=$3,Oee=T3,Iee=x3,Aee=N3,jee=R3,Mee=O3,zee=I3;function Dee(t=!1){const e=[Oee.default,Iee.default,Aee.default,jee.default,Mee.default,zee.default,Tee.default,xee.default,$ee.default,Nee.default,Ree.default];return t?e.push(bee.default,Cee.default):e.push(kee.default,Eee.default),e.push(Pee.default),e}S3.default=Dee;var A3={},j3={};Object.defineProperty(j3,"__esModule",{value:!0});const Sn=nt,Fee={message:({schemaCode:t})=>(0,Sn.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Sn._)`{format: ${t}}`},Lee={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Fee,code(t,e){const{gen:n,data:r,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:f,self:m}=a;if(!c.validateFormats)return;s?y():v();function y(){const _=n.scopeValue("formats",{ref:m.formats,code:c.code.formats}),E=n.const("fDef",(0,Sn._)`${_}[${o}]`),k=n.let("fType"),p=n.let("format");n.if((0,Sn._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>n.assign(k,(0,Sn._)`${E}.type || "string"`).assign(p,(0,Sn._)`${E}.validate`),()=>n.assign(k,(0,Sn._)`"string"`).assign(p,E)),t.fail$data((0,Sn.or)(w(),g()));function w(){return c.strictSchema===!1?Sn.nil:(0,Sn._)`${o} && !${p}`}function g(){const C=f.$async?(0,Sn._)`(${E}.async ? await ${p}(${r}) : ${p}(${r}))`:(0,Sn._)`${p}(${r})`,$=(0,Sn._)`(typeof ${p} == "function" ? ${C} : ${p}.test(${r}))`;return(0,Sn._)`${p} && ${p} !== true && ${k} === ${e} && !${$}`}}function v(){const _=m.formats[i];if(!_){w();return}if(_===!0)return;const[E,k,p]=g(_);E===e&&t.pass(C());function w(){if(c.strictSchema===!1){m.logger.warn($());return}throw new Error($());function $(){return`unknown format "${i}" ignored in schema at path "${d}"`}}function g($){const N=$ instanceof RegExp?(0,Sn.regexpCode)($):c.code.formats?(0,Sn._)`${c.code.formats}${(0,Sn.getProperty)(i)}`:void 0,M=n.scopeValue("formats",{key:i,ref:$,code:N});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,Sn._)`${M}.validate`]:["string",$,M]}function C(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!f.$async)throw new Error("async format in sync schema");return(0,Sn._)`await ${p}(${r})`}return typeof k=="function"?(0,Sn._)`${p}(${r})`:(0,Sn._)`${p}.test(${r})`}}}};j3.default=Lee;Object.defineProperty(A3,"__esModule",{value:!0});const Uee=j3,Vee=[Uee.default];A3.default=Vee;var od={};Object.defineProperty(od,"__esModule",{value:!0});od.contentVocabulary=od.metadataVocabulary=void 0;od.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];od.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(o3,"__esModule",{value:!0});const Gee=a3,Hee=u3,qee=S3,Bee=A3,t9=od,Wee=[Gee.default,Hee.default,(0,qee.default)(),Bee.default,t9.metadataVocabulary,t9.contentVocabulary];o3.default=Wee;var M3={},Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});Dy.DiscrError=void 0;var n9;(function(t){t.Tag="tag",t.Mapping="mapping"})(n9||(Dy.DiscrError=n9={}));Object.defineProperty(M3,"__esModule",{value:!0});const ec=nt,Y2=Dy,r9=es,Zee=Sd,Kee=Pe,Qee={message:({params:{discrError:t,tagName:e}})=>t===Y2.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:n}})=>(0,ec._)`{error: ${t}, tag: ${n}, tagValue: ${e}}`},Yee={keyword:"discriminator",type:"object",schemaType:"object",error:Qee,code(t){const{gen:e,data:n,schema:r,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),d=e.const("tag",(0,ec._)`${n}${(0,ec.getProperty)(a)}`);e.if((0,ec._)`typeof ${d} == "string"`,()=>f(),()=>t.error(!1,{discrError:Y2.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function f(){const v=y();e.if(!1);for(const _ in v)e.elseIf((0,ec._)`${d} === ${_}`),e.assign(c,m(v[_]));e.else(),t.error(!1,{discrError:Y2.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function m(v){const _=e.name("valid"),E=t.subschema({keyword:"oneOf",schemaProp:v},_);return t.mergeEvaluated(E,ec.Name),_}function y(){var v;const _={},E=p(s);let k=!0;for(let C=0;C<o.length;C++){let $=o[C];if($!=null&&$.$ref&&!(0,Kee.schemaHasRulesButRef)($,i.self.RULES)){const M=$.$ref;if($=r9.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,M),$ instanceof r9.SchemaEnv&&($=$.schema),$===void 0)throw new Zee.default(i.opts.uriResolver,i.baseId,M)}const N=(v=$==null?void 0:$.properties)===null||v===void 0?void 0:v[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);k=k&&(E||p($)),w(N,C)}if(!k)throw new Error(`discriminator: "${a}" must be required`);return _;function p({required:C}){return Array.isArray(C)&&C.includes(a)}function w(C,$){if(C.const)g(C.const,$);else if(C.enum)for(const N of C.enum)g(N,$);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(C,$){if(typeof C!="string"||C in _)throw new Error(`discriminator: "${a}" values must be unique strings`);_[C]=$}}}};M3.default=Yee;const Xee="http://json-schema.org/draft-07/schema#",Jee="http://json-schema.org/draft-07/schema#",ete="Core schema meta-schema",tte={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},nte=["object","boolean"],rte={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},ste={$schema:Xee,$id:Jee,title:ete,definitions:tte,type:nte,properties:rte,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const n=UR,r=o3,s=M3,i=ste,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(_=>this.addVocabulary(_)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const _=this.opts.$data?this.$dataMetaSchema(i,o):i;this.addMetaSchema(_,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var d=Pi;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var f=nt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}});var m=ip;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return m.default}});var y=Sd;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})(H2,H2.exports);var ite=H2.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=ite,n=nt,r=n.operators,s={formatMaximum:{okStr:"<=",ok:r.LTE,fail:r.GT},formatMinimum:{okStr:">=",ok:r.GTE,fail:r.LT},formatExclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},formatExclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},i={message:({keyword:a,schemaCode:c})=>(0,n.str)`should be ${s[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>(0,n._)`{comparison: ${s[a].okStr}, limit: ${c}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:i,code(a){const{gen:c,data:d,schemaCode:f,keyword:m,it:y}=a,{opts:v,self:_}=y;if(!v.validateFormats)return;const E=new e.KeywordCxt(y,_.RULES.all.format.definition,"format");E.$data?k():p();function k(){const g=c.scopeValue("formats",{ref:_.formats,code:v.code.formats}),C=c.const("fmt",(0,n._)`${g}[${E.schemaCode}]`);a.fail$data((0,n.or)((0,n._)`typeof ${C} != "object"`,(0,n._)`${C} instanceof RegExp`,(0,n._)`typeof ${C}.compare != "function"`,w(C)))}function p(){const g=E.schema,C=_.formats[g];if(!C||C===!0)return;if(typeof C!="object"||C instanceof RegExp||typeof C.compare!="function")throw new Error(`"${m}": format "${g}" does not define "compare" function`);const $=c.scopeValue("formats",{key:g,ref:C,code:v.code.formats?(0,n._)`${v.code.formats}${(0,n.getProperty)(g)}`:void 0});a.fail$data(w($))}function w(g){return(0,n._)`${g}.compare(${d}, ${f}) ${s[m].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(t.formatLimitDefinition),a);t.default=o})(LR);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=FR,r=LR,s=nt,i=new s.Name("fullFormats"),o=new s.Name("fastFormats"),a=(d,f={keywords:!0})=>{if(Array.isArray(f))return c(d,f,n.fullFormats,i),d;const[m,y]=f.mode==="fast"?[n.fastFormats,o]:[n.fullFormats,i],v=f.formats||n.formatNames;return c(d,v,m,y),f.keywords&&(0,r.default)(d),d};a.get=(d,f="full")=>{const y=(f==="fast"?n.fastFormats:n.fullFormats)[d];if(!y)throw new Error(`Unknown format "${d}"`);return y};function c(d,f,m,y){var v,_;(v=(_=d.opts.code).formats)!==null&&v!==void 0||(_.formats=(0,s._)`require("ajv-formats/dist/formats").${y}`);for(const E of f)d.addFormat(E,m[E])}t.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a})(G2,G2.exports);var ote=G2.exports;const ate=Lh(ote);function lte(){const t=new ZQ({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return ate(t),t}class ute{constructor(e){this._ajv=e??lte()}getValidator(e){const n="$id"in e&&typeof e.$id=="string"?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return r=>n(r)?{valid:!0,data:r,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(n.errors)}}}class cte{constructor(e){this._client=e}async*callToolStream(e,n=Py,r){const s=this._client,i={...r,task:(r==null?void 0:r.task)??(s.isToolTask(e.name)?{}:void 0)},o=s.requestStream({method:"tools/call",params:e},n,i),a=s.getToolOutputValidator(e.name);for await(const c of o){if(c.type==="result"&&a){const d=c.result;if(!d.structuredContent&&!d.isError){yield{type:"error",error:new Le(Ze.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)};return}if(d.structuredContent)try{const f=a(d.structuredContent);if(!f.valid){yield{type:"error",error:new Le(Ze.InvalidParams,`Structured content does not match the tool's output schema: ${f.errorMessage}`)};return}}catch(f){if(f instanceof Le){yield{type:"error",error:f};return}yield{type:"error",error:new Le(Ze.InvalidParams,`Failed to validate structured content: ${f instanceof Error?f.message:String(f)}`)};return}}yield c}}async getTask(e,n){return this._client.getTask({taskId:e},n)}async getTaskResult(e,n,r){return this._client.getTaskResult({taskId:e},n,r)}async listTasks(e,n){return this._client.listTasks(e?{cursor:e}:void 0,n)}async cancelTask(e,n){return this._client.cancelTask({taskId:e},n)}requestStream(e,n,r){return this._client.requestStream(e,n,r)}}function dte(t,e,n){var r;if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"tools/call":if(!((r=t.tools)!=null&&r.call))throw new Error(`${n} does not support task creation for tools/call (required for ${e})`);break}}function fte(t,e,n){var r,s;if(!t)throw new Error(`${n} does not support task creation (required for ${e})`);switch(e){case"sampling/createMessage":if(!((r=t.sampling)!=null&&r.createMessage))throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${e})`);break;case"elicitation/create":if(!((s=t.elicitation)!=null&&s.create))throw new Error(`${n} does not support task creation for elicitation/create (required for ${e})`);break}}function Eg(t,e){if(!(!t||e===null||typeof e!="object")){if(t.type==="object"&&t.properties&&typeof t.properties=="object"){const n=e,r=t.properties;for(const s of Object.keys(r)){const i=r[s];n[s]===void 0&&Object.prototype.hasOwnProperty.call(i,"default")&&(n[s]=i.default),n[s]!==void 0&&Eg(i,n[s])}}if(Array.isArray(t.anyOf))for(const n of t.anyOf)typeof n!="boolean"&&Eg(n,e);if(Array.isArray(t.oneOf))for(const n of t.oneOf)typeof n!="boolean"&&Eg(n,e)}}function hte(t){if(!t)return{supportsFormMode:!1,supportsUrlMode:!1};const e=t.form!==void 0,n=t.url!==void 0;return{supportsFormMode:e||!e&&!n,supportsUrlMode:n}}class pte extends iB{constructor(e,n){super(n),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=(n==null?void 0:n.capabilities)??{},this._jsonSchemaValidator=(n==null?void 0:n.jsonSchemaValidator)??new ute,n!=null&&n.listChanged&&(this._pendingListChangedConfig=n.listChanged)}_setupListChangedHandlers(e){var n,r,s,i,o,a;e.tools&&((r=(n=this._serverCapabilities)==null?void 0:n.tools)!=null&&r.listChanged)&&this._setupListChangedHandler("tools",jN,e.tools,async()=>(await this.listTools()).tools),e.prompts&&((i=(s=this._serverCapabilities)==null?void 0:s.prompts)!=null&&i.listChanged)&&this._setupListChangedHandler("prompts",ON,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&((a=(o=this._serverCapabilities)==null?void 0:o.resources)!=null&&a.listChanged)&&this._setupListChangedHandler("resources",xN,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new cte(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=oB(this._capabilities,e)}setRequestHandler(e,n){var a;const r=pN(e),s=r==null?void 0:r.method;if(!s)throw new Error("Schema is missing a method literal");let i;if(ky(s)){const c=s,d=(a=c._zod)==null?void 0:a.def;i=(d==null?void 0:d.value)??c.value}else{const c=s,d=c._def;i=(d==null?void 0:d.value)??c.value}if(typeof i!="string")throw new Error("Schema method literal must be a string");const o=i;if(o==="elicitation/create"){const c=async(d,f)=>{var g,C;const m=pa(Bf,d);if(!m.success){const $=m.error instanceof Error?m.error.message:String(m.error);throw new Le(Ze.InvalidParams,`Invalid elicitation request: ${$}`)}const{params:y}=m.data;y.mode=y.mode??"form";const{supportsFormMode:v,supportsUrlMode:_}=hte(this._capabilities.elicitation);if(y.mode==="form"&&!v)throw new Le(Ze.InvalidParams,"Client does not support form-mode elicitation requests");if(y.mode==="url"&&!_)throw new Le(Ze.InvalidParams,"Client does not support URL-mode elicitation requests");const E=await Promise.resolve(n(d,f));if(y.task){const $=pa(xh,E);if(!$.success){const N=$.error instanceof Error?$.error.message:String($.error);throw new Le(Ze.InvalidParams,`Invalid task creation result: ${N}`)}return $.data}const k=pa(FN,E);if(!k.success){const $=k.error instanceof Error?k.error.message:String(k.error);throw new Le(Ze.InvalidParams,`Invalid elicitation result: ${$}`)}const p=k.data,w=y.mode==="form"?y.requestedSchema:void 0;if(y.mode==="form"&&p.action==="accept"&&p.content&&w&&(C=(g=this._capabilities.elicitation)==null?void 0:g.form)!=null&&C.applyDefaults)try{Eg(w,p.content)}catch{}return p};return super.setRequestHandler(e,c)}if(o==="sampling/createMessage"){const c=async(d,f)=>{const m=pa(qf,d);if(!m.success){const p=m.error instanceof Error?m.error.message:String(m.error);throw new Le(Ze.InvalidParams,`Invalid sampling request: ${p}`)}const{params:y}=m.data,v=await Promise.resolve(n(d,f));if(y.task){const p=pa(xh,v);if(!p.success){const w=p.error instanceof Error?p.error.message:String(p.error);throw new Le(Ze.InvalidParams,`Invalid task creation result: ${w}`)}return p.data}const E=y.tools||y.toolChoice?DN:zN,k=pa(E,v);if(!k.success){const p=k.error instanceof Error?k.error.message:String(k.error);throw new Le(Ze.InvalidParams,`Invalid sampling result: ${p}`)}return k.data};return super.setRequestHandler(e,c)}return super.setRequestHandler(e,n)}assertCapability(e,n){var r;if(!((r=this._serverCapabilities)!=null&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{const r=await this.request({method:"initialize",params:{protocolVersion:by,capabilities:this._capabilities,clientInfo:this._clientInfo}},wN,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!PH.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,s,i,o;switch(e){case"logging/setLevel":if(!((n=this._serverCapabilities)!=null&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!((r=this._serverCapabilities)!=null&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!((s=this._serverCapabilities)!=null&&s.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!((i=this._serverCapabilities)!=null&&i.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!((o=this._serverCapabilities)!=null&&o.completions))throw new Error(`Server does not support completions (required for ${e})`);break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!((n=this._capabilities.roots)!=null&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break}}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${e})`);break}}assertTaskCapability(e){var n,r;dte((r=(n=this._serverCapabilities)==null?void 0:n.tasks)==null?void 0:r.requests,e,"Server")}assertTaskHandlerCapability(e){var n;this._capabilities&&fte((n=this._capabilities.tasks)==null?void 0:n.requests,e,"Client")}async ping(e){return this.request({method:"ping"},vc,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},LN,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},vc,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},RN,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},NN,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},PN,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},$N,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},TN,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},vc,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},vc,n)}async callTool(e,n=Py,r){if(this.isToolTaskRequired(e.name))throw new Le(Ze.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const s=await this.request({method:"tools/call",params:e},n,r),i=this.getToolOutputValidator(e.name);if(i){if(!s.structuredContent&&!s.isError)throw new Le(Ze.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{const o=i(s.structuredContent);if(!o.valid)throw new Le(Ze.InvalidParams,`Structured content does not match the tool's output schema: ${o.errorMessage}`)}catch(o){throw o instanceof Le?o:new Le(Ze.InvalidParams,`Failed to validate structured content: ${o instanceof Error?o.message:String(o)}`)}}return s}isToolTask(e){var n,r,s,i;return(i=(s=(r=(n=this._serverCapabilities)==null?void 0:n.tasks)==null?void 0:r.requests)==null?void 0:s.tools)!=null&&i.call?this._cachedKnownTaskTools.has(e):!1}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){var n;this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const r of e){if(r.outputSchema){const i=this._jsonSchemaValidator.getValidator(r.outputSchema);this._cachedToolOutputValidators.set(r.name,i)}const s=(n=r.execution)==null?void 0:n.taskSupport;(s==="required"||s==="optional")&&this._cachedKnownTaskTools.add(r.name),s==="required"&&this._cachedRequiredTaskTools.add(r.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,n){const r=await this.request({method:"tools/list",params:e},AN,n);return this.cacheToolMetadata(r.tools),r}_setupListChangedHandler(e,n,r,s){const i=wq.safeParse(r);if(!i.success)throw new Error(`Invalid ${e} listChanged options: ${i.error.message}`);if(typeof r.onChanged!="function")throw new Error(`Invalid ${e} listChanged options: onChanged must be a function`);const{autoRefresh:o,debounceMs:a}=i.data,{onChanged:c}=r,d=async()=>{if(!o){c(null,null);return}try{const m=await s();c(null,m)}catch(m){const y=m instanceof Error?m:new Error(String(m));c(y,null)}},f=()=>{if(a){const m=this._listChangedDebounceTimers.get(e);m&&clearTimeout(m);const y=setTimeout(d,a);this._listChangedDebounceTimers.set(e,y)}else d()};this.setNotificationHandler(n,f)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}class s9 extends Error{constructor(e,n){super(e),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function z1(t){}function T7(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=z1,onError:n=z1,onRetry:r=z1,onComment:s}=t;let i="",o=!0,a,c="",d="";function f(E){const k=o?E.replace(/^\xEF\xBB\xBF/,""):E,[p,w]=mte(`${i}${k}`);for(const g of p)m(g);i=w,o=!1}function m(E){if(E===""){v();return}if(E.startsWith(":")){s&&s(E.slice(E.startsWith(": ")?2:1));return}const k=E.indexOf(":");if(k!==-1){const p=E.slice(0,k),w=E[k+1]===" "?2:1,g=E.slice(k+w);y(p,g,E);return}y(E,"",E)}function y(E,k,p){switch(E){case"event":d=k;break;case"data":c=`${c}${k}
`;break;case"id":a=k.includes("\0")?void 0:k;break;case"retry":/^\d+$/.test(k)?r(parseInt(k,10)):n(new s9(`Invalid \`retry\` value: "${k}"`,{type:"invalid-retry",value:k,line:p}));break;default:n(new s9(`Unknown field "${E.length>20?`${E.slice(0,20)}`:E}"`,{type:"unknown-field",field:E,value:k,line:p}));break}}function v(){c.length>0&&e({id:a,event:d||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),a=void 0,c="",d=""}function _(E={}){i&&E.consume&&m(i),o=!0,a=void 0,c="",d="",i=""}return{feed:f,reset:_}}function mte(t){const e=[];let n="",r=0;for(;r<t.length;){const s=t.indexOf("\r",r),i=t.indexOf(`
`,r);let o=-1;if(s!==-1&&i!==-1?o=Math.min(s,i):s!==-1?s===t.length-1?o=-1:o=s:i!==-1&&(o=i),o===-1){n=t.slice(r);break}else{const a=t.slice(r,o);e.push(a),r=o+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,n]}class i9 extends Event{constructor(e,n){var r,s;super(e),this.code=(r=n==null?void 0:n.code)!=null?r:void 0,this.message=(s=n==null?void 0:n.message)!=null?s:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return r(o9(this),n)}[Symbol.for("Deno.customInspect")](e,n){return e(o9(this),n)}}function gte(t){const e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}function X2(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(X2).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${X2(t.cause)}`:t.message:`${t}`}function o9(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}var x7=t=>{throw TypeError(t)},z3=(t,e,n)=>e.has(t)||x7("Cannot "+n),ut=(t,e,n)=>(z3(t,e,"read from private field"),n?n.call(t):e.get(t)),An=(t,e,n)=>e.has(t)?x7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Xt=(t,e,n,r)=>(z3(t,e,"write to private field"),e.set(t,n),n),yo=(t,e,n)=>(z3(t,e,"access private method"),n),Yr,Nl,tc,Cg,N0,rh,_c,sh,ya,nc,Rc,rc,Nf,fi,J2,eS,tS,a9,nS,rS,Rf,sS,iS;class Pg extends EventTarget{constructor(e,n){var r,s;super(),An(this,fi),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,An(this,Yr),An(this,Nl),An(this,tc),An(this,Cg),An(this,N0),An(this,rh),An(this,_c),An(this,sh,null),An(this,ya),An(this,nc),An(this,Rc,null),An(this,rc,null),An(this,Nf,null),An(this,eS,async i=>{var o;ut(this,nc).reset();const{body:a,redirected:c,status:d,headers:f}=i;if(d===204){yo(this,fi,Rf).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?Xt(this,tc,new URL(i.url)):Xt(this,tc,void 0),d!==200){yo(this,fi,Rf).call(this,`Non-200 status code (${d})`,d);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){yo(this,fi,Rf).call(this,'Invalid content type, expected "text/event-stream"',d);return}if(ut(this,Yr)===this.CLOSED)return;Xt(this,Yr,this.OPEN);const m=new Event("open");if((o=ut(this,Nf))==null||o.call(this,m),this.dispatchEvent(m),typeof a!="object"||!a||!("getReader"in a)){yo(this,fi,Rf).call(this,"Invalid response body, expected a web ReadableStream",d),this.close();return}const y=new TextDecoder,v=a.getReader();let _=!0;do{const{done:E,value:k}=await v.read();k&&ut(this,nc).feed(y.decode(k,{stream:!E})),E&&(_=!1,ut(this,nc).reset(),yo(this,fi,sS).call(this))}while(_)}),An(this,tS,i=>{Xt(this,ya,void 0),!(i.name==="AbortError"||i.type==="aborted")&&yo(this,fi,sS).call(this,X2(i))}),An(this,nS,i=>{typeof i.id=="string"&&Xt(this,sh,i.id);const o=new MessageEvent(i.event||"message",{data:i.data,origin:ut(this,tc)?ut(this,tc).origin:ut(this,Nl).origin,lastEventId:i.id||""});ut(this,rc)&&(!i.event||i.event==="message")&&ut(this,rc).call(this,o),this.dispatchEvent(o)}),An(this,rS,i=>{Xt(this,rh,i)}),An(this,iS,()=>{Xt(this,_c,void 0),ut(this,Yr)===this.CONNECTING&&yo(this,fi,J2).call(this)});try{if(e instanceof URL)Xt(this,Nl,e);else if(typeof e=="string")Xt(this,Nl,new URL(e,yte()));else throw new Error("Invalid URL")}catch{throw gte("An invalid or illegal string was specified")}Xt(this,nc,T7({onEvent:ut(this,nS),onRetry:ut(this,rS)})),Xt(this,Yr,this.CONNECTING),Xt(this,rh,3e3),Xt(this,N0,(r=n==null?void 0:n.fetch)!=null?r:globalThis.fetch),Xt(this,Cg,(s=n==null?void 0:n.withCredentials)!=null?s:!1),yo(this,fi,J2).call(this)}get readyState(){return ut(this,Yr)}get url(){return ut(this,Nl).href}get withCredentials(){return ut(this,Cg)}get onerror(){return ut(this,Rc)}set onerror(e){Xt(this,Rc,e)}get onmessage(){return ut(this,rc)}set onmessage(e){Xt(this,rc,e)}get onopen(){return ut(this,Nf)}set onopen(e){Xt(this,Nf,e)}addEventListener(e,n,r){const s=n;super.addEventListener(e,s,r)}removeEventListener(e,n,r){const s=n;super.removeEventListener(e,s,r)}close(){ut(this,_c)&&clearTimeout(ut(this,_c)),ut(this,Yr)!==this.CLOSED&&(ut(this,ya)&&ut(this,ya).abort(),Xt(this,Yr,this.CLOSED),Xt(this,ya,void 0))}}Yr=new WeakMap,Nl=new WeakMap,tc=new WeakMap,Cg=new WeakMap,N0=new WeakMap,rh=new WeakMap,_c=new WeakMap,sh=new WeakMap,ya=new WeakMap,nc=new WeakMap,Rc=new WeakMap,rc=new WeakMap,Nf=new WeakMap,fi=new WeakSet,J2=function(){Xt(this,Yr,this.CONNECTING),Xt(this,ya,new AbortController),ut(this,N0)(ut(this,Nl),yo(this,fi,a9).call(this)).then(ut(this,eS)).catch(ut(this,tS))},eS=new WeakMap,tS=new WeakMap,a9=function(){var t;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ut(this,sh)?{"Last-Event-ID":ut(this,sh)}:void 0},cache:"no-store",signal:(t=ut(this,ya))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},nS=new WeakMap,rS=new WeakMap,Rf=function(t,e){var n;ut(this,Yr)!==this.CLOSED&&Xt(this,Yr,this.CLOSED);const r=new i9("error",{code:e,message:t});(n=ut(this,Rc))==null||n.call(this,r),this.dispatchEvent(r)},sS=function(t,e){var n;if(ut(this,Yr)===this.CLOSED)return;Xt(this,Yr,this.CONNECTING);const r=new i9("error",{code:e,message:t});(n=ut(this,Rc))==null||n.call(this,r),this.dispatchEvent(r),Xt(this,_c,setTimeout(ut(this,iS),ut(this,rh)))},iS=new WeakMap,Pg.CONNECTING=0,Pg.OPEN=1,Pg.CLOSED=2;function yte(){const t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}function R0(t){return t?t instanceof Headers?Object.fromEntries(t.entries()):Array.isArray(t)?Object.fromEntries(t):{...t}:{}}function N7(t=fetch,e){return e?async(n,r)=>{const s={...e,...r,headers:r!=null&&r.headers?{...R0(e.headers),...R0(r.headers)}:e.headers};return t(n,s)}:t}let D3;D3=globalThis.crypto;async function vte(t){return(await D3).getRandomValues(new Uint8Array(t))}async function _te(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n=Math.pow(2,8)-Math.pow(2,8)%e.length;let r="";for(;r.length<t;){const s=await vte(t-r.length);for(const i of s)i<n&&(r+=e[i%e.length])}return r}async function wte(t){return await _te(t)}async function Ste(t){const e=await(await D3).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function kte(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;const e=await wte(t),n=await Ste(e);return{code_verifier:e,code_challenge:n}}const ir=xL().superRefine((t,e)=>{if(!URL.canParse(t))return e.addIssue({code:wU.custom,message:"URL must be parseable",fatal:!0}),jz}).refine(t=>{const e=new URL(t);return e.protocol!=="javascript:"&&e.protocol!=="data:"&&e.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),bte=Qn({resource:K().url(),authorization_servers:ye(ir).optional(),jwks_uri:K().url().optional(),scopes_supported:ye(K()).optional(),bearer_methods_supported:ye(K()).optional(),resource_signing_alg_values_supported:ye(K()).optional(),resource_name:K().optional(),resource_documentation:K().optional(),resource_policy_uri:K().url().optional(),resource_tos_uri:K().url().optional(),tls_client_certificate_bound_access_tokens:Ut().optional(),authorization_details_types_supported:ye(K()).optional(),dpop_signing_alg_values_supported:ye(K()).optional(),dpop_bound_access_tokens_required:Ut().optional()}),R7=Qn({issuer:K(),authorization_endpoint:ir,token_endpoint:ir,registration_endpoint:ir.optional(),scopes_supported:ye(K()).optional(),response_types_supported:ye(K()),response_modes_supported:ye(K()).optional(),grant_types_supported:ye(K()).optional(),token_endpoint_auth_methods_supported:ye(K()).optional(),token_endpoint_auth_signing_alg_values_supported:ye(K()).optional(),service_documentation:ir.optional(),revocation_endpoint:ir.optional(),revocation_endpoint_auth_methods_supported:ye(K()).optional(),revocation_endpoint_auth_signing_alg_values_supported:ye(K()).optional(),introspection_endpoint:K().optional(),introspection_endpoint_auth_methods_supported:ye(K()).optional(),introspection_endpoint_auth_signing_alg_values_supported:ye(K()).optional(),code_challenge_methods_supported:ye(K()).optional(),client_id_metadata_document_supported:Ut().optional()}),Ete=Qn({issuer:K(),authorization_endpoint:ir,token_endpoint:ir,userinfo_endpoint:ir.optional(),jwks_uri:ir,registration_endpoint:ir.optional(),scopes_supported:ye(K()).optional(),response_types_supported:ye(K()),response_modes_supported:ye(K()).optional(),grant_types_supported:ye(K()).optional(),acr_values_supported:ye(K()).optional(),subject_types_supported:ye(K()),id_token_signing_alg_values_supported:ye(K()),id_token_encryption_alg_values_supported:ye(K()).optional(),id_token_encryption_enc_values_supported:ye(K()).optional(),userinfo_signing_alg_values_supported:ye(K()).optional(),userinfo_encryption_alg_values_supported:ye(K()).optional(),userinfo_encryption_enc_values_supported:ye(K()).optional(),request_object_signing_alg_values_supported:ye(K()).optional(),request_object_encryption_alg_values_supported:ye(K()).optional(),request_object_encryption_enc_values_supported:ye(K()).optional(),token_endpoint_auth_methods_supported:ye(K()).optional(),token_endpoint_auth_signing_alg_values_supported:ye(K()).optional(),display_values_supported:ye(K()).optional(),claim_types_supported:ye(K()).optional(),claims_supported:ye(K()).optional(),service_documentation:K().optional(),claims_locales_supported:ye(K()).optional(),ui_locales_supported:ye(K()).optional(),claims_parameter_supported:Ut().optional(),request_parameter_supported:Ut().optional(),request_uri_parameter_supported:Ut().optional(),require_request_uri_registration:Ut().optional(),op_policy_uri:ir.optional(),op_tos_uri:ir.optional(),client_id_metadata_document_supported:Ut().optional()}),Cte=_e({...Ete.shape,...R7.pick({code_challenge_methods_supported:!0}).shape}),Pte=_e({access_token:K(),id_token:K().optional(),token_type:K(),expires_in:SU().optional(),scope:K().optional(),refresh_token:K().optional()}).strip(),$te=_e({error:K(),error_description:K().optional(),error_uri:K().optional()}),l9=ir.optional().or(ke("").transform(()=>{})),Tte=_e({redirect_uris:ye(ir),token_endpoint_auth_method:K().optional(),grant_types:ye(K()).optional(),response_types:ye(K()).optional(),client_name:K().optional(),client_uri:ir.optional(),logo_uri:l9,scope:K().optional(),contacts:ye(K()).optional(),tos_uri:l9,policy_uri:K().optional(),jwks_uri:ir.optional(),jwks:KL().optional(),software_id:K().optional(),software_version:K().optional(),software_statement:K().optional()}).strip(),xte=_e({client_id:K(),client_secret:K().optional(),client_id_issued_at:Pt().optional(),client_secret_expires_at:Pt().optional()}).strip(),Nte=Tte.merge(xte);_e({error:K(),error_description:K().optional()}).strip();_e({token:K(),token_type_hint:K().optional()}).strip();function Rte(t){const e=typeof t=="string"?new URL(t):new URL(t.href);return e.hash="",e}function Ote({requestedResource:t,configuredResource:e}){const n=typeof t=="string"?new URL(t):new URL(t.href),r=typeof e=="string"?new URL(e):new URL(e.href);if(n.origin!==r.origin||n.pathname.length<r.pathname.length)return!1;const s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",i=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return s.startsWith(i)}class Xn extends Error{constructor(e,n){super(e),this.errorUri=n,this.name=this.constructor.name}toResponseObject(){const e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class oS extends Xn{}oS.errorCode="invalid_request";class O0 extends Xn{}O0.errorCode="invalid_client";class I0 extends Xn{}I0.errorCode="invalid_grant";class A0 extends Xn{}A0.errorCode="unauthorized_client";class aS extends Xn{}aS.errorCode="unsupported_grant_type";class lS extends Xn{}lS.errorCode="invalid_scope";class uS extends Xn{}uS.errorCode="access_denied";class ad extends Xn{}ad.errorCode="server_error";class cS extends Xn{}cS.errorCode="temporarily_unavailable";class dS extends Xn{}dS.errorCode="unsupported_response_type";class fS extends Xn{}fS.errorCode="unsupported_token_type";class hS extends Xn{}hS.errorCode="invalid_token";class pS extends Xn{}pS.errorCode="method_not_allowed";class mS extends Xn{}mS.errorCode="too_many_requests";class j0 extends Xn{}j0.errorCode="invalid_client_metadata";class gS extends Xn{}gS.errorCode="insufficient_scope";class yS extends Xn{}yS.errorCode="invalid_target";const Ite={[oS.errorCode]:oS,[O0.errorCode]:O0,[I0.errorCode]:I0,[A0.errorCode]:A0,[aS.errorCode]:aS,[lS.errorCode]:lS,[uS.errorCode]:uS,[ad.errorCode]:ad,[cS.errorCode]:cS,[dS.errorCode]:dS,[fS.errorCode]:fS,[hS.errorCode]:hS,[pS.errorCode]:pS,[mS.errorCode]:mS,[j0.errorCode]:j0,[gS.errorCode]:gS,[yS.errorCode]:yS};class _i extends Error{constructor(e){super(e??"Unauthorized")}}function Ate(t){return["client_secret_basic","client_secret_post","none"].includes(t)}const D1="code",F1="S256";function jte(t,e){const n=t.client_secret!==void 0;return e.length===0?n?"client_secret_post":"none":"token_endpoint_auth_method"in t&&t.token_endpoint_auth_method&&Ate(t.token_endpoint_auth_method)&&e.includes(t.token_endpoint_auth_method)?t.token_endpoint_auth_method:n&&e.includes("client_secret_basic")?"client_secret_basic":n&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":n?"client_secret_post":"none"}function Mte(t,e,n,r){const{client_id:s,client_secret:i}=e;switch(t){case"client_secret_basic":zte(s,i,n);return;case"client_secret_post":Dte(s,i,r);return;case"none":Fte(s,r);return;default:throw new Error(`Unsupported client authentication method: ${t}`)}}function zte(t,e,n){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");const r=btoa(`${t}:${e}`);n.set("Authorization",`Basic ${r}`)}function Dte(t,e,n){n.set("client_id",t),e&&n.set("client_secret",e)}function Fte(t,e){e.set("client_id",t)}async function O7(t){const e=t instanceof Response?t.status:void 0,n=t instanceof Response?await t.text():t;try{const r=$te.parse(JSON.parse(n)),{error:s,error_description:i,error_uri:o}=r,a=Ite[s]||ad;return new a(i||"",o)}catch(r){const s=`${e?`HTTP ${e}: `:""}Invalid OAuth error response: ${r}. Raw body: ${n}`;return new ad(s)}}async function jl(t,e){var n,r;try{return await L1(t,e)}catch(s){if(s instanceof O0||s instanceof A0)return await((n=t.invalidateCredentials)==null?void 0:n.call(t,"all")),await L1(t,e);if(s instanceof I0)return await((r=t.invalidateCredentials)==null?void 0:r.call(t,"tokens")),await L1(t,e);throw s}}async function L1(t,{serverUrl:e,authorizationCode:n,scope:r,resourceMetadataUrl:s,fetchFn:i}){var k,p;let o,a;try{o=await Vte(e,{resourceMetadataUrl:s},i),o.authorization_servers&&o.authorization_servers.length>0&&(a=o.authorization_servers[0])}catch{}a||(a=new URL("/",e));const c=await Ute(e,t,o),d=await Wte(a,{fetchFn:i});let f=await Promise.resolve(t.clientInformation());if(!f){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");const w=(d==null?void 0:d.client_id_metadata_document_supported)===!0,g=t.clientMetadataUrl;if(g&&!Lte(g))throw new j0(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${g}`);if(w&&g)f={client_id:g},await((k=t.saveClientInformation)==null?void 0:k.call(t,f));else{if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const $=await Xte(a,{metadata:d,clientMetadata:t.clientMetadata,fetchFn:i});await t.saveClientInformation($),f=$}}const m=!t.redirectUrl;if(n!==void 0||m){const w=await Yte(t,a,{metadata:d,resource:c,authorizationCode:n,fetchFn:i});return await t.saveTokens(w),"AUTHORIZED"}const y=await t.tokens();if(y!=null&&y.refresh_token)try{const w=await Qte(a,{metadata:d,clientInformation:f,refreshToken:y.refresh_token,resource:c,addClientAuthentication:t.addClientAuthentication,fetchFn:i});return await t.saveTokens(w),"AUTHORIZED"}catch(w){if(!(!(w instanceof Xn)||w instanceof ad))throw w}const v=t.state?await t.state():void 0,{authorizationUrl:_,codeVerifier:E}=await Zte(a,{metadata:d,clientInformation:f,state:v,redirectUrl:t.redirectUrl,scope:r||((p=o==null?void 0:o.scopes_supported)==null?void 0:p.join(" "))||t.clientMetadata.scope,resource:c});return await t.saveCodeVerifier(E),await t.redirectToAuthorization(_),"REDIRECT"}function Lte(t){if(!t)return!1;try{const e=new URL(t);return e.protocol==="https:"&&e.pathname!=="/"}catch{return!1}}async function Ute(t,e,n){const r=Rte(t);if(e.validateResourceURL)return await e.validateResourceURL(r,n==null?void 0:n.resource);if(n){if(!Ote({requestedResource:r,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${r} (or origin)`);return new URL(n.resource)}}function M0(t){const e=t.headers.get("WWW-Authenticate");if(!e)return{};const[n,r]=e.split(" ");if(n.toLowerCase()!=="bearer"||!r)return{};const s=U1(t,"resource_metadata")||void 0;let i;if(s)try{i=new URL(s)}catch{}const o=U1(t,"scope")||void 0,a=U1(t,"error")||void 0;return{resourceMetadataUrl:i,scope:o,error:a}}function U1(t,e){const n=t.headers.get("WWW-Authenticate");if(!n)return null;const r=new RegExp(`${e}=(?:"([^"]+)"|([^\\s,]+))`),s=n.match(r);return s?s[1]||s[2]:null}async function Vte(t,e,n=fetch){var s,i;const r=await qte(t,"oauth-protected-resource",n,{protocolVersion:e==null?void 0:e.protocolVersion,metadataUrl:e==null?void 0:e.resourceMetadataUrl});if(!r||r.status===404)throw await((s=r==null?void 0:r.body)==null?void 0:s.cancel()),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!r.ok)throw await((i=r.body)==null?void 0:i.cancel()),new Error(`HTTP ${r.status} trying to load well-known OAuth protected resource metadata.`);return bte.parse(await r.json())}async function F3(t,e,n=fetch){try{return await n(t,{headers:e})}catch(r){if(r instanceof TypeError)return e?F3(t,void 0,n):void 0;throw r}}function Gte(t,e="",n={}){return e.endsWith("/")&&(e=e.slice(0,-1)),n.prependPathname?`${e}/.well-known/${t}`:`/.well-known/${t}${e}`}async function u9(t,e,n=fetch){return await F3(t,{"MCP-Protocol-Version":e},n)}function Hte(t,e){return!t||t.status>=400&&t.status<500&&e!=="/"}async function qte(t,e,n,r){const s=new URL(t),i=(r==null?void 0:r.protocolVersion)??by;let o;if(r!=null&&r.metadataUrl)o=new URL(r.metadataUrl);else{const c=Gte(e,s.pathname);o=new URL(c,(r==null?void 0:r.metadataServerUrl)??s),o.search=s.search}let a=await u9(o,i,n);if(!(r!=null&&r.metadataUrl)&&Hte(a,s.pathname)){const c=new URL(`/.well-known/${e}`,s);a=await u9(c,i,n)}return a}function Bte(t){const e=typeof t=="string"?new URL(t):t,n=e.pathname!=="/",r=[];if(!n)return r.push({url:new URL("/.well-known/oauth-authorization-server",e.origin),type:"oauth"}),r.push({url:new URL("/.well-known/openid-configuration",e.origin),type:"oidc"}),r;let s=e.pathname;return s.endsWith("/")&&(s=s.slice(0,-1)),r.push({url:new URL(`/.well-known/oauth-authorization-server${s}`,e.origin),type:"oauth"}),r.push({url:new URL(`/.well-known/openid-configuration${s}`,e.origin),type:"oidc"}),r.push({url:new URL(`${s}/.well-known/openid-configuration`,e.origin),type:"oidc"}),r}async function Wte(t,{fetchFn:e=fetch,protocolVersion:n=by}={}){var i;const r={"MCP-Protocol-Version":n,Accept:"application/json"},s=Bte(t);for(const{url:o,type:a}of s){const c=await F3(o,r,e);if(c){if(!c.ok){if(await((i=c.body)==null?void 0:i.cancel()),c.status>=400&&c.status<500)continue;throw new Error(`HTTP ${c.status} trying to load ${a==="oauth"?"OAuth":"OpenID provider"} metadata from ${o}`)}return a==="oauth"?R7.parse(await c.json()):Cte.parse(await c.json())}}}async function Zte(t,{metadata:e,clientInformation:n,redirectUrl:r,scope:s,state:i,resource:o}){let a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(D1))throw new Error(`Incompatible auth server: does not support response type ${D1}`);if(e.code_challenge_methods_supported&&!e.code_challenge_methods_supported.includes(F1))throw new Error(`Incompatible auth server: does not support code challenge method ${F1}`)}else a=new URL("/authorize",t);const c=await kte(),d=c.code_verifier,f=c.code_challenge;return a.searchParams.set("response_type",D1),a.searchParams.set("client_id",n.client_id),a.searchParams.set("code_challenge",f),a.searchParams.set("code_challenge_method",F1),a.searchParams.set("redirect_uri",String(r)),i&&a.searchParams.set("state",i),s&&a.searchParams.set("scope",s),s!=null&&s.includes("offline_access")&&a.searchParams.append("prompt","consent"),o&&a.searchParams.set("resource",o.href),{authorizationUrl:a,codeVerifier:d}}function Kte(t,e,n){return new URLSearchParams({grant_type:"authorization_code",code:t,code_verifier:e,redirect_uri:String(n)})}async function I7(t,{metadata:e,tokenRequestParams:n,clientInformation:r,addClientAuthentication:s,resource:i,fetchFn:o}){const a=e!=null&&e.token_endpoint?new URL(e.token_endpoint):new URL("/token",t),c=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(i&&n.set("resource",i.href),s)await s(c,n,a,e);else if(r){const f=(e==null?void 0:e.token_endpoint_auth_methods_supported)??[],m=jte(r,f);Mte(m,r,c,n)}const d=await(o??fetch)(a,{method:"POST",headers:c,body:n});if(!d.ok)throw await O7(d);return Pte.parse(await d.json())}async function Qte(t,{metadata:e,clientInformation:n,refreshToken:r,resource:s,addClientAuthentication:i,fetchFn:o}){const a=new URLSearchParams({grant_type:"refresh_token",refresh_token:r}),c=await I7(t,{metadata:e,tokenRequestParams:a,clientInformation:n,addClientAuthentication:i,resource:s,fetchFn:o});return{refresh_token:r,...c}}async function Yte(t,e,{metadata:n,resource:r,authorizationCode:s,fetchFn:i}={}){const o=t.clientMetadata.scope;let a;if(t.prepareTokenRequest&&(a=await t.prepareTokenRequest(o)),!a){if(!s)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!t.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");const d=await t.codeVerifier();a=Kte(s,d,t.redirectUrl)}const c=await t.clientInformation();return I7(e,{metadata:n,tokenRequestParams:a,clientInformation:c??void 0,addClientAuthentication:t.addClientAuthentication,resource:r,fetchFn:i})}async function Xte(t,{metadata:e,clientMetadata:n,fetchFn:r}){let s;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(e.registration_endpoint)}else s=new URL("/register",t);const i=await(r??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw await O7(i);return Nte.parse(await i.json())}class Jte extends Error{constructor(e,n,r){super(`SSE error: ${n}`),this.code=e,this.event=r}}class ene{constructor(e,n){this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._eventSourceInit=n==null?void 0:n.eventSourceInit,this._requestInit=n==null?void 0:n.requestInit,this._authProvider=n==null?void 0:n.authProvider,this._fetch=n==null?void 0:n.fetch,this._fetchWithInit=N7(n==null?void 0:n.fetch,n==null?void 0:n.requestInit)}async _authThenStart(){var n;if(!this._authProvider)throw new _i("No auth provider");let e;try{e=await jl(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(r){throw(n=this.onerror)==null||n.call(this,r),r}if(e!=="AUTHORIZED")throw new _i;return await this._startOrAuth()}async _commonHeaders(){var r;const e={};if(this._authProvider){const s=await this._authProvider.tokens();s&&(e.Authorization=`Bearer ${s.access_token}`)}this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const n=R0((r=this._requestInit)==null?void 0:r.headers);return new Headers({...e,...n})}_startOrAuth(){var n;const e=((n=this==null?void 0:this._eventSourceInit)==null?void 0:n.fetch)??this._fetch??fetch;return new Promise((r,s)=>{this._eventSource=new Pg(this._url.href,{...this._eventSourceInit,fetch:async(i,o)=>{const a=await this._commonHeaders();a.set("Accept","text/event-stream");const c=await e(i,{...o,headers:a});if(c.status===401&&c.headers.has("www-authenticate")){const{resourceMetadataUrl:d,scope:f}=M0(c);this._resourceMetadataUrl=d,this._scope=f}return c}}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var a;if(i.code===401&&this._authProvider){this._authThenStart().then(r,s);return}const o=new Jte(i.code,i.message,i);s(o),(a=this.onerror)==null||a.call(this,o)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var a;const o=i;try{if(this._endpoint=new URL(o.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(c){s(c),(a=this.onerror)==null||a.call(this,c),this.close();return}r()}),this._eventSource.onmessage=i=>{var c,d;const o=i;let a;try{a=pg.parse(JSON.parse(o.data))}catch(f){(c=this.onerror)==null||c.call(this,f);return}(d=this.onmessage)==null||d.call(this,a)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new _i("No auth provider");if(await jl(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new _i("Failed to authorize")}async close(){var e,n,r;(e=this._abortController)==null||e.abort(),(n=this._eventSource)==null||n.close(),(r=this.onclose)==null||r.call(this)}async send(e){var n,r,s;if(!this._endpoint)throw new Error("Not connected");try{const i=await this._commonHeaders();i.set("content-type","application/json");const o={...this._requestInit,method:"POST",headers:i,body:JSON.stringify(e),signal:(n=this._abortController)==null?void 0:n.signal},a=await(this._fetch??fetch)(this._endpoint,o);if(!a.ok){const c=await a.text().catch(()=>null);if(a.status===401&&this._authProvider){const{resourceMetadataUrl:d,scope:f}=M0(a);if(this._resourceMetadataUrl=d,this._scope=f,await jl(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new _i;return this.send(e)}throw new Error(`Error POSTing to endpoint (HTTP ${a.status}): ${c}`)}await((r=a.body)==null?void 0:r.cancel())}catch(i){throw(s=this.onerror)==null||s.call(this,i),i}}setProtocolVersion(e){this._protocolVersion=e}}class tne extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let s;super({start(i){s=T7({onEvent:o=>{i.enqueue(o)},onError(o){e==="terminate"?i.error(o):typeof e=="function"&&e(o)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}}const nne={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class Hu extends Error{constructor(e,n){super(`Streamable HTTP error: ${n}`),this.code=e}}class rne{constructor(e,n){this._hasCompletedAuthFlow=!1,this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=n==null?void 0:n.requestInit,this._authProvider=n==null?void 0:n.authProvider,this._fetch=n==null?void 0:n.fetch,this._fetchWithInit=N7(n==null?void 0:n.fetch,n==null?void 0:n.requestInit),this._sessionId=n==null?void 0:n.sessionId,this._reconnectionOptions=(n==null?void 0:n.reconnectionOptions)??nne}async _authThenStart(){var n;if(!this._authProvider)throw new _i("No auth provider");let e;try{e=await jl(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(r){throw(n=this.onerror)==null||n.call(this,r),r}if(e!=="AUTHORIZED")throw new _i;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var r;const e={};if(this._authProvider){const s=await this._authProvider.tokens();s&&(e.Authorization=`Bearer ${s.access_token}`)}this._sessionId&&(e["mcp-session-id"]=this._sessionId),this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const n=R0((r=this._requestInit)==null?void 0:r.headers);return new Headers({...e,...n})}async _startOrAuthSse(e){var r,s,i;const{resumptionToken:n}=e;try{const o=await this._commonHeaders();o.set("Accept","text/event-stream"),n&&o.set("last-event-id",n);const a=await(this._fetch??fetch)(this._url,{method:"GET",headers:o,signal:(r=this._abortController)==null?void 0:r.signal});if(!a.ok){if(await((s=a.body)==null?void 0:s.cancel()),a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new Hu(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e,!0)}catch(o){throw(i=this.onerror)==null||i.call(this,o),o}}_getNextReconnectionDelay(e){if(this._serverRetryMs!==void 0)return this._serverRetryMs;const n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,s=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,e),s)}_scheduleReconnection(e,n=0){var i;const r=this._reconnectionOptions.maxRetries;if(n>=r){(i=this.onerror)==null||i.call(this,new Error(`Maximum reconnection attempts (${r}) exceeded.`));return}const s=this._getNextReconnectionDelay(n);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(e).catch(o=>{var a;(a=this.onerror)==null||a.call(this,new Error(`Failed to reconnect SSE stream: ${o instanceof Error?o.message:String(o)}`)),this._scheduleReconnection(e,n+1)})},s)}_handleSseStream(e,n,r){if(!e)return;const{onresumptiontoken:s,replayMessageId:i}=n;let o,a=!1,c=!1;(async()=>{var f,m,y,v;try{const _=e.pipeThrough(new TextDecoderStream).pipeThrough(new tne({onRetry:p=>{this._serverRetryMs=p}})).getReader();for(;;){const{value:p,done:w}=await _.read();if(w)break;if(p.id&&(o=p.id,a=!0,s==null||s(p.id)),!!p.data&&(!p.event||p.event==="message"))try{const g=pg.parse(JSON.parse(p.data));Pf(g)&&(c=!0,i!==void 0&&(g.id=i)),(f=this.onmessage)==null||f.call(this,g)}catch(g){(m=this.onerror)==null||m.call(this,g)}}(r||a)&&!c&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:o,onresumptiontoken:s,replayMessageId:i},0)}catch(_){if((y=this.onerror)==null||y.call(this,new Error(`SSE stream disconnected: ${_}`)),(r||a)&&!c&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:s,replayMessageId:i},0)}catch(p){(v=this.onerror)==null||v.call(this,new Error(`Failed to reconnect: ${p instanceof Error?p.message:String(p)}`))}}})()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new _i("No auth provider");if(await jl(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new _i("Failed to authorize")}async close(){var e,n;this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),(e=this._abortController)==null||e.abort(),(n=this.onclose)==null||n.call(this)}async send(e,n){var r,s,i,o,a,c;try{const{resumptionToken:d,onresumptiontoken:f}=n||{};if(d){this._startOrAuthSse({resumptionToken:d,replayMessageId:A2(e)?e.id:void 0}).catch(w=>{var g;return(g=this.onerror)==null?void 0:g.call(this,w)});return}const m=await this._commonHeaders();m.set("content-type","application/json"),m.set("accept","application/json, text/event-stream");const y={...this._requestInit,method:"POST",headers:m,body:JSON.stringify(e),signal:(r=this._abortController)==null?void 0:r.signal},v=await(this._fetch??fetch)(this._url,y),_=v.headers.get("mcp-session-id");if(_&&(this._sessionId=_),!v.ok){const w=await v.text().catch(()=>null);if(v.status===401&&this._authProvider){if(this._hasCompletedAuthFlow)throw new Hu(401,"Server returned 401 after successful authentication");const{resourceMetadataUrl:g,scope:C}=M0(v);if(this._resourceMetadataUrl=g,this._scope=C,await jl(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new _i;return this._hasCompletedAuthFlow=!0,this.send(e)}if(v.status===403&&this._authProvider){const{resourceMetadataUrl:g,scope:C,error:$}=M0(v);if($==="insufficient_scope"){const N=v.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===N)throw new Hu(403,"Server returned 403 after trying upscoping");if(C&&(this._scope=C),g&&(this._resourceMetadataUrl=g),this._lastUpscopingHeader=N??void 0,await jl(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch})!=="AUTHORIZED")throw new _i;return this.send(e)}}throw new Hu(v.status,`Error POSTing to endpoint: ${w}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,v.status===202){await((s=v.body)==null?void 0:s.cancel()),VH(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(w=>{var g;return(g=this.onerror)==null?void 0:g.call(this,w)});return}const k=(Array.isArray(e)?e:[e]).filter(w=>"method"in w&&"id"in w&&w.id!==void 0).length>0,p=v.headers.get("content-type");if(k)if(p!=null&&p.includes("text/event-stream"))this._handleSseStream(v.body,{onresumptiontoken:f},!1);else if(p!=null&&p.includes("application/json")){const w=await v.json(),g=Array.isArray(w)?w.map(C=>pg.parse(C)):[pg.parse(w)];for(const C of g)(i=this.onmessage)==null||i.call(this,C)}else throw await((o=v.body)==null?void 0:o.cancel()),new Hu(-1,`Unexpected content type: ${p}`);else await((a=v.body)==null?void 0:a.cancel())}catch(d){throw(c=this.onerror)==null||c.call(this,d),d}}get sessionId(){return this._sessionId}async terminateSession(){var e,n,r;if(this._sessionId)try{const s=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:s,signal:(e=this._abortController)==null?void 0:e.signal},o=await(this._fetch??fetch)(this._url,i);if(await((n=o.body)==null?void 0:n.cancel()),!o.ok&&o.status!==405)throw new Hu(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(s){throw(r=this.onerror)==null||r.call(this,s),s}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}async resumeStream(e,n){await this._startOrAuthSse({resumptionToken:e,onresumptiontoken:n==null?void 0:n.onresumptiontoken})}}class L3{constructor(e,n,r,s,i,o={}){Os(this,"client");Os(this,"transport");Os(this,"transportType");Os(this,"sessionId");Os(this,"endpoint");Os(this,"headers");Os(this,"authProvider");Os(this,"handlers");this.endpoint=e,this.headers=r??{},this.authProvider=s,this.transportType=n,this.handlers=o,this.transport=this.initializeTransport(i),this.client=this.initializeClient()}static async create(e,n=qa.HTTP,r,s,i,o={}){const a=new L3(e,n,r,s,i,o);return await a.client.connect(a.transport),"sessionId"in a.transport&&(a.sessionId=a.transport.sessionId),a}initializeTransport(e){return this.transportType===qa.SSE?new ene(new URL(this.endpoint),{authProvider:this.authProvider,requestInit:{headers:this.headers}}):new rne(new URL(this.endpoint),{authProvider:this.authProvider,requestInit:{headers:this.headers},sessionId:e})}initializeClient(){const e=this.handlers.elicitation?{elicitation:{}}:{},n=this.handlers.sampling?{sampling:{}}:{},r=new pte({name:"tambo-mcp-client",version:"1.0.0"},{capabilities:{...e,...n}});return this.handlers.elicitation&&r.setRequestHandler(Bf,this.handlers.elicitation),this.handlers.sampling&&r.setRequestHandler(qf,this.handlers.sampling),r}async listTools(){const e=[];let n=!0,r;for(;n;){const s=await this.client.listTools({cursor:r},{});e.push(...s.tools.map(i=>{if(i.inputSchema.type!=="object")throw new Error(`Input schema for tool ${i.name} is not an object`);return{name:i.name,description:i.description,inputSchema:i.inputSchema}})),s.nextCursor?r=s.nextCursor:n=!1}return e}getServerCapabilities(){return this.client.getServerCapabilities()}getServerVersion(){return this.client.getServerVersion()}getInstructions(){return this.client.getInstructions()}async callTool(e,n,r){return await this.client.callTool({name:e,arguments:n,_meta:r})}updateElicitationHandler(e){if(e!==this.handlers.elicitation){if(e&&!this.handlers.elicitation)throw new Error("Elicitation handler must be set on create");if(this.handlers={...this.handlers,elicitation:e},!e){const n=Bf.shape.method.value;this.client.removeRequestHandler(n);return}this.client.setRequestHandler(Bf,e)}}updateSamplingHandler(e){if(e!==this.handlers.sampling){if(e&&!this.handlers.sampling)throw new Error("Sampling handler must be set on create");if(this.handlers={...this.handlers,sampling:e},!e){const n=qf.shape.method.value;this.client.removeRequestHandler(n);return}this.client.setRequestHandler(qf,e)}}async close(){await this.transport.close(),await this.client.close()}}function sne(t){if(t==null)return"Unknown error occurred";if(Array.isArray(t)){const e=t.filter(n=>(n==null?void 0:n.type)==="text"&&typeof n.text=="string").map(n=>n.text);return e.length>0?e.join(" "):"Error occurred but no details provided"}return typeof t=="object"?JSON.stringify(t):`${t}`}const A7=Q.createContext({servers:[],elicitation:null,resolveElicitation:null}),ine="__tambo_internal_mcp_server__";function one(t){let e=0;for(let n=0;n<t.length;n++)e=Math.imul(31,e)+t.charCodeAt(n)|0;return(e>>>0).toString(36)}function j7(t){var e;if((e=t==null?void 0:t.client)!=null&&e.close)try{const n=t.client.close();n&&typeof n.catch=="function"&&n.catch(r=>{const s=t.url??"(unknown url)";console.error(`Error closing MCP client for ${s}:`,r)})}catch(n){const r=t.url??"(unknown url)";console.error(`Error closing MCP client for ${r}:`,n)}}function ane(t,e,n){var s,i;const r={};return(s=t.handlers)!=null&&s.elicitation?r.elicitation=t.handlers.elicitation:e&&(r.elicitation=async(o,a)=>await e(o,a,t)),(i=t.handlers)!=null&&i.sampling?r.sampling=t.handlers.sampling:n&&(r.sampling=async(o,a)=>await n(o,a,t)),r}function lne(t,e,n){return Q.useMemo(()=>{const r=new Map;if(t.forEach(s=>{const i=c9(s,Hf.BROWSER_SIDE);r.set(i.key,i)}),e&&n){const s=new URL(n);s.pathname=`${s.pathname.replace(/\/+$/,"")}/mcp`;const i=s.toString(),o=one(e),a={name:ine,url:i,transport:qa.HTTP,serverKey:`tambo-${o}`,customHeaders:{Authorization:`Bearer ${e}`}},c=c9(a,Hf.TAMBO_INTERNAL);r.set(c.key,c)}return r},[t,e,n])}async function une(t,e,n,r,s,i,o){const{toolOwnerRef:a,keyToToolsRef:c}=i;try{(await t.listTools()).forEach(f=>{const m=r?`${e.serverKey}__${f.name}`:f.name,y=a.current.get(m);y&&y!==n||(y||(a.current.set(m,n),c.current.has(n)||c.current.set(n,new Set),c.current.get(n).add(m)),o({description:f.description??"",name:m,tool:async(v={})=>{const _=s.get(n);if(!(_!=null&&_.client))throw new Error(`MCP server for tool ${f.name} is not connected`);const E=await _.client.callTool(f.name,v);if(E.isError){const k=sne(E.content);throw new Error(k)}return E.content},inputSchema:f.inputSchema??{},outputSchema:{},transformToContent:v=>dH(v)?v:[{type:"text",text:O2(v)}],..."maxCalls"in f&&f.maxCalls!==void 0?{maxCalls:f.maxCalls}:{}}))})}catch(d){console.error(`Failed to register tools from MCP server ${e.url}:`,d)}}function cne(t,e){const{toolOwnerRef:n,keyToToolsRef:r}=e,s=r.current.get(t);if(s){for(const i of s)n.current.delete(i);r.current.delete(t)}}const dne=({handlers:t,contextKey:e,children:n})=>{const{registerTool:r}=_y(),{mcpAccessToken:s,tamboBaseUrl:i}=kH(e),o=JG(),a=t==null?void 0:t.sampling,{elicitation:c,resolveElicitation:d,defaultElicitationHandler:f}=EH(),m=(t==null?void 0:t.elicitation)??f,y=Q.useRef(new Map),v=Q.useRef(new Map),_=Q.useRef(new Map),E={toolOwnerRef:v,keyToToolsRef:_},[k,p]=Q.useState([]),w=lne(o,s,i);fne(w,y,E,m,a,r,p),hne(w,y,m,a),pne(y,E);const g=Q.useMemo(()=>({servers:k,elicitation:c,resolveElicitation:d}),[k,c,d]);return Te.createElement(A7.Provider,{value:g},n)};function fne(t,e,n,r,s,i,o){Q.useEffect(()=>{const a=e.current,c=new Set(t.keys()),d=new Set(a.keys()),f=Array.from(d).filter(v=>!c.has(v));f.forEach(v=>{const _=a.get(v);_&&j7(_),cne(v,n),a.delete(v)});const m=Array.from(c).filter(v=>!d.has(v));async function y(v){await Promise.allSettled(v.map(async _=>{const E=t.get(_);try{const k=ane(E,r,s),p=await L3.create(E.url,E.transport,E.customHeaders,void 0,void 0,k),w={...E,client:p};a.set(_,w),o(Array.from(a.values()));const g=t.size>1;await une(p,E,_,g,a,n,i)}catch(k){const p={...E,connectionError:k};a.set(_,p),o(Array.from(a.values())),console.error(`Failed to connect to MCP server ${E.url}:`,k)}}))}m.length>0&&y(m).catch(v=>{console.error("Unexpected error in addClients:",v)}),f.length>0&&o(Array.from(a.values()))},[t,r,s,i])}function hne(t,e,n,r){Q.useEffect(()=>{e.current.forEach((i,o)=>{var f,m,y,v,_,E;if(!i.client)return;const a=t.get(o);if(!a)return;const c=((f=a.handlers)==null?void 0:f.elicitation)??(n?async(k,p)=>await n(k,p,a):void 0),d=((m=a.handlers)==null?void 0:m.sampling)??(r?async(k,p)=>await r(k,p,a):void 0);(v=(y=i.client).updateElicitationHandler)==null||v.call(y,c),(E=(_=i.client).updateSamplingHandler)==null||E.call(_,d)})},[t,n,r])}function pne(t,e){Q.useEffect(()=>{const n=t.current,{toolOwnerRef:r,keyToToolsRef:s}=e;return()=>{n.forEach(i=>{j7(i)}),n.clear(),r.current.clear(),s.current.clear()}},[])}const mne=()=>Q.useContext(A7).servers;function c9(t,e){const n=rN(t),r=t.handlers;return{...t,handlers:r,key:n,serverType:e}}const M7=Q.createContext(null),d9="contextAttachments";function gne({children:t}){const{addContextHelper:e,removeContextHelper:n}=wy(),[r,s]=Q.useState([]);Q.useEffect(()=>(e(d9,()=>r.length===0?null:r.map(d=>({id:d.id,displayName:d.displayName,context:d.context,type:d.type}))),()=>{n(d9)}),[r,e,n]);const i=Q.useCallback(d=>{const m={id:crypto.randomUUID(),displayName:d.displayName,context:d.context,type:d.type};return s(y=>[...y,m]),m},[]),o=Q.useCallback(d=>{s(f=>f.filter(m=>m.id!==d))},[]),a=Q.useCallback(()=>{s([])},[]),c=Q.useMemo(()=>({attachments:r,addContextAttachment:i,removeContextAttachment:o,clearContextAttachments:a}),[r,i,o,a]);return Te.createElement(M7.Provider,{value:c},t)}function yne(){const t=Q.useContext(M7);if(!t)throw new Error("useTamboContextAttachment must be used within a TamboContextAttachmentProvider");return t}function vne(t){const e=nN();return FG(t,e)}class qu extends vs{}const _ne=/@([a-zA-Z0-9-]+):(\S+)/g;function wne(t,e,n){var o;const r=[],s=Array.from(t.matchAll(_ne));let i=0;for(const a of s){const[c,d,f]=a,m=`${d}:${f}`;if(a.index!==void 0&&a.index>i){const E=t.slice(i,a.index);E.length>0&&r.push({type:"text",text:E})}const y={uri:f},v=e[m];v&&(y.name=v);const _=n==null?void 0:n.get(m);if((o=_==null?void 0:_.contents)!=null&&o[0]){const E=_.contents[0];"text"in E&&E.text?y.text=E.text:"blob"in E&&E.blob&&(y.blob=E.blob),"mimeType"in E&&E.mimeType&&(y.mimeType=E.mimeType)}r.push({type:"resource",resource:y}),a.index!==void 0&&(i=a.index+c.length)}if(i<t.length){const a=t.slice(i);a.length>0&&r.push({type:"text",text:a})}return r.length===0&&t.trim()&&r.push({type:"text",text:t}),r}function Sne(t,e,n={},r){const s=[];if(t.trim().length>0){const o=wne(t,n,r);s.push(...o)}for(const o of e)s.push({type:"image_url",image_url:{url:o.dataUrl}});if(s.length===0)throw new Error("Message must contain text or images");return s}function kne(t){return"client"in t&&t.client!=null}async function bne(t,e,n){const r=new Map,s=t.map(async i=>{const o=i.indexOf(":");if(o===-1)return;const a=i.slice(0,o),c=i.slice(o+1);try{if(a===uH){if(!n){console.warn(`No resource source available to resolve registry resource: ${i}`);return}const f=await n.getResource(c);f&&r.set(i,f);return}const d=e.find(f=>f.serverKey===a);if(!d){console.warn(`No server found for resource: ${i}`);return}switch(d.serverType){case Hf.TAMBO_INTERNAL:return;case Hf.TAMBO_REGISTRY:return;case Hf.BROWSER_SIDE:{if(!kne(d)){console.warn(`MCP server not connected for resource: ${i}`);return}const f=await d.client.client.readResource({uri:c});f&&r.set(i,f);return}}}catch(d){console.warn(`Failed to fetch resource content for ${i}:`,d)}});return await Promise.all(s),r}function Ene(t){const e=/@([a-zA-Z0-9-]+):(\S+)/g;return Array.from(t.matchAll(e)).map(([,r,s])=>`${r}:${s}`)}const f9={EMPTY:"Message cannot be empty",VALIDATION:"Invalid message format"},Cne=Q.createContext(void 0),Pne=({children:t})=>{const{thread:e,sendThreadMessage:n,contextKey:r}=fN(),[s,i]=Q.useState(""),o=aH(),a=mne(),{resourceSource:c}=_y(),{clearInteractableSelections:d}=lN(),f=Q.useCallback(async({streamResponse:E,forceToolChoice:k,additionalContext:p,resourceNames:w={}}={})=>{if(s!=null&&s.trim()){const N=lH(s);if(!N.isValid)throw new qu(`Cannot submit message: ${N.error??f9.VALIDATION}`,{cause:N.error})}if(!s.trim()&&o.images.length===0)throw new qu(f9.EMPTY,{cause:"No text or images to send"});const g=Ene(s),C=await bne(g,a,c??void 0),$=Sne(s,o.images,w,C);try{await n(s||"Image message",{threadId:e.id,contextKey:r,streamResponse:E,forceToolChoice:k,additionalContext:p,content:$}),d()}catch(N){if(o.images.length>0){const M=N instanceof Error?N.message.toLowerCase():"";if(M.includes("unknown content part type: image"))throw new qu("Image attachments are not yet supported by the backend. This feature is coming soon.",{cause:N});if(M.includes("does not support image message content types")||M.includes("invalid model")&&M.includes("image_url is only supported by certain models"))throw new qu("This model doesn't support images. Please use GPT-4o, GPT-4 Turbo, or other vision-capable models.",{cause:N});if(M.includes("does not support image")||M.includes("vision not supported"))throw new qu("This Claude model doesn't support images. Please use Claude 3.5 Sonnet, Claude 3 Opus, or other vision-capable models.",{cause:N});if(M.includes("image")||M.includes("vision"))throw new qu("This model doesn't support image attachments. Please use a vision-capable model.",{cause:N})}throw N}i("")},[s,n,e.id,r,o,a,c,d]),{mutateAsync:m,mutate:y,...v}=vne({mutationFn:f}),_={...v,value:s,setValue:i,submit:m,images:o.images,addImage:o.addImage,addImages:o.addImages,removeImage:o.removeImage,clearImages:o.clearImages};return Te.createElement(Cne.Provider,{value:_},t)},$ne=({children:t,tamboUrl:e,apiKey:n,userToken:r,components:s,environment:i,tools:o,mcpServers:a,streaming:c,autoGenerateThreadName:d,autoGenerateNameThreshold:f,contextHelpers:m,contextKey:y,initialMessages:v,onCallUnregisteredTool:_,getResource:E,listResources:k,resources:p})=>Te.createElement(GG,{tamboUrl:e,apiKey:n,environment:i,userToken:r},Te.createElement(XG,{components:s,tools:o,mcpServers:a,onCallUnregisteredTool:_,getResource:E,listResources:k,resources:p},Te.createElement(nH,{contextHelpers:m},Te.createElement(_H,{contextKey:y,streaming:c,autoGenerateThreadName:d,autoGenerateNameThreshold:f,initialMessages:v},Te.createElement(SH,null,Te.createElement(dne,{contextKey:y},Te.createElement(gne,null,Te.createElement(eH,null,Te.createElement(rH,null,Te.createElement(Pne,null,Te.createElement(xne,null,t))))))))))),Tne=Q.createContext({}),xne=({children:t})=>{const e=fN(),n=Q.useContext(gd);if(!n)throw new Error("TamboCompositeProvider must be used within a TamboClientProvider");const{client:r,queryClient:s,isUpdatingToken:i}=n,o=iN(),a=lN(),c=wy(),d=yne();return Te.createElement(Tne.Provider,{value:{client:r,queryClient:s,isUpdatingToken:i,...o,...e,...a,...c,...d}},t)};var z7={exports:{}},Fy={},z0={},rt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof sc<"u"?sc:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:n(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return t.Konva.angleDeg?s*e:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var s;return(s=t.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(s){t.glob.Konva=s}};const r=s=>{t.Konva[s.prototype.getClassName()]=s};t._registerNode=r,t.Konva._injectGlobal(t.Konva)})(rt);var dn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=rt;class n{constructor(C=[1,0,0,1,0,0]){this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]}point(C){const $=this.m;return{x:$[0]*C.x+$[2]*C.y+$[4],y:$[1]*C.x+$[3]*C.y+$[5]}}translate(C,$){return this.m[4]+=this.m[0]*C+this.m[2]*$,this.m[5]+=this.m[1]*C+this.m[3]*$,this}scale(C,$){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=$,this.m[3]*=$,this}rotate(C){const $=Math.cos(C),N=Math.sin(C),M=this.m[0]*$+this.m[2]*N,A=this.m[1]*$+this.m[3]*N,q=this.m[0]*-N+this.m[2]*$,G=this.m[1]*-N+this.m[3]*$;return this.m[0]=M,this.m[1]=A,this.m[2]=q,this.m[3]=G,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(C,$){const N=this.m[0]+this.m[2]*$,M=this.m[1]+this.m[3]*$,A=this.m[2]+this.m[0]*C,q=this.m[3]+this.m[1]*C;return this.m[0]=N,this.m[1]=M,this.m[2]=A,this.m[3]=q,this}multiply(C){const $=this.m[0]*C.m[0]+this.m[2]*C.m[1],N=this.m[1]*C.m[0]+this.m[3]*C.m[1],M=this.m[0]*C.m[2]+this.m[2]*C.m[3],A=this.m[1]*C.m[2]+this.m[3]*C.m[3],q=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],G=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=$,this.m[1]=N,this.m[2]=M,this.m[3]=A,this.m[4]=q,this.m[5]=G,this}invert(){const C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),$=this.m[3]*C,N=-this.m[1]*C,M=-this.m[2]*C,A=this.m[0]*C,q=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),G=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=$,this.m[1]=N,this.m[2]=M,this.m[3]=A,this.m[4]=q,this.m[5]=G,this}getMatrix(){return this.m}decompose(){const C=this.m[0],$=this.m[1],N=this.m[2],M=this.m[3],A=this.m[4],q=this.m[5],G=C*M-$*N,B={x:A,y:q,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||$!=0){const Y=Math.sqrt(C*C+$*$);B.rotation=$>0?Math.acos(C/Y):-Math.acos(C/Y),B.scaleX=Y,B.scaleY=G/Y,B.skewX=(C*N+$*M)/G,B.skewY=0}else if(N!=0||M!=0){const Y=Math.sqrt(N*N+M*M);B.rotation=Math.PI/2-(M>0?Math.acos(-N/Y):-Math.acos(N/Y)),B.scaleX=G/Y,B.scaleY=Y,B.skewX=0,B.skewY=(C*N+$*M)/G}return B.rotation=t.Util._getRotation(B.rotation),B}}t.Transform=n;const r="[object Array]",s="[object Number]",i="[object String]",o="[object Boolean]",a=Math.PI/180,c=180/Math.PI,d="#",f="",m="0",y="Konva warning: ",v="Konva error: ",_="rgb(",E={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},k=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let p=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};t.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===r},_isNumber(g){return Object.prototype.toString.call(g)===s&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===i},_isBoolean(g){return Object.prototype.toString.call(g)===o},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const C=g[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){p.push(g),p.length===1&&w(function(){const C=p;p=[],C.forEach(function($){$()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,C){const $=t.Util.createImageElement();$.onload=function(){C($)},$.src=g},_rgbToHex(g,C,$){return((1<<24)+(g<<16)+(C<<8)+$).toString(16).slice(1)},_hexToRgb(g){g=g.replace(d,f);const C=parseInt(g,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=m+g;return d+g},getRGB(g){let C;return g in E?(C=E[g],{r:C[0],g:C[1],b:C[2]}):g[0]===d?this._hexToRgb(g.substring(1)):g.substr(0,4)===_?(C=k.exec(g.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",t.Util._namedColorToRBA(g)||t.Util._hex3ColorToRGBA(g)||t.Util._hex4ColorToRGBA(g)||t.Util._hex6ColorToRGBA(g)||t.Util._hex8ColorToRGBA(g)||t.Util._rgbColorToRGBA(g)||t.Util._rgbaColorToRGBA(g)||t.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const C=E[g.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const C=g.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const C=g.split(/ *, */).map(($,N)=>$.slice(-1)==="%"?N===3?parseInt($)/100:parseInt($)/100*255:Number($));return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[C,...$]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),N=Number($[0])/360,M=Number($[1])/100,A=Number($[2])/100;let q,G,B;if(M===0)return B=A*255,{r:Math.round(B),g:Math.round(B),b:Math.round(B),a:1};A<.5?q=A*(1+M):q=A+M-A*M;const Y=2*A-q,ie=[0,0,0];for(let se=0;se<3;se++)G=N+1/3*-(se-1),G<0&&G++,G>1&&G--,6*G<1?B=Y+(q-Y)*6*G:2*G<1?B=q:3*G<2?B=Y+(q-Y)*(2/3-G)*6:B=Y,ie[se]=B*255;return{r:Math.round(ie[0]),g:Math.round(ie[1]),b:Math.round(ie[2]),a:1}}},haveIntersection(g,C){return!(C.x>g.x+g.width||C.x+C.width<g.x||C.y>g.y+g.height||C.y+C.height<g.y)},cloneObject(g){const C={};for(const $ in g)this._isPlainObject(g[$])?C[$]=this.cloneObject(g[$]):this._isArray(g[$])?C[$]=this.cloneArray(g[$]):C[$]=g[$];return C},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*c},_degToRad(g){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(g)},_radToDeg(g){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(g)},_getRotation(g){return e.Konva.angleDeg?t.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(v+g)},error(g){console.error(v+g)},warn(g){e.Konva.showWarnings&&console.warn(y+g)},each(g,C){for(const $ in g)C($,g[$])},_inRange(g,C,$){return C<=g&&g<$},_getProjectionToSegment(g,C,$,N,M,A){let q,G,B;const Y=(g-$)*(g-$)+(C-N)*(C-N);if(Y==0)q=g,G=C,B=(M-$)*(M-$)+(A-N)*(A-N);else{const ie=((M-g)*($-g)+(A-C)*(N-C))/Y;ie<0?(q=g,G=C,B=(g-M)*(g-M)+(C-A)*(C-A)):ie>1?(q=$,G=N,B=($-M)*($-M)+(N-A)*(N-A)):(q=g+ie*($-g),G=C+ie*(N-C),B=(q-M)*(q-M)+(G-A)*(G-A))}return[q,G,B]},_getProjectionToLine(g,C,$){const N=t.Util.cloneObject(g);let M=Number.MAX_VALUE;return C.forEach(function(A,q){if(!$&&q===C.length-1)return;const G=C[(q+1)%C.length],B=t.Util._getProjectionToSegment(A.x,A.y,G.x,G.y,g.x,g.y),Y=B[0],ie=B[1],se=B[2];se<M&&(N.x=Y,N.y=ie,M=se)}),N},_prepareArrayForTween(g,C,$){const N=[],M=[];if(g.length>C.length){const q=C;C=g,g=q}for(let q=0;q<g.length;q+=2)N.push({x:g[q],y:g[q+1]});for(let q=0;q<C.length;q+=2)M.push({x:C[q],y:C[q+1]});const A=[];return M.forEach(function(q){const G=t.Util._getProjectionToLine(q,N,$);A.push(G.x),A.push(G.y)}),A},_prepareToStringify(g){let C;g.visitedByCircularReferenceRemoval=!0;for(const $ in g)if(g.hasOwnProperty($)&&g[$]&&typeof g[$]=="object"){if(C=Object.getOwnPropertyDescriptor(g,$),g[$].visitedByCircularReferenceRemoval||t.Util._isElement(g[$]))if(C.configurable)delete g[$];else return null;else if(t.Util._prepareToStringify(g[$])===null)if(C.configurable)delete g[$];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,C){for(const $ in C)g[$]=C[$];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){e.Konva.releaseCanvasOnDestroy&&g.forEach(C=>{C.width=0,C.height=0})},drawRoundedRectPath(g,C,$,N){let M=0,A=0,q=0,G=0;typeof N=="number"?M=A=q=G=Math.min(N,C/2,$/2):(M=Math.min(N[0]||0,C/2,$/2),A=Math.min(N[1]||0,C/2,$/2),G=Math.min(N[2]||0,C/2,$/2),q=Math.min(N[3]||0,C/2,$/2)),g.moveTo(M,0),g.lineTo(C-A,0),g.arc(C-A,A,A,Math.PI*3/2,0,!1),g.lineTo(C,$-G),g.arc(C-G,$-G,G,0,Math.PI/2,!1),g.lineTo(q,$),g.arc(q,$-q,q,Math.PI/2,Math.PI,!1),g.lineTo(0,M),g.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}})(dn);var nn={},$i={},Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.HitContext=Io.SceneContext=Io.Context=void 0;const D7=dn,Nne=rt;function Rne(t){const e=[],n=t.length,r=D7.Util;for(let s=0;s<n;s++){let i=t[s];r._isNumber(i)?i=Math.round(i*1e3)/1e3:r._isString(i)||(i=i+""),e.push(i)}return e}const h9=",",One="(",Ine=")",Ane="([",jne="])",Mne=";",zne="()",Dne="=",p9=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Fne=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],Lne=100;class Ly{constructor(e){this.canvas=e,Nne.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let r=this.traceArr,s=r.length,i="",o,a,c,d;for(o=0;o<s;o++)a=r[o],c=a.method,c?(d=a.args,i+=c,e?i+=zne:D7.Util._isArray(d[0])?i+=Ane+d.join(h9)+jne:(n&&(d=d.map(f=>typeof f=="number"?Math.floor(f):f)),i+=One+d.join(h9)+Ine)):(i+=a.property,e||(i+=Dne+a.val)),i+=Mne;return i}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,r;n.push(e),r=n.length,r>=Lne&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,s,i,o){this._context.arc(e,n,r,s,i,o)}arcTo(e,n,r,s,i){this._context.arcTo(e,n,r,s,i)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,s,i,o){this._context.bezierCurveTo(e,n,r,s,i,o)}clearRect(e,n,r,s){this._context.clearRect(e,n,r,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,s){return this._context.createLinearGradient(e,n,r,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,s,i,o){return this._context.createRadialGradient(e,n,r,s,i,o)}drawImage(e,n,r,s,i,o,a,c,d){const f=arguments,m=this._context;f.length===3?m.drawImage(e,n,r):f.length===5?m.drawImage(e,n,r,s,i):f.length===9&&m.drawImage(e,n,r,s,i,o,a,c,d)}ellipse(e,n,r,s,i,o,a,c){this._context.ellipse(e,n,r,s,i,o,a,c)}isPointInPath(e,n,r,s){return r?this._context.isPointInPath(r,e,n,s):this._context.isPointInPath(e,n,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,s){this._context.fillRect(e,n,r,s)}strokeRect(e,n,r,s){this._context.strokeRect(e,n,r,s)}fillText(e,n,r,s){s?this._context.fillText(e,n,r,s):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,s){return this._context.getImageData(e,n,r,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,s){this._context.rect(e,n,r,s)}roundRect(e,n,r,s,i){this._context.roundRect(e,n,r,s,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,s){this._context.quadraticCurveTo(e,n,r,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,s,i,o){this._context.setTransform(e,n,r,s,i,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,s){this._context.strokeText(e,n,r,s)}transform(e,n,r,s,i,o){this._context.transform(e,n,r,s,i,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=p9.length,r=this.setAttr,s,i;const o=function(a){let c=e[a],d;e[a]=function(){return i=Rne(Array.prototype.slice.call(arguments,0)),d=c.apply(e,arguments),e._trace({method:a,args:i}),d}};for(s=0;s<n;s++)o(p9[s]);e.setAttr=function(){r.apply(e,arguments);const a=arguments[0];let c=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:a,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Io.Context=Ly;Fne.forEach(function(t){Object.defineProperty(Ly.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Une extends Ly{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&r==="pattern"){this._fillPattern(e);return}const i=e.getFillLinearGradientColorStops();if(i&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):i?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(n.x,n.y,r.x,r.y);if(s){for(let o=0;o<s.length;o+=2)i.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",i)}}_stroke(e){const n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();const i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,s;const i=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},c=e.getAbsoluteScale(),d=this.canvas.getPixelRatio(),f=c.x*d,m=c.y*d;this.setAttr("shadowColor",i),this.setAttr("shadowBlur",o*Math.min(Math.abs(f),Math.abs(m))),this.setAttr("shadowOffsetX",a.x*f),this.setAttr("shadowOffsetY",a.y*m)}}Io.SceneContext=Une;class Vne extends Ly{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e);const r=e.hitStrokeWidth(),s=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}Io.HitContext=Vne;Object.defineProperty($i,"__esModule",{value:!0});$i.HitCanvas=$i.SceneCanvas=$i.Canvas=void 0;const D0=dn,F7=Io,L7=rt;let Hm;function Gne(){if(Hm)return Hm;const t=D0.Util.createCanvasElement(),e=t.getContext("2d");return Hm=function(){const n=L7.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),D0.Util.releaseCanvas(t),Hm}class U3{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const r=(e||{}).pixelRatio||L7.Konva.pixelRatio||Gne();this.pixelRatio=r,this._canvas=D0.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(s){return D0.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}$i.Canvas=U3;class Hne extends U3{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new F7.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}$i.SceneCanvas=Hne;class qne extends U3{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new F7.HitContext(this),this.setSize(e.width,e.height)}}$i.HitCanvas=qne;var Uy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=rt,n=dn;t.DD={get isDragging(){let r=!1;return t.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return t.DD._dragElements.forEach(s=>{r=s.node}),r},_dragElements:new Map,_drag(r){const s=[];t.DD._dragElements.forEach((i,o)=>{const{node:a}=i,c=a.getStage();c.setPointersPositions(r),i.pointerId===void 0&&(i.pointerId=n.Util._getFirstPointerId(r));const d=c._changedPointerPositions.find(f=>f.id===i.pointerId);if(d){if(i.dragStatus!=="dragging"){const f=a.dragDistance();if(Math.max(Math.abs(d.x-i.startPointerPos.x),Math.abs(d.y-i.startPointerPos.y))<f||(a.startDrag({evt:r}),!a.isDragging()))return}a._setDragPosition(r,i),s.push(a)}}),s.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:r},!0)})},_endDragBefore(r){const s=[];t.DD._dragElements.forEach(i=>{const{node:o}=i,a=o.getStage();if(r&&a.setPointersPositions(r),!a._changedPointerPositions.find(f=>f.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,i.dragStatus="stopped");const d=i.node.getLayer()||i.node instanceof e.Konva.Stage&&i.node;d&&s.indexOf(d)===-1&&s.push(d)}),s.forEach(i=>{i.draw()})},_endDragAfter(r){t.DD._dragElements.forEach((s,i)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:r},!0),s.dragStatus!=="dragging"&&t.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(Uy);var lt={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.RGBComponent=Bne;Ue.alphaComponent=Wne;Ue.getNumberValidator=Zne;Ue.getNumberOrArrayOfNumbersValidator=Kne;Ue.getNumberOrAutoValidator=Qne;Ue.getStringValidator=Yne;Ue.getStringOrGradientValidator=Xne;Ue.getFunctionValidator=Jne;Ue.getNumberArrayValidator=ere;Ue.getBooleanValidator=tre;Ue.getComponentValidator=nre;const Go=rt,mn=dn;function Ho(t){return mn.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||mn.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Bne(t){return t>255?255:t<0?0:Math.round(t)}function Wne(t){return t>1?1:t<1e-4?1e-4:t}function Zne(){if(Go.Konva.isUnminified)return function(t,e){return mn.Util._isNumber(t)||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Kne(t){if(Go.Konva.isUnminified)return function(e,n){let r=mn.Util._isNumber(e),s=mn.Util._isArray(e)&&e.length==t;return!r&&!s&&mn.Util.warn(Ho(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Qne(){if(Go.Konva.isUnminified)return function(t,e){return mn.Util._isNumber(t)||t==="auto"||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Yne(){if(Go.Konva.isUnminified)return function(t,e){return mn.Util._isString(t)||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function Xne(){if(Go.Konva.isUnminified)return function(t,e){const n=mn.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Jne(){if(Go.Konva.isUnminified)return function(t,e){return mn.Util._isFunction(t)||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function ere(){if(Go.Konva.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(mn.Util._isArray(t)?t.forEach(function(r){mn.Util._isNumber(r)||mn.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function tre(){if(Go.Konva.isUnminified)return function(t,e){return t===!0||t===!1||mn.Util.warn(Ho(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function nre(t){if(Go.Konva.isUnminified)return function(e,n){return e==null||mn.Util.isObject(e)||mn.Util.warn(Ho(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=dn,n=Ue,r="get",s="set";t.Factory={addGetterSetter(i,o,a,c,d){t.Factory.addGetter(i,o,a),t.Factory.addSetter(i,o,c,d),t.Factory.addOverloadedGetterSetter(i,o)},addGetter(i,o,a){const c=r+e.Util._capitalize(o);i.prototype[c]=i.prototype[c]||function(){const d=this.attrs[o];return d===void 0?a:d}},addSetter(i,o,a,c){const d=s+e.Util._capitalize(o);i.prototype[d]||t.Factory.overWriteSetter(i,o,a,c)},overWriteSetter(i,o,a,c){const d=s+e.Util._capitalize(o);i.prototype[d]=function(f){return a&&f!==void 0&&f!==null&&(f=a.call(this,f,o)),this._setAttr(o,f),c&&c.call(this),this}},addComponentsGetterSetter(i,o,a,c,d){const f=a.length,m=e.Util._capitalize,y=r+m(o),v=s+m(o);i.prototype[y]=function(){const E={};for(let k=0;k<f;k++){const p=a[k];E[p]=this.getAttr(o+m(p))}return E};const _=(0,n.getComponentValidator)(a);i.prototype[v]=function(E){const k=this.attrs[o];c&&(E=c.call(this,E,o)),_&&_.call(this,E,o);for(const p in E)E.hasOwnProperty(p)&&this._setAttr(o+m(p),E[p]);return E||a.forEach(p=>{this._setAttr(o+m(p),void 0)}),this._fireChangeEvent(o,k,E),d&&d.call(this),this},t.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter(i,o){const a=e.Util._capitalize(o),c=s+a,d=r+a;i.prototype[o]=function(){return arguments.length?(this[c](arguments[0]),this):this[d]()}},addDeprecatedGetterSetter(i,o,a,c){e.Util.error("Adding deprecated "+o);const d=r+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[d]=function(){e.Util.error(f);const m=this.attrs[o];return m===void 0?a:m},t.Factory.addSetter(i,o,c,function(){e.Util.error(f)}),t.Factory.addOverloadedGetterSetter(i,o)},backCompat(i,o){e.Util.each(o,function(a,c){const d=i.prototype[c],f=r+e.Util._capitalize(a),m=s+e.Util._capitalize(a);function y(){d.apply(this,arguments),e.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}i.prototype[a]=y,i.prototype[f]=y,i.prototype[m]=y})},afterSetFilter(){this._filterUpToDate=!1}}})(lt);Object.defineProperty(nn,"__esModule",{value:!0});nn.Node=void 0;const Bu=$i,Is=Uy,ap=lt,la=rt,ft=dn,Cn=Ue,$g="absoluteOpacity",qm="allEventListeners",vo="absoluteTransform",m9="absoluteScale",vl="canvas",rre="Change",sre="children",ire="konva",vS="listening",ore="mouseenter",are="mouseleave",lre="pointerenter",ure="pointerleave",cre="touchenter",dre="touchleave",g9="set",y9="Shape",Tg=" ",v9="stage",ca="transform",fre="Stage",_S="visible",hre=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Tg);let pre=1;class qe{constructor(e){this._id=pre++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ca||e===vo)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let r=this._cache.get(e);return(r===void 0||(e===ca||e===vo)&&r.dirty===!0)&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const s=n.map(i=>i+"Change.konva").join(Tg);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(vl)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===vo&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(vl)){const{scene:e,filter:n,hit:r,buffer:s}=this._cache.get(vl);ft.Util.releaseCanvas(e,n,r,s),this._cache.delete(vl)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(n.width||r.width),i=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,c=n.y===void 0?Math.floor(r.y):n.y,d=n.offset||0,f=n.drawBorder||!1,m=n.hitCanvasPixelRatio||1;if(!s||!i){ft.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const y=Math.abs(Math.round(r.x)-a)>.5?1:0,v=Math.abs(Math.round(r.y)-c)>.5?1:0;s+=d*2+y,i+=d*2+v,a-=d,c-=d;const _=new Bu.SceneCanvas({pixelRatio:o,width:s,height:i}),E=new Bu.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),k=new Bu.HitCanvas({pixelRatio:m,width:s,height:i}),p=_.getContext(),w=k.getContext(),g=new Bu.SceneCanvas({width:_.width/_.pixelRatio+Math.abs(a),height:_.height/_.pixelRatio+Math.abs(c),pixelRatio:_.pixelRatio}),C=g.getContext();return k.isCache=!0,_.isCache=!0,this._cache.delete(vl),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(_.getContext()._context.imageSmoothingEnabled=!1,E.getContext()._context.imageSmoothingEnabled=!1),p.save(),w.save(),C.save(),p.translate(-a,-c),w.translate(-a,-c),C.translate(-a,-c),g.x=a,g.y=c,this._isUnderCache=!0,this._clearSelfAndDescendantCache($g),this._clearSelfAndDescendantCache(m9),this.drawScene(_,this,g),this.drawHit(k,this),this._isUnderCache=!1,p.restore(),w.restore(),f&&(p.save(),p.beginPath(),p.rect(0,0,s,i),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.set(vl,{scene:_,filter:E,hit:k,buffer:g,x:a,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(vl)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,i=1/0,o=-1/0,a=-1/0;const c=this.getAbsoluteTransform(n);return r.forEach(function(d){const f=c.point(d);s===void 0&&(s=o=f.x,i=a=f.y),s=Math.min(s,f.x),i=Math.min(i,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),{x:s,y:i,width:o-s,height:a-i}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const r=this._getCachedSceneCanvas(),s=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/s,r.height/s),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),r=n.scene,s=n.filter,i=s.getContext(),o,a,c,d;if(e){if(!this._filterUpToDate){const f=r.pixelRatio;s.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,i.clear(),i.drawImage(r._canvas,0,0,r.getWidth()/f,r.getHeight()/f),a=i.getImageData(0,0,s.getWidth(),s.getHeight()),c=0;c<o;c++){if(d=e[c],typeof d!="function"){ft.Util.error("Filter should be type of function, but got "+typeof d+" instead. Please check correct filters");continue}d.call(this,a),i.putImageData(a,0,0)}}catch(m){ft.Util.error("Unable to apply filter. "+m.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return r}on(e,n){if(this._cache&&this._cache.delete(qm),arguments.length===3)return this._delegate.apply(this,arguments);const r=e.split(Tg);for(let s=0;s<r.length;s++){const o=r[s].split("."),a=o[0],c=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:c,handler:n})}return this}off(e,n){let r=(e||"").split(Tg),s=r.length,i,o,a,c,d,f;if(this._cache&&this._cache.delete(qm),!e)for(o in this.eventListeners)this._off(o);for(i=0;i<s;i++)if(a=r[i],c=a.split("."),d=c[0],f=c[1],d)this.eventListeners[d]&&this._off(d,f,n);else for(o in this.eventListeners)this._off(o,f,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){const s=this;this.on(e,function(i){const o=i.target.findAncestors(n,!0,s);for(let a=0;a<o.length;a++)i=ft.Util.cloneObject(i),i.currentTarget=o[a],r.call(o[a],i)})}remove(){return this.isDragging()&&this.stopDrag(),Is.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(vo),this._clearSelfAndDescendantCache($g),this._clearSelfAndDescendantCache(m9),this._clearSelfAndDescendantCache(v9),this._clearSelfAndDescendantCache(_S),this._clearSelfAndDescendantCache(vS)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+ft.Util._capitalize(e);return ft.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,r;if(!e)return this;for(n in e)n!==sre&&(r=g9+ft.Util._capitalize(n),ft.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(vS,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(_S,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const r=this.getLayer();let s=!1;Is.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(s=!0)});const i=!n&&!la.Konva.hitOnDragEnabled&&(s||la.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!i}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,r=0,s,i,o,a;function c(f){for(s=[],i=f.length,o=0;o<i;o++)a=f[o],r++,a.nodeType!==y9&&(s=s.concat(a.getChildren().slice())),a._id===n._id&&(o=i);s.length>0&&s[0].getDepth()<=e&&c(s)}const d=this.getStage();return n.nodeType!==fre&&d&&c(d.getChildren()),r}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ca),this._clearSelfAndDescendantCache(vo)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),i=new ft.Transform,o=this.offset();return i.m=s.slice(),i.translate(o.x,o.y),i.getTranslation()}setAbsolutePosition(e){const{x:n,y:r,...s}=this._clearTransform();this.attrs.x=n,this.attrs.y=r,this._clearCache(ca);const i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(e.x,e.y),e={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(ca),this._clearSelfAndDescendantCache(vo),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,r=e.y,s=this.x(),i=this.y();return n!==void 0&&(s+=n),r!==void 0&&(i+=r),this.setPosition({x:s,y:i}),this}_eachAncestorReverse(e,n){let r=[],s=this.getParent(),i,o;if(!(n&&n._id===this._id)){for(r.unshift(this);s&&(!n||s._id!==n._id);)r.unshift(s),s=s.parent;for(i=r.length,o=0;o<i;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ft.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ft.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ft.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ft.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache($g,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,r,s,i,o;const a={attrs:{},className:this.getClassName()};for(n in e)r=e[n],o=ft.Util.isObject(r)&&!ft.Util._isPlainObject(r)&&!ft.Util._isArray(r),!o&&(s=typeof this[n]=="function"&&this[n],delete e[n],i=s?s.call(this):null,e[n]=r,i!==r&&(a.attrs[n]=r));return ft.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){const s=[];n&&this._isMatch(e)&&s.push(this);let i=this.parent;for(;i;){if(i===r)return s;i._isMatch(e)&&s.push(i),i=i.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),r=n.length,s,i;for(s=0;s<r;s++)if(i=n[s],ft.Util.isValidSelector(i)||(ft.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ft.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ft.Util.warn("Konva is awesome, right?")),i.charAt(0)==="#"){if(this.id()===i.slice(1))return!0}else if(i.charAt(0)==="."){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(v9,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(vo,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new ft.Transform,this._eachAncestorReverse(function(r){const s=r.transformsEnabled();s==="all"?n.multiply(r.getTransform()):s==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},e),n;{n=this._cache.get(vo)||new ft.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const s=this.attrs.x||0,i=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(s-o,i-a)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ca,this._getTransform)}_getTransform(){var e,n;const r=this._cache.get(ca)||new ft.Transform;r.reset();const s=this.x(),i=this.y(),o=la.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,d=this.attrs.skewX||0,f=this.attrs.skewY||0,m=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||i!==0)&&r.translate(s,i),o!==0&&r.rotate(o),(d!==0||f!==0)&&r.skew(d,f),(a!==1||c!==1)&&r.scale(a,c),(m!==0||y!==0)&&r.translate(-1*m,-1*y),r.dirty=!1,r}clone(e){let n=ft.Util.cloneObject(this.attrs),r,s,i,o,a;for(r in e)n[r]=e[r];const c=new this.constructor(n);for(r in this.eventListeners)for(s=this.eventListeners[r],i=s.length,o=0;o<i;o++)a=s[o],a.name.indexOf(ire)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(a));return c}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),r=this.getStage(),s=e.x!==void 0?e.x:Math.floor(n.x),i=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,a=new Bu.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),c=a.getContext(),d=new Bu.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(i),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(s||i)&&c.translate(-1*s,-1*i),this.drawScene(a,void 0,d),c.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,r=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(s),s}toImage(e){return new Promise((n,r)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,ft.Util._urlToImage(this.toDataURL(e),function(i){n(i),s==null||s(i)})}catch(s){r(s)}})}toBlob(e){return new Promise((n,r)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(i=>{n(i),s==null||s(i)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(s){r(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():la.Konva.dragDistance}_off(e,n,r){let s=this.eventListeners[e],i,o,a;for(i=0;i<s.length;i++)if(o=s[i].name,a=s[i].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(s.splice(i,1),s.length===0){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,n,r){this._fire(e+rre,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){const n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){const r=this[g9+ft.Util._capitalize(e)];return ft.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(la.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){const r=this.attrs[e];r===n&&!ft.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){let s;r!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,s,r))}_fireAndBubble(e,n,r){n&&this.nodeType===y9&&(n.target=this);const s=[ore,are,lre,ure,cre,dre];if(!(s.indexOf(e)!==-1&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r))){this._fire(e,n);const o=s.indexOf(e)!==-1&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,s;const i=(n=this._cache.get(qm))!==null&&n!==void 0?n:{};let o=i==null?void 0:i[e];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const c=(s=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&s!==void 0?s:[];o.push(...c),a=Object.getPrototypeOf(a)}i[e]=o,this._cache.set(qm,i)}return o}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(let i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(let i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,r=this.getStage(),s=this.getAbsolutePosition();if(!r)return;const i=r._getPointerById(n)||r._changedPointerPositions[0]||s;Is.DD._dragElements.set(this._id,{node:this,startPointerPos:i,offset:{x:i.x-s.x,y:i.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Is.DD._dragElements.has(this._id)||this._createDragElement(e);const r=Is.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!r)return;let s={x:r.x-n.offset.x,y:r.y-n.offset.y};const i=this.dragBoundFunc();if(i!==void 0){const o=i.call(this,s,e);o?s=o:ft.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const n=Is.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Is.DD._endDragBefore(e),Is.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Is.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||la.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let s=!1;Is.DD._dragElements.forEach(i=>{this.isAncestorOf(i.node)&&(s=!0)}),s||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=Is.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";r?this.stopDrag():s&&Is.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return ft.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return ft.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let r=qe.prototype.getClassName.call(e),s=e.children,i,o,a;n&&(e.attrs.container=n),la.Konva[r]||(ft.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const c=la.Konva[r];if(i=new c(e.attrs),s)for(o=s.length,a=0;a<o;a++)i.add(qe._createNode(s[a]));return i}}nn.Node=qe;qe.prototype.nodeType="Node";qe.prototype._attrsAffectingSize=[];qe.prototype.eventListeners={};qe.prototype.on.call(qe.prototype,hre,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ca),this._clearSelfAndDescendantCache(vo)});qe.prototype.on.call(qe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(_S)});qe.prototype.on.call(qe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(vS)});qe.prototype.on.call(qe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache($g)});const zt=ap.Factory.addGetterSetter;zt(qe,"zIndex");zt(qe,"absolutePosition");zt(qe,"position");zt(qe,"x",0,(0,Cn.getNumberValidator)());zt(qe,"y",0,(0,Cn.getNumberValidator)());zt(qe,"globalCompositeOperation","source-over",(0,Cn.getStringValidator)());zt(qe,"opacity",1,(0,Cn.getNumberValidator)());zt(qe,"name","",(0,Cn.getStringValidator)());zt(qe,"id","",(0,Cn.getStringValidator)());zt(qe,"rotation",0,(0,Cn.getNumberValidator)());ap.Factory.addComponentsGetterSetter(qe,"scale",["x","y"]);zt(qe,"scaleX",1,(0,Cn.getNumberValidator)());zt(qe,"scaleY",1,(0,Cn.getNumberValidator)());ap.Factory.addComponentsGetterSetter(qe,"skew",["x","y"]);zt(qe,"skewX",0,(0,Cn.getNumberValidator)());zt(qe,"skewY",0,(0,Cn.getNumberValidator)());ap.Factory.addComponentsGetterSetter(qe,"offset",["x","y"]);zt(qe,"offsetX",0,(0,Cn.getNumberValidator)());zt(qe,"offsetY",0,(0,Cn.getNumberValidator)());zt(qe,"dragDistance",void 0,(0,Cn.getNumberValidator)());zt(qe,"width",0,(0,Cn.getNumberValidator)());zt(qe,"height",0,(0,Cn.getNumberValidator)());zt(qe,"listening",!0,(0,Cn.getBooleanValidator)());zt(qe,"preventDefault",!0,(0,Cn.getBooleanValidator)());zt(qe,"filters",void 0,function(t){return this._filterUpToDate=!1,t});zt(qe,"visible",!0,(0,Cn.getBooleanValidator)());zt(qe,"transformsEnabled","all",(0,Cn.getStringValidator)());zt(qe,"size");zt(qe,"dragBoundFunc");zt(qe,"draggable",!1,(0,Cn.getBooleanValidator)());ap.Factory.backCompat(qe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.Container=void 0;const Ed=lt,V1=nn,Vy=Ue;class gu extends V1.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let r=0;r<e.length;r++)this.add(e[r]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const r=[];return this._descendants(s=>{const i=s._isMatch(e);return i&&r.push(s),!!(i&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const s of r){if(n=e(s),n)return!0;if(s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){const e=V1.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=V1.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){const s=this.getLayer(),i=e||s&&s.getCanvas(),o=i&&i.getContext(),a=this._getCanvasCache(),c=a&&a.scene,d=i&&i.isCache;if(!this.isVisible()&&!d)return this;if(c){o.save();const f=this.getAbsoluteTransform(n).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const r=this.getLayer(),s=e||r&&r.hitCanvas,i=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){i.save();const c=this.getAbsoluteTransform(n).getMatrix();i.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(i),i.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,r,s){var i;const o=n&&n.getContext(),a=this.clipWidth(),c=this.clipHeight(),d=this.clipFunc(),f=typeof a=="number"&&typeof c=="number"||d,m=r===this;if(f){o.save();const v=this.getAbsoluteTransform(r);let _=v.getMatrix();o.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.beginPath();let E;if(d)E=d.call(this,o,this);else{const k=this.clipX(),p=this.clipY();o.rect(k||0,p||0,a,c)}o.clip.apply(o,E),_=v.copy().invert().getMatrix(),o.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const y=!m&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";y&&(o.save(),o._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(v){v[e](n,r,s)}),y&&o.restore(),f&&o.restore()}getClientRect(e={}){var n;const r=e.skipTransform,s=e.relativeTo;let i,o,a,c,d={x:1/0,y:1/0,width:0,height:0};const f=this;(n=this.children)===null||n===void 0||n.forEach(function(v){if(!v.visible())return;const _=v.getClientRect({relativeTo:f,skipShadow:e.skipShadow,skipStroke:e.skipStroke});_.width===0&&_.height===0||(i===void 0?(i=_.x,o=_.y,a=_.x+_.width,c=_.y+_.height):(i=Math.min(i,_.x),o=Math.min(o,_.y),a=Math.max(a,_.x+_.width),c=Math.max(c,_.y+_.height)))});const m=this.find("Shape");let y=!1;for(let v=0;v<m.length;v++)if(m[v]._isVisible(this)){y=!0;break}return y&&i!==void 0?d={x:i,y:o,width:a-i,height:c-o}:d={x:0,y:0,width:0,height:0},r?d:this._transformedRect(d,s)}}mu.Container=gu;Ed.Factory.addComponentsGetterSetter(gu,"clip",["x","y","width","height"]);Ed.Factory.addGetterSetter(gu,"clipX",void 0,(0,Vy.getNumberValidator)());Ed.Factory.addGetterSetter(gu,"clipY",void 0,(0,Vy.getNumberValidator)());Ed.Factory.addGetterSetter(gu,"clipWidth",void 0,(0,Vy.getNumberValidator)());Ed.Factory.addGetterSetter(gu,"clipHeight",void 0,(0,Vy.getNumberValidator)());Ed.Factory.addGetterSetter(gu,"clipFunc");var U7={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.getCapturedShape=gre;Xa.createEvent=V3;Xa.hasPointerCapture=yre;Xa.setPointerCapture=vre;Xa.releaseCapture=G7;const mre=rt,Oh=new Map,V7=mre.Konva._global.PointerEvent!==void 0;function gre(t){return Oh.get(t)}function V3(t){return{evt:t,pointerId:t.pointerId}}function yre(t,e){return Oh.get(t)===e}function vre(t,e){G7(t),e.getStage()&&(Oh.set(t,e),V7&&e._fire("gotpointercapture",V3(new PointerEvent("gotpointercapture"))))}function G7(t,e){const n=Oh.get(t);if(!n)return;const r=n.getStage();r&&r.content,Oh.delete(t),V7&&n._fire("lostpointercapture",V3(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=dn,n=lt,r=mu,s=rt,i=$i,o=Uy,a=rt,c=Xa,d="Stage",f="string",m="px",y="mouseout",v="mouseleave",_="mouseover",E="mouseenter",k="mousemove",p="mousedown",w="mouseup",g="pointermove",C="pointerdown",$="pointerup",N="pointercancel",M="lostpointercapture",A="pointerout",q="pointerleave",G="pointerover",B="pointerenter",Y="contextmenu",ie="touchstart",se="touchend",ae="touchmove",ve="touchcancel",$e="wheel",ee=5,ue=[[E,"_pointerenter"],[p,"_pointerdown"],[k,"_pointermove"],[w,"_pointerup"],[v,"_pointerleave"],[ie,"_pointerdown"],[ae,"_pointermove"],[se,"_pointerup"],[ve,"_pointercancel"],[_,"_pointerover"],[$e,"_wheel"],[Y,"_contextmenu"],[C,"_pointerdown"],[g,"_pointermove"],[$,"_pointerup"],[N,"_pointercancel"],[q,"_pointerleave"],[M,"_lostpointercapture"]],L={mouse:{[A]:y,[q]:v,[G]:_,[B]:E,[g]:k,[C]:p,[$]:w,[N]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[A]:"touchout",[q]:"touchleave",[G]:"touchover",[B]:"touchenter",[g]:ae,[C]:ie,[$]:se,[N]:ve,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[A]:A,[q]:q,[G]:G,[B]:B,[g]:g,[C]:C,[$]:$,[N]:N,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},I=j=>j.indexOf("pointer")>=0?"pointer":j.indexOf("touch")>=0?"touch":"mouse",V=j=>{const O=I(j);if(O==="pointer")return s.Konva.pointerEventsEnabled&&L.pointer;if(O==="touch")return L.touch;if(O==="mouse")return L.mouse};function z(j={}){return(j.clipFunc||j.clipWidth||j.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),j}const b="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class T extends r.Container{constructor(O){super(z(O)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{z(this.attrs)}),this._checkVisibility()}_validateAdd(O){const F=O.getType()==="Layer",W=O.getType()==="FastLayer";F||W||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const O=this.visible()?"":"none";this.content.style.display=O}setContainer(O){if(typeof O===f){let F;if(O.charAt(0)==="."){const W=O.slice(1);O=document.getElementsByClassName(W)[0]}else O.charAt(0)!=="#"?F=O:F=O.slice(1),O=document.getElementById(F);if(!O)throw"Can not find container in document with id "+F}return this._setAttr("container",O),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),O.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const O=this.children,F=O.length;for(let W=0;W<F;W++)O[W].clear();return this}clone(O){return O||(O={}),O.container=typeof document<"u"&&document.createElement("div"),r.Container.prototype.clone.call(this,O)}destroy(){super.destroy();const O=this.content;O&&e.Util._isInDocument(O)&&this.container().removeChild(O);const F=t.stages.indexOf(this);return F>-1&&t.stages.splice(F,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const O=this._pointerPositions[0]||this._changedPointerPositions[0];return O?{x:O.x,y:O.y}:(e.Util.warn(b),null)}_getPointerById(O){return this._pointerPositions.find(F=>F.id===O)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(O){O=O||{},O.x=O.x||0,O.y=O.y||0,O.width=O.width||this.width(),O.height=O.height||this.height();const F=new i.SceneCanvas({width:O.width,height:O.height,pixelRatio:O.pixelRatio||1}),W=F.getContext()._context,le=this.children;return(O.x||O.y)&&W.translate(-1*O.x,-1*O.y),le.forEach(function(ce){if(!ce.isVisible())return;const U=ce._toKonvaCanvas(O);W.drawImage(U._canvas,O.x,O.y,U.getWidth()/U.getPixelRatio(),U.getHeight()/U.getPixelRatio())}),F}getIntersection(O){if(!O)return null;const F=this.children,W=F.length,le=W-1;for(let ce=le;ce>=0;ce--){const U=F[ce].getIntersection(O);if(U)return U}return null}_resizeDOM(){const O=this.width(),F=this.height();this.content&&(this.content.style.width=O+m,this.content.style.height=F+m),this.bufferCanvas.setSize(O,F),this.bufferHitCanvas.setSize(O,F),this.children.forEach(W=>{W.setSize({width:O,height:F}),W.draw()})}add(O,...F){if(arguments.length>1){for(let le=0;le<arguments.length;le++)this.add(arguments[le]);return this}super.add(O);const W=this.children.length;return W>ee&&e.Util.warn("The stage has "+W+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),O.setSize({width:this.width(),height:this.height()}),O.draw(),s.Konva.isBrowser&&this.content.appendChild(O.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(O){return c.hasPointerCapture(O,this)}setPointerCapture(O){c.setPointerCapture(O,this)}releaseCapture(O){c.releaseCapture(O,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&ue.forEach(([O,F])=>{this.content.addEventListener(O,W=>{this[F](W)},{passive:!1})})}_pointerenter(O){this.setPointersPositions(O);const F=V(O.type);F&&this._fire(F.pointerenter,{evt:O,target:this,currentTarget:this})}_pointerover(O){this.setPointersPositions(O);const F=V(O.type);F&&this._fire(F.pointerover,{evt:O,target:this,currentTarget:this})}_getTargetShape(O){let F=this[O+"targetShape"];return F&&!F.getStage()&&(F=null),F}_pointerleave(O){const F=V(O.type),W=I(O.type);if(!F)return;this.setPointersPositions(O);const le=this._getTargetShape(W),ce=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;le&&ce?(le._fireAndBubble(F.pointerout,{evt:O}),le._fireAndBubble(F.pointerleave,{evt:O}),this._fire(F.pointerleave,{evt:O,target:this,currentTarget:this}),this[W+"targetShape"]=null):ce&&(this._fire(F.pointerleave,{evt:O,target:this,currentTarget:this}),this._fire(F.pointerout,{evt:O,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(O){const F=V(O.type),W=I(O.type);if(!F)return;this.setPointersPositions(O);let le=!1;this._changedPointerPositions.forEach(ce=>{const U=this.getIntersection(ce);if(o.DD.justDragged=!1,s.Konva["_"+W+"ListenClick"]=!0,!U||!U.isListening()){this[W+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&U.setPointerCapture(ce.id),this[W+"ClickStartShape"]=U,U._fireAndBubble(F.pointerdown,{evt:O,pointerId:ce.id}),le=!0;const H=O.type.indexOf("touch")>=0;U.preventDefault()&&O.cancelable&&H&&O.preventDefault()}),le||this._fire(F.pointerdown,{evt:O,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(O){const F=V(O.type),W=I(O.type);if(!F||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&O.cancelable&&O.preventDefault(),this.setPointersPositions(O),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const ce={};let U=!1;const H=this._getTargetShape(W);this._changedPointerPositions.forEach(dt=>{const Fe=c.getCapturedShape(dt.id)||this.getIntersection(dt),Ie=dt.id,Je={evt:O,pointerId:Ie},gt=H!==Fe;if(gt&&H&&(H._fireAndBubble(F.pointerout,{...Je},Fe),H._fireAndBubble(F.pointerleave,{...Je},Fe)),Fe){if(ce[Fe._id])return;ce[Fe._id]=!0}Fe&&Fe.isListening()?(U=!0,gt&&(Fe._fireAndBubble(F.pointerover,{...Je},H),Fe._fireAndBubble(F.pointerenter,{...Je},H),this[W+"targetShape"]=Fe),Fe._fireAndBubble(F.pointermove,{...Je})):H&&(this._fire(F.pointerover,{evt:O,target:this,currentTarget:this,pointerId:Ie}),this[W+"targetShape"]=null)}),U||this._fire(F.pointermove,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(O){const F=V(O.type),W=I(O.type);if(!F)return;this.setPointersPositions(O);const le=this[W+"ClickStartShape"],ce=this[W+"ClickEndShape"],U={};let H=!1;this._changedPointerPositions.forEach(dt=>{const Fe=c.getCapturedShape(dt.id)||this.getIntersection(dt);if(Fe){if(Fe.releaseCapture(dt.id),U[Fe._id])return;U[Fe._id]=!0}const Ie=dt.id,Je={evt:O,pointerId:Ie};let gt=!1;s.Konva["_"+W+"InDblClickWindow"]?(gt=!0,clearTimeout(this[W+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+W+"InDblClickWindow"]=!0,clearTimeout(this[W+"DblTimeout"])),this[W+"DblTimeout"]=setTimeout(function(){s.Konva["_"+W+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Fe&&Fe.isListening()?(H=!0,this[W+"ClickEndShape"]=Fe,Fe._fireAndBubble(F.pointerup,{...Je}),s.Konva["_"+W+"ListenClick"]&&le&&le===Fe&&(Fe._fireAndBubble(F.pointerclick,{...Je}),gt&&ce&&ce===Fe&&Fe._fireAndBubble(F.pointerdblclick,{...Je}))):(this[W+"ClickEndShape"]=null,s.Konva["_"+W+"ListenClick"]&&this._fire(F.pointerclick,{evt:O,target:this,currentTarget:this,pointerId:Ie}),gt&&this._fire(F.pointerdblclick,{evt:O,target:this,currentTarget:this,pointerId:Ie}))}),H||this._fire(F.pointerup,{evt:O,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+W+"ListenClick"]=!1,O.cancelable&&W!=="touch"&&W!=="pointer"&&O.preventDefault()}_contextmenu(O){this.setPointersPositions(O);const F=this.getIntersection(this.getPointerPosition());F&&F.isListening()?F._fireAndBubble(Y,{evt:O}):this._fire(Y,{evt:O,target:this,currentTarget:this})}_wheel(O){this.setPointersPositions(O);const F=this.getIntersection(this.getPointerPosition());F&&F.isListening()?F._fireAndBubble($e,{evt:O}):this._fire($e,{evt:O,target:this,currentTarget:this})}_pointercancel(O){this.setPointersPositions(O);const F=c.getCapturedShape(O.pointerId)||this.getIntersection(this.getPointerPosition());F&&F._fireAndBubble($,c.createEvent(O)),c.releaseCapture(O.pointerId)}_lostpointercapture(O){c.releaseCapture(O.pointerId)}setPointersPositions(O){const F=this._getContentPosition();let W=null,le=null;O=O||window.event,O.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(O.touches,ce=>{this._pointerPositions.push({id:ce.identifier,x:(ce.clientX-F.left)/F.scaleX,y:(ce.clientY-F.top)/F.scaleY})}),Array.prototype.forEach.call(O.changedTouches||O.touches,ce=>{this._changedPointerPositions.push({id:ce.identifier,x:(ce.clientX-F.left)/F.scaleX,y:(ce.clientY-F.top)/F.scaleY})})):(W=(O.clientX-F.left)/F.scaleX,le=(O.clientY-F.top)/F.scaleY,this.pointerPos={x:W,y:le},this._pointerPositions=[{x:W,y:le,id:e.Util._getFirstPointerId(O)}],this._changedPointerPositions=[{x:W,y:le,id:e.Util._getFirstPointerId(O)}])}_setPointerPosition(O){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(O)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const O=this.content.getBoundingClientRect();return{top:O.top,left:O.left,scaleX:O.width/this.content.clientWidth||1,scaleY:O.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new i.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new i.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const O=this.container();if(!O)throw"Stage has no container. A container is required.";O.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),O.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(O){O.batchDraw()}),this}}t.Stage=T,T.prototype.nodeType=d,(0,a._registerNode)(T),n.Factory.addGetterSetter(T,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(j=>{j.batchDraw()})})})(U7);var lp={},Vn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=rt,n=dn,r=lt,s=nn,i=Ue,o=rt,a=Xa,c="hasShadow",d="shadowRGBA",f="patternImage",m="linearGradient",y="radialGradient";let v;function _(){return v||(v=n.Util.createCanvasElement().getContext("2d"),v)}t.shapes={};function E(q){const G=this.attrs.fillRule;G?q.fill(G):q.fill()}function k(q){q.stroke()}function p(q){const G=this.attrs.fillRule;G?q.fill(G):q.fill()}function w(q){q.stroke()}function g(){this._clearCache(c)}function C(){this._clearCache(d)}function $(){this._clearCache(f)}function N(){this._clearCache(m)}function M(){this._clearCache(y)}class A extends s.Node{constructor(G){super(G);let B;for(;B=n.Util.getRandomColor(),!(B&&!(B in t.shapes)););this.colorKey=B,t.shapes[B]=this}getContext(){return n.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return n.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(f,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const B=_().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(B&&B.setTransform){const Y=new n.Transform;Y.translate(this.fillPatternX(),this.fillPatternY()),Y.rotate(e.Konva.getAngle(this.fillPatternRotation())),Y.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),Y.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ie=Y.getMatrix(),se=typeof DOMMatrix>"u"?{a:ie[0],b:ie[1],c:ie[2],d:ie[3],e:ie[4],f:ie[5]}:new DOMMatrix(ie);B.setTransform(se)}return B}}_getLinearGradient(){return this._getCache(m,this.__getLinearGradient)}__getLinearGradient(){const G=this.fillLinearGradientColorStops();if(G){const B=_(),Y=this.fillLinearGradientStartPoint(),ie=this.fillLinearGradientEndPoint(),se=B.createLinearGradient(Y.x,Y.y,ie.x,ie.y);for(let ae=0;ae<G.length;ae+=2)se.addColorStop(G[ae],G[ae+1]);return se}}_getRadialGradient(){return this._getCache(y,this.__getRadialGradient)}__getRadialGradient(){const G=this.fillRadialGradientColorStops();if(G){const B=_(),Y=this.fillRadialGradientStartPoint(),ie=this.fillRadialGradientEndPoint(),se=B.createRadialGradient(Y.x,Y.y,this.fillRadialGradientStartRadius(),ie.x,ie.y,this.fillRadialGradientEndRadius());for(let ae=0;ae<G.length;ae+=2)se.addColorStop(G[ae],G[ae+1]);return se}}getShadowRGBA(){return this._getCache(d,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const G=n.Util.colorToRGBA(this.shadowColor());if(G)return"rgba("+G.r+","+G.g+","+G.b+","+G.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const G=this.hitStrokeWidth();return G==="auto"?this.hasStroke():this.strokeEnabled()&&!!G}intersects(G){const B=this.getStage();if(!B)return!1;const Y=B.bufferHitCanvas;return Y.getContext().clear(),this.drawHit(Y,void 0,!0),Y.context.getImageData(Math.round(G.x),Math.round(G.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(G){var B;if(!((B=this.attrs.perfectDrawEnabled)!==null&&B!==void 0?B:!0))return!1;const ie=G||this.hasFill(),se=this.hasStroke(),ae=this.getAbsoluteOpacity()!==1;if(ie&&se&&ae)return!0;const ve=this.hasShadow(),$e=this.shadowForStrokeEnabled();return!!(ie&&se&&ve&&$e)}setStrokeHitEnabled(G){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),G?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const G=this.size();return{x:this._centroid?-G.width/2:0,y:this._centroid?-G.height/2:0,width:G.width,height:G.height}}getClientRect(G={}){let B=!1,Y=this.getParent();for(;Y;){if(Y.isCached()){B=!0;break}Y=Y.getParent()}const ie=G.skipTransform,se=G.relativeTo||B&&this.getStage()||void 0,ae=this.getSelfRect(),$e=!G.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,ee=ae.width+$e,ue=ae.height+$e,L=!G.skipShadow&&this.hasShadow(),I=L?this.shadowOffsetX():0,V=L?this.shadowOffsetY():0,z=ee+Math.abs(I),b=ue+Math.abs(V),T=L&&this.shadowBlur()||0,j=z+T*2,O=b+T*2,F={width:j,height:O,x:-($e/2+T)+Math.min(I,0)+ae.x,y:-($e/2+T)+Math.min(V,0)+ae.y};return ie?F:this._transformedRect(F,se)}drawScene(G,B,Y){const ie=this.getLayer(),se=G||ie.getCanvas(),ae=se.getContext(),ve=this._getCanvasCache(),$e=this.getSceneFunc(),ee=this.hasShadow();let ue;const L=B===this;if(!this.isVisible()&&!L)return this;if(ve){ae.save();const I=this.getAbsoluteTransform(B).getMatrix();return ae.transform(I[0],I[1],I[2],I[3],I[4],I[5]),this._drawCachedSceneCanvas(ae),ae.restore(),this}if(!$e)return this;if(ae.save(),this._useBufferCanvas()){ue=this.getStage();const I=Y||ue.bufferCanvas,V=I.getContext();V.clear(),V.save(),V._applyLineJoin(this);const z=this.getAbsoluteTransform(B).getMatrix();V.transform(z[0],z[1],z[2],z[3],z[4],z[5]),$e.call(this,V,this),V.restore();const b=I.pixelRatio;ee&&ae._applyShadow(this),ae._applyOpacity(this),ae._applyGlobalCompositeOperation(this),ae.drawImage(I._canvas,I.x||0,I.y||0,I.width/b,I.height/b)}else{if(ae._applyLineJoin(this),!L){const I=this.getAbsoluteTransform(B).getMatrix();ae.transform(I[0],I[1],I[2],I[3],I[4],I[5]),ae._applyOpacity(this),ae._applyGlobalCompositeOperation(this)}ee&&ae._applyShadow(this),$e.call(this,ae,this)}return ae.restore(),this}drawHit(G,B,Y=!1){if(!this.shouldDrawHit(B,Y))return this;const ie=this.getLayer(),se=G||ie.hitCanvas,ae=se&&se.getContext(),ve=this.hitFunc()||this.sceneFunc(),$e=this._getCanvasCache(),ee=$e&&$e.hit;if(this.colorKey||n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),ee){ae.save();const L=this.getAbsoluteTransform(B).getMatrix();return ae.transform(L[0],L[1],L[2],L[3],L[4],L[5]),this._drawCachedHitCanvas(ae),ae.restore(),this}if(!ve)return this;if(ae.save(),ae._applyLineJoin(this),!(this===B)){const L=this.getAbsoluteTransform(B).getMatrix();ae.transform(L[0],L[1],L[2],L[3],L[4],L[5])}return ve.call(this,ae,this),ae.restore(),this}drawHitFromCache(G=0){const B=this._getCanvasCache(),Y=this._getCachedSceneCanvas(),ie=B.hit,se=ie.getContext(),ae=ie.getWidth(),ve=ie.getHeight();se.clear(),se.drawImage(Y._canvas,0,0,ae,ve);try{const $e=se.getImageData(0,0,ae,ve),ee=$e.data,ue=ee.length,L=n.Util._hexToRgb(this.colorKey);for(let I=0;I<ue;I+=4)ee[I+3]>G?(ee[I]=L.r,ee[I+1]=L.g,ee[I+2]=L.b,ee[I+3]=255):ee[I+3]=0;se.putImageData($e,0,0)}catch($e){n.Util.error("Unable to draw hit graph from cached scene canvas. "+$e.message)}return this}hasPointerCapture(G){return a.hasPointerCapture(G,this)}setPointerCapture(G){a.setPointerCapture(G,this)}releaseCapture(G){a.releaseCapture(G,this)}}t.Shape=A,A.prototype._fillFunc=E,A.prototype._strokeFunc=k,A.prototype._fillFuncHit=p,A.prototype._strokeFuncHit=w,A.prototype._centroid=!1,A.prototype.nodeType="Shape",(0,o._registerNode)(A),A.prototype.eventListeners={},A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),A.prototype.on.call(A.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",$),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",N),A.prototype.on.call(A.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),r.Factory.addGetterSetter(A,"stroke",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"strokeWidth",2,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(A,"hitStrokeWidth","auto",(0,i.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(A,"strokeHitEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"perfectDrawEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"shadowForStrokeEnabled",!0,(0,i.getBooleanValidator)()),r.Factory.addGetterSetter(A,"lineJoin"),r.Factory.addGetterSetter(A,"lineCap"),r.Factory.addGetterSetter(A,"sceneFunc"),r.Factory.addGetterSetter(A,"hitFunc"),r.Factory.addGetterSetter(A,"dash"),r.Factory.addGetterSetter(A,"dashOffset",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowColor",void 0,(0,i.getStringValidator)()),r.Factory.addGetterSetter(A,"shadowBlur",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOpacity",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(A,"shadowOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"shadowOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternImage"),r.Factory.addGetterSetter(A,"fill",void 0,(0,i.getStringOrGradientValidator)()),r.Factory.addGetterSetter(A,"fillPatternX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternY",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(A,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(A,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(A,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(A,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(A,"fillEnabled",!0),r.Factory.addGetterSetter(A,"strokeEnabled",!0),r.Factory.addGetterSetter(A,"shadowEnabled",!0),r.Factory.addGetterSetter(A,"dashEnabled",!0),r.Factory.addGetterSetter(A,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(A,"fillPriority","color"),r.Factory.addComponentsGetterSetter(A,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternOffsetX",0,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternOffsetY",0,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(A,"fillPatternScaleX",1,(0,i.getNumberValidator)()),r.Factory.addGetterSetter(A,"fillPatternScaleY",1,(0,i.getNumberValidator)()),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(A,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(A,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(A,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(A,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(A,"fillPatternRotation",0),r.Factory.addGetterSetter(A,"fillRule",void 0,(0,i.getStringValidator)()),r.Factory.backCompat(A,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Vn);Object.defineProperty(lp,"__esModule",{value:!0});lp.Layer=void 0;const po=dn,G1=mu,Wu=nn,G3=lt,_9=$i,_re=Ue,wre=Vn,Sre=rt,kre="#",bre="beforeDraw",Ere="draw",H7=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Cre=H7.length;let Cd=class extends G1.Container{constructor(e){super(e),this.canvas=new _9.SceneCanvas,this.hitCanvas=new _9.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Wu.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Wu.Node.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Wu.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Wu.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Wu.Node.prototype.remove.call(this),e&&e.parentNode&&po.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&po.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Wu.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){po.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){po.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,po.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,r=!1;for(;;){for(let s=0;s<Cre;s++){const i=H7[s],o=this._getIntersection({x:e.x+i.x*n,y:e.y+i.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=r[3];if(s===255){const i=po.Util._rgbToHex(r[0],r[1],r[2]),o=wre.shapes[kre+i];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n,r){const s=this.getLayer(),i=e||s&&s.getCanvas();return this._fire(bre,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),G1.Container.prototype.drawScene.call(this,i,n,r),this._fire(Ere,{node:this}),this}drawHit(e,n){const r=this.getLayer(),s=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),G1.Container.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){po.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return po.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return po.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};lp.Layer=Cd;Cd.prototype.nodeType="Layer";(0,Sre._registerNode)(Cd);G3.Factory.addGetterSetter(Cd,"imageSmoothingEnabled",!0);G3.Factory.addGetterSetter(Cd,"clearBeforeDraw",!0);G3.Factory.addGetterSetter(Cd,"hitGraphEnabled",!0,(0,_re.getBooleanValidator)());var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.FastLayer=void 0;const Pre=dn,$re=lp,Tre=rt;class H3 extends $re.Layer{constructor(e){super(e),this.listening(!1),Pre.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Gy.FastLayer=H3;H3.prototype.nodeType="FastLayer";(0,Tre._registerNode)(H3);var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.Group=void 0;const xre=dn,Nre=mu,Rre=rt;class q3 extends Nre.Container{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&xre.Util.throw("You may only add groups and shapes to groups.")}}Pd.Group=q3;q3.prototype.nodeType="Group";(0,Rre._registerNode)(q3);var $d={};Object.defineProperty($d,"__esModule",{value:!0});$d.Animation=void 0;const H1=rt,w9=dn,q1=function(){return H1.glob.performance&&H1.glob.performance.now?function(){return H1.glob.performance.now()}:function(){return new Date().getTime()}}();class Ki{constructor(e,n){this.id=Ki.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:q1(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,r=n.length;for(let s=0;s<r;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Ki.animations,r=n.length;for(let s=0;s<r;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=q1(),Ki._addAnimation(this),this}stop(){return Ki._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,r=this.animations,s=r.length;for(let i=0;i<s;i++)if(r[i].id===n){this.animations.splice(i,1);break}}static _runFrames(){const e={},n=this.animations;for(let r=0;r<n.length;r++){const s=n[r],i=s.layers,o=s.func;s._updateFrameObject(q1());const a=i.length;let c;if(o?c=o.call(s,s.frame)!==!1:c=!0,!!c)for(let d=0;d<a;d++){const f=i[d];f._id!==void 0&&(e[f._id]=f)}}for(const r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){const e=Ki;e.animations.length?(e._runFrames(),w9.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,w9.Util.requestAnimFrame(this._animationLoop))}}$d.Animation=Ki;Ki.animations=[];Ki.animIdCounter=0;Ki.animRunning=!1;var q7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=dn,n=$d,r=nn,s=rt,i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,c=3,d=["fill","stroke","shadowColor"];let f=0;class m{constructor(_,E,k,p,w,g,C){this.prop=_,this.propFunc=E,this.begin=p,this._pos=p,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=k,this._change=w-this.begin,this.pause()}fire(_){const E=this[_];E&&E()}setTime(_){_>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():_<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=_,this.update())}getTime(){return this._time}setPosition(_){this.prevPos=this._pos,this.propFunc(_),this._pos=_}getPosition(_){return _===void 0&&(_=this._time),this.func(_,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(_){this.pause(),this._time=_,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const _=this.getTimer()-this._startTime;this.state===a?this.setTime(_):this.state===c&&this.setTime(this.duration-_)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class y{constructor(_){const E=this,k=_.node,p=k._id,w=_.easing||t.Easings.Linear,g=!!_.yoyo;let C,$;typeof _.duration>"u"?C=.3:_.duration===0?C=.001:C=_.duration,this.node=k,this._id=f++;const N=k.getLayer()||(k instanceof s.Konva.Stage?k.getLayers():null);N||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){E.tween.onEnterFrame()},N),this.tween=new m($,function(M){E._tweenFunc(M)},w,0,1,C*1e3,g),this._addListeners(),y.attrs[p]||(y.attrs[p]={}),y.attrs[p][this._id]||(y.attrs[p][this._id]={}),y.tweens[p]||(y.tweens[p]={});for($ in _)i[$]===void 0&&this._addAttr($,_[$]);this.reset(),this.onFinish=_.onFinish,this.onReset=_.onReset,this.onUpdate=_.onUpdate}_addAttr(_,E){const k=this.node,p=k._id;let w,g,C,$,N;const M=y.tweens[p][_];M&&delete y.attrs[p][M][_];let A=k.getAttr(_);if(e.Util._isArray(E))if(w=[],g=Math.max(E.length,A.length),_==="points"&&E.length!==A.length&&(E.length>A.length?($=A,A=e.Util._prepareArrayForTween(A,E,k.closed())):(C=E,E=e.Util._prepareArrayForTween(E,A,k.closed()))),_.indexOf("fill")===0)for(let q=0;q<g;q++)if(q%2===0)w.push(E[q]-A[q]);else{const G=e.Util.colorToRGBA(A[q]);N=e.Util.colorToRGBA(E[q]),A[q]=G,w.push({r:N.r-G.r,g:N.g-G.g,b:N.b-G.b,a:N.a-G.a})}else for(let q=0;q<g;q++)w.push(E[q]-A[q]);else d.indexOf(_)!==-1?(A=e.Util.colorToRGBA(A),N=e.Util.colorToRGBA(E),w={r:N.r-A.r,g:N.g-A.g,b:N.b-A.b,a:N.a-A.a}):w=E-A;y.attrs[p][this._id][_]={start:A,diff:w,end:E,trueEnd:C,trueStart:$},y.tweens[p][_]=this._id}_tweenFunc(_){const E=this.node,k=y.attrs[E._id][this._id];let p,w,g,C,$,N,M,A;for(p in k){if(w=k[p],g=w.start,C=w.diff,A=w.end,e.Util._isArray(g))if($=[],M=Math.max(g.length,A.length),p.indexOf("fill")===0)for(N=0;N<M;N++)N%2===0?$.push((g[N]||0)+C[N]*_):$.push("rgba("+Math.round(g[N].r+C[N].r*_)+","+Math.round(g[N].g+C[N].g*_)+","+Math.round(g[N].b+C[N].b*_)+","+(g[N].a+C[N].a*_)+")");else for(N=0;N<M;N++)$.push((g[N]||0)+C[N]*_);else d.indexOf(p)!==-1?$="rgba("+Math.round(g.r+C.r*_)+","+Math.round(g.g+C.g*_)+","+Math.round(g.b+C.b*_)+","+(g.a+C.a*_)+")":$=g+C*_;E.setAttr(p,$)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const _=this.node,E=y.attrs[_._id][this._id];E.points&&E.points.trueEnd&&_.setAttr("points",E.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const _=this.node,E=y.attrs[_._id][this._id];E.points&&E.points.trueStart&&_.points(E.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(_){return this.tween.seek(_*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const _=this.node._id,E=this._id,k=y.tweens[_];this.pause(),this.anim&&this.anim.stop();for(const p in k)delete y.tweens[_][p];delete y.attrs[_][E],y.tweens[_]&&(Object.keys(y.tweens[_]).length===0&&delete y.tweens[_],Object.keys(y.attrs[_]).length===0&&delete y.attrs[_])}}t.Tween=y,y.attrs={},y.tweens={},r.Node.prototype.to=function(v){const _=v.onFinish;v.node=this,v.onFinish=function(){this.destroy(),_&&_()},new y(v).play()},t.Easings={BackEaseIn(v,_,E,k){return E*(v/=k)*v*((1.70158+1)*v-1.70158)+_},BackEaseOut(v,_,E,k){return E*((v=v/k-1)*v*((1.70158+1)*v+1.70158)+1)+_},BackEaseInOut(v,_,E,k){let p=1.70158;return(v/=k/2)<1?E/2*(v*v*(((p*=1.525)+1)*v-p))+_:E/2*((v-=2)*v*(((p*=1.525)+1)*v+p)+2)+_},ElasticEaseIn(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k)===1?_+E:(w||(w=k*.3),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),-(p*Math.pow(2,10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w))+_)},ElasticEaseOut(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k)===1?_+E:(w||(w=k*.3),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),p*Math.pow(2,-10*v)*Math.sin((v*k-g)*(2*Math.PI)/w)+E+_)},ElasticEaseInOut(v,_,E,k,p,w){let g=0;return v===0?_:(v/=k/2)===2?_+E:(w||(w=k*(.3*1.5)),!p||p<Math.abs(E)?(p=E,g=w/4):g=w/(2*Math.PI)*Math.asin(E/p),v<1?-.5*(p*Math.pow(2,10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w))+_:p*Math.pow(2,-10*(v-=1))*Math.sin((v*k-g)*(2*Math.PI)/w)*.5+E+_)},BounceEaseOut(v,_,E,k){return(v/=k)<1/2.75?E*(7.5625*v*v)+_:v<2/2.75?E*(7.5625*(v-=1.5/2.75)*v+.75)+_:v<2.5/2.75?E*(7.5625*(v-=2.25/2.75)*v+.9375)+_:E*(7.5625*(v-=2.625/2.75)*v+.984375)+_},BounceEaseIn(v,_,E,k){return E-t.Easings.BounceEaseOut(k-v,0,E,k)+_},BounceEaseInOut(v,_,E,k){return v<k/2?t.Easings.BounceEaseIn(v*2,0,E,k)*.5+_:t.Easings.BounceEaseOut(v*2-k,0,E,k)*.5+E*.5+_},EaseIn(v,_,E,k){return E*(v/=k)*v+_},EaseOut(v,_,E,k){return-E*(v/=k)*(v-2)+_},EaseInOut(v,_,E,k){return(v/=k/2)<1?E/2*v*v+_:-E/2*(--v*(v-2)-1)+_},StrongEaseIn(v,_,E,k){return E*(v/=k)*v*v*v*v+_},StrongEaseOut(v,_,E,k){return E*((v=v/k-1)*v*v*v*v+1)+_},StrongEaseInOut(v,_,E,k){return(v/=k/2)<1?E/2*v*v*v*v*v+_:E/2*((v-=2)*v*v*v*v+2)+_},Linear(v,_,E,k){return E*v/k+_}}})(q7);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=rt,n=dn,r=nn,s=mu,i=U7,o=lp,a=Gy,c=Pd,d=Uy,f=Vn,m=$d,y=q7,v=Io,_=$i;t.Konva=n.Util._assign(e.Konva,{Util:n.Util,Transform:n.Transform,Node:r.Node,Container:s.Container,Stage:i.Stage,stages:i.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:c.Group,DD:d.DD,Shape:f.Shape,shapes:f.shapes,Animation:m.Animation,Tween:y.Tween,Easings:y.Easings,Context:v.Context,Canvas:_.Canvas}),t.default=t.Konva})(z0);var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.Arc=void 0;const qy=lt,Ore=Vn,S9=rt,By=Ue,Ire=rt;class qo extends Ore.Shape{_sceneFunc(e){const n=S9.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),s=S9.Konva.getAngle(r?360-this.angle():this.angle()),i=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),c=Math.sin(Math.min(s,Math.PI/2)),d=i*(i>0?e:n),f=o*n,m=a*(a>0?e:n),y=c*(c>0?n:e);return{x:d,y:r?-1*y:m,width:f-d,height:y-m}}}Hy.Arc=qo;qo.prototype._centroid=!0;qo.prototype.className="Arc";qo.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Ire._registerNode)(qo);qy.Factory.addGetterSetter(qo,"innerRadius",0,(0,By.getNumberValidator)());qy.Factory.addGetterSetter(qo,"outerRadius",0,(0,By.getNumberValidator)());qy.Factory.addGetterSetter(qo,"angle",0,(0,By.getNumberValidator)());qy.Factory.addGetterSetter(qo,"clockwise",!1,(0,By.getBooleanValidator)());var Wy={},up={};Object.defineProperty(up,"__esModule",{value:!0});up.Line=void 0;const Zy=lt,Are=rt,jre=Vn,B7=Ue;function wS(t,e,n,r,s,i,o){const a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),c=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2)),d=o*a/(a+c),f=o*c/(a+c),m=n-d*(s-t),y=r-d*(i-e),v=n+f*(s-t),_=r+f*(i-e);return[m,y,v,_]}function k9(t,e){const n=t.length,r=[];for(let s=2;s<n-2;s+=2){const i=wS(t[s-2],t[s-1],t[s],t[s+1],t[s+2],t[s+3],e);isNaN(i[0])||(r.push(i[0]),r.push(i[1]),r.push(t[s]),r.push(t[s+1]),r.push(i[2]),r.push(i[3]))}return r}let Ja=class extends jre.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),r=n.length,s=this.tension(),i=this.closed(),o=this.bezier();if(!r)return;let a=0;if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&r>4){const c=this.getTensionPoints(),d=c.length;for(a=i?0:4,i||e.quadraticCurveTo(c[0],c[1],c[2],c[3]);a<d-2;)e.bezierCurveTo(c[a++],c[a++],c[a++],c[a++],c[a++],c[a++]);i||e.quadraticCurveTo(c[d-2],c[d-1],n[r-2],n[r-1])}else if(o)for(a=2;a<r;)e.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);else for(a=2;a<r;a+=2)e.lineTo(n[a],n[a+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():k9(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,r=this.tension(),s=wS(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),i=wS(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=k9(e,r);return[s[2],s[3]].concat(o).concat([i[0],i[1],e[n-2],e[n-1],i[2],i[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],r=e[0],s=e[1],i=e[1],o,a;for(let c=0;c<e.length/2;c++)o=e[c*2],a=e[c*2+1],n=Math.min(n,o),r=Math.max(r,o),s=Math.min(s,a),i=Math.max(i,a);return{x:n,y:s,width:r-n,height:i-s}}};up.Line=Ja;Ja.prototype.className="Line";Ja.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Are._registerNode)(Ja);Zy.Factory.addGetterSetter(Ja,"closed",!1);Zy.Factory.addGetterSetter(Ja,"bezier",!1);Zy.Factory.addGetterSetter(Ja,"tension",0,(0,B7.getNumberValidator)());Zy.Factory.addGetterSetter(Ja,"points",[],(0,B7.getNumberArrayValidator)());var Td={},W7={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(o,a,c)=>{let d,f;const y=c/2;d=0;for(let v=0;v<20;v++)f=y*t.tValues[20][v]+y,d+=t.cValues[20][v]*r(o,a,f);return y*d};t.getCubicArcLength=e;const n=(o,a,c)=>{c===void 0&&(c=1);const d=o[0]-2*o[1]+o[2],f=a[0]-2*a[1]+a[2],m=2*o[1]-2*o[0],y=2*a[1]-2*a[0],v=4*(d*d+f*f),_=4*(d*m+f*y),E=m*m+y*y;if(v===0)return c*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const k=_/(2*v),p=E/v,w=c+k,g=p-k*k,C=w*w+g>0?Math.sqrt(w*w+g):0,$=k*k+g>0?Math.sqrt(k*k+g):0,N=k+Math.sqrt(k*k+g)!==0?g*Math.log(Math.abs((w+C)/(k+$))):0;return Math.sqrt(v)/2*(w*C-k*$+N)};t.getQuadraticArcLength=n;function r(o,a,c){const d=s(1,c,o),f=s(1,c,a),m=d*d+f*f;return Math.sqrt(m)}const s=(o,a,c)=>{const d=c.length-1;let f,m;if(d===0)return 0;if(o===0){m=0;for(let y=0;y<=d;y++)m+=t.binomialCoefficients[d][y]*Math.pow(1-a,d-y)*Math.pow(a,y)*c[y];return m}else{f=new Array(d);for(let y=0;y<d;y++)f[y]=d*(c[y+1]-c[y]);return s(o-1,a,f)}},i=(o,a,c)=>{let d=1,f=o/a,m=(o-c(f))/a,y=0;for(;d>.001;){const v=c(f+m),_=Math.abs(o-v)/a;if(_<d)d=_,f+=m;else{const E=c(f-m),k=Math.abs(o-E)/a;k<d?(d=k,f-=m):m/=2}if(y++,y>500)break}return f};t.t2length=i})(W7);Object.defineProperty(Td,"__esModule",{value:!0});Td.Path=void 0;const Mre=lt,zre=rt,Dre=Vn,Zu=W7;class Mn extends Dre.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Mn.parsePathData(this.data()),this.pathLength=Mn.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let r=!1;for(let s=0;s<n.length;s++){const i=n[s].command,o=n[s].points;switch(i){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],c=o[1],d=o[2],f=o[3],m=o[4],y=o[5],v=o[6],_=o[7],E=d>f?d:f,k=d>f?1:d/f,p=d>f?f/d:1;e.translate(a,c),e.rotate(v),e.scale(k,p),e.arc(0,0,E,m,m+y,1-_),e.scale(1/k,1/p),e.rotate(-v),e.translate(-a,-c);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(c){if(c.command==="A"){const d=c.points[4],f=c.points[5],m=c.points[4]+f;let y=Math.PI/180;if(Math.abs(d-m)<y&&(y=Math.abs(d-m)),f<0)for(let v=d-y;v>m;v-=y){const _=Mn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}else for(let v=d+y;v<m;v+=y){const _=Mn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(_.x,_.y)}}else if(c.command==="C")for(let d=0;d<=1;d+=.01){const f=Mn.getPointOnCubicBezier(d,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(f.x,f.y)}else e=e.concat(c.points)});let n=e[0],r=e[0],s=e[1],i=e[1],o,a;for(let c=0;c<e.length/2;c++)o=e[c*2],a=e[c*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(s=Math.min(s,a),i=Math.max(i,a));return{x:n,y:s,width:r-n,height:i-s}}getLength(){return this.pathLength}getPointAtLength(e){return Mn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,s){return Math.sqrt((r-e)*(r-e)+(s-n)*(s-n))}static getPathLength(e){let n=0;for(let r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let r,s=0,i=n.length;if(!i)return null;for(;s<i&&e>n[s].pathLength;)e-=n[s].pathLength,++s;if(s===i)return r=n[s-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return n[s].command==="M"?(r=n[s].points.slice(0,2),{x:r[0],y:r[1]}):{x:n[s].start.x,y:n[s].start.y};const o=n[s],a=o.points;switch(o.command){case"L":return Mn.getPointOnLine(e,o.start.x,o.start.y,a[0],a[1]);case"C":return Mn.getPointOnCubicBezier((0,Zu.t2length)(e,Mn.getPathLength(n),E=>(0,Zu.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],E)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Mn.getPointOnQuadraticBezier((0,Zu.t2length)(e,Mn.getPathLength(n),E=>(0,Zu.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],E)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const c=a[0],d=a[1],f=a[2],m=a[3],y=a[5],v=a[6];let _=a[4];return _+=y*e/o.pathLength,Mn.getPointOnEllipticalArc(c,d,f,m,_,v)}return null}static getPointOnLine(e,n,r,s,i,o,a){o=o??n,a=a??r;const c=this.getLineLength(n,r,s,i);if(c<1e-10)return{x:n,y:r};if(s===n)return{x:o,y:a+(i>r?e:-e)};const d=(i-r)/(s-n),f=Math.sqrt(e*e/(1+d*d))*(s<n?-1:1),m=d*f;if(Math.abs(a-r-d*(o-n))<1e-10)return{x:o+f,y:a+m};const y=((o-n)*(s-n)+(a-r)*(i-r))/(c*c),v=n+y*(s-n),_=r+y*(i-r),E=this.getLineLength(o,a,v,_),k=Math.sqrt(e*e-E*E),p=Math.sqrt(k*k/(1+d*d))*(s<n?-1:1),w=d*p;return{x:v+p,y:_+w}}static getPointOnCubicBezier(e,n,r,s,i,o,a,c,d){function f(k){return k*k*k}function m(k){return 3*k*k*(1-k)}function y(k){return 3*k*(1-k)*(1-k)}function v(k){return(1-k)*(1-k)*(1-k)}const _=c*f(e)+o*m(e)+s*y(e)+n*v(e),E=d*f(e)+a*m(e)+i*y(e)+r*v(e);return{x:_,y:E}}static getPointOnQuadraticBezier(e,n,r,s,i,o,a){function c(v){return v*v}function d(v){return 2*v*(1-v)}function f(v){return(1-v)*(1-v)}const m=o*c(e)+s*d(e)+n*f(e),y=a*c(e)+i*d(e)+r*f(e);return{x:m,y}}static getPointOnEllipticalArc(e,n,r,s,i,o){const a=Math.cos(o),c=Math.sin(o),d={x:r*Math.cos(i),y:s*Math.sin(i)};return{x:e+(d.x*a-d.y*c),y:n+(d.x*c+d.y*a)}}static parsePathData(e){if(!e)return[];let n=e;const r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let m=0;m<r.length;m++)n=n.replace(new RegExp(r[m],"g"),"|"+r[m]);const s=n.split("|"),i=[],o=[];let a=0,c=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let f;for(let m=1;m<s.length;m++){let y=s[m],v=y.charAt(0);for(y=y.slice(1),o.length=0;f=d.exec(y);)o.push(f[0]);const _=[];for(let E=0,k=o.length;E<k;E++){if(o[E]==="00"){_.push(0,0);continue}const p=parseFloat(o[E]);isNaN(p)?_.push(0):_.push(p)}for(;_.length>0&&!isNaN(_[0]);){let E="",k=[];const p=a,w=c;let g,C,$,N,M,A,q,G,B,Y;switch(v){case"l":a+=_.shift(),c+=_.shift(),E="L",k.push(a,c);break;case"L":a=_.shift(),c=_.shift(),k.push(a,c);break;case"m":const ie=_.shift(),se=_.shift();if(a+=ie,c+=se,E="M",i.length>2&&i[i.length-1].command==="z"){for(let ae=i.length-2;ae>=0;ae--)if(i[ae].command==="M"){a=i[ae].points[0]+ie,c=i[ae].points[1]+se;break}}k.push(a,c),v="l";break;case"M":a=_.shift(),c=_.shift(),E="M",k.push(a,c),v="L";break;case"h":a+=_.shift(),E="L",k.push(a,c);break;case"H":a=_.shift(),E="L",k.push(a,c);break;case"v":c+=_.shift(),E="L",k.push(a,c);break;case"V":c=_.shift(),E="L",k.push(a,c);break;case"C":k.push(_.shift(),_.shift(),_.shift(),_.shift()),a=_.shift(),c=_.shift(),k.push(a,c);break;case"c":k.push(a+_.shift(),c+_.shift(),a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="C",k.push(a,c);break;case"S":C=a,$=c,g=i[i.length-1],g.command==="C"&&(C=a+(a-g.points[2]),$=c+(c-g.points[3])),k.push(C,$,_.shift(),_.shift()),a=_.shift(),c=_.shift(),E="C",k.push(a,c);break;case"s":C=a,$=c,g=i[i.length-1],g.command==="C"&&(C=a+(a-g.points[2]),$=c+(c-g.points[3])),k.push(C,$,a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="C",k.push(a,c);break;case"Q":k.push(_.shift(),_.shift()),a=_.shift(),c=_.shift(),k.push(a,c);break;case"q":k.push(a+_.shift(),c+_.shift()),a+=_.shift(),c+=_.shift(),E="Q",k.push(a,c);break;case"T":C=a,$=c,g=i[i.length-1],g.command==="Q"&&(C=a+(a-g.points[0]),$=c+(c-g.points[1])),a=_.shift(),c=_.shift(),E="Q",k.push(C,$,a,c);break;case"t":C=a,$=c,g=i[i.length-1],g.command==="Q"&&(C=a+(a-g.points[0]),$=c+(c-g.points[1])),a+=_.shift(),c+=_.shift(),E="Q",k.push(C,$,a,c);break;case"A":N=_.shift(),M=_.shift(),A=_.shift(),q=_.shift(),G=_.shift(),B=a,Y=c,a=_.shift(),c=_.shift(),E="A",k=this.convertEndpointToCenterParameterization(B,Y,a,c,q,G,N,M,A);break;case"a":N=_.shift(),M=_.shift(),A=_.shift(),q=_.shift(),G=_.shift(),B=a,Y=c,a+=_.shift(),c+=_.shift(),E="A",k=this.convertEndpointToCenterParameterization(B,Y,a,c,q,G,N,M,A);break}i.push({command:E||v,points:k,start:{x:p,y:w},pathLength:this.calcLength(p,w,E||v,k)})}(v==="z"||v==="Z")&&i.push({command:"z",points:[],start:void 0,pathLength:0})}return i}static calcLength(e,n,r,s){let i,o,a,c;const d=Mn;switch(r){case"L":return d.getLineLength(e,n,s[0],s[1]);case"C":return(0,Zu.getCubicArcLength)([e,s[0],s[2],s[4]],[n,s[1],s[3],s[5]],1);case"Q":return(0,Zu.getQuadraticArcLength)([e,s[0],s[2]],[n,s[1],s[3]],1);case"A":i=0;const f=s[4],m=s[5],y=s[4]+m;let v=Math.PI/180;if(Math.abs(f-y)<v&&(v=Math.abs(f-y)),o=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),m<0)for(c=f-v;c>y;c-=v)a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(c=f+v;c<y;c+=v)a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],y,0),i+=d.getLineLength(o.x,o.y,a.x,a.y),i}return 0}static convertEndpointToCenterParameterization(e,n,r,s,i,o,a,c,d){const f=d*(Math.PI/180),m=Math.cos(f)*(e-r)/2+Math.sin(f)*(n-s)/2,y=-1*Math.sin(f)*(e-r)/2+Math.cos(f)*(n-s)/2,v=m*m/(a*a)+y*y/(c*c);v>1&&(a*=Math.sqrt(v),c*=Math.sqrt(v));let _=Math.sqrt((a*a*(c*c)-a*a*(y*y)-c*c*(m*m))/(a*a*(y*y)+c*c*(m*m)));i===o&&(_*=-1),isNaN(_)&&(_=0);const E=_*a*y/c,k=_*-c*m/a,p=(e+r)/2+Math.cos(f)*E-Math.sin(f)*k,w=(n+s)/2+Math.sin(f)*E+Math.cos(f)*k,g=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},C=function(G,B){return(G[0]*B[0]+G[1]*B[1])/(g(G)*g(B))},$=function(G,B){return(G[0]*B[1]<G[1]*B[0]?-1:1)*Math.acos(C(G,B))},N=$([1,0],[(m-E)/a,(y-k)/c]),M=[(m-E)/a,(y-k)/c],A=[(-1*m-E)/a,(-1*y-k)/c];let q=$(M,A);return C(M,A)<=-1&&(q=Math.PI),C(M,A)>=1&&(q=0),o===0&&q>0&&(q=q-2*Math.PI),o===1&&q<0&&(q=q+2*Math.PI),[p,w,a,c,N,q,f,o]}}Td.Path=Mn;Mn.prototype.className="Path";Mn.prototype._attrsAffectingSize=["data"];(0,zre._registerNode)(Mn);Mre.Factory.addGetterSetter(Mn,"data");Object.defineProperty(Wy,"__esModule",{value:!0});Wy.Arrow=void 0;const Ky=lt,Fre=up,Z7=Ue,Lre=rt,b9=Td;class yu extends Fre.Line{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,r=this.points();let s=r;const i=this.tension()!==0&&r.length>4;i&&(s=this.getTensionPoints());const o=this.pointerLength(),a=r.length;let c,d;if(i){const y=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],r[a-2],r[a-1]],v=b9.Path.calcLength(s[s.length-4],s[s.length-3],"C",y),_=b9.Path.getPointOnQuadraticBezier(Math.min(1,1-o/v),y[0],y[1],y[2],y[3],y[4],y[5]);c=r[a-2]-_.x,d=r[a-1]-_.y}else c=r[a-2]-r[a-4],d=r[a-1]-r[a-3];const f=(Math.atan2(d,c)+n)%n,m=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(f),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),i?(c=(s[0]+s[2])/2-r[0],d=(s[1]+s[3])/2-r[1]):(c=r[2]-r[0],d=r[3]-r[1]),e.rotate((Math.atan2(-d,-c)+n)%n),e.moveTo(0,0),e.lineTo(-o,m/2),e.lineTo(-o,-m/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}Wy.Arrow=yu;yu.prototype.className="Arrow";(0,Lre._registerNode)(yu);Ky.Factory.addGetterSetter(yu,"pointerLength",10,(0,Z7.getNumberValidator)());Ky.Factory.addGetterSetter(yu,"pointerWidth",10,(0,Z7.getNumberValidator)());Ky.Factory.addGetterSetter(yu,"pointerAtBeginning",!1);Ky.Factory.addGetterSetter(yu,"pointerAtEnding",!0);var Qy={};Object.defineProperty(Qy,"__esModule",{value:!0});Qy.Circle=void 0;const Ure=lt,Vre=Vn,Gre=Ue,Hre=rt;let xd=class extends Vre.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Qy.Circle=xd;xd.prototype._centroid=!0;xd.prototype.className="Circle";xd.prototype._attrsAffectingSize=["radius"];(0,Hre._registerNode)(xd);Ure.Factory.addGetterSetter(xd,"radius",0,(0,Gre.getNumberValidator)());var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.Ellipse=void 0;const B3=lt,qre=Vn,K7=Ue,Bre=rt;class el extends qre.Shape{_sceneFunc(e){const n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Yy.Ellipse=el;el.prototype.className="Ellipse";el.prototype._centroid=!0;el.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Bre._registerNode)(el);B3.Factory.addComponentsGetterSetter(el,"radius",["x","y"]);B3.Factory.addGetterSetter(el,"radiusX",0,(0,K7.getNumberValidator)());B3.Factory.addGetterSetter(el,"radiusY",0,(0,K7.getNumberValidator)());var Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.Image=void 0;const B1=dn,vu=lt,Wre=Vn,Zre=rt,cp=Ue;class Qs extends Wre.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),s=this.cornerRadius(),i=this.attrs.image;let o;if(i){const a=this.attrs.cropWidth,c=this.attrs.cropHeight;a&&c?o=[i,this.cropX(),this.cropY(),a,c,0,0,n,r]:o=[i,0,0,n,r]}(this.hasFill()||this.hasStroke()||s)&&(e.beginPath(),s?B1.Util.drawRoundedRectPath(e,n,r,s):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&(s&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){const n=this.width(),r=this.height(),s=this.cornerRadius();e.beginPath(),s?B1.Util.drawRoundedRectPath(e,n,r,s):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){const s=B1.Util.createImageElement();s.onload=function(){const i=new Qs({image:s});n(i)},s.onerror=r,s.crossOrigin="Anonymous",s.src=e}}Xy.Image=Qs;Qs.prototype.className="Image";(0,Zre._registerNode)(Qs);vu.Factory.addGetterSetter(Qs,"cornerRadius",0,(0,cp.getNumberOrArrayOfNumbersValidator)(4));vu.Factory.addGetterSetter(Qs,"image");vu.Factory.addComponentsGetterSetter(Qs,"crop",["x","y","width","height"]);vu.Factory.addGetterSetter(Qs,"cropX",0,(0,cp.getNumberValidator)());vu.Factory.addGetterSetter(Qs,"cropY",0,(0,cp.getNumberValidator)());vu.Factory.addGetterSetter(Qs,"cropWidth",0,(0,cp.getNumberValidator)());vu.Factory.addGetterSetter(Qs,"cropHeight",0,(0,cp.getNumberValidator)());var ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.Tag=ld.Label=void 0;const Jy=lt,Kre=Vn,Qre=Pd,W3=Ue,Q7=rt,Y7=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Yre="Change.konva",Xre="none",SS="up",kS="right",bS="down",ES="left",Jre=Y7.length;class Z3 extends Qre.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,r;const s=function(){n._sync()};for(r=0;r<Jre;r++)e.on(Y7[r]+Yre,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),r,s,i,o,a,c,d;if(e&&n){switch(r=e.width(),s=e.height(),i=n.pointerDirection(),o=n.pointerWidth(),d=n.pointerHeight(),a=0,c=0,i){case SS:a=r/2,c=-1*d;break;case kS:a=r+o,c=s/2;break;case bS:a=r/2,c=s+d;break;case ES:a=-1*o,c=s/2;break}n.setAttrs({x:-1*a,y:-1*c,width:r,height:s}),e.setAttrs({x:-1*a,y:-1*c})}}}ld.Label=Z3;Z3.prototype.className="Label";(0,Q7._registerNode)(Z3);class _u extends Kre.Shape{_sceneFunc(e){const n=this.width(),r=this.height(),s=this.pointerDirection(),i=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let c=0,d=0,f=0,m=0;typeof a=="number"?c=d=f=m=Math.min(a,n/2,r/2):(c=Math.min(a[0]||0,n/2,r/2),d=Math.min(a[1]||0,n/2,r/2),m=Math.min(a[2]||0,n/2,r/2),f=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(c,0),s===SS&&(e.lineTo((n-i)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+i)/2,0)),e.lineTo(n-d,0),e.arc(n-d,d,d,Math.PI*3/2,0,!1),s===kS&&(e.lineTo(n,(r-o)/2),e.lineTo(n+i,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-m),e.arc(n-m,r-m,m,0,Math.PI/2,!1),s===bS&&(e.lineTo((n+i)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-i)/2,r)),e.lineTo(f,r),e.arc(f,r-f,f,Math.PI/2,Math.PI,!1),s===ES&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*i,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,r=this.pointerWidth(),s=this.pointerHeight(),i=this.pointerDirection(),o=this.width(),a=this.height();return i===SS?(n-=s,a+=s):i===bS?a+=s:i===ES?(e-=r*1.5,o+=r):i===kS&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}}ld.Tag=_u;_u.prototype.className="Tag";(0,Q7._registerNode)(_u);Jy.Factory.addGetterSetter(_u,"pointerDirection",Xre);Jy.Factory.addGetterSetter(_u,"pointerWidth",0,(0,W3.getNumberValidator)());Jy.Factory.addGetterSetter(_u,"pointerHeight",0,(0,W3.getNumberValidator)());Jy.Factory.addGetterSetter(_u,"cornerRadius",0,(0,W3.getNumberOrArrayOfNumbersValidator)(4));var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.Rect=void 0;const ese=lt,tse=Vn,nse=rt,rse=dn,sse=Ue;let ev=class extends tse.Shape{_sceneFunc(e){const n=this.cornerRadius(),r=this.width(),s=this.height();e.beginPath(),n?rse.Util.drawRoundedRectPath(e,r,s,n):e.rect(0,0,r,s),e.closePath(),e.fillStrokeShape(this)}};dp.Rect=ev;ev.prototype.className="Rect";(0,nse._registerNode)(ev);ese.Factory.addGetterSetter(ev,"cornerRadius",0,(0,sse.getNumberOrArrayOfNumbersValidator)(4));var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.RegularPolygon=void 0;const X7=lt,ise=Vn,J7=Ue,ose=rt;class wu extends ise.Shape{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(let r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(let s=0;s<e;s++)r.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();let n=e[0].x,r=e[0].y,s=e[0].x,i=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),s=Math.min(s,o.y),i=Math.max(i,o.y)}),{x:n,y:s,width:r-n,height:i-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}tv.RegularPolygon=wu;wu.prototype.className="RegularPolygon";wu.prototype._centroid=!0;wu.prototype._attrsAffectingSize=["radius"];(0,ose._registerNode)(wu);X7.Factory.addGetterSetter(wu,"radius",0,(0,J7.getNumberValidator)());X7.Factory.addGetterSetter(wu,"sides",0,(0,J7.getNumberValidator)());var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.Ring=void 0;const eO=lt,ase=Vn,tO=Ue,lse=rt,E9=Math.PI*2;class Su extends ase.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,E9,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),E9,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}nv.Ring=Su;Su.prototype.className="Ring";Su.prototype._centroid=!0;Su.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,lse._registerNode)(Su);eO.Factory.addGetterSetter(Su,"innerRadius",0,(0,tO.getNumberValidator)());eO.Factory.addGetterSetter(Su,"outerRadius",0,(0,tO.getNumberValidator)());var rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.Sprite=void 0;const ku=lt,use=Vn,cse=$d,nO=Ue,dse=rt;class io extends use.Shape{constructor(e){super(e),this._updated=!0,this.anim=new cse.Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),r=this.frameIndex(),s=r*4,i=this.animations()[n],o=this.frameOffsets(),a=i[s+0],c=i[s+1],d=i[s+2],f=i[s+3],m=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,d,f),e.closePath(),e.fillStrokeShape(this)),m)if(o){const y=o[n],v=r*2;e.drawImage(m,a,c,d,f,y[v+0],y[v+1],d,f)}else e.drawImage(m,a,c,d,f,0,0,d,f)}_hitFunc(e){const n=this.animation(),r=this.frameIndex(),s=r*4,i=this.animations()[n],o=this.frameOffsets(),a=i[s+2],c=i[s+3];if(e.beginPath(),o){const d=o[n],f=r*2;e.rect(d[f+0],d[f+1],a,c)}else e.rect(0,0,a,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),r=this.animations(),s=r[n],i=s.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}}rv.Sprite=io;io.prototype.className="Sprite";(0,dse._registerNode)(io);ku.Factory.addGetterSetter(io,"animation");ku.Factory.addGetterSetter(io,"animations");ku.Factory.addGetterSetter(io,"frameOffsets");ku.Factory.addGetterSetter(io,"image");ku.Factory.addGetterSetter(io,"frameIndex",0,(0,nO.getNumberValidator)());ku.Factory.addGetterSetter(io,"frameRate",17,(0,nO.getNumberValidator)());ku.Factory.backCompat(io,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.Star=void 0;const K3=lt,fse=Vn,Q3=Ue,hse=rt;class tl extends fse.Shape{_sceneFunc(e){const n=this.innerRadius(),r=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(let i=1;i<s*2;i++){const o=i%2===0?r:n,a=o*Math.sin(i*Math.PI/s),c=-1*o*Math.cos(i*Math.PI/s);e.lineTo(a,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}sv.Star=tl;tl.prototype.className="Star";tl.prototype._centroid=!0;tl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,hse._registerNode)(tl);K3.Factory.addGetterSetter(tl,"numPoints",5,(0,Q3.getNumberValidator)());K3.Factory.addGetterSetter(tl,"innerRadius",0,(0,Q3.getNumberValidator)());K3.Factory.addGetterSetter(tl,"outerRadius",0,(0,Q3.getNumberValidator)());var Nd={};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.Text=void 0;Nd.stringToArray=bl;const CS=dn,Pr=lt,pse=Vn,W1=rt,nl=Ue,mse=rt;function bl(t){return[...t].reduce((e,n,r,s)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const i=s[r+1];i&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(i)?(e.push(n+i),s[r+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(s[r+1]||""))?e.push(n+s[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const Ku="auto",gse="center",rO="inherit",df="justify",yse="Change.konva",vse="2d",C9="-",sO="left",_se="text",wse="Text",Sse="top",kse="bottom",P9="middle",iO="normal",bse="px ",Bm=" ",Ese="right",$9="rtl",Cse="word",Pse="char",T9="none",Z1="",oO=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],$se=oO.length;function Tse(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}let Wm;function K1(){return Wm||(Wm=CS.Util.createCanvasElement().getContext(vse),Wm)}function xse(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Nse(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Rse(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let yn=class extends pse.Shape{constructor(e){super(Rse(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<$se;n++)this.on(oO[n]+yse,this._setTextData);this._setTextData()}_sceneFunc(e){const n=this.textArr,r=n.length;if(!this.text())return;let s=this.padding(),i=this.fontSize(),o=this.lineHeight()*i,a=this.verticalAlign(),c=this.direction(),d=0,f=this.align(),m=this.getWidth(),y=this.letterSpacing(),v=this.fill(),_=this.textDecoration(),E=_.indexOf("underline")!==-1,k=_.indexOf("line-through")!==-1,p;c=c===rO?e.direction:c;let w=o/2,g=P9;if(W1.Konva._fixTextRendering){const C=this.measureSize("M");g="alphabetic",w=(C.fontBoundingBoxAscent-C.fontBoundingBoxDescent)/2+o/2}for(c===$9&&e.setAttr("direction",c),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",g),e.setAttr("textAlign",sO),a===P9?d=(this.getHeight()-r*o-s*2)/2:a===kse&&(d=this.getHeight()-r*o-s*2),e.translate(s,d+s),p=0;p<r;p++){let C=0,$=0;const N=n[p],M=N.text,A=N.width,q=N.lastInParagraph;if(e.save(),f===Ese?C+=m-A-s*2:f===gse&&(C+=(m-A-s*2)/2),E){e.save(),e.beginPath();const G=W1.Konva._fixTextRendering?Math.round(i/4):Math.round(i/2),B=C,Y=w+$+G;e.moveTo(B,Y);const ie=f===df&&!q?m-s*2:A;e.lineTo(B+Math.round(ie),Y),e.lineWidth=i/15;const se=this._getLinearGradient();e.strokeStyle=se||v,e.stroke(),e.restore()}if(k){e.save(),e.beginPath();const G=W1.Konva._fixTextRendering?-Math.round(i/4):0;e.moveTo(C,w+$+G);const B=f===df&&!q?m-s*2:A;e.lineTo(C+Math.round(B),w+$+G),e.lineWidth=i/15;const Y=this._getLinearGradient();e.strokeStyle=Y||v,e.stroke(),e.restore()}if(c!==$9&&(y!==0||f===df)){const G=M.split(" ").length-1,B=bl(M);for(let Y=0;Y<B.length;Y++){const ie=B[Y];ie===" "&&!q&&f===df&&(C+=(m-s*2-A)/G),this._partialTextX=C,this._partialTextY=w+$,this._partialText=ie,e.fillStrokeShape(this),C+=this.measureSize(ie).width+y}}else y!==0&&e.setAttr("letterSpacing",`${y}px`),this._partialTextX=C,this._partialTextY=w+$,this._partialText=M,e.fillStrokeShape(this);e.restore(),r>1&&(w+=o)}}_hitFunc(e){const n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=CS.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(_se,n),this}getWidth(){return this.attrs.width===Ku||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Ku||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return CS.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,s,i,o,a,c,d,f,m,y;let v=K1(),_=this.fontSize(),E;v.save(),v.font=this._getContextFont(),E=v.measureText(e),v.restore();const k=_/100;return{actualBoundingBoxAscent:(n=E.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*k,actualBoundingBoxDescent:(r=E.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(s=E.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*k,actualBoundingBoxRight:(i=E.actualBoundingBoxRight)!==null&&i!==void 0?i:75.732421875*k,alphabeticBaseline:(o=E.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=E.emHeightAscent)!==null&&a!==void 0?a:100*k,emHeightDescent:(c=E.emHeightDescent)!==null&&c!==void 0?c:-20*k,fontBoundingBoxAscent:(d=E.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*k,fontBoundingBoxDescent:(f=E.fontBoundingBoxDescent)!==null&&f!==void 0?f:21*k,hangingBaseline:(m=E.hangingBaseline)!==null&&m!==void 0?m:72.80000305175781*k,ideographicBaseline:(y=E.ideographicBaseline)!==null&&y!==void 0?y:-21*k,width:E.width,height:_}}_getContextFont(){return this.fontStyle()+Bm+this.fontVariant()+Bm+(this.fontSize()+bse)+Tse(this.fontFamily())}_addTextLine(e){this.align()===df&&(e=e.trim());const r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),r=e.length;return K1().measureText(e).width+n*r}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),r=0,s=this.lineHeight()*n,i=this.attrs.width,o=this.attrs.height,a=i!==Ku&&i!==void 0,c=o!==Ku&&o!==void 0,d=this.padding(),f=i-d*2,m=o-d*2,y=0,v=this.wrap(),_=v!==T9,E=v!==Pse&&_,k=this.ellipsis();this.textArr=[],K1().font=this._getContextFont();const p=k?this._getTextWidth(Z1):0;for(let w=0,g=e.length;w<g;++w){let C=e[w],$=this._getTextWidth(C);if(a&&$>f)for(;C.length>0;){let N=0,M=bl(C).length,A="",q=0;for(;N<M;){const G=N+M>>>1,B=bl(C),Y=B.slice(0,G+1).join(""),ie=this._getTextWidth(Y);(k&&c&&y+s>m?ie+p:ie)<=f?(N=G+1,A=Y,q=ie):M=G}if(A){if(E){const Y=bl(C),ie=bl(A),se=Y[ie.length],ae=se===Bm||se===C9;let ve;if(ae&&q<=f)ve=ie.length;else{const $e=ie.lastIndexOf(Bm),ee=ie.lastIndexOf(C9);ve=Math.max($e,ee)+1}ve>0&&(N=ve,A=Y.slice(0,N).join(""),q=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),r=Math.max(r,q),y+=s,this._shouldHandleEllipsis(y)){this._tryToAddEllipsisToLastLine();break}if(C=bl(C).slice(N).join("").trimLeft(),C.length>0&&($=this._getTextWidth(C),$<=f)){this._addTextLine(C),y+=s,r=Math.max(r,$);break}}else break}else this._addTextLine(C),y+=s,r=Math.max(r,$),this._shouldHandleEllipsis(y)&&w<g-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),c&&y+s>m)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){const n=+this.fontSize(),r=this.lineHeight()*n,s=this.attrs.height,i=s!==Ku&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==T9)||i&&e+r>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==Ku&&e!==void 0,r=this.padding(),s=e-r*2,i=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!i||(n&&(this._getTextWidth(o.text+Z1)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Z1))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};Nd.Text=yn;yn.prototype._fillFunc=xse;yn.prototype._strokeFunc=Nse;yn.prototype.className=wse;yn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,mse._registerNode)(yn);Pr.Factory.overWriteSetter(yn,"width",(0,nl.getNumberOrAutoValidator)());Pr.Factory.overWriteSetter(yn,"height",(0,nl.getNumberOrAutoValidator)());Pr.Factory.addGetterSetter(yn,"direction",rO);Pr.Factory.addGetterSetter(yn,"fontFamily","Arial");Pr.Factory.addGetterSetter(yn,"fontSize",12,(0,nl.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"fontStyle",iO);Pr.Factory.addGetterSetter(yn,"fontVariant",iO);Pr.Factory.addGetterSetter(yn,"padding",0,(0,nl.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"align",sO);Pr.Factory.addGetterSetter(yn,"verticalAlign",Sse);Pr.Factory.addGetterSetter(yn,"lineHeight",1,(0,nl.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"wrap",Cse);Pr.Factory.addGetterSetter(yn,"ellipsis",!1,(0,nl.getBooleanValidator)());Pr.Factory.addGetterSetter(yn,"letterSpacing",0,(0,nl.getNumberValidator)());Pr.Factory.addGetterSetter(yn,"text","",(0,nl.getStringValidator)());Pr.Factory.addGetterSetter(yn,"textDecoration","");var iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.TextPath=void 0;const Q1=dn,Ni=lt,Ose=Vn,ff=Td,Y1=Nd,aO=Ue,Ise=rt,Ase="",lO="normal";function uO(t){t.fillText(this.partialText,0,0)}function cO(t){t.strokeText(this.partialText,0,0)}class Gn extends Ose.Shape{constructor(e){super(e),this.dummyCanvas=Q1.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ff.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e-1>n?null:ff.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ff.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),r=this.fill(),s=this.fontSize(),i=this.glyphInfo;n==="underline"&&e.beginPath();for(let o=0;o<i.length;o++){e.save();const a=i[o].p0;e.translate(a.x,a.y),e.rotate(i[o].rotation),this.partialText=i[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const r=n[0].p0;e.moveTo(r.x,r.y)}for(let r=0;r<n.length;r++){const s=n[r].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Q1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Y1.Text.prototype.setText.call(this,e)}_getContextFont(){return Y1.Text.prototype._getContextFont.call(this)}_getTextSize(e){const r=this.dummyCanvas.getContext("2d");r.save(),r.font=this._getContextFont();const s=r.measureText(e);return r.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),s=this.align(),i=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const c=(0,Y1.stringToArray)(this.text());let d=a;for(let f=0;f<c.length;f++){const m=this._getPointAtLength(d);if(!m)return;let y=this._getTextSize(c[f]).width+r;if(c[f]===" "&&s==="justify"){const w=this.text().split(" ").length-1;y+=(this.pathLength-o)/w}const v=this._getPointAtLength(d+y);if(!v)return;const _=ff.Path.getLineLength(m.x,m.y,v.x,v.y);let E=0;if(i)try{E=i(c[f-1],c[f])*this.fontSize()}catch{E=0}m.x+=E,v.x+=E,this.textWidth+=E;const k=ff.Path.getPointOnLine(E+_/2,m.x,m.y,v.x,v.y),p=Math.atan2(v.y-m.y,v.x-m.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:c[f],rotation:p,p0:m,p1:v}),d+=y}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(d){e.push(d.p0.x),e.push(d.p0.y),e.push(d.p1.x),e.push(d.p1.y)});let n=e[0]||0,r=e[0]||0,s=e[1]||0,i=e[1]||0,o,a;for(let d=0;d<e.length/2;d++)o=e[d*2],a=e[d*2+1],n=Math.min(n,o),r=Math.max(r,o),s=Math.min(s,a),i=Math.max(i,a);const c=this.fontSize();return{x:n-c/2,y:s-c/2,width:r-n+c,height:i-s+c}}destroy(){return Q1.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}iv.TextPath=Gn;Gn.prototype._fillFunc=uO;Gn.prototype._strokeFunc=cO;Gn.prototype._fillFuncHit=uO;Gn.prototype._strokeFuncHit=cO;Gn.prototype.className="TextPath";Gn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,Ise._registerNode)(Gn);Ni.Factory.addGetterSetter(Gn,"data");Ni.Factory.addGetterSetter(Gn,"fontFamily","Arial");Ni.Factory.addGetterSetter(Gn,"fontSize",12,(0,aO.getNumberValidator)());Ni.Factory.addGetterSetter(Gn,"fontStyle",lO);Ni.Factory.addGetterSetter(Gn,"align","left");Ni.Factory.addGetterSetter(Gn,"letterSpacing",0,(0,aO.getNumberValidator)());Ni.Factory.addGetterSetter(Gn,"textBaseline","middle");Ni.Factory.addGetterSetter(Gn,"fontVariant",lO);Ni.Factory.addGetterSetter(Gn,"text",Ase);Ni.Factory.addGetterSetter(Gn,"textDecoration","");Ni.Factory.addGetterSetter(Gn,"kerningFunc",void 0);var ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.Transformer=void 0;const It=dn,Et=lt,x9=nn,jse=Vn,Mse=dp,N9=Pd,hi=rt,rl=Ue,zse=rt,dO="tr-konva",Dse=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${dO}`).join(" "),R9="nodesRect",Fse=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Lse={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Use="ontouchstart"in hi.Konva._global;function Vse(t,e,n){if(t==="rotater")return n;e+=It.Util.degToRad(Lse[t]||0);const r=(It.Util.radToDeg(e)%360+360)%360;return It.Util._inRange(r,315+22.5,360)||It.Util._inRange(r,0,22.5)?"ns-resize":It.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":It.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":It.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":It.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":It.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":It.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":It.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(It.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}const F0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Gse(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function fO(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),s=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:r,y:s}}function Hse(t,e){const n=Gse(t);return fO(t,e,n)}function qse(t,e,n){let r=e;for(let s=0;s<t.length;s++){const i=hi.Konva.getAngle(t[s]),o=Math.abs(i-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=i)}return r}let PS=0;class mt extends N9.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Dse,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return It.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return dO+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(s=>s.isAncestorOf(this)?(It.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const i=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,i)}s.on(Fse.map(o=>o+`.${this._getEventNamespace()}`).join(" "),i),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,i),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const s=e.getAbsolutePosition(),i=s.x-n.x,o=s.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const c=a.getAbsolutePosition();a.setAbsolutePosition({x:c.x+i,y:c.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(R9),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(R9,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),i=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=s.x*i.x-e.offsetX()*i.x,c=s.y*i.y-e.offsetY()*i.y,d=(hi.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),f={x:o.x+a*Math.cos(d)+c*Math.sin(-d),y:o.y+c*Math.cos(d)+a*Math.sin(d),width:s.width*i.x,height:s.height*i.y,rotation:d};return fO(f,-hi.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(d=>{const f=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),m=[{x:f.x,y:f.y},{x:f.x+f.width,y:f.y},{x:f.x+f.width,y:f.y+f.height},{x:f.x,y:f.y+f.height}],y=d.getAbsoluteTransform();m.forEach(function(v){const _=y.point(v);n.push(_)})});const r=new It.Transform;r.rotate(-hi.Konva.getAngle(this.rotation()));let s=1/0,i=1/0,o=-1/0,a=-1/0;n.forEach(function(d){const f=r.point(d);s===void 0&&(s=o=f.x,i=a=f.y),s=Math.min(s,f.x),i=Math.min(i,f.y),o=Math.max(o,f.x),a=Math.max(a,f.y)}),r.invert();const c=r.point({x:s,y:i});return{x:c.x,y:c.y,width:o-s,height:a-i,rotation:hi.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),F0.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new Mse.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Use?10:"auto"}),r=this;n.on("mousedown touchstart",function(s){r._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{const s=hi.Konva.getAngle(this.rotation()),i=this.rotateAnchorCursor(),o=Vse(e,s,i);n.getStage().content&&(n.getStage().content.style.cursor=o),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new jse.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){const s=r.getParent(),i=s.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.moveTo(r.width()/2,-i),s.rotateEnabled()&&s.rotateLineVisible()&&n.lineTo(r.width()/2,-s.rotateAnchorOffset()*It.Util._sign(r.height())-i),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();n.beginPath(),n.rect(-s,-s,r.width()+s*2,r.height()+s*2),n.fillStrokeShape(r)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),r=n.width,s=n.height,i=Math.sqrt(Math.pow(r,2)+Math.pow(s,2));this.sin=Math.abs(s/i),this.cos=Math.abs(r/i),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},PS++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){let n,r,s;const i=this.findOne("."+this._movingAnchorName),o=i.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let c={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const d=i.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(d,c,e)),i.setAbsolutePosition(c);const f=i.getAbsolutePosition();if(d.x===f.x&&d.y===f.y)return;if(this._movingAnchorName==="rotater"){const w=this._getNodeRect();n=i.x()-w.width/2,r=-i.y()+w.height/2;let g=Math.atan2(-r,n)+Math.PI/2;w.height<0&&(g-=Math.PI);const $=hi.Konva.getAngle(this.rotation())+g,N=hi.Konva.getAngle(this.rotationSnapTolerance()),A=qse(this.rotationSnaps(),$,N)-w.rotation,q=Hse(w,A);this._fitNodesInto(q,e);return}const m=this.shiftBehavior();let y;m==="inverted"?y=this.keepRatio()&&!e.shiftKey:m==="none"?y=this.keepRatio():y=this.keepRatio()||e.shiftKey;let v=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(w.x-i.x(),2)+Math.pow(w.y-i.y(),2));const g=this.findOne(".top-left").x()>w.x?-1:1,C=this.findOne(".top-left").y()>w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".top-left").x(w.x-n),this.findOne(".top-left").y(w.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(i.y());else if(this._movingAnchorName==="top-right"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(i.x()-w.x,2)+Math.pow(w.y-i.y(),2));const g=this.findOne(".top-right").x()<w.x?-1:1,C=this.findOne(".top-right").y()>w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".top-right").x(w.x+n),this.findOne(".top-right").y(w.y-r)}var _=i.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(i.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(i.x());else if(this._movingAnchorName==="bottom-left"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(w.x-i.x(),2)+Math.pow(i.y()-w.y,2));const g=w.x<i.x()?-1:1,C=i.y()<w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,i.x(w.x-n),i.y(w.y+r)}_=i.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(i.y());else if(this._movingAnchorName==="bottom-right"){if(y){const w=v?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(i.x()-w.x,2)+Math.pow(i.y()-w.y,2));const g=this.findOne(".bottom-right").x()<w.x?-1:1,C=this.findOne(".bottom-right").y()<w.y?-1:1;n=s*this.cos*g,r=s*this.sin*C,this.findOne(".bottom-right").x(w.x+n),this.findOne(".bottom-right").y(w.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(v=this.centeredScaling()||e.altKey,v){const w=this.findOne(".top-left"),g=this.findOne(".bottom-right"),C=w.x(),$=w.y(),N=this.getWidth()-g.x(),M=this.getHeight()-g.y();g.move({x:-C,y:-$}),w.move({x:N,y:M})}const E=this.findOne(".top-left").getAbsolutePosition();n=E.x,r=E.y;const k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),p=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:k,height:p,rotation:hi.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const r=this.getNode();PS--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(s=>{var i;s._fire("transformend",{evt:e,target:s}),(i=s.getLayer())===null||i===void 0||i.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const r=this._getNodeRect(),s=1;if(It.Util._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(It.Util._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const i=new It.Transform;if(i.rotate(hi.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const y=i.point({x:-this.padding()*2,y:0});e.x+=y.x,e.y+=y.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const y=i.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const y=i.point({x:0,y:-this.padding()*2});e.x+=y.x,e.y+=y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const y=i.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=y.x,this._anchorDragOffset.y-=y.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const y=this.boundBoxFunc()(r,e);y?e=y:It.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new It.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/o,r.height/o);const c=new It.Transform,d=e.width/o,f=e.height/o;this.flipEnabled()===!1?(c.translate(e.x,e.y),c.rotate(e.rotation),c.translate(e.width<0?e.width:0,e.height<0?e.height:0),c.scale(Math.abs(d),Math.abs(f))):(c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(d,f));const m=c.multiply(a.invert());this._nodes.forEach(y=>{var v;const _=y.getParent().getAbsoluteTransform(),E=y.getTransform().copy();E.translate(y.offsetX(),y.offsetY());const k=new It.Transform;k.multiply(_.copy().invert()).multiply(m).multiply(_).multiply(E);const p=k.decompose();y.setAttrs(p),(v=y.getLayer())===null||v===void 0||v.batchDraw()}),this.rotation(It.Util._getRotation(e.rotation)),this._nodes.forEach(y=>{this._fire("transform",{evt:n,target:y}),y._fire("transform",{evt:n,target:y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(It.Util._getRotation(n.rotation));const r=n.width,s=n.height,i=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),c=this.anchorSize(),d=this.find("._anchor");d.forEach(m=>{m.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+a,offsetY:c/2+a,visible:o&&i.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:c/2+a,visible:o&&i.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:c/2-a,offsetY:c/2+a,visible:o&&i.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:c/2+a,visible:o&&i.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:s/2,offsetX:c/2-a,visible:o&&i.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:c/2+a,offsetY:c/2-a,visible:o&&i.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:s,offsetY:c/2-a,visible:o&&i.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:s,offsetX:c/2-a,offsetY:c/2-a,visible:o&&i.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*It.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const f=this.anchorStyleFunc();f&&d.forEach(m=>{f(m)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),N9.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return x9.Node.prototype.toObject.call(this)}clone(e){return x9.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ov.Transformer=mt;mt.isTransforming=()=>PS>0;function Bse(t){return t instanceof Array||It.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){F0.indexOf(e)===-1&&It.Util.warn("Unknown anchor name: "+e+". Available names are: "+F0.join(", "))}),t||[]}mt.prototype.className="Transformer";(0,zse._registerNode)(mt);Et.Factory.addGetterSetter(mt,"enabledAnchors",F0,Bse);Et.Factory.addGetterSetter(mt,"flipEnabled",!0,(0,rl.getBooleanValidator)());Et.Factory.addGetterSetter(mt,"resizeEnabled",!0);Et.Factory.addGetterSetter(mt,"anchorSize",10,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"rotateEnabled",!0);Et.Factory.addGetterSetter(mt,"rotateLineVisible",!0);Et.Factory.addGetterSetter(mt,"rotationSnaps",[]);Et.Factory.addGetterSetter(mt,"rotateAnchorOffset",50,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"rotateAnchorCursor","crosshair");Et.Factory.addGetterSetter(mt,"rotationSnapTolerance",5,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderEnabled",!0);Et.Factory.addGetterSetter(mt,"anchorStroke","rgb(0, 161, 255)");Et.Factory.addGetterSetter(mt,"anchorStrokeWidth",1,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"anchorFill","white");Et.Factory.addGetterSetter(mt,"anchorCornerRadius",0,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderStroke","rgb(0, 161, 255)");Et.Factory.addGetterSetter(mt,"borderStrokeWidth",1,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"borderDash");Et.Factory.addGetterSetter(mt,"keepRatio",!0);Et.Factory.addGetterSetter(mt,"shiftBehavior","default");Et.Factory.addGetterSetter(mt,"centeredScaling",!1);Et.Factory.addGetterSetter(mt,"ignoreStroke",!1);Et.Factory.addGetterSetter(mt,"padding",0,(0,rl.getNumberValidator)());Et.Factory.addGetterSetter(mt,"nodes");Et.Factory.addGetterSetter(mt,"node");Et.Factory.addGetterSetter(mt,"boundBoxFunc");Et.Factory.addGetterSetter(mt,"anchorDragBoundFunc");Et.Factory.addGetterSetter(mt,"anchorStyleFunc");Et.Factory.addGetterSetter(mt,"shouldOverdrawWholeArea",!1);Et.Factory.addGetterSetter(mt,"useSingleNodeRotation",!0);Et.Factory.backCompat(mt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var av={};Object.defineProperty(av,"__esModule",{value:!0});av.Wedge=void 0;const lv=lt,Wse=Vn,Zse=rt,hO=Ue,Kse=rt;class Bo extends Wse.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Zse.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}av.Wedge=Bo;Bo.prototype.className="Wedge";Bo.prototype._centroid=!0;Bo.prototype._attrsAffectingSize=["radius"];(0,Kse._registerNode)(Bo);lv.Factory.addGetterSetter(Bo,"radius",0,(0,hO.getNumberValidator)());lv.Factory.addGetterSetter(Bo,"angle",0,(0,hO.getNumberValidator)());lv.Factory.addGetterSetter(Bo,"clockwise",!1);lv.Factory.backCompat(Bo,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var uv={};Object.defineProperty(uv,"__esModule",{value:!0});uv.Blur=void 0;const O9=lt,Qse=nn,Yse=Ue;function I9(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Xse=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Jse=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function eie(t,e){const n=t.data,r=t.width,s=t.height;let i,o,a,c,d,f,m,y,v,_,E,k,p,w,g,C,$,N,M,A;const q=e+e+1,G=r-1,B=s-1,Y=e+1,ie=Y*(Y+1)/2,se=new I9,ae=Xse[e],ve=Jse[e];let $e=null,ee=se,ue=null,L=null;for(let I=1;I<q;I++)ee=ee.next=new I9,I===Y&&($e=ee);ee.next=se,a=o=0;for(let I=0;I<s;I++){k=p=w=g=c=d=f=m=0,y=Y*(C=n[o]),v=Y*($=n[o+1]),_=Y*(N=n[o+2]),E=Y*(M=n[o+3]),c+=ie*C,d+=ie*$,f+=ie*N,m+=ie*M,ee=se;for(let V=0;V<Y;V++)ee.r=C,ee.g=$,ee.b=N,ee.a=M,ee=ee.next;for(let V=1;V<Y;V++)i=o+((G<V?G:V)<<2),c+=(ee.r=C=n[i])*(A=Y-V),d+=(ee.g=$=n[i+1])*A,f+=(ee.b=N=n[i+2])*A,m+=(ee.a=M=n[i+3])*A,k+=C,p+=$,w+=N,g+=M,ee=ee.next;ue=se,L=$e;for(let V=0;V<r;V++)n[o+3]=M=m*ae>>ve,M!==0?(M=255/M,n[o]=(c*ae>>ve)*M,n[o+1]=(d*ae>>ve)*M,n[o+2]=(f*ae>>ve)*M):n[o]=n[o+1]=n[o+2]=0,c-=y,d-=v,f-=_,m-=E,y-=ue.r,v-=ue.g,_-=ue.b,E-=ue.a,i=a+((i=V+e+1)<G?i:G)<<2,k+=ue.r=n[i],p+=ue.g=n[i+1],w+=ue.b=n[i+2],g+=ue.a=n[i+3],c+=k,d+=p,f+=w,m+=g,ue=ue.next,y+=C=L.r,v+=$=L.g,_+=N=L.b,E+=M=L.a,k-=C,p-=$,w-=N,g-=M,L=L.next,o+=4;a+=r}for(let I=0;I<r;I++){p=w=g=k=d=f=m=c=0,o=I<<2,y=Y*(C=n[o]),v=Y*($=n[o+1]),_=Y*(N=n[o+2]),E=Y*(M=n[o+3]),c+=ie*C,d+=ie*$,f+=ie*N,m+=ie*M,ee=se;for(let z=0;z<Y;z++)ee.r=C,ee.g=$,ee.b=N,ee.a=M,ee=ee.next;let V=r;for(let z=1;z<=e;z++)o=V+I<<2,c+=(ee.r=C=n[o])*(A=Y-z),d+=(ee.g=$=n[o+1])*A,f+=(ee.b=N=n[o+2])*A,m+=(ee.a=M=n[o+3])*A,k+=C,p+=$,w+=N,g+=M,ee=ee.next,z<B&&(V+=r);o=I,ue=se,L=$e;for(let z=0;z<s;z++)i=o<<2,n[i+3]=M=m*ae>>ve,M>0?(M=255/M,n[i]=(c*ae>>ve)*M,n[i+1]=(d*ae>>ve)*M,n[i+2]=(f*ae>>ve)*M):n[i]=n[i+1]=n[i+2]=0,c-=y,d-=v,f-=_,m-=E,y-=ue.r,v-=ue.g,_-=ue.b,E-=ue.a,i=I+((i=z+Y)<B?i:B)*r<<2,c+=k+=ue.r=n[i],d+=p+=ue.g=n[i+1],f+=w+=ue.b=n[i+2],m+=g+=ue.a=n[i+3],ue=ue.next,y+=C=L.r,v+=$=L.g,_+=N=L.b,E+=M=L.a,k-=C,p-=$,w-=N,g-=M,L=L.next,o+=r}}const tie=function(e){const n=Math.round(this.blurRadius());n>0&&eie(e,n)};uv.Blur=tie;O9.Factory.addGetterSetter(Qse.Node,"blurRadius",0,(0,Yse.getNumberValidator)(),O9.Factory.afterSetFilter);var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.Brighten=void 0;const A9=lt,nie=nn,rie=Ue,sie=function(t){const e=this.brightness()*255,n=t.data,r=n.length;for(let s=0;s<r;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};cv.Brighten=sie;A9.Factory.addGetterSetter(nie.Node,"brightness",0,(0,rie.getNumberValidator)(),A9.Factory.afterSetFilter);var dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.Contrast=void 0;const j9=lt,iie=nn,oie=Ue,aie=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length;let s=150,i=150,o=150;for(let a=0;a<r;a+=4)s=n[a],i=n[a+1],o=n[a+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s=s<0?0:s>255?255:s,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,n[a]=s,n[a+1]=i,n[a+2]=o};dv.Contrast=aie;j9.Factory.addGetterSetter(iie.Node,"contrast",0,(0,oie.getNumberValidator)(),j9.Factory.afterSetFilter);var fv={};Object.defineProperty(fv,"__esModule",{value:!0});fv.Emboss=void 0;const Ba=lt,hv=nn,lie=dn,pO=Ue,uie=function(t){const e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),s=this.embossBlend(),i=t.data,o=t.width,a=t.height,c=o*4;let d=0,f=0,m=a;switch(r){case"top-left":d=-1,f=-1;break;case"top":d=-1,f=0;break;case"top-right":d=-1,f=1;break;case"right":d=0,f=1;break;case"bottom-right":d=1,f=1;break;case"bottom":d=1,f=0;break;case"bottom-left":d=1,f=-1;break;case"left":d=0,f=-1;break;default:lie.Util.error("Unknown emboss direction: "+r)}do{const y=(m-1)*c;let v=d;m+v<1&&(v=0),m+v>a&&(v=0);const _=(m-1+v)*o*4;let E=o;do{const k=y+(E-1)*4;let p=f;E+p<1&&(p=0),E+p>o&&(p=0);const w=_+(E-1+p)*4,g=i[k]-i[w],C=i[k+1]-i[w+1],$=i[k+2]-i[w+2];let N=g;const M=N>0?N:-N,A=C>0?C:-C,q=$>0?$:-$;if(A>M&&(N=C),q>M&&(N=$),N*=e,s){const G=i[k]+N,B=i[k+1]+N,Y=i[k+2]+N;i[k]=G>255?255:G<0?0:G,i[k+1]=B>255?255:B<0?0:B,i[k+2]=Y>255?255:Y<0?0:Y}else{let G=n-N;G<0?G=0:G>255&&(G=255),i[k]=i[k+1]=i[k+2]=G}}while(--E)}while(--m)};fv.Emboss=uie;Ba.Factory.addGetterSetter(hv.Node,"embossStrength",.5,(0,pO.getNumberValidator)(),Ba.Factory.afterSetFilter);Ba.Factory.addGetterSetter(hv.Node,"embossWhiteLevel",.5,(0,pO.getNumberValidator)(),Ba.Factory.afterSetFilter);Ba.Factory.addGetterSetter(hv.Node,"embossDirection","top-left",void 0,Ba.Factory.afterSetFilter);Ba.Factory.addGetterSetter(hv.Node,"embossBlend",!1,void 0,Ba.Factory.afterSetFilter);var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.Enhance=void 0;const M9=lt,cie=nn,die=Ue;function X1(t,e,n,r,s){const i=n-e,o=s-r;if(i===0)return r+o/2;if(o===0)return r;let a=(t-e)/i;return a=o*a+r,a}const fie=function(t){const e=t.data,n=e.length;let r=e[0],s=r,i,o=e[1],a=o,c,d=e[2],f=d,m;const y=this.enhance();if(y===0)return;for(let g=0;g<n;g+=4)i=e[g+0],i<r?r=i:i>s&&(s=i),c=e[g+1],c<o?o=c:c>a&&(a=c),m=e[g+2],m<d?d=m:m>f&&(f=m);s===r&&(s=255,r=0),a===o&&(a=255,o=0),f===d&&(f=255,d=0);let v,_,E,k,p,w;if(y>0)v=s+y*(255-s),_=r-y*(r-0),E=a+y*(255-a),k=o-y*(o-0),p=f+y*(255-f),w=d-y*(d-0);else{const g=(s+r)*.5;v=s+y*(s-g),_=r+y*(r-g);const C=(a+o)*.5;E=a+y*(a-C),k=o+y*(o-C);const $=(f+d)*.5;p=f+y*(f-$),w=d+y*(d-$)}for(let g=0;g<n;g+=4)e[g+0]=X1(e[g+0],r,s,_,v),e[g+1]=X1(e[g+1],o,a,k,E),e[g+2]=X1(e[g+2],d,f,w,p)};pv.Enhance=fie;M9.Factory.addGetterSetter(cie.Node,"enhance",0,(0,die.getNumberValidator)(),M9.Factory.afterSetFilter);var mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.Grayscale=void 0;const hie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const s=.34*e[r]+.5*e[r+1]+.16*e[r+2];e[r]=s,e[r+1]=s,e[r+2]=s}};mv.Grayscale=hie;var gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.HSL=void 0;const ud=lt,Y3=nn,X3=Ue;ud.Factory.addGetterSetter(Y3.Node,"hue",0,(0,X3.getNumberValidator)(),ud.Factory.afterSetFilter);ud.Factory.addGetterSetter(Y3.Node,"saturation",0,(0,X3.getNumberValidator)(),ud.Factory.afterSetFilter);ud.Factory.addGetterSetter(Y3.Node,"luminance",0,(0,X3.getNumberValidator)(),ud.Factory.afterSetFilter);const pie=function(t){const e=t.data,n=e.length,r=1,s=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=r*s*Math.cos(i*Math.PI/180),c=r*s*Math.sin(i*Math.PI/180),d=.299*r+.701*a+.167*c,f=.587*r-.587*a+.33*c,m=.114*r-.114*a-.497*c,y=.299*r-.299*a-.328*c,v=.587*r+.413*a+.035*c,_=.114*r-.114*a+.293*c,E=.299*r-.3*a+1.25*c,k=.587*r-.586*a-1.05*c,p=.114*r+.886*a-.2*c;let w,g,C,$;for(let N=0;N<n;N+=4)w=e[N+0],g=e[N+1],C=e[N+2],$=e[N+3],e[N+0]=d*w+f*g+m*C+o,e[N+1]=y*w+v*g+_*C+o,e[N+2]=E*w+k*g+p*C+o,e[N+3]=$};gv.HSL=pie;var yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.HSV=void 0;const cd=lt,J3=nn,e5=Ue,mie=function(t){const e=t.data,n=e.length,r=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=r*s*Math.cos(i*Math.PI/180),a=r*s*Math.sin(i*Math.PI/180),c=.299*r+.701*o+.167*a,d=.587*r-.587*o+.33*a,f=.114*r-.114*o-.497*a,m=.299*r-.299*o-.328*a,y=.587*r+.413*o+.035*a,v=.114*r-.114*o+.293*a,_=.299*r-.3*o+1.25*a,E=.587*r-.586*o-1.05*a,k=.114*r+.886*o-.2*a;for(let p=0;p<n;p+=4){const w=e[p+0],g=e[p+1],C=e[p+2],$=e[p+3];e[p+0]=c*w+d*g+f*C,e[p+1]=m*w+y*g+v*C,e[p+2]=_*w+E*g+k*C,e[p+3]=$}};yv.HSV=mie;cd.Factory.addGetterSetter(J3.Node,"hue",0,(0,e5.getNumberValidator)(),cd.Factory.afterSetFilter);cd.Factory.addGetterSetter(J3.Node,"saturation",0,(0,e5.getNumberValidator)(),cd.Factory.afterSetFilter);cd.Factory.addGetterSetter(J3.Node,"value",0,(0,e5.getNumberValidator)(),cd.Factory.afterSetFilter);var vv={};Object.defineProperty(vv,"__esModule",{value:!0});vv.Invert=void 0;const gie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};vv.Invert=gie;var _v={};Object.defineProperty(_v,"__esModule",{value:!0});_v.Kaleidoscope=void 0;const L0=lt,mO=nn,z9=dn,gO=Ue,yie=function(t,e,n){const r=t.data,s=e.data,i=t.width,o=t.height,a=n.polarCenterX||i/2,c=n.polarCenterY||o/2;let d=Math.sqrt(a*a+c*c),f=i-a,m=o-c;const y=Math.sqrt(f*f+m*m);d=y>d?y:d;const v=o,_=i,E=360/_*Math.PI/180;for(let k=0;k<_;k+=1){const p=Math.sin(k*E),w=Math.cos(k*E);for(let g=0;g<v;g+=1){f=Math.floor(a+d*g/v*w),m=Math.floor(c+d*g/v*p);let C=(m*i+f)*4;const $=r[C+0],N=r[C+1],M=r[C+2],A=r[C+3];C=(k+g*i)*4,s[C+0]=$,s[C+1]=N,s[C+2]=M,s[C+3]=A}}},vie=function(t,e,n){const r=t.data,s=e.data,i=t.width,o=t.height,a=n.polarCenterX||i/2,c=n.polarCenterY||o/2;let d=Math.sqrt(a*a+c*c),f=i-a,m=o-c;const y=Math.sqrt(f*f+m*m);d=y>d?y:d;const v=o,_=i,E=0;let k,p;for(f=0;f<i;f+=1)for(m=0;m<o;m+=1){const w=f-a,g=m-c,C=Math.sqrt(w*w+g*g)*v/d;let $=(Math.atan2(g,w)*180/Math.PI+360+E)%360;$=$*_/360,k=Math.floor($),p=Math.floor(C);let N=(p*i+k)*4;const M=r[N+0],A=r[N+1],q=r[N+2],G=r[N+3];N=(m*i+f)*4,s[N+0]=M,s[N+1]=A,s[N+2]=q,s[N+3]=G}},_ie=function(t){const e=t.width,n=t.height;let r,s,i,o,a,c,d,f,m,y,v=Math.round(this.kaleidoscopePower());const _=Math.round(this.kaleidoscopeAngle()),E=Math.floor(e*(_%360)/360);if(v<1)return;const k=z9.Util.createCanvasElement();k.width=e,k.height=n;const p=k.getContext("2d").getImageData(0,0,e,n);z9.Util.releaseCanvas(k),yie(t,p,{polarCenterX:e/2,polarCenterY:n/2});let w=e/Math.pow(2,v);for(;w<=8;)w=w*2,v-=1;w=Math.ceil(w);let g=w,C=0,$=g,N=1;for(E+w>e&&(C=g,$=0,N=-1),s=0;s<n;s+=1)for(r=C;r!==$;r+=N)i=Math.round(r+E)%e,m=(e*s+i)*4,a=p.data[m+0],c=p.data[m+1],d=p.data[m+2],f=p.data[m+3],y=(e*s+r)*4,p.data[y+0]=a,p.data[y+1]=c,p.data[y+2]=d,p.data[y+3]=f;for(s=0;s<n;s+=1)for(g=Math.floor(w),o=0;o<v;o+=1){for(r=0;r<g+1;r+=1)m=(e*s+r)*4,a=p.data[m+0],c=p.data[m+1],d=p.data[m+2],f=p.data[m+3],y=(e*s+g*2-r-1)*4,p.data[y+0]=a,p.data[y+1]=c,p.data[y+2]=d,p.data[y+3]=f;g*=2}vie(p,t,{})};_v.Kaleidoscope=_ie;L0.Factory.addGetterSetter(mO.Node,"kaleidoscopePower",2,(0,gO.getNumberValidator)(),L0.Factory.afterSetFilter);L0.Factory.addGetterSetter(mO.Node,"kaleidoscopeAngle",0,(0,gO.getNumberValidator)(),L0.Factory.afterSetFilter);var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.Mask=void 0;const D9=lt,wie=nn,Sie=Ue;function Zm(t,e,n){let r=(n*t.width+e)*4;const s=[];return s.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),s}function hf(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function kie(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function bie(t,e){const n=Zm(t,0,0),r=Zm(t,t.width-1,0),s=Zm(t,0,t.height-1),i=Zm(t,t.width-1,t.height-1),o=e||10;if(hf(n,r)<o&&hf(r,i)<o&&hf(i,s)<o&&hf(s,n)<o){const a=kie([r,n,i,s]),c=[];for(let d=0;d<t.width*t.height;d++){const f=hf(a,[t.data[d*4],t.data[d*4+1],t.data[d*4+2]]);c[d]=f<o?0:255}return c}}function Eie(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Cie(t,e,n){const r=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f===255*8?255:0}return o}function Pie(t,e,n){const r=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f>=255*4?255:0}return o}function $ie(t,e,n){const r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(r.length)),i=Math.floor(s/2),o=[];for(let a=0;a<n;a++)for(let c=0;c<e;c++){const d=a*e+c;let f=0;for(let m=0;m<s;m++)for(let y=0;y<s;y++){const v=a+m-i,_=c+y-i;if(v>=0&&v<n&&_>=0&&_<e){const E=v*e+_,k=r[m*s+y];f+=t[E]*k}}o[d]=f}return o}const Tie=function(t){const e=this.threshold();let n=bie(t,e);return n&&(n=Cie(n,t.width,t.height),n=Pie(n,t.width,t.height),n=$ie(n,t.width,t.height),Eie(t,n)),t};wv.Mask=Tie;D9.Factory.addGetterSetter(wie.Node,"threshold",0,(0,Sie.getNumberValidator)(),D9.Factory.afterSetFilter);var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.Noise=void 0;const F9=lt,xie=nn,Nie=Ue,Rie=function(t){const e=this.noise()*255,n=t.data,r=n.length,s=e/2;for(let i=0;i<r;i+=4)n[i+0]+=s-2*s*Math.random(),n[i+1]+=s-2*s*Math.random(),n[i+2]+=s-2*s*Math.random()};Sv.Noise=Rie;F9.Factory.addGetterSetter(xie.Node,"noise",.2,(0,Nie.getNumberValidator)(),F9.Factory.afterSetFilter);var kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.Pixelate=void 0;const L9=lt,Oie=dn,Iie=nn,Aie=Ue,jie=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,s=Math.ceil(n/e),i=Math.ceil(r/e),o=t.data;if(e<=0){Oie.Util.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let c=0;c<i;c+=1){let d=0,f=0,m=0,y=0;const v=a*e,_=v+e,E=c*e,k=E+e;let p=0;for(let w=v;w<_;w+=1)if(!(w>=n))for(let g=E;g<k;g+=1){if(g>=r)continue;const C=(n*g+w)*4;d+=o[C+0],f+=o[C+1],m+=o[C+2],y+=o[C+3],p+=1}d=d/p,f=f/p,m=m/p,y=y/p;for(let w=v;w<_;w+=1)if(!(w>=n))for(let g=E;g<k;g+=1){if(g>=r)continue;const C=(n*g+w)*4;o[C+0]=d,o[C+1]=f,o[C+2]=m,o[C+3]=y}}};kv.Pixelate=jie;L9.Factory.addGetterSetter(Iie.Node,"pixelSize",8,(0,Aie.getNumberValidator)(),L9.Factory.afterSetFilter);var bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.Posterize=void 0;const U9=lt,Mie=nn,zie=Ue,Die=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,s=255/e;for(let i=0;i<r;i+=1)n[i]=Math.floor(n[i]/s)*s};bv.Posterize=Die;U9.Factory.addGetterSetter(Mie.Node,"levels",.5,(0,zie.getNumberValidator)(),U9.Factory.afterSetFilter);var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.RGB=void 0;const U0=lt,t5=nn,Fie=Ue,Lie=function(t){const e=t.data,n=e.length,r=this.red(),s=this.green(),i=this.blue();for(let o=0;o<n;o+=4){const a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255;e[o]=a*r,e[o+1]=a*s,e[o+2]=a*i,e[o+3]=e[o+3]}};Ev.RGB=Lie;U0.Factory.addGetterSetter(t5.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});U0.Factory.addGetterSetter(t5.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});U0.Factory.addGetterSetter(t5.Node,"blue",0,Fie.RGBComponent,U0.Factory.afterSetFilter);var Cv={};Object.defineProperty(Cv,"__esModule",{value:!0});Cv.RGBA=void 0;const Ih=lt,Pv=nn,Uie=Ue,Vie=function(t){const e=t.data,n=e.length,r=this.red(),s=this.green(),i=this.blue(),o=this.alpha();for(let a=0;a<n;a+=4){const c=1-o;e[a]=r*o+e[a]*c,e[a+1]=s*o+e[a+1]*c,e[a+2]=i*o+e[a+2]*c}};Cv.RGBA=Vie;Ih.Factory.addGetterSetter(Pv.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Ih.Factory.addGetterSetter(Pv.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Ih.Factory.addGetterSetter(Pv.Node,"blue",0,Uie.RGBComponent,Ih.Factory.afterSetFilter);Ih.Factory.addGetterSetter(Pv.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var $v={};Object.defineProperty($v,"__esModule",{value:!0});$v.Sepia=void 0;const Gie=function(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const s=e[r+0],i=e[r+1],o=e[r+2];e[r+0]=Math.min(255,s*.393+i*.769+o*.189),e[r+1]=Math.min(255,s*.349+i*.686+o*.168),e[r+2]=Math.min(255,s*.272+i*.534+o*.131)}};$v.Sepia=Gie;var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.Solarize=void 0;const Hie=function(t){const e=t.data,n=t.width,r=t.height,s=n*4;let i=r;do{const o=(i-1)*s;let a=n;do{const c=o+(a-1)*4;let d=e[c],f=e[c+1],m=e[c+2];d>127&&(d=255-d),f>127&&(f=255-f),m>127&&(m=255-m),e[c]=d,e[c+1]=f,e[c+2]=m}while(--a)}while(--i)};Tv.Solarize=Hie;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.Threshold=void 0;const V9=lt,qie=nn,Bie=Ue,Wie=function(t){const e=this.threshold()*255,n=t.data,r=n.length;for(let s=0;s<r;s+=1)n[s]=n[s]<e?0:255};xv.Threshold=Wie;V9.Factory.addGetterSetter(qie.Node,"threshold",.5,(0,Bie.getNumberValidator)(),V9.Factory.afterSetFilter);Object.defineProperty(Fy,"__esModule",{value:!0});Fy.Konva=void 0;const G9=z0,Zie=Hy,Kie=Wy,Qie=Qy,Yie=Yy,Xie=Xy,H9=ld,Jie=up,eoe=Td,toe=dp,noe=tv,roe=nv,soe=rv,ioe=sv,ooe=Nd,aoe=iv,loe=ov,uoe=av,coe=uv,doe=cv,foe=dv,hoe=fv,poe=pv,moe=mv,goe=gv,yoe=yv,voe=vv,_oe=_v,woe=wv,Soe=Sv,koe=kv,boe=bv,Eoe=Ev,Coe=Cv,Poe=$v,$oe=Tv,Toe=xv;Fy.Konva=G9.Konva.Util._assign(G9.Konva,{Arc:Zie.Arc,Arrow:Kie.Arrow,Circle:Qie.Circle,Ellipse:Yie.Ellipse,Image:Xie.Image,Label:H9.Label,Tag:H9.Tag,Line:Jie.Line,Path:eoe.Path,Rect:toe.Rect,RegularPolygon:noe.RegularPolygon,Ring:roe.Ring,Sprite:soe.Sprite,Star:ioe.Star,Text:ooe.Text,TextPath:aoe.TextPath,Transformer:loe.Transformer,Wedge:uoe.Wedge,Filters:{Blur:coe.Blur,Brighten:doe.Brighten,Contrast:foe.Contrast,Emboss:hoe.Emboss,Enhance:poe.Enhance,Grayscale:moe.Grayscale,HSL:goe.HSL,HSV:yoe.HSV,Invert:voe.Invert,Kaleidoscope:_oe.Kaleidoscope,Mask:woe.Mask,Noise:Soe.Noise,Pixelate:koe.Pixelate,Posterize:boe.Posterize,RGB:Eoe.RGB,RGBA:Coe.RGBA,Sepia:Poe.Sepia,Solarize:$oe.Solarize,Threshold:Toe.Threshold}});var xoe=z7.exports;Object.defineProperty(xoe,"__esModule",{value:!0});const Noe=Fy;z7.exports=Noe.Konva;var $S={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;var n=z0;Object.defineProperty(e,"Konva",{enumerable:!0,get:function(){return n.Konva}});const r=z0;t.exports=r.Konva})($S,$S.exports);var Roe=$S.exports;const Ah=Lh(Roe);var yO={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ooe=function(e){var n={},r=Q,s=If,i=Object.assign;function o(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,h=1;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),$=Symbol.iterator;function N(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}function M(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case f:return"Fragment";case d:return"Portal";case y:return"Profiler";case m:return"StrictMode";case k:return"Suspense";case p:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case _:return(l.displayName||"Context")+".Consumer";case v:return(l._context.displayName||"Context")+".Provider";case E:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case w:return u=l.displayName||null,u!==null?u:M(l.type)||"Memo";case g:u=l._payload,l=l._init;try{return M(l(u))}catch{}}return null}function A(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(u);case 8:return u===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function q(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,u.flags&4098&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function G(l){if(q(l)!==l)throw Error(o(188))}function B(l){var u=l.alternate;if(!u){if(u=q(l),u===null)throw Error(o(188));return u!==l?null:l}for(var h=l,S=u;;){var P=h.return;if(P===null)break;var x=P.alternate;if(x===null){if(S=P.return,S!==null){h=S;continue}break}if(P.child===x.child){for(x=P.child;x;){if(x===h)return G(P),l;if(x===S)return G(P),u;x=x.sibling}throw Error(o(188))}if(h.return!==S.return)h=P,S=x;else{for(var D=!1,X=P.child;X;){if(X===h){D=!0,h=P,S=x;break}if(X===S){D=!0,S=P,h=x;break}X=X.sibling}if(!D){for(X=x.child;X;){if(X===h){D=!0,h=x,S=P;break}if(X===S){D=!0,S=x,h=P;break}X=X.sibling}if(!D)throw Error(o(189))}}if(h.alternate!==S)throw Error(o(190))}if(h.tag!==3)throw Error(o(188));return h.stateNode.current===h?l:u}function Y(l){return l=B(l),l!==null?ie(l):null}function ie(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ie(l);if(u!==null)return u;l=l.sibling}return null}function se(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=se(l);if(u!==null)return u}l=l.sibling}return null}var ae=Array.isArray,ve=e.getPublicInstance,$e=e.getRootHostContext,ee=e.getChildHostContext,ue=e.prepareForCommit,L=e.resetAfterCommit,I=e.createInstance,V=e.appendInitialChild,z=e.finalizeInitialChildren,b=e.prepareUpdate,T=e.shouldSetTextContent,j=e.createTextInstance,O=e.scheduleTimeout,F=e.cancelTimeout,W=e.noTimeout,le=e.isPrimaryRenderer,ce=e.supportsMutation,U=e.supportsPersistence,H=e.supportsHydration,dt=e.getInstanceFromNode,Fe=e.preparePortalMount,Ie=e.getCurrentEventPriority,Je=e.detachDeletedInstance,gt=e.supportsMicrotasks,vn=e.scheduleMicrotask,Vt=e.supportsTestSelectors,$t=e.findFiberRoot,Nn=e.getBoundingRect,Pn=e.getTextContent,fn=e.isHiddenSubtree,as=e.matchAccessibilityRole,Rn=e.setFocusIfFocusable,Ys=e.setupIntersectionObserver,Ri=e.appendChild,bs=e.appendChildToContainer,Lr=e.commitTextUpdate,CO=e.commitMount,PO=e.commitUpdate,$O=e.insertBefore,TO=e.insertInContainerBefore,xO=e.removeChild,NO=e.removeChildFromContainer,s5=e.resetTextContent,RO=e.hideInstance,OO=e.hideTextInstance,IO=e.unhideInstance,AO=e.unhideTextInstance,jO=e.clearContainer,MO=e.cloneInstance,i5=e.createContainerChildSet,o5=e.appendChildToContainerChildSet,zO=e.finalizeContainerChildren,Rv=e.replaceContainerChildren,a5=e.cloneHiddenInstance,l5=e.cloneHiddenTextInstance,DO=e.canHydrateInstance,FO=e.canHydrateTextInstance,LO=e.canHydrateSuspenseInstance,u5=e.isSuspenseInstancePending,Ov=e.isSuspenseInstanceFallback,UO=e.getSuspenseInstanceFallbackErrorDetails,VO=e.registerSuspenseInstanceRetry,fp=e.getNextHydratableSibling,GO=e.getFirstHydratableChild,HO=e.getFirstHydratableChildWithinContainer,qO=e.getFirstHydratableChildWithinSuspenseInstance,BO=e.hydrateInstance,WO=e.hydrateTextInstance,ZO=e.hydrateSuspenseInstance,KO=e.getNextHydratableInstanceAfterSuspenseInstance,QO=e.commitHydratedContainer,YO=e.commitHydratedSuspenseInstance,XO=e.clearSuspenseBoundary,JO=e.clearSuspenseBoundaryFromContainer,eI=e.shouldDeleteUnhydratedTailInstances,tI=e.didNotMatchHydratedContainerTextInstance,nI=e.didNotMatchHydratedTextInstance,Iv;function Rd(l){if(Iv===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Iv=u&&u[1]||""}return`
`+Iv+l}var Av=!1;function jv(l,u){if(!l||Av)return"";Av=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(pe){var S=pe}Reflect.construct(l,[],u)}else{try{u.call()}catch(pe){S=pe}l.call(u.prototype)}else{try{throw Error()}catch(pe){S=pe}l()}}catch(pe){if(pe&&S&&typeof pe.stack=="string"){for(var P=pe.stack.split(`
`),x=S.stack.split(`
`),D=P.length-1,X=x.length-1;1<=D&&0<=X&&P[D]!==x[X];)X--;for(;1<=D&&0<=X;D--,X--)if(P[D]!==x[X]){if(D!==1||X!==1)do if(D--,X--,0>X||P[D]!==x[X]){var re=`
`+P[D].replace(" at new "," at ");return l.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",l.displayName)),re}while(1<=D&&0<=X);break}}}finally{Av=!1,Error.prepareStackTrace=h}return(l=l?l.displayName||l.name:"")?Rd(l):""}var rI=Object.prototype.hasOwnProperty,Mv=[],Eu=-1;function Wo(l){return{current:l}}function Gt(l){0>Eu||(l.current=Mv[Eu],Mv[Eu]=null,Eu--)}function Dt(l,u){Eu++,Mv[Eu]=l.current,l.current=u}var Zo={},hr=Wo(Zo),Ur=Wo(!1),il=Zo;function Cu(l,u){var h=l.type.contextTypes;if(!h)return Zo;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===u)return S.__reactInternalMemoizedMaskedChildContext;var P={},x;for(x in h)P[x]=u[x];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=P),P}function Vr(l){return l=l.childContextTypes,l!=null}function hp(){Gt(Ur),Gt(hr)}function c5(l,u,h){if(hr.current!==Zo)throw Error(o(168));Dt(hr,u),Dt(Ur,h)}function d5(l,u,h){var S=l.stateNode;if(u=u.childContextTypes,typeof S.getChildContext!="function")return h;S=S.getChildContext();for(var P in S)if(!(P in u))throw Error(o(108,A(l)||"Unknown",P));return i({},h,S)}function pp(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Zo,il=hr.current,Dt(hr,l),Dt(Ur,Ur.current),!0}function f5(l,u,h){var S=l.stateNode;if(!S)throw Error(o(169));h?(l=d5(l,u,il),S.__reactInternalMemoizedMergedChildContext=l,Gt(Ur),Gt(hr),Dt(hr,l)):Gt(Ur),Dt(Ur,h)}var Xs=Math.clz32?Math.clz32:oI,sI=Math.log,iI=Math.LN2;function oI(l){return l>>>=0,l===0?32:31-(sI(l)/iI|0)|0}var mp=64,gp=4194304;function Od(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function yp(l,u){var h=l.pendingLanes;if(h===0)return 0;var S=0,P=l.suspendedLanes,x=l.pingedLanes,D=h&268435455;if(D!==0){var X=D&~P;X!==0?S=Od(X):(x&=D,x!==0&&(S=Od(x)))}else D=h&~P,D!==0?S=Od(D):x!==0&&(S=Od(x));if(S===0)return 0;if(u!==0&&u!==S&&!(u&P)&&(P=S&-S,x=u&-u,P>=x||P===16&&(x&4194240)!==0))return u;if(S&4&&(S|=h&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=S;0<u;)h=31-Xs(u),P=1<<h,S|=l[h],u&=~P;return S}function aI(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lI(l,u){for(var h=l.suspendedLanes,S=l.pingedLanes,P=l.expirationTimes,x=l.pendingLanes;0<x;){var D=31-Xs(x),X=1<<D,re=P[D];re===-1?(!(X&h)||X&S)&&(P[D]=aI(X,u)):re<=u&&(l.expiredLanes|=X),x&=~X}}function zv(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function h5(){var l=mp;return mp<<=1,!(mp&4194240)&&(mp=64),l}function Dv(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function Id(l,u,h){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Xs(u),l[u]=h}function uI(l,u){var h=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<h;){var P=31-Xs(h),x=1<<P;u[P]=0,S[P]=-1,l[P]=-1,h&=~x}}function Fv(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var S=31-Xs(h),P=1<<S;P&u|l[S]&u&&(l[S]|=u),h&=~P}}var _t=0;function p5(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Lv=s.unstable_scheduleCallback,m5=s.unstable_cancelCallback,cI=s.unstable_shouldYield,dI=s.unstable_requestPaint,Hn=s.unstable_now,Uv=s.unstable_ImmediatePriority,fI=s.unstable_UserBlockingPriority,Vv=s.unstable_NormalPriority,hI=s.unstable_IdlePriority,vp=null,Oi=null;function pI(l){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(vp,l,void 0,(l.current.flags&128)===128)}catch{}}function mI(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Js=typeof Object.is=="function"?Object.is:mI,oo=null,_p=!1,Gv=!1;function g5(l){oo===null?oo=[l]:oo.push(l)}function gI(l){_p=!0,g5(l)}function Ii(){if(!Gv&&oo!==null){Gv=!0;var l=0,u=_t;try{var h=oo;for(_t=1;l<h.length;l++){var S=h[l];do S=S(!0);while(S!==null)}oo=null,_p=!1}catch(P){throw oo!==null&&(oo=oo.slice(l+1)),Lv(Uv,Ii),P}finally{_t=u,Gv=!1}}return null}var Pu=[],$u=0,wp=null,Sp=0,Es=[],Cs=0,ol=null,ao=1,lo="";function al(l,u){Pu[$u++]=Sp,Pu[$u++]=wp,wp=l,Sp=u}function y5(l,u,h){Es[Cs++]=ao,Es[Cs++]=lo,Es[Cs++]=ol,ol=l;var S=ao;l=lo;var P=32-Xs(S)-1;S&=~(1<<P),h+=1;var x=32-Xs(u)+P;if(30<x){var D=P-P%5;x=(S&(1<<D)-1).toString(32),S>>=D,P-=D,ao=1<<32-Xs(u)+P|h<<P|S,lo=x+l}else ao=1<<x|h<<P|S,lo=l}function Hv(l){l.return!==null&&(al(l,1),y5(l,1,0))}function qv(l){for(;l===wp;)wp=Pu[--$u],Pu[$u]=null,Sp=Pu[--$u],Pu[$u]=null;for(;l===ol;)ol=Es[--Cs],Es[Cs]=null,lo=Es[--Cs],Es[Cs]=null,ao=Es[--Cs],Es[Cs]=null}var ls=null,Ps=null,Qt=!1,Ad=!1,ei=null;function v5(l,u){var h=Rs(5,null,null,0);h.elementType="DELETED",h.stateNode=u,h.return=l,u=l.deletions,u===null?(l.deletions=[h],l.flags|=16):u.push(h)}function _5(l,u){switch(l.tag){case 5:return u=DO(u,l.type,l.pendingProps),u!==null?(l.stateNode=u,ls=l,Ps=GO(u),!0):!1;case 6:return u=FO(u,l.pendingProps),u!==null?(l.stateNode=u,ls=l,Ps=null,!0):!1;case 13:if(u=LO(u),u!==null){var h=ol!==null?{id:ao,overflow:lo}:null;return l.memoizedState={dehydrated:u,treeContext:h,retryLane:1073741824},h=Rs(18,null,null,0),h.stateNode=u,h.return=l,l.child=h,ls=l,Ps=null,!0}return!1;default:return!1}}function Bv(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Wv(l){if(Qt){var u=Ps;if(u){var h=u;if(!_5(l,u)){if(Bv(l))throw Error(o(418));u=fp(h);var S=ls;u&&_5(l,u)?v5(S,h):(l.flags=l.flags&-4097|2,Qt=!1,ls=l)}}else{if(Bv(l))throw Error(o(418));l.flags=l.flags&-4097|2,Qt=!1,ls=l}}}function w5(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ls=l}function kp(l){if(!H||l!==ls)return!1;if(!Qt)return w5(l),Qt=!0,!1;if(l.tag!==3&&(l.tag!==5||eI(l.type)&&!T(l.type,l.memoizedProps))){var u=Ps;if(u){if(Bv(l))throw S5(),Error(o(418));for(;u;)v5(l,u),u=fp(u)}}if(w5(l),l.tag===13){if(!H)throw Error(o(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));Ps=KO(l)}else Ps=ls?fp(l.stateNode):null;return!0}function S5(){for(var l=Ps;l;)l=fp(l)}function Tu(){H&&(Ps=ls=null,Ad=Qt=!1)}function Zv(l){ei===null?ei=[l]:ei.push(l)}var yI=a.ReactCurrentBatchConfig;function bp(l,u){if(Js(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),S=Object.keys(u);if(h.length!==S.length)return!1;for(S=0;S<h.length;S++){var P=h[S];if(!rI.call(u,P)||!Js(l[P],u[P]))return!1}return!0}function vI(l){switch(l.tag){case 5:return Rd(l.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return l=jv(l.type,!1),l;case 11:return l=jv(l.type.render,!1),l;case 1:return l=jv(l.type,!0),l;default:return""}}function jd(l,u,h){if(l=h.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(o(309));var S=h.stateNode}if(!S)throw Error(o(147,l));var P=S,x=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===x?u.ref:(u=function(D){var X=P.refs;D===null?delete X[x]:X[x]=D},u._stringRef=x,u)}if(typeof l!="string")throw Error(o(284));if(!h._owner)throw Error(o(290,l))}return l}function Ep(l,u){throw l=Object.prototype.toString.call(u),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function k5(l){var u=l._init;return u(l._payload)}function b5(l){function u(te,J){if(l){var oe=te.deletions;oe===null?(te.deletions=[J],te.flags|=16):oe.push(J)}}function h(te,J){if(!l)return null;for(;J!==null;)u(te,J),J=J.sibling;return null}function S(te,J){for(te=new Map;J!==null;)J.key!==null?te.set(J.key,J):te.set(J.index,J),J=J.sibling;return te}function P(te,J){return te=ta(te,J),te.index=0,te.sibling=null,te}function x(te,J,oe){return te.index=oe,l?(oe=te.alternate,oe!==null?(oe=oe.index,oe<J?(te.flags|=2,J):oe):(te.flags|=2,J)):(te.flags|=1048576,J)}function D(te){return l&&te.alternate===null&&(te.flags|=2),te}function X(te,J,oe,Ee){return J===null||J.tag!==6?(J=G_(oe,te.mode,Ee),J.return=te,J):(J=P(J,oe),J.return=te,J)}function re(te,J,oe,Ee){var De=oe.type;return De===f?Oe(te,J,oe.props.children,Ee,oe.key):J!==null&&(J.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&k5(De)===J.type)?(Ee=P(J,oe.props),Ee.ref=jd(te,J,oe),Ee.return=te,Ee):(Ee=tm(oe.type,oe.key,oe.props,null,te.mode,Ee),Ee.ref=jd(te,J,oe),Ee.return=te,Ee)}function pe(te,J,oe,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==oe.containerInfo||J.stateNode.implementation!==oe.implementation?(J=H_(oe,te.mode,Ee),J.return=te,J):(J=P(J,oe.children||[]),J.return=te,J)}function Oe(te,J,oe,Ee,De){return J===null||J.tag!==7?(J=pl(oe,te.mode,Ee,De),J.return=te,J):(J=P(J,oe),J.return=te,J)}function Be(te,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number")return J=G_(""+J,te.mode,oe),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case c:return oe=tm(J.type,J.key,J.props,null,te.mode,oe),oe.ref=jd(te,null,J),oe.return=te,oe;case d:return J=H_(J,te.mode,oe),J.return=te,J;case g:var Ee=J._init;return Be(te,Ee(J._payload),oe)}if(ae(J)||N(J))return J=pl(J,te.mode,oe,null),J.return=te,J;Ep(te,J)}return null}function be(te,J,oe,Ee){var De=J!==null?J.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return De!==null?null:X(te,J,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:return oe.key===De?re(te,J,oe,Ee):null;case d:return oe.key===De?pe(te,J,oe,Ee):null;case g:return De=oe._init,be(te,J,De(oe._payload),Ee)}if(ae(oe)||N(oe))return De!==null?null:Oe(te,J,oe,Ee,null);Ep(te,oe)}return null}function Ht(te,J,oe,Ee,De){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return te=te.get(oe)||null,X(J,te,""+Ee,De);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case c:return te=te.get(Ee.key===null?oe:Ee.key)||null,re(J,te,Ee,De);case d:return te=te.get(Ee.key===null?oe:Ee.key)||null,pe(J,te,Ee,De);case g:var et=Ee._init;return Ht(te,J,oe,et(Ee._payload),De)}if(ae(Ee)||N(Ee))return te=te.get(oe)||null,Oe(J,te,Ee,De,null);Ep(J,Ee)}return null}function At(te,J,oe,Ee){for(var De=null,et=null,We=J,wt=J=0,Wn=null;We!==null&&wt<oe.length;wt++){We.index>wt?(Wn=We,We=null):Wn=We.sibling;var St=be(te,We,oe[wt],Ee);if(St===null){We===null&&(We=Wn);break}l&&We&&St.alternate===null&&u(te,We),J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St,We=Wn}if(wt===oe.length)return h(te,We),Qt&&al(te,wt),De;if(We===null){for(;wt<oe.length;wt++)We=Be(te,oe[wt],Ee),We!==null&&(J=x(We,J,wt),et===null?De=We:et.sibling=We,et=We);return Qt&&al(te,wt),De}for(We=S(te,We);wt<oe.length;wt++)Wn=Ht(We,te,wt,oe[wt],Ee),Wn!==null&&(l&&Wn.alternate!==null&&We.delete(Wn.key===null?wt:Wn.key),J=x(Wn,J,wt),et===null?De=Wn:et.sibling=Wn,et=Wn);return l&&We.forEach(function(na){return u(te,na)}),Qt&&al(te,wt),De}function Br(te,J,oe,Ee){var De=N(oe);if(typeof De!="function")throw Error(o(150));if(oe=De.call(oe),oe==null)throw Error(o(151));for(var et=De=null,We=J,wt=J=0,Wn=null,St=oe.next();We!==null&&!St.done;wt++,St=oe.next()){We.index>wt?(Wn=We,We=null):Wn=We.sibling;var na=be(te,We,St.value,Ee);if(na===null){We===null&&(We=Wn);break}l&&We&&na.alternate===null&&u(te,We),J=x(na,J,wt),et===null?De=na:et.sibling=na,et=na,We=Wn}if(St.done)return h(te,We),Qt&&al(te,wt),De;if(We===null){for(;!St.done;wt++,St=oe.next())St=Be(te,St.value,Ee),St!==null&&(J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St);return Qt&&al(te,wt),De}for(We=S(te,We);!St.done;wt++,St=oe.next())St=Ht(We,te,wt,St.value,Ee),St!==null&&(l&&St.alternate!==null&&We.delete(St.key===null?wt:St.key),J=x(St,J,wt),et===null?De=St:et.sibling=St,et=St);return l&&We.forEach(function(ZI){return u(te,ZI)}),Qt&&al(te,wt),De}function ho(te,J,oe,Ee){if(typeof oe=="object"&&oe!==null&&oe.type===f&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case c:e:{for(var De=oe.key,et=J;et!==null;){if(et.key===De){if(De=oe.type,De===f){if(et.tag===7){h(te,et.sibling),J=P(et,oe.props.children),J.return=te,te=J;break e}}else if(et.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&k5(De)===et.type){h(te,et.sibling),J=P(et,oe.props),J.ref=jd(te,et,oe),J.return=te,te=J;break e}h(te,et);break}else u(te,et);et=et.sibling}oe.type===f?(J=pl(oe.props.children,te.mode,Ee,oe.key),J.return=te,te=J):(Ee=tm(oe.type,oe.key,oe.props,null,te.mode,Ee),Ee.ref=jd(te,J,oe),Ee.return=te,te=Ee)}return D(te);case d:e:{for(et=oe.key;J!==null;){if(J.key===et)if(J.tag===4&&J.stateNode.containerInfo===oe.containerInfo&&J.stateNode.implementation===oe.implementation){h(te,J.sibling),J=P(J,oe.children||[]),J.return=te,te=J;break e}else{h(te,J);break}else u(te,J);J=J.sibling}J=H_(oe,te.mode,Ee),J.return=te,te=J}return D(te);case g:return et=oe._init,ho(te,J,et(oe._payload),Ee)}if(ae(oe))return At(te,J,oe,Ee);if(N(oe))return Br(te,J,oe,Ee);Ep(te,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,J!==null&&J.tag===6?(h(te,J.sibling),J=P(J,oe),J.return=te,te=J):(h(te,J),J=G_(oe,te.mode,Ee),J.return=te,te=J),D(te)):h(te,J)}return ho}var xu=b5(!0),E5=b5(!1),Cp=Wo(null),Pp=null,Nu=null,Kv=null;function Qv(){Kv=Nu=Pp=null}function C5(l,u,h){le?(Dt(Cp,u._currentValue),u._currentValue=h):(Dt(Cp,u._currentValue2),u._currentValue2=h)}function Yv(l){var u=Cp.current;Gt(Cp),le?l._currentValue=u:l._currentValue2=u}function Xv(l,u,h){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===h)break;l=l.return}}function Ru(l,u){Pp=l,Kv=Nu=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&u&&(Gr=!0),l.firstContext=null)}function $s(l){var u=le?l._currentValue:l._currentValue2;if(Kv!==l)if(l={context:l,memoizedValue:u,next:null},Nu===null){if(Pp===null)throw Error(o(308));Nu=l,Pp.dependencies={lanes:0,firstContext:l}}else Nu=Nu.next=l;return u}var ll=null;function Jv(l){ll===null?ll=[l]:ll.push(l)}function P5(l,u,h,S){var P=u.interleaved;return P===null?(h.next=h,Jv(u)):(h.next=P.next,P.next=h),u.interleaved=h,Ai(l,S)}function Ai(l,u){l.lanes|=u;var h=l.alternate;for(h!==null&&(h.lanes|=u),h=l,l=l.return;l!==null;)l.childLanes|=u,h=l.alternate,h!==null&&(h.childLanes|=u),h=l,l=l.return;return h.tag===3?h.stateNode:null}var Ko=!1;function e_(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $5(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function uo(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Qo(l,u,h){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,st&2){var P=S.pending;return P===null?u.next=u:(u.next=P.next,P.next=u),S.pending=u,Ai(l,h)}return P=S.interleaved,P===null?(u.next=u,Jv(S)):(u.next=P.next,P.next=u),S.interleaved=u,Ai(l,h)}function $p(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194240)!==0)){var S=u.lanes;S&=l.pendingLanes,h|=S,u.lanes=h,Fv(l,h)}}function T5(l,u){var h=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,h===S)){var P=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};x===null?P=x=D:x=x.next=D,h=h.next}while(h!==null);x===null?P=x=u:x=x.next=u}else P=x=u;h={baseState:S.baseState,firstBaseUpdate:P,lastBaseUpdate:x,shared:S.shared,effects:S.effects},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}function Tp(l,u,h,S){var P=l.updateQueue;Ko=!1;var x=P.firstBaseUpdate,D=P.lastBaseUpdate,X=P.shared.pending;if(X!==null){P.shared.pending=null;var re=X,pe=re.next;re.next=null,D===null?x=pe:D.next=pe,D=re;var Oe=l.alternate;Oe!==null&&(Oe=Oe.updateQueue,X=Oe.lastBaseUpdate,X!==D&&(X===null?Oe.firstBaseUpdate=pe:X.next=pe,Oe.lastBaseUpdate=re))}if(x!==null){var Be=P.baseState;D=0,Oe=pe=re=null,X=x;do{var be=X.lane,Ht=X.eventTime;if((S&be)===be){Oe!==null&&(Oe=Oe.next={eventTime:Ht,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var At=l,Br=X;switch(be=u,Ht=h,Br.tag){case 1:if(At=Br.payload,typeof At=="function"){Be=At.call(Ht,Be,be);break e}Be=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Br.payload,be=typeof At=="function"?At.call(Ht,Be,be):At,be==null)break e;Be=i({},Be,be);break e;case 2:Ko=!0}}X.callback!==null&&X.lane!==0&&(l.flags|=64,be=P.effects,be===null?P.effects=[X]:be.push(X))}else Ht={eventTime:Ht,lane:be,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Oe===null?(pe=Oe=Ht,re=Be):Oe=Oe.next=Ht,D|=be;if(X=X.next,X===null){if(X=P.shared.pending,X===null)break;be=X,X=be.next,be.next=null,P.lastBaseUpdate=be,P.shared.pending=null}}while(!0);if(Oe===null&&(re=Be),P.baseState=re,P.firstBaseUpdate=pe,P.lastBaseUpdate=Oe,u=P.shared.interleaved,u!==null){P=u;do D|=P.lane,P=P.next;while(P!==u)}else x===null&&(P.shared.lanes=0);cl|=D,l.lanes=D,l.memoizedState=Be}}function x5(l,u,h){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var S=l[u],P=S.callback;if(P!==null){if(S.callback=null,S=h,typeof P!="function")throw Error(o(191,P));P.call(S)}}}var Md={},Ts=Wo(Md),zd=Wo(Md),Ou=Wo(Md);function ji(l){if(l===Md)throw Error(o(174));return l}function t_(l,u){Dt(Ou,u),Dt(zd,l),Dt(Ts,Md),l=$e(u),Gt(Ts),Dt(Ts,l)}function Iu(){Gt(Ts),Gt(zd),Gt(Ou)}function N5(l){var u=ji(Ou.current),h=ji(Ts.current);u=ee(h,l.type,u),h!==u&&(Dt(zd,l),Dt(Ts,u))}function n_(l){zd.current===l&&(Gt(Ts),Gt(zd))}var rn=Wo(0);function xp(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||u5(h)||Ov(h)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var r_=[];function s_(){for(var l=0;l<r_.length;l++){var u=r_[l];le?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}r_.length=0}var Np=a.ReactCurrentDispatcher,i_=a.ReactCurrentBatchConfig,ul=0,sn=null,On=null,qn=null,Rp=!1,Dd=!1,Fd=0,_I=0;function pr(){throw Error(o(321))}function o_(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Js(l[h],u[h]))return!1;return!0}function a_(l,u,h,S,P,x){if(ul=x,sn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Np.current=l===null||l.memoizedState===null?bI:EI,l=h(S,P),Dd){x=0;do{if(Dd=!1,Fd=0,25<=x)throw Error(o(301));x+=1,qn=On=null,u.updateQueue=null,Np.current=CI,l=h(S,P)}while(Dd)}if(Np.current=Ap,u=On!==null&&On.next!==null,ul=0,qn=On=sn=null,Rp=!1,u)throw Error(o(300));return l}function l_(){var l=Fd!==0;return Fd=0,l}function Mi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?sn.memoizedState=qn=l:qn=qn.next=l,qn}function xs(){if(On===null){var l=sn.alternate;l=l!==null?l.memoizedState:null}else l=On.next;var u=qn===null?sn.memoizedState:qn.next;if(u!==null)qn=u,On=l;else{if(l===null)throw Error(o(310));On=l,l={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},qn===null?sn.memoizedState=qn=l:qn=qn.next=l}return qn}function Ld(l,u){return typeof u=="function"?u(l):u}function u_(l){var u=xs(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=l;var S=On,P=S.baseQueue,x=h.pending;if(x!==null){if(P!==null){var D=P.next;P.next=x.next,x.next=D}S.baseQueue=P=x,h.pending=null}if(P!==null){x=P.next,S=S.baseState;var X=D=null,re=null,pe=x;do{var Oe=pe.lane;if((ul&Oe)===Oe)re!==null&&(re=re.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),S=pe.hasEagerState?pe.eagerState:l(S,pe.action);else{var Be={lane:Oe,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};re===null?(X=re=Be,D=S):re=re.next=Be,sn.lanes|=Oe,cl|=Oe}pe=pe.next}while(pe!==null&&pe!==x);re===null?D=S:re.next=X,Js(S,u.memoizedState)||(Gr=!0),u.memoizedState=S,u.baseState=D,u.baseQueue=re,h.lastRenderedState=S}if(l=h.interleaved,l!==null){P=l;do x=P.lane,sn.lanes|=x,cl|=x,P=P.next;while(P!==l)}else P===null&&(h.lanes=0);return[u.memoizedState,h.dispatch]}function c_(l){var u=xs(),h=u.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=l;var S=h.dispatch,P=h.pending,x=u.memoizedState;if(P!==null){h.pending=null;var D=P=P.next;do x=l(x,D.action),D=D.next;while(D!==P);Js(x,u.memoizedState)||(Gr=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),h.lastRenderedState=x}return[x,S]}function R5(){}function O5(l,u){var h=sn,S=xs(),P=u(),x=!Js(S.memoizedState,P);if(x&&(S.memoizedState=P,Gr=!0),S=S.queue,d_(j5.bind(null,h,S,l),[l]),S.getSnapshot!==u||x||qn!==null&&qn.memoizedState.tag&1){if(h.flags|=2048,Ud(9,A5.bind(null,h,S,P,u),void 0,null),Bn===null)throw Error(o(349));ul&30||I5(h,u,P)}return P}function I5(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=sn.updateQueue,u===null?(u={lastEffect:null,stores:null},sn.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function A5(l,u,h,S){u.value=h,u.getSnapshot=S,M5(u)&&z5(l)}function j5(l,u,h){return h(function(){M5(u)&&z5(l)})}function M5(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Js(l,h)}catch{return!0}}function z5(l){var u=Ai(l,1);u!==null&&Ns(u,l,1,-1)}function D5(l){var u=Mi();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ld,lastRenderedState:l},u.queue=l,l=l.dispatch=kI.bind(null,sn,l),[u.memoizedState,l]}function Ud(l,u,h,S){return l={tag:l,create:u,destroy:h,deps:S,next:null},u=sn.updateQueue,u===null?(u={lastEffect:null,stores:null},sn.updateQueue=u,u.lastEffect=l.next=l):(h=u.lastEffect,h===null?u.lastEffect=l.next=l:(S=h.next,h.next=l,l.next=S,u.lastEffect=l)),l}function F5(){return xs().memoizedState}function Op(l,u,h,S){var P=Mi();sn.flags|=l,P.memoizedState=Ud(1|u,h,void 0,S===void 0?null:S)}function Ip(l,u,h,S){var P=xs();S=S===void 0?null:S;var x=void 0;if(On!==null){var D=On.memoizedState;if(x=D.destroy,S!==null&&o_(S,D.deps)){P.memoizedState=Ud(u,h,x,S);return}}sn.flags|=l,P.memoizedState=Ud(1|u,h,x,S)}function L5(l,u){return Op(8390656,8,l,u)}function d_(l,u){return Ip(2048,8,l,u)}function U5(l,u){return Ip(4,2,l,u)}function V5(l,u){return Ip(4,4,l,u)}function G5(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function H5(l,u,h){return h=h!=null?h.concat([l]):null,Ip(4,4,G5.bind(null,u,l),h)}function f_(){}function q5(l,u){var h=xs();u=u===void 0?null:u;var S=h.memoizedState;return S!==null&&u!==null&&o_(u,S[1])?S[0]:(h.memoizedState=[l,u],l)}function B5(l,u){var h=xs();u=u===void 0?null:u;var S=h.memoizedState;return S!==null&&u!==null&&o_(u,S[1])?S[0]:(l=l(),h.memoizedState=[l,u],l)}function W5(l,u,h){return ul&21?(Js(h,u)||(h=h5(),sn.lanes|=h,cl|=h,l.baseState=!0),u):(l.baseState&&(l.baseState=!1,Gr=!0),l.memoizedState=h)}function wI(l,u){var h=_t;_t=h!==0&&4>h?h:4,l(!0);var S=i_.transition;i_.transition={};try{l(!1),u()}finally{_t=h,i_.transition=S}}function Z5(){return xs().memoizedState}function SI(l,u,h){var S=Jo(l);if(h={lane:S,action:h,hasEagerState:!1,eagerState:null,next:null},K5(l))Q5(u,h);else if(h=P5(l,u,h,S),h!==null){var P=yr();Ns(h,l,S,P),Y5(h,u,S)}}function kI(l,u,h){var S=Jo(l),P={lane:S,action:h,hasEagerState:!1,eagerState:null,next:null};if(K5(l))Q5(u,P);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var D=u.lastRenderedState,X=x(D,h);if(P.hasEagerState=!0,P.eagerState=X,Js(X,D)){var re=u.interleaved;re===null?(P.next=P,Jv(u)):(P.next=re.next,re.next=P),u.interleaved=P;return}}catch{}finally{}h=P5(l,u,P,S),h!==null&&(P=yr(),Ns(h,l,S,P),Y5(h,u,S))}}function K5(l){var u=l.alternate;return l===sn||u!==null&&u===sn}function Q5(l,u){Dd=Rp=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function Y5(l,u,h){if(h&4194240){var S=u.lanes;S&=l.pendingLanes,h|=S,u.lanes=h,Fv(l,h)}}var Ap={readContext:$s,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useInsertionEffect:pr,useLayoutEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useMutableSource:pr,useSyncExternalStore:pr,useId:pr,unstable_isNewReconciler:!1},bI={readContext:$s,useCallback:function(l,u){return Mi().memoizedState=[l,u===void 0?null:u],l},useContext:$s,useEffect:L5,useImperativeHandle:function(l,u,h){return h=h!=null?h.concat([l]):null,Op(4194308,4,G5.bind(null,u,l),h)},useLayoutEffect:function(l,u){return Op(4194308,4,l,u)},useInsertionEffect:function(l,u){return Op(4,2,l,u)},useMemo:function(l,u){var h=Mi();return u=u===void 0?null:u,l=l(),h.memoizedState=[l,u],l},useReducer:function(l,u,h){var S=Mi();return u=h!==void 0?h(u):u,S.memoizedState=S.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},S.queue=l,l=l.dispatch=SI.bind(null,sn,l),[S.memoizedState,l]},useRef:function(l){var u=Mi();return l={current:l},u.memoizedState=l},useState:D5,useDebugValue:f_,useDeferredValue:function(l){return Mi().memoizedState=l},useTransition:function(){var l=D5(!1),u=l[0];return l=wI.bind(null,l[1]),Mi().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,h){var S=sn,P=Mi();if(Qt){if(h===void 0)throw Error(o(407));h=h()}else{if(h=u(),Bn===null)throw Error(o(349));ul&30||I5(S,u,h)}P.memoizedState=h;var x={value:h,getSnapshot:u};return P.queue=x,L5(j5.bind(null,S,x,l),[l]),S.flags|=2048,Ud(9,A5.bind(null,S,x,h,u),void 0,null),h},useId:function(){var l=Mi(),u=Bn.identifierPrefix;if(Qt){var h=lo,S=ao;h=(S&~(1<<32-Xs(S)-1)).toString(32)+h,u=":"+u+"R"+h,h=Fd++,0<h&&(u+="H"+h.toString(32)),u+=":"}else h=_I++,u=":"+u+"r"+h.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},EI={readContext:$s,useCallback:q5,useContext:$s,useEffect:d_,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:V5,useMemo:B5,useReducer:u_,useRef:F5,useState:function(){return u_(Ld)},useDebugValue:f_,useDeferredValue:function(l){var u=xs();return W5(u,On.memoizedState,l)},useTransition:function(){var l=u_(Ld)[0],u=xs().memoizedState;return[l,u]},useMutableSource:R5,useSyncExternalStore:O5,useId:Z5,unstable_isNewReconciler:!1},CI={readContext:$s,useCallback:q5,useContext:$s,useEffect:d_,useImperativeHandle:H5,useInsertionEffect:U5,useLayoutEffect:V5,useMemo:B5,useReducer:c_,useRef:F5,useState:function(){return c_(Ld)},useDebugValue:f_,useDeferredValue:function(l){var u=xs();return On===null?u.memoizedState=l:W5(u,On.memoizedState,l)},useTransition:function(){var l=c_(Ld)[0],u=xs().memoizedState;return[l,u]},useMutableSource:R5,useSyncExternalStore:O5,useId:Z5,unstable_isNewReconciler:!1};function ti(l,u){if(l&&l.defaultProps){u=i({},u),l=l.defaultProps;for(var h in l)u[h]===void 0&&(u[h]=l[h]);return u}return u}function h_(l,u,h,S){u=l.memoizedState,h=h(S,u),h=h==null?u:i({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var jp={isMounted:function(l){return(l=l._reactInternals)?q(l)===l:!1},enqueueSetState:function(l,u,h){l=l._reactInternals;var S=yr(),P=Jo(l),x=uo(S,P);x.payload=u,h!=null&&(x.callback=h),u=Qo(l,x,P),u!==null&&(Ns(u,l,P,S),$p(u,l,P))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var S=yr(),P=Jo(l),x=uo(S,P);x.tag=1,x.payload=u,h!=null&&(x.callback=h),u=Qo(l,x,P),u!==null&&(Ns(u,l,P,S),$p(u,l,P))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=yr(),S=Jo(l),P=uo(h,S);P.tag=2,u!=null&&(P.callback=u),u=Qo(l,P,S),u!==null&&(Ns(u,l,S,h),$p(u,l,S))}};function X5(l,u,h,S,P,x,D){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,x,D):u.prototype&&u.prototype.isPureReactComponent?!bp(h,S)||!bp(P,x):!0}function J5(l,u,h){var S=!1,P=Zo,x=u.contextType;return typeof x=="object"&&x!==null?x=$s(x):(P=Vr(u)?il:hr.current,S=u.contextTypes,x=(S=S!=null)?Cu(l,P):Zo),u=new u(h,x),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=jp,l.stateNode=u,u._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=P,l.__reactInternalMemoizedMaskedChildContext=x),u}function eb(l,u,h,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,S),u.state!==l&&jp.enqueueReplaceState(u,u.state,null)}function p_(l,u,h,S){var P=l.stateNode;P.props=h,P.state=l.memoizedState,P.refs={},e_(l);var x=u.contextType;typeof x=="object"&&x!==null?P.context=$s(x):(x=Vr(u)?il:hr.current,P.context=Cu(l,x)),P.state=l.memoizedState,x=u.getDerivedStateFromProps,typeof x=="function"&&(h_(l,u,x,h),P.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(u=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),u!==P.state&&jp.enqueueReplaceState(P,P.state,null),Tp(l,h,P,S),P.state=l.memoizedState),typeof P.componentDidMount=="function"&&(l.flags|=4194308)}function Au(l,u){try{var h="",S=u;do h+=vI(S),S=S.return;while(S);var P=h}catch(x){P=`
Error generating stack: `+x.message+`
`+x.stack}return{value:l,source:u,stack:P,digest:null}}function m_(l,u,h){return{value:l,source:null,stack:h??null,digest:u??null}}function g_(l,u){try{console.error(u.value)}catch(h){setTimeout(function(){throw h})}}var PI=typeof WeakMap=="function"?WeakMap:Map;function tb(l,u,h){h=uo(-1,h),h.tag=3,h.payload={element:null};var S=u.value;return h.callback=function(){Kp||(Kp=!0,M_=S),g_(l,u)},h}function nb(l,u,h){h=uo(-1,h),h.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var P=u.value;h.payload=function(){return S(P)},h.callback=function(){g_(l,u)}}var x=l.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(h.callback=function(){g_(l,u),typeof S!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})}),h}function rb(l,u,h){var S=l.pingCache;if(S===null){S=l.pingCache=new PI;var P=new Set;S.set(u,P)}else P=S.get(u),P===void 0&&(P=new Set,S.set(u,P));P.has(h)||(P.add(h),l=LI.bind(null,l,u,h),u.then(l,l))}function sb(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function ib(l,u,h,S,P){return l.mode&1?(l.flags|=65536,l.lanes=P,l):(l===u?l.flags|=65536:(l.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(u=uo(-1,1),u.tag=2,Qo(h,u,1))),h.lanes|=1),l)}var $I=a.ReactCurrentOwner,Gr=!1;function $r(l,u,h,S){u.child=l===null?E5(u,null,h,S):xu(u,l.child,h,S)}function ob(l,u,h,S,P){h=h.render;var x=u.ref;return Ru(u,P),S=a_(l,u,h,S,x,P),h=l_(),l!==null&&!Gr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~P,co(l,u,P)):(Qt&&h&&Hv(u),u.flags|=1,$r(l,u,S,P),u.child)}function ab(l,u,h,S,P){if(l===null){var x=h.type;return typeof x=="function"&&!V_(x)&&x.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(u.tag=15,u.type=x,lb(l,u,x,S,P)):(l=tm(h.type,null,S,u,u.mode,P),l.ref=u.ref,l.return=u,u.child=l)}if(x=l.child,!(l.lanes&P)){var D=x.memoizedProps;if(h=h.compare,h=h!==null?h:bp,h(D,S)&&l.ref===u.ref)return co(l,u,P)}return u.flags|=1,l=ta(x,S),l.ref=u.ref,l.return=u,u.child=l}function lb(l,u,h,S,P){if(l!==null){var x=l.memoizedProps;if(bp(x,S)&&l.ref===u.ref)if(Gr=!1,u.pendingProps=S=x,(l.lanes&P)!==0)l.flags&131072&&(Gr=!0);else return u.lanes=l.lanes,co(l,u,P)}return y_(l,u,h,S,P)}function ub(l,u,h){var S=u.pendingProps,P=S.children,x=l!==null?l.memoizedState:null;if(S.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Mu,us),us|=h;else{if(!(h&1073741824))return l=x!==null?x.baseLanes|h:h,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Dt(Mu,us),us|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=x!==null?x.baseLanes:h,Dt(Mu,us),us|=S}else x!==null?(S=x.baseLanes|h,u.memoizedState=null):S=h,Dt(Mu,us),us|=S;return $r(l,u,P,h),u.child}function cb(l,u){var h=u.ref;(l===null&&h!==null||l!==null&&l.ref!==h)&&(u.flags|=512,u.flags|=2097152)}function y_(l,u,h,S,P){var x=Vr(h)?il:hr.current;return x=Cu(u,x),Ru(u,P),h=a_(l,u,h,S,x,P),S=l_(),l!==null&&!Gr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~P,co(l,u,P)):(Qt&&S&&Hv(u),u.flags|=1,$r(l,u,h,P),u.child)}function db(l,u,h,S,P){if(Vr(h)){var x=!0;pp(u)}else x=!1;if(Ru(u,P),u.stateNode===null)zp(l,u),J5(u,h,S),p_(u,h,S,P),S=!0;else if(l===null){var D=u.stateNode,X=u.memoizedProps;D.props=X;var re=D.context,pe=h.contextType;typeof pe=="object"&&pe!==null?pe=$s(pe):(pe=Vr(h)?il:hr.current,pe=Cu(u,pe));var Oe=h.getDerivedStateFromProps,Be=typeof Oe=="function"||typeof D.getSnapshotBeforeUpdate=="function";Be||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X!==S||re!==pe)&&eb(u,D,S,pe),Ko=!1;var be=u.memoizedState;D.state=be,Tp(u,S,D,P),re=u.memoizedState,X!==S||be!==re||Ur.current||Ko?(typeof Oe=="function"&&(h_(u,h,Oe,S),re=u.memoizedState),(X=Ko||X5(u,h,X,S,be,re,pe))?(Be||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=re),D.props=S,D.state=re,D.context=pe,S=X):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{D=u.stateNode,$5(l,u),X=u.memoizedProps,pe=u.type===u.elementType?X:ti(u.type,X),D.props=pe,Be=u.pendingProps,be=D.context,re=h.contextType,typeof re=="object"&&re!==null?re=$s(re):(re=Vr(h)?il:hr.current,re=Cu(u,re));var Ht=h.getDerivedStateFromProps;(Oe=typeof Ht=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(X!==Be||be!==re)&&eb(u,D,S,re),Ko=!1,be=u.memoizedState,D.state=be,Tp(u,S,D,P);var At=u.memoizedState;X!==Be||be!==At||Ur.current||Ko?(typeof Ht=="function"&&(h_(u,h,Ht,S),At=u.memoizedState),(pe=Ko||X5(u,h,pe,S,be,At,re)||!1)?(Oe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(S,At,re),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(S,At,re)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||X===l.memoizedProps&&be===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&be===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=At),D.props=S,D.state=At,D.context=re,S=pe):(typeof D.componentDidUpdate!="function"||X===l.memoizedProps&&be===l.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||X===l.memoizedProps&&be===l.memoizedState||(u.flags|=1024),S=!1)}return v_(l,u,h,S,x,P)}function v_(l,u,h,S,P,x){cb(l,u);var D=(u.flags&128)!==0;if(!S&&!D)return P&&f5(u,h,!1),co(l,u,x);S=u.stateNode,$I.current=u;var X=D&&typeof h.getDerivedStateFromError!="function"?null:S.render();return u.flags|=1,l!==null&&D?(u.child=xu(u,l.child,null,x),u.child=xu(u,null,X,x)):$r(l,u,X,x),u.memoizedState=S.state,P&&f5(u,h,!0),u.child}function fb(l){var u=l.stateNode;u.pendingContext?c5(l,u.pendingContext,u.pendingContext!==u.context):u.context&&c5(l,u.context,!1),t_(l,u.containerInfo)}function hb(l,u,h,S,P){return Tu(),Zv(P),u.flags|=256,$r(l,u,h,S),u.child}var __={dehydrated:null,treeContext:null,retryLane:0};function w_(l){return{baseLanes:l,cachePool:null,transitions:null}}function pb(l,u,h){var S=u.pendingProps,P=rn.current,x=!1,D=(u.flags&128)!==0,X;if((X=D)||(X=l!==null&&l.memoizedState===null?!1:(P&2)!==0),X?(x=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(P|=1),Dt(rn,P&1),l===null)return Wv(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(u.mode&1?Ov(l)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(D=S.children,l=S.fallback,x?(S=u.mode,x=u.child,D={mode:"hidden",children:D},!(S&1)&&x!==null?(x.childLanes=0,x.pendingProps=D):x=nm(D,S,0,null),l=pl(l,S,h,null),x.return=u,l.return=u,x.sibling=l,u.child=x,u.child.memoizedState=w_(h),u.memoizedState=__,l):S_(u,D));if(P=l.memoizedState,P!==null&&(X=P.dehydrated,X!==null))return TI(l,u,D,S,X,P,h);if(x){x=S.fallback,D=u.mode,P=l.child,X=P.sibling;var re={mode:"hidden",children:S.children};return!(D&1)&&u.child!==P?(S=u.child,S.childLanes=0,S.pendingProps=re,u.deletions=null):(S=ta(P,re),S.subtreeFlags=P.subtreeFlags&14680064),X!==null?x=ta(X,x):(x=pl(x,D,h,null),x.flags|=2),x.return=u,S.return=u,S.sibling=x,u.child=S,S=x,x=u.child,D=l.child.memoizedState,D=D===null?w_(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},x.memoizedState=D,x.childLanes=l.childLanes&~h,u.memoizedState=__,S}return x=l.child,l=x.sibling,S=ta(x,{mode:"visible",children:S.children}),!(u.mode&1)&&(S.lanes=h),S.return=u,S.sibling=null,l!==null&&(h=u.deletions,h===null?(u.deletions=[l],u.flags|=16):h.push(l)),u.child=S,u.memoizedState=null,S}function S_(l,u){return u=nm({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Mp(l,u,h,S){return S!==null&&Zv(S),xu(u,l.child,null,h),l=S_(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function TI(l,u,h,S,P,x,D){if(h)return u.flags&256?(u.flags&=-257,S=m_(Error(o(422))),Mp(l,u,D,S)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(x=S.fallback,P=u.mode,S=nm({mode:"visible",children:S.children},P,0,null),x=pl(x,P,D,null),x.flags|=2,S.return=u,x.return=u,S.sibling=x,u.child=S,u.mode&1&&xu(u,l.child,null,D),u.child.memoizedState=w_(D),u.memoizedState=__,x);if(!(u.mode&1))return Mp(l,u,D,null);if(Ov(P))return S=UO(P).digest,x=Error(o(419)),S=m_(x,S,void 0),Mp(l,u,D,S);if(h=(D&l.childLanes)!==0,Gr||h){if(S=Bn,S!==null){switch(D&-D){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=P&(S.suspendedLanes|D)?0:P,P!==0&&P!==x.retryLane&&(x.retryLane=P,Ai(l,P),Ns(S,l,P,-1))}return U_(),S=m_(Error(o(421))),Mp(l,u,D,S)}return u5(P)?(u.flags|=128,u.child=l.child,u=UI.bind(null,l),VO(P,u),null):(l=x.treeContext,H&&(Ps=qO(P),ls=u,Qt=!0,ei=null,Ad=!1,l!==null&&(Es[Cs++]=ao,Es[Cs++]=lo,Es[Cs++]=ol,ao=l.id,lo=l.overflow,ol=u)),u=S_(u,S.children),u.flags|=4096,u)}function mb(l,u,h){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),Xv(l.return,u,h)}function k_(l,u,h,S,P){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:h,tailMode:P}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=S,x.tail=h,x.tailMode=P)}function gb(l,u,h){var S=u.pendingProps,P=S.revealOrder,x=S.tail;if($r(l,u,S.children,h),S=rn.current,S&2)S=S&1|2,u.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&mb(l,h,u);else if(l.tag===19)mb(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(Dt(rn,S),!(u.mode&1))u.memoizedState=null;else switch(P){case"forwards":for(h=u.child,P=null;h!==null;)l=h.alternate,l!==null&&xp(l)===null&&(P=h),h=h.sibling;h=P,h===null?(P=u.child,u.child=null):(P=h.sibling,h.sibling=null),k_(u,!1,P,h,x);break;case"backwards":for(h=null,P=u.child,u.child=null;P!==null;){if(l=P.alternate,l!==null&&xp(l)===null){u.child=P;break}l=P.sibling,P.sibling=h,h=P,P=l}k_(u,!0,h,null,x);break;case"together":k_(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function zp(l,u){!(u.mode&1)&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function co(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),cl|=u.lanes,!(h&u.childLanes))return null;if(l!==null&&u.child!==l.child)throw Error(o(153));if(u.child!==null){for(l=u.child,h=ta(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=ta(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function xI(l,u,h){switch(u.tag){case 3:fb(u),Tu();break;case 5:N5(u);break;case 1:Vr(u.type)&&pp(u);break;case 4:t_(u,u.stateNode.containerInfo);break;case 10:C5(u,u.type._context,u.memoizedProps.value);break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Dt(rn,rn.current&1),u.flags|=128,null):h&u.child.childLanes?pb(l,u,h):(Dt(rn,rn.current&1),l=co(l,u,h),l!==null?l.sibling:null);Dt(rn,rn.current&1);break;case 19:if(S=(h&u.childLanes)!==0,l.flags&128){if(S)return gb(l,u,h);u.flags|=128}var P=u.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Dt(rn,rn.current),S)break;return null;case 22:case 23:return u.lanes=0,ub(l,u,h)}return co(l,u,h)}function zi(l){l.flags|=4}function yb(l,u){if(l!==null&&l.child===u.child)return!0;if(u.flags&16)return!1;for(l=u.child;l!==null;){if(l.flags&12854||l.subtreeFlags&12854)return!1;l=l.sibling}return!0}var Vd,Gd,Dp,Fp;if(ce)Vd=function(l,u){for(var h=u.child;h!==null;){if(h.tag===5||h.tag===6)V(l,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Gd=function(){},Dp=function(l,u,h,S,P){if(l=l.memoizedProps,l!==S){var x=u.stateNode,D=ji(Ts.current);h=b(x,h,l,S,P,D),(u.updateQueue=h)&&zi(u)}},Fp=function(l,u,h,S){h!==S&&zi(u)};else if(U){Vd=function(l,u,h,S){for(var P=u.child;P!==null;){if(P.tag===5){var x=P.stateNode;h&&S&&(x=a5(x,P.type,P.memoizedProps,P)),V(l,x)}else if(P.tag===6)x=P.stateNode,h&&S&&(x=l5(x,P.memoizedProps,P)),V(l,x);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)x=P.child,x!==null&&(x.return=P),Vd(l,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===u)break;for(;P.sibling===null;){if(P.return===null||P.return===u)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var vb=function(l,u,h,S){for(var P=u.child;P!==null;){if(P.tag===5){var x=P.stateNode;h&&S&&(x=a5(x,P.type,P.memoizedProps,P)),o5(l,x)}else if(P.tag===6)x=P.stateNode,h&&S&&(x=l5(x,P.memoizedProps,P)),o5(l,x);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)x=P.child,x!==null&&(x.return=P),vb(l,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===u)break;for(;P.sibling===null;){if(P.return===null||P.return===u)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Gd=function(l,u){var h=u.stateNode;if(!yb(l,u)){l=h.containerInfo;var S=i5(l);vb(S,u,!1,!1),h.pendingChildren=S,zi(u),zO(l,S)}},Dp=function(l,u,h,S,P){var x=l.stateNode,D=l.memoizedProps;if((l=yb(l,u))&&D===S)u.stateNode=x;else{var X=u.stateNode,re=ji(Ts.current),pe=null;D!==S&&(pe=b(X,h,D,S,P,re)),l&&pe===null?u.stateNode=x:(x=MO(x,pe,h,D,S,u,l,X),z(x,h,S,P,re)&&zi(u),u.stateNode=x,l?zi(u):Vd(x,u,!1,!1))}},Fp=function(l,u,h,S){h!==S?(l=ji(Ou.current),h=ji(Ts.current),u.stateNode=j(S,l,h,u),zi(u)):u.stateNode=l.stateNode}}else Gd=function(){},Dp=function(){},Fp=function(){};function Hd(l,u){if(!Qt)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var S=null;h!==null;)h.alternate!==null&&(S=h),h=h.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function mr(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,S=0;if(u)for(var P=l.child;P!==null;)h|=P.lanes|P.childLanes,S|=P.subtreeFlags&14680064,S|=P.flags&14680064,P.return=l,P=P.sibling;else for(P=l.child;P!==null;)h|=P.lanes|P.childLanes,S|=P.subtreeFlags,S|=P.flags,P.return=l,P=P.sibling;return l.subtreeFlags|=S,l.childLanes=h,u}function NI(l,u,h){var S=u.pendingProps;switch(qv(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(u),null;case 1:return Vr(u.type)&&hp(),mr(u),null;case 3:return h=u.stateNode,Iu(),Gt(Ur),Gt(hr),s_(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(kp(u)?zi(u):l===null||l.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,ei!==null&&(F_(ei),ei=null))),Gd(l,u),mr(u),null;case 5:n_(u),h=ji(Ou.current);var P=u.type;if(l!==null&&u.stateNode!=null)Dp(l,u,P,S,h),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!S){if(u.stateNode===null)throw Error(o(166));return mr(u),null}if(l=ji(Ts.current),kp(u)){if(!H)throw Error(o(175));l=BO(u.stateNode,u.type,u.memoizedProps,h,l,u,!Ad),u.updateQueue=l,l!==null&&zi(u)}else{var x=I(P,S,h,l,u);Vd(x,u,!1,!1),u.stateNode=x,z(x,P,S,h,l)&&zi(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return mr(u),null;case 6:if(l&&u.stateNode!=null)Fp(l,u,l.memoizedProps,S);else{if(typeof S!="string"&&u.stateNode===null)throw Error(o(166));if(l=ji(Ou.current),h=ji(Ts.current),kp(u)){if(!H)throw Error(o(176));if(l=u.stateNode,h=u.memoizedProps,(S=WO(l,h,u,!Ad))&&(P=ls,P!==null))switch(P.tag){case 3:tI(P.stateNode.containerInfo,l,h,(P.mode&1)!==0);break;case 5:nI(P.type,P.memoizedProps,P.stateNode,l,h,(P.mode&1)!==0)}S&&zi(u)}else u.stateNode=j(S,l,h,u)}return mr(u),null;case 13:if(Gt(rn),S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Qt&&Ps!==null&&u.mode&1&&!(u.flags&128))S5(),Tu(),u.flags|=98560,P=!1;else if(P=kp(u),S!==null&&S.dehydrated!==null){if(l===null){if(!P)throw Error(o(318));if(!H)throw Error(o(344));if(P=u.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(o(317));ZO(P,u)}else Tu(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;mr(u),P=!1}else ei!==null&&(F_(ei),ei=null),P=!0;if(!P)return u.flags&65536?u:null}return u.flags&128?(u.lanes=h,u):(h=S!==null,h!==(l!==null&&l.memoizedState!==null)&&h&&(u.child.flags|=8192,u.mode&1&&(l===null||rn.current&1?In===0&&(In=3):U_())),u.updateQueue!==null&&(u.flags|=4),mr(u),null);case 4:return Iu(),Gd(l,u),l===null&&Fe(u.stateNode.containerInfo),mr(u),null;case 10:return Yv(u.type._context),mr(u),null;case 17:return Vr(u.type)&&hp(),mr(u),null;case 19:if(Gt(rn),P=u.memoizedState,P===null)return mr(u),null;if(S=(u.flags&128)!==0,x=P.rendering,x===null)if(S)Hd(P,!1);else{if(In!==0||l!==null&&l.flags&128)for(l=u.child;l!==null;){if(x=xp(l),x!==null){for(u.flags|=128,Hd(P,!1),l=x.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=h,h=u.child;h!==null;)S=h,P=l,S.flags&=14680066,x=S.alternate,x===null?(S.childLanes=0,S.lanes=P,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=x.childLanes,S.lanes=x.lanes,S.child=x.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=x.memoizedProps,S.memoizedState=x.memoizedState,S.updateQueue=x.updateQueue,S.type=x.type,P=x.dependencies,S.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),h=h.sibling;return Dt(rn,rn.current&1|2),u.child}l=l.sibling}P.tail!==null&&Hn()>j_&&(u.flags|=128,S=!0,Hd(P,!1),u.lanes=4194304)}else{if(!S)if(l=xp(x),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,l!==null&&(u.updateQueue=l,u.flags|=4),Hd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!x.alternate&&!Qt)return mr(u),null}else 2*Hn()-P.renderingStartTime>j_&&h!==1073741824&&(u.flags|=128,S=!0,Hd(P,!1),u.lanes=4194304);P.isBackwards?(x.sibling=u.child,u.child=x):(l=P.last,l!==null?l.sibling=x:u.child=x,P.last=x)}return P.tail!==null?(u=P.tail,P.rendering=u,P.tail=u.sibling,P.renderingStartTime=Hn(),u.sibling=null,l=rn.current,Dt(rn,S?l&1|2:l&1),u):(mr(u),null);case 22:case 23:return L_(),h=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==h&&(u.flags|=8192),h&&u.mode&1?us&1073741824&&(mr(u),ce&&u.subtreeFlags&6&&(u.flags|=8192)):mr(u),null;case 24:return null;case 25:return null}throw Error(o(156,u.tag))}function RI(l,u){switch(qv(u),u.tag){case 1:return Vr(u.type)&&hp(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Iu(),Gt(Ur),Gt(hr),s_(),l=u.flags,l&65536&&!(l&128)?(u.flags=l&-65537|128,u):null;case 5:return n_(u),null;case 13:if(Gt(rn),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(o(340));Tu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Gt(rn),null;case 4:return Iu(),null;case 10:return Yv(u.type._context),null;case 22:case 23:return L_(),null;case 24:return null;default:return null}}var Lp=!1,gr=!1,OI=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ju(l,u){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(S){Yt(l,u,S)}else h.current=null}function b_(l,u,h){try{h()}catch(S){Yt(l,u,S)}}var _b=!1;function II(l,u){for(ue(l.containerInfo),xe=u;xe!==null;)if(l=xe,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,xe=u;else for(;xe!==null;){l=xe;try{var h=l.alternate;if(l.flags&1024)switch(l.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var S=h.memoizedProps,P=h.memoizedState,x=l.stateNode,D=x.getSnapshotBeforeUpdate(l.elementType===l.type?S:ti(l.type,S),P);x.__reactInternalSnapshotBeforeUpdate=D}break;case 3:ce&&jO(l.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(X){Yt(l,l.return,X)}if(u=l.sibling,u!==null){u.return=l.return,xe=u;break}xe=l.return}return h=_b,_b=!1,h}function qd(l,u,h){var S=u.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var P=S=S.next;do{if((P.tag&l)===l){var x=P.destroy;P.destroy=void 0,x!==void 0&&b_(u,h,x)}P=P.next}while(P!==S)}}function Up(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&l)===l){var S=h.create;h.destroy=S()}h=h.next}while(h!==u)}}function E_(l){var u=l.ref;if(u!==null){var h=l.stateNode;switch(l.tag){case 5:l=ve(h);break;default:l=h}typeof u=="function"?u(l):u.current=l}}function wb(l){var u=l.alternate;u!==null&&(l.alternate=null,wb(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Je(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Sb(l){return l.tag===5||l.tag===3||l.tag===4}function kb(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Sb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function C_(l,u,h){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?TO(h,l,u):bs(h,l);else if(S!==4&&(l=l.child,l!==null))for(C_(l,u,h),l=l.sibling;l!==null;)C_(l,u,h),l=l.sibling}function P_(l,u,h){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?$O(h,l,u):Ri(h,l);else if(S!==4&&(l=l.child,l!==null))for(P_(l,u,h),l=l.sibling;l!==null;)P_(l,u,h),l=l.sibling}var Jn=null,ni=!1;function Di(l,u,h){for(h=h.child;h!==null;)$_(l,u,h),h=h.sibling}function $_(l,u,h){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(vp,h)}catch{}switch(h.tag){case 5:gr||ju(h,u);case 6:if(ce){var S=Jn,P=ni;Jn=null,Di(l,u,h),Jn=S,ni=P,Jn!==null&&(ni?NO(Jn,h.stateNode):xO(Jn,h.stateNode))}else Di(l,u,h);break;case 18:ce&&Jn!==null&&(ni?JO(Jn,h.stateNode):XO(Jn,h.stateNode));break;case 4:ce?(S=Jn,P=ni,Jn=h.stateNode.containerInfo,ni=!0,Di(l,u,h),Jn=S,ni=P):(U&&(S=h.stateNode.containerInfo,P=i5(S),Rv(S,P)),Di(l,u,h));break;case 0:case 11:case 14:case 15:if(!gr&&(S=h.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){P=S=S.next;do{var x=P,D=x.destroy;x=x.tag,D!==void 0&&(x&2||x&4)&&b_(h,u,D),P=P.next}while(P!==S)}Di(l,u,h);break;case 1:if(!gr&&(ju(h,u),S=h.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=h.memoizedProps,S.state=h.memoizedState,S.componentWillUnmount()}catch(X){Yt(h,u,X)}Di(l,u,h);break;case 21:Di(l,u,h);break;case 22:h.mode&1?(gr=(S=gr)||h.memoizedState!==null,Di(l,u,h),gr=S):Di(l,u,h);break;default:Di(l,u,h)}}function bb(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var h=l.stateNode;h===null&&(h=l.stateNode=new OI),u.forEach(function(S){var P=VI.bind(null,l,S);h.has(S)||(h.add(S),S.then(P,P))})}}function ri(l,u){var h=u.deletions;if(h!==null)for(var S=0;S<h.length;S++){var P=h[S];try{var x=l,D=u;if(ce){var X=D;e:for(;X!==null;){switch(X.tag){case 5:Jn=X.stateNode,ni=!1;break e;case 3:Jn=X.stateNode.containerInfo,ni=!0;break e;case 4:Jn=X.stateNode.containerInfo,ni=!0;break e}X=X.return}if(Jn===null)throw Error(o(160));$_(x,D,P),Jn=null,ni=!1}else $_(x,D,P);var re=P.alternate;re!==null&&(re.return=null),P.return=null}catch(pe){Yt(P,u,pe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)Eb(u,l),u=u.sibling}function Eb(l,u){var h=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ri(u,l),Fi(l),S&4){try{qd(3,l,l.return),Up(3,l)}catch(be){Yt(l,l.return,be)}try{qd(5,l,l.return)}catch(be){Yt(l,l.return,be)}}break;case 1:ri(u,l),Fi(l),S&512&&h!==null&&ju(h,h.return);break;case 5:if(ri(u,l),Fi(l),S&512&&h!==null&&ju(h,h.return),ce){if(l.flags&32){var P=l.stateNode;try{s5(P)}catch(be){Yt(l,l.return,be)}}if(S&4&&(P=l.stateNode,P!=null)){var x=l.memoizedProps;if(h=h!==null?h.memoizedProps:x,S=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{PO(P,u,S,h,x,l)}catch(be){Yt(l,l.return,be)}}}break;case 6:if(ri(u,l),Fi(l),S&4&&ce){if(l.stateNode===null)throw Error(o(162));P=l.stateNode,x=l.memoizedProps,h=h!==null?h.memoizedProps:x;try{Lr(P,h,x)}catch(be){Yt(l,l.return,be)}}break;case 3:if(ri(u,l),Fi(l),S&4){if(ce&&H&&h!==null&&h.memoizedState.isDehydrated)try{QO(u.containerInfo)}catch(be){Yt(l,l.return,be)}if(U){P=u.containerInfo,x=u.pendingChildren;try{Rv(P,x)}catch(be){Yt(l,l.return,be)}}}break;case 4:if(ri(u,l),Fi(l),S&4&&U){x=l.stateNode,P=x.containerInfo,x=x.pendingChildren;try{Rv(P,x)}catch(be){Yt(l,l.return,be)}}break;case 13:ri(u,l),Fi(l),P=l.child,P.flags&8192&&(x=P.memoizedState!==null,P.stateNode.isHidden=x,!x||P.alternate!==null&&P.alternate.memoizedState!==null||(A_=Hn())),S&4&&bb(l);break;case 22:var D=h!==null&&h.memoizedState!==null;if(l.mode&1?(gr=(h=gr)||D,ri(u,l),gr=h):ri(u,l),Fi(l),S&8192){if(h=l.memoizedState!==null,(l.stateNode.isHidden=h)&&!D&&l.mode&1)for(xe=l,S=l.child;S!==null;){for(u=xe=S;xe!==null;){D=xe;var X=D.child;switch(D.tag){case 0:case 11:case 14:case 15:qd(4,D,D.return);break;case 1:ju(D,D.return);var re=D.stateNode;if(typeof re.componentWillUnmount=="function"){var pe=D,Oe=D.return;try{var Be=pe;re.props=Be.memoizedProps,re.state=Be.memoizedState,re.componentWillUnmount()}catch(be){Yt(pe,Oe,be)}}break;case 5:ju(D,D.return);break;case 22:if(D.memoizedState!==null){$b(u);continue}}X!==null?(X.return=D,xe=X):$b(u)}S=S.sibling}if(ce){e:if(S=null,ce)for(u=l;;){if(u.tag===5){if(S===null){S=u;try{P=u.stateNode,h?RO(P):IO(u.stateNode,u.memoizedProps)}catch(be){Yt(l,l.return,be)}}}else if(u.tag===6){if(S===null)try{x=u.stateNode,h?OO(x):AO(x,u.memoizedProps)}catch(be){Yt(l,l.return,be)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;S===u&&(S=null),u=u.return}S===u&&(S=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:ri(u,l),Fi(l),S&4&&bb(l);break;case 21:break;default:ri(u,l),Fi(l)}}function Fi(l){var u=l.flags;if(u&2){try{if(ce){e:{for(var h=l.return;h!==null;){if(Sb(h)){var S=h;break e}h=h.return}throw Error(o(160))}switch(S.tag){case 5:var P=S.stateNode;S.flags&32&&(s5(P),S.flags&=-33);var x=kb(l);P_(l,x,P);break;case 3:case 4:var D=S.stateNode.containerInfo,X=kb(l);C_(l,X,D);break;default:throw Error(o(161))}}}catch(re){Yt(l,l.return,re)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function AI(l,u,h){xe=l,Cb(l)}function Cb(l,u,h){for(var S=(l.mode&1)!==0;xe!==null;){var P=xe,x=P.child;if(P.tag===22&&S){var D=P.memoizedState!==null||Lp;if(!D){var X=P.alternate,re=X!==null&&X.memoizedState!==null||gr;X=Lp;var pe=gr;if(Lp=D,(gr=re)&&!pe)for(xe=P;xe!==null;)D=xe,re=D.child,D.tag===22&&D.memoizedState!==null?Tb(P):re!==null?(re.return=D,xe=re):Tb(P);for(;x!==null;)xe=x,Cb(x),x=x.sibling;xe=P,Lp=X,gr=pe}Pb(l)}else P.subtreeFlags&8772&&x!==null?(x.return=P,xe=x):Pb(l)}}function Pb(l){for(;xe!==null;){var u=xe;if(u.flags&8772){var h=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:gr||Up(5,u);break;case 1:var S=u.stateNode;if(u.flags&4&&!gr)if(h===null)S.componentDidMount();else{var P=u.elementType===u.type?h.memoizedProps:ti(u.type,h.memoizedProps);S.componentDidUpdate(P,h.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var x=u.updateQueue;x!==null&&x5(u,x,S);break;case 3:var D=u.updateQueue;if(D!==null){if(h=null,u.child!==null)switch(u.child.tag){case 5:h=ve(u.child.stateNode);break;case 1:h=u.child.stateNode}x5(u,D,h)}break;case 5:var X=u.stateNode;h===null&&u.flags&4&&CO(X,u.type,u.memoizedProps,u);break;case 6:break;case 4:break;case 12:break;case 13:if(H&&u.memoizedState===null){var re=u.alternate;if(re!==null){var pe=re.memoizedState;if(pe!==null){var Oe=pe.dehydrated;Oe!==null&&YO(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}gr||u.flags&512&&E_(u)}catch(Be){Yt(u,u.return,Be)}}if(u===l){xe=null;break}if(h=u.sibling,h!==null){h.return=u.return,xe=h;break}xe=u.return}}function $b(l){for(;xe!==null;){var u=xe;if(u===l){xe=null;break}var h=u.sibling;if(h!==null){h.return=u.return,xe=h;break}xe=u.return}}function Tb(l){for(;xe!==null;){var u=xe;try{switch(u.tag){case 0:case 11:case 15:var h=u.return;try{Up(4,u)}catch(re){Yt(u,h,re)}break;case 1:var S=u.stateNode;if(typeof S.componentDidMount=="function"){var P=u.return;try{S.componentDidMount()}catch(re){Yt(u,P,re)}}var x=u.return;try{E_(u)}catch(re){Yt(u,x,re)}break;case 5:var D=u.return;try{E_(u)}catch(re){Yt(u,D,re)}}}catch(re){Yt(u,u.return,re)}if(u===l){xe=null;break}var X=u.sibling;if(X!==null){X.return=u.return,xe=X;break}xe=u.return}}var Vp=0,Gp=1,Hp=2,qp=3,Bp=4;if(typeof Symbol=="function"&&Symbol.for){var Bd=Symbol.for;Vp=Bd("selector.component"),Gp=Bd("selector.has_pseudo_class"),Hp=Bd("selector.role"),qp=Bd("selector.test_id"),Bp=Bd("selector.text")}function T_(l){var u=dt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(o(364));return u}if(l=$t(l),l===null)throw Error(o(362));return l.stateNode.current}function x_(l,u){switch(u.$$typeof){case Vp:if(l.type===u.value)return!0;break;case Gp:e:{u=u.value,l=[l,0];for(var h=0;h<l.length;){var S=l[h++],P=l[h++],x=u[P];if(S.tag!==5||!fn(S)){for(;x!=null&&x_(S,x);)P++,x=u[P];if(P===u.length){u=!0;break e}else for(S=S.child;S!==null;)l.push(S,P),S=S.sibling}}u=!1}return u;case Hp:if(l.tag===5&&as(l.stateNode,u.value))return!0;break;case Bp:if((l.tag===5||l.tag===6)&&(l=Pn(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case qp:if(l.tag===5&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function N_(l){switch(l.$$typeof){case Vp:return"<"+(M(l.value)||"Unknown")+">";case Gp:return":has("+(N_(l)||"")+")";case Hp:return'[role="'+l.value+'"]';case Bp:return'"'+l.value+'"';case qp:return'[data-testname="'+l.value+'"]';default:throw Error(o(365))}}function xb(l,u){var h=[];l=[l,0];for(var S=0;S<l.length;){var P=l[S++],x=l[S++],D=u[x];if(P.tag!==5||!fn(P)){for(;D!=null&&x_(P,D);)x++,D=u[x];if(x===u.length)h.push(P);else for(P=P.child;P!==null;)l.push(P,x),P=P.sibling}}return h}function R_(l,u){if(!Vt)throw Error(o(363));l=T_(l),l=xb(l,u),u=[],l=Array.from(l);for(var h=0;h<l.length;){var S=l[h++];if(S.tag===5)fn(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return u}var jI=Math.ceil,Wp=a.ReactCurrentDispatcher,O_=a.ReactCurrentOwner,_n=a.ReactCurrentBatchConfig,st=0,Bn=null,$n=null,er=0,us=0,Mu=Wo(0),In=0,Wd=null,cl=0,Zp=0,I_=0,Zd=null,Hr=null,A_=0,j_=1/0,fo=null;function zu(){j_=Hn()+500}var Kp=!1,M_=null,Yo=null,Qp=!1,Xo=null,Yp=0,Kd=0,z_=null,Xp=-1,Jp=0;function yr(){return st&6?Hn():Xp!==-1?Xp:Xp=Hn()}function Jo(l){return l.mode&1?st&2&&er!==0?er&-er:yI.transition!==null?(Jp===0&&(Jp=h5()),Jp):(l=_t,l!==0?l:Ie()):1}function Ns(l,u,h,S){if(50<Kd)throw Kd=0,z_=null,Error(o(185));Id(l,h,S),(!(st&2)||l!==Bn)&&(l===Bn&&(!(st&2)&&(Zp|=h),In===4&&ea(l,er)),qr(l,S),h===1&&st===0&&!(u.mode&1)&&(zu(),_p&&Ii()))}function qr(l,u){var h=l.callbackNode;lI(l,u);var S=yp(l,l===Bn?er:0);if(S===0)h!==null&&m5(h),l.callbackNode=null,l.callbackPriority=0;else if(u=S&-S,l.callbackPriority!==u){if(h!=null&&m5(h),u===1)l.tag===0?gI(Rb.bind(null,l)):g5(Rb.bind(null,l)),gt?vn(function(){!(st&6)&&Ii()}):Lv(Uv,Ii),h=null;else{switch(p5(S)){case 1:h=Uv;break;case 4:h=fI;break;case 16:h=Vv;break;case 536870912:h=hI;break;default:h=Vv}h=Lb(h,Nb.bind(null,l))}l.callbackPriority=u,l.callbackNode=h}}function Nb(l,u){if(Xp=-1,Jp=0,st&6)throw Error(o(327));var h=l.callbackNode;if(hl()&&l.callbackNode!==h)return null;var S=yp(l,l===Bn?er:0);if(S===0)return null;if(S&30||S&l.expiredLanes||u)u=em(l,S);else{u=S;var P=st;st|=2;var x=Ab();(Bn!==l||er!==u)&&(fo=null,zu(),dl(l,u));do try{DI();break}catch(X){Ib(l,X)}while(!0);Qv(),Wp.current=x,st=P,$n!==null?u=0:(Bn=null,er=0,u=In)}if(u!==0){if(u===2&&(P=zv(l),P!==0&&(S=P,u=D_(l,P))),u===1)throw h=Wd,dl(l,0),ea(l,S),qr(l,Hn()),h;if(u===6)ea(l,S);else{if(P=l.current.alternate,!(S&30)&&!MI(P)&&(u=em(l,S),u===2&&(x=zv(l),x!==0&&(S=x,u=D_(l,x))),u===1))throw h=Wd,dl(l,0),ea(l,S),qr(l,Hn()),h;switch(l.finishedWork=P,l.finishedLanes=S,u){case 0:case 1:throw Error(o(345));case 2:fl(l,Hr,fo);break;case 3:if(ea(l,S),(S&130023424)===S&&(u=A_+500-Hn(),10<u)){if(yp(l,0)!==0)break;if(P=l.suspendedLanes,(P&S)!==S){yr(),l.pingedLanes|=l.suspendedLanes&P;break}l.timeoutHandle=O(fl.bind(null,l,Hr,fo),u);break}fl(l,Hr,fo);break;case 4:if(ea(l,S),(S&4194240)===S)break;for(u=l.eventTimes,P=-1;0<S;){var D=31-Xs(S);x=1<<D,D=u[D],D>P&&(P=D),S&=~x}if(S=P,S=Hn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*jI(S/1960))-S,10<S){l.timeoutHandle=O(fl.bind(null,l,Hr,fo),S);break}fl(l,Hr,fo);break;case 5:fl(l,Hr,fo);break;default:throw Error(o(329))}}}return qr(l,Hn()),l.callbackNode===h?Nb.bind(null,l):null}function D_(l,u){var h=Zd;return l.current.memoizedState.isDehydrated&&(dl(l,u).flags|=256),l=em(l,u),l!==2&&(u=Hr,Hr=h,u!==null&&F_(u)),l}function F_(l){Hr===null?Hr=l:Hr.push.apply(Hr,l)}function MI(l){for(var u=l;;){if(u.flags&16384){var h=u.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var S=0;S<h.length;S++){var P=h[S],x=P.getSnapshot;P=P.value;try{if(!Js(x(),P))return!1}catch{return!1}}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ea(l,u){for(u&=~I_,u&=~Zp,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var h=31-Xs(u),S=1<<h;l[h]=-1,u&=~S}}function Rb(l){if(st&6)throw Error(o(327));hl();var u=yp(l,0);if(!(u&1))return qr(l,Hn()),null;var h=em(l,u);if(l.tag!==0&&h===2){var S=zv(l);S!==0&&(u=S,h=D_(l,S))}if(h===1)throw h=Wd,dl(l,0),ea(l,u),qr(l,Hn()),h;if(h===6)throw Error(o(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,fl(l,Hr,fo),qr(l,Hn()),null}function Ob(l){Xo!==null&&Xo.tag===0&&!(st&6)&&hl();var u=st;st|=1;var h=_n.transition,S=_t;try{if(_n.transition=null,_t=1,l)return l()}finally{_t=S,_n.transition=h,st=u,!(st&6)&&Ii()}}function L_(){us=Mu.current,Gt(Mu)}function dl(l,u){l.finishedWork=null,l.finishedLanes=0;var h=l.timeoutHandle;if(h!==W&&(l.timeoutHandle=W,F(h)),$n!==null)for(h=$n.return;h!==null;){var S=h;switch(qv(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&hp();break;case 3:Iu(),Gt(Ur),Gt(hr),s_();break;case 5:n_(S);break;case 4:Iu();break;case 13:Gt(rn);break;case 19:Gt(rn);break;case 10:Yv(S.type._context);break;case 22:case 23:L_()}h=h.return}if(Bn=l,$n=l=ta(l.current,null),er=us=u,In=0,Wd=null,I_=Zp=cl=0,Hr=Zd=null,ll!==null){for(u=0;u<ll.length;u++)if(h=ll[u],S=h.interleaved,S!==null){h.interleaved=null;var P=S.next,x=h.pending;if(x!==null){var D=x.next;x.next=P,S.next=D}h.pending=S}ll=null}return l}function Ib(l,u){do{var h=$n;try{if(Qv(),Np.current=Ap,Rp){for(var S=sn.memoizedState;S!==null;){var P=S.queue;P!==null&&(P.pending=null),S=S.next}Rp=!1}if(ul=0,qn=On=sn=null,Dd=!1,Fd=0,O_.current=null,h===null||h.return===null){In=1,Wd=u,$n=null;break}e:{var x=l,D=h.return,X=h,re=u;if(u=er,X.flags|=32768,re!==null&&typeof re=="object"&&typeof re.then=="function"){var pe=re,Oe=X,Be=Oe.tag;if(!(Oe.mode&1)&&(Be===0||Be===11||Be===15)){var be=Oe.alternate;be?(Oe.updateQueue=be.updateQueue,Oe.memoizedState=be.memoizedState,Oe.lanes=be.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var Ht=sb(D);if(Ht!==null){Ht.flags&=-257,ib(Ht,D,X,x,u),Ht.mode&1&&rb(x,pe,u),u=Ht,re=pe;var At=u.updateQueue;if(At===null){var Br=new Set;Br.add(re),u.updateQueue=Br}else At.add(re);break e}else{if(!(u&1)){rb(x,pe,u),U_();break e}re=Error(o(426))}}else if(Qt&&X.mode&1){var ho=sb(D);if(ho!==null){!(ho.flags&65536)&&(ho.flags|=256),ib(ho,D,X,x,u),Zv(Au(re,X));break e}}x=re=Au(re,X),In!==4&&(In=2),Zd===null?Zd=[x]:Zd.push(x),x=D;do{switch(x.tag){case 3:x.flags|=65536,u&=-u,x.lanes|=u;var te=tb(x,re,u);T5(x,te);break e;case 1:X=re;var J=x.type,oe=x.stateNode;if(!(x.flags&128)&&(typeof J.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&(Yo===null||!Yo.has(oe)))){x.flags|=65536,u&=-u,x.lanes|=u;var Ee=nb(x,X,u);T5(x,Ee);break e}}x=x.return}while(x!==null)}Mb(h)}catch(De){u=De,$n===h&&h!==null&&($n=h=h.return);continue}break}while(!0)}function Ab(){var l=Wp.current;return Wp.current=Ap,l===null?Ap:l}function U_(){(In===0||In===3||In===2)&&(In=4),Bn===null||!(cl&268435455)&&!(Zp&268435455)||ea(Bn,er)}function em(l,u){var h=st;st|=2;var S=Ab();(Bn!==l||er!==u)&&(fo=null,dl(l,u));do try{zI();break}catch(P){Ib(l,P)}while(!0);if(Qv(),st=h,Wp.current=S,$n!==null)throw Error(o(261));return Bn=null,er=0,In}function zI(){for(;$n!==null;)jb($n)}function DI(){for(;$n!==null&&!cI();)jb($n)}function jb(l){var u=Fb(l.alternate,l,us);l.memoizedProps=l.pendingProps,u===null?Mb(l):$n=u,O_.current=null}function Mb(l){var u=l;do{var h=u.alternate;if(l=u.return,u.flags&32768){if(h=RI(h,u),h!==null){h.flags&=32767,$n=h;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{In=6,$n=null;return}}else if(h=NI(h,u,us),h!==null){$n=h;return}if(u=u.sibling,u!==null){$n=u;return}$n=u=l}while(u!==null);In===0&&(In=5)}function fl(l,u,h){var S=_t,P=_n.transition;try{_n.transition=null,_t=1,FI(l,u,h,S)}finally{_n.transition=P,_t=S}return null}function FI(l,u,h,S){do hl();while(Xo!==null);if(st&6)throw Error(o(327));h=l.finishedWork;var P=l.finishedLanes;if(h===null)return null;if(l.finishedWork=null,l.finishedLanes=0,h===l.current)throw Error(o(177));l.callbackNode=null,l.callbackPriority=0;var x=h.lanes|h.childLanes;if(uI(l,x),l===Bn&&($n=Bn=null,er=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Qp||(Qp=!0,Lb(Vv,function(){return hl(),null})),x=(h.flags&15990)!==0,h.subtreeFlags&15990||x){x=_n.transition,_n.transition=null;var D=_t;_t=1;var X=st;st|=4,O_.current=null,II(l,h),Eb(h,l),L(l.containerInfo),l.current=h,AI(h),dI(),st=X,_t=D,_n.transition=x}else l.current=h;if(Qp&&(Qp=!1,Xo=l,Yp=P),x=l.pendingLanes,x===0&&(Yo=null),pI(h.stateNode),qr(l,Hn()),u!==null)for(S=l.onRecoverableError,h=0;h<u.length;h++)P=u[h],S(P.value,{componentStack:P.stack,digest:P.digest});if(Kp)throw Kp=!1,l=M_,M_=null,l;return Yp&1&&l.tag!==0&&hl(),x=l.pendingLanes,x&1?l===z_?Kd++:(Kd=0,z_=l):Kd=0,Ii(),null}function hl(){if(Xo!==null){var l=p5(Yp),u=_n.transition,h=_t;try{if(_n.transition=null,_t=16>l?16:l,Xo===null)var S=!1;else{if(l=Xo,Xo=null,Yp=0,st&6)throw Error(o(331));var P=st;for(st|=4,xe=l.current;xe!==null;){var x=xe,D=x.child;if(xe.flags&16){var X=x.deletions;if(X!==null){for(var re=0;re<X.length;re++){var pe=X[re];for(xe=pe;xe!==null;){var Oe=xe;switch(Oe.tag){case 0:case 11:case 15:qd(8,Oe,x)}var Be=Oe.child;if(Be!==null)Be.return=Oe,xe=Be;else for(;xe!==null;){Oe=xe;var be=Oe.sibling,Ht=Oe.return;if(wb(Oe),Oe===pe){xe=null;break}if(be!==null){be.return=Ht,xe=be;break}xe=Ht}}}var At=x.alternate;if(At!==null){var Br=At.child;if(Br!==null){At.child=null;do{var ho=Br.sibling;Br.sibling=null,Br=ho}while(Br!==null)}}xe=x}}if(x.subtreeFlags&2064&&D!==null)D.return=x,xe=D;else e:for(;xe!==null;){if(x=xe,x.flags&2048)switch(x.tag){case 0:case 11:case 15:qd(9,x,x.return)}var te=x.sibling;if(te!==null){te.return=x.return,xe=te;break e}xe=x.return}}var J=l.current;for(xe=J;xe!==null;){D=xe;var oe=D.child;if(D.subtreeFlags&2064&&oe!==null)oe.return=D,xe=oe;else e:for(D=J;xe!==null;){if(X=xe,X.flags&2048)try{switch(X.tag){case 0:case 11:case 15:Up(9,X)}}catch(De){Yt(X,X.return,De)}if(X===D){xe=null;break e}var Ee=X.sibling;if(Ee!==null){Ee.return=X.return,xe=Ee;break e}xe=X.return}}if(st=P,Ii(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(vp,l)}catch{}S=!0}return S}finally{_t=h,_n.transition=u}}return!1}function zb(l,u,h){u=Au(h,u),u=tb(l,u,1),l=Qo(l,u,1),u=yr(),l!==null&&(Id(l,1,u),qr(l,u))}function Yt(l,u,h){if(l.tag===3)zb(l,l,h);else for(;u!==null;){if(u.tag===3){zb(u,l,h);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Yo===null||!Yo.has(S))){l=Au(h,l),l=nb(u,l,1),u=Qo(u,l,1),l=yr(),u!==null&&(Id(u,1,l),qr(u,l));break}}u=u.return}}function LI(l,u,h){var S=l.pingCache;S!==null&&S.delete(u),u=yr(),l.pingedLanes|=l.suspendedLanes&h,Bn===l&&(er&h)===h&&(In===4||In===3&&(er&130023424)===er&&500>Hn()-A_?dl(l,0):I_|=h),qr(l,u)}function Db(l,u){u===0&&(l.mode&1?(u=gp,gp<<=1,!(gp&130023424)&&(gp=4194304)):u=1);var h=yr();l=Ai(l,u),l!==null&&(Id(l,u,h),qr(l,h))}function UI(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),Db(l,h)}function VI(l,u){var h=0;switch(l.tag){case 13:var S=l.stateNode,P=l.memoizedState;P!==null&&(h=P.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(u),Db(l,h)}var Fb;Fb=function(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps||Ur.current)Gr=!0;else{if(!(l.lanes&h)&&!(u.flags&128))return Gr=!1,xI(l,u,h);Gr=!!(l.flags&131072)}else Gr=!1,Qt&&u.flags&1048576&&y5(u,Sp,u.index);switch(u.lanes=0,u.tag){case 2:var S=u.type;zp(l,u),l=u.pendingProps;var P=Cu(u,hr.current);Ru(u,h),P=a_(null,u,S,l,P,h);var x=l_();return u.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Vr(S)?(x=!0,pp(u)):x=!1,u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,e_(u),P.updater=jp,u.stateNode=P,P._reactInternals=u,p_(u,S,l,h),u=v_(null,u,S,!0,x,h)):(u.tag=0,Qt&&x&&Hv(u),$r(null,u,P,h),u=u.child),u;case 16:S=u.elementType;e:{switch(zp(l,u),l=u.pendingProps,P=S._init,S=P(S._payload),u.type=S,P=u.tag=HI(S),l=ti(S,l),P){case 0:u=y_(null,u,S,l,h);break e;case 1:u=db(null,u,S,l,h);break e;case 11:u=ob(null,u,S,l,h);break e;case 14:u=ab(null,u,S,ti(S.type,l),h);break e}throw Error(o(306,S,""))}return u;case 0:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:ti(S,P),y_(l,u,S,P,h);case 1:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:ti(S,P),db(l,u,S,P,h);case 3:e:{if(fb(u),l===null)throw Error(o(387));S=u.pendingProps,x=u.memoizedState,P=x.element,$5(l,u),Tp(u,S,null,h);var D=u.memoizedState;if(S=D.element,H&&x.isDehydrated)if(x={element:S,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){P=Au(Error(o(423)),u),u=hb(l,u,S,h,P);break e}else if(S!==P){P=Au(Error(o(424)),u),u=hb(l,u,S,h,P);break e}else for(H&&(Ps=HO(u.stateNode.containerInfo),ls=u,Qt=!0,ei=null,Ad=!1),h=E5(u,null,S,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Tu(),S===P){u=co(l,u,h);break e}$r(l,u,S,h)}u=u.child}return u;case 5:return N5(u),l===null&&Wv(u),S=u.type,P=u.pendingProps,x=l!==null?l.memoizedProps:null,D=P.children,T(S,P)?D=null:x!==null&&T(S,x)&&(u.flags|=32),cb(l,u),$r(l,u,D,h),u.child;case 6:return l===null&&Wv(u),null;case 13:return pb(l,u,h);case 4:return t_(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=xu(u,null,S,h):$r(l,u,S,h),u.child;case 11:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:ti(S,P),ob(l,u,S,P,h);case 7:return $r(l,u,u.pendingProps,h),u.child;case 8:return $r(l,u,u.pendingProps.children,h),u.child;case 12:return $r(l,u,u.pendingProps.children,h),u.child;case 10:e:{if(S=u.type._context,P=u.pendingProps,x=u.memoizedProps,D=P.value,C5(u,S,D),x!==null)if(Js(x.value,D)){if(x.children===P.children&&!Ur.current){u=co(l,u,h);break e}}else for(x=u.child,x!==null&&(x.return=u);x!==null;){var X=x.dependencies;if(X!==null){D=x.child;for(var re=X.firstContext;re!==null;){if(re.context===S){if(x.tag===1){re=uo(-1,h&-h),re.tag=2;var pe=x.updateQueue;if(pe!==null){pe=pe.shared;var Oe=pe.pending;Oe===null?re.next=re:(re.next=Oe.next,Oe.next=re),pe.pending=re}}x.lanes|=h,re=x.alternate,re!==null&&(re.lanes|=h),Xv(x.return,h,u),X.lanes|=h;break}re=re.next}}else if(x.tag===10)D=x.type===u.type?null:x.child;else if(x.tag===18){if(D=x.return,D===null)throw Error(o(341));D.lanes|=h,X=D.alternate,X!==null&&(X.lanes|=h),Xv(D,h,u),D=x.sibling}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===u){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}$r(l,u,P.children,h),u=u.child}return u;case 9:return P=u.type,S=u.pendingProps.children,Ru(u,h),P=$s(P),S=S(P),u.flags|=1,$r(l,u,S,h),u.child;case 14:return S=u.type,P=ti(S,u.pendingProps),P=ti(S.type,P),ab(l,u,S,P,h);case 15:return lb(l,u,u.type,u.pendingProps,h);case 17:return S=u.type,P=u.pendingProps,P=u.elementType===S?P:ti(S,P),zp(l,u),u.tag=1,Vr(S)?(l=!0,pp(u)):l=!1,Ru(u,h),J5(u,S,P),p_(u,S,P,h),v_(null,u,S,!0,l,h);case 19:return gb(l,u,h);case 22:return ub(l,u,h)}throw Error(o(156,u.tag))};function Lb(l,u){return Lv(l,u)}function GI(l,u,h,S){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(l,u,h,S){return new GI(l,u,h,S)}function V_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function HI(l){if(typeof l=="function")return V_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===E)return 11;if(l===w)return 14}return 2}function ta(l,u){var h=l.alternate;return h===null?(h=Rs(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&14680064,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h}function tm(l,u,h,S,P,x){var D=2;if(S=l,typeof l=="function")V_(l)&&(D=1);else if(typeof l=="string")D=5;else e:switch(l){case f:return pl(h.children,P,x,u);case m:D=8,P|=8;break;case y:return l=Rs(12,h,u,P|2),l.elementType=y,l.lanes=x,l;case k:return l=Rs(13,h,u,P),l.elementType=k,l.lanes=x,l;case p:return l=Rs(19,h,u,P),l.elementType=p,l.lanes=x,l;case C:return nm(h,P,x,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case v:D=10;break e;case _:D=9;break e;case E:D=11;break e;case w:D=14;break e;case g:D=16,S=null;break e}throw Error(o(130,l==null?l:typeof l,""))}return u=Rs(D,h,u,P),u.elementType=l,u.type=S,u.lanes=x,u}function pl(l,u,h,S){return l=Rs(7,l,S,u),l.lanes=h,l}function nm(l,u,h,S){return l=Rs(22,l,S,u),l.elementType=C,l.lanes=h,l.stateNode={isHidden:!1},l}function G_(l,u,h){return l=Rs(6,l,null,u),l.lanes=h,l}function H_(l,u,h){return u=Rs(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function qI(l,u,h,S,P){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dv(0),this.expirationTimes=Dv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dv(0),this.identifierPrefix=S,this.onRecoverableError=P,H&&(this.mutableSourceEagerHydrationData=null)}function Ub(l,u,h,S,P,x,D,X,re){return l=new qI(l,u,h,X,re),u===1?(u=1,x===!0&&(u|=8)):u=0,x=Rs(3,null,null,u),l.current=x,x.stateNode=l,x.memoizedState={element:S,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},e_(x),l}function Vb(l){if(!l)return Zo;l=l._reactInternals;e:{if(q(l)!==l||l.tag!==1)throw Error(o(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Vr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(o(171))}if(l.tag===1){var h=l.type;if(Vr(h))return d5(l,h,u)}return u}function Gb(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=Y(u),l===null?null:l.stateNode}function Hb(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function rm(l,u){Hb(l,u),(l=l.alternate)&&Hb(l,u)}function BI(l){return l=Y(l),l===null?null:l.stateNode}function WI(){return null}return n.attemptContinuousHydration=function(l){if(l.tag===13){var u=Ai(l,134217728);if(u!==null){var h=yr();Ns(u,l,134217728,h)}rm(l,134217728)}},n.attemptDiscreteHydration=function(l){if(l.tag===13){var u=Ai(l,1);if(u!==null){var h=yr();Ns(u,l,1,h)}rm(l,1)}},n.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=Jo(l),h=Ai(l,u);if(h!==null){var S=yr();Ns(h,l,u,S)}rm(l,u)}},n.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var h=Od(u.pendingLanes);h!==0&&(Fv(u,h|1),qr(u,Hn()),!(st&6)&&(zu(),Ii()))}break;case 13:Ob(function(){var S=Ai(l,1);if(S!==null){var P=yr();Ns(S,l,1,P)}}),rm(l,1)}},n.batchedUpdates=function(l,u){var h=st;st|=1;try{return l(u)}finally{st=h,st===0&&(zu(),_p&&Ii())}},n.createComponentSelector=function(l){return{$$typeof:Vp,value:l}},n.createContainer=function(l,u,h,S,P,x,D){return Ub(l,u,!1,null,h,S,P,x,D)},n.createHasPseudoClassSelector=function(l){return{$$typeof:Gp,value:l}},n.createHydrationContainer=function(l,u,h,S,P,x,D,X,re){return l=Ub(h,S,!0,l,P,x,D,X,re),l.context=Vb(null),h=l.current,S=yr(),P=Jo(h),x=uo(S,P),x.callback=u??null,Qo(h,x,P),l.current.lanes=P,Id(l,P,S),qr(l,S),l},n.createPortal=function(l,u,h){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:S==null?null:""+S,children:l,containerInfo:u,implementation:h}},n.createRoleSelector=function(l){return{$$typeof:Hp,value:l}},n.createTestNameSelector=function(l){return{$$typeof:qp,value:l}},n.createTextSelector=function(l){return{$$typeof:Bp,value:l}},n.deferredUpdates=function(l){var u=_t,h=_n.transition;try{return _n.transition=null,_t=16,l()}finally{_t=u,_n.transition=h}},n.discreteUpdates=function(l,u,h,S,P){var x=_t,D=_n.transition;try{return _n.transition=null,_t=1,l(u,h,S,P)}finally{_t=x,_n.transition=D,st===0&&zu()}},n.findAllNodes=R_,n.findBoundingRects=function(l,u){if(!Vt)throw Error(o(363));u=R_(l,u),l=[];for(var h=0;h<u.length;h++)l.push(Nn(u[h]));for(u=l.length-1;0<u;u--){h=l[u];for(var S=h.x,P=S+h.width,x=h.y,D=x+h.height,X=u-1;0<=X;X--)if(u!==X){var re=l[X],pe=re.x,Oe=pe+re.width,Be=re.y,be=Be+re.height;if(S>=pe&&x>=Be&&P<=Oe&&D<=be){l.splice(u,1);break}else if(S!==pe||h.width!==re.width||be<x||Be>D){if(!(x!==Be||h.height!==re.height||Oe<S||pe>P)){pe>S&&(re.width+=pe-S,re.x=S),Oe<P&&(re.width=P-pe),l.splice(u,1);break}}else{Be>x&&(re.height+=Be-x,re.y=x),be<D&&(re.height=D-Be),l.splice(u,1);break}}}return l},n.findHostInstance=Gb,n.findHostInstanceWithNoPortals=function(l){return l=B(l),l=l!==null?se(l):null,l===null?null:l.stateNode},n.findHostInstanceWithWarning=function(l){return Gb(l)},n.flushControlled=function(l){var u=st;st|=1;var h=_n.transition,S=_t;try{_n.transition=null,_t=1,l()}finally{_t=S,_n.transition=h,st=u,st===0&&(zu(),Ii())}},n.flushPassiveEffects=hl,n.flushSync=Ob,n.focusWithin=function(l,u){if(!Vt)throw Error(o(363));for(l=T_(l),u=xb(l,u),u=Array.from(u),l=0;l<u.length;){var h=u[l++];if(!fn(h)){if(h.tag===5&&Rn(h.stateNode))return!0;for(h=h.child;h!==null;)u.push(h),h=h.sibling}}return!1},n.getCurrentUpdatePriority=function(){return _t},n.getFindAllNodesFailureDescription=function(l,u){if(!Vt)throw Error(o(363));var h=0,S=[];l=[T_(l),0];for(var P=0;P<l.length;){var x=l[P++],D=l[P++],X=u[D];if((x.tag!==5||!fn(x))&&(x_(x,X)&&(S.push(N_(X)),D++,D>h&&(h=D)),D<u.length))for(x=x.child;x!==null;)l.push(x,D),x=x.sibling}if(h<u.length){for(l=[];h<u.length;h++)l.push(N_(u[h]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},n.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return ve(l.child.stateNode);default:return l.child.stateNode}},n.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:BI,findFiberByHostInstance:l.findFiberByHostInstance||WI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{vp=u.inject(l),Oi=u}catch{}l=!!u.checkDCE}}return l},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(l,u,h,S){if(!Vt)throw Error(o(363));l=R_(l,u);var P=Ys(l,h,S).disconnect;return{disconnect:function(){P()}}},n.registerMutableSourceForHydration=function(l,u){var h=u._getVersion;h=h(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,h]:l.mutableSourceEagerHydrationData.push(u,h)},n.runWithPriority=function(l,u){var h=_t;try{return _t=l,u()}finally{_t=h}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(l,u,h,S){var P=u.current,x=yr(),D=Jo(P);return h=Vb(h),u.context===null?u.context=h:u.pendingContext=h,u=uo(x,D),u.payload={element:l},S=S===void 0?null:S,S!==null&&(u.callback=S),l=Qo(P,u,D),l!==null&&(Ns(l,P,D,x),$p(l,P,D)),D},n};yO.exports=Ooe;var Ioe=yO.exports;const Aoe=Lh(Ioe);var vO={exports:{}},bu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */bu.ConcurrentRoot=1;bu.ContinuousEventPriority=4;bu.DefaultEventPriority=16;bu.DiscreteEventPriority=1;bu.IdleEventPriority=536870912;bu.LegacyRoot=0;vO.exports=bu;var _O=vO.exports;const q9={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let B9=!1,W9=!1;const n5=".react-konva-event",joe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Moe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,zoe={};function Nv(t,e,n=zoe){if(!B9&&"zIndex"in e&&(console.warn(Moe),B9=!0),!W9&&e.draggable){var r=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;r&&!s&&(console.warn(joe),W9=!0)}for(var i in n)if(!q9[i]){var o=i.slice(0,2)==="on",a=n[i]!==e[i];if(o&&a){var c=i.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t.off(c,n[i])}var d=!e.hasOwnProperty(i);d&&t.setAttr(i,void 0)}var f=e._useStrictMode,m={},y=!1;const v={};for(var i in e)if(!q9[i]){var o=i.slice(0,2)==="on",_=n[i]!==e[i];if(o&&_){var c=i.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[i]&&(v[c]=e[i])}!o&&(e[i]!==n[i]||f&&e[i]!==t.getAttr(i))&&(y=!0,m[i]=e[i])}y&&(t.setAttrs(m),sl(t));for(var c in v)t.on(c+n5,v[c])}function sl(t){if(!rt.Konva.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const wO={},Doe={};Ah.Node.prototype._applyProps=Nv;function Foe(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),sl(t)}function Loe(t,e,n){let r=Ah[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Ah.Group);const s={},i={};for(var o in e){var a=o.slice(0,2)==="on";a?i[o]=e[o]:s[o]=e[o]}const c=new r(s);return Nv(c,i),c}function Uoe(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Voe(t,e,n){return!1}function Goe(t){return t}function Hoe(){return null}function qoe(){return null}function Boe(t,e,n,r){return Doe}function Woe(){}function Zoe(t){}function Koe(t,e){return!1}function Qoe(){return wO}function Yoe(){return wO}const Xoe=setTimeout,Joe=clearTimeout,eae=-1;function tae(t,e){return!1}const nae=!1,rae=!0,sae=!0;function iae(t,e){e.parent===t?e.moveToTop():t.add(e),sl(t)}function oae(t,e){e.parent===t?e.moveToTop():t.add(e),sl(t)}function SO(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),sl(t)}function aae(t,e,n){SO(t,e,n)}function lae(t,e){e.destroy(),e.off(n5),sl(t)}function uae(t,e){e.destroy(),e.off(n5),sl(t)}function cae(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function dae(t,e,n){}function fae(t,e,n,r,s){Nv(t,s,r)}function hae(t){t.hide(),sl(t)}function pae(t){}function mae(t,e){(e.visible==null||e.visible)&&t.show()}function gae(t,e){}function yae(t){}function vae(){}const _ae=()=>_O.DefaultEventPriority,wae=Object.freeze(Object.defineProperty({__proto__:null,appendChild:iae,appendChildToContainer:oae,appendInitialChild:Foe,cancelTimeout:Joe,clearContainer:yae,commitMount:dae,commitTextUpdate:cae,commitUpdate:fae,createInstance:Loe,createTextInstance:Uoe,detachDeletedInstance:vae,finalizeInitialChildren:Voe,getChildHostContext:Yoe,getCurrentEventPriority:_ae,getPublicInstance:Goe,getRootHostContext:Qoe,hideInstance:hae,hideTextInstance:pae,idlePriority:If.unstable_IdlePriority,insertBefore:SO,insertInContainerBefore:aae,isPrimaryRenderer:nae,noTimeout:eae,now:If.unstable_now,prepareForCommit:Hoe,preparePortalMount:qoe,prepareUpdate:Boe,removeChild:lae,removeChildFromContainer:uae,resetAfterCommit:Woe,resetTextContent:Zoe,run:If.unstable_runWithPriority,scheduleTimeout:Xoe,shouldDeprioritizeSubtree:Koe,shouldSetTextContent:tae,supportsMutation:sae,unhideInstance:mae,unhideTextInstance:gae,warnsIfNotActing:rae},Symbol.toStringTag,{value:"Module"}));var Sae=Object.defineProperty,kae=Object.defineProperties,bae=Object.getOwnPropertyDescriptors,Z9=Object.getOwnPropertySymbols,Eae=Object.prototype.hasOwnProperty,Cae=Object.prototype.propertyIsEnumerable,K9=(t,e,n)=>e in t?Sae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q9=(t,e)=>{for(var n in e||(e={}))Eae.call(e,n)&&K9(t,n,e[n]);if(Z9)for(var n of Z9(e))Cae.call(e,n)&&K9(t,n,e[n]);return t},Pae=(t,e)=>kae(t,bae(e)),Y9,X9;typeof window<"u"&&((Y9=window.document)!=null&&Y9.createElement||((X9=window.navigator)==null?void 0:X9.product)==="ReactNative")?Q.useLayoutEffect:Q.useEffect;function kO(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const s=kO(r,e,n);if(s)return s;r=r.sibling}}function bO(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const J9=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=J9;return}return J9.apply(this,arguments)};const r5=bO(Q.createContext(null));class EO extends Q.Component{render(){return Q.createElement(r5.Provider,{value:this._reactInternals},this.props.children)}}function $ae(){const t=Q.useContext(r5);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Q.useId();return Q.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const s=kO(r,!1,i=>{let o=i.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(s)return s}},[t,e])}function Tae(){const t=$ae(),[e]=Q.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const s=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;s&&s!==r5&&!e.has(s)&&e.set(s,Q.useContext(bO(s)))}n=n.return}return e}function xae(){const t=Tae();return Q.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>Q.createElement(e,null,Q.createElement(n.Provider,Pae(Q9({},r),{value:t.get(n)}))),e=>Q.createElement(EO,Q9({},e))),[t])}function Nae(t){const e=Te.useRef({});return Te.useLayoutEffect(()=>{e.current=t}),Te.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Rae=t=>{const e=Te.useRef(null),n=Te.useRef(null),r=Te.useRef(null),s=Nae(t),i=xae(),o=a=>{const{forwardedRef:c}=t;c&&(typeof c=="function"?c(a):c.current=a)};return Te.useLayoutEffect(()=>(n.current=new Ah.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=Of.createContainer(n.current,_O.LegacyRoot,!1,null),Of.updateContainer(Te.createElement(i,{},t.children),r.current),()=>{Ah.isBrowser&&(o(null),Of.updateContainer(null,r.current,null),n.current.destroy())}),[]),Te.useLayoutEffect(()=>{o(n.current),Nv(n.current,t,s),Of.updateContainer(Te.createElement(i,{},t.children),r.current,null)}),Te.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},Oae="Layer",pf="Rect",tr="Circle",ge="Line",As="Text",Of=Aoe(wae);Of.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Te.version,rendererPackageName:"react-konva"});const Iae=Te.forwardRef((t,e)=>Te.createElement(EO,{},Te.createElement(Rae,{...t,forwardedRef:e}))),Aae=({onComponentAdd:t,onComponentConnect:e,onWireDisconnect:n,onComponentUpdate:r,onReset:s,components:i})=>{const[o,a]=Q.useState(""),[c,d]=Q.useState(""),[f,m]=Q.useState(!1),y=w=>["battery","bulb","led","resistor","switch","capacitor","ground","connect","disconnect","remove","unlink","add","reset","circuit","move","drag","place","align","wire"].some(C=>w.toLowerCase().includes(C)),v=w=>{const g=w.toLowerCase(),C=[];return g.includes("battery")&&C.push("battery"),(g.includes("bulb")||g.includes("light"))&&C.push("lightbulb"),g.includes("led")&&C.push("led"),g.includes("resistor")&&C.push("resistor"),g.includes("switch")&&C.push("switch"),g.includes("capacitor")&&C.push("capacitor"),g.includes("ground")&&C.push("ground"),{components:C,shouldConnect:g.includes("connect")&&!g.includes("disconnect"),shouldDisconnect:g.includes("disconnect")||g.includes("unlink")||g.includes("remove")&&g.includes("wire"),shouldReset:g.includes("reset"),shouldMove:g.includes("move")||g.includes("drag")||g.includes("place"),moveTarget:C[0],position:_(g)}},_=w=>{let g=400,C=300;return w.includes("center")?(g=400,C=300):w.includes("left")?(g=200,C=300):w.includes("right")?(g=600,C=300):w.includes("top")||w.includes("above")?(g=400,C=200):(w.includes("bottom")||w.includes("below"))&&(g=400,C=400),g=Math.round(g/40)*40,C=Math.round(C/40)*40,{x:g,y:C}},E=w=>{switch(w){case"battery":return{voltage:9,maxCurrent:1};case"resistor":return{resistance:100};case"lightbulb":return{power:60,resistance:240};case"switch":return{closed:!0};case"led":return{forwardVoltage:2.1,maxCurrent:.02};case"capacitor":return{capacitance:.001};default:return{}}},k=async w=>{if(!y(w)){d("Please describe a circuit action.");return}const{components:g,shouldConnect:C,shouldDisconnect:$,shouldReset:N,shouldMove:M,moveTarget:A,position:q}=v(w);if(N){s(),d("Circuit reset.");return}if($&&n){const se=g[0],ae=g[1];if(se&&ae){const ve=i.find(ee=>ee.type===se),$e=i.find(ee=>ee.type===ae);ve&&$e?(n(ve.id,"right",$e.id,"left"),d(`Connection removed between ${se} and ${ae}.`)):d("Components not found for disconnection.")}else d("Please specify which components to disconnect.");return}if(M&&A){const se=i.find(ae=>ae.type===A);se?(r(se.id,"position",q),d(`${A} moved.`)):d(`${A} not found.`);return}if(g.length===0){d("No valid components found.");return}const G=[],B=[];g.forEach(se=>{const ae=i.find(ve=>ve.type===se);ae?G.push(ae):B.push(se)});const Y=[];B.forEach((se,ae)=>{const ve={id:`component-${Date.now()}-${ae}`,type:se,position:{x:200+ae*120,y:300},properties:E(se),nodes:[`node-${Date.now()}-${ae}-1`,`node-${Date.now()}-${ae}-2`],health:"normal"};t(ve),Y.push(ve)});const ie=[...G,...Y];C&&ie.length>1?(setTimeout(()=>{const se=ie.find($e=>$e.type==="battery"),ae=ie.find($e=>$e.type==="switch"),ve=ie.find($e=>["bulb","led","resistor"].includes($e.type));se&&ae&&ve?(e(se.id,ae.id,"right","left"),e(ae.id,ve.id,"right","left")):se&&ve&&!ae&&e(se.id,ve.id,"right","left")},100),B.length>0?d(`${B.join(", ")} added and connected.`):d("Components connected.")):B.length>0?d(`${B.join(", ")} added.`):d("Components already exist.")},p=async w=>{w.preventDefault(),!(!o.trim()||f)&&(m(!0),await k(o.trim()),m(!1),a(""))};return R.jsxs("div",{className:"generative-assistant",children:[R.jsxs("form",{onSubmit:p,children:[R.jsx("input",{type:"text",value:o,onChange:w=>a(w.target.value),placeholder:"add battery and bulb",disabled:f}),R.jsx("button",{type:"submit",disabled:f||!o.trim(),children:""})]}),c&&R.jsx("div",{className:"action-result",children:c})]})},Km={wire:{emoji:"",label:"Wire"},battery:{emoji:"",label:"Battery"},resistor:{emoji:"",label:"Resistor"},bulb:{emoji:"",label:"Light Bulb"},switch:{emoji:"",label:"Switch"},led:{emoji:"",label:"LED"},capacitor:{emoji:"",label:"Capacitor"},ground:{emoji:"",label:"Ground"},inductor:{emoji:"",label:"Inductor"},diode:{emoji:"",label:"Diode"},potentiometer:{emoji:"",label:"Potentiometer"},fuse:{emoji:"",label:"Fuse"},disconnect:{emoji:"",label:"Disconnect"},move:{emoji:"",label:"Move"}},jae=({components:t,wires:e,onComponentAdd:n,onComponentConnect:r,onWireDisconnect:s,onComponentRemove:i,onComponentUpdate:o,onReset:a,updateCircuitSimulation:c})=>{var V,z;const[d,f]=Q.useState("wire"),[m,y]=Q.useState(""),[v,_]=Q.useState(null),[E,k]=Q.useState(null),[p,w]=Q.useState(null),[g,C]=Q.useState(new Set),[$,N]=Q.useState(new Set(["Connection","Power Sources","Passive Components","Active Components"])),[M]=Q.useState(!1),[A]=Q.useState(!1),[q,G]=Q.useState(!1),[B,Y]=Q.useState(null),ie=[{title:"Connection",components:[{type:"wire",label:"Wire",emoji:""},{type:"disconnect",label:"Disconnect",emoji:""},{type:"move",label:"Move",emoji:""}]},{title:"Power Sources",components:[{type:"battery",label:"Battery",emoji:""},{type:"ground",label:"Ground",emoji:""}]},{title:"Passive Components",components:[{type:"resistor",label:"Resistor",emoji:""},{type:"capacitor",label:"Capacitor",emoji:""},{type:"inductor",label:"Inductor",emoji:""},{type:"potentiometer",label:"Potentiometer",emoji:""}]},{title:"Active Components",components:[{type:"led",label:"LED",emoji:""},{type:"bulb",label:"Light Bulb",emoji:""},{type:"switch",label:"Switch",emoji:""},{type:"diode",label:"Diode",emoji:""},{type:"resistor",label:"Transistor",emoji:""}]},{title:"Other Components",components:[{type:"fuse",label:"Fuse",emoji:""},{type:"inductor",label:"Transformer",emoji:""},{type:"switch",label:"Relay",emoji:""},{type:"bulb",label:"Motor",emoji:""},{type:"resistor",label:"Speaker",emoji:""},{type:"resistor",label:"Microphone",emoji:""},{type:"resistor",label:"Antenna",emoji:""},{type:"capacitor",label:"Crystal",emoji:""},{type:"resistor",label:"Op-Amp",emoji:""}]}],se=b=>{N(T=>{const j=new Set(T);return j.has(b)?j.delete(b):j.add(b),j})},ae=ie.map(b=>({...b,components:b.components.filter(({label:T})=>T.toLowerCase().includes(m.toLowerCase()))})).filter(b=>b.components.length>0),ve=d==="wire",$e=d==="disconnect",ee=b=>{const T=b.target.getStage(),j=T==null?void 0:T.getPointerPosition();if(j&&(w(null),!ve&&!$e&&k(null),!$e)){if(ve){let O=null;for(const F of t){const W={x:F.position.x-25,y:F.position.y},le={x:F.position.x+25,y:F.position.y},ce=Math.sqrt((W.x-j.x)**2+(W.y-j.y)**2),U=Math.sqrt((le.x-j.x)**2+(le.y-j.y)**2);if(ce<15){O={componentId:F.id,terminal:"left"};break}else if(U<15){O={componentId:F.id,terminal:"right"};break}}if(O){v?(v.componentId!==O.componentId&&r(v.componentId,O.componentId,v.terminal,O.terminal),_(null)):_(O);return}else _(null)}else if(!q&&d!=="move"&&d!=="wire"&&d!=="disconnect"){const O={id:`component-${Date.now()}`,type:d,position:{x:j.x,y:j.y},rotation:0,properties:L(d),nodes:[`node-${Date.now()}-1`,`node-${Date.now()}-2`],health:"normal"};n(O)}}},ue=()=>{a(),C(new Set)};Te.useEffect(()=>{const b=T=>{(T.key==="Delete"||T.key==="Backspace")&&E&&(s(E.from,E.fromTerminal,E.to,E.toTerminal),k(null)),T.key==="Escape"&&(k(null),w(null),_(null))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[E,s]);const L=b=>{switch(b){case"wire":return{};case"disconnect":return{};case"move":return{};case"battery":return{voltage:9,maxCurrent:1};case"resistor":return{resistance:100};case"bulb":return{power:60,resistance:240};case"switch":return{closed:!0};case"led":return{forwardVoltage:2.1,maxCurrent:.02};case"capacitor":return{capacitance:.001};case"ground":return{};case"inductor":return{inductance:.01};case"diode":return{forwardVoltage:.7};case"potentiometer":return{resistance:1e3,position:.5};case"fuse":return{maxCurrent:1,blown:!1};default:return{}}},I=b=>{const{position:T,type:j,properties:O}=b,W=(b.health||"normal")==="normal"?"#333":"red",le=(v==null?void 0:v.componentId)===b.id,ce=le?"#00ff00":W,U=T.x,H=T.y;switch(j){case"battery":const dt=(O.current||0)>0?"#0066cc":ce;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-8,H],stroke:dt,strokeWidth:2}),R.jsx(ge,{points:[U-8,H-20,U-8,H+20],stroke:dt,strokeWidth:4}),R.jsx(ge,{points:[U+8,H-15,U+8,H+15],stroke:dt,strokeWidth:2}),R.jsx(ge,{points:[U+8,H,U+25,H],stroke:dt,strokeWidth:2}),R.jsx(As,{x:U-5,y:H-35,text:"+",fontSize:14,fill:dt}),R.jsx(As,{x:U+12,y:H-35,text:"-",fontSize:14,fill:dt}),le&&R.jsx(tr,{x:U,y:H,radius:35,stroke:"#00ff00",strokeWidth:3})]},b.id);case"resistor":const Fe=(O.current||0)>.01?"#ff6600":W;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-30,H,U-15,H],stroke:Fe,strokeWidth:2}),R.jsx(pf,{x:U-15,y:H-6,width:30,height:12,stroke:Fe,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U+15,H,U+30,H],stroke:Fe,strokeWidth:2}),R.jsx(As,{x:U-8,y:H+3,text:"R",fontSize:10,fill:Fe})]},b.id);case"bulb":const Ie=O.glowing,Je=Ie?"#ffff66":"white",gt=Ie?"#ffcc00":W;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-15,H],stroke:gt,strokeWidth:2}),R.jsx(tr,{x:U,y:H,radius:15,stroke:gt,strokeWidth:2,fill:Je}),R.jsx(ge,{points:[U-8,H-8,U+8,H+8],stroke:gt,strokeWidth:1}),R.jsx(ge,{points:[U-8,H+8,U+8,H-8],stroke:gt,strokeWidth:1}),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:gt,strokeWidth:2}),Ie&&R.jsx(tr,{x:U,y:H,radius:20,stroke:"#ffff66",strokeWidth:1,opacity:.3})]},b.id);case"switch":const vn=O.closed!==!1,Vt=vn?0:-15;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(tr,{x:U-10,y:H,radius:2,fill:W}),R.jsx(ge,{points:[U-10,H,U+8,H+Vt],stroke:vn?"#00cc00":"#cc0000",strokeWidth:2}),R.jsx(tr,{x:U+10,y:H,radius:2,fill:W}),R.jsx(ge,{points:[U+10,H,U+25,H],stroke:W,strokeWidth:2})]},b.id);case"led":const $t=O.glowing,Nn=$t?"#ff0000":"#660000";return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H-8,U+10,H,U-10,H+8,U-10,H-8],stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U+10,H-8,U+10,H+8],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+10,H,U+25,H],stroke:W,strokeWidth:2}),R.jsx(tr,{x:U,y:H,radius:3,fill:Nn}),$t&&R.jsxs(R.Fragment,{children:[R.jsx(ge,{points:[U+5,H-15,U+12,H-22],stroke:"red",strokeWidth:2}),R.jsx(ge,{points:[U+12,H-22,U+10,H-20],stroke:"red",strokeWidth:2}),R.jsx(ge,{points:[U+12,H-22,U+14,H-20],stroke:"red",strokeWidth:2}),R.jsx(tr,{x:U,y:H,radius:12,stroke:"#ff6666",strokeWidth:1,opacity:.4})]})]},b.id);case"capacitor":const Pn=O.charging,fn=Pn?"#0066ff":W;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-5,H],stroke:fn,strokeWidth:2}),R.jsx(ge,{points:[U-5,H-15,U-5,H+15],stroke:fn,strokeWidth:3}),R.jsx(ge,{points:[U+5,H-15,U+5,H+15],stroke:fn,strokeWidth:3}),R.jsx(ge,{points:[U+5,H,U+25,H],stroke:fn,strokeWidth:2}),Pn&&R.jsx(As,{x:U-8,y:H-25,text:"",fontSize:12,fill:"#0066ff"})]},b.id);case"ground":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U,H-20,U,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-15,H,U+15,H],stroke:W,strokeWidth:3}),R.jsx(ge,{points:[U-10,H+5,U+10,H+5],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-5,H+10,U+5,H+10],stroke:W,strokeWidth:1})]},b.id);case"inductor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-15,H],stroke:W,strokeWidth:2}),[0,1,2].map(Lr=>R.jsx(tr,{x:U-10+Lr*7,y:H-4,radius:4,stroke:W,strokeWidth:2,fill:"none"},Lr)),R.jsx(ge,{points:[U+11,H,U+25,H],stroke:W,strokeWidth:2})]},b.id);case"diode":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H-8,U+10,H,U-10,H+8,U-10,H-8],stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U+10,H-8,U+10,H+8],stroke:W,strokeWidth:3}),R.jsx(ge,{points:[U+10,H,U+25,H],stroke:W,strokeWidth:2})]},b.id);case"potentiometer":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-30,H,U-15,H],stroke:W,strokeWidth:2}),R.jsx(pf,{x:U-15,y:H-6,width:30,height:12,stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U+15,H,U+30,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U,H-15,U,H-6],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-3,H-18,U+3,H-12],stroke:W,strokeWidth:2}),R.jsx(As,{x:U-8,y:H+3,text:"POT",fontSize:8,fill:W})]},b.id);case"fuse":const as=O.blown,Rn=as?"red":W,Ys=as?"X":"F";return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-15,H],stroke:Rn,strokeWidth:2}),R.jsx(pf,{x:U-15,y:H-5,width:30,height:10,stroke:Rn,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:Rn,strokeWidth:2}),!as&&R.jsx(ge,{points:[U-10,H,U+10,H],stroke:Rn,strokeWidth:1}),R.jsx(As,{x:U-6,y:H+3,text:Ys,fontSize:8,fill:Rn})]},b.id);case"bulb":const Ri=O.spinning,bs=Ri?"#00cc00":W;return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-15,H],stroke:bs,strokeWidth:2}),R.jsx(tr,{x:U,y:H,radius:15,stroke:bs,strokeWidth:2,fill:"white"}),R.jsx(As,{x:U-6,y:H+3,text:"M",fontSize:12,fill:bs}),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:bs,strokeWidth:2}),Ri&&R.jsxs(R.Fragment,{children:[R.jsx(tr,{x:U,y:H,radius:18,stroke:"#00ff00",strokeWidth:1,opacity:.3}),R.jsx(As,{x:U+20,y:H-20,text:"",fontSize:12})]})]},b.id);case"resistor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H-15,U-10,H+15],stroke:W,strokeWidth:3}),R.jsx(ge,{points:[U-10,H-8,U+15,H-15],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H+8,U+15,H+15],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+15,H-15,U+15,H-25],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+15,H+15,U+15,H+25],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+12,H+12,U+18,H+18],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+15,H+15,U+12,H+12],stroke:W,strokeWidth:2})]},b.id);case"inductor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-15,H],stroke:W,strokeWidth:2}),[0,1,2].map(Lr=>R.jsx(tr,{x:U-10+Lr*3,y:H-4,radius:3,stroke:W,strokeWidth:2,fill:"none"},Lr)),R.jsx(ge,{points:[U-2,H-15,U-2,H+15],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+2,H-15,U+2,H+15],stroke:W,strokeWidth:2}),[0,1,2].map(Lr=>R.jsx(tr,{x:U+6+Lr*3,y:H-4,radius:3,stroke:W,strokeWidth:2,fill:"none"},Lr+3)),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:W,strokeWidth:2})]},b.id);case"switch":return R.jsxs(Te.Fragment,{children:[R.jsx(pf,{x:U-15,y:H-10,width:30,height:20,stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U-25,H,U-15,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-8,H-5,U+8,H-5],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-8,H+5,U+8,H+5],stroke:W,strokeWidth:2}),R.jsx(As,{x:U-8,y:H+2,text:"RLY",fontSize:8,fill:W})]},b.id);case"resistor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H-8,U-5,H-12,U+5,H-12,U+5,H+12,U-5,H+12,U-10,H+8],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+5,H-8,U+12,H-15],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+5,H+8,U+12,H+15],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+12,H-15,U+12,H+15],stroke:W,strokeWidth:2})]},b.id);case"resistor":return R.jsxs(Te.Fragment,{children:[R.jsx(tr,{x:U,y:H,radius:12,stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U-6,H-6,U+6,H+6],stroke:W,strokeWidth:1}),R.jsx(ge,{points:[U-6,H+6,U+6,H-6],stroke:W,strokeWidth:1}),R.jsx(ge,{points:[U,H+12,U,H+25],stroke:W,strokeWidth:2})]},b.id);case"resistor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U,H+15,U,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-15,H,U+15,H],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-10,H-5,U+10,H-5],stroke:W,strokeWidth:1}),R.jsx(ge,{points:[U-5,H-10,U+5,H-10],stroke:W,strokeWidth:1})]},b.id);case"capacitor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-25,H,U-10,H],stroke:W,strokeWidth:2}),R.jsx(pf,{x:U-10,y:H-8,width:20,height:16,stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U-5,H-6,U-5,H+6],stroke:W,strokeWidth:1}),R.jsx(ge,{points:[U+5,H-6,U+5,H+6],stroke:W,strokeWidth:1}),R.jsx(ge,{points:[U+10,H,U+25,H],stroke:W,strokeWidth:2}),R.jsx(As,{x:U-6,y:H+2,text:"X",fontSize:8,fill:W})]},b.id);case"resistor":return R.jsxs(Te.Fragment,{children:[R.jsx(ge,{points:[U-15,H-15,U+15,H,U-15,H+15,U-15,H-15],stroke:W,strokeWidth:2,fill:"white"}),R.jsx(ge,{points:[U-25,H-8,U-15,H-8],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U-25,H+8,U-15,H+8],stroke:W,strokeWidth:2}),R.jsx(ge,{points:[U+15,H,U+25,H],stroke:W,strokeWidth:2}),R.jsx(As,{x:U-10,y:H-5,text:"+",fontSize:10,fill:W}),R.jsx(As,{x:U-10,y:H+10,text:"-",fontSize:10,fill:W})]},b.id);default:return R.jsx(tr,{x:U,y:H,radius:8,fill:"gray",stroke:W},b.id)}};return R.jsxs("div",{className:"circuit-workspace",children:[R.jsxs("div",{className:`component-sidebar ${M?"mobile-open":""}`,children:[R.jsxs("div",{className:"sidebar-header",children:[R.jsx("h2",{className:"sidebar-title",children:"Components"}),R.jsx("input",{type:"text",placeholder:"Search components...",className:"search-input",value:m,onChange:b=>y(b.target.value)}),(ve||$e||v||q)&&R.jsx("div",{className:"selected-info",children:ve?v?"Click another component terminal to connect":"Click component terminals to connect them":$e?"Click any wire to disconnect it":q?"Move Mode: Click and drag components to reposition them":`Selected: ${(V=Km[d])==null?void 0:V.emoji} ${(z=Km[d])==null?void 0:z.label}`}),E&&R.jsx("div",{className:"selected-wire-info",children:"Wire selected - Press Delete to disconnect or right-click for options"})]}),R.jsx("div",{className:"component-sections",children:ae.map(b=>R.jsxs("div",{className:"component-section",children:[R.jsxs("div",{className:"section-header",onClick:()=>se(b.title),children:[R.jsx("h3",{className:"section-title",children:b.title}),R.jsx("div",{className:`section-toggle ${$.has(b.title)?"expanded":""}`,children:""})]}),R.jsx("div",{className:`component-list ${$.has(b.title)?"":"collapsed"}`,children:b.components.map(({type:T,label:j,emoji:O})=>R.jsxs("button",{onClick:()=>{T==="move"?(G(!q),f("move")):(f(T),G(!1)),_(null)},className:`component-item ${d===T?"selected":""} ${T==="move"&&q?"move-active":""}`,children:[R.jsx("span",{className:"component-icon",children:O}),R.jsx("span",{children:j})]},T))})]},b.title))})]}),R.jsx("div",{className:"canvas-area",children:R.jsxs("div",{className:"canvas-container",children:[t.length===0&&R.jsx("div",{className:"empty-canvas-message",children:R.jsxs("div",{className:"message-content",children:[R.jsx("h3",{children:"Start Building Your Circuit"}),R.jsx("p",{children:"Select a component from the left panel, then click on the board to place it"}),R.jsxs("div",{className:"message-hint",children:[R.jsx("span",{className:"hint-icon",children:""}),R.jsx("span",{children:"Choose components"}),R.jsx("span",{className:"hint-arrow",children:""}),R.jsx("span",{className:"hint-icon",children:""}),R.jsx("span",{children:"Click to place"})]})]})}),R.jsx(Iae,{width:520,height:600,onClick:ee,onMouseDown:b=>{if(q){const T=b.target.getStage(),j=T==null?void 0:T.getPointerPosition();if(!j)return;const O=t.find(F=>Math.sqrt((F.position.x-j.x)**2+(F.position.y-j.y)**2)<50);O&&(Y(O.id),console.log("Selected component:",O.type),b.evt.preventDefault())}},onMouseMove:b=>{if(q&&B){const T=b.target.getStage(),j=T==null?void 0:T.getPointerPosition();j&&(o(B,"position",j),b.evt.preventDefault())}},onMouseUp:b=>{q&&B&&(Y(null),console.log("Released component"),b.evt.preventDefault())},style:{display:"block",margin:"0 auto",cursor:q?"move":"default"},children:R.jsxs(Oae,{children:[ve&&t.map(b=>R.jsxs(Te.Fragment,{children:[R.jsx(tr,{x:b.position.x-25,y:b.position.y,radius:6,fill:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?"#EF4444":"#10B981",stroke:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?"#DC2626":"#059669",strokeWidth:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="left"?2:1}),R.jsx(tr,{x:b.position.x+25,y:b.position.y,radius:6,fill:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?"#EF4444":"#10B981",stroke:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?"#DC2626":"#059669",strokeWidth:(v==null?void 0:v.componentId)===b.id&&(v==null?void 0:v.terminal)==="right"?2:1})]},`terminals-${b.id}`)),e.map((b,T)=>{const j=t.find(le=>le.id===b.from),O=t.find(le=>le.id===b.to);if(!j||!O)return null;const F=b.fromTerminal==="left"?j.position.x-25:j.position.x+25,W=b.toTerminal==="left"?O.position.x-25:O.position.x+25;return R.jsx(ge,{points:[F,j.position.y,W,O.position.y],stroke:E===b?"#DC2626":"#6366F1",strokeWidth:E===b?4:3,hitStrokeWidth:10,onClick:le=>{le.cancelBubble=!0,$e?s(b.from,b.fromTerminal,b.to,b.toTerminal):k(b)},onContextMenu:le=>{le.evt.preventDefault();const ce=le.target.getStage(),U=ce==null?void 0:ce.getPointerPosition();U&&w({x:U.x,y:U.y,wire:b})}},`user-wire-${T}`)}),t.map((b,T)=>{if(T===0)return null;const j=t[T-1],O=`${j.id}-${b.id}`;return g.has(O)?null:R.jsx(ge,{points:[j.position.x+25,j.position.y,b.position.x-25,b.position.y],stroke:"#9CA3AF",strokeWidth:2,dash:[5,5],hitStrokeWidth:10,onClick:F=>{F.cancelBubble=!0,$e&&(C(W=>new Set([...W,O])),setTimeout(c,0))},onContextMenu:F=>{F.evt.preventDefault();const W=F.target.getStage(),le=W==null?void 0:W.getPointerPosition();le&&w({x:le.x,y:le.y,wire:{type:"auto",connectionId:O}})}},`auto-wire-${b.id}`)}),t.map(I),q&&B&&(()=>{const b=t.find(T=>T.id===B);return b?R.jsx(tr,{x:b.position.x,y:b.position.y,radius:40,stroke:"#ff6600",strokeWidth:3,dash:[5,5]},`move-highlight-${B}`):null})()]})})]})}),R.jsxs("div",{className:`controls-sidebar ${A?"mobile-open":""}`,children:[R.jsxs("div",{className:"controls-header",children:[R.jsx("h2",{className:"controls-title",children:"Active Components"}),R.jsx("p",{className:"controls-subtitle",children:"Components on the board"})]}),R.jsx("div",{className:"stats-section",children:R.jsxs("div",{className:"stats-grid",children:[R.jsxs("div",{className:"stat-card",children:[R.jsx("span",{className:"stat-number",children:t.length}),R.jsx("span",{className:"stat-label",children:"Parts"})]}),R.jsxs("div",{className:"stat-card",children:[R.jsx("span",{className:"stat-number",children:e.length}),R.jsx("span",{className:"stat-label",children:"Wires"})]})]})}),R.jsx("div",{className:"components-section",children:t.filter(b=>b.type!=="wire").map(b=>{var T,j;return R.jsxs("div",{className:"board-component",children:[R.jsxs("div",{className:"component-header",children:[R.jsxs("div",{className:"component-info",children:[R.jsx("span",{className:"component-emoji",children:(T=Km[b.type])==null?void 0:T.emoji}),R.jsx("span",{className:"component-name",children:(j=Km[b.type])==null?void 0:j.label})]}),R.jsx("button",{className:"remove-btn",onClick:()=>i(b.id),title:"Remove component",children:""})]}),R.jsxs("div",{className:"component-controls",children:[b.type==="battery"&&R.jsxs("div",{className:"control-group",children:[R.jsxs("span",{className:"control-label",children:["Voltage: ",R.jsxs("span",{className:"control-value",children:[b.properties.voltage,"V"]})]}),R.jsx("input",{type:"range",min:"1",max:"24",value:b.properties.voltage||9,onChange:O=>o(b.id,"voltage",parseInt(O.target.value)),className:"control-slider"})]}),b.type==="resistor"&&R.jsxs("div",{className:"control-group",children:[R.jsxs("span",{className:"control-label",children:["Resistance: ",R.jsxs("span",{className:"control-value",children:[b.properties.resistance,""]})]}),R.jsx("input",{type:"range",min:"10",max:"1000",step:"10",value:b.properties.resistance||100,onChange:O=>o(b.id,"resistance",parseInt(O.target.value)),className:"control-slider"})]}),b.type==="led"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.glowing?"on":"off"}`}),R.jsx("span",{children:b.properties.glowing?"ON":"OFF"})]})]}),b.type==="bulb"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.spinning?"on":"off"}`}),R.jsx("span",{children:b.properties.spinning?"SPINNING":"STOPPED"})]})]}),b.type==="bulb"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Status:"}),R.jsxs("div",{className:"status-indicator",children:[R.jsx("div",{className:`status-dot ${b.properties.glowing?"on":"off"}`}),R.jsx("span",{children:b.properties.glowing?"ON":"OFF"})]})]}),b.type==="switch"&&R.jsxs("div",{className:"control-group",children:[R.jsx("span",{className:"control-label",children:"Switch:"}),R.jsx("button",{onClick:()=>o(b.id,"closed",!b.properties.closed),className:`switch-btn ${b.properties.closed?"closed":"open"}`,children:b.properties.closed?"CLOSED":"OPEN"})]})]})]},b.id)})})]}),R.jsx(Aae,{onComponentAdd:n,onComponentConnect:r,onWireDisconnect:s,onComponentUpdate:o,onReset:ue,components:t}),p&&R.jsx("div",{className:"wire-context-menu",style:{position:"absolute",left:p.x,top:p.y,background:"white",border:"1px solid #ccc",borderRadius:"4px",padding:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e3},children:R.jsx("button",{onClick:()=>{p.wire.type==="auto"?(C(b=>new Set([...b,p.wire.connectionId])),setTimeout(c,0)):s(p.wire.from,p.wire.fromTerminal,p.wire.to,p.wire.toTerminal),w(null),k(null)},style:{background:"#dc2626",color:"white",border:"none",padding:"6px 12px",borderRadius:"3px",cursor:"pointer"},children:"Disconnect Wire"})})]})},Mae=({onLaunchPlayground:t,onLaunchAI:e})=>R.jsxs("div",{className:"homepage",children:[R.jsx("nav",{className:"homepage-nav",children:R.jsxs("div",{className:"nav-container",children:[R.jsx("div",{className:"nav-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("div",{className:"logo-icon",children:""}),R.jsx("span",{children:"OpenCircuit"})]})}),R.jsxs("div",{className:"nav-center",children:[R.jsx("a",{href:"#home",className:"nav-link active",children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link",onClick:n=>{n.preventDefault(),t()},children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link",onClick:n=>{n.preventDefault(),e()},children:"AI"})]}),R.jsx("div",{className:"nav-right",children:R.jsx("button",{className:"cta-button",onClick:t,children:"Launch Playground"})})]})}),R.jsx("section",{className:"hero",children:R.jsxs("div",{className:"hero-container",children:[R.jsxs("div",{className:"hero-left",children:[R.jsx("h1",{className:"hero-title",children:"Build. Connect. Understand Electricity."}),R.jsx("p",{className:"hero-subtitle",children:"A free, interactive electrical playground that lets learners build real circuits and understand how electricity flows  without labs, tools, or prompts."}),R.jsxs("div",{className:"hero-actions",children:[R.jsx("button",{className:"cta-button primary",onClick:t,children:"Launch Playground"}),R.jsx("button",{className:"cta-button secondary",onClick:e,children:"Ask AI Assistant"})]})]}),R.jsx("div",{className:"hero-right",children:R.jsxs("div",{className:"product-preview",children:[R.jsx("div",{className:"preview-header",children:R.jsxs("div",{className:"preview-dots",children:[R.jsx("span",{}),R.jsx("span",{}),R.jsx("span",{})]})}),R.jsxs("div",{className:"preview-content",children:[R.jsxs("div",{className:"preview-sidebar",children:[R.jsx("div",{className:"component-item",children:" Battery"}),R.jsx("div",{className:"component-item",children:" Bulb"}),R.jsx("div",{className:"component-item",children:" Switch"}),R.jsx("div",{className:"component-item",children:" LED"})]}),R.jsxs("div",{className:"preview-canvas",children:[R.jsx("div",{className:"circuit-element battery",children:""}),R.jsx("div",{className:"wire glowing"}),R.jsx("div",{className:"circuit-element bulb glowing",children:""})]})]})]})})]})}),R.jsx("section",{className:"value-props",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"value-grid",children:[R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"Learn by Building"}),R.jsx("p",{children:"Drag components and wire real circuits"})]}),R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"No Prompts. No Bots."}),R.jsx("p",{children:"The interface explains itself through visuals"})]}),R.jsxs("div",{className:"value-card",children:[R.jsx("h3",{children:"Accessible Everywhere"}),R.jsx("p",{children:"Runs in any browser, even on low-end devices"})]})]})})}),R.jsx("section",{className:"how-it-works",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"How It Works"}),R.jsxs("div",{className:"steps",children:[R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"1"}),R.jsx("h3",{children:"Choose Components"}),R.jsx("p",{children:"Select from batteries, bulbs, switches, and more"})]}),R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"2"}),R.jsx("h3",{children:"Connect Circuits"}),R.jsx("p",{children:"Wire components together with simple clicks"})]}),R.jsxs("div",{className:"step",children:[R.jsx("div",{className:"step-icon",children:"3"}),R.jsx("h3",{children:"See Electricity Come Alive"}),R.jsx("p",{children:"Watch bulbs glow and circuits respond in real-time"})]})]})]})}),R.jsx("section",{className:"audience",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"Who It's For"}),R.jsxs("div",{className:"audience-grid",children:[R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Students"}),R.jsx("p",{children:"Learn electrical concepts through hands-on experimentation"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Teachers"}),R.jsx("p",{children:"Demonstrate circuits without expensive lab equipment"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Self-learners"}),R.jsx("p",{children:"Explore electricity at your own pace, anywhere"})]}),R.jsxs("div",{className:"audience-card",children:[R.jsx("div",{className:"audience-icon",children:""}),R.jsx("h3",{children:"Under-resourced Schools"}),R.jsx("p",{children:"Access quality electrical education without physical labs"})]})]})]})}),R.jsx("section",{className:"technology",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"tech-content",children:[R.jsx("h2",{children:"Powered by Generative UI (Tambo)"}),R.jsx("p",{children:"OpenCircuit uses AI to adapt the interface to what's happening in your circuit, showing the right information at the right time  without asking questions."})]})})}),R.jsx("section",{className:"final-cta",children:R.jsxs("div",{className:"container",children:[R.jsx("h2",{children:"Start Building Circuits Today"}),R.jsx("button",{className:"cta-button primary large",onClick:t,children:"Launch Playground"})]})}),R.jsx("footer",{className:"footer",children:R.jsx("div",{className:"container",children:R.jsxs("div",{className:"footer-content",children:[R.jsx("div",{className:"footer-left",children:R.jsx("span",{children:"OpenCircuit  2026"})}),R.jsx("div",{className:"footer-right"})]})})})]}),zae=({onBack:t,onGoToPlayground:e})=>{const[n,r]=Q.useState(""),[s,i]=Q.useState(!1),[o,a]=Q.useState(null),c=y=>["voltage","current","resistance","ohm","circuit","led","capacitor","resistor","battery","power","electrical","electronics","ac","dc","transistor","diode","inductor","switch","wire","ground","frequency"].some(_=>y.toLowerCase().includes(_)),d=async y=>{var v,_,E,k,p,w;if(!c(y))return{type:"refusal",message:"I focus on electrical and circuit-related topics. Try asking about voltage, current, or components."};try{const g="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",C=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-8b-instant",messages:[{role:"system",content:"You are an electrical engineering tutor. Explain electrical concepts clearly for beginners. Keep responses concise and educational."},{role:"user",content:`Explain this electrical concept: ${y}`}],temperature:.3,max_tokens:300})});if(!C.ok){const B=await C.text();throw console.error("Groq API response:",B),new Error(`Groq API error: ${C.status}`)}const N=(_=(v=(await C.json()).choices[0])==null?void 0:v.message)==null?void 0:_.content;if(!N)throw new Error("No response from Groq");const M=N.split(`
`).filter(B=>B.trim()),A=((E=M[0])==null?void 0:E.replace(/\*\*/g,"").replace(/#+\s*/,""))||y,q=M.find(B=>!B.startsWith("**")&&!B.startsWith("-")&&B.length>50)||N.substring(0,200),G=M.filter(B=>B.startsWith("-")).map(B=>B.replace(/^-\s*/,"").replace(/\*\*/g,"")).slice(0,4);return{type:"concept",title:A,explanation:q.replace(/\*\*/g,""),breakdown:G.length>0?G:[(k=N.split(".")[0])==null?void 0:k.replace(/\*\*/g,""),(p=N.split(".")[1])==null?void 0:p.replace(/\*\*/g,""),(w=N.split(".")[2])==null?void 0:w.replace(/\*\*/g,"")].filter(Boolean)}}catch(g){console.error("Groq API error:",g);const C={current:{type:"concept",title:"Electric Current",explanation:"Electric current is the flow of electric charge through a conductor, measured in amperes (A).",breakdown:["Current flows from positive to negative terminal","Measured in amperes (A) or milliamperes (mA)","Higher current means more charge flowing per second","Current is what actually does the work in circuits"],formula:"I = Q/t (Current = Charge/Time)",example:"A 1A current means 1 coulomb of charge flows past a point every second"},voltage:{type:"concept",title:"Voltage",explanation:"Voltage is the electrical pressure that pushes current through a circuit.",breakdown:["Measured in volts (V)","Higher voltage can push more current","Like water pressure in pipes","Voltage difference creates current flow"],formula:"V = I  R (Ohm's Law)",example:"A 9V battery provides 9 volts of electrical pressure"}},$=Object.keys(C).find(N=>y.toLowerCase().includes(N));return $?C[$]:{type:"error",message:"Unable to generate explanation. Please try again or check your connection."}}},f=async y=>{if(y.preventDefault(),!!n.trim()){i(!0);try{const v=await d(n);a(v)}catch{a({type:"error",message:"Unable to generate explanation. Please try again."})}finally{i(!1)}}},m=()=>{if(!o)return null;switch(o.type){case"refusal":return R.jsx("div",{className:"explanation-card refusal",children:R.jsx("p",{children:o.message})});case"concept":return R.jsx("div",{className:"explanation-layout",children:R.jsxs("div",{className:"concept-card",children:[R.jsx("h2",{children:o.title}),R.jsx("p",{className:"main-explanation",children:o.explanation}),o.formula&&R.jsxs("div",{className:"formula-block",children:[R.jsx("h3",{children:"Formula"}),R.jsx("div",{className:"formula",children:o.formula})]}),o.breakdown&&R.jsxs("div",{className:"breakdown-panel",children:[R.jsx("h3",{children:"Key Points"}),R.jsx("ul",{children:o.breakdown.map((y,v)=>R.jsx("li",{children:y},v))})]}),o.example&&R.jsxs("div",{className:"example-block",children:[R.jsx("h3",{children:"Example"}),R.jsx("p",{children:o.example})]})]})});case"component":return R.jsx("div",{className:"explanation-layout",children:R.jsxs("div",{className:"component-card",children:[R.jsx("h2",{children:o.title}),R.jsx("p",{className:"main-explanation",children:o.explanation}),R.jsxs("div",{className:"breakdown-panel",children:[R.jsx("h3",{children:"Why This Matters"}),R.jsx("ul",{children:o.breakdown.map((y,v)=>R.jsx("li",{children:y},v))})]}),o.formula&&R.jsxs("div",{className:"formula-block",children:[R.jsx("h3",{children:"Calculation"}),R.jsx("div",{className:"formula",children:o.formula})]}),o.safety&&R.jsxs("div",{className:"safety-note",children:[R.jsx("h3",{children:" Safety Note"}),R.jsx("p",{children:o.safety})]})]})});default:return R.jsx("div",{className:"explanation-card general",children:R.jsx("p",{children:o.explanation})})}};return R.jsxs("div",{className:"ai-page",children:[R.jsxs("header",{className:"ai-header",children:[R.jsx("div",{className:"nav-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("span",{className:"logo-icon",children:""}),R.jsx("span",{className:"logo-text",children:"OpenCircuit"})]})}),R.jsxs("div",{className:"nav-center",children:[R.jsx("a",{href:"#home",className:"nav-link",onClick:y=>{y.preventDefault(),t()},children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link",onClick:y=>{y.preventDefault(),e()},children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link active",children:"AI"})]}),R.jsx("div",{className:"nav-right"})]}),R.jsxs("main",{className:"ai-main",children:[R.jsx("div",{className:"question-section",children:R.jsxs("form",{onSubmit:f,className:"question-form",children:[R.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Ask about electrical concepts... (e.g., What is Ohm's Law?)",disabled:s,className:"question-input"}),R.jsx("button",{type:"submit",disabled:s||!n.trim(),children:s?"...":"Ask"})]})}),R.jsx("div",{className:"explanation-area",children:m()}),R.jsxs("aside",{className:"quick-reference",children:[R.jsx("h3",{children:"Quick Reference"}),R.jsxs("div",{className:"reference-card",children:[R.jsx("h4",{children:"Key Formulas"}),R.jsxs("div",{className:"formula-list",children:[R.jsx("div",{children:"V = I  R (Ohm's Law)"}),R.jsx("div",{children:"P = V  I (Power)"}),R.jsx("div",{children:"Q = C  V (Capacitor)"})]})]}),R.jsxs("div",{className:"reference-card",children:[R.jsx("h4",{children:"Common Questions"}),R.jsxs("ul",{className:"topic-list",children:[R.jsx("li",{onClick:()=>r("What is Ohm's Law?"),children:"Ohm's Law"}),R.jsx("li",{onClick:()=>r("Why use resistor with LED?"),children:"LED Resistors"}),R.jsx("li",{onClick:()=>r("How does capacitor work?"),children:"Capacitors"}),R.jsx("li",{onClick:()=>r("AC vs DC difference?"),children:"AC vs DC"})]})]})]})]})]})};on({width:ys().default(800),height:ys().default(600),showGrid:tu().default(!1),highlightNodes:Bh(Ot()).optional()});const Dae=on({value:ys(),unit:Ot().default("A"),max:ys().optional(),position:nu(["top-right","top-left","bottom-right","bottom-left"]).default("top-right")}),Fae=on({value:ys(),unit:Ot().default("V"),range:Bh(ys()).optional(),position:nu(["top-right","top-left","bottom-right","bottom-left"]).default("top-right")}),Lae=on({type:nu(["short_circuit","overcurrent","reverse_polarity","component_failure"]),severity:nu(["warning","critical"]),message:Ot().optional(),takeover:tu().default(!1)}),Uae=on({intensity:ys().min(0).max(1),direction:nu(["forward","reverse"]).default("forward"),paths:Bh(on({from:Ot(),to:Ot(),current:ys()})).optional()}),Vae=on({charging:tu(),voltage:ys(),timeConstant:ys().optional(),showEquation:tu().default(!1)}),Gae=on({componentId:Ot(),reversed:tu(),showCorrection:tu().default(!0)}),Hae=on({components:Bh(on({id:Ot(),health:nu(["normal","stressed","damaged","blown"]),temperature:ys().optional()}))}),qae=on({strength:ys(),componentId:Ot(),showFieldLines:tu().default(!0)}),Bae=on({mode:nu(["voltage","current","resistance"]),probeA:Ot().optional(),probeB:Ot().optional(),reading:ys().optional()}),Wae=({value:t,unit:e,max:n,position:r})=>R.jsxs("div",{className:`current-meter ${r}`,children:[R.jsxs("div",{className:"meter-display",children:[R.jsx("span",{className:"value",children:t.toFixed(3)}),R.jsx("span",{className:"unit",children:e})]}),R.jsx("div",{className:"meter-label",children:"Current"}),n&&R.jsx("div",{className:"meter-bar",children:R.jsx("div",{className:"meter-fill",style:{width:`${Math.min(100,t/n*100)}%`}})})]}),Zae=({value:t,unit:e,range:n,position:r})=>R.jsxs("div",{className:`voltage-meter ${r}`,children:[R.jsxs("div",{className:"meter-display",children:[R.jsx("span",{className:"value",children:t.toFixed(1)}),R.jsx("span",{className:"unit",children:e})]}),R.jsx("div",{className:"meter-label",children:"Voltage"}),n&&R.jsxs("div",{className:"meter-range",children:["Range: ",n[0],"V - ",n[1],"V"]})]}),Kae=({type:t,severity:e,message:n,takeover:r})=>R.jsxs("div",{className:`safety-alert ${e} ${r?"takeover":""}`,children:[R.jsx("div",{className:"alert-icon",children:""}),R.jsx("div",{className:"alert-message",children:n||(t==="short_circuit"?"SHORT CIRCUIT DETECTED!":t==="overcurrent"?"OVERCURRENT CONDITION!":t==="reverse_polarity"?"REVERSE POLARITY!":"COMPONENT FAILURE!")}),r&&R.jsxs("div",{className:"alert-actions",children:[R.jsx("button",{className:"reset-btn",children:"Reset Circuit"}),R.jsx("button",{className:"replace-btn",children:"Replace Components"})]})]}),Qae=({intensity:t,direction:e,paths:n})=>R.jsxs("div",{className:"power-flow-viz",children:[R.jsxs("div",{className:"flow-indicator",style:{opacity:t,animation:`pulse ${2-t}s infinite`},children:[e==="forward"?"":""," Power Flowing (",(t*100).toFixed(0),"%)"]}),n&&R.jsx("div",{className:"flow-paths",children:n.map((r,s)=>R.jsxs("div",{className:"path-info",children:[r.from,"  ",r.to,": ",r.current.toFixed(3),"A"]},s))})]}),Yae=({charging:t,voltage:e,timeConstant:n,showEquation:r})=>R.jsxs("div",{className:"charge-graph",children:[R.jsx("div",{className:"graph-title",children:"Capacitor"}),R.jsxs("div",{className:"charge-status",children:[t?" Charging":" Discharging"," (",e.toFixed(2),"V)"]}),n&&R.jsxs("div",{className:"time-constant",children:[" = ",n.toFixed(2),"s"]}),r&&R.jsx("div",{className:"equation",children:"V(t) = V(1 - e^(-t/))"})]}),Xae=({componentId:t,reversed:e,showCorrection:n})=>R.jsxs("div",{className:"polarity-indicator",children:[R.jsxs("div",{className:"polarity-warning",children:[" Component ",t,": ",e?"Reverse":"Correct"," Polarity"]}),e&&n&&R.jsx("div",{className:"correction-hint",children:" Flip component to allow current flow"})]}),Jae=({components:t})=>R.jsxs("div",{className:"component-health",children:[R.jsx("div",{className:"health-title",children:"Component Status"}),t.map(e=>R.jsxs("div",{className:`health-item ${e.health}`,children:[R.jsx("span",{className:"component-id",children:e.id}),R.jsx("span",{className:"health-status",children:e.health}),e.temperature&&R.jsxs("span",{className:"temperature",children:[e.temperature,"C"]})]},e.id))]}),ele=({strength:t,componentId:e,showFieldLines:n})=>R.jsxs("div",{className:"magnetic-field",children:[R.jsx("div",{className:"field-title",children:"Magnetic Field"}),R.jsxs("div",{className:"field-strength",children:["Component ",e,": ",t.toFixed(2)," Tesla"]}),n&&R.jsx("div",{className:"field-visualization",children:" Field lines visible"})]}),tle=({mode:t,probeA:e,probeB:n,reading:r})=>R.jsxs("div",{className:"multimeter",children:[R.jsx("div",{className:"meter-title",children:"Digital Multimeter"}),R.jsxs("div",{className:"meter-mode",children:["Mode: ",t.toUpperCase()]}),R.jsxs("div",{className:"probe-status",children:["Probe A: ",e||"Not connected",R.jsx("br",{}),"Probe B: ",n||"Not connected"]}),r!==void 0&&R.jsxs("div",{className:"meter-reading",children:[r.toFixed(3)," ",t==="voltage"?"V":t==="current"?"A":""]})]});class nle{constructor(){Os(this,"state");Os(this,"nodeMap");Os(this,"componentMap");this.nodeMap=new Map,this.componentMap=new Map,this.state={nodes:[],components:[],wires:[],semanticState:{powerFlowActive:!1,openCircuit:!1,shortCircuit:!1,reversePolarityDetected:!1,overcurrentDetected:!1,capacitorCharging:!1,componentFailure:[],safetyRiskLevel:"none"}}}addComponent(e){this.componentMap.set(e.id,e),this.state.components=Array.from(this.componentMap.values()),this.updateCircuit()}connectNodes(e,n){this.state.wires.push({id:`wire-${Date.now()}`,fromNode:e,toNode:n,current:0,from:e,to:n}),this.updateCircuit()}updateCircuit(){this.initializeNodes(),this.calculateVoltages(),this.calculateCurrents(),this.updateComponentStates(),this.checkFailures()}initializeNodes(){this.state.components.forEach(e=>{e.nodes.forEach(n=>{if(!this.nodeMap.has(n)){const r={id:n,x:0,y:0,connections:[],voltage:0,current:0};this.nodeMap.set(n,r)}})}),this.state.nodes=Array.from(this.nodeMap.values())}calculateVoltages(){this.nodeMap.forEach(n=>{n.voltage!==void 0&&(n.voltage=0)}),this.state.components.filter(n=>n.type==="battery"&&(!n.health||n.health==="normal")).forEach(n=>{const[r,s]=n.nodes,i=n.properties.voltage||9;this.propagateVoltage(r,i),this.propagateVoltage(s,0)})}propagateVoltage(e,n){const r=this.nodeMap.get(e);r&&r.voltage!==void 0&&(r.voltage=n,this.state.wires.forEach(s=>{const i=this.nodeMap.get(s.from||s.fromNode),o=this.nodeMap.get(s.to||s.toNode);(s.from||s.fromNode)===e&&(o==null?void 0:o.voltage)===0?this.propagateVoltage(s.to||s.toNode,n):(s.to||s.toNode)===e&&(i==null?void 0:i.voltage)===0&&this.propagateVoltage(s.from||s.fromNode,n)}))}calculateCurrents(){this.state.components.forEach(e=>{var a,c;const[n,r]=e.nodes,s=((a=this.nodeMap.get(n))==null?void 0:a.voltage)||0,i=((c=this.nodeMap.get(r))==null?void 0:c.voltage)||0,o=Math.abs(s-i);switch(e.type){case"resistor":const d=e.properties.resistance||1e3;e.properties.current=o/d;break;case"bulb":const f=e.properties.resistance||240;e.properties.current=o/f,e.properties.glowing=e.properties.current>.01;break;case"led":const m=e.properties.forwardVoltage||2.1;o>=m?(e.properties.current=(o-m)/100,e.properties.glowing=!0):(e.properties.current=0,e.properties.glowing=!1);break;case"bulb":const y=e.properties.resistance||50;e.properties.current=o/y,e.properties.spinning=e.properties.current>.1;break;case"capacitor":e.properties.charging=o>.1,e.properties.voltage=o;break}})}updateComponentStates(){this.state.components.forEach(e=>{switch(e.type){case"switch":e.properties.closed=e.properties.closed!==!1;break;case"fuse":const n=e.properties.current||0,r=e.properties.maxCurrent||1;n>r&&(e.properties.blown=!0,e.health="blown");break;case"inductor":const s=e.properties.primaryVoltage||0,i=(e.properties.secondaryTurns||50)/(e.properties.primaryTurns||100);e.properties.secondaryVoltage=s*i;break}})}checkFailures(){this.state.components.forEach(e=>{const n=e.properties.current||0,r=e.properties.maxCurrent||.1;n>r&&(e.health="blown")})}getSemantics(){const e=this.state.components.some(i=>i.type==="battery"&&(!i.health||i.health==="normal")),n=this.hasClosedCircuit(),r=this.detectShortCircuit(),s=this.state.components.some(i=>i.health&&i.health!=="normal");return{powerFlowActive:e&&n&&!r,openCircuit:!n,shortCircuit:r,reversePolarityDetected:this.detectReversePolarity(),overcurrentDetected:this.detectOvercurrent(),capacitorCharging:this.detectCapacitorCharging(),componentFailure:s?["component"]:[],safetyRiskLevel:r?"high":s?"medium":"none"}}hasClosedCircuit(){return this.state.wires.length>0&&this.componentMap.size>1}detectShortCircuit(){return this.state.components.some(e=>e.type==="battery"&&(e.properties.current||0)>1)}detectReversePolarity(){return this.state.components.some(e=>e.type==="led"&&(e.properties.voltage||0)<0)}detectOvercurrent(){return this.state.components.some(e=>(e.properties.current||0)>(e.properties.maxCurrent||.1))}detectCapacitorCharging(){return this.state.components.some(e=>e.type==="capacitor"&&(e.properties.charging||!1))}getState(){return this.state}}const rle=()=>{const[t]=Q.useState(()=>new nle),[e,n]=Q.useState([]),[r,s]=Q.useState([]),i=y=>{t.addComponent(y),n(v=>[...v,y])},o=y=>{n(v=>v.filter(_=>_.id!==y)),s(v=>v.filter(_=>_.from!==y&&_.to!==y)),setTimeout(f,0)},a=(y,v,_)=>{n(E=>{const k=E.map(N=>N.id===y?v==="position"?{...N,position:_}:{...N,properties:{...N.properties,[v]:_}}:N),p=k.find(N=>N.type==="battery"),w=k.filter(N=>N.type==="switch"),g=k.filter(N=>N.type==="bulb"),C=k.filter(N=>N.type==="led"),$=k.filter(N=>N.type==="bulb");return g.forEach(N=>{N.properties.glowing=!1,N.properties.current=0}),C.forEach(N=>{N.properties.glowing=!1,N.properties.current=0}),$.forEach(N=>{N.properties.spinning=!1}),p&&r.length>=1&&(w.length===0||w.every(M=>M.properties.closed===!0))&&(g.forEach(M=>{M.properties.glowing=!0,M.properties.current=.5}),C.forEach(M=>{M.properties.glowing=!0,M.properties.current=.02}),$.forEach(M=>{M.properties.spinning=!0,M.properties.current=.8})),k})},c=(y,v,_,E)=>{t.connectNodes(y,v);const k=[...r,{from:y,to:v,fromTerminal:_,toTerminal:E}];s(k),n(p=>{const w=p.map(A=>({...A}));w.forEach(A=>{A.type==="bulb"&&(A.properties.glowing=!1,A.properties.current=0),A.type==="led"&&(A.properties.glowing=!1,A.properties.current=0),A.type==="bulb"&&(A.properties.spinning=!1)});const g=w.find(A=>A.type==="battery"),C=w.filter(A=>A.type==="switch"),$=w.filter(A=>A.type==="bulb"),N=w.filter(A=>A.type==="led"),M=w.filter(A=>A.type==="bulb");return g&&k.length>=1&&(C.length===0||C.every(q=>q.properties.closed===!0))&&($.forEach(q=>{q.properties.glowing=!0,q.properties.current=.5}),N.forEach(q=>{q.properties.glowing=!0,q.properties.current=.02}),M.forEach(q=>{q.properties.spinning=!0,q.properties.current=.8})),w})},d=(y,v,_,E)=>{s(k=>k.filter(p=>!(p.from===y&&p.fromTerminal===v&&p.to===_&&p.toTerminal===E)&&!(p.from===_&&p.fromTerminal===E&&p.to===y&&p.toTerminal===v))),setTimeout(f,0)},f=()=>{n(y=>{const v=y.map(p=>({...p}));v.forEach(p=>{p.type==="bulb"&&(p.properties.glowing=!1,p.properties.current=0)});const _=v.find(p=>p.type==="battery"),E=v.filter(p=>p.type==="switch"),k=v.filter(p=>p.type==="bulb");return _&&k.length>0&&r.length>=2&&(E.length===0||E.every(w=>w.properties.closed===!0))&&r.length>=v.length-1&&k.forEach(g=>{g.properties.glowing=!0,g.properties.current=.5}),v})},m=()=>{n([]),s([])};return R.jsx("div",{className:"circuit-workspace",children:R.jsx(jae,{components:e,wires:r,onComponentAdd:i,onComponentConnect:c,onWireDisconnect:d,onComponentRemove:o,onComponentUpdate:a,onReset:m,updateCircuitSimulation:f})})},sle=()=>{const t="tambo_h9DtPlxhQc64RlVyf0J5VA8a0qpA0GzyFMOM4tyGPcZtNltFzj7JZFvB0ziwUvp5W4iATKLiHYdSOGSYmzBmkpp91EGmvpJGk068Xpy2/9Q=",[e,n]=Q.useState(!1),[r,s]=Q.useState(!1);return!e&&!r?R.jsx(Mae,{onLaunchPlayground:()=>n(!0),onLaunchAI:()=>s(!0)}):r?R.jsx(zae,{onBack:()=>s(!1),onGoToPlayground:()=>{s(!1),n(!0)}}):R.jsxs("div",{className:"app",children:[R.jsxs("header",{className:"app-header",children:[R.jsx("div",{className:"header-left",children:R.jsxs("div",{className:"logo",children:[R.jsx("div",{className:"logo-icon",children:""}),R.jsx("span",{children:"OpenCircuit"})]})}),R.jsxs("div",{className:"header-center",children:[R.jsx("a",{href:"#home",className:"nav-link",onClick:i=>{i.preventDefault(),n(!1),s(!1)},children:"Home"}),R.jsx("a",{href:"#playground",className:"nav-link active",children:"Playground"}),R.jsx("a",{href:"#ai",className:"nav-link",onClick:i=>{i.preventDefault(),n(!1),s(!0)},children:"AI"})]}),R.jsx("div",{className:"header-right"})]}),R.jsx("main",{className:"app-main",children:R.jsx($ne,{apiKey:t,components:[{name:"CurrentMeter",description:"Displays current flow measurements in the circuit",component:Wae,propsSchema:Dae},{name:"VoltageMeter",description:"Shows voltage measurements across circuit components",component:Zae,propsSchema:Fae},{name:"SafetyAlert",description:"Critical safety warnings for dangerous circuit conditions",component:Kae,propsSchema:Lae},{name:"PowerFlowVisualizer",description:"Visual representation of power flow through the circuit",component:Qae,propsSchema:Uae},{name:"ChargeGraph",description:"Graph showing charge accumulation over time",component:Yae,propsSchema:Vae},{name:"PolarityIndicator",description:"Shows positive and negative terminals",component:Xae,propsSchema:Gae},{name:"ComponentHealth",description:"Health status of circuit components",component:Jae,propsSchema:Hae},{name:"MagneticField",description:"Visualization of magnetic fields around components",component:ele,propsSchema:qae},{name:"Multimeter",description:"Digital multimeter for comprehensive measurements",component:tle,propsSchema:Bae}],children:R.jsx(rle,{})})})]})};J1.createRoot(document.getElementById("root")).render(R.jsx(Te.StrictMode,{children:R.jsx(sle,{})}));const tce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),rce=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Ile as $,eV as A,tV as B,sV as C,iV as D,oV as E,dV as F,dx as G,aV as H,cx as I,lV as J,uV as K,XU as L,Uue as M,cV as N,h0 as O,fV as P,Tt as Q,ii as R,Uz as S,I8 as T,JF as U,sF as V,_ue as W,dL as X,oF as Y,Ele as Z,Fu as _,ox as a,nF as a$,Cle as a0,rF as a1,Eh as a2,ZD as a3,QD as a4,tF as a5,Tle as a6,IT as a7,BD as a8,WD as a9,$le as aA,Ole as aB,mF as aC,lF as aD,YD as aE,RD as aF,ID as aG,dF as aH,H8 as aI,Mle as aJ,xD as aK,HD as aL,qD as aM,UD as aN,LD as aO,GD as aP,VD as aQ,uF as aR,JD as aS,FD as aT,Ule as aU,fF as aV,Ale as aW,Dle as aX,AD as aY,iF as aZ,yF as a_,jD as aa,MD as ab,vF as ac,xn as ad,dD as ae,bD as af,NT as ag,SD as ah,yD as ai,xT as aj,_D as ak,mD as al,fD as am,CD as an,gD as ao,hD as ap,uD as aq,cD as ar,PD as as,ED as at,vD as au,pD as av,kD as aw,cy as ax,wD as ay,wF as az,AU as b,cg as b$,pF as b0,OT as b1,eF as b2,aF as b3,hF as b4,MT as b5,gF as b6,Lle as b7,_F as b8,uy as b9,FF as bA,LF as bB,Yle as bC,QF as bD,Iue as bE,zF as bF,DF as bG,Xle as bH,Qle as bI,iue as bJ,ZF as bK,Hle as bL,NF as bM,RF as bN,fL as bO,sue as bP,Nue as bQ,yue as bR,UF as bS,bF as bT,TF as bU,oL as bV,bue as bW,Pue as bX,Ble as bY,Wle as bZ,a2 as b_,cF as ba,zT as bb,jle as bc,dy as bd,Kt as be,zle as bf,xle as bg,Fle as bh,jT as bi,Ke as bj,zD as bk,OD as bl,ND as bm,Nle as bn,AT as bo,Rle as bp,DD as bq,wle as br,ne as bs,Gle as bt,Vle as bu,$D as bv,NC as bw,jz as bx,qle as by,XF as bz,ax as c,cL as c$,TC as c0,sL as c1,KF as c2,Zle as c3,Jle as c4,vue as c5,jF as c6,MF as c7,HF as c8,GF as c9,YF as cA,xue as cB,WF as cC,Tue as cD,Zh as cE,q8 as cF,B8 as cG,Aue as cH,aue as cI,Due as cJ,pue as cK,jue as cL,wue as cM,hL as cN,tL as cO,W8 as cP,K8 as cQ,kue as cR,hue as cS,iL as cT,kF as cU,Lue as cV,Fue as cW,Oue as cX,tue as cY,Mue as cZ,uL as c_,BF as ca,qF as cb,VF as cc,AF as cd,zue as ce,LT as cf,Cue as cg,nL as ch,o2 as ci,ug as cj,Sue as ck,FT as cl,due as cm,mue as cn,d0 as co,fue as cp,xC as cq,oue as cr,xF as cs,Eue as ct,lue as cu,eL as cv,cue as cw,Rue as cx,uue as cy,aL as cz,MC as d,$ue as d0,lL as d1,Kle as d2,eue as d3,OF as d4,nue as d5,gue as d6,rL as d7,DT as d8,EF as d9,nce as dA,rce as dB,CF as da,PF as db,$F as dc,rue as dd,IF as de,Ya as df,no as dg,Qz as dh,Yz as di,s2 as dj,kf as dk,RT as dl,KD as dm,XD as dn,ble as dp,Ple as dq,SF as dr,Z8 as ds,Jz as dt,Xz as du,pL as dv,kle as dw,Sle as dx,TD as dy,tce as dz,jU as e,MU as f,IU as g,zU as h,OU as i,Vue as j,lx as k,DU as l,ux as m,bt as n,LU as o,is as p,UU as q,VU as r,HU as s,qU as t,ZU as u,KU as v,QU as w,YU as x,JU as y,mV as z};
