{
  "version": 3,
  "sources": ["../../partial-json/dist/options.js", "../../partial-json/dist/index.js", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/codegen/code.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/codegen/scope.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/codegen/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/util.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/names.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/errors.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/boolSchema.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/rules.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/applicability.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/dataType.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/defaults.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/code.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/keyword.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/subschema.ts", "../../fast-deep-equal/index.js", "../../@modelcontextprotocol/sdk/node_modules/json-schema-traverse/index.js", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/resolve.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/validate/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/runtime/validation_error.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/ref_error.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/compile/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/dist/refs/data.json", "../../fast-uri/lib/utils.js", "../../fast-uri/lib/schemes.js", "../../fast-uri/index.js", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/runtime/uri.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/core.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/core/id.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/core/ref.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/core/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/limitNumber.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/multipleOf.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/runtime/ucs2length.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/limitLength.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/pattern.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/limitProperties.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/required.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/limitItems.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/runtime/equal.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/uniqueItems.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/const.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/enum.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/validation/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/additionalItems.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/items.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/prefixItems.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/items2020.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/contains.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/dependencies.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/propertyNames.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/additionalProperties.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/properties.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/patternProperties.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/not.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/anyOf.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/oneOf.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/allOf.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/if.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/thenElse.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/applicator/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/format/format.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/format/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/metadata.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/draft7.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/discriminator/types.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/vocabularies/discriminator/index.ts", "../../@modelcontextprotocol/sdk/node_modules/ajv/dist/refs/json-schema-draft-07.json", "../../@modelcontextprotocol/sdk/node_modules/ajv/lib/ajv.ts", "../../ajv-formats/src/formats.ts", "../../ajv-formats/node_modules/ajv/lib/compile/codegen/code.ts", "../../ajv-formats/node_modules/ajv/lib/compile/codegen/scope.ts", "../../ajv-formats/node_modules/ajv/lib/compile/codegen/index.ts", "../../ajv-formats/node_modules/ajv/lib/compile/util.ts", "../../ajv-formats/node_modules/ajv/lib/compile/names.ts", "../../ajv-formats/node_modules/ajv/lib/compile/errors.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/boolSchema.ts", "../../ajv-formats/node_modules/ajv/lib/compile/rules.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/applicability.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/dataType.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/defaults.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/code.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/keyword.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/subschema.ts", "../../ajv-formats/node_modules/json-schema-traverse/index.js", "../../ajv-formats/node_modules/ajv/lib/compile/resolve.ts", "../../ajv-formats/node_modules/ajv/lib/compile/validate/index.ts", "../../ajv-formats/node_modules/ajv/lib/runtime/validation_error.ts", "../../ajv-formats/node_modules/ajv/lib/compile/ref_error.ts", "../../ajv-formats/node_modules/ajv/lib/compile/index.ts", "../../ajv-formats/node_modules/ajv/dist/refs/data.json", "../../ajv-formats/node_modules/ajv/lib/runtime/uri.ts", "../../ajv-formats/node_modules/ajv/lib/core.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/core/id.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/core/ref.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/core/index.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitNumber.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/multipleOf.ts", "../../ajv-formats/node_modules/ajv/lib/runtime/ucs2length.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitLength.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/pattern.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitProperties.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/required.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitItems.ts", "../../ajv-formats/node_modules/ajv/lib/runtime/equal.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/uniqueItems.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/const.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/enum.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/validation/index.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/additionalItems.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/items.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/prefixItems.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/items2020.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/contains.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/dependencies.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/propertyNames.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/additionalProperties.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/properties.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/patternProperties.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/not.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/anyOf.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/oneOf.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/allOf.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/if.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/thenElse.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/applicator/index.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/format/format.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/format/index.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/metadata.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/draft7.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/discriminator/types.ts", "../../ajv-formats/node_modules/ajv/lib/vocabularies/discriminator/index.ts", "../../ajv-formats/node_modules/ajv/dist/refs/json-schema-draft-07.json", "../../ajv-formats/node_modules/ajv/lib/ajv.ts", "../../ajv-formats/src/limit.ts", "../../ajv-formats/src/index.ts", "../../fast-unique-numbers/src/factories/add-unique-number.ts", "../../fast-unique-numbers/src/factories/cache.ts", "../../fast-unique-numbers/src/factories/generate-unique-number.ts", "../../fast-unique-numbers/src/module.ts", "../../broker-factory/src/factories/create-broker.ts", "../../broker-factory/src/factories/create-or-get-ongoing-requests.ts", "../../broker-factory/src/factories/extend-broker-implementation.ts", "../../broker-factory/src/guards/message-port.ts", "../../broker-factory/build/es2019/interfaces/broker-actions.js", "../../broker-factory/build/es2019/interfaces/broker-definition.js", "../../broker-factory/build/es2019/interfaces/default-broker-definition.js", "../../broker-factory/build/es2019/interfaces/worker-event.js", "../../broker-factory/src/interfaces/index.ts", "../../broker-factory/build/es2019/types/broker-implementation.js", "../../broker-factory/src/types/index.ts", "../../broker-factory/src/module.ts", "../../media-encoder-host-broker/build/es2019/interfaces/media-encoder-host-broker-definition.js", "../../media-encoder-host-broker/src/interfaces/index.ts", "../../media-encoder-host-broker/build/es2019/types/media-encoder-host-broker-loader.js", "../../media-encoder-host-broker/build/es2019/types/media-encoder-host-broker-wrapper.js", "../../media-encoder-host-broker/src/types/index.ts", "../../media-encoder-host-broker/src/module.ts", "../../media-encoder-host/src/worker/worker.ts", "../../media-encoder-host/src/module.ts", "../../extendable-media-recorder/src/factories/blob-event-factory.ts", "../../extendable-media-recorder/src/factories/decode-web-m-chunk.ts", "../../extendable-media-recorder/src/factories/event-target-constructor.ts", "../../extendable-media-recorder/src/factories/event-target-factory.ts", "../../extendable-media-recorder/src/factories/invalid-modification-error.ts", "../../extendable-media-recorder/src/factories/invalid-state-error.ts", "../../extendable-media-recorder/src/factories/is-supported-promise.ts", "../../extendable-media-recorder/src/factories/media-recorder-constructor.ts", "../../extendable-media-recorder/src/factories/native-blob-event-constructor.ts", "../../extendable-media-recorder/src/factories/native-media-recorder.ts", "../../extendable-media-recorder/src/factories/native-media-recorder-constructor.ts", "../../extendable-media-recorder/src/factories/not-supported-error.ts", "../../extendable-media-recorder/src/factories/read-element-content.ts", "../../extendable-media-recorder/src/factories/read-element-type.ts", "../../extendable-media-recorder/src/factories/read-variable-size-integer.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/add-unique-number.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/cache.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/generate-unique-number.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/add-unique-number-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/add-unique-number-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/cache-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/cache-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/generate-unique-number-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/generate-unique-number-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/types/index.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/module.ts", "../../rxjs-interop/source/symbols.ts", "../../rxjs-interop/source/patch.ts", "../../rxjs-interop/source/to-observer.ts", "../../rxjs-interop/dist/esm/types.js", "../../rxjs-interop/source/index.ts", "../../subscribable-things/src/factories/animation-frame.ts", "../../subscribable-things/src/factories/attribute.ts", "../../subscribable-things/src/factories/geolocation.ts", "../../subscribable-things/src/factories/intersections.ts", "../../subscribable-things/src/factories/map-subscribable-thing.ts", "../../subscribable-things/src/factories/media-devices.ts", "../../subscribable-things/src/factories/media-query-match.ts", "../../subscribable-things/src/factories/metrics.ts", "../../subscribable-things/src/factories/midi-inputs.ts", "../../subscribable-things/src/factories/midi-outputs.ts", "../../subscribable-things/src/factories/mutations.ts", "../../subscribable-things/src/factories/on.ts", "../../subscribable-things/src/factories/online.ts", "../../subscribable-things/src/factories/permission-state.ts", "../../subscribable-things/src/factories/prepend-subscribable-thing.ts", "../../subscribable-things/src/factories/reports.ts", "../../subscribable-things/src/factories/resizes.ts", "../../subscribable-things/src/factories/unhandled-rejection.ts", "../../subscribable-things/src/factories/video-frame.ts", "../../subscribable-things/src/factories/wake-lock.ts", "../../subscribable-things/src/factories/window.ts", "../../subscribable-things/src/factories/wrap-subscribe-function.ts", "../../subscribable-things/src/functions/emit-not-supported-error.ts", "../../subscribable-things/build/es2019/interfaces/html-video-element.js", "../../subscribable-things/build/es2019/interfaces/midi-access.js", "../../subscribable-things/build/es2019/interfaces/midi-connection-event.js", "../../subscribable-things/build/es2019/interfaces/midi-input.js", "../../subscribable-things/build/es2019/interfaces/midi-input-event-map.js", "../../subscribable-things/build/es2019/interfaces/midi-message-event.js", "../../subscribable-things/build/es2019/interfaces/midi-output.js", "../../subscribable-things/build/es2019/interfaces/midi-output-event-map.js", "../../subscribable-things/build/es2019/interfaces/midi-port.js", "../../subscribable-things/build/es2019/interfaces/report.js", "../../subscribable-things/build/es2019/interfaces/report-body.js", "../../subscribable-things/build/es2019/interfaces/reporting-observer.js", "../../subscribable-things/build/es2019/interfaces/reporting-observer-options.js", "../../subscribable-things/build/es2019/interfaces/resize-observer.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-entry.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-options.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-size.js", "../../subscribable-things/build/es2019/interfaces/video-frame-metadata.js", "../../subscribable-things/build/es2019/interfaces/wake-lock.js", "../../subscribable-things/build/es2019/interfaces/wake-lock-sentinel.js", "../../subscribable-things/build/es2019/interfaces/wake-lock-sentinel-event-map.js", "../../subscribable-things/src/interfaces/index.ts", "../../subscribable-things/build/es2019/types/animation-frame-factory.js", "../../subscribable-things/build/es2019/types/animation-frame-function.js", "../../subscribable-things/build/es2019/types/emit-not-supported-error-function.js", "../../subscribable-things/build/es2019/types/event-handler.js", "../../subscribable-things/build/es2019/types/event-target-with-property-handler.js", "../../subscribable-things/build/es2019/types/event-type.js", "../../subscribable-things/build/es2019/types/flexible-subscribe-function.js", "../../subscribable-things/build/es2019/types/intersections-factory.js", "../../subscribable-things/build/es2019/types/intersections-function.js", "../../subscribable-things/build/es2019/types/media-devices-factory.js", "../../subscribable-things/build/es2019/types/media-devices-function.js", "../../subscribable-things/build/es2019/types/media-query-match-factory.js", "../../subscribable-things/build/es2019/types/media-query-match-function.js", "../../subscribable-things/build/es2019/types/metrics-factory.js", "../../subscribable-things/build/es2019/types/metrics-function.js", "../../subscribable-things/build/es2019/types/midi-connection-event-handler.js", "../../subscribable-things/build/es2019/types/midi-inputs-factory.js", "../../subscribable-things/build/es2019/types/midi-inputs-function.js", "../../subscribable-things/build/es2019/types/midi-message-event-handler.js", "../../subscribable-things/build/es2019/types/midi-outputs-factory.js", "../../subscribable-things/build/es2019/types/midi-outputs-function.js", "../../subscribable-things/build/es2019/types/midi-port-connection-state.js", "../../subscribable-things/build/es2019/types/midi-port-device-state.js", "../../subscribable-things/build/es2019/types/midi-port-type.js", "../../subscribable-things/build/es2019/types/mutations-factory.js", "../../subscribable-things/build/es2019/types/mutations-function.js", "../../subscribable-things/build/es2019/types/observer-parameters.js", "../../subscribable-things/build/es2019/types/online-factory.js", "../../subscribable-things/build/es2019/types/online-function.js", "../../subscribable-things/build/es2019/types/on-factory.js", "../../subscribable-things/build/es2019/types/on-function.js", "../../subscribable-things/build/es2019/types/optional-unsubscribe-function.js", "../../subscribable-things/build/es2019/types/permission-state-factory.js", "../../subscribable-things/build/es2019/types/permission-state-function.js", "../../subscribable-things/build/es2019/types/release-event-handler.js", "../../subscribable-things/build/es2019/types/reports-factory.js", "../../subscribable-things/build/es2019/types/reports-function.js", "../../subscribable-things/build/es2019/types/resize-observer-box-options.js", "../../subscribable-things/build/es2019/types/resizes-factory.js", "../../subscribable-things/build/es2019/types/resizes-function.js", "../../subscribable-things/build/es2019/types/subscribable-thing.js", "../../subscribable-things/build/es2019/types/subscribe-function.js", "../../subscribable-things/build/es2019/types/unhandled-rejection-factory.js", "../../subscribable-things/build/es2019/types/unhandled-rejection-function.js", "../../subscribable-things/build/es2019/types/unsubscribe-function.js", "../../subscribable-things/build/es2019/types/video-frame-factory.js", "../../subscribable-things/build/es2019/types/video-frame-function.js", "../../subscribable-things/build/es2019/types/video-frame-request-callback.js", "../../subscribable-things/build/es2019/types/wake-lock-factory.js", "../../subscribable-things/build/es2019/types/wake-lock-function.js", "../../subscribable-things/build/es2019/types/wake-lock-type.js", "../../subscribable-things/build/es2019/types/window.js", "../../subscribable-things/build/es2019/types/window-factory.js", "../../subscribable-things/build/es2019/types/wrap-subscribe-function-factory.js", "../../subscribable-things/build/es2019/types/wrap-subscribe-function-function.js", "../../subscribable-things/src/types/index.ts", "../../subscribable-things/src/module.ts", "../../dashify/index.js", "../../indefinite-article/indefinite-article.js", "../../compilerr/build/es2019/interfaces/augmented-error.js", "../../compilerr/build/es2019/interfaces/aws-error.js", "../../compilerr/build/es2019/interfaces/error-template.js", "../../compilerr/build/es2019/interfaces/param-object.js", "../../compilerr/build/es2019/interfaces/variable.js", "../../compilerr/src/interfaces/index.ts", "../../compilerr/build/es2019/types/render-function.js", "../../compilerr/src/types/index.ts", "../../compilerr/src/module.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/error-renderers.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/create-message-handler.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/is-supporting-transferables.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/extend-worker-implementation.ts", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/broker-event.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/broker-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/default-worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error-notification.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error-response.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/notification.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/receiver.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/request.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/value-array.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/value-map.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-error-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-result-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/src/interfaces/index.ts", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/destroy-worker-function.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver-with-params.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver-without-params.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/typed-array.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/value.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/value-map.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-implementation.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/src/types/index.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/module.ts", "../../recorder-audio-worklet/src/factories/add-recorder-audio-worklet-module.ts", "../../recorder-audio-worklet/src/factories/listener.ts", "../../recorder-audio-worklet/src/factories/post-message-factory.ts", "../../recorder-audio-worklet/src/factories/recorder-audio-worklet-node-factory.ts", "../../recorder-audio-worklet/src/functions/validate-state.ts", "../../recorder-audio-worklet/src/worklet/worklet.ts", "../../recorder-audio-worklet/build/es2019/interfaces/native-recorder-audio-worklet-node.js", "../../recorder-audio-worklet/build/es2019/interfaces/recorder-audio-worklet-node.js", "../../recorder-audio-worklet/src/interfaces/index.ts", "../../recorder-audio-worklet/build/es2019/types/any-recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/native-recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/state.js", "../../recorder-audio-worklet/src/types/index.ts", "../../recorder-audio-worklet/src/module.ts", "../../automation-events/src/functions/create-extended-exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-extended-linear-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-set-value-automation-event.ts", "../../automation-events/src/functions/create-set-value-curve-automation-event.ts", "../../automation-events/src/functions/get-target-value-at-time.ts", "../../automation-events/src/guards/exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/linear-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/any-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/set-value-automation-event.ts", "../../automation-events/src/guards/set-value-curve-automation-event.ts", "../../automation-events/src/functions/get-value-of-automation-event-at-index-at-time.ts", "../../automation-events/src/functions/get-end-time-and-value-of-previous-automation-event.ts", "../../automation-events/src/guards/cancel-and-hold-automation-event.ts", "../../automation-events/src/guards/cancel-scheduled-values-automation-event.ts", "../../automation-events/src/functions/get-event-time.ts", "../../automation-events/src/functions/get-exponential-ramp-value-at-time.ts", "../../automation-events/src/functions/get-linear-ramp-value-at-time.ts", "../../automation-events/src/functions/interpolate-value.ts", "../../automation-events/src/functions/get-value-curve-value-at-time.ts", "../../automation-events/src/guards/set-target-automation-event.ts", "../../automation-events/src/classes/automation-event-list.ts", "../../automation-events/src/functions/create-cancel-and-hold-automation-event.ts", "../../automation-events/src/functions/create-cancel-scheduled-values-automation-event.ts", "../../automation-events/src/functions/create-exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-linear-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-set-target-automation-event.ts", "../../automation-events/build/es2019/interfaces/cancel-and-hold-automation-event.js", "../../automation-events/build/es2019/interfaces/cancel-scheduled-values-automation-event.js", "../../automation-events/build/es2019/interfaces/exponential-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/extended-exponential-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/extended-linear-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/linear-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/set-value-automation-event.js", "../../automation-events/build/es2019/interfaces/set-target-automation-event.js", "../../automation-events/build/es2019/interfaces/set-value-curve-automation-event.js", "../../automation-events/src/interfaces/index.ts", "../../automation-events/build/es2019/types/automation-event.js", "../../automation-events/build/es2019/types/persistent-automation-event.js", "../../automation-events/src/types/index.ts", "../../automation-events/src/module.ts", "../../standardized-audio-context/src/factories/abort-error.ts", "../../standardized-audio-context/src/factories/add-active-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-audio-node-connections.ts", "../../standardized-audio-context/src/factories/add-audio-param-connections.ts", "../../standardized-audio-context/src/globals.ts", "../../standardized-audio-context/src/helpers/is-constructible.ts", "../../standardized-audio-context/src/helpers/split-import-statements.ts", "../../standardized-audio-context/src/factories/add-audio-worklet-module.ts", "../../standardized-audio-context/src/helpers/get-value-for-key.ts", "../../standardized-audio-context/src/helpers/pick-element-from-set.ts", "../../standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/helpers/get-event-listeners-of-audio-node.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-active.ts", "../../standardized-audio-context/src/guards/audio-worklet-node.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-passive.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-passive-when-necessary.ts", "../../standardized-audio-context/src/factories/add-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-passive-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-silent-connection.ts", "../../standardized-audio-context/src/factories/add-unrendered-audio-worklet-node.ts", "../../standardized-audio-context/src/factories/analyser-node-constructor.ts", "../../standardized-audio-context/src/helpers/is-owned-by-context.ts", "../../standardized-audio-context/src/factories/analyser-node-renderer-factory.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support.ts", "../../standardized-audio-context/src/factories/index-size-error.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-get-channel-data-method.ts", "../../standardized-audio-context/src/factories/audio-buffer-constructor.ts", "../../standardized-audio-context/src/constants.ts", "../../standardized-audio-context/src/helpers/is-active-audio-node.ts", "../../standardized-audio-context/src/factories/audio-buffer-source-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-buffer-source-node-renderer-factory.ts", "../../standardized-audio-context/src/guards/audio-buffer-source-node.ts", "../../standardized-audio-context/src/guards/biquad-filter-node.ts", "../../standardized-audio-context/src/guards/constant-source-node.ts", "../../standardized-audio-context/src/guards/gain-node.ts", "../../standardized-audio-context/src/guards/oscillator-node.ts", "../../standardized-audio-context/src/guards/stereo-panner-node.ts", "../../standardized-audio-context/src/helpers/get-audio-node-connections.ts", "../../standardized-audio-context/src/helpers/get-audio-param-connections.ts", "../../standardized-audio-context/src/helpers/deactivate-active-audio-node-input-connections.ts", "../../standardized-audio-context/src/helpers/deactivate-audio-graph.ts", "../../standardized-audio-context/src/helpers/is-valid-latency-hint.ts", "../../standardized-audio-context/src/factories/audio-context-constructor.ts", "../../standardized-audio-context/src/factories/audio-destination-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-destination-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/audio-listener-factory.ts", "../../standardized-audio-context/src/guards/audio-node.ts", "../../standardized-audio-context/src/guards/audio-node-output-connection.ts", "../../standardized-audio-context/src/helpers/insert-element-in-set.ts", "../../standardized-audio-context/src/helpers/add-active-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/add-passive-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/guards/native-audio-node-faker.ts", "../../standardized-audio-context/src/helpers/connect-native-audio-node-to-native-audio-node.ts", "../../standardized-audio-context/src/helpers/delete-active-input-connection.ts", "../../standardized-audio-context/src/helpers/delete-active-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/delete-event-listeners-of-audio-node.ts", "../../standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/disconnect-native-audio-node-from-native-audio-node.ts", "../../standardized-audio-context/src/helpers/get-native-audio-node.ts", "../../standardized-audio-context/src/helpers/get-native-audio-param.ts", "../../standardized-audio-context/src/helpers/is-part-of-a-cycle.ts", "../../standardized-audio-context/src/helpers/is-passive-audio-node.ts", "../../standardized-audio-context/src/helpers/test-audio-node-disconnect-method-support.ts", "../../standardized-audio-context/src/helpers/visit-each-audio-node-once.ts", "../../standardized-audio-context/src/guards/native-audio-node.ts", "../../standardized-audio-context/src/helpers/wrap-audio-node-disconnect-method.ts", "../../standardized-audio-context/src/factories/audio-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-param-factory.ts", "../../standardized-audio-context/src/factories/audio-param-renderer.ts", "../../standardized-audio-context/src/read-only-map.ts", "../../standardized-audio-context/src/factories/audio-worklet-node-constructor.ts", "../../standardized-audio-context/src/helpers/copy-from-channel.ts", "../../standardized-audio-context/src/helpers/copy-to-channel.ts", "../../standardized-audio-context/src/helpers/create-nested-arrays.ts", "../../standardized-audio-context/src/helpers/get-audio-worklet-processor.ts", "../../standardized-audio-context/src/factories/audio-worklet-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/base-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/biquad-filter-node-constructor.ts", "../../standardized-audio-context/src/factories/biquad-filter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/cache-test-result.ts", "../../standardized-audio-context/src/factories/channel-merger-node-constructor.ts", "../../standardized-audio-context/src/factories/channel-merger-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/channel-splitter-node-constructor.ts", "../../standardized-audio-context/src/factories/channel-splitter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/connect-audio-param.ts", "../../standardized-audio-context/src/factories/connect-multiple-outputs.ts", "../../standardized-audio-context/src/factories/connected-native-audio-buffer-source-node-factory.ts", "../../standardized-audio-context/src/factories/constant-source-node-constructor.ts", "../../standardized-audio-context/src/factories/constant-source-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/convert-number-to-unsigned-long.ts", "../../standardized-audio-context/src/factories/convolver-node-constructor.ts", "../../standardized-audio-context/src/factories/convolver-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/create-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/data-clone-error.ts", "../../standardized-audio-context/src/helpers/detach-array-buffer.ts", "../../standardized-audio-context/src/factories/decode-audio-data.ts", "../../standardized-audio-context/src/factories/decrement-cycle-counter.ts", "../../standardized-audio-context/src/factories/delay-node-constructor.ts", "../../standardized-audio-context/src/factories/delay-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/delete-active-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/delete-unrendered-audio-worklet-node.ts", "../../standardized-audio-context/src/guards/delay-node.ts", "../../standardized-audio-context/src/factories/detect-cycles.ts", "../../standardized-audio-context/src/factories/disconnect-multiple-outputs.ts", "../../standardized-audio-context/src/factories/dynamics-compressor-node-constructor.ts", "../../standardized-audio-context/src/factories/dynamics-compressor-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/encoding-error.ts", "../../standardized-audio-context/src/factories/evaluate-source.ts", "../../standardized-audio-context/src/factories/event-target-constructor.ts", "../../standardized-audio-context/src/factories/expose-current-frame-and-current-time.ts", "../../standardized-audio-context/src/factories/fetch-source.ts", "../../standardized-audio-context/src/factories/gain-node-constructor.ts", "../../standardized-audio-context/src/factories/gain-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/get-active-audio-worklet-node-inputs.ts", "../../standardized-audio-context/src/factories/get-audio-node-renderer.ts", "../../standardized-audio-context/src/factories/get-audio-node-tail-time.ts", "../../standardized-audio-context/src/factories/get-audio-param-renderer.ts", "../../standardized-audio-context/src/factories/get-backup-offline-audio-context.ts", "../../standardized-audio-context/src/factories/invalid-state-error.ts", "../../standardized-audio-context/src/factories/get-native-context.ts", "../../standardized-audio-context/src/factories/get-or-create-backup-offline-audio-context.ts", "../../standardized-audio-context/src/factories/get-unrendered-audio-worklet-nodes.ts", "../../standardized-audio-context/src/factories/invalid-access-error.ts", "../../standardized-audio-context/src/helpers/wrap-iir-filter-node-get-frequency-response-method.ts", "../../standardized-audio-context/src/factories/iir-filter-node-constructor.ts", "../../standardized-audio-context/src/helpers/filter-buffer.ts", "../../standardized-audio-context/src/factories/iir-filter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/increment-cycle-counter-factory.ts", "../../standardized-audio-context/src/factories/is-any-audio-context.ts", "../../standardized-audio-context/src/factories/is-any-audio-node.ts", "../../standardized-audio-context/src/factories/is-any-audio-param.ts", "../../standardized-audio-context/src/factories/is-any-offline-audio-context.ts", "../../standardized-audio-context/src/factories/is-native-audio-context.ts", "../../standardized-audio-context/src/factories/is-native-audio-node.ts", "../../standardized-audio-context/src/factories/is-native-audio-param.ts", "../../standardized-audio-context/src/factories/is-native-context.ts", "../../standardized-audio-context/src/factories/is-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/is-secure-context.ts", "../../standardized-audio-context/src/factories/is-supported-promise.ts", "../../standardized-audio-context/src/factories/media-element-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-audio-destination-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-track-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/minimal-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/minimal-base-audio-context-constructor.ts", "../../standardized-audio-context/src/helpers/test-promise-support.ts", "../../standardized-audio-context/src/factories/minimal-offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/monitor-connections.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-option.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-options.ts", "../../standardized-audio-context/src/helpers/test-analyser-node-get-float-time-domain-data-method-support.ts", "../../standardized-audio-context/src/helpers/wrap-analyser-node-get-float-time-domain-data-method.ts", "../../standardized-audio-context/src/factories/native-analyser-node-factory.ts", "../../standardized-audio-context/src/factories/native-audio-buffer-constructor.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-audio-param-value.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters.ts", "../../standardized-audio-context/src/factories/native-audio-buffer-source-node-factory.ts", "../../standardized-audio-context/src/factories/native-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/native-audio-destination-node.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-constructor.ts", "../../standardized-audio-context/src/helpers/test-clonability-of-audio-worklet-node-options.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-factory.ts", "../../standardized-audio-context/src/helpers/compute-buffer-size.ts", "../../standardized-audio-context/src/helpers/clone-audio-worklet-node-options.ts", "../../standardized-audio-context/src/helpers/create-audio-worklet-processor-promise.ts", "../../standardized-audio-context/src/helpers/create-audio-worklet-processor.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-biquad-filter-node.ts", "../../standardized-audio-context/src/factories/native-channel-merger-node-factory.ts", "../../standardized-audio-context/src/helpers/wrap-channel-splitter-node.ts", "../../standardized-audio-context/src/factories/native-channel-splitter-node.ts", "../../standardized-audio-context/src/factories/native-constant-source-node-factory.ts", "../../standardized-audio-context/src/helpers/intercept-connections.ts", "../../standardized-audio-context/src/factories/native-constant-source-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-convolver-node-factory.ts", "../../standardized-audio-context/src/factories/native-delay-node.ts", "../../standardized-audio-context/src/factories/native-dynamics-compressor-node-factory.ts", "../../standardized-audio-context/src/factories/native-gain-node.ts", "../../standardized-audio-context/src/factories/native-iir-filter-node-factory.ts", "../../standardized-audio-context/src/factories/native-iir-filter-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-media-element-audio-source-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-audio-destination-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-audio-source-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-track-audio-source-node-factory.ts", "../../standardized-audio-context/src/factories/native-offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/native-oscillator-node-factory.ts", "../../standardized-audio-context/src/factories/native-panner-node-factory.ts", "../../standardized-audio-context/src/factories/native-panner-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-periodic-wave-factory.ts", "../../standardized-audio-context/src/factories/native-script-processor-node.ts", "../../standardized-audio-context/src/factories/native-stereo-panner-node-factory.ts", "../../standardized-audio-context/src/factories/native-stereo-panner-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-wave-shaper-node-factory.ts", "../../standardized-audio-context/src/factories/native-wave-shaper-node-faker-factory.ts", "../../standardized-audio-context/src/factories/not-supported-error.ts", "../../standardized-audio-context/src/factories/offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/oscillator-node-constructor.ts", "../../standardized-audio-context/src/factories/oscillator-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/panner-node-constructor.ts", "../../standardized-audio-context/src/factories/panner-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/periodic-wave-constructor.ts", "../../standardized-audio-context/src/factories/render-automation.ts", "../../standardized-audio-context/src/factories/render-inputs-of-audio-node.ts", "../../standardized-audio-context/src/factories/render-inputs-of-audio-param.ts", "../../standardized-audio-context/src/factories/render-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/set-active-audio-worklet-node-inputs.ts", "../../standardized-audio-context/src/factories/set-audio-node-tail-time.ts", "../../standardized-audio-context/src/factories/start-rendering.ts", "../../standardized-audio-context/src/factories/stereo-panner-node-constructor.ts", "../../standardized-audio-context/src/factories/stereo-panner-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/test-audio-buffer-constructor-support.ts", "../../standardized-audio-context/src/factories/test-audio-buffer-copy-channel-methods-subarray-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-close-method-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-decode-audio-data-method-type-error-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-options-support.ts", "../../standardized-audio-context/src/factories/test-audio-node-connect-method-support.ts", "../../standardized-audio-context/src/factories/test-audio-worklet-processor-no-outputs-support.ts", "../../standardized-audio-context/src/factories/test-audio-worklet-processor-post-message-support.ts", "../../standardized-audio-context/src/factories/test-channel-merger-node-channel-count-support.ts", "../../standardized-audio-context/src/factories/test-constant-source-node-accurate-scheduling-support.ts", "../../standardized-audio-context/src/factories/test-convolver-node-buffer-reassignability-support.ts", "../../standardized-audio-context/src/factories/test-convolver-node-channel-count-support.ts", "../../standardized-audio-context/src/factories/test-is-secure-context-support.ts", "../../standardized-audio-context/src/factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support.ts", "../../standardized-audio-context/src/factories/test-offline-audio-context-current-time-support.ts", "../../standardized-audio-context/src/factories/test-stereo-panner-node-default-value-support.ts", "../../standardized-audio-context/src/factories/unknown-error.ts", "../../standardized-audio-context/src/factories/wave-shaper-node-constructor.ts", "../../standardized-audio-context/src/factories/wave-shaper-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/window.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer.ts", "../../standardized-audio-context/src/factories/wrap-channel-merger-node.ts", "../../standardized-audio-context/src/helpers/get-first-sample.ts", "../../standardized-audio-context/src/helpers/is-dc-curve.ts", "../../standardized-audio-context/src/helpers/overwrite-accessors.ts", "../../standardized-audio-context/src/helpers/sanitize-audio-worklet-node-options.ts", "../../standardized-audio-context/src/helpers/sanitize-channel-splitter-options.ts", "../../standardized-audio-context/src/helpers/sanitize-periodic-wave-options.ts", "../../standardized-audio-context/src/helpers/set-value-at-time-until-possible.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-offset-clamping-support.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support.ts", "../../standardized-audio-context/src/helpers/test-audio-worklet-node-options-clonability.ts", "../../standardized-audio-context/src/helpers/test-dom-exception-constructor-support.ts", "../../standardized-audio-context/src/helpers/test-transferables-support.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-offset-clamping.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls.ts", "../../standardized-audio-context/src/helpers/wrap-event-listener.ts", "../../standardized-audio-context/build/es2019/interfaces/analyser-node.js", "../../standardized-audio-context/build/es2019/interfaces/analyser-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/audio-context-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-destination-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-listener.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param-descriptor.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-scheduled-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-scheduled-source-node-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-processor.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-processor-constructor.js", "../../standardized-audio-context/build/es2019/interfaces/automation.js", "../../standardized-audio-context/build/es2019/interfaces/base-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/biquad-filter-node.js", "../../standardized-audio-context/build/es2019/interfaces/biquad-filter-options.js", "../../standardized-audio-context/build/es2019/interfaces/channel-merger-options.js", "../../standardized-audio-context/build/es2019/interfaces/channel-splitter-options.js", "../../standardized-audio-context/build/es2019/interfaces/common-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/common-offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/convolver-node.js", "../../standardized-audio-context/build/es2019/interfaces/convolver-options.js", "../../standardized-audio-context/build/es2019/interfaces/delay-node.js", "../../standardized-audio-context/build/es2019/interfaces/delay-options.js", "../../standardized-audio-context/build/es2019/interfaces/dynamics-compressor-node.js", "../../standardized-audio-context/build/es2019/interfaces/dynamics-compressor-options.js", "../../standardized-audio-context/build/es2019/interfaces/event-target.js", "../../standardized-audio-context/build/es2019/interfaces/gain-node.js", "../../standardized-audio-context/build/es2019/interfaces/gain-options.js", "../../standardized-audio-context/build/es2019/interfaces/iir-filter-node.js", "../../standardized-audio-context/build/es2019/interfaces/iir-filter-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-element-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-element-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-destination-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-track-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-track-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-base-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-base-audio-context-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/native-audio-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-audio-worklet-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-constant-source-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-convolver-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-iir-filter-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-panner-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-stereo-panner-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-wave-shaper-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-completion-event.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context-options.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-node.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-options.js", "../../standardized-audio-context/build/es2019/interfaces/panner-node.js", "../../standardized-audio-context/build/es2019/interfaces/panner-options.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave-constraints.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave-options.js", "../../standardized-audio-context/build/es2019/interfaces/read-only-map.js", "../../standardized-audio-context/build/es2019/interfaces/stereo-panner-node.js", "../../standardized-audio-context/build/es2019/interfaces/stereo-panner-options.js", "../../standardized-audio-context/build/es2019/interfaces/wave-shaper-node.js", "../../standardized-audio-context/build/es2019/interfaces/wave-shaper-options.js", "../../standardized-audio-context/src/interfaces/worklet-options.ts", "../../standardized-audio-context/src/interfaces/index.ts", "../../standardized-audio-context/build/es2019/types/abort-error-factory.js", "../../standardized-audio-context/build/es2019/types/active-audio-worklet-node-inputs-store.js", "../../standardized-audio-context/build/es2019/types/active-input-connection.js", "../../standardized-audio-context/build/es2019/types/add-active-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-active-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-node-connections-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-node-connections-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-param-connections-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-param-connections-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-worklet-module-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-worklet-module-function.js", "../../standardized-audio-context/build/es2019/types/add-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-passive-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-passive-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-silent-connection-factory.js", "../../standardized-audio-context/build/es2019/types/add-silent-connection-function.js", "../../standardized-audio-context/build/es2019/types/add-unrendered-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-unrendered-audio-worklet-node-function.js", "../../standardized-audio-context/build/es2019/types/analyser-node-constructor.js", "../../standardized-audio-context/build/es2019/types/analyser-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/analyser-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/analyser-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/any-audio-buffer.js", "../../standardized-audio-context/build/es2019/types/any-context.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-store.js", "../../standardized-audio-context/build/es2019/types/audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-context-latency-category.js", "../../standardized-audio-context/build/es2019/types/audio-context-state.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-listener-factory.js", "../../standardized-audio-context/build/es2019/types/audio-listener-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-node-connections.js", "../../standardized-audio-context/build/es2019/types/audio-node-connections-store.js", "../../standardized-audio-context/build/es2019/types/audio-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-node-output-connection.js", "../../standardized-audio-context/build/es2019/types/audio-node-renderer.js", "../../standardized-audio-context/build/es2019/types/audio-node-store.js", "../../standardized-audio-context/build/es2019/types/audio-node-tail-time-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-audio-node-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-connections.js", "../../standardized-audio-context/build/es2019/types/audio-param-connections-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-map.js", "../../standardized-audio-context/build/es2019/types/audio-param-output-connection.js", "../../standardized-audio-context/build/es2019/types/audio-param-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-store.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/backup-offline-audio-context-store.js", "../../standardized-audio-context/build/es2019/types/base-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/base-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-type.js", "../../standardized-audio-context/build/es2019/types/channel-count-mode.js", "../../standardized-audio-context/build/es2019/types/channel-interpretation.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-constructor.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/cache-test-result-factory.js", "../../standardized-audio-context/build/es2019/types/cache-test-result-function.js", "../../standardized-audio-context/build/es2019/types/connect-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/connect-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/connect-multiple-outputs-factory.js", "../../standardized-audio-context/build/es2019/types/connect-multiple-outputs-function.js", "../../standardized-audio-context/build/es2019/types/connect-native-audio-node-to-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/connected-native-audio-buffer-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/connected-native-audio-buffer-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/constructor.js", "../../standardized-audio-context/build/es2019/types/context.js", "../../standardized-audio-context/build/es2019/types/context-store.js", "../../standardized-audio-context/build/es2019/types/convert-number-to-unsigned-long-factory.js", "../../standardized-audio-context/build/es2019/types/convert-number-to-unsigned-long-function.js", "../../standardized-audio-context/build/es2019/types/convolver-node-constructor.js", "../../standardized-audio-context/build/es2019/types/convolver-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/convolver-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/convolver-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/create-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/create-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/cycle-counters.js", "../../standardized-audio-context/build/es2019/types/data-clone-error-factory.js", "../../standardized-audio-context/build/es2019/types/decode-audio-data-factory.js", "../../standardized-audio-context/build/es2019/types/decode-audio-data-function.js", "../../standardized-audio-context/build/es2019/types/decode-error-callback.js", "../../standardized-audio-context/build/es2019/types/decode-success-callback.js", "../../standardized-audio-context/build/es2019/types/decrement-cycle-counter-factory.js", "../../standardized-audio-context/build/es2019/types/decrement-cycle-counter-function.js", "../../standardized-audio-context/build/es2019/types/delay-node-constructor.js", "../../standardized-audio-context/build/es2019/types/delay-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/delay-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/delay-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/delete-active-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/delete-active-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/delete-unrendered-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/delete-unrendered-audio-worklet-node-function.js", "../../standardized-audio-context/build/es2019/types/detect-cycles-factory.js", "../../standardized-audio-context/build/es2019/types/detect-cycles-function.js", "../../standardized-audio-context/build/es2019/types/disconnect-multiple-outputs-factory.js", "../../standardized-audio-context/build/es2019/types/disconnect-multiple-outputs-function.js", "../../standardized-audio-context/build/es2019/types/disconnect-native-audio-node-from-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/distance-model-type.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-constructor.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/encoding-error-factory.js", "../../standardized-audio-context/build/es2019/types/error-event-handler.js", "../../standardized-audio-context/build/es2019/types/evaluate-audio-worklet-global-scope-function.js", "../../standardized-audio-context/build/es2019/types/evaluate-source-factory.js", "../../standardized-audio-context/build/es2019/types/evaluate-source-function.js", "../../standardized-audio-context/build/es2019/types/event-handler.js", "../../standardized-audio-context/build/es2019/types/event-target-constructor.js", "../../standardized-audio-context/build/es2019/types/event-target-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/expose-current-frame-and-current-time-factory.js", "../../standardized-audio-context/build/es2019/types/expose-current-frame-and-current-time-function.js", "../../standardized-audio-context/build/es2019/types/fetch-source-factory.js", "../../standardized-audio-context/build/es2019/types/fetch-source-function.js", "../../standardized-audio-context/build/es2019/types/gain-node-constructor.js", "../../standardized-audio-context/build/es2019/types/gain-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/gain-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/gain-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/get-active-audio-worklet-node-inputs-factory.js", "../../standardized-audio-context/build/es2019/types/get-active-audio-worklet-node-inputs-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-connections-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-renderer-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-tail-time-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-tail-time-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-connections-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-renderer-function.js", "../../standardized-audio-context/build/es2019/types/get-backup-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-backup-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/get-event-listeners-of-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/get-first-sample-function.js", "../../standardized-audio-context/build/es2019/types/get-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/get-native-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/get-native-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-native-context-function.js", "../../standardized-audio-context/build/es2019/types/get-or-create-backup-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-or-create-backup-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/get-unrendered-audio-worklet-nodes-factory.js", "../../standardized-audio-context/build/es2019/types/get-unrendered-audio-worklet-nodes-function.js", "../../standardized-audio-context/build/es2019/types/get-value-for-key-function.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-factory-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-function.js", "../../standardized-audio-context/build/es2019/types/index-size-error-factory.js", "../../standardized-audio-context/build/es2019/types/insert-element-in-set-function.js", "../../standardized-audio-context/build/es2019/types/internal-state-event-listener.js", "../../standardized-audio-context/build/es2019/types/invalid-access-error-factory.js", "../../standardized-audio-context/build/es2019/types/invalid-state-error-factory.js", "../../standardized-audio-context/build/es2019/types/is-active-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/is-any-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-dc-curve-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/is-native-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-context-function.js", "../../standardized-audio-context/build/es2019/types/is-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-part-of-a-cycle-function.js", "../../standardized-audio-context/build/es2019/types/is-passive-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-secure-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-supported-promise-factory.js", "../../standardized-audio-context/build/es2019/types/media-element-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-element-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-destination-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-destination-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-track-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-track-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-base-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-base-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/monitor-connections-factory.js", "../../standardized-audio-context/build/es2019/types/monitor-connections-function.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-context.js", "../../standardized-audio-context/build/es2019/types/native-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-listener.js", "../../standardized-audio-context/build/es2019/types/native-audio-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-param.js", "../../standardized-audio-context/build/es2019/types/native-audio-param-map.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-options.js", "../../standardized-audio-context/build/es2019/types/native-biquad-filter-node.js", "../../standardized-audio-context/build/es2019/types/native-biquad-filter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-splitter-node.js", "../../standardized-audio-context/build/es2019/types/native-channel-splitter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-context.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-delay-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-delay-node.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-event-target.js", "../../standardized-audio-context/build/es2019/types/native-gain-node.js", "../../standardized-audio-context/build/es2019/types/native-gain-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-element-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-element-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-destination-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-destination-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave-factory.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-script-processor-node.js", "../../standardized-audio-context/build/es2019/types/native-script-processor-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/not-supported-error-factory.js", "../../standardized-audio-context/build/es2019/types/offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-constructor.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-type.js", "../../standardized-audio-context/build/es2019/types/output-connection.js", "../../standardized-audio-context/build/es2019/types/over-sample-type.js", "../../standardized-audio-context/build/es2019/types/overwrite-accessors-function.js", "../../standardized-audio-context/build/es2019/types/panner-node-constructor.js", "../../standardized-audio-context/build/es2019/types/panner-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/panner-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/panner-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/panning-model-type.js", "../../standardized-audio-context/build/es2019/types/passive-audio-node-input-connection.js", "../../standardized-audio-context/build/es2019/types/passive-audio-param-input-connection.js", "../../standardized-audio-context/build/es2019/types/periodic-wave-constructor.js", "../../standardized-audio-context/build/es2019/types/periodic-wave-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/pick-element-from-set-function.js", "../../standardized-audio-context/build/es2019/types/render-automation-factory.js", "../../standardized-audio-context/build/es2019/types/render-automation-function.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/render-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/render-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-audio-worklet-node-options-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-channel-splitter-options-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-periodic-wave-options-function.js", "../../standardized-audio-context/build/es2019/types/set-active-audio-worklet-node-inputs-factory.js", "../../standardized-audio-context/build/es2019/types/set-active-audio-worklet-node-inputs-function.js", "../../standardized-audio-context/build/es2019/types/set-audio-node-tail-time-factory.js", "../../standardized-audio-context/build/es2019/types/set-audio-node-tail-time-function.js", "../../standardized-audio-context/build/es2019/types/set-value-at-time-until-possible-function.js", "../../standardized-audio-context/build/es2019/types/start-rendering-factory.js", "../../standardized-audio-context/build/es2019/types/start-rendering-function.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-constructor.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-buffer-copy-channel-methods-subarray-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-buffer-constructor-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-close-method-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-decode-audio-data-method-type-error-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-options-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-node-connect-method-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-node-options-clonability-function.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-processor-no-outputs-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-processor-post-message-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-channel-merger-node-channel-count-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-constant-source-node-accurate-scheduling-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-convolver-node-buffer-reassignability-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-convolver-node-channel-count-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-is-secure-context-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-media-stream-audio-source-node-media-stream-without-audio-track-support.js", "../../standardized-audio-context/build/es2019/types/test-offline-audio-context-current-time-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-stereo-panner-node-default-value-support-factory.js", "../../standardized-audio-context/build/es2019/types/unknown-error-factory.js", "../../standardized-audio-context/build/es2019/types/unrendered-audio-worklet-node-store.js", "../../standardized-audio-context/build/es2019/types/unrendered-audio-worklet-nodes.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-constructor.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/window.js", "../../standardized-audio-context/build/es2019/types/window-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-out-of-bounds-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-start-method-offset-clamping-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-stop-method-nullified-buffer-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function.js", "../../standardized-audio-context/build/es2019/types/wrap-channel-merger-node-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-channel-merger-node-function.js", "../../standardized-audio-context/build/es2019/types/wrap-event-listener-function.js", "../../standardized-audio-context/src/types/index.ts", "../../standardized-audio-context/src/module.ts", "../../extendable-media-recorder/src/factories/web-audio-media-recorder.ts", "../../multi-buffer-data-view/src/classes/multi-buffer-data-view.ts", "../../multi-buffer-data-view/src/module.ts", "../../extendable-media-recorder/src/factories/webm-pcm-media-recorder.ts", "../../extendable-media-recorder/src/factories/window.ts", "../../extendable-media-recorder/src/functions/read-variable-size-integer-length.ts", "../../extendable-media-recorder/src/functions/wrap-event-listener.ts", "../../extendable-media-recorder/build/es2019/interfaces/audio-nodes-and-encoder-id.js", "../../extendable-media-recorder/build/es2019/interfaces/blob-event.js", "../../extendable-media-recorder/build/es2019/interfaces/blob-event-init.js", "../../extendable-media-recorder/build/es2019/interfaces/event-target.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-constructor.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-event-map.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-options.js", "../../extendable-media-recorder/src/interfaces/index.ts", "../../extendable-media-recorder/build/es2019/types/blob-event-constructor.js", "../../extendable-media-recorder/build/es2019/types/blob-event-handler.js", "../../extendable-media-recorder/build/es2019/types/blob-event-factory.js", "../../extendable-media-recorder/build/es2019/types/blob-event-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/decode-web-m-chunk-factory.js", "../../extendable-media-recorder/build/es2019/types/decode-web-m-chunk-function.js", "../../extendable-media-recorder/build/es2019/types/element-type.js", "../../extendable-media-recorder/build/es2019/types/error-event-handler.js", "../../extendable-media-recorder/build/es2019/types/event-handler.js", "../../extendable-media-recorder/build/es2019/types/event-target-constructor.js", "../../extendable-media-recorder/build/es2019/types/event-target-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/event-target-factory.js", "../../extendable-media-recorder/build/es2019/types/event-target-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/invalid-modification-error-factory.js", "../../extendable-media-recorder/build/es2019/types/invalid-state-error-factory.js", "../../extendable-media-recorder/build/es2019/types/is-supported-promise-factory.js", "../../extendable-media-recorder/build/es2019/types/media-recorder-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/native-blob-event-factory.js", "../../extendable-media-recorder/build/es2019/types/native-event-target.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/not-supported-error-factory.js", "../../extendable-media-recorder/build/es2019/types/promised-data-view-element-type-encoder-id-and-port.js", "../../extendable-media-recorder/build/es2019/types/read-element-content-factory.js", "../../extendable-media-recorder/build/es2019/types/read-element-content-function.js", "../../extendable-media-recorder/build/es2019/types/read-element-type-factory.js", "../../extendable-media-recorder/build/es2019/types/read-element-type-function.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-factory.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-function.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-length-function.js", "../../extendable-media-recorder/build/es2019/types/recording-state.js", "../../extendable-media-recorder/build/es2019/types/web-audio-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/web-audio-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/webm-pcm-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/webm-pcm-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/window.js", "../../extendable-media-recorder/build/es2019/types/window-factory.js", "../../extendable-media-recorder/build/es2019/types/wrap-event-listener-function.js", "../../extendable-media-recorder/src/types/index.ts", "../../extendable-media-recorder/src/module.ts", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/interfaces/extendable-media-recorder-wav-encoder-broker-definition.js", "../../extendable-media-recorder-wav-encoder-broker/src/interfaces/index.ts", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/extendable-media-recorder-wav-encoder-broker-loader.js", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/extendable-media-recorder-wav-encoder-broker-wrapper.js", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/typed-array.js", "../../extendable-media-recorder-wav-encoder-broker/src/types/index.ts", "../../extendable-media-recorder-wav-encoder-broker/src/module.ts", "../../extendable-media-recorder-wav-encoder/src/worker/worker.ts", "../../extendable-media-recorder-wav-encoder/src/module.ts", "../../react-media-recorder/lib/index.js", "../../react-media-recorder/index.js", "../../src/utils.ts", "../../src/equals.ts", "../../src/comparator.ts", "../../src/index.ts", "../../@tambo-ai/react/src/hooks/use-component-state.tsx", "../../use-debounce/src/useDebouncedCallback.ts", "../../use-debounce/src/useDebounce.ts", "../../use-debounce/src/useThrottledCallback.ts", "../../@tambo-ai/react/src/providers/tambo-interactable-provider.tsx", "../../@tambo-ai/react/src/context-helpers/current-interactables-context-helper.ts", "../../zod/v4/classic/external.js", "../../zod/v4/classic/iso.js", "../../zod/v4/classic/errors.js", "../../zod/v4/classic/parse.js", "../../zod/v4/classic/schemas.js", "../../zod/v4/classic/compat.js", "../../zod/v4/classic/coerce.js", "../../@tambo-ai/react/src/schema/json-schema.ts", "../../@tambo-ai/react/src/schema/standard-schema.ts", "../../@tambo-ai/react/src/schema/schema.ts", "../../@tambo-ai/react/src/schema/validate.ts", "../../@tambo-ai/react/src/util/validate-component-name.ts", "../../@tambo-ai/react/src/providers/tambo-component-provider.tsx", "../../@tambo-ai/typescript-sdk/internal/tslib.mjs", "../../@tambo-ai/typescript-sdk/src/internal/utils/uuid.ts", "../../@tambo-ai/typescript-sdk/src/internal/errors.ts", "../../@tambo-ai/typescript-sdk/src/core/error.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/values.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/sleep.ts", "../../@tambo-ai/typescript-sdk/src/version.ts", "../../@tambo-ai/typescript-sdk/src/internal/detect-platform.ts", "../../@tambo-ai/typescript-sdk/src/internal/shims.ts", "../../@tambo-ai/typescript-sdk/src/internal/request-options.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/bytes.ts", "../../@tambo-ai/typescript-sdk/src/internal/decoders/line.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/log.ts", "../../@tambo-ai/typescript-sdk/src/core/streaming.ts", "../../@tambo-ai/typescript-sdk/src/internal/parse.ts", "../../@tambo-ai/typescript-sdk/src/core/api-promise.ts", "../../@tambo-ai/typescript-sdk/src/core/pagination.ts", "../../@tambo-ai/typescript-sdk/src/internal/uploads.ts", "../../@tambo-ai/typescript-sdk/src/internal/to-file.ts", "../../@tambo-ai/typescript-sdk/src/core/resource.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/audio.ts", "../../@tambo-ai/typescript-sdk/src/internal/headers.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/auth.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/path.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/registry.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/projects/api-key.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/projects/provider-key.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/projects/projects.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/threads/messages.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/threads/suggestions.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/threads/threads.ts", "../../@tambo-ai/typescript-sdk/src/resources/beta/beta.ts", "../../@tambo-ai/typescript-sdk/src/resources/storage.ts", "../../@tambo-ai/typescript-sdk/src/resources/threads/messages.ts", "../../@tambo-ai/typescript-sdk/src/resources/threads/runs.ts", "../../@tambo-ai/typescript-sdk/src/resources/threads/threads.ts", "../../@tambo-ai/typescript-sdk/src/internal/utils/env.ts", "../../@tambo-ai/typescript-sdk/src/client.ts", "../../@tambo-ai/typescript-sdk/src/lib/advance-stream.ts", "../../@tanstack/query-core/src/subscribable.ts", "../../@tanstack/query-core/src/timeoutManager.ts", "../../@tanstack/query-core/src/utils.ts", "../../@tanstack/query-core/src/focusManager.ts", "../../@tanstack/query-core/src/thenable.ts", "../../@tanstack/query-core/src/notifyManager.ts", "../../@tanstack/query-core/src/onlineManager.ts", "../../@tanstack/query-core/src/retryer.ts", "../../@tanstack/query-core/src/removable.ts", "../../@tanstack/query-core/src/query.ts", "../../@tanstack/query-core/src/queryObserver.ts", "../../@tanstack/query-core/src/infiniteQueryBehavior.ts", "../../@tanstack/query-core/src/mutation.ts", "../../@tanstack/query-core/src/mutationCache.ts", "../../@tanstack/query-core/src/mutationObserver.ts", "../../@tanstack/query-core/src/queryCache.ts", "../../@tanstack/query-core/src/queryClient.ts", "../../@tanstack/query-core/src/types.ts", "../../@tanstack/react-query/src/useQueries.ts", "../../@tanstack/react-query/src/QueryClientProvider.tsx", "../../@tanstack/react-query/src/IsRestoringProvider.ts", "../../@tanstack/react-query/src/QueryErrorResetBoundary.tsx", "../../@tanstack/react-query/src/errorBoundaryUtils.ts", "../../@tanstack/react-query/src/suspense.ts", "../../@tanstack/react-query/src/useBaseQuery.ts", "../../@tanstack/react-query/src/useQuery.ts", "../../@tanstack/react-query/src/HydrationBoundary.tsx", "../../@tanstack/react-query/src/useIsFetching.ts", "../../@tanstack/react-query/src/useMutationState.ts", "../../@tanstack/react-query/src/useMutation.ts", "../../@tambo-ai/react/src/providers/tambo-client-provider.tsx", "../../@tambo-ai/react/package.json", "../../@tambo-ai/react/src/providers/hooks/use-tambo-session-token.tsx", "../../@tambo-ai/react/src/providers/tambo-registry-provider.tsx", "../../@tambo-ai/react/src/model/mcp-server-info.ts", "../../@tambo-ai/react/src/util/mcp-server-utils.ts", "../../@tambo-ai/react/src/util/registry-validators.ts", "../../@tambo-ai/react/src/util/resource-validators.ts", "../../@tambo-ai/react/src/providers/tambo-context-helpers-provider.tsx", "../../@tambo-ai/react/src/context-helpers/registry.ts", "../../@tambo-ai/react/src/hooks/use-current-message.tsx", "../../@tambo-ai/react/src/hooks/use-message-images.ts", "../../@tambo-ai/react/src/hooks/use-streaming-props.tsx", "../../@tambo-ai/react/src/hooks/use-suggestions.ts", "../../@tambo-ai/react/src/model/generate-component-response.ts", "../../@tambo-ai/react/src/model/validate-input.ts", "../../@tambo-ai/react/src/providers/tambo-provider.tsx", "../../@tambo-ai/react/src/mcp/tambo-mcp-provider.tsx", "../../@tambo-ai/react/src/mcp/mcp-constants.ts", "../../@tambo-ai/react/src/providers/tambo-mcp-token-provider.tsx", "../../@tambo-ai/react/src/providers/tambo-thread-provider.tsx", "../../@tambo-ai/react/src/util/content-parts.ts", "../../@tambo-ai/react/src/util/generate-component.ts", "../../@tambo-ai/react/src/util/is-promise.ts", "../../@tambo-ai/react/src/util/registry.ts", "../../@tambo-ai/react/src/util/tool-caller.ts", "../../@tambo-ai/react/src/mcp/elicitation.ts", "../../zod/v4/mini/schemas.js", "../../zod/v4/mini/iso.js", "../../zod/v4/mini/coerce.js", "../../@modelcontextprotocol/sdk/src/server/zod-compat.ts", "../../@modelcontextprotocol/sdk/src/types.ts", "../../@modelcontextprotocol/sdk/src/experimental/tasks/interfaces.ts", "../../@modelcontextprotocol/sdk/src/server/zod-json-schema-compat.ts", "../../@modelcontextprotocol/sdk/src/shared/protocol.ts", "../../@modelcontextprotocol/sdk/src/validation/ajv-provider.ts", "../../@modelcontextprotocol/sdk/src/experimental/tasks/client.ts", "../../@modelcontextprotocol/sdk/src/experimental/tasks/helpers.ts", "../../@modelcontextprotocol/sdk/src/client/index.ts", "../../eventsource-parser/src/errors.ts", "../../eventsource-parser/src/parse.ts", "../../eventsource/src/errors.ts", "../../eventsource/src/EventSource.ts", "../../@modelcontextprotocol/sdk/src/shared/transport.ts", "../../pkce-challenge/dist/index.browser.js", "../../@modelcontextprotocol/sdk/src/shared/auth.ts", "../../@modelcontextprotocol/sdk/src/shared/auth-utils.ts", "../../@modelcontextprotocol/sdk/src/server/auth/errors.ts", "../../@modelcontextprotocol/sdk/src/client/auth.ts", "../../@modelcontextprotocol/sdk/src/client/sse.ts", "../../eventsource-parser/src/stream.ts", "../../@modelcontextprotocol/sdk/src/client/streamableHttp.ts", "../../@tambo-ai/react/src/mcp/mcp-client.ts", "../../@tambo-ai/react/src/providers/tambo-context-attachment-provider.tsx", "../../@tambo-ai/react/src/providers/tambo-thread-input-provider.tsx", "../../@tambo-ai/react/src/hooks/react-query-hooks.ts", "../../@tambo-ai/react/src/model/thread-input-error.ts", "../../@tambo-ai/react/src/util/message-builder.ts", "../../@tambo-ai/react/src/util/resource-content-resolver.ts", "../../@tambo-ai/react/src/util/query-utils.ts", "../../@tambo-ai/react/src/hooks/use-tambo-stream-status.tsx", "../../@tambo-ai/react/src/hooks/use-tambo-voice.tsx", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/pending.tsx", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/provider.tsx", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/types.ts", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/streaming.tsx", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/success.tsx", "../../@tambo-ai/react/src/providers/tambo-prop-stream-provider/index.tsx", "../../@tambo-ai/react/src/providers/tambo-stubs.tsx", "../../@tambo-ai/react/src/hoc/with-tambo-interactable.tsx", "../../@tambo-ai/react/src/hooks/use-tambo-threads.ts", "../../@tambo-ai/react/src/context-helpers/current-page-context-helper.ts", "../../@tambo-ai/react/src/context-helpers/current-time-context-helper.ts"],
  "sourcesContent": ["\"use strict\";\n/**\n * Sometimes you don't allow every type to be partially parsed.\n * For example, you may not want a partial number because it may increase its size gradually before it's complete.\n * In this case, you can use the `Allow` object to control what types you allow to be partially parsed.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Allow = exports.ALL = exports.COLLECTION = exports.ATOM = exports.SPECIAL = exports.INF = exports._INFINITY = exports.INFINITY = exports.NAN = exports.BOOL = exports.NULL = exports.OBJ = exports.ARR = exports.NUM = exports.STR = void 0;\n/**\n * allow partial strings like `\"hello \\u12` to be parsed as `\"hello \"`\n */\nexports.STR = 0b000000001;\n/**\n * allow partial numbers like `123.` to be parsed as `123`\n */\nexports.NUM = 0b000000010;\n/**\n * allow partial arrays like `[1, 2,` to be parsed as `[1, 2]`\n */\nexports.ARR = 0b000000100;\n/**\n * allow partial objects like `{\"a\": 1, \"b\":` to be parsed as `{\"a\": 1}`\n */\nexports.OBJ = 0b000001000;\n/**\n * allow `nu` to be parsed as `null`\n */\nexports.NULL = 0b000010000;\n/**\n * allow `tr` to be parsed as `true`, and `fa` to be parsed as `false`\n */\nexports.BOOL = 0b000100000;\n/**\n * allow `Na` to be parsed as `NaN`\n */\nexports.NAN = 0b001000000;\n/**\n * allow `Inf` to be parsed as `Infinity`\n */\nexports.INFINITY = 0b010000000;\n/**\n * allow `-Inf` to be parsed as `-Infinity`\n */\nexports._INFINITY = 0b100000000;\nexports.INF = exports.INFINITY | exports._INFINITY;\nexports.SPECIAL = exports.NULL | exports.BOOL | exports.INF | exports.NAN;\nexports.ATOM = exports.STR | exports.NUM | exports.SPECIAL;\nexports.COLLECTION = exports.ARR | exports.OBJ;\nexports.ALL = exports.ATOM | exports.COLLECTION;\n/**\n * Control what types you allow to be partially parsed.\n * The default is to allow all types to be partially parsed, which in most casees is the best option.\n * @example\n * If you don't want to allow partial objects, you can use the following code:\n * ```ts\n * import { Allow, parse } from \"partial-json\";\n * parse(`[{\"a\": 1, \"b\": 2}, {\"a\": 3,`, Allow.ARR); // [ { a: 1, b: 2 } ]\n * ```\n * Or you can use `~` to disallow a type:\n * ```ts\n * parse(`[{\"a\": 1, \"b\": 2}, {\"a\": 3,`, ~Allow.OBJ); // [ { a: 1, b: 2 } ]\n * ```\n * @example\n * If you don't want to allow partial strings, you can use the following code:\n * ```ts\n * import { Allow, parse } from \"partial-json\";\n * parse(`[\"complete string\", \"incompl`, ~Allow.STR); // [ 'complete string' ]\n * ```\n */\nexports.Allow = { STR: exports.STR, NUM: exports.NUM, ARR: exports.ARR, OBJ: exports.OBJ, NULL: exports.NULL, BOOL: exports.BOOL, NAN: exports.NAN, INFINITY: exports.INFINITY, _INFINITY: exports._INFINITY, INF: exports.INF, SPECIAL: exports.SPECIAL, ATOM: exports.ATOM, COLLECTION: exports.COLLECTION, ALL: exports.ALL };\nexports.default = exports.Allow;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Allow = exports.MalformedJSON = exports.PartialJSON = exports.parseJSON = exports.parse = void 0;\nconst options_1 = require(\"./options\");\nObject.defineProperty(exports, \"Allow\", { enumerable: true, get: function () { return options_1.Allow; } });\n__exportStar(require(\"./options\"), exports);\nclass PartialJSON extends Error {\n}\nexports.PartialJSON = PartialJSON;\nclass MalformedJSON extends Error {\n}\nexports.MalformedJSON = MalformedJSON;\n/**\n * Parse incomplete JSON\n * @param {string} jsonString Partial JSON to be parsed\n * @param {number} allowPartial Specify what types are allowed to be partial, see {@link Allow} for details\n * @returns The parsed JSON\n * @throws {PartialJSON} If the JSON is incomplete (related to the `allow` parameter)\n * @throws {MalformedJSON} If the JSON is malformed\n */\nfunction parseJSON(jsonString, allowPartial = options_1.Allow.ALL) {\n    if (typeof jsonString !== \"string\") {\n        throw new TypeError(`expecting str, got ${typeof jsonString}`);\n    }\n    if (!jsonString.trim()) {\n        throw new Error(`${jsonString} is empty`);\n    }\n    return _parseJSON(jsonString.trim(), allowPartial);\n}\nexports.parseJSON = parseJSON;\n;\nconst _parseJSON = (jsonString, allow) => {\n    const length = jsonString.length;\n    let index = 0;\n    const markPartialJSON = (msg) => {\n        throw new PartialJSON(`${msg} at position ${index}`);\n    };\n    const throwMalformedError = (msg) => {\n        throw new MalformedJSON(`${msg} at position ${index}`);\n    };\n    const parseAny = () => {\n        skipBlank();\n        if (index >= length)\n            markPartialJSON(\"Unexpected end of input\");\n        if (jsonString[index] === '\"')\n            return parseStr();\n        if (jsonString[index] === \"{\")\n            return parseObj();\n        if (jsonString[index] === \"[\")\n            return parseArr();\n        if (jsonString.substring(index, index + 4) === \"null\" || (options_1.Allow.NULL & allow && length - index < 4 && \"null\".startsWith(jsonString.substring(index)))) {\n            index += 4;\n            return null;\n        }\n        if (jsonString.substring(index, index + 4) === \"true\" || (options_1.Allow.BOOL & allow && length - index < 4 && \"true\".startsWith(jsonString.substring(index)))) {\n            index += 4;\n            return true;\n        }\n        if (jsonString.substring(index, index + 5) === \"false\" || (options_1.Allow.BOOL & allow && length - index < 5 && \"false\".startsWith(jsonString.substring(index)))) {\n            index += 5;\n            return false;\n        }\n        if (jsonString.substring(index, index + 8) === \"Infinity\" || (options_1.Allow.INFINITY & allow && length - index < 8 && \"Infinity\".startsWith(jsonString.substring(index)))) {\n            index += 8;\n            return Infinity;\n        }\n        if (jsonString.substring(index, index + 9) === \"-Infinity\" || (options_1.Allow._INFINITY & allow && 1 < length - index && length - index < 9 && \"-Infinity\".startsWith(jsonString.substring(index)))) {\n            index += 9;\n            return -Infinity;\n        }\n        if (jsonString.substring(index, index + 3) === \"NaN\" || (options_1.Allow.NAN & allow && length - index < 3 && \"NaN\".startsWith(jsonString.substring(index)))) {\n            index += 3;\n            return NaN;\n        }\n        return parseNum();\n    };\n    const parseStr = () => {\n        const start = index;\n        let escape = false;\n        index++; // skip initial quote\n        while (index < length && (jsonString[index] !== '\"' || (escape && jsonString[index - 1] === \"\\\\\"))) {\n            escape = jsonString[index] === \"\\\\\" ? !escape : false;\n            index++;\n        }\n        if (jsonString.charAt(index) == '\"') {\n            try {\n                return JSON.parse(jsonString.substring(start, ++index - Number(escape)));\n            }\n            catch (e) {\n                throwMalformedError(String(e));\n            }\n        }\n        else if (options_1.Allow.STR & allow) {\n            try {\n                return JSON.parse(jsonString.substring(start, index - Number(escape)) + '\"');\n            }\n            catch (e) {\n                // SyntaxError: Invalid escape sequence\n                return JSON.parse(jsonString.substring(start, jsonString.lastIndexOf(\"\\\\\")) + '\"');\n            }\n        }\n        markPartialJSON(\"Unterminated string literal\");\n    };\n    const parseObj = () => {\n        index++; // skip initial brace\n        skipBlank();\n        const obj = {};\n        try {\n            while (jsonString[index] !== \"}\") {\n                skipBlank();\n                if (index >= length && options_1.Allow.OBJ & allow)\n                    return obj;\n                const key = parseStr();\n                skipBlank();\n                index++; // skip colon\n                try {\n                    const value = parseAny();\n                    obj[key] = value;\n                }\n                catch (e) {\n                    if (options_1.Allow.OBJ & allow)\n                        return obj;\n                    else\n                        throw e;\n                }\n                skipBlank();\n                if (jsonString[index] === \",\")\n                    index++; // skip comma\n            }\n        }\n        catch (e) {\n            if (options_1.Allow.OBJ & allow)\n                return obj;\n            else\n                markPartialJSON(\"Expected '}' at end of object\");\n        }\n        index++; // skip final brace\n        return obj;\n    };\n    const parseArr = () => {\n        index++; // skip initial bracket\n        const arr = [];\n        try {\n            while (jsonString[index] !== \"]\") {\n                arr.push(parseAny());\n                skipBlank();\n                if (jsonString[index] === \",\") {\n                    index++; // skip comma\n                }\n            }\n        }\n        catch (e) {\n            if (options_1.Allow.ARR & allow) {\n                return arr;\n            }\n            markPartialJSON(\"Expected ']' at end of array\");\n        }\n        index++; // skip final bracket\n        return arr;\n    };\n    const parseNum = () => {\n        if (index === 0) {\n            if (jsonString === \"-\")\n                throwMalformedError(\"Not sure what '-' is\");\n            try {\n                return JSON.parse(jsonString);\n            }\n            catch (e) {\n                if (options_1.Allow.NUM & allow)\n                    try {\n                        return JSON.parse(jsonString.substring(0, jsonString.lastIndexOf(\"e\")));\n                    }\n                    catch (e) { }\n                throwMalformedError(String(e));\n            }\n        }\n        const start = index;\n        if (jsonString[index] === \"-\")\n            index++;\n        while (jsonString[index] && \",]}\".indexOf(jsonString[index]) === -1)\n            index++;\n        if (index == length && !(options_1.Allow.NUM & allow))\n            markPartialJSON(\"Unterminated number literal\");\n        try {\n            return JSON.parse(jsonString.substring(start, index));\n        }\n        catch (e) {\n            if (jsonString.substring(start, index) === \"-\")\n                markPartialJSON(\"Not sure what '-' is\");\n            try {\n                return JSON.parse(jsonString.substring(start, jsonString.lastIndexOf(\"e\")));\n            }\n            catch (e) {\n                throwMalformedError(String(e));\n            }\n        }\n    };\n    const skipBlank = () => {\n        while (index < length && \" \\n\\r\\t\".includes(jsonString[index])) {\n            index++;\n        }\n    };\n    return parseAny();\n};\nconst parse = parseJSON;\nexports.parse = parse;\n", "// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport abstract class _CodeOrName {\n  abstract readonly str: string\n  abstract readonly names: UsedNames\n  abstract toString(): string\n  abstract emptyStr(): boolean\n}\n\nexport const IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i\n\nexport class Name extends _CodeOrName {\n  readonly str: string\n  constructor(s: string) {\n    super()\n    if (!IDENTIFIER.test(s)) throw new Error(\"CodeGen: name must be a valid identifier\")\n    this.str = s\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    return false\n  }\n\n  get names(): UsedNames {\n    return {[this.str]: 1}\n  }\n}\n\nexport class _Code extends _CodeOrName {\n  readonly _items: readonly CodeItem[]\n  private _str?: string\n  private _names?: UsedNames\n\n  constructor(code: string | readonly CodeItem[]) {\n    super()\n    this._items = typeof code === \"string\" ? [code] : code\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    if (this._items.length > 1) return false\n    const item = this._items[0]\n    return item === \"\" || item === '\"\"'\n  }\n\n  get str(): string {\n    return (this._str ??= this._items.reduce((s: string, c: CodeItem) => `${s}${c}`, \"\"))\n  }\n\n  get names(): UsedNames {\n    return (this._names ??= this._items.reduce((names: UsedNames, c) => {\n      if (c instanceof Name) names[c.str] = (names[c.str] || 0) + 1\n      return names\n    }, {}))\n  }\n}\n\nexport type CodeItem = Name | string | number | boolean | null\n\nexport type UsedNames = Record<string, number | undefined>\n\nexport type Code = _Code | Name\n\nexport type SafeExpr = Code | number | boolean | null\n\nexport const nil = new _Code(\"\")\n\ntype CodeArg = SafeExpr | string | undefined\n\nexport function _(strs: TemplateStringsArray, ...args: CodeArg[]): _Code {\n  const code: CodeItem[] = [strs[0]]\n  let i = 0\n  while (i < args.length) {\n    addCodeArg(code, args[i])\n    code.push(strs[++i])\n  }\n  return new _Code(code)\n}\n\nconst plus = new _Code(\"+\")\n\nexport function str(strs: TemplateStringsArray, ...args: (CodeArg | string[])[]): _Code {\n  const expr: CodeItem[] = [safeStringify(strs[0])]\n  let i = 0\n  while (i < args.length) {\n    expr.push(plus)\n    addCodeArg(expr, args[i])\n    expr.push(plus, safeStringify(strs[++i]))\n  }\n  optimize(expr)\n  return new _Code(expr)\n}\n\nexport function addCodeArg(code: CodeItem[], arg: CodeArg | string[]): void {\n  if (arg instanceof _Code) code.push(...arg._items)\n  else if (arg instanceof Name) code.push(arg)\n  else code.push(interpolate(arg))\n}\n\nfunction optimize(expr: CodeItem[]): void {\n  let i = 1\n  while (i < expr.length - 1) {\n    if (expr[i] === plus) {\n      const res = mergeExprItems(expr[i - 1], expr[i + 1])\n      if (res !== undefined) {\n        expr.splice(i - 1, 3, res)\n        continue\n      }\n      expr[i++] = \"+\"\n    }\n    i++\n  }\n}\n\nfunction mergeExprItems(a: CodeItem, b: CodeItem): CodeItem | undefined {\n  if (b === '\"\"') return a\n  if (a === '\"\"') return b\n  if (typeof a == \"string\") {\n    if (b instanceof Name || a[a.length - 1] !== '\"') return\n    if (typeof b != \"string\") return `${a.slice(0, -1)}${b}\"`\n    if (b[0] === '\"') return a.slice(0, -1) + b.slice(1)\n    return\n  }\n  if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name)) return `\"${a}${b.slice(1)}`\n  return\n}\n\nexport function strConcat(c1: Code, c2: Code): Code {\n  return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str`${c1}${c2}`\n}\n\n// TODO do not allow arrays here\nfunction interpolate(x?: string | string[] | number | boolean | null): SafeExpr | string {\n  return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n    ? x\n    : safeStringify(Array.isArray(x) ? x.join(\",\") : x)\n}\n\nexport function stringify(x: unknown): Code {\n  return new _Code(safeStringify(x))\n}\n\nexport function safeStringify(x: unknown): string {\n  return JSON.stringify(x)\n    .replace(/\\u2028/g, \"\\\\u2028\")\n    .replace(/\\u2029/g, \"\\\\u2029\")\n}\n\nexport function getProperty(key: Code | string | number): Code {\n  return typeof key == \"string\" && IDENTIFIER.test(key) ? new _Code(`.${key}`) : _`[${key}]`\n}\n\n//Does best effort to format the name properly\nexport function getEsmExportName(key: Code | string | number): Code {\n  if (typeof key == \"string\" && IDENTIFIER.test(key)) {\n    return new _Code(`${key}`)\n  }\n  throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`)\n}\n\nexport function regexpCode(rx: RegExp): Code {\n  return new _Code(rx.toString())\n}\n", "import {_, nil, Code, Name} from \"./code\"\n\ninterface NameGroup {\n  prefix: string\n  index: number\n}\n\nexport interface NameValue {\n  ref: ValueReference // this is the reference to any value that can be referred to from generated code via `globals` var in the closure\n  key?: unknown // any key to identify a global to avoid duplicates, if not passed ref is used\n  code?: Code // this is the code creating the value needed for standalone code wit_out closure - can be a primitive value, function or import (`require`)\n}\n\nexport type ValueReference = unknown // possibly make CodeGen parameterized type on this type\n\nclass ValueError extends Error {\n  readonly value?: NameValue\n  constructor(name: ValueScopeName) {\n    super(`CodeGen: \"code\" for ${name} not defined`)\n    this.value = name.value\n  }\n}\n\ninterface ScopeOptions {\n  prefixes?: Set<string>\n  parent?: Scope\n}\n\ninterface ValueScopeOptions extends ScopeOptions {\n  scope: ScopeStore\n  es5?: boolean\n  lines?: boolean\n}\n\nexport type ScopeStore = Record<string, ValueReference[] | undefined>\n\ntype ScopeValues = {\n  [Prefix in string]?: Map<unknown, ValueScopeName>\n}\n\nexport type ScopeValueSets = {\n  [Prefix in string]?: Set<ValueScopeName>\n}\n\nexport enum UsedValueState {\n  Started,\n  Completed,\n}\n\nexport type UsedScopeValues = {\n  [Prefix in string]?: Map<ValueScopeName, UsedValueState | undefined>\n}\n\nexport const varKinds = {\n  const: new Name(\"const\"),\n  let: new Name(\"let\"),\n  var: new Name(\"var\"),\n}\n\nexport class Scope {\n  protected readonly _names: {[Prefix in string]?: NameGroup} = {}\n  protected readonly _prefixes?: Set<string>\n  protected readonly _parent?: Scope\n\n  constructor({prefixes, parent}: ScopeOptions = {}) {\n    this._prefixes = prefixes\n    this._parent = parent\n  }\n\n  toName(nameOrPrefix: Name | string): Name {\n    return nameOrPrefix instanceof Name ? nameOrPrefix : this.name(nameOrPrefix)\n  }\n\n  name(prefix: string): Name {\n    return new Name(this._newName(prefix))\n  }\n\n  protected _newName(prefix: string): string {\n    const ng = this._names[prefix] || this._nameGroup(prefix)\n    return `${prefix}${ng.index++}`\n  }\n\n  private _nameGroup(prefix: string): NameGroup {\n    if (this._parent?._prefixes?.has(prefix) || (this._prefixes && !this._prefixes.has(prefix))) {\n      throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`)\n    }\n    return (this._names[prefix] = {prefix, index: 0})\n  }\n}\n\ninterface ScopePath {\n  property: string\n  itemIndex: number\n}\n\nexport class ValueScopeName extends Name {\n  readonly prefix: string\n  value?: NameValue\n  scopePath?: Code\n\n  constructor(prefix: string, nameStr: string) {\n    super(nameStr)\n    this.prefix = prefix\n  }\n\n  setValue(value: NameValue, {property, itemIndex}: ScopePath): void {\n    this.value = value\n    this.scopePath = _`.${new Name(property)}[${itemIndex}]`\n  }\n}\n\ninterface VSOptions extends ValueScopeOptions {\n  _n: Code\n}\n\nconst line = _`\\n`\n\nexport class ValueScope extends Scope {\n  protected readonly _values: ScopeValues = {}\n  protected readonly _scope: ScopeStore\n  readonly opts: VSOptions\n\n  constructor(opts: ValueScopeOptions) {\n    super(opts)\n    this._scope = opts.scope\n    this.opts = {...opts, _n: opts.lines ? line : nil}\n  }\n\n  get(): ScopeStore {\n    return this._scope\n  }\n\n  name(prefix: string): ValueScopeName {\n    return new ValueScopeName(prefix, this._newName(prefix))\n  }\n\n  value(nameOrPrefix: ValueScopeName | string, value: NameValue): ValueScopeName {\n    if (value.ref === undefined) throw new Error(\"CodeGen: ref must be passed in value\")\n    const name = this.toName(nameOrPrefix) as ValueScopeName\n    const {prefix} = name\n    const valueKey = value.key ?? value.ref\n    let vs = this._values[prefix]\n    if (vs) {\n      const _name = vs.get(valueKey)\n      if (_name) return _name\n    } else {\n      vs = this._values[prefix] = new Map()\n    }\n    vs.set(valueKey, name)\n\n    const s = this._scope[prefix] || (this._scope[prefix] = [])\n    const itemIndex = s.length\n    s[itemIndex] = value.ref\n    name.setValue(value, {property: prefix, itemIndex})\n    return name\n  }\n\n  getValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    const vs = this._values[prefix]\n    if (!vs) return\n    return vs.get(keyOrRef)\n  }\n\n  scopeRefs(scopeName: Name, values: ScopeValues | ScopeValueSets = this._values): Code {\n    return this._reduceValues(values, (name: ValueScopeName) => {\n      if (name.scopePath === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n      return _`${scopeName}${name.scopePath}`\n    })\n  }\n\n  scopeCode(\n    values: ScopeValues | ScopeValueSets = this._values,\n    usedValues?: UsedScopeValues,\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    return this._reduceValues(\n      values,\n      (name: ValueScopeName) => {\n        if (name.value === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n        return name.value.code\n      },\n      usedValues,\n      getCode\n    )\n  }\n\n  private _reduceValues(\n    values: ScopeValues | ScopeValueSets,\n    valueCode: (n: ValueScopeName) => Code | undefined,\n    usedValues: UsedScopeValues = {},\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    let code: Code = nil\n    for (const prefix in values) {\n      const vs = values[prefix]\n      if (!vs) continue\n      const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map())\n      vs.forEach((name: ValueScopeName) => {\n        if (nameSet.has(name)) return\n        nameSet.set(name, UsedValueState.Started)\n        let c = valueCode(name)\n        if (c) {\n          const def = this.opts.es5 ? varKinds.var : varKinds.const\n          code = _`${code}${def} ${name} = ${c};${this.opts._n}`\n        } else if ((c = getCode?.(name))) {\n          code = _`${code}${c}${this.opts._n}`\n        } else {\n          throw new ValueError(name)\n        }\n        nameSet.set(name, UsedValueState.Completed)\n      })\n    }\n    return code\n  }\n}\n", "import type {ScopeValueSets, NameValue, ValueScope, ValueScopeName} from \"./scope\"\nimport {_, nil, _Code, Code, Name, UsedNames, CodeItem, addCodeArg, _CodeOrName} from \"./code\"\nimport {Scope, varKinds} from \"./scope\"\n\nexport {_, str, strConcat, nil, getProperty, stringify, regexpCode, Name, Code} from \"./code\"\nexport {Scope, ScopeStore, ValueScope, ValueScopeName, ScopeValueSets, varKinds} from \"./scope\"\n\n// type for expressions that can be safely inserted in code without quotes\nexport type SafeExpr = Code | number | boolean | null\n\n// type that is either Code of function that adds code to CodeGen instance using its methods\nexport type Block = Code | (() => void)\n\nexport const operators = {\n  GT: new _Code(\">\"),\n  GTE: new _Code(\">=\"),\n  LT: new _Code(\"<\"),\n  LTE: new _Code(\"<=\"),\n  EQ: new _Code(\"===\"),\n  NEQ: new _Code(\"!==\"),\n  NOT: new _Code(\"!\"),\n  OR: new _Code(\"||\"),\n  AND: new _Code(\"&&\"),\n  ADD: new _Code(\"+\"),\n}\n\nabstract class Node {\n  abstract readonly names: UsedNames\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    return this\n  }\n\n  optimizeNames(_names: UsedNames, _constants: Constants): this | undefined {\n    return this\n  }\n\n  // get count(): number {\n  //   return 1\n  // }\n}\n\nclass Def extends Node {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private rhs?: SafeExpr\n  ) {\n    super()\n  }\n\n  render({es5, _n}: CGOptions): string {\n    const varKind = es5 ? varKinds.var : this.varKind\n    const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`\n    return `${varKind} ${this.name}${rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!names[this.name.str]) return\n    if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.rhs instanceof _CodeOrName ? this.rhs.names : {}\n  }\n}\n\nclass Assign extends Node {\n  constructor(\n    readonly lhs: Code,\n    public rhs: SafeExpr,\n    private readonly sideEffects?: boolean\n  ) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} = ${this.rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (this.lhs instanceof Name && !names[this.lhs.str] && !this.sideEffects) return\n    this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = this.lhs instanceof Name ? {} : {...this.lhs.names}\n    return addExprNames(names, this.rhs)\n  }\n}\n\nclass AssignOp extends Assign {\n  constructor(\n    lhs: Code,\n    private readonly op: Code,\n    rhs: SafeExpr,\n    sideEffects?: boolean\n  ) {\n    super(lhs, rhs, sideEffects)\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} ${this.op}= ${this.rhs};` + _n\n  }\n}\n\nclass Label extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label: Name) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.label}:` + _n\n  }\n}\n\nclass Break extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label?: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    const label = this.label ? ` ${this.label}` : \"\"\n    return `break${label};` + _n\n  }\n}\n\nclass Throw extends Node {\n  constructor(readonly error: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `throw ${this.error};` + _n\n  }\n\n  get names(): UsedNames {\n    return this.error.names\n  }\n}\n\nclass AnyCode extends Node {\n  constructor(private code: SafeExpr) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.code};` + _n\n  }\n\n  optimizeNodes(): this | undefined {\n    return `${this.code}` ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    this.code = optimizeExpr(this.code, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.code instanceof _CodeOrName ? this.code.names : {}\n  }\n}\n\nabstract class ParentNode extends Node {\n  constructor(readonly nodes: ChildNode[] = []) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return this.nodes.reduce((code, n) => code + n.render(opts), \"\")\n  }\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      const n = nodes[i].optimizeNodes()\n      if (Array.isArray(n)) nodes.splice(i, 1, ...n)\n      else if (n) nodes[i] = n\n      else nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      // iterating backwards improves 1-pass optimization\n      const n = nodes[i]\n      if (n.optimizeNames(names, constants)) continue\n      subtractNames(names, n.names)\n      nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  get names(): UsedNames {\n    return this.nodes.reduce((names: UsedNames, n) => addNames(names, n.names), {})\n  }\n\n  // get count(): number {\n  //   return this.nodes.reduce((c, n) => c + n.count, 1)\n  // }\n}\n\nabstract class BlockNode extends ParentNode {\n  render(opts: CGOptions): string {\n    return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n\n  }\n}\n\nclass Root extends ParentNode {}\n\nclass Else extends BlockNode {\n  static readonly kind = \"else\"\n}\n\nclass If extends BlockNode {\n  static readonly kind = \"if\"\n  else?: If | Else\n  constructor(\n    private condition: Code | boolean,\n    nodes?: ChildNode[]\n  ) {\n    super(nodes)\n  }\n\n  render(opts: CGOptions): string {\n    let code = `if(${this.condition})` + super.render(opts)\n    if (this.else) code += \"else \" + this.else.render(opts)\n    return code\n  }\n\n  optimizeNodes(): If | ChildNode[] | undefined {\n    super.optimizeNodes()\n    const cond = this.condition\n    if (cond === true) return this.nodes // else is ignored here\n    let e = this.else\n    if (e) {\n      const ns = e.optimizeNodes()\n      e = this.else = Array.isArray(ns) ? new Else(ns) : (ns as Else | undefined)\n    }\n    if (e) {\n      if (cond === false) return e instanceof If ? e : e.nodes\n      if (this.nodes.length) return this\n      return new If(not(cond), e instanceof If ? [e] : e.nodes)\n    }\n    if (cond === false || !this.nodes.length) return undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    this.else = this.else?.optimizeNames(names, constants)\n    if (!(super.optimizeNames(names, constants) || this.else)) return\n    this.condition = optimizeExpr(this.condition, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    addExprNames(names, this.condition)\n    if (this.else) addNames(names, this.else.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.else?.count || 0)\n  // }\n}\n\nabstract class For extends BlockNode {\n  static readonly kind = \"for\"\n}\n\nclass ForLoop extends For {\n  constructor(private iteration: Code) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.iteration})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iteration = optimizeExpr(this.iteration, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iteration.names)\n  }\n}\n\nclass ForRange extends For {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private readonly from: SafeExpr,\n    private readonly to: SafeExpr\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const varKind = opts.es5 ? varKinds.var : this.varKind\n    const {name, from, to} = this\n    return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts)\n  }\n\n  get names(): UsedNames {\n    const names = addExprNames(super.names, this.from)\n    return addExprNames(names, this.to)\n  }\n}\n\nclass ForIter extends For {\n  constructor(\n    private readonly loop: \"of\" | \"in\",\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private iterable: Code\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iterable = optimizeExpr(this.iterable, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iterable.names)\n  }\n}\n\nclass Func extends BlockNode {\n  static readonly kind = \"func\"\n  constructor(\n    public name: Name,\n    public args: Code,\n    public async?: boolean\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const _async = this.async ? \"async \" : \"\"\n    return `${_async}function ${this.name}(${this.args})` + super.render(opts)\n  }\n}\n\nclass Return extends ParentNode {\n  static readonly kind = \"return\"\n\n  render(opts: CGOptions): string {\n    return \"return \" + super.render(opts)\n  }\n}\n\nclass Try extends BlockNode {\n  catch?: Catch\n  finally?: Finally\n\n  render(opts: CGOptions): string {\n    let code = \"try\" + super.render(opts)\n    if (this.catch) code += this.catch.render(opts)\n    if (this.finally) code += this.finally.render(opts)\n    return code\n  }\n\n  optimizeNodes(): this {\n    super.optimizeNodes()\n    this.catch?.optimizeNodes() as Catch | undefined\n    this.finally?.optimizeNodes() as Finally | undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    super.optimizeNames(names, constants)\n    this.catch?.optimizeNames(names, constants)\n    this.finally?.optimizeNames(names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    if (this.catch) addNames(names, this.catch.names)\n    if (this.finally) addNames(names, this.finally.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.catch?.count || 0) + (this.finally?.count || 0)\n  // }\n}\n\nclass Catch extends BlockNode {\n  static readonly kind = \"catch\"\n  constructor(readonly error: Name) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `catch(${this.error})` + super.render(opts)\n  }\n}\n\nclass Finally extends BlockNode {\n  static readonly kind = \"finally\"\n  render(opts: CGOptions): string {\n    return \"finally\" + super.render(opts)\n  }\n}\n\ntype StartBlockNode = If | For | Func | Return | Try\n\ntype LeafNode = Def | Assign | Label | Break | Throw | AnyCode\n\ntype ChildNode = StartBlockNode | LeafNode\n\ntype EndBlockNodeType =\n  | typeof If\n  | typeof Else\n  | typeof For\n  | typeof Func\n  | typeof Return\n  | typeof Catch\n  | typeof Finally\n\ntype Constants = Record<string, SafeExpr | undefined>\n\nexport interface CodeGenOptions {\n  es5?: boolean\n  lines?: boolean\n  ownProperties?: boolean\n}\n\ninterface CGOptions extends CodeGenOptions {\n  _n: \"\\n\" | \"\"\n}\n\nexport class CodeGen {\n  readonly _scope: Scope\n  readonly _extScope: ValueScope\n  readonly _values: ScopeValueSets = {}\n  private readonly _nodes: ParentNode[]\n  private readonly _blockStarts: number[] = []\n  private readonly _constants: Constants = {}\n  private readonly opts: CGOptions\n\n  constructor(extScope: ValueScope, opts: CodeGenOptions = {}) {\n    this.opts = {...opts, _n: opts.lines ? \"\\n\" : \"\"}\n    this._extScope = extScope\n    this._scope = new Scope({parent: extScope})\n    this._nodes = [new Root()]\n  }\n\n  toString(): string {\n    return this._root.render(this.opts)\n  }\n\n  // returns unique name in the internal scope\n  name(prefix: string): Name {\n    return this._scope.name(prefix)\n  }\n\n  // reserves unique name in the external scope\n  scopeName(prefix: string): ValueScopeName {\n    return this._extScope.name(prefix)\n  }\n\n  // reserves unique name in the external scope and assigns value to it\n  scopeValue(prefixOrName: ValueScopeName | string, value: NameValue): Name {\n    const name = this._extScope.value(prefixOrName, value)\n    const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set())\n    vs.add(name)\n    return name\n  }\n\n  getScopeValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    return this._extScope.getValue(prefix, keyOrRef)\n  }\n\n  // return code that assigns values in the external scope to the names that are used internally\n  // (same names that were returned by gen.scopeName or gen.scopeValue)\n  scopeRefs(scopeName: Name): Code {\n    return this._extScope.scopeRefs(scopeName, this._values)\n  }\n\n  scopeCode(): Code {\n    return this._extScope.scopeCode(this._values)\n  }\n\n  private _def(\n    varKind: Name,\n    nameOrPrefix: Name | string,\n    rhs?: SafeExpr,\n    constant?: boolean\n  ): Name {\n    const name = this._scope.toName(nameOrPrefix)\n    if (rhs !== undefined && constant) this._constants[name.str] = rhs\n    this._leafNode(new Def(varKind, name, rhs))\n    return name\n  }\n\n  // `const` declaration (`var` in es5 mode)\n  const(nameOrPrefix: Name | string, rhs: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.const, nameOrPrefix, rhs, _constant)\n  }\n\n  // `let` declaration with optional assignment (`var` in es5 mode)\n  let(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.let, nameOrPrefix, rhs, _constant)\n  }\n\n  // `var` declaration with optional assignment\n  var(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.var, nameOrPrefix, rhs, _constant)\n  }\n\n  // assignment code\n  assign(lhs: Code, rhs: SafeExpr, sideEffects?: boolean): CodeGen {\n    return this._leafNode(new Assign(lhs, rhs, sideEffects))\n  }\n\n  // `+=` code\n  add(lhs: Code, rhs: SafeExpr): CodeGen {\n    return this._leafNode(new AssignOp(lhs, operators.ADD, rhs))\n  }\n\n  // appends passed SafeExpr to code or executes Block\n  code(c: Block | SafeExpr): CodeGen {\n    if (typeof c == \"function\") c()\n    else if (c !== nil) this._leafNode(new AnyCode(c))\n    return this\n  }\n\n  // returns code for object literal for the passed argument list of key-value pairs\n  object(...keyValues: [Name | string, SafeExpr | string][]): _Code {\n    const code: CodeItem[] = [\"{\"]\n    for (const [key, value] of keyValues) {\n      if (code.length > 1) code.push(\",\")\n      code.push(key)\n      if (key !== value || this.opts.es5) {\n        code.push(\":\")\n        addCodeArg(code, value)\n      }\n    }\n    code.push(\"}\")\n    return new _Code(code)\n  }\n\n  // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n  if(condition: Code | boolean, thenBody?: Block, elseBody?: Block): CodeGen {\n    this._blockNode(new If(condition))\n\n    if (thenBody && elseBody) {\n      this.code(thenBody).else().code(elseBody).endIf()\n    } else if (thenBody) {\n      this.code(thenBody).endIf()\n    } else if (elseBody) {\n      throw new Error('CodeGen: \"else\" body without \"then\" body')\n    }\n    return this\n  }\n\n  // `else if` clause - invalid without `if` or after `else` clauses\n  elseIf(condition: Code | boolean): CodeGen {\n    return this._elseNode(new If(condition))\n  }\n\n  // `else` clause - only valid after `if` or `else if` clauses\n  else(): CodeGen {\n    return this._elseNode(new Else())\n  }\n\n  // end `if` statement (needed if gen.if was used only with condition)\n  endIf(): CodeGen {\n    return this._endBlockNode(If, Else)\n  }\n\n  private _for(node: For, forBody?: Block): CodeGen {\n    this._blockNode(node)\n    if (forBody) this.code(forBody).endFor()\n    return this\n  }\n\n  // a generic `for` clause (or statement if `forBody` is passed)\n  for(iteration: Code, forBody?: Block): CodeGen {\n    return this._for(new ForLoop(iteration), forBody)\n  }\n\n  // `for` statement for a range of values\n  forRange(\n    nameOrPrefix: Name | string,\n    from: SafeExpr,\n    to: SafeExpr,\n    forBody: (index: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.let\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForRange(varKind, name, from, to), () => forBody(name))\n  }\n\n  // `for-of` statement (in es5 mode replace with a normal for loop)\n  forOf(\n    nameOrPrefix: Name | string,\n    iterable: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = varKinds.const\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    if (this.opts.es5) {\n      const arr = iterable instanceof Name ? iterable : this.var(\"_arr\", iterable)\n      return this.forRange(\"_i\", 0, _`${arr}.length`, (i) => {\n        this.var(name, _`${arr}[${i}]`)\n        forBody(name)\n      })\n    }\n    return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name))\n  }\n\n  // `for-in` statement.\n  // With option `ownProperties` replaced with a `for-of` loop for object keys\n  forIn(\n    nameOrPrefix: Name | string,\n    obj: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.const\n  ): CodeGen {\n    if (this.opts.ownProperties) {\n      return this.forOf(nameOrPrefix, _`Object.keys(${obj})`, forBody)\n    }\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name))\n  }\n\n  // end `for` loop\n  endFor(): CodeGen {\n    return this._endBlockNode(For)\n  }\n\n  // `label` statement\n  label(label: Name): CodeGen {\n    return this._leafNode(new Label(label))\n  }\n\n  // `break` statement\n  break(label?: Code): CodeGen {\n    return this._leafNode(new Break(label))\n  }\n\n  // `return` statement\n  return(value: Block | SafeExpr): CodeGen {\n    const node = new Return()\n    this._blockNode(node)\n    this.code(value)\n    if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node')\n    return this._endBlockNode(Return)\n  }\n\n  // `try` statement\n  try(tryBody: Block, catchCode?: (e: Name) => void, finallyCode?: Block): CodeGen {\n    if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"')\n    const node = new Try()\n    this._blockNode(node)\n    this.code(tryBody)\n    if (catchCode) {\n      const error = this.name(\"e\")\n      this._currNode = node.catch = new Catch(error)\n      catchCode(error)\n    }\n    if (finallyCode) {\n      this._currNode = node.finally = new Finally()\n      this.code(finallyCode)\n    }\n    return this._endBlockNode(Catch, Finally)\n  }\n\n  // `throw` statement\n  throw(error: Code): CodeGen {\n    return this._leafNode(new Throw(error))\n  }\n\n  // start self-balancing block\n  block(body?: Block, nodeCount?: number): CodeGen {\n    this._blockStarts.push(this._nodes.length)\n    if (body) this.code(body).endBlock(nodeCount)\n    return this\n  }\n\n  // end the current self-balancing block\n  endBlock(nodeCount?: number): CodeGen {\n    const len = this._blockStarts.pop()\n    if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\")\n    const toClose = this._nodes.length - len\n    if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n      throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`)\n    }\n    this._nodes.length = len\n    return this\n  }\n\n  // `function` heading (or definition if funcBody is passed)\n  func(name: Name, args: Code = nil, async?: boolean, funcBody?: Block): CodeGen {\n    this._blockNode(new Func(name, args, async))\n    if (funcBody) this.code(funcBody).endFunc()\n    return this\n  }\n\n  // end function definition\n  endFunc(): CodeGen {\n    return this._endBlockNode(Func)\n  }\n\n  optimize(n = 1): void {\n    while (n-- > 0) {\n      this._root.optimizeNodes()\n      this._root.optimizeNames(this._root.names, this._constants)\n    }\n  }\n\n  private _leafNode(node: LeafNode): CodeGen {\n    this._currNode.nodes.push(node)\n    return this\n  }\n\n  private _blockNode(node: StartBlockNode): void {\n    this._currNode.nodes.push(node)\n    this._nodes.push(node)\n  }\n\n  private _endBlockNode(N1: EndBlockNodeType, N2?: EndBlockNodeType): CodeGen {\n    const n = this._currNode\n    if (n instanceof N1 || (N2 && n instanceof N2)) {\n      this._nodes.pop()\n      return this\n    }\n    throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`)\n  }\n\n  private _elseNode(node: If | Else): CodeGen {\n    const n = this._currNode\n    if (!(n instanceof If)) {\n      throw new Error('CodeGen: \"else\" without \"if\"')\n    }\n    this._currNode = n.else = node\n    return this\n  }\n\n  private get _root(): Root {\n    return this._nodes[0] as Root\n  }\n\n  private get _currNode(): ParentNode {\n    const ns = this._nodes\n    return ns[ns.length - 1]\n  }\n\n  private set _currNode(node: ParentNode) {\n    const ns = this._nodes\n    ns[ns.length - 1] = node\n  }\n\n  // get nodeCount(): number {\n  //   return this._root.count\n  // }\n}\n\nfunction addNames(names: UsedNames, from: UsedNames): UsedNames {\n  for (const n in from) names[n] = (names[n] || 0) + (from[n] || 0)\n  return names\n}\n\nfunction addExprNames(names: UsedNames, from: SafeExpr): UsedNames {\n  return from instanceof _CodeOrName ? addNames(names, from.names) : names\n}\n\nfunction optimizeExpr<T extends SafeExpr | Code>(expr: T, names: UsedNames, constants: Constants): T\nfunction optimizeExpr(expr: SafeExpr, names: UsedNames, constants: Constants): SafeExpr {\n  if (expr instanceof Name) return replaceName(expr)\n  if (!canOptimize(expr)) return expr\n  return new _Code(\n    expr._items.reduce((items: CodeItem[], c: SafeExpr | string) => {\n      if (c instanceof Name) c = replaceName(c)\n      if (c instanceof _Code) items.push(...c._items)\n      else items.push(c)\n      return items\n    }, [])\n  )\n\n  function replaceName(n: Name): SafeExpr {\n    const c = constants[n.str]\n    if (c === undefined || names[n.str] !== 1) return n\n    delete names[n.str]\n    return c\n  }\n\n  function canOptimize(e: SafeExpr): e is _Code {\n    return (\n      e instanceof _Code &&\n      e._items.some(\n        (c) => c instanceof Name && names[c.str] === 1 && constants[c.str] !== undefined\n      )\n    )\n  }\n}\n\nfunction subtractNames(names: UsedNames, from: UsedNames): void {\n  for (const n in from) names[n] = (names[n] || 0) - (from[n] || 0)\n}\n\nexport function not<T extends Code | SafeExpr>(x: T): T\nexport function not(x: Code | SafeExpr): Code | SafeExpr {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : _`!${par(x)}`\n}\n\nconst andCode = mappend(operators.AND)\n\n// boolean AND (&&) expression with the passed arguments\nexport function and(...args: Code[]): Code {\n  return args.reduce(andCode)\n}\n\nconst orCode = mappend(operators.OR)\n\n// boolean OR (||) expression with the passed arguments\nexport function or(...args: Code[]): Code {\n  return args.reduce(orCode)\n}\n\ntype MAppend = (x: Code, y: Code) => Code\n\nfunction mappend(op: Code): MAppend {\n  return (x, y) => (x === nil ? y : y === nil ? x : _`${par(x)} ${op} ${par(y)}`)\n}\n\nfunction par(x: Code): Code {\n  return x instanceof Name ? x : _`(${x})`\n}\n", "import type {AnySchema, EvaluatedProperties, EvaluatedItems} from \"../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \".\"\nimport {_, getProperty, Code, Name, CodeGen} from \"./codegen\"\nimport {_Code} from \"./codegen/code\"\nimport type {Rule, ValidationRules} from \"./rules\"\n\n// TODO refactor to use Set\nexport function toHash<T extends string = string>(arr: T[]): {[K in T]?: true} {\n  const hash: {[K in T]?: true} = {}\n  for (const item of arr) hash[item] = true\n  return hash\n}\n\nexport function alwaysValidSchema(it: SchemaCxt, schema: AnySchema): boolean | void {\n  if (typeof schema == \"boolean\") return schema\n  if (Object.keys(schema).length === 0) return true\n  checkUnknownRules(it, schema)\n  return !schemaHasRules(schema, it.self.RULES.all)\n}\n\nexport function checkUnknownRules(it: SchemaCxt, schema: AnySchema = it.schema): void {\n  const {opts, self} = it\n  if (!opts.strictSchema) return\n  if (typeof schema === \"boolean\") return\n  const rules = self.RULES.keywords\n  for (const key in schema) {\n    if (!rules[key]) checkStrictMode(it, `unknown keyword: \"${key}\"`)\n  }\n}\n\nexport function schemaHasRules(\n  schema: AnySchema,\n  rules: {[Key in string]?: boolean | Rule}\n): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (rules[key]) return true\n  return false\n}\n\nexport function schemaHasRulesButRef(schema: AnySchema, RULES: ValidationRules): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (key !== \"$ref\" && RULES.all[key]) return true\n  return false\n}\n\nexport function schemaRefOrVal(\n  {topSchemaRef, schemaPath}: SchemaObjCxt,\n  schema: unknown,\n  keyword: string,\n  $data?: string | false\n): Code | number | boolean {\n  if (!$data) {\n    if (typeof schema == \"number\" || typeof schema == \"boolean\") return schema\n    if (typeof schema == \"string\") return _`${schema}`\n  }\n  return _`${topSchemaRef}${schemaPath}${getProperty(keyword)}`\n}\n\nexport function unescapeFragment(str: string): string {\n  return unescapeJsonPointer(decodeURIComponent(str))\n}\n\nexport function escapeFragment(str: string | number): string {\n  return encodeURIComponent(escapeJsonPointer(str))\n}\n\nexport function escapeJsonPointer(str: string | number): string {\n  if (typeof str == \"number\") return `${str}`\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\")\n}\n\nexport function unescapeJsonPointer(str: string): string {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\")\n}\n\nexport function eachItem<T>(xs: T | T[], f: (x: T) => void): void {\n  if (Array.isArray(xs)) {\n    for (const x of xs) f(x)\n  } else {\n    f(xs)\n  }\n}\n\ntype SomeEvaluated = EvaluatedProperties | EvaluatedItems\n\ntype MergeEvaluatedFunc<T extends SomeEvaluated> = (\n  gen: CodeGen,\n  from: Name | T,\n  to: Name | Exclude<T, true> | undefined,\n  toName?: typeof Name\n) => Name | T\n\ninterface MakeMergeFuncArgs<T extends SomeEvaluated> {\n  mergeNames: (gen: CodeGen, from: Name, to: Name) => void\n  mergeToName: (gen: CodeGen, from: T, to: Name) => void\n  mergeValues: (from: T, to: Exclude<T, true>) => T\n  resultToName: (gen: CodeGen, res?: T) => Name\n}\n\nfunction makeMergeEvaluated<T extends SomeEvaluated>({\n  mergeNames,\n  mergeToName,\n  mergeValues,\n  resultToName,\n}: MakeMergeFuncArgs<T>): MergeEvaluatedFunc<T> {\n  return (gen, from, to, toName) => {\n    const res =\n      to === undefined\n        ? from\n        : to instanceof Name\n        ? (from instanceof Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n        : from instanceof Name\n        ? (mergeToName(gen, to, from), from)\n        : mergeValues(from, to)\n    return toName === Name && !(res instanceof Name) ? resultToName(gen, res) : res\n  }\n}\n\ninterface MergeEvaluated {\n  props: MergeEvaluatedFunc<EvaluatedProperties>\n  items: MergeEvaluatedFunc<EvaluatedItems>\n}\n\nexport const mergeEvaluated: MergeEvaluated = {\n  props: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () => {\n        gen.if(\n          _`${from} === true`,\n          () => gen.assign(to, true),\n          () => gen.assign(to, _`${to} || {}`).code(_`Object.assign(${to}, ${from})`)\n        )\n      }),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () => {\n        if (from === true) {\n          gen.assign(to, true)\n        } else {\n          gen.assign(to, _`${to} || {}`)\n          setEvaluated(gen, to, from)\n        }\n      }),\n    mergeValues: (from, to) => (from === true ? true : {...from, ...to}),\n    resultToName: evaluatedPropsToName,\n  }),\n  items: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () =>\n        gen.assign(to, _`${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () =>\n        gen.assign(to, from === true ? true : _`${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n    resultToName: (gen, items) => gen.var(\"items\", items),\n  }),\n}\n\nexport function evaluatedPropsToName(gen: CodeGen, ps?: EvaluatedProperties): Name {\n  if (ps === true) return gen.var(\"props\", true)\n  const props = gen.var(\"props\", _`{}`)\n  if (ps !== undefined) setEvaluated(gen, props, ps)\n  return props\n}\n\nexport function setEvaluated(gen: CodeGen, props: Name, ps: {[K in string]?: true}): void {\n  Object.keys(ps).forEach((p) => gen.assign(_`${props}${getProperty(p)}`, true))\n}\n\nconst snippets: {[S in string]?: _Code} = {}\n\nexport function useFunc(gen: CodeGen, f: {code: string}): Name {\n  return gen.scopeValue(\"func\", {\n    ref: f,\n    code: snippets[f.code] || (snippets[f.code] = new _Code(f.code)),\n  })\n}\n\nexport enum Type {\n  Num,\n  Str,\n}\n\nexport function getErrorPath(\n  dataProp: Name | string | number,\n  dataPropType?: Type,\n  jsPropertySyntax?: boolean\n): Code | string {\n  // let path\n  if (dataProp instanceof Name) {\n    const isNumber = dataPropType === Type.Num\n    return jsPropertySyntax\n      ? isNumber\n        ? _`\"[\" + ${dataProp} + \"]\"`\n        : _`\"['\" + ${dataProp} + \"']\"`\n      : isNumber\n      ? _`\"/\" + ${dataProp}`\n      : _`\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")` // TODO maybe use global escapePointer\n  }\n  return jsPropertySyntax ? getProperty(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp)\n}\n\nexport function checkStrictMode(\n  it: SchemaCxt,\n  msg: string,\n  mode: boolean | \"log\" = it.opts.strictSchema\n): void {\n  if (!mode) return\n  msg = `strict mode: ${msg}`\n  if (mode === true) throw new Error(msg)\n  it.self.logger.warn(msg)\n}\n", "import {Name} from \"./codegen\"\n\nconst names = {\n  // validation function arguments\n  data: new Name(\"data\"), // data passed to validation function\n  // args passed from referencing schema\n  valCxt: new Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n  instancePath: new Name(\"instancePath\"),\n  parentData: new Name(\"parentData\"),\n  parentDataProperty: new Name(\"parentDataProperty\"),\n  rootData: new Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n  dynamicAnchors: new Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n  // function scoped variables\n  vErrors: new Name(\"vErrors\"), // null or array of validation errors\n  errors: new Name(\"errors\"), // counter of validation errors\n  this: new Name(\"this\"),\n  // \"globals\"\n  self: new Name(\"self\"),\n  scope: new Name(\"scope\"),\n  // JTD serialize/parse name for JSON string and position\n  json: new Name(\"json\"),\n  jsonPos: new Name(\"jsonPos\"),\n  jsonLen: new Name(\"jsonLen\"),\n  jsonPart: new Name(\"jsonPart\"),\n}\n\nexport default names\n", "import type {KeywordErrorCxt, KeywordErrorDefinition} from \"../types\"\nimport type {SchemaCxt} from \"./index\"\nimport {CodeGen, _, str, strConcat, Code, Name} from \"./codegen\"\nimport {SafeExpr} from \"./codegen/code\"\nimport {getErrorPath, Type} from \"./util\"\nimport N from \"./names\"\n\nexport const keywordError: KeywordErrorDefinition = {\n  message: ({keyword}) => str`must pass \"${keyword}\" keyword validation`,\n}\n\nexport const keyword$DataError: KeywordErrorDefinition = {\n  message: ({keyword, schemaType}) =>\n    schemaType\n      ? str`\"${keyword}\" keyword must be ${schemaType} ($data)`\n      : str`\"${keyword}\" keyword is invalid ($data)`,\n}\n\nexport interface ErrorPaths {\n  instancePath?: Code\n  schemaPath?: string\n  parentSchema?: boolean\n}\n\nexport function reportError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths,\n  overrideAllErrors?: boolean\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  if (overrideAllErrors ?? (compositeRule || allErrors)) {\n    addError(gen, errObj)\n  } else {\n    returnErrors(it, _`[${errObj}]`)\n  }\n}\n\nexport function reportExtraError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  addError(gen, errObj)\n  if (!(compositeRule || allErrors)) {\n    returnErrors(it, N.vErrors)\n  }\n}\n\nexport function resetErrorsCount(gen: CodeGen, errsCount: Name): void {\n  gen.assign(N.errors, errsCount)\n  gen.if(_`${N.vErrors} !== null`, () =>\n    gen.if(\n      errsCount,\n      () => gen.assign(_`${N.vErrors}.length`, errsCount),\n      () => gen.assign(N.vErrors, null)\n    )\n  )\n}\n\nexport function extendErrors({\n  gen,\n  keyword,\n  schemaValue,\n  data,\n  errsCount,\n  it,\n}: KeywordErrorCxt): void {\n  /* istanbul ignore if */\n  if (errsCount === undefined) throw new Error(\"ajv implementation error\")\n  const err = gen.name(\"err\")\n  gen.forRange(\"i\", errsCount, N.errors, (i) => {\n    gen.const(err, _`${N.vErrors}[${i}]`)\n    gen.if(_`${err}.instancePath === undefined`, () =>\n      gen.assign(_`${err}.instancePath`, strConcat(N.instancePath, it.errorPath))\n    )\n    gen.assign(_`${err}.schemaPath`, str`${it.errSchemaPath}/${keyword}`)\n    if (it.opts.verbose) {\n      gen.assign(_`${err}.schema`, schemaValue)\n      gen.assign(_`${err}.data`, data)\n    }\n  })\n}\n\nfunction addError(gen: CodeGen, errObj: Code): void {\n  const err = gen.const(\"err\", errObj)\n  gen.if(\n    _`${N.vErrors} === null`,\n    () => gen.assign(N.vErrors, _`[${err}]`),\n    _`${N.vErrors}.push(${err})`\n  )\n  gen.code(_`${N.errors}++`)\n}\n\nfunction returnErrors(it: SchemaCxt, errs: Code): void {\n  const {gen, validateName, schemaEnv} = it\n  if (schemaEnv.$async) {\n    gen.throw(_`new ${it.ValidationError as Name}(${errs})`)\n  } else {\n    gen.assign(_`${validateName}.errors`, errs)\n    gen.return(false)\n  }\n}\n\nconst E = {\n  keyword: new Name(\"keyword\"),\n  schemaPath: new Name(\"schemaPath\"), // also used in JTD errors\n  params: new Name(\"params\"),\n  propertyName: new Name(\"propertyName\"),\n  message: new Name(\"message\"),\n  schema: new Name(\"schema\"),\n  parentSchema: new Name(\"parentSchema\"),\n}\n\nfunction errorObjectCode(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths?: ErrorPaths\n): Code {\n  const {createErrors} = cxt.it\n  if (createErrors === false) return _`{}`\n  return errorObject(cxt, error, errorPaths)\n}\n\nfunction errorObject(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths: ErrorPaths = {}\n): Code {\n  const {gen, it} = cxt\n  const keyValues: [Name, SafeExpr | string][] = [\n    errorInstancePath(it, errorPaths),\n    errorSchemaPath(cxt, errorPaths),\n  ]\n  extraErrorProps(cxt, error, keyValues)\n  return gen.object(...keyValues)\n}\n\nfunction errorInstancePath({errorPath}: SchemaCxt, {instancePath}: ErrorPaths): [Name, Code] {\n  const instPath = instancePath\n    ? str`${errorPath}${getErrorPath(instancePath, Type.Str)}`\n    : errorPath\n  return [N.instancePath, strConcat(N.instancePath, instPath)]\n}\n\nfunction errorSchemaPath(\n  {keyword, it: {errSchemaPath}}: KeywordErrorCxt,\n  {schemaPath, parentSchema}: ErrorPaths\n): [Name, string | Code] {\n  let schPath = parentSchema ? errSchemaPath : str`${errSchemaPath}/${keyword}`\n  if (schemaPath) {\n    schPath = str`${schPath}${getErrorPath(schemaPath, Type.Str)}`\n  }\n  return [E.schemaPath, schPath]\n}\n\nfunction extraErrorProps(\n  cxt: KeywordErrorCxt,\n  {params, message}: KeywordErrorDefinition,\n  keyValues: [Name, SafeExpr | string][]\n): void {\n  const {keyword, data, schemaValue, it} = cxt\n  const {opts, propertyName, topSchemaRef, schemaPath} = it\n  keyValues.push(\n    [E.keyword, keyword],\n    [E.params, typeof params == \"function\" ? params(cxt) : params || _`{}`]\n  )\n  if (opts.messages) {\n    keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message])\n  }\n  if (opts.verbose) {\n    keyValues.push(\n      [E.schema, schemaValue],\n      [E.parentSchema, _`${topSchemaRef}${schemaPath}`],\n      [N.data, data]\n    )\n  }\n  if (propertyName) keyValues.push([E.propertyName, propertyName])\n}\n", "import type {KeywordErrorDefinition, KeywordErrorCxt} from \"../../types\"\nimport type {SchemaCxt} from \"..\"\nimport {reportError} from \"../errors\"\nimport {_, Name} from \"../codegen\"\nimport N from \"../names\"\n\nconst boolError: KeywordErrorDefinition = {\n  message: \"boolean schema is false\",\n}\n\nexport function topBoolOrEmptySchema(it: SchemaCxt): void {\n  const {gen, schema, validateName} = it\n  if (schema === false) {\n    falseSchemaError(it, false)\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(N.data)\n  } else {\n    gen.assign(_`${validateName}.errors`, null)\n    gen.return(true)\n  }\n}\n\nexport function boolOrEmptySchema(it: SchemaCxt, valid: Name): void {\n  const {gen, schema} = it\n  if (schema === false) {\n    gen.var(valid, false) // TODO var\n    falseSchemaError(it)\n  } else {\n    gen.var(valid, true) // TODO var\n  }\n}\n\nfunction falseSchemaError(it: SchemaCxt, overrideAllErrors?: boolean): void {\n  const {gen, data} = it\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt: KeywordErrorCxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it,\n  }\n  reportError(cxt, boolError, undefined, overrideAllErrors)\n}\n", "import type {AddedKeywordDefinition} from \"../types\"\n\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"] as const\n\nexport type JSONType = (typeof _jsonTypes)[number]\n\nconst jsonTypes: Set<string> = new Set(_jsonTypes)\n\nexport function isJSONType(x: unknown): x is JSONType {\n  return typeof x == \"string\" && jsonTypes.has(x)\n}\n\ntype ValidationTypes = {\n  [K in JSONType]: boolean | RuleGroup | undefined\n}\n\nexport interface ValidationRules {\n  rules: RuleGroup[]\n  post: RuleGroup\n  all: {[Key in string]?: boolean | Rule} // rules that have to be validated\n  keywords: {[Key in string]?: boolean} // all known keywords (superset of \"all\")\n  types: ValidationTypes\n}\n\nexport interface RuleGroup {\n  type?: JSONType\n  rules: Rule[]\n}\n\n// This interface wraps KeywordDefinition because definition can have multiple keywords\nexport interface Rule {\n  keyword: string\n  definition: AddedKeywordDefinition\n}\n\nexport function getRules(): ValidationRules {\n  const groups: Record<\"number\" | \"string\" | \"array\" | \"object\", RuleGroup> = {\n    number: {type: \"number\", rules: []},\n    string: {type: \"string\", rules: []},\n    array: {type: \"array\", rules: []},\n    object: {type: \"object\", rules: []},\n  }\n  return {\n    types: {...groups, integer: true, boolean: true, null: true},\n    rules: [{rules: []}, groups.number, groups.string, groups.array, groups.object],\n    post: {rules: []},\n    all: {},\n    keywords: {},\n  }\n}\n", "import type {AnySchemaObject} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport type {JSONType, RuleGroup, Rule} from \"../rules\"\n\nexport function schemaHasRulesForType(\n  {schema, self}: SchemaObjCxt,\n  type: JSONType\n): boolean | undefined {\n  const group = self.RULES.types[type]\n  return group && group !== true && shouldUseGroup(schema, group)\n}\n\nexport function shouldUseGroup(schema: AnySchemaObject, group: RuleGroup): boolean {\n  return group.rules.some((rule) => shouldUseRule(schema, rule))\n}\n\nexport function shouldUseRule(schema: AnySchemaObject, rule: Rule): boolean | undefined {\n  return (\n    schema[rule.keyword] !== undefined ||\n    rule.definition.implements?.some((kwd) => schema[kwd] !== undefined)\n  )\n}\n", "import type {\n  KeywordErrorDefinition,\n  KeywordErrorCxt,\n  ErrorObject,\n  AnySchemaObject,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {isJSONType, JSONType} from \"../rules\"\nimport {schemaHasRulesForType} from \"./applicability\"\nimport {reportError} from \"../errors\"\nimport {_, nil, and, not, operators, Code, Name} from \"../codegen\"\nimport {toHash, schemaRefOrVal} from \"../util\"\n\nexport enum DataType {\n  Correct,\n  Wrong,\n}\n\nexport function getSchemaTypes(schema: AnySchemaObject): JSONType[] {\n  const types = getJSONTypes(schema.type)\n  const hasNull = types.includes(\"null\")\n  if (hasNull) {\n    if (schema.nullable === false) throw new Error(\"type: null contradicts nullable: false\")\n  } else {\n    if (!types.length && schema.nullable !== undefined) {\n      throw new Error('\"nullable\" cannot be used without \"type\"')\n    }\n    if (schema.nullable === true) types.push(\"null\")\n  }\n  return types\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport function getJSONTypes(ts: unknown | unknown[]): JSONType[] {\n  const types: unknown[] = Array.isArray(ts) ? ts : ts ? [ts] : []\n  if (types.every(isJSONType)) return types\n  throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"))\n}\n\nexport function coerceAndCheckDataType(it: SchemaObjCxt, types: JSONType[]): boolean {\n  const {gen, data, opts} = it\n  const coerceTo = coerceToTypes(types, opts.coerceTypes)\n  const checkTypes =\n    types.length > 0 &&\n    !(coerceTo.length === 0 && types.length === 1 && schemaHasRulesForType(it, types[0]))\n  if (checkTypes) {\n    const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong)\n    gen.if(wrongType, () => {\n      if (coerceTo.length) coerceData(it, types, coerceTo)\n      else reportTypeError(it)\n    })\n  }\n  return checkTypes\n}\n\nconst COERCIBLE: Set<JSONType> = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"])\nfunction coerceToTypes(types: JSONType[], coerceTypes?: boolean | \"array\"): JSONType[] {\n  return coerceTypes\n    ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n    : []\n}\n\nfunction coerceData(it: SchemaObjCxt, types: JSONType[], coerceTo: JSONType[]): void {\n  const {gen, data, opts} = it\n  const dataType = gen.let(\"dataType\", _`typeof ${data}`)\n  const coerced = gen.let(\"coerced\", _`undefined`)\n  if (opts.coerceTypes === \"array\") {\n    gen.if(_`${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () =>\n      gen\n        .assign(data, _`${data}[0]`)\n        .assign(dataType, _`typeof ${data}`)\n        .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data))\n    )\n  }\n  gen.if(_`${coerced} !== undefined`)\n  for (const t of coerceTo) {\n    if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n      coerceSpecificType(t)\n    }\n  }\n  gen.else()\n  reportTypeError(it)\n  gen.endIf()\n\n  gen.if(_`${coerced} !== undefined`, () => {\n    gen.assign(data, coerced)\n    assignParentData(it, coerced)\n  })\n\n  function coerceSpecificType(t: string): void {\n    switch (t) {\n      case \"string\":\n        gen\n          .elseIf(_`${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n          .assign(coerced, _`\"\" + ${data}`)\n          .elseIf(_`${data} === null`)\n          .assign(coerced, _`\"\"`)\n        return\n      case \"number\":\n        gen\n          .elseIf(\n            _`${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"integer\":\n        gen\n          .elseIf(\n            _`${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"boolean\":\n        gen\n          .elseIf(_`${data} === \"false\" || ${data} === 0 || ${data} === null`)\n          .assign(coerced, false)\n          .elseIf(_`${data} === \"true\" || ${data} === 1`)\n          .assign(coerced, true)\n        return\n      case \"null\":\n        gen.elseIf(_`${data} === \"\" || ${data} === 0 || ${data} === false`)\n        gen.assign(coerced, null)\n        return\n\n      case \"array\":\n        gen\n          .elseIf(\n            _`${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`\n          )\n          .assign(coerced, _`[${data}]`)\n    }\n  }\n}\n\nfunction assignParentData({gen, parentData, parentDataProperty}: SchemaObjCxt, expr: Name): void {\n  // TODO use gen.property\n  gen.if(_`${parentData} !== undefined`, () =>\n    gen.assign(_`${parentData}[${parentDataProperty}]`, expr)\n  )\n}\n\nexport function checkDataType(\n  dataType: JSONType,\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct = DataType.Correct\n): Code {\n  const EQ = correct === DataType.Correct ? operators.EQ : operators.NEQ\n  let cond: Code\n  switch (dataType) {\n    case \"null\":\n      return _`${data} ${EQ} null`\n    case \"array\":\n      cond = _`Array.isArray(${data})`\n      break\n    case \"object\":\n      cond = _`${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`\n      break\n    case \"integer\":\n      cond = numCond(_`!(${data} % 1) && !isNaN(${data})`)\n      break\n    case \"number\":\n      cond = numCond()\n      break\n    default:\n      return _`typeof ${data} ${EQ} ${dataType}`\n  }\n  return correct === DataType.Correct ? cond : not(cond)\n\n  function numCond(_cond: Code = nil): Code {\n    return and(_`typeof ${data} == \"number\"`, _cond, strictNums ? _`isFinite(${data})` : nil)\n  }\n}\n\nexport function checkDataTypes(\n  dataTypes: JSONType[],\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct?: DataType\n): Code {\n  if (dataTypes.length === 1) {\n    return checkDataType(dataTypes[0], data, strictNums, correct)\n  }\n  let cond: Code\n  const types = toHash(dataTypes)\n  if (types.array && types.object) {\n    const notObj = _`typeof ${data} != \"object\"`\n    cond = types.null ? notObj : _`!${data} || ${notObj}`\n    delete types.null\n    delete types.array\n    delete types.object\n  } else {\n    cond = nil\n  }\n  if (types.number) delete types.integer\n  for (const t in types) cond = and(cond, checkDataType(t as JSONType, data, strictNums, correct))\n  return cond\n}\n\nexport type TypeError = ErrorObject<\"type\", {type: string}>\n\nconst typeError: KeywordErrorDefinition = {\n  message: ({schema}) => `must be ${schema}`,\n  params: ({schema, schemaValue}) =>\n    typeof schema == \"string\" ? _`{type: ${schema}}` : _`{type: ${schemaValue}}`,\n}\n\nexport function reportTypeError(it: SchemaObjCxt): void {\n  const cxt = getTypeErrorContext(it)\n  reportError(cxt, typeError)\n}\n\nfunction getTypeErrorContext(it: SchemaObjCxt): KeywordErrorCxt {\n  const {gen, data, schema} = it\n  const schemaCode = schemaRefOrVal(it, schema, \"type\")\n  return {\n    gen,\n    keyword: \"type\",\n    data,\n    schema: schema.type,\n    schemaCode,\n    schemaValue: schemaCode,\n    parentSchema: schema,\n    params: {},\n    it,\n  }\n}\n", "import type {SchemaObjCxt} from \"..\"\nimport {_, getProperty, stringify} from \"../codegen\"\nimport {checkStrictMode} from \"../util\"\n\nexport function assignDefaults(it: SchemaObjCxt, ty?: string): void {\n  const {properties, items} = it.schema\n  if (ty === \"object\" && properties) {\n    for (const key in properties) {\n      assignDefault(it, key, properties[key].default)\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach((sch, i: number) => assignDefault(it, i, sch.default))\n  }\n}\n\nfunction assignDefault(it: SchemaObjCxt, prop: string | number, defaultValue: unknown): void {\n  const {gen, compositeRule, data, opts} = it\n  if (defaultValue === undefined) return\n  const childData = _`${data}${getProperty(prop)}`\n  if (compositeRule) {\n    checkStrictMode(it, `default is ignored for: ${childData}`)\n    return\n  }\n\n  let condition = _`${childData} === undefined`\n  if (opts.useDefaults === \"empty\") {\n    condition = _`${condition} || ${childData} === null || ${childData} === \"\"`\n  }\n  // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n  gen.if(condition, _`${childData} = ${stringify(defaultValue)}`)\n}\n", "import type {AnySchema, SchemaMap} from \"../types\"\nimport type {SchemaCxt} from \"../compile\"\nimport type {KeywordCxt} from \"../compile/validate\"\nimport {CodeGen, _, and, or, not, nil, strConcat, getProperty, Code, Name} from \"../compile/codegen\"\nimport {alwaysValidSchema, Type} from \"../compile/util\"\nimport N from \"../compile/names\"\nimport {useFunc} from \"../compile/util\"\nexport function checkReportMissingProp(cxt: KeywordCxt, prop: string): void {\n  const {gen, data, it} = cxt\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n    cxt.setParams({missingProperty: _`${prop}`}, true)\n    cxt.error()\n  })\n}\n\nexport function checkMissingProp(\n  {gen, data, it: {opts}}: KeywordCxt,\n  properties: string[],\n  missing: Name\n): Code {\n  return or(\n    ...properties.map((prop) =>\n      and(noPropertyInData(gen, data, prop, opts.ownProperties), _`${missing} = ${prop}`)\n    )\n  )\n}\n\nexport function reportMissingProp(cxt: KeywordCxt, missing: Name): void {\n  cxt.setParams({missingProperty: missing}, true)\n  cxt.error()\n}\n\nexport function hasPropFunc(gen: CodeGen): Name {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: _`Object.prototype.hasOwnProperty`,\n  })\n}\n\nexport function isOwnProperty(gen: CodeGen, data: Name, property: Name | string): Code {\n  return _`${hasPropFunc(gen)}.call(${data}, ${property})`\n}\n\nexport function propertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} !== undefined`\n  return ownProperties ? _`${cond} && ${isOwnProperty(gen, data, property)}` : cond\n}\n\nexport function noPropertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} === undefined`\n  return ownProperties ? or(cond, not(isOwnProperty(gen, data, property))) : cond\n}\n\nexport function allSchemaProperties(schemaMap?: SchemaMap): string[] {\n  return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : []\n}\n\nexport function schemaProperties(it: SchemaCxt, schemaMap: SchemaMap): string[] {\n  return allSchemaProperties(schemaMap).filter(\n    (p) => !alwaysValidSchema(it, schemaMap[p] as AnySchema)\n  )\n}\n\nexport function callValidateCode(\n  {schemaCode, data, it: {gen, topSchemaRef, schemaPath, errorPath}, it}: KeywordCxt,\n  func: Code,\n  context: Code,\n  passSchema?: boolean\n): Code {\n  const dataAndSchema = passSchema ? _`${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data\n  const valCxt: [Name, Code | number][] = [\n    [N.instancePath, strConcat(N.instancePath, errorPath)],\n    [N.parentData, it.parentData],\n    [N.parentDataProperty, it.parentDataProperty],\n    [N.rootData, N.rootData],\n  ]\n  if (it.opts.dynamicRef) valCxt.push([N.dynamicAnchors, N.dynamicAnchors])\n  const args = _`${dataAndSchema}, ${gen.object(...valCxt)}`\n  return context !== nil ? _`${func}.call(${context}, ${args})` : _`${func}(${args})`\n}\n\nconst newRegExp = _`new RegExp`\n\nexport function usePattern({gen, it: {opts}}: KeywordCxt, pattern: string): Name {\n  const u = opts.unicodeRegExp ? \"u\" : \"\"\n  const {regExp} = opts.code\n  const rx = regExp(pattern, u)\n\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: _`${regExp.code === \"new RegExp\" ? newRegExp : useFunc(gen, regExp)}(${pattern}, ${u})`,\n  })\n}\n\nexport function validateArray(cxt: KeywordCxt): Name {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  if (it.allErrors) {\n    const validArr = gen.let(\"valid\", true)\n    validateItems(() => gen.assign(validArr, false))\n    return validArr\n  }\n  gen.var(valid, true)\n  validateItems(() => gen.break())\n  return valid\n\n  function validateItems(notValid: () => void): void {\n    const len = gen.const(\"len\", _`${data}.length`)\n    gen.forRange(\"i\", 0, len, (i) => {\n      cxt.subschema(\n        {\n          keyword,\n          dataProp: i,\n          dataPropType: Type.Num,\n        },\n        valid\n      )\n      gen.if(not(valid), notValid)\n    })\n  }\n}\n\nexport function validateUnion(cxt: KeywordCxt): void {\n  const {gen, schema, keyword, it} = cxt\n  /* istanbul ignore if */\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n  const alwaysValid = schema.some((sch: AnySchema) => alwaysValidSchema(it, sch))\n  if (alwaysValid && !it.opts.unevaluated) return\n\n  const valid = gen.let(\"valid\", false)\n  const schValid = gen.name(\"_valid\")\n\n  gen.block(() =>\n    schema.forEach((_sch: AnySchema, i: number) => {\n      const schCxt = cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          compositeRule: true,\n        },\n        schValid\n      )\n      gen.assign(valid, _`${valid} || ${schValid}`)\n      const merged = cxt.mergeValidEvaluated(schCxt, schValid)\n      // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n      if (!merged) gen.if(not(valid))\n    })\n  )\n\n  cxt.result(\n    valid,\n    () => cxt.reset(),\n    () => cxt.error(true)\n  )\n}\n", "import type {KeywordCxt} from \".\"\nimport type {\n  AnySchema,\n  SchemaValidateFunction,\n  AnyValidateFunction,\n  AddedKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, nil, not, stringify, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport type {JSONType} from \"../rules\"\nimport {callValidateCode} from \"../../vocabularies/code\"\nimport {extendErrors} from \"../errors\"\n\ntype KeywordCompilationResult = AnySchema | SchemaValidateFunction | AnyValidateFunction\n\nexport function macroKeywordCode(cxt: KeywordCxt, def: MacroKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, it} = cxt\n  const macroSchema = def.macro.call(it.self, schema, parentSchema, it)\n  const schemaRef = useKeyword(gen, keyword, macroSchema)\n  if (it.opts.validateSchema !== false) it.self.validateSchema(macroSchema, true)\n\n  const valid = gen.name(\"valid\")\n  cxt.subschema(\n    {\n      schema: macroSchema,\n      schemaPath: nil,\n      errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n      topSchemaRef: schemaRef,\n      compositeRule: true,\n    },\n    valid\n  )\n  cxt.pass(valid, () => cxt.error(true))\n}\n\nexport function funcKeywordCode(cxt: KeywordCxt, def: FuncKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, $data, it} = cxt\n  checkAsyncKeyword(it, def)\n  const validate =\n    !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate\n  const validateRef = useKeyword(gen, keyword, validate)\n  const valid = gen.let(\"valid\")\n  cxt.block$data(valid, validateKeyword)\n  cxt.ok(def.valid ?? valid)\n\n  function validateKeyword(): void {\n    if (def.errors === false) {\n      assignValid()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => cxt.error())\n    } else {\n      const ruleErrs = def.async ? validateAsync() : validateSync()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => addErrs(cxt, ruleErrs))\n    }\n  }\n\n  function validateAsync(): Name {\n    const ruleErrs = gen.let(\"ruleErrs\", null)\n    gen.try(\n      () => assignValid(_`await `),\n      (e) =>\n        gen.assign(valid, false).if(\n          _`${e} instanceof ${it.ValidationError as Name}`,\n          () => gen.assign(ruleErrs, _`${e}.errors`),\n          () => gen.throw(e)\n        )\n    )\n    return ruleErrs\n  }\n\n  function validateSync(): Code {\n    const validateErrs = _`${validateRef}.errors`\n    gen.assign(validateErrs, null)\n    assignValid(nil)\n    return validateErrs\n  }\n\n  function assignValid(_await: Code = def.async ? _`await ` : nil): void {\n    const passCxt = it.opts.passContext ? N.this : N.self\n    const passSchema = !((\"compile\" in def && !$data) || def.schema === false)\n    gen.assign(\n      valid,\n      _`${_await}${callValidateCode(cxt, validateRef, passCxt, passSchema)}`,\n      def.modifying\n    )\n  }\n\n  function reportErrs(errors: () => void): void {\n    gen.if(not(def.valid ?? valid), errors)\n  }\n}\n\nfunction modifyData(cxt: KeywordCxt): void {\n  const {gen, data, it} = cxt\n  gen.if(it.parentData, () => gen.assign(data, _`${it.parentData}[${it.parentDataProperty}]`))\n}\n\nfunction addErrs(cxt: KeywordCxt, errs: Code): void {\n  const {gen} = cxt\n  gen.if(\n    _`Array.isArray(${errs})`,\n    () => {\n      gen\n        .assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`)\n        .assign(N.errors, _`${N.vErrors}.length`)\n      extendErrors(cxt)\n    },\n    () => cxt.error()\n  )\n}\n\nfunction checkAsyncKeyword({schemaEnv}: SchemaObjCxt, def: FuncKeywordDefinition): void {\n  if (def.async && !schemaEnv.$async) throw new Error(\"async keyword in sync schema\")\n}\n\nfunction useKeyword(gen: CodeGen, keyword: string, result?: KeywordCompilationResult): Name {\n  if (result === undefined) throw new Error(`keyword \"${keyword}\" failed to compile`)\n  return gen.scopeValue(\n    \"keyword\",\n    typeof result == \"function\" ? {ref: result} : {ref: result, code: stringify(result)}\n  )\n}\n\nexport function validSchemaType(\n  schema: unknown,\n  schemaType: JSONType[],\n  allowUndefined = false\n): boolean {\n  // TODO add tests\n  return (\n    !schemaType.length ||\n    schemaType.some((st) =>\n      st === \"array\"\n        ? Array.isArray(schema)\n        : st === \"object\"\n        ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n        : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")\n    )\n  )\n}\n\nexport function validateKeywordUsage(\n  {schema, opts, self, errSchemaPath}: SchemaObjCxt,\n  def: AddedKeywordDefinition,\n  keyword: string\n): void {\n  /* istanbul ignore if */\n  if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n    throw new Error(\"ajv implementation error\")\n  }\n\n  const deps = def.dependencies\n  if (deps?.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n    throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`)\n  }\n\n  if (def.validateSchema) {\n    const valid = def.validateSchema(schema[keyword])\n    if (!valid) {\n      const msg =\n        `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n        self.errorsText(def.validateSchema.errors)\n      if (opts.validateSchema === \"log\") self.logger.error(msg)\n      else throw new Error(msg)\n    }\n  }\n}\n", "import type {AnySchema} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, str, getProperty, Code, Name} from \"../codegen\"\nimport {escapeFragment, getErrorPath, Type} from \"../util\"\nimport type {JSONType} from \"../rules\"\n\nexport interface SubschemaContext {\n  // TODO use Optional? align with SchemCxt property types\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef?: Code\n  errorPath?: Code\n  dataLevel?: number\n  dataTypes?: JSONType[]\n  data?: Name\n  parentData?: Name\n  parentDataProperty?: Code | number\n  dataNames?: Name[]\n  dataPathArr?: (Code | number)[]\n  propertyName?: Name\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  compositeRule?: true\n  createErrors?: boolean\n  allErrors?: boolean\n}\n\nexport type SubschemaArgs = Partial<{\n  keyword: string\n  schemaProp: string | number\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef: Code\n  data: Name | Code\n  dataProp: Code | string | number\n  dataTypes: JSONType[]\n  definedProperties: Set<string>\n  propertyName: Name\n  dataPropType: Type\n  jtdDiscriminator: string\n  jtdMetadata: boolean\n  compositeRule: true\n  createErrors: boolean\n  allErrors: boolean\n}>\n\nexport function getSubschema(\n  it: SchemaObjCxt,\n  {keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef}: SubschemaArgs\n): SubschemaContext {\n  if (keyword !== undefined && schema !== undefined) {\n    throw new Error('both \"keyword\" and \"schema\" passed, only one allowed')\n  }\n\n  if (keyword !== undefined) {\n    const sch = it.schema[keyword]\n    return schemaProp === undefined\n      ? {\n          schema: sch,\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        }\n      : {\n          schema: sch[schemaProp],\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}${getProperty(schemaProp)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}/${escapeFragment(schemaProp)}`,\n        }\n  }\n\n  if (schema !== undefined) {\n    if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n      throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"')\n    }\n    return {\n      schema,\n      schemaPath,\n      topSchemaRef,\n      errSchemaPath,\n    }\n  }\n\n  throw new Error('either \"keyword\" or \"schema\" must be passed')\n}\n\nexport function extendSubschemaData(\n  subschema: SubschemaContext,\n  it: SchemaObjCxt,\n  {dataProp, dataPropType: dpType, data, dataTypes, propertyName}: SubschemaArgs\n): void {\n  if (data !== undefined && dataProp !== undefined) {\n    throw new Error('both \"data\" and \"dataProp\" passed, only one allowed')\n  }\n\n  const {gen} = it\n\n  if (dataProp !== undefined) {\n    const {errorPath, dataPathArr, opts} = it\n    const nextData = gen.let(\"data\", _`${it.data}${getProperty(dataProp)}`, true)\n    dataContextProps(nextData)\n    subschema.errorPath = str`${errorPath}${getErrorPath(dataProp, dpType, opts.jsPropertySyntax)}`\n    subschema.parentDataProperty = _`${dataProp}`\n    subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty]\n  }\n\n  if (data !== undefined) {\n    const nextData = data instanceof Name ? data : gen.let(\"data\", data, true) // replaceable if used once?\n    dataContextProps(nextData)\n    if (propertyName !== undefined) subschema.propertyName = propertyName\n    // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n  }\n\n  if (dataTypes) subschema.dataTypes = dataTypes\n\n  function dataContextProps(_nextData: Name): void {\n    subschema.data = _nextData\n    subschema.dataLevel = it.dataLevel + 1\n    subschema.dataTypes = []\n    it.definedProperties = new Set<string>()\n    subschema.parentData = it.data\n    subschema.dataNames = [...it.dataNames, _nextData]\n  }\n}\n\nexport function extendSubschemaMode(\n  subschema: SubschemaContext,\n  {jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors}: SubschemaArgs\n): void {\n  if (compositeRule !== undefined) subschema.compositeRule = compositeRule\n  if (createErrors !== undefined) subschema.createErrors = createErrors\n  if (allErrors !== undefined) subschema.allErrors = allErrors\n  subschema.jtdDiscriminator = jtdDiscriminator // not inherited\n  subschema.jtdMetadata = jtdMetadata // not inherited\n}\n", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n", "import type {AnySchema, AnySchemaObject, UriResolver} from \"../types\"\nimport type Ajv from \"../ajv\"\nimport type {URIComponent} from \"fast-uri\"\nimport {eachItem} from \"./util\"\nimport * as equal from \"fast-deep-equal\"\nimport * as traverse from \"json-schema-traverse\"\n\n// the hash of local references inside the schema (created by getSchemaRefs), used for inline resolution\nexport type LocalRefs = {[Ref in string]?: AnySchemaObject}\n\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\",\n  \"const\",\n])\n\nexport function inlineRef(schema: AnySchema, limit: boolean | number = true): boolean {\n  if (typeof schema == \"boolean\") return true\n  if (limit === true) return !hasRef(schema)\n  if (!limit) return false\n  return countKeys(schema) <= limit\n}\n\nconst REF_KEYWORDS = new Set([\n  \"$ref\",\n  \"$recursiveRef\",\n  \"$recursiveAnchor\",\n  \"$dynamicRef\",\n  \"$dynamicAnchor\",\n])\n\nfunction hasRef(schema: AnySchemaObject): boolean {\n  for (const key in schema) {\n    if (REF_KEYWORDS.has(key)) return true\n    const sch = schema[key]\n    if (Array.isArray(sch) && sch.some(hasRef)) return true\n    if (typeof sch == \"object\" && hasRef(sch)) return true\n  }\n  return false\n}\n\nfunction countKeys(schema: AnySchemaObject): number {\n  let count = 0\n  for (const key in schema) {\n    if (key === \"$ref\") return Infinity\n    count++\n    if (SIMPLE_INLINED.has(key)) continue\n    if (typeof schema[key] == \"object\") {\n      eachItem(schema[key], (sch) => (count += countKeys(sch)))\n    }\n    if (count === Infinity) return Infinity\n  }\n  return count\n}\n\nexport function getFullPath(resolver: UriResolver, id = \"\", normalize?: boolean): string {\n  if (normalize !== false) id = normalizeId(id)\n  const p = resolver.parse(id)\n  return _getFullPath(resolver, p)\n}\n\nexport function _getFullPath(resolver: UriResolver, p: URIComponent): string {\n  const serialized = resolver.serialize(p)\n  return serialized.split(\"#\")[0] + \"#\"\n}\n\nconst TRAILING_SLASH_HASH = /#\\/?$/\nexport function normalizeId(id: string | undefined): string {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\"\n}\n\nexport function resolveUrl(resolver: UriResolver, baseId: string, id: string): string {\n  id = normalizeId(id)\n  return resolver.resolve(baseId, id)\n}\n\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i\n\nexport function getSchemaRefs(this: Ajv, schema: AnySchema, baseId: string): LocalRefs {\n  if (typeof schema == \"boolean\") return {}\n  const {schemaId, uriResolver} = this.opts\n  const schId = normalizeId(schema[schemaId] || baseId)\n  const baseIds: {[JsonPtr in string]?: string} = {\"\": schId}\n  const pathPrefix = getFullPath(uriResolver, schId, false)\n  const localRefs: LocalRefs = {}\n  const schemaRefs: Set<string> = new Set()\n\n  traverse(schema, {allKeys: true}, (sch, jsonPtr, _, parentJsonPtr) => {\n    if (parentJsonPtr === undefined) return\n    const fullPath = pathPrefix + jsonPtr\n    let innerBaseId = baseIds[parentJsonPtr]\n    if (typeof sch[schemaId] == \"string\") innerBaseId = addRef.call(this, sch[schemaId])\n    addAnchor.call(this, sch.$anchor)\n    addAnchor.call(this, sch.$dynamicAnchor)\n    baseIds[jsonPtr] = innerBaseId\n\n    function addRef(this: Ajv, ref: string): string {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const _resolve = this.opts.uriResolver.resolve\n      ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref)\n      if (schemaRefs.has(ref)) throw ambiguos(ref)\n      schemaRefs.add(ref)\n      let schOrRef = this.refs[ref]\n      if (typeof schOrRef == \"string\") schOrRef = this.refs[schOrRef]\n      if (typeof schOrRef == \"object\") {\n        checkAmbiguosRef(sch, schOrRef.schema, ref)\n      } else if (ref !== normalizeId(fullPath)) {\n        if (ref[0] === \"#\") {\n          checkAmbiguosRef(sch, localRefs[ref], ref)\n          localRefs[ref] = sch\n        } else {\n          this.refs[ref] = fullPath\n        }\n      }\n      return ref\n    }\n\n    function addAnchor(this: Ajv, anchor: unknown): void {\n      if (typeof anchor == \"string\") {\n        if (!ANCHOR.test(anchor)) throw new Error(`invalid anchor \"${anchor}\"`)\n        addRef.call(this, `#${anchor}`)\n      }\n    }\n  })\n\n  return localRefs\n\n  function checkAmbiguosRef(sch1: AnySchema, sch2: AnySchema | undefined, ref: string): void {\n    if (sch2 !== undefined && !equal(sch1, sch2)) throw ambiguos(ref)\n  }\n\n  function ambiguos(ref: string): Error {\n    return new Error(`reference \"${ref}\" resolves to more than one schema`)\n  }\n}\n", "import type {\n  AddedKeywordDefinition,\n  AnySchema,\n  AnySchemaObject,\n  KeywordErrorCxt,\n  KeywordCxtParams,\n} from \"../../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \"..\"\nimport type {InstanceOptions} from \"../../core\"\nimport {boolOrEmptySchema, topBoolOrEmptySchema} from \"./boolSchema\"\nimport {coerceAndCheckDataType, getSchemaTypes} from \"./dataType\"\nimport {shouldUseGroup, shouldUseRule} from \"./applicability\"\nimport {checkDataType, checkDataTypes, reportTypeError, DataType} from \"./dataType\"\nimport {assignDefaults} from \"./defaults\"\nimport {funcKeywordCode, macroKeywordCode, validateKeywordUsage, validSchemaType} from \"./keyword\"\nimport {getSubschema, extendSubschemaData, SubschemaArgs, extendSubschemaMode} from \"./subschema\"\nimport {_, nil, str, or, not, getProperty, Block, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport {resolveUrl} from \"../resolve\"\nimport {\n  schemaRefOrVal,\n  schemaHasRulesButRef,\n  checkUnknownRules,\n  checkStrictMode,\n  unescapeJsonPointer,\n  mergeEvaluated,\n} from \"../util\"\nimport type {JSONType, Rule, RuleGroup} from \"../rules\"\nimport {\n  ErrorPaths,\n  reportError,\n  reportExtraError,\n  resetErrorsCount,\n  keyword$DataError,\n} from \"../errors\"\n\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nexport function validateFunctionCode(it: SchemaCxt): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      topSchemaObjCode(it)\n      return\n    }\n  }\n  validateFunction(it, () => topBoolOrEmptySchema(it))\n}\n\nfunction validateFunction(\n  {gen, validateName, schema, schemaEnv, opts}: SchemaCxt,\n  body: Block\n): void {\n  if (opts.code.es5) {\n    gen.func(validateName, _`${N.data}, ${N.valCxt}`, schemaEnv.$async, () => {\n      gen.code(_`\"use strict\"; ${funcSourceUrl(schema, opts)}`)\n      destructureValCxtES5(gen, opts)\n      gen.code(body)\n    })\n  } else {\n    gen.func(validateName, _`${N.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () =>\n      gen.code(funcSourceUrl(schema, opts)).code(body)\n    )\n  }\n}\n\nfunction destructureValCxt(opts: InstanceOptions): Code {\n  return _`{${N.instancePath}=\"\", ${N.parentData}, ${N.parentDataProperty}, ${N.rootData}=${\n    N.data\n  }${opts.dynamicRef ? _`, ${N.dynamicAnchors}={}` : nil}}={}`\n}\n\nfunction destructureValCxtES5(gen: CodeGen, opts: InstanceOptions): void {\n  gen.if(\n    N.valCxt,\n    () => {\n      gen.var(N.instancePath, _`${N.valCxt}.${N.instancePath}`)\n      gen.var(N.parentData, _`${N.valCxt}.${N.parentData}`)\n      gen.var(N.parentDataProperty, _`${N.valCxt}.${N.parentDataProperty}`)\n      gen.var(N.rootData, _`${N.valCxt}.${N.rootData}`)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`${N.valCxt}.${N.dynamicAnchors}`)\n    },\n    () => {\n      gen.var(N.instancePath, _`\"\"`)\n      gen.var(N.parentData, _`undefined`)\n      gen.var(N.parentDataProperty, _`undefined`)\n      gen.var(N.rootData, N.data)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`{}`)\n    }\n  )\n}\n\nfunction topSchemaObjCode(it: SchemaObjCxt): void {\n  const {schema, opts, gen} = it\n  validateFunction(it, () => {\n    if (opts.$comment && schema.$comment) commentKeyword(it)\n    checkNoDefault(it)\n    gen.let(N.vErrors, null)\n    gen.let(N.errors, 0)\n    if (opts.unevaluated) resetEvaluated(it)\n    typeAndKeywords(it)\n    returnResults(it)\n  })\n  return\n}\n\nfunction resetEvaluated(it: SchemaObjCxt): void {\n  // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n  const {gen, validateName} = it\n  it.evaluated = gen.const(\"evaluated\", _`${validateName}.evaluated`)\n  gen.if(_`${it.evaluated}.dynamicProps`, () => gen.assign(_`${it.evaluated}.props`, _`undefined`))\n  gen.if(_`${it.evaluated}.dynamicItems`, () => gen.assign(_`${it.evaluated}.items`, _`undefined`))\n}\n\nfunction funcSourceUrl(schema: AnySchema, opts: InstanceOptions): Code {\n  const schId = typeof schema == \"object\" && schema[opts.schemaId]\n  return schId && (opts.code.source || opts.code.process) ? _`/*# sourceURL=${schId} */` : nil\n}\n\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it: SchemaCxt, valid: Name): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      subSchemaObjCode(it, valid)\n      return\n    }\n  }\n  boolOrEmptySchema(it, valid)\n}\n\nfunction schemaCxtHasRules({schema, self}: SchemaCxt): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (self.RULES.all[key]) return true\n  return false\n}\n\nfunction isSchemaObj(it: SchemaCxt): it is SchemaObjCxt {\n  return typeof it.schema != \"boolean\"\n}\n\nfunction subSchemaObjCode(it: SchemaObjCxt, valid: Name): void {\n  const {schema, gen, opts} = it\n  if (opts.$comment && schema.$comment) commentKeyword(it)\n  updateContext(it)\n  checkAsyncSchema(it)\n  const errsCount = gen.const(\"_errs\", N.errors)\n  typeAndKeywords(it, errsCount)\n  // TODO var\n  gen.var(valid, _`${errsCount} === ${N.errors}`)\n}\n\nfunction checkKeywords(it: SchemaObjCxt): void {\n  checkUnknownRules(it)\n  checkRefsAndKeywords(it)\n}\n\nfunction typeAndKeywords(it: SchemaObjCxt, errsCount?: Name): void {\n  if (it.opts.jtd) return schemaKeywords(it, [], false, errsCount)\n  const types = getSchemaTypes(it.schema)\n  const checkedTypes = coerceAndCheckDataType(it, types)\n  schemaKeywords(it, types, !checkedTypes, errsCount)\n}\n\nfunction checkRefsAndKeywords(it: SchemaObjCxt): void {\n  const {schema, errSchemaPath, opts, self} = it\n  if (schema.$ref && opts.ignoreKeywordsWithRef && schemaHasRulesButRef(schema, self.RULES)) {\n    self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`)\n  }\n}\n\nfunction checkNoDefault(it: SchemaObjCxt): void {\n  const {schema, opts} = it\n  if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n    checkStrictMode(it, \"default is ignored in the schema root\")\n  }\n}\n\nfunction updateContext(it: SchemaObjCxt): void {\n  const schId = it.schema[it.opts.schemaId]\n  if (schId) it.baseId = resolveUrl(it.opts.uriResolver, it.baseId, schId)\n}\n\nfunction checkAsyncSchema(it: SchemaObjCxt): void {\n  if (it.schema.$async && !it.schemaEnv.$async) throw new Error(\"async schema in sync schema\")\n}\n\nfunction commentKeyword({gen, schemaEnv, schema, errSchemaPath, opts}: SchemaObjCxt): void {\n  const msg = schema.$comment\n  if (opts.$comment === true) {\n    gen.code(_`${N.self}.logger.log(${msg})`)\n  } else if (typeof opts.$comment == \"function\") {\n    const schemaPath = str`${errSchemaPath}/$comment`\n    const rootName = gen.scopeValue(\"root\", {ref: schemaEnv.root})\n    gen.code(_`${N.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`)\n  }\n}\n\nfunction returnResults(it: SchemaCxt): void {\n  const {gen, schemaEnv, validateName, ValidationError, opts} = it\n  if (schemaEnv.$async) {\n    // TODO assign unevaluated\n    gen.if(\n      _`${N.errors} === 0`,\n      () => gen.return(N.data),\n      () => gen.throw(_`new ${ValidationError as Name}(${N.vErrors})`)\n    )\n  } else {\n    gen.assign(_`${validateName}.errors`, N.vErrors)\n    if (opts.unevaluated) assignEvaluated(it)\n    gen.return(_`${N.errors} === 0`)\n  }\n}\n\nfunction assignEvaluated({gen, evaluated, props, items}: SchemaCxt): void {\n  if (props instanceof Name) gen.assign(_`${evaluated}.props`, props)\n  if (items instanceof Name) gen.assign(_`${evaluated}.items`, items)\n}\n\nfunction schemaKeywords(\n  it: SchemaObjCxt,\n  types: JSONType[],\n  typeErrors: boolean,\n  errsCount?: Name\n): void {\n  const {gen, schema, data, allErrors, opts, self} = it\n  const {RULES} = self\n  if (schema.$ref && (opts.ignoreKeywordsWithRef || !schemaHasRulesButRef(schema, RULES))) {\n    gen.block(() => keywordCode(it, \"$ref\", (RULES.all.$ref as Rule).definition)) // TODO typecast\n    return\n  }\n  if (!opts.jtd) checkStrictTypes(it, types)\n  gen.block(() => {\n    for (const group of RULES.rules) groupKeywords(group)\n    groupKeywords(RULES.post)\n  })\n\n  function groupKeywords(group: RuleGroup): void {\n    if (!shouldUseGroup(schema, group)) return\n    if (group.type) {\n      gen.if(checkDataType(group.type, data, opts.strictNumbers))\n      iterateKeywords(it, group)\n      if (types.length === 1 && types[0] === group.type && typeErrors) {\n        gen.else()\n        reportTypeError(it)\n      }\n      gen.endIf()\n    } else {\n      iterateKeywords(it, group)\n    }\n    // TODO make it \"ok\" call?\n    if (!allErrors) gen.if(_`${N.errors} === ${errsCount || 0}`)\n  }\n}\n\nfunction iterateKeywords(it: SchemaObjCxt, group: RuleGroup): void {\n  const {\n    gen,\n    schema,\n    opts: {useDefaults},\n  } = it\n  if (useDefaults) assignDefaults(it, group.type)\n  gen.block(() => {\n    for (const rule of group.rules) {\n      if (shouldUseRule(schema, rule)) {\n        keywordCode(it, rule.keyword, rule.definition, group.type)\n      }\n    }\n  })\n}\n\nfunction checkStrictTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (it.schemaEnv.meta || !it.opts.strictTypes) return\n  checkContextTypes(it, types)\n  if (!it.opts.allowUnionTypes) checkMultipleTypes(it, types)\n  checkKeywordTypes(it, it.dataTypes)\n}\n\nfunction checkContextTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (!types.length) return\n  if (!it.dataTypes.length) {\n    it.dataTypes = types\n    return\n  }\n  types.forEach((t) => {\n    if (!includesType(it.dataTypes, t)) {\n      strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`)\n    }\n  })\n  narrowSchemaTypes(it, types)\n}\n\nfunction checkMultipleTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n    strictTypesError(it, \"use allowUnionTypes to allow union type keyword\")\n  }\n}\n\nfunction checkKeywordTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  const rules = it.self.RULES.all\n  for (const keyword in rules) {\n    const rule = rules[keyword]\n    if (typeof rule == \"object\" && shouldUseRule(it.schema, rule)) {\n      const {type} = rule.definition\n      if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n        strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`)\n      }\n    }\n  }\n}\n\nfunction hasApplicableType(schTs: JSONType[], kwdT: JSONType): boolean {\n  return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"))\n}\n\nfunction includesType(ts: JSONType[], t: JSONType): boolean {\n  return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"))\n}\n\nfunction narrowSchemaTypes(it: SchemaObjCxt, withTypes: JSONType[]): void {\n  const ts: JSONType[] = []\n  for (const t of it.dataTypes) {\n    if (includesType(withTypes, t)) ts.push(t)\n    else if (withTypes.includes(\"integer\") && t === \"number\") ts.push(\"integer\")\n  }\n  it.dataTypes = ts\n}\n\nfunction strictTypesError(it: SchemaObjCxt, msg: string): void {\n  const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n  msg += ` at \"${schemaPath}\" (strictTypes)`\n  checkStrictMode(it, msg, it.opts.strictTypes)\n}\n\nexport class KeywordCxt implements KeywordErrorCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean\n  readonly keyword: string\n  readonly data: Name // Name referencing the current level of the data instance\n  readonly $data?: string | false\n  schema: any // keyword value in the schema\n  readonly schemaValue: Code | number | boolean // Code reference to keyword schema value or primitive value\n  readonly schemaCode: Code | number | boolean // Code reference to resolved schema value (different if schema is $data)\n  readonly schemaType: JSONType[] // allowed type(s) of keyword value in the schema\n  readonly parentSchema: AnySchemaObject\n  readonly errsCount?: Name // Name reference to the number of validation errors collected before this keyword,\n  // requires option trackErrors in keyword definition\n  params: KeywordCxtParams // object to pass parameters to error messages from keyword code\n  readonly it: SchemaObjCxt // schema compilation context (schema is guaranteed to be an object, not boolean)\n  readonly def: AddedKeywordDefinition\n\n  constructor(it: SchemaObjCxt, def: AddedKeywordDefinition, keyword: string) {\n    validateKeywordUsage(it, def, keyword)\n    this.gen = it.gen\n    this.allErrors = it.allErrors\n    this.keyword = keyword\n    this.data = it.data\n    this.schema = it.schema[keyword]\n    this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data\n    this.schemaValue = schemaRefOrVal(it, this.schema, keyword, this.$data)\n    this.schemaType = def.schemaType\n    this.parentSchema = it.schema\n    this.params = {}\n    this.it = it\n    this.def = def\n\n    if (this.$data) {\n      this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it))\n    } else {\n      this.schemaCode = this.schemaValue\n      if (!validSchemaType(this.schema, def.schemaType, def.allowUndefined)) {\n        throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`)\n      }\n    }\n\n    if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n      this.errsCount = it.gen.const(\"_errs\", N.errors)\n    }\n  }\n\n  result(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.failResult(not(condition), successAction, failAction)\n  }\n\n  failResult(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.gen.if(condition)\n    if (failAction) failAction()\n    else this.error()\n    if (successAction) {\n      this.gen.else()\n      successAction()\n      if (this.allErrors) this.gen.endIf()\n    } else {\n      if (this.allErrors) this.gen.endIf()\n      else this.gen.else()\n    }\n  }\n\n  pass(condition: Code, failAction?: () => void): void {\n    this.failResult(not(condition), undefined, failAction)\n  }\n\n  fail(condition?: Code): void {\n    if (condition === undefined) {\n      this.error()\n      if (!this.allErrors) this.gen.if(false) // this branch will be removed by gen.optimize\n      return\n    }\n    this.gen.if(condition)\n    this.error()\n    if (this.allErrors) this.gen.endIf()\n    else this.gen.else()\n  }\n\n  fail$data(condition: Code): void {\n    if (!this.$data) return this.fail(condition)\n    const {schemaCode} = this\n    this.fail(_`${schemaCode} !== undefined && (${or(this.invalid$data(), condition)})`)\n  }\n\n  error(append?: boolean, errorParams?: KeywordCxtParams, errorPaths?: ErrorPaths): void {\n    if (errorParams) {\n      this.setParams(errorParams)\n      this._error(append, errorPaths)\n      this.setParams({})\n      return\n    }\n    this._error(append, errorPaths)\n  }\n\n  private _error(append?: boolean, errorPaths?: ErrorPaths): void {\n    ;(append ? reportExtraError : reportError)(this, this.def.error, errorPaths)\n  }\n\n  $dataError(): void {\n    reportError(this, this.def.$dataError || keyword$DataError)\n  }\n\n  reset(): void {\n    if (this.errsCount === undefined) throw new Error('add \"trackErrors\" to keyword definition')\n    resetErrorsCount(this.gen, this.errsCount)\n  }\n\n  ok(cond: Code | boolean): void {\n    if (!this.allErrors) this.gen.if(cond)\n  }\n\n  setParams(obj: KeywordCxtParams, assign?: true): void {\n    if (assign) Object.assign(this.params, obj)\n    else this.params = obj\n  }\n\n  block$data(valid: Name, codeBlock: () => void, $dataValid: Code = nil): void {\n    this.gen.block(() => {\n      this.check$data(valid, $dataValid)\n      codeBlock()\n    })\n  }\n\n  check$data(valid: Name = nil, $dataValid: Code = nil): void {\n    if (!this.$data) return\n    const {gen, schemaCode, schemaType, def} = this\n    gen.if(or(_`${schemaCode} === undefined`, $dataValid))\n    if (valid !== nil) gen.assign(valid, true)\n    if (schemaType.length || def.validateSchema) {\n      gen.elseIf(this.invalid$data())\n      this.$dataError()\n      if (valid !== nil) gen.assign(valid, false)\n    }\n    gen.else()\n  }\n\n  invalid$data(): Code {\n    const {gen, schemaCode, schemaType, def, it} = this\n    return or(wrong$DataType(), invalid$DataSchema())\n\n    function wrong$DataType(): Code {\n      if (schemaType.length) {\n        /* istanbul ignore if */\n        if (!(schemaCode instanceof Name)) throw new Error(\"ajv implementation error\")\n        const st = Array.isArray(schemaType) ? schemaType : [schemaType]\n        return _`${checkDataTypes(st, schemaCode, it.opts.strictNumbers, DataType.Wrong)}`\n      }\n      return nil\n    }\n\n    function invalid$DataSchema(): Code {\n      if (def.validateSchema) {\n        const validateSchemaRef = gen.scopeValue(\"validate$data\", {ref: def.validateSchema}) // TODO value.code for standalone\n        return _`!${validateSchemaRef}(${schemaCode})`\n      }\n      return nil\n    }\n  }\n\n  subschema(appl: SubschemaArgs, valid: Name): SchemaCxt {\n    const subschema = getSubschema(this.it, appl)\n    extendSubschemaData(subschema, this.it, appl)\n    extendSubschemaMode(subschema, appl)\n    const nextContext = {...this.it, ...subschema, items: undefined, props: undefined}\n    subschemaCode(nextContext, valid)\n    return nextContext\n  }\n\n  mergeEvaluated(schemaCxt: SchemaCxt, toName?: typeof Name): void {\n    const {it, gen} = this\n    if (!it.opts.unevaluated) return\n    if (it.props !== true && schemaCxt.props !== undefined) {\n      it.props = mergeEvaluated.props(gen, schemaCxt.props, it.props, toName)\n    }\n    if (it.items !== true && schemaCxt.items !== undefined) {\n      it.items = mergeEvaluated.items(gen, schemaCxt.items, it.items, toName)\n    }\n  }\n\n  mergeValidEvaluated(schemaCxt: SchemaCxt, valid: Name): boolean | void {\n    const {it, gen} = this\n    if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n      gen.if(valid, () => this.mergeEvaluated(schemaCxt, Name))\n      return true\n    }\n  }\n}\n\nfunction keywordCode(\n  it: SchemaObjCxt,\n  keyword: string,\n  def: AddedKeywordDefinition,\n  ruleType?: JSONType\n): void {\n  const cxt = new KeywordCxt(it, def, keyword)\n  if (\"code\" in def) {\n    def.code(cxt, ruleType)\n  } else if (cxt.$data && def.validate) {\n    funcKeywordCode(cxt, def)\n  } else if (\"macro\" in def) {\n    macroKeywordCode(cxt, def)\n  } else if (def.compile || def.validate) {\n    funcKeywordCode(cxt, def)\n  }\n}\n\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/\nexport function getData(\n  $data: string,\n  {dataLevel, dataNames, dataPathArr}: SchemaCxt\n): Code | number {\n  let jsonPointer\n  let data: Code\n  if ($data === \"\") return N.rootData\n  if ($data[0] === \"/\") {\n    if (!JSON_POINTER.test($data)) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    jsonPointer = $data\n    data = N.rootData\n  } else {\n    const matches = RELATIVE_JSON_POINTER.exec($data)\n    if (!matches) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    const up: number = +matches[1]\n    jsonPointer = matches[2]\n    if (jsonPointer === \"#\") {\n      if (up >= dataLevel) throw new Error(errorMsg(\"property/index\", up))\n      return dataPathArr[dataLevel - up]\n    }\n    if (up > dataLevel) throw new Error(errorMsg(\"data\", up))\n    data = dataNames[dataLevel - up]\n    if (!jsonPointer) return data\n  }\n\n  let expr = data\n  const segments = jsonPointer.split(\"/\")\n  for (const segment of segments) {\n    if (segment) {\n      data = _`${data}${getProperty(unescapeJsonPointer(segment))}`\n      expr = _`${expr} && ${data}`\n    }\n  }\n  return expr\n\n  function errorMsg(pointerType: string, up: number): string {\n    return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`\n  }\n}\n", "import type {ErrorObject} from \"../types\"\n\nexport default class ValidationError extends Error {\n  readonly errors: Partial<ErrorObject>[]\n  readonly ajv: true\n  readonly validation: true\n\n  constructor(errors: Partial<ErrorObject>[]) {\n    super(\"validation failed\")\n    this.errors = errors\n    this.ajv = this.validation = true\n  }\n}\n", "import {resolveUrl, normalizeId, getFullPath} from \"./resolve\"\nimport type {UriResolver} from \"../types\"\n\nexport default class MissingRefError extends Error {\n  readonly missingRef: string\n  readonly missingSchema: string\n\n  constructor(resolver: UriResolver, baseId: string, ref: string, msg?: string) {\n    super(msg || `can't resolve reference ${ref} from id ${baseId}`)\n    this.missingRef = resolveUrl(resolver, baseId, ref)\n    this.missingSchema = normalizeId(getFullPath(resolver, this.missingRef))\n  }\n}\n", "import type {\n  AnySchema,\n  AnySchemaObject,\n  AnyValidateFunction,\n  AsyncValidateFunction,\n  EvaluatedProperties,\n  EvaluatedItems,\n} from \"../types\"\nimport type Ajv from \"../core\"\nimport type {InstanceOptions} from \"../core\"\nimport {CodeGen, _, nil, stringify, Name, Code, ValueScopeName} from \"./codegen\"\nimport ValidationError from \"../runtime/validation_error\"\nimport N from \"./names\"\nimport {LocalRefs, getFullPath, _getFullPath, inlineRef, normalizeId, resolveUrl} from \"./resolve\"\nimport {schemaHasRulesButRef, unescapeFragment} from \"./util\"\nimport {validateFunctionCode} from \"./validate\"\nimport {URIComponent} from \"fast-uri\"\nimport {JSONType} from \"./rules\"\n\nexport type SchemaRefs = {\n  [Ref in string]?: SchemaEnv | AnySchema\n}\n\nexport interface SchemaCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean // validation mode - whether to collect all errors or break on error\n  readonly data: Name // Name with reference to the current part of data instance\n  readonly parentData: Name // should be used in keywords modifying data\n  readonly parentDataProperty: Code | number // should be used in keywords modifying data\n  readonly dataNames: Name[]\n  readonly dataPathArr: (Code | number)[]\n  readonly dataLevel: number // the level of the currently validated data,\n  // it can be used to access both the property names and the data on all levels from the top.\n  dataTypes: JSONType[] // data types applied to the current part of data instance\n  definedProperties: Set<string> // set of properties to keep track of for required checks\n  readonly topSchemaRef: Code\n  readonly validateName: Name\n  evaluated?: Name\n  readonly ValidationError?: Name\n  readonly schema: AnySchema // current schema object - equal to parentSchema passed via KeywordCxt\n  readonly schemaEnv: SchemaEnv\n  readonly rootId: string\n  baseId: string // the current schema base URI that should be used as the base for resolving URIs in references (\\$ref)\n  readonly schemaPath: Code // the run-time expression that evaluates to the property name of the current schema\n  readonly errSchemaPath: string // this is actual string, should not be changed to Code\n  readonly errorPath: Code\n  readonly propertyName?: Name\n  readonly compositeRule?: boolean // true indicates that the current schema is inside the compound keyword,\n  // where failing some rule doesn't mean validation failure (`anyOf`, `oneOf`, `not`, `if`).\n  // This flag is used to determine whether you can return validation result immediately after any error in case the option `allErrors` is not `true.\n  // You only need to use it if you have many steps in your keywords and potentially can define multiple errors.\n  props?: EvaluatedProperties | Name // properties evaluated by this schema - used by parent schema or assigned to validation function\n  items?: EvaluatedItems | Name // last item evaluated by this schema - used by parent schema or assigned to validation function\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  readonly createErrors?: boolean\n  readonly opts: InstanceOptions // Ajv instance option.\n  readonly self: Ajv // current Ajv instance\n}\n\nexport interface SchemaObjCxt extends SchemaCxt {\n  readonly schema: AnySchemaObject\n}\ninterface SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root?: SchemaEnv\n  readonly baseId?: string\n  readonly schemaPath?: string\n  readonly localRefs?: LocalRefs\n  readonly meta?: boolean\n}\n\nexport class SchemaEnv implements SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root: SchemaEnv\n  baseId: string // TODO possibly, it should be readonly\n  schemaPath?: string\n  localRefs?: LocalRefs\n  readonly meta?: boolean\n  readonly $async?: boolean // true if the current schema is asynchronous.\n  readonly refs: SchemaRefs = {}\n  readonly dynamicAnchors: {[Ref in string]?: true} = {}\n  validate?: AnyValidateFunction\n  validateName?: ValueScopeName\n  serialize?: (data: unknown) => string\n  serializeName?: ValueScopeName\n  parse?: (data: string) => unknown\n  parseName?: ValueScopeName\n\n  constructor(env: SchemaEnvArgs) {\n    let schema: AnySchemaObject | undefined\n    if (typeof env.schema == \"object\") schema = env.schema\n    this.schema = env.schema\n    this.schemaId = env.schemaId\n    this.root = env.root || this\n    this.baseId = env.baseId ?? normalizeId(schema?.[env.schemaId || \"$id\"])\n    this.schemaPath = env.schemaPath\n    this.localRefs = env.localRefs\n    this.meta = env.meta\n    this.$async = schema?.$async\n    this.refs = {}\n  }\n}\n\n// let codeSize = 0\n// let nodeCount = 0\n\n// Compiles schema in SchemaEnv\nexport function compileSchema(this: Ajv, sch: SchemaEnv): SchemaEnv {\n  // TODO refactor - remove compilations\n  const _sch = getCompilingSchema.call(this, sch)\n  if (_sch) return _sch\n  const rootId = getFullPath(this.opts.uriResolver, sch.root.baseId) // TODO if getFullPath removed 1 tests fails\n  const {es5, lines} = this.opts.code\n  const {ownProperties} = this.opts\n  const gen = new CodeGen(this.scope, {es5, lines, ownProperties})\n  let _ValidationError\n  if (sch.$async) {\n    _ValidationError = gen.scopeValue(\"Error\", {\n      ref: ValidationError,\n      code: _`require(\"ajv/dist/runtime/validation_error\").default`,\n    })\n  }\n\n  const validateName = gen.scopeName(\"validate\")\n  sch.validateName = validateName\n\n  const schemaCxt: SchemaCxt = {\n    gen,\n    allErrors: this.opts.allErrors,\n    data: N.data,\n    parentData: N.parentData,\n    parentDataProperty: N.parentDataProperty,\n    dataNames: [N.data],\n    dataPathArr: [nil], // TODO can its length be used as dataLevel if nil is removed?\n    dataLevel: 0,\n    dataTypes: [],\n    definedProperties: new Set<string>(),\n    topSchemaRef: gen.scopeValue(\n      \"schema\",\n      this.opts.code.source === true\n        ? {ref: sch.schema, code: stringify(sch.schema)}\n        : {ref: sch.schema}\n    ),\n    validateName,\n    ValidationError: _ValidationError,\n    schema: sch.schema,\n    schemaEnv: sch,\n    rootId,\n    baseId: sch.baseId || rootId,\n    schemaPath: nil,\n    errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n    errorPath: _`\"\"`,\n    opts: this.opts,\n    self: this,\n  }\n\n  let sourceCode: string | undefined\n  try {\n    this._compilations.add(sch)\n    validateFunctionCode(schemaCxt)\n    gen.optimize(this.opts.code.optimize)\n    // gen.optimize(1)\n    const validateCode = gen.toString()\n    sourceCode = `${gen.scopeRefs(N.scope)}return ${validateCode}`\n    // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n    if (this.opts.code.process) sourceCode = this.opts.code.process(sourceCode, sch)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n    const makeValidate = new Function(`${N.self}`, `${N.scope}`, sourceCode)\n    const validate: AnyValidateFunction = makeValidate(this, this.scope.get())\n    this.scope.value(validateName, {ref: validate})\n\n    validate.errors = null\n    validate.schema = sch.schema\n    validate.schemaEnv = sch\n    if (sch.$async) (validate as AsyncValidateFunction).$async = true\n    if (this.opts.code.source === true) {\n      validate.source = {validateName, validateCode, scopeValues: gen._values}\n    }\n    if (this.opts.unevaluated) {\n      const {props, items} = schemaCxt\n      validate.evaluated = {\n        props: props instanceof Name ? undefined : props,\n        items: items instanceof Name ? undefined : items,\n        dynamicProps: props instanceof Name,\n        dynamicItems: items instanceof Name,\n      }\n      if (validate.source) validate.source.evaluated = stringify(validate.evaluated)\n    }\n    sch.validate = validate\n    return sch\n  } catch (e) {\n    delete sch.validate\n    delete sch.validateName\n    if (sourceCode) this.logger.error(\"Error compiling schema, function code:\", sourceCode)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n    throw e\n  } finally {\n    this._compilations.delete(sch)\n  }\n}\n\nexport function resolveRef(\n  this: Ajv,\n  root: SchemaEnv,\n  baseId: string,\n  ref: string\n): AnySchema | SchemaEnv | undefined {\n  ref = resolveUrl(this.opts.uriResolver, baseId, ref)\n  const schOrFunc = root.refs[ref]\n  if (schOrFunc) return schOrFunc\n\n  let _sch = resolve.call(this, root, ref)\n  if (_sch === undefined) {\n    const schema = root.localRefs?.[ref] // TODO maybe localRefs should hold SchemaEnv\n    const {schemaId} = this.opts\n    if (schema) _sch = new SchemaEnv({schema, schemaId, root, baseId})\n  }\n\n  if (_sch === undefined) return\n  return (root.refs[ref] = inlineOrCompile.call(this, _sch))\n}\n\nfunction inlineOrCompile(this: Ajv, sch: SchemaEnv): AnySchema | SchemaEnv {\n  if (inlineRef(sch.schema, this.opts.inlineRefs)) return sch.schema\n  return sch.validate ? sch : compileSchema.call(this, sch)\n}\n\n// Index of schema compilation in the currently compiled list\nexport function getCompilingSchema(this: Ajv, schEnv: SchemaEnv): SchemaEnv | void {\n  for (const sch of this._compilations) {\n    if (sameSchemaEnv(sch, schEnv)) return sch\n  }\n}\n\nfunction sameSchemaEnv(s1: SchemaEnv, s2: SchemaEnv): boolean {\n  return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId\n}\n\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(\n  this: Ajv,\n  root: SchemaEnv, // information about the root schema for the current schema\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  let sch\n  while (typeof (sch = this.refs[ref]) == \"string\") ref = sch\n  return sch || this.schemas[ref] || resolveSchema.call(this, root, ref)\n}\n\n// Resolve schema, its root and baseId\nexport function resolveSchema(\n  this: Ajv,\n  root: SchemaEnv, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  const p = this.opts.uriResolver.parse(ref)\n  const refPath = _getFullPath(this.opts.uriResolver, p)\n  let baseId = getFullPath(this.opts.uriResolver, root.baseId, undefined)\n  // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n  if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n    return getJsonPointer.call(this, p, root)\n  }\n\n  const id = normalizeId(refPath)\n  const schOrRef = this.refs[id] || this.schemas[id]\n  if (typeof schOrRef == \"string\") {\n    const sch = resolveSchema.call(this, root, schOrRef)\n    if (typeof sch?.schema !== \"object\") return\n    return getJsonPointer.call(this, p, sch)\n  }\n\n  if (typeof schOrRef?.schema !== \"object\") return\n  if (!schOrRef.validate) compileSchema.call(this, schOrRef)\n  if (id === normalizeId(ref)) {\n    const {schema} = schOrRef\n    const {schemaId} = this.opts\n    const schId = schema[schemaId]\n    if (schId) baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    return new SchemaEnv({schema, schemaId, root, baseId})\n  }\n  return getJsonPointer.call(this, p, schOrRef)\n}\n\nconst PREVENT_SCOPE_CHANGE = new Set([\n  \"properties\",\n  \"patternProperties\",\n  \"enum\",\n  \"dependencies\",\n  \"definitions\",\n])\n\nfunction getJsonPointer(\n  this: Ajv,\n  parsedRef: URIComponent,\n  {baseId, schema, root}: SchemaEnv\n): SchemaEnv | undefined {\n  if (parsedRef.fragment?.[0] !== \"/\") return\n  for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n    if (typeof schema === \"boolean\") return\n    const partSchema = schema[unescapeFragment(part)]\n    if (partSchema === undefined) return\n    schema = partSchema\n    // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n    const schId = typeof schema === \"object\" && schema[this.opts.schemaId]\n    if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n      baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    }\n  }\n  let env: SchemaEnv | undefined\n  if (typeof schema != \"boolean\" && schema.$ref && !schemaHasRulesButRef(schema, this.RULES)) {\n    const $ref = resolveUrl(this.opts.uriResolver, baseId, schema.$ref)\n    env = resolveSchema.call(this, root, $ref)\n  }\n  // even though resolution failed we need to return SchemaEnv to throw exception\n  // so that compileAsync loads missing schema.\n  const {schemaId} = this.opts\n  env = env || new SchemaEnv({schema, schemaId, root, baseId})\n  if (env.schema !== env.root.schema) return env\n  return undefined\n}\n", "{\n  \"$id\": \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n  \"description\": \"Meta-schema for $data reference (JSON AnySchema extension proposal)\",\n  \"type\": \"object\",\n  \"required\": [\"$data\"],\n  \"properties\": {\n    \"$data\": {\n      \"type\": \"string\",\n      \"anyOf\": [{\"format\": \"relative-json-pointer\"}, {\"format\": \"json-pointer\"}]\n    }\n  },\n  \"additionalProperties\": false\n}\n", "'use strict'\n\n/** @type {(value: string) => boolean} */\nconst isUUID = RegExp.prototype.test.bind(/^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/iu)\n\n/** @type {(value: string) => boolean} */\nconst isIPv4 = RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d{2}|[1-9]\\d|\\d)$/u)\n\n/**\n * @param {Array<string>} input\n * @returns {string}\n */\nfunction stringArrayToHexStripped (input) {\n  let acc = ''\n  let code = 0\n  let i = 0\n\n  for (i = 0; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (code === 48) {\n      continue\n    }\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n    break\n  }\n\n  for (i += 1; i < input.length; i++) {\n    code = input[i].charCodeAt(0)\n    if (!((code >= 48 && code <= 57) || (code >= 65 && code <= 70) || (code >= 97 && code <= 102))) {\n      return ''\n    }\n    acc += input[i]\n  }\n  return acc\n}\n\n/**\n * @typedef {Object} GetIPV6Result\n * @property {boolean} error - Indicates if there was an error parsing the IPv6 address.\n * @property {string} address - The parsed IPv6 address.\n * @property {string} [zone] - The zone identifier, if present.\n */\n\n/**\n * @param {string} value\n * @returns {boolean}\n */\nconst nonSimpleDomain = RegExp.prototype.test.bind(/[^!\"$&'()*+,\\-.;=_`a-z{}~]/u)\n\n/**\n * @param {Array<string>} buffer\n * @returns {boolean}\n */\nfunction consumeIsZone (buffer) {\n  buffer.length = 0\n  return true\n}\n\n/**\n * @param {Array<string>} buffer\n * @param {Array<string>} address\n * @param {GetIPV6Result} output\n * @returns {boolean}\n */\nfunction consumeHextets (buffer, address, output) {\n  if (buffer.length) {\n    const hex = stringArrayToHexStripped(buffer)\n    if (hex !== '') {\n      address.push(hex)\n    } else {\n      output.error = true\n      return false\n    }\n    buffer.length = 0\n  }\n  return true\n}\n\n/**\n * @param {string} input\n * @returns {GetIPV6Result}\n */\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  /** @type {Array<string>} */\n  const address = []\n  /** @type {Array<string>} */\n  const buffer = []\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  let consume = consumeHextets\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume(buffer, address, output)) { break }\n      if (++tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i > 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      address.push(':')\n      continue\n    } else if (cursor === '%') {\n      if (!consume(buffer, address, output)) { break }\n      // switch to zone detection\n      consume = consumeIsZone\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (consume === consumeIsZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\n/**\n * @typedef {Object} NormalizeIPv6Result\n * @property {string} host - The normalized host.\n * @property {string} [escapedHost] - The escaped host.\n * @property {boolean} isIPV6 - Indicates if the host is an IPv6 address.\n */\n\n/**\n * @param {string} host\n * @returns {NormalizeIPv6Result}\n */\nfunction normalizeIPv6 (host) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, isIPV6: true, escapedHost }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\n/**\n * @param {string} str\n * @param {string} token\n * @returns {number}\n */\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\n/**\n * @param {string} path\n * @returns {string}\n *\n * @see https://datatracker.ietf.org/doc/html/rfc3986#section-5.2.4\n */\nfunction removeDotSegments (path) {\n  let input = path\n  const output = []\n  let nextSlash = -1\n  let len = 0\n\n  // eslint-disable-next-line no-cond-assign\n  while (len = input.length) {\n    if (len === 1) {\n      if (input === '.') {\n        break\n      } else if (input === '/') {\n        output.push('/')\n        break\n      } else {\n        output.push(input)\n        break\n      }\n    } else if (len === 2) {\n      if (input[0] === '.') {\n        if (input[1] === '.') {\n          break\n        } else if (input[1] === '/') {\n          input = input.slice(2)\n          continue\n        }\n      } else if (input[0] === '/') {\n        if (input[1] === '.' || input[1] === '/') {\n          output.push('/')\n          break\n        }\n      }\n    } else if (len === 3) {\n      if (input === '/..') {\n        if (output.length !== 0) {\n          output.pop()\n        }\n        output.push('/')\n        break\n      }\n    }\n    if (input[0] === '.') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(3)\n          continue\n        }\n      } else if (input[1] === '/') {\n        input = input.slice(2)\n        continue\n      }\n    } else if (input[0] === '/') {\n      if (input[1] === '.') {\n        if (input[2] === '/') {\n          input = input.slice(2)\n          continue\n        } else if (input[2] === '.') {\n          if (input[3] === '/') {\n            input = input.slice(3)\n            if (output.length !== 0) {\n              output.pop()\n            }\n            continue\n          }\n        }\n      }\n    }\n\n    // Rule 2E: Move normal path segment to output\n    if ((nextSlash = input.indexOf('/', 1)) === -1) {\n      output.push(input)\n      break\n    } else {\n      output.push(input.slice(0, nextSlash))\n      input = input.slice(nextSlash)\n    }\n  }\n\n  return output.join('')\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @param {boolean} esc\n * @returns {import('../types/index').URIComponent}\n */\nfunction normalizeComponentEncoding (component, esc) {\n  const func = esc !== true ? escape : unescape\n  if (component.scheme !== undefined) {\n    component.scheme = func(component.scheme)\n  }\n  if (component.userinfo !== undefined) {\n    component.userinfo = func(component.userinfo)\n  }\n  if (component.host !== undefined) {\n    component.host = func(component.host)\n  }\n  if (component.path !== undefined) {\n    component.path = func(component.path)\n  }\n  if (component.query !== undefined) {\n    component.query = func(component.query)\n  }\n  if (component.fragment !== undefined) {\n    component.fragment = func(component.fragment)\n  }\n  return component\n}\n\n/**\n * @param {import('../types/index').URIComponent} component\n * @returns {string|undefined}\n */\nfunction recomposeAuthority (component) {\n  const uriTokens = []\n\n  if (component.userinfo !== undefined) {\n    uriTokens.push(component.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (component.host !== undefined) {\n    let host = unescape(component.host)\n    if (!isIPv4(host)) {\n      const ipV6res = normalizeIPv6(host)\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = component.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof component.port === 'number' || typeof component.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(component.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  nonSimpleDomain,\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  isIPv4,\n  isUUID,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n", "'use strict'\n\nconst { isUUID } = require('./utils')\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nconst supportedSchemeNames = /** @type {const} */ (['http', 'https', 'ws',\n  'wss', 'urn', 'urn:uuid'])\n\n/** @typedef {supportedSchemeNames[number]} SchemeName */\n\n/**\n * @param {string} name\n * @returns {name is SchemeName}\n */\nfunction isValidSchemeName (name) {\n  return supportedSchemeNames.indexOf(/** @type {*} */ (name)) !== -1\n}\n\n/**\n * @callback SchemeFn\n * @param {import('../types/index').URIComponent} component\n * @param {import('../types/index').Options} options\n * @returns {import('../types/index').URIComponent}\n */\n\n/**\n * @typedef {Object} SchemeHandler\n * @property {SchemeName} scheme - The scheme name.\n * @property {boolean} [domainHost] - Indicates if the scheme supports domain hosts.\n * @property {SchemeFn} parse - Function to parse the URI component for this scheme.\n * @property {SchemeFn} serialize - Function to serialize the URI component for this scheme.\n * @property {boolean} [skipNormalize] - Indicates if normalization should be skipped for this scheme.\n * @property {boolean} [absolutePath] - Indicates if the scheme uses absolute paths.\n * @property {boolean} [unicodeSupport] - Indicates if the scheme supports Unicode.\n */\n\n/**\n * @param {import('../types/index').URIComponent} wsComponent\n * @returns {boolean}\n */\nfunction wsIsSecure (wsComponent) {\n  if (wsComponent.secure === true) {\n    return true\n  } else if (wsComponent.secure === false) {\n    return false\n  } else if (wsComponent.scheme) {\n    return (\n      wsComponent.scheme.length === 3 &&\n      (wsComponent.scheme[0] === 'w' || wsComponent.scheme[0] === 'W') &&\n      (wsComponent.scheme[1] === 's' || wsComponent.scheme[1] === 'S') &&\n      (wsComponent.scheme[2] === 's' || wsComponent.scheme[2] === 'S')\n    )\n  } else {\n    return false\n  }\n}\n\n/** @type {SchemeFn} */\nfunction httpParse (component) {\n  if (!component.host) {\n    component.error = component.error || 'HTTP URIs must have a host.'\n  }\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction httpSerialize (component) {\n  const secure = String(component.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (component.port === (secure ? 443 : 80) || component.port === '') {\n    component.port = undefined\n  }\n\n  // normalize the empty path\n  if (!component.path) {\n    component.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return component\n}\n\n/** @type {SchemeFn} */\nfunction wsParse (wsComponent) {\n// indicate if the secure flag is set\n  wsComponent.secure = wsIsSecure(wsComponent)\n\n  // construct resouce name\n  wsComponent.resourceName = (wsComponent.path || '/') + (wsComponent.query ? '?' + wsComponent.query : '')\n  wsComponent.path = undefined\n  wsComponent.query = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction wsSerialize (wsComponent) {\n// normalize the default port\n  if (wsComponent.port === (wsIsSecure(wsComponent) ? 443 : 80) || wsComponent.port === '') {\n    wsComponent.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponent.secure === 'boolean') {\n    wsComponent.scheme = (wsComponent.secure ? 'wss' : 'ws')\n    wsComponent.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponent.resourceName) {\n    const [path, query] = wsComponent.resourceName.split('?')\n    wsComponent.path = (path && path !== '/' ? path : undefined)\n    wsComponent.query = query\n    wsComponent.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponent.fragment = undefined\n\n  return wsComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnParse (urnComponent, options) {\n  if (!urnComponent.path) {\n    urnComponent.error = 'URN can not be parsed'\n    return urnComponent\n  }\n  const matches = urnComponent.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponent.scheme || 'urn'\n    urnComponent.nid = matches[1].toLowerCase()\n    urnComponent.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponent.nid}`\n    const schemeHandler = getSchemeHandler(urnScheme)\n    urnComponent.path = undefined\n\n    if (schemeHandler) {\n      urnComponent = schemeHandler.parse(urnComponent, options)\n    }\n  } else {\n    urnComponent.error = urnComponent.error || 'URN can not be parsed.'\n  }\n\n  return urnComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnSerialize (urnComponent, options) {\n  if (urnComponent.nid === undefined) {\n    throw new Error('URN without nid cannot be serialized')\n  }\n  const scheme = options.scheme || urnComponent.scheme || 'urn'\n  const nid = urnComponent.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = getSchemeHandler(urnScheme)\n\n  if (schemeHandler) {\n    urnComponent = schemeHandler.serialize(urnComponent, options)\n  }\n\n  const uriComponent = urnComponent\n  const nss = urnComponent.nss\n  uriComponent.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidParse (urnComponent, options) {\n  const uuidComponent = urnComponent\n  uuidComponent.uuid = uuidComponent.nss\n  uuidComponent.nss = undefined\n\n  if (!options.tolerant && (!uuidComponent.uuid || !isUUID(uuidComponent.uuid))) {\n    uuidComponent.error = uuidComponent.error || 'UUID is not valid.'\n  }\n\n  return uuidComponent\n}\n\n/** @type {SchemeFn} */\nfunction urnuuidSerialize (uuidComponent) {\n  const urnComponent = uuidComponent\n  // normalize UUID\n  urnComponent.nss = (uuidComponent.uuid || '').toLowerCase()\n  return urnComponent\n}\n\nconst http = /** @type {SchemeHandler} */ ({\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst https = /** @type {SchemeHandler} */ ({\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n})\n\nconst ws = /** @type {SchemeHandler} */ ({\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n})\n\nconst wss = /** @type {SchemeHandler} */ ({\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n})\n\nconst urn = /** @type {SchemeHandler} */ ({\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n})\n\nconst urnuuid = /** @type {SchemeHandler} */ ({\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n})\n\nconst SCHEMES = /** @type {Record<SchemeName, SchemeHandler>} */ ({\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n})\n\nObject.setPrototypeOf(SCHEMES, null)\n\n/**\n * @param {string|undefined} scheme\n * @returns {SchemeHandler|undefined}\n */\nfunction getSchemeHandler (scheme) {\n  return (\n    scheme && (\n      SCHEMES[/** @type {SchemeName} */ (scheme)] ||\n      SCHEMES[/** @type {SchemeName} */(scheme.toLowerCase())])\n  ) ||\n    undefined\n}\n\nmodule.exports = {\n  wsIsSecure,\n  SCHEMES,\n  isValidSchemeName,\n  getSchemeHandler,\n}\n", "'use strict'\n\nconst { normalizeIPv6, removeDotSegments, recomposeAuthority, normalizeComponentEncoding, isIPv4, nonSimpleDomain } = require('./lib/utils')\nconst { SCHEMES, getSchemeHandler } = require('./lib/schemes')\n\n/**\n * @template {import('./types/index').URIComponent|string} T\n * @param {T} uri\n * @param {import('./types/index').Options} [options]\n * @returns {T}\n */\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = /** @type {T} */ (serialize(parse(uri, options), options))\n  } else if (typeof uri === 'object') {\n    uri = /** @type {T} */ (parse(serialize(uri, options), options))\n  }\n  return uri\n}\n\n/**\n * @param {string} baseURI\n * @param {string} relativeURI\n * @param {import('./types/index').Options} [options]\n * @returns {string}\n */\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = options ? Object.assign({ scheme: 'null' }, options) : { scheme: 'null' }\n  const resolved = resolveComponent(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  schemelessOptions.skipEscape = true\n  return serialize(resolved, schemelessOptions)\n}\n\n/**\n * @param {import ('./types/index').URIComponent} base\n * @param {import ('./types/index').URIComponent} relative\n * @param {import('./types/index').Options} [options]\n * @param {boolean} [skipNormalization=false]\n * @returns {import ('./types/index').URIComponent}\n */\nfunction resolveComponent (base, relative, options, skipNormalization) {\n  /** @type {import('./types/index').URIComponent} */\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base component\n    relative = parse(serialize(relative, options), options) // normalize relative component\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path[0] === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\n/**\n * @param {import ('./types/index').URIComponent|string} uriA\n * @param {import ('./types/index').URIComponent|string} uriB\n * @param {import ('./types/index').Options} options\n * @returns {boolean}\n */\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\n/**\n * @param {Readonly<import('./types/index').URIComponent>} cmpts\n * @param {import('./types/index').Options} [opts]\n * @returns {string}\n */\nfunction serialize (cmpts, opts) {\n  const component = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = getSchemeHandler(options.scheme || component.scheme)\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(component, options)\n\n  if (component.path !== undefined) {\n    if (!options.skipEscape) {\n      component.path = escape(component.path)\n\n      if (component.scheme !== undefined) {\n        component.path = component.path.split('%3A').join(':')\n      }\n    } else {\n      component.path = unescape(component.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && component.scheme) {\n    uriTokens.push(component.scheme, ':')\n  }\n\n  const authority = recomposeAuthority(component)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (component.path && component.path[0] !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (component.path !== undefined) {\n    let s = component.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (\n      authority === undefined &&\n      s[0] === '/' &&\n      s[1] === '/'\n    ) {\n      // don't allow the path to start with \"//\"\n      s = '/%2F' + s.slice(2)\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (component.query !== undefined) {\n    uriTokens.push('?', component.query)\n  }\n\n  if (component.fragment !== undefined) {\n    uriTokens.push('#', component.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\n/**\n * @param {string} uri\n * @param {import('./types/index').Options} [opts]\n * @returns\n */\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  /** @type {import('./types/index').URIComponent} */\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n\n  let isIP = false\n  if (options.reference === 'suffix') {\n    if (options.scheme) {\n      uri = options.scheme + ':' + uri\n    } else {\n      uri = '//' + uri\n    }\n  }\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = isIPv4(parsed.host)\n      if (ipv4result === false) {\n        const ipv6result = normalizeIPv6(parsed.host)\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && parsed.query === undefined && !parsed.path) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = getSchemeHandler(options.scheme || parsed.scheme)\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (uri.indexOf('%') !== -1) {\n        if (parsed.scheme !== undefined) {\n          parsed.scheme = unescape(parsed.scheme)\n        }\n        if (parsed.host !== undefined) {\n          parsed.host = unescape(parsed.host)\n        }\n      }\n      if (parsed.path) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponent,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n", "import * as uri from \"fast-uri\"\n\ntype URI = typeof uri & {code: string}\n;(uri as URI).code = 'require(\"ajv/dist/runtime/uri\").default'\n\nexport default uri as URI\n", "export {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  AnyValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport interface Plugin<Opts> {\n  (ajv: Ajv, options?: Opts): Ajv\n  [prop: string]: any\n}\n\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\n\nimport type {\n  Schema,\n  AnySchema,\n  AnySchemaObject,\n  SchemaObject,\n  AsyncSchema,\n  Vocabulary,\n  KeywordDefinition,\n  AddedKeywordDefinition,\n  AnyValidateFunction,\n  ValidateFunction,\n  AsyncValidateFunction,\n  ErrorObject,\n  Format,\n  AddedFormat,\n  RegExpEngine,\n  UriResolver,\n} from \"./types\"\nimport type {JSONSchemaType} from \"./types/json-schema\"\nimport type {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nimport ValidationError from \"./runtime/validation_error\"\nimport MissingRefError from \"./compile/ref_error\"\nimport {getRules, ValidationRules, Rule, RuleGroup, JSONType} from \"./compile/rules\"\nimport {SchemaEnv, compileSchema, resolveSchema} from \"./compile\"\nimport {Code, ValueScope} from \"./compile/codegen\"\nimport {normalizeId, getSchemaRefs} from \"./compile/resolve\"\nimport {getJSONTypes} from \"./compile/validate/dataType\"\nimport {eachItem} from \"./compile/util\"\nimport * as $dataRefSchema from \"./refs/data.json\"\n\nimport DefaultUriResolver from \"./runtime/uri\"\n\nconst defaultRegExp: RegExpEngine = (str, flags) => new RegExp(str, flags)\ndefaultRegExp.code = \"new RegExp\"\n\nconst META_IGNORE_OPTIONS: (keyof Options)[] = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"]\nconst EXT_SCOPE_NAMES = new Set([\n  \"validate\",\n  \"serialize\",\n  \"parse\",\n  \"wrapper\",\n  \"root\",\n  \"schema\",\n  \"keyword\",\n  \"pattern\",\n  \"formats\",\n  \"validate$data\",\n  \"func\",\n  \"obj\",\n  \"Error\",\n])\n\nexport type Options = CurrentOptions & DeprecatedOptions\n\nexport interface CurrentOptions {\n  // strict mode options (NEW)\n  strict?: boolean | \"log\"\n  strictSchema?: boolean | \"log\"\n  strictNumbers?: boolean | \"log\"\n  strictTypes?: boolean | \"log\"\n  strictTuples?: boolean | \"log\"\n  strictRequired?: boolean | \"log\"\n  allowMatchingProperties?: boolean // disables a strict mode restriction\n  allowUnionTypes?: boolean\n  validateFormats?: boolean\n  // validation and reporting options:\n  $data?: boolean\n  allErrors?: boolean\n  verbose?: boolean\n  discriminator?: boolean\n  unicodeRegExp?: boolean\n  timestamp?: \"string\" | \"date\" // JTD only\n  parseDate?: boolean // JTD only\n  allowDate?: boolean // JTD only\n  $comment?:\n    | true\n    | ((comment: string, schemaPath?: string, rootSchema?: AnySchemaObject) => unknown)\n  formats?: {[Name in string]?: Format}\n  keywords?: Vocabulary\n  schemas?: AnySchema[] | {[Key in string]?: AnySchema}\n  logger?: Logger | false\n  loadSchema?: (uri: string) => Promise<AnySchemaObject>\n  // options to modify validated data:\n  removeAdditional?: boolean | \"all\" | \"failing\"\n  useDefaults?: boolean | \"empty\"\n  coerceTypes?: boolean | \"array\"\n  // advanced options:\n  next?: boolean // NEW\n  unevaluated?: boolean // NEW\n  dynamicRef?: boolean // NEW\n  schemaId?: \"id\" | \"$id\"\n  jtd?: boolean // NEW\n  meta?: SchemaObject | boolean\n  defaultMeta?: string | AnySchemaObject\n  validateSchema?: boolean | \"log\"\n  addUsedSchema?: boolean\n  inlineRefs?: boolean | number\n  passContext?: boolean\n  loopRequired?: number\n  loopEnum?: number // NEW\n  ownProperties?: boolean\n  multipleOfPrecision?: number\n  int32range?: boolean // JTD only\n  messages?: boolean\n  code?: CodeOptions // NEW\n  uriResolver?: UriResolver\n}\n\nexport interface CodeOptions {\n  es5?: boolean\n  esm?: boolean\n  lines?: boolean\n  optimize?: boolean | number\n  formats?: Code // code to require (or construct) map of available formats - for standalone code\n  source?: boolean\n  process?: (code: string, schema?: SchemaEnv) => string\n  regExp?: RegExpEngine\n}\n\ninterface InstanceCodeOptions extends CodeOptions {\n  regExp: RegExpEngine\n  optimize: number\n}\n\ninterface DeprecatedOptions {\n  /** @deprecated */\n  ignoreKeywordsWithRef?: boolean\n  /** @deprecated */\n  jsPropertySyntax?: boolean // added instead of jsonPointers\n  /** @deprecated */\n  unicode?: boolean\n}\n\ninterface RemovedOptions {\n  format?: boolean\n  errorDataPath?: \"object\" | \"property\"\n  nullable?: boolean // \"nullable\" keyword is supported by default\n  jsonPointers?: boolean\n  extendRefs?: true | \"ignore\" | \"fail\"\n  missingRefs?: true | \"ignore\" | \"fail\"\n  processCode?: (code: string, schema?: SchemaEnv) => string\n  sourceCode?: boolean\n  strictDefaults?: boolean\n  strictKeywords?: boolean\n  uniqueItems?: boolean\n  unknownFormats?: true | string[] | \"ignore\"\n  cache?: any\n  serialize?: (schema: AnySchema) => unknown\n  ajvErrors?: boolean\n}\n\ntype OptionsInfo<T extends RemovedOptions | DeprecatedOptions> = {\n  [K in keyof T]-?: string | undefined\n}\n\nconst removedOptions: OptionsInfo<RemovedOptions> = {\n  errorDataPath: \"\",\n  format: \"`validateFormats: false` can be used instead.\",\n  nullable: '\"nullable\" keyword is supported by default.',\n  jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n  extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n  missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n  processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n  sourceCode: \"Use option `code: {source: true}`\",\n  strictDefaults: \"It is default now, see option `strict`.\",\n  strictKeywords: \"It is default now, see option `strict`.\",\n  uniqueItems: '\"uniqueItems\" keyword is always validated.',\n  unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n  cache: \"Map is used as cache, schema object as key.\",\n  serialize: \"Map is used as cache, schema object as key.\",\n  ajvErrors: \"It is default now.\",\n}\n\nconst deprecatedOptions: OptionsInfo<DeprecatedOptions> = {\n  ignoreKeywordsWithRef: \"\",\n  jsPropertySyntax: \"\",\n  unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n}\n\ntype RequiredInstanceOptions = {\n  [K in\n    | \"strictSchema\"\n    | \"strictNumbers\"\n    | \"strictTypes\"\n    | \"strictTuples\"\n    | \"strictRequired\"\n    | \"inlineRefs\"\n    | \"loopRequired\"\n    | \"loopEnum\"\n    | \"meta\"\n    | \"messages\"\n    | \"schemaId\"\n    | \"addUsedSchema\"\n    | \"validateSchema\"\n    | \"validateFormats\"\n    | \"int32range\"\n    | \"unicodeRegExp\"\n    | \"uriResolver\"]: NonNullable<Options[K]>\n} & {code: InstanceCodeOptions}\n\nexport type InstanceOptions = Options & RequiredInstanceOptions\n\nconst MAX_EXPRESSION = 200\n\n// eslint-disable-next-line complexity\nfunction requiredOptions(o: Options): RequiredInstanceOptions {\n  const s = o.strict\n  const _optz = o.code?.optimize\n  const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0\n  const regExp = o.code?.regExp ?? defaultRegExp\n  const uriResolver = o.uriResolver ?? DefaultUriResolver\n  return {\n    strictSchema: o.strictSchema ?? s ?? true,\n    strictNumbers: o.strictNumbers ?? s ?? true,\n    strictTypes: o.strictTypes ?? s ?? \"log\",\n    strictTuples: o.strictTuples ?? s ?? \"log\",\n    strictRequired: o.strictRequired ?? s ?? false,\n    code: o.code ? {...o.code, optimize, regExp} : {optimize, regExp},\n    loopRequired: o.loopRequired ?? MAX_EXPRESSION,\n    loopEnum: o.loopEnum ?? MAX_EXPRESSION,\n    meta: o.meta ?? true,\n    messages: o.messages ?? true,\n    inlineRefs: o.inlineRefs ?? true,\n    schemaId: o.schemaId ?? \"$id\",\n    addUsedSchema: o.addUsedSchema ?? true,\n    validateSchema: o.validateSchema ?? true,\n    validateFormats: o.validateFormats ?? true,\n    unicodeRegExp: o.unicodeRegExp ?? true,\n    int32range: o.int32range ?? true,\n    uriResolver: uriResolver,\n  }\n}\n\nexport interface Logger {\n  log(...args: unknown[]): unknown\n  warn(...args: unknown[]): unknown\n  error(...args: unknown[]): unknown\n}\n\nexport default class Ajv {\n  opts: InstanceOptions\n  errors?: ErrorObject[] | null // errors from the last validation\n  logger: Logger\n  // shared external scope values for compiled functions\n  readonly scope: ValueScope\n  readonly schemas: {[Key in string]?: SchemaEnv} = {}\n  readonly refs: {[Ref in string]?: SchemaEnv | string} = {}\n  readonly formats: {[Name in string]?: AddedFormat} = {}\n  readonly RULES: ValidationRules\n  readonly _compilations: Set<SchemaEnv> = new Set()\n  private readonly _loading: {[Ref in string]?: Promise<AnySchemaObject>} = {}\n  private readonly _cache: Map<AnySchema, SchemaEnv> = new Map()\n  private readonly _metaOpts: InstanceOptions\n\n  static ValidationError = ValidationError\n  static MissingRefError = MissingRefError\n\n  constructor(opts: Options = {}) {\n    opts = this.opts = {...opts, ...requiredOptions(opts)}\n    const {es5, lines} = this.opts.code\n\n    this.scope = new ValueScope({scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines})\n    this.logger = getLogger(opts.logger)\n    const formatOpt = opts.validateFormats\n    opts.validateFormats = false\n\n    this.RULES = getRules()\n    checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\")\n    checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\")\n    this._metaOpts = getMetaSchemaOptions.call(this)\n\n    if (opts.formats) addInitialFormats.call(this)\n    this._addVocabularies()\n    this._addDefaultMetaSchema()\n    if (opts.keywords) addInitialKeywords.call(this, opts.keywords)\n    if (typeof opts.meta == \"object\") this.addMetaSchema(opts.meta)\n    addInitialSchemas.call(this)\n    opts.validateFormats = formatOpt\n  }\n\n  _addVocabularies(): void {\n    this.addKeyword(\"$async\")\n  }\n\n  _addDefaultMetaSchema(): void {\n    const {$data, meta, schemaId} = this.opts\n    let _dataRefSchema: SchemaObject = $dataRefSchema\n    if (schemaId === \"id\") {\n      _dataRefSchema = {...$dataRefSchema}\n      _dataRefSchema.id = _dataRefSchema.$id\n      delete _dataRefSchema.$id\n    }\n    if (meta && $data) this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false)\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    const {meta, schemaId} = this.opts\n    return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined)\n  }\n\n  // Validate data using schema\n  // AnySchema will be compiled and cached using schema itself as a key for Map\n  validate(schema: Schema | string, data: unknown): boolean\n  validate(schemaKeyRef: AnySchema | string, data: unknown): boolean | Promise<unknown>\n  validate<T>(schema: Schema | JSONSchemaType<T> | string, data: unknown): data is T\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  validate<T>(schema: JTDSchemaType<T>, data: unknown): data is T\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  validate<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    data: unknown\n  ): data is JTDDataType<T>\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  validate<T>(schema: AsyncSchema, data: unknown | T): Promise<T>\n  validate<T>(schemaKeyRef: AnySchema | string, data: unknown): data is T | Promise<T>\n  validate<T>(\n    schemaKeyRef: AnySchema | string, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data: unknown | T // to be validated\n  ): boolean | Promise<T> {\n    let v: AnyValidateFunction | undefined\n    if (typeof schemaKeyRef == \"string\") {\n      v = this.getSchema<T>(schemaKeyRef)\n      if (!v) throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`)\n    } else {\n      v = this.compile<T>(schemaKeyRef)\n    }\n\n    const valid = v(data)\n    if (!(\"$async\" in v)) this.errors = v.errors\n    return valid\n  }\n\n  // Create validation function for passed schema\n  // _meta: true if schema is a meta-schema. Used internally to compile meta schemas of user-defined keywords.\n  compile<T = unknown>(schema: Schema | JSONSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compile<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  compile<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    _meta?: boolean\n  ): ValidateFunction<JTDDataType<T>>\n  compile<T = unknown>(schema: AsyncSchema, _meta?: boolean): AsyncValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T> {\n    const sch = this._addSchema(schema, _meta)\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T>\n  }\n\n  // Creates validating function for passed schema with asynchronous loading of missing schemas.\n  // `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n  // TODO allow passing schema URI\n  // meta - optional true to compile meta-schema\n  compileAsync<T = unknown>(\n    schema: SchemaObject | JSONSchemaType<T>,\n    _meta?: boolean\n  ): Promise<ValidateFunction<T>>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): Promise<ValidateFunction<T>>\n  compileAsync<T = unknown>(schema: AsyncSchema, meta?: boolean): Promise<AsyncValidateFunction<T>>\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>>\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>> {\n    if (typeof this.opts.loadSchema != \"function\") {\n      throw new Error(\"options.loadSchema should be a function\")\n    }\n    const {loadSchema} = this.opts\n    return runCompileAsync.call(this, schema, meta)\n\n    async function runCompileAsync(\n      this: Ajv,\n      _schema: AnySchemaObject,\n      _meta?: boolean\n    ): Promise<AnyValidateFunction> {\n      await loadMetaSchema.call(this, _schema.$schema)\n      const sch = this._addSchema(_schema, _meta)\n      return sch.validate || _compileAsync.call(this, sch)\n    }\n\n    async function loadMetaSchema(this: Ajv, $ref?: string): Promise<void> {\n      if ($ref && !this.getSchema($ref)) {\n        await runCompileAsync.call(this, {$ref}, true)\n      }\n    }\n\n    async function _compileAsync(this: Ajv, sch: SchemaEnv): Promise<AnyValidateFunction> {\n      try {\n        return this._compileSchemaEnv(sch)\n      } catch (e) {\n        if (!(e instanceof MissingRefError)) throw e\n        checkLoaded.call(this, e)\n        await loadMissingSchema.call(this, e.missingSchema)\n        return _compileAsync.call(this, sch)\n      }\n    }\n\n    function checkLoaded(this: Ajv, {missingSchema: ref, missingRef}: MissingRefError): void {\n      if (this.refs[ref]) {\n        throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`)\n      }\n    }\n\n    async function loadMissingSchema(this: Ajv, ref: string): Promise<void> {\n      const _schema = await _loadSchema.call(this, ref)\n      if (!this.refs[ref]) await loadMetaSchema.call(this, _schema.$schema)\n      if (!this.refs[ref]) this.addSchema(_schema, ref, meta)\n    }\n\n    async function _loadSchema(this: Ajv, ref: string): Promise<AnySchemaObject> {\n      const p = this._loading[ref]\n      if (p) return p\n      try {\n        return await (this._loading[ref] = loadSchema(ref))\n      } finally {\n        delete this._loading[ref]\n      }\n    }\n  }\n\n  // Adds schema to the instance\n  addSchema(\n    schema: AnySchema | AnySchema[], // If array is passed, `key` will be ignored\n    key?: string, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta?: boolean, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n  ): Ajv {\n    if (Array.isArray(schema)) {\n      for (const sch of schema) this.addSchema(sch, undefined, _meta, _validateSchema)\n      return this\n    }\n    let id: string | undefined\n    if (typeof schema === \"object\") {\n      const {schemaId} = this.opts\n      id = schema[schemaId]\n      if (id !== undefined && typeof id != \"string\") {\n        throw new Error(`schema ${schemaId} must be string`)\n      }\n    }\n    key = normalizeId(key || id)\n    this._checkUnique(key)\n    this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true)\n    return this\n  }\n\n  // Add schema that will be used to validate other schemas\n  // options in META_IGNORE_OPTIONS are alway set to false\n  addMetaSchema(\n    schema: AnySchemaObject,\n    key?: string, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n  ): Ajv {\n    this.addSchema(schema, key, true, _validateSchema)\n    return this\n  }\n\n  //  Validate schema against its meta-schema\n  validateSchema(schema: AnySchema, throwOrLogError?: boolean): boolean | Promise<unknown> {\n    if (typeof schema == \"boolean\") return true\n    let $schema: string | AnySchemaObject | undefined\n    $schema = schema.$schema\n    if ($schema !== undefined && typeof $schema != \"string\") {\n      throw new Error(\"$schema must be a string\")\n    }\n    $schema = $schema || this.opts.defaultMeta || this.defaultMeta()\n    if (!$schema) {\n      this.logger.warn(\"meta-schema not available\")\n      this.errors = null\n      return true\n    }\n    const valid = this.validate($schema, schema)\n    if (!valid && throwOrLogError) {\n      const message = \"schema is invalid: \" + this.errorsText()\n      if (this.opts.validateSchema === \"log\") this.logger.error(message)\n      else throw new Error(message)\n    }\n    return valid\n  }\n\n  // Get compiled schema by `key` or `ref`.\n  // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n  getSchema<T = unknown>(keyRef: string): AnyValidateFunction<T> | undefined {\n    let sch\n    while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\") keyRef = sch\n    if (sch === undefined) {\n      const {schemaId} = this.opts\n      const root = new SchemaEnv({schema: {}, schemaId})\n      sch = resolveSchema.call(this, root, keyRef)\n      if (!sch) return\n      this.refs[keyRef] = sch\n    }\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T> | undefined\n  }\n\n  // Remove cached schema(s).\n  // If no parameter is passed all schemas but meta-schemas are removed.\n  // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n  // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n  removeSchema(schemaKeyRef?: AnySchema | string | RegExp): Ajv {\n    if (schemaKeyRef instanceof RegExp) {\n      this._removeAllSchemas(this.schemas, schemaKeyRef)\n      this._removeAllSchemas(this.refs, schemaKeyRef)\n      return this\n    }\n    switch (typeof schemaKeyRef) {\n      case \"undefined\":\n        this._removeAllSchemas(this.schemas)\n        this._removeAllSchemas(this.refs)\n        this._cache.clear()\n        return this\n      case \"string\": {\n        const sch = getSchEnv.call(this, schemaKeyRef)\n        if (typeof sch == \"object\") this._cache.delete(sch.schema)\n        delete this.schemas[schemaKeyRef]\n        delete this.refs[schemaKeyRef]\n        return this\n      }\n      case \"object\": {\n        const cacheKey = schemaKeyRef\n        this._cache.delete(cacheKey)\n        let id = schemaKeyRef[this.opts.schemaId]\n        if (id) {\n          id = normalizeId(id)\n          delete this.schemas[id]\n          delete this.refs[id]\n        }\n        return this\n      }\n      default:\n        throw new Error(\"ajv.removeSchema: invalid parameter\")\n    }\n  }\n\n  // add \"vocabulary\" - a collection of keywords\n  addVocabulary(definitions: Vocabulary): Ajv {\n    for (const def of definitions) this.addKeyword(def)\n    return this\n  }\n\n  addKeyword(\n    kwdOrDef: string | KeywordDefinition,\n    def?: KeywordDefinition // deprecated\n  ): Ajv {\n    let keyword: string | string[]\n    if (typeof kwdOrDef == \"string\") {\n      keyword = kwdOrDef\n      if (typeof def == \"object\") {\n        this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\")\n        def.keyword = keyword\n      }\n    } else if (typeof kwdOrDef == \"object\" && def === undefined) {\n      def = kwdOrDef\n      keyword = def.keyword\n      if (Array.isArray(keyword) && !keyword.length) {\n        throw new Error(\"addKeywords: keyword must be string or non-empty array\")\n      }\n    } else {\n      throw new Error(\"invalid addKeywords parameters\")\n    }\n\n    checkKeyword.call(this, keyword, def)\n    if (!def) {\n      eachItem(keyword, (kwd) => addRule.call(this, kwd))\n      return this\n    }\n    keywordMetaschema.call(this, def)\n    const definition: AddedKeywordDefinition = {\n      ...def,\n      type: getJSONTypes(def.type),\n      schemaType: getJSONTypes(def.schemaType),\n    }\n    eachItem(\n      keyword,\n      definition.type.length === 0\n        ? (k) => addRule.call(this, k, definition)\n        : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t))\n    )\n    return this\n  }\n\n  getKeyword(keyword: string): AddedKeywordDefinition | boolean {\n    const rule = this.RULES.all[keyword]\n    return typeof rule == \"object\" ? rule.definition : !!rule\n  }\n\n  // Remove keyword\n  removeKeyword(keyword: string): Ajv {\n    // TODO return type should be Ajv\n    const {RULES} = this\n    delete RULES.keywords[keyword]\n    delete RULES.all[keyword]\n    for (const group of RULES.rules) {\n      const i = group.rules.findIndex((rule) => rule.keyword === keyword)\n      if (i >= 0) group.rules.splice(i, 1)\n    }\n    return this\n  }\n\n  // Add format\n  addFormat(name: string, format: Format): Ajv {\n    if (typeof format == \"string\") format = new RegExp(format)\n    this.formats[name] = format\n    return this\n  }\n\n  errorsText(\n    errors: ErrorObject[] | null | undefined = this.errors, // optional array of validation errors\n    {separator = \", \", dataVar = \"data\"}: ErrorsTextOptions = {} // optional options with properties `separator` and `dataVar`\n  ): string {\n    if (!errors || errors.length === 0) return \"No errors\"\n    return errors\n      .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n      .reduce((text, msg) => text + separator + msg)\n  }\n\n  $dataMetaSchema(metaSchema: AnySchemaObject, keywordsJsonPointers: string[]): AnySchemaObject {\n    const rules = this.RULES.all\n    metaSchema = JSON.parse(JSON.stringify(metaSchema))\n    for (const jsonPointer of keywordsJsonPointers) {\n      const segments = jsonPointer.split(\"/\").slice(1) // first segment is an empty string\n      let keywords = metaSchema\n      for (const seg of segments) keywords = keywords[seg] as AnySchemaObject\n\n      for (const key in rules) {\n        const rule = rules[key]\n        if (typeof rule != \"object\") continue\n        const {$data} = rule.definition\n        const schema = keywords[key] as AnySchemaObject | undefined\n        if ($data && schema) keywords[key] = schemaOrData(schema)\n      }\n    }\n\n    return metaSchema\n  }\n\n  private _removeAllSchemas(schemas: {[Ref in string]?: SchemaEnv | string}, regex?: RegExp): void {\n    for (const keyRef in schemas) {\n      const sch = schemas[keyRef]\n      if (!regex || regex.test(keyRef)) {\n        if (typeof sch == \"string\") {\n          delete schemas[keyRef]\n        } else if (sch && !sch.meta) {\n          this._cache.delete(sch.schema)\n          delete schemas[keyRef]\n        }\n      }\n    }\n  }\n\n  _addSchema(\n    schema: AnySchema,\n    meta?: boolean,\n    baseId?: string,\n    validateSchema = this.opts.validateSchema,\n    addSchema = this.opts.addUsedSchema\n  ): SchemaEnv {\n    let id: string | undefined\n    const {schemaId} = this.opts\n    if (typeof schema == \"object\") {\n      id = schema[schemaId]\n    } else {\n      if (this.opts.jtd) throw new Error(\"schema must be object\")\n      else if (typeof schema != \"boolean\") throw new Error(\"schema must be object or boolean\")\n    }\n    let sch = this._cache.get(schema)\n    if (sch !== undefined) return sch\n\n    baseId = normalizeId(id || baseId)\n    const localRefs = getSchemaRefs.call(this, schema, baseId)\n    sch = new SchemaEnv({schema, schemaId, meta, baseId, localRefs})\n    this._cache.set(sch.schema, sch)\n    if (addSchema && !baseId.startsWith(\"#\")) {\n      // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n      if (baseId) this._checkUnique(baseId)\n      this.refs[baseId] = sch\n    }\n    if (validateSchema) this.validateSchema(schema, true)\n    return sch\n  }\n\n  private _checkUnique(id: string): void {\n    if (this.schemas[id] || this.refs[id]) {\n      throw new Error(`schema with key or id \"${id}\" already exists`)\n    }\n  }\n\n  private _compileSchemaEnv(sch: SchemaEnv): AnyValidateFunction {\n    if (sch.meta) this._compileMetaSchema(sch)\n    else compileSchema.call(this, sch)\n\n    /* istanbul ignore if */\n    if (!sch.validate) throw new Error(\"ajv implementation error\")\n    return sch.validate\n  }\n\n  private _compileMetaSchema(sch: SchemaEnv): void {\n    const currentOpts = this.opts\n    this.opts = this._metaOpts\n    try {\n      compileSchema.call(this, sch)\n    } finally {\n      this.opts = currentOpts\n    }\n  }\n}\n\nexport interface ErrorsTextOptions {\n  separator?: string\n  dataVar?: string\n}\n\nfunction checkOptions(\n  this: Ajv,\n  checkOpts: OptionsInfo<RemovedOptions | DeprecatedOptions>,\n  options: Options & RemovedOptions,\n  msg: string,\n  log: \"warn\" | \"error\" = \"error\"\n): void {\n  for (const key in checkOpts) {\n    const opt = key as keyof typeof checkOpts\n    if (opt in options) this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`)\n  }\n}\n\nfunction getSchEnv(this: Ajv, keyRef: string): SchemaEnv | string | undefined {\n  keyRef = normalizeId(keyRef) // TODO tests fail without this line\n  return this.schemas[keyRef] || this.refs[keyRef]\n}\n\nfunction addInitialSchemas(this: Ajv): void {\n  const optsSchemas = this.opts.schemas\n  if (!optsSchemas) return\n  if (Array.isArray(optsSchemas)) this.addSchema(optsSchemas)\n  else for (const key in optsSchemas) this.addSchema(optsSchemas[key] as AnySchema, key)\n}\n\nfunction addInitialFormats(this: Ajv): void {\n  for (const name in this.opts.formats) {\n    const format = this.opts.formats[name]\n    if (format) this.addFormat(name, format)\n  }\n}\n\nfunction addInitialKeywords(\n  this: Ajv,\n  defs: Vocabulary | {[K in string]?: KeywordDefinition}\n): void {\n  if (Array.isArray(defs)) {\n    this.addVocabulary(defs)\n    return\n  }\n  this.logger.warn(\"keywords option as map is deprecated, pass array\")\n  for (const keyword in defs) {\n    const def = defs[keyword] as KeywordDefinition\n    if (!def.keyword) def.keyword = keyword\n    this.addKeyword(def)\n  }\n}\n\nfunction getMetaSchemaOptions(this: Ajv): InstanceOptions {\n  const metaOpts = {...this.opts}\n  for (const opt of META_IGNORE_OPTIONS) delete metaOpts[opt]\n  return metaOpts\n}\n\nconst noLogs = {log() {}, warn() {}, error() {}}\n\nfunction getLogger(logger?: Partial<Logger> | false): Logger {\n  if (logger === false) return noLogs\n  if (logger === undefined) return console\n  if (logger.log && logger.warn && logger.error) return logger as Logger\n  throw new Error(\"logger must implement log, warn and error methods\")\n}\n\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i\n\nfunction checkKeyword(this: Ajv, keyword: string | string[], def?: KeywordDefinition): void {\n  const {RULES} = this\n  eachItem(keyword, (kwd) => {\n    if (RULES.keywords[kwd]) throw new Error(`Keyword ${kwd} is already defined`)\n    if (!KEYWORD_NAME.test(kwd)) throw new Error(`Keyword ${kwd} has invalid name`)\n  })\n  if (!def) return\n  if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n    throw new Error('$data keyword must have \"code\" or \"validate\" function')\n  }\n}\n\nfunction addRule(\n  this: Ajv,\n  keyword: string,\n  definition?: AddedKeywordDefinition,\n  dataType?: JSONType\n): void {\n  const post = definition?.post\n  if (dataType && post) throw new Error('keyword with \"post\" flag cannot have \"type\"')\n  const {RULES} = this\n  let ruleGroup = post ? RULES.post : RULES.rules.find(({type: t}) => t === dataType)\n  if (!ruleGroup) {\n    ruleGroup = {type: dataType, rules: []}\n    RULES.rules.push(ruleGroup)\n  }\n  RULES.keywords[keyword] = true\n  if (!definition) return\n\n  const rule: Rule = {\n    keyword,\n    definition: {\n      ...definition,\n      type: getJSONTypes(definition.type),\n      schemaType: getJSONTypes(definition.schemaType),\n    },\n  }\n  if (definition.before) addBeforeRule.call(this, ruleGroup, rule, definition.before)\n  else ruleGroup.rules.push(rule)\n  RULES.all[keyword] = rule\n  definition.implements?.forEach((kwd) => this.addKeyword(kwd))\n}\n\nfunction addBeforeRule(this: Ajv, ruleGroup: RuleGroup, rule: Rule, before: string): void {\n  const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before)\n  if (i >= 0) {\n    ruleGroup.rules.splice(i, 0, rule)\n  } else {\n    ruleGroup.rules.push(rule)\n    this.logger.warn(`rule ${before} is not defined`)\n  }\n}\n\nfunction keywordMetaschema(this: Ajv, def: KeywordDefinition): void {\n  let {metaSchema} = def\n  if (metaSchema === undefined) return\n  if (def.$data && this.opts.$data) metaSchema = schemaOrData(metaSchema)\n  def.validateSchema = this.compile(metaSchema, true)\n}\n\nconst $dataRef = {\n  $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n}\n\nfunction schemaOrData(schema: AnySchema): AnySchemaObject {\n  return {anyOf: [schema, $dataRef]}\n}\n", "import type {CodeKeywordDefinition} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"id\",\n  code() {\n    throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID')\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {callValidateCode} from \"../code\"\nimport {_, nil, stringify, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport {SchemaEnv, resolveRef} from \"../../compile\"\nimport {mergeEvaluated} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"$ref\",\n  schemaType: \"string\",\n  code(cxt: KeywordCxt): void {\n    const {gen, schema: $ref, it} = cxt\n    const {baseId, schemaEnv: env, validateName, opts, self} = it\n    const {root} = env\n    if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId) return callRootRef()\n    const schOrEnv = resolveRef.call(self, root, baseId, $ref)\n    if (schOrEnv === undefined) throw new MissingRefError(it.opts.uriResolver, baseId, $ref)\n    if (schOrEnv instanceof SchemaEnv) return callValidate(schOrEnv)\n    return inlineRefSchema(schOrEnv)\n\n    function callRootRef(): void {\n      if (env === root) return callRef(cxt, validateName, env, env.$async)\n      const rootName = gen.scopeValue(\"root\", {ref: root})\n      return callRef(cxt, _`${rootName}.validate`, root, root.$async)\n    }\n\n    function callValidate(sch: SchemaEnv): void {\n      const v = getValidate(cxt, sch)\n      callRef(cxt, v, sch, sch.$async)\n    }\n\n    function inlineRefSchema(sch: AnySchema): void {\n      const schName = gen.scopeValue(\n        \"schema\",\n        opts.code.source === true ? {ref: sch, code: stringify(sch)} : {ref: sch}\n      )\n      const valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema(\n        {\n          schema: sch,\n          dataTypes: [],\n          schemaPath: nil,\n          topSchemaRef: schName,\n          errSchemaPath: $ref,\n        },\n        valid\n      )\n      cxt.mergeEvaluated(schCxt)\n      cxt.ok(valid)\n    }\n  },\n}\n\nexport function getValidate(cxt: KeywordCxt, sch: SchemaEnv): Code {\n  const {gen} = cxt\n  return sch.validate\n    ? gen.scopeValue(\"validate\", {ref: sch.validate})\n    : _`${gen.scopeValue(\"wrapper\", {ref: sch})}.validate`\n}\n\nexport function callRef(cxt: KeywordCxt, v: Code, sch?: SchemaEnv, $async?: boolean): void {\n  const {gen, it} = cxt\n  const {allErrors, schemaEnv: env, opts} = it\n  const passCxt = opts.passContext ? N.this : nil\n  if ($async) callAsyncRef()\n  else callSyncRef()\n\n  function callAsyncRef(): void {\n    if (!env.$async) throw new Error(\"async schema referenced by sync schema\")\n    const valid = gen.let(\"valid\")\n    gen.try(\n      () => {\n        gen.code(_`await ${callValidateCode(cxt, v, passCxt)}`)\n        addEvaluatedFrom(v) // TODO will not work with async, it has to be returned with the result\n        if (!allErrors) gen.assign(valid, true)\n      },\n      (e) => {\n        gen.if(_`!(${e} instanceof ${it.ValidationError as Name})`, () => gen.throw(e))\n        addErrorsFrom(e)\n        if (!allErrors) gen.assign(valid, false)\n      }\n    )\n    cxt.ok(valid)\n  }\n\n  function callSyncRef(): void {\n    cxt.result(\n      callValidateCode(cxt, v, passCxt),\n      () => addEvaluatedFrom(v),\n      () => addErrorsFrom(v)\n    )\n  }\n\n  function addErrorsFrom(source: Code): void {\n    const errs = _`${source}.errors`\n    gen.assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`) // TODO tagged\n    gen.assign(N.errors, _`${N.vErrors}.length`)\n  }\n\n  function addEvaluatedFrom(source: Code): void {\n    if (!it.opts.unevaluated) return\n    const schEvaluated = sch?.validate?.evaluated\n    // TODO refactor\n    if (it.props !== true) {\n      if (schEvaluated && !schEvaluated.dynamicProps) {\n        if (schEvaluated.props !== undefined) {\n          it.props = mergeEvaluated.props(gen, schEvaluated.props, it.props)\n        }\n      } else {\n        const props = gen.var(\"props\", _`${source}.evaluated.props`)\n        it.props = mergeEvaluated.props(gen, props, it.props, Name)\n      }\n    }\n    if (it.items !== true) {\n      if (schEvaluated && !schEvaluated.dynamicItems) {\n        if (schEvaluated.items !== undefined) {\n          it.items = mergeEvaluated.items(gen, schEvaluated.items, it.items)\n        }\n      } else {\n        const items = gen.var(\"items\", _`${source}.evaluated.items`)\n        it.items = mergeEvaluated.items(gen, items, it.items, Name)\n      }\n    }\n  }\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport idKeyword from \"./id\"\nimport refKeyword from \"./ref\"\n\nconst core: Vocabulary = [\n  \"$schema\",\n  \"$id\",\n  \"$defs\",\n  \"$vocabulary\",\n  {keyword: \"$comment\"},\n  \"definitions\",\n  idKeyword,\n  refKeyword,\n]\n\nexport default core\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators, Code} from \"../../compile/codegen\"\n\nconst ops = operators\n\ntype Kwd = \"maximum\" | \"minimum\" | \"exclusiveMaximum\" | \"exclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  maximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  minimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  exclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  exclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitNumberError = ErrorObject<\n  Kwd,\n  {limit: number; comparison: Comparison},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`must be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    cxt.fail$data(_`${data} ${KWDs[keyword as Kwd].fail} ${schemaCode} || isNaN(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type MultipleOfError = ErrorObject<\n  \"multipleOf\",\n  {multipleOf: number},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must be multiple of ${schemaCode}`,\n  params: ({schemaCode}) => _`{multipleOf: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"multipleOf\",\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schemaCode, it} = cxt\n    // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n    const prec = it.opts.multipleOfPrecision\n    const res = gen.let(\"res\")\n    const invalid = prec\n      ? _`Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n      : _`${res} !== parseInt(${res})`\n    cxt.fail$data(_`(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`)\n  },\n}\n\nexport default def\n", "// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nexport default function ucs2length(str: string): number {\n  const len = str.length\n  let length = 0\n  let pos = 0\n  let value: number\n  while (pos < len) {\n    length++\n    value = str.charCodeAt(pos++)\n    if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos)\n      if ((value & 0xfc00) === 0xdc00) pos++ // low surrogate\n    }\n  }\n  return length\n}\n\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default'\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport ucs2length from \"../../runtime/ucs2length\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} characters`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxLength\", \"minLength\"],\n  type: \"string\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode, it} = cxt\n    const op = keyword === \"maxLength\" ? operators.GT : operators.LT\n    const len =\n      it.opts.unicode === false ? _`${data}.length` : _`${useFunc(cxt.gen, ucs2length)}(${data})`\n    cxt.fail$data(_`${len} ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {usePattern} from \"../code\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type PatternError = ErrorObject<\"pattern\", {pattern: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match pattern \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{pattern: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"pattern\",\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {data, $data, schema, schemaCode, it} = cxt\n    // TODO regexp should be wrapped in try/catchs\n    const u = it.opts.unicodeRegExp ? \"u\" : \"\"\n    const regExp = $data ? _`(new RegExp(${schemaCode}, ${u}))` : usePattern(cxt, schema)\n    cxt.fail$data(_`!${regExp}.test(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} properties`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxProperties\", \"minProperties\"],\n  type: \"object\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxProperties\" ? operators.GT : operators.LT\n    cxt.fail$data(_`Object.keys(${data}).length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {\n  checkReportMissingProp,\n  checkMissingProp,\n  reportMissingProp,\n  propertyInData,\n  noPropertyInData,\n} from \"../code\"\nimport {_, str, nil, not, Name, Code} from \"../../compile/codegen\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nexport type RequiredError = ErrorObject<\n  \"required\",\n  {missingProperty: string},\n  string[] | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {missingProperty}}) => str`must have required property '${missingProperty}'`,\n  params: ({params: {missingProperty}}) => _`{missingProperty: ${missingProperty}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, schemaCode, data, $data, it} = cxt\n    const {opts} = it\n    if (!$data && schema.length === 0) return\n    const useLoop = schema.length >= opts.loopRequired\n    if (it.allErrors) allErrorsMode()\n    else exitOnErrorMode()\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties\n      const {definedProperties} = cxt.it\n      for (const requiredKey of schema) {\n        if (props?.[requiredKey] === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`\n          checkStrictMode(it, msg, it.opts.strictRequired)\n        }\n      }\n    }\n\n    function allErrorsMode(): void {\n      if (useLoop || $data) {\n        cxt.block$data(nil, loopAllRequired)\n      } else {\n        for (const prop of schema) {\n          checkReportMissingProp(cxt, prop)\n        }\n      }\n    }\n\n    function exitOnErrorMode(): void {\n      const missing = gen.let(\"missing\")\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true)\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid))\n        cxt.ok(valid)\n      } else {\n        gen.if(checkMissingProp(cxt, schema, missing))\n        reportMissingProp(cxt, missing)\n        gen.else()\n      }\n    }\n\n    function loopAllRequired(): void {\n      gen.forOf(\"prop\", schemaCode as Code, (prop) => {\n        cxt.setParams({missingProperty: prop})\n        gen.if(noPropertyInData(gen, data, prop, opts.ownProperties), () => cxt.error())\n      })\n    }\n\n    function loopUntilMissing(missing: Name, valid: Name): void {\n      cxt.setParams({missingProperty: missing})\n      gen.forOf(\n        missing,\n        schemaCode as Code,\n        () => {\n          gen.assign(valid, propertyInData(gen, data, missing, opts.ownProperties))\n          gen.if(not(valid), () => {\n            cxt.error()\n            gen.break()\n          })\n        },\n        nil\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} items`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxItems\", \"minItems\"],\n  type: \"array\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxItems\" ? operators.GT : operators.LT\n    cxt.fail$data(_`${data}.length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "// https://github.com/ajv-validator/ajv/issues/889\nimport * as equal from \"fast-deep-equal\"\n\ntype Equal = typeof equal & {code: string}\n;(equal as Equal).code = 'require(\"ajv/dist/runtime/equal\").default'\n\nexport default equal as Equal\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkDataTypes, getSchemaTypes, DataType} from \"../../compile/validate/dataType\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type UniqueItemsError = ErrorObject<\n  \"uniqueItems\",\n  {i: number; j: number},\n  boolean | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {i, j}}) =>\n    str`must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n  params: ({params: {i, j}}) => _`{i: ${i}, j: ${j}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"uniqueItems\",\n  type: \"array\",\n  schemaType: \"boolean\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, parentSchema, schemaCode, it} = cxt\n    if (!$data && !schema) return\n    const valid = gen.let(\"valid\")\n    const itemTypes = parentSchema.items ? getSchemaTypes(parentSchema.items) : []\n    cxt.block$data(valid, validateUniqueItems, _`${schemaCode} === false`)\n    cxt.ok(valid)\n\n    function validateUniqueItems(): void {\n      const i = gen.let(\"i\", _`${data}.length`)\n      const j = gen.let(\"j\")\n      cxt.setParams({i, j})\n      gen.assign(valid, true)\n      gen.if(_`${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j))\n    }\n\n    function canOptimize(): boolean {\n      return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\")\n    }\n\n    function loopN(i: Name, j: Name): void {\n      const item = gen.name(\"item\")\n      const wrongType = checkDataTypes(itemTypes, item, it.opts.strictNumbers, DataType.Wrong)\n      const indices = gen.const(\"indices\", _`{}`)\n      gen.for(_`;${i}--;`, () => {\n        gen.let(item, _`${data}[${i}]`)\n        gen.if(wrongType, _`continue`)\n        if (itemTypes.length > 1) gen.if(_`typeof ${item} == \"string\"`, _`${item} += \"_\"`)\n        gen\n          .if(_`typeof ${indices}[${item}] == \"number\"`, () => {\n            gen.assign(j, _`${indices}[${item}]`)\n            cxt.error()\n            gen.assign(valid, false).break()\n          })\n          .code(_`${indices}[${item}] = ${i}`)\n      })\n    }\n\n    function loopN2(i: Name, j: Name): void {\n      const eql = useFunc(gen, equal)\n      const outer = gen.name(\"outer\")\n      gen.label(outer).for(_`;${i}--;`, () =>\n        gen.for(_`${j} = ${i}; ${j}--;`, () =>\n          gen.if(_`${eql}(${data}[${i}], ${data}[${j}])`, () => {\n            cxt.error()\n            gen.assign(valid, false).break(outer)\n          })\n        )\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type ConstError = ErrorObject<\"const\", {allowedValue: any}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to constant\",\n  params: ({schemaCode}) => _`{allowedValue: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"const\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schemaCode, schema} = cxt\n    if ($data || (schema && typeof schema == \"object\")) {\n      cxt.fail$data(_`!${useFunc(gen, equal)}(${data}, ${schemaCode})`)\n    } else {\n      cxt.fail(_`${schema} !== ${data}`)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, or, Name, Code} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type EnumError = ErrorObject<\"enum\", {allowedValues: any[]}, any[] | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to one of the allowed values\",\n  params: ({schemaCode}) => _`{allowedValues: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"enum\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    if (!$data && schema.length === 0) throw new Error(\"enum must have non-empty array\")\n    const useLoop = schema.length >= it.opts.loopEnum\n    let eql: Name | undefined\n    const getEql = (): Name => (eql ??= useFunc(gen, equal))\n\n    let valid: Code\n    if (useLoop || $data) {\n      valid = gen.let(\"valid\")\n      cxt.block$data(valid, loopEnum)\n    } else {\n      /* istanbul ignore if */\n      if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n      const vSchema = gen.const(\"vSchema\", schemaCode)\n      valid = or(...schema.map((_x: unknown, i: number) => equalCode(vSchema, i)))\n    }\n    cxt.pass(valid)\n\n    function loopEnum(): void {\n      gen.assign(valid, false)\n      gen.forOf(\"v\", schemaCode as Code, (v) =>\n        gen.if(_`${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break())\n      )\n    }\n\n    function equalCode(vSchema: Name, i: number): Code {\n      const sch = schema[i]\n      return typeof sch === \"object\" && sch !== null\n        ? _`${getEql()}(${data}, ${vSchema}[${i}])`\n        : _`${data} === ${sch}`\n    }\n  },\n}\n\nexport default def\n", "import type {ErrorObject, Vocabulary} from \"../../types\"\nimport limitNumber, {LimitNumberError} from \"./limitNumber\"\nimport multipleOf, {MultipleOfError} from \"./multipleOf\"\nimport limitLength from \"./limitLength\"\nimport pattern, {PatternError} from \"./pattern\"\nimport limitProperties from \"./limitProperties\"\nimport required, {RequiredError} from \"./required\"\nimport limitItems from \"./limitItems\"\nimport uniqueItems, {UniqueItemsError} from \"./uniqueItems\"\nimport constKeyword, {ConstError} from \"./const\"\nimport enumKeyword, {EnumError} from \"./enum\"\n\nconst validation: Vocabulary = [\n  // number\n  limitNumber,\n  multipleOf,\n  // string\n  limitLength,\n  pattern,\n  // object\n  limitProperties,\n  required,\n  // array\n  limitItems,\n  uniqueItems,\n  // any\n  {keyword: \"type\", schemaType: [\"string\", \"array\"]},\n  {keyword: \"nullable\", schemaType: \"boolean\"},\n  constKeyword,\n  enumKeyword,\n]\n\nexport default validation\n\ntype LimitError = ErrorObject<\n  \"maxItems\" | \"minItems\" | \"minProperties\" | \"maxProperties\" | \"minLength\" | \"maxLength\",\n  {limit: number},\n  number | {$data: string}\n>\n\nexport type ValidationKeywordError =\n  | LimitError\n  | LimitNumberError\n  | MultipleOfError\n  | PatternError\n  | RequiredError\n  | UniqueItemsError\n  | ConstError\n  | EnumError\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type AdditionalItemsError = ErrorObject<\"additionalItems\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"additionalItems\" as const,\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {parentSchema, it} = cxt\n    const {items} = parentSchema\n    if (!Array.isArray(items)) {\n      checkStrictMode(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas')\n      return\n    }\n    validateAdditionalItems(cxt, items)\n  },\n}\n\nexport function validateAdditionalItems(cxt: KeywordCxt, items: AnySchema[]): void {\n  const {gen, schema, data, keyword, it} = cxt\n  it.items = true\n  const len = gen.const(\"len\", _`${data}.length`)\n  if (schema === false) {\n    cxt.setParams({len: items.length})\n    cxt.pass(_`${len} <= ${items.length}`)\n  } else if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n    const valid = gen.var(\"valid\", _`${len} <= ${items.length}`) // TODO var\n    gen.if(not(valid), () => validateItems(valid))\n    cxt.ok(valid)\n  }\n\n  function validateItems(valid: Name): void {\n    gen.forRange(\"i\", items.length, len, (i) => {\n      cxt.subschema({keyword, dataProp: i, dataPropType: Type.Num}, valid)\n      if (!it.allErrors) gen.if(not(valid), () => gen.break())\n    })\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema, AnySchemaObject} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {alwaysValidSchema, mergeEvaluated, checkStrictMode} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"array\", \"boolean\"],\n  before: \"uniqueItems\",\n  code(cxt: KeywordCxt) {\n    const {schema, it} = cxt\n    if (Array.isArray(schema)) return validateTuple(cxt, \"additionalItems\", schema)\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    cxt.ok(validateArray(cxt))\n  },\n}\n\nexport function validateTuple(\n  cxt: KeywordCxt,\n  extraItems: string,\n  schArr: AnySchema[] = cxt.schema\n): void {\n  const {gen, parentSchema, data, keyword, it} = cxt\n  checkStrictTuple(parentSchema)\n  if (it.opts.unevaluated && schArr.length && it.items !== true) {\n    it.items = mergeEvaluated.items(gen, schArr.length, it.items)\n  }\n  const valid = gen.name(\"valid\")\n  const len = gen.const(\"len\", _`${data}.length`)\n  schArr.forEach((sch: AnySchema, i: number) => {\n    if (alwaysValidSchema(it, sch)) return\n    gen.if(_`${len} > ${i}`, () =>\n      cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          dataProp: i,\n        },\n        valid\n      )\n    )\n    cxt.ok(valid)\n  })\n\n  function checkStrictTuple(sch: AnySchemaObject): void {\n    const {opts, errSchemaPath} = it\n    const l = schArr.length\n    const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false)\n    if (opts.strictTuples && !fullTuple) {\n      const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`\n      checkStrictMode(it, msg, opts.strictTuples)\n    }\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {validateTuple} from \"./items\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"prefixItems\",\n  type: \"array\",\n  schemaType: [\"array\"],\n  before: \"uniqueItems\",\n  code: (cxt) => validateTuple(cxt, \"items\"),\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\nimport {validateAdditionalItems} from \"./additionalItems\"\n\nexport type ItemsError = ErrorObject<\"items\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {schema, parentSchema, it} = cxt\n    const {prefixItems} = parentSchema\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    if (prefixItems) validateAdditionalItems(cxt, prefixItems)\n    else cxt.ok(validateArray(cxt))\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type ContainsError = ErrorObject<\n  \"contains\",\n  {minContains: number; maxContains?: number},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {min, max}}) =>\n    max === undefined\n      ? str`must contain at least ${min} valid item(s)`\n      : str`must contain at least ${min} and no more than ${max} valid item(s)`,\n  params: ({params: {min, max}}) =>\n    max === undefined ? _`{minContains: ${min}}` : _`{minContains: ${min}, maxContains: ${max}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"contains\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    let min: number\n    let max: number | undefined\n    const {minContains, maxContains} = parentSchema\n    if (it.opts.next) {\n      min = minContains === undefined ? 1 : minContains\n      max = maxContains\n    } else {\n      min = 1\n    }\n    const len = gen.const(\"len\", _`${data}.length`)\n    cxt.setParams({min, max})\n    if (max === undefined && min === 0) {\n      checkStrictMode(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`)\n      return\n    }\n    if (max !== undefined && min > max) {\n      checkStrictMode(it, `\"minContains\" > \"maxContains\" is always invalid`)\n      cxt.fail()\n      return\n    }\n    if (alwaysValidSchema(it, schema)) {\n      let cond = _`${len} >= ${min}`\n      if (max !== undefined) cond = _`${cond} && ${len} <= ${max}`\n      cxt.pass(cond)\n      return\n    }\n\n    it.items = true\n    const valid = gen.name(\"valid\")\n    if (max === undefined && min === 1) {\n      validateItems(valid, () => gen.if(valid, () => gen.break()))\n    } else if (min === 0) {\n      gen.let(valid, true)\n      if (max !== undefined) gen.if(_`${data}.length > 0`, validateItemsWithCount)\n    } else {\n      gen.let(valid, false)\n      validateItemsWithCount()\n    }\n    cxt.result(valid, () => cxt.reset())\n\n    function validateItemsWithCount(): void {\n      const schValid = gen.name(\"_valid\")\n      const count = gen.let(\"count\", 0)\n      validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)))\n    }\n\n    function validateItems(_valid: Name, block: () => void): void {\n      gen.forRange(\"i\", 0, len, (i) => {\n        cxt.subschema(\n          {\n            keyword: \"contains\",\n            dataProp: i,\n            dataPropType: Type.Num,\n            compositeRule: true,\n          },\n          _valid\n        )\n        block()\n      })\n    }\n\n    function checkLimits(count: Name): void {\n      gen.code(_`${count}++`)\n      if (max === undefined) {\n        gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true).break())\n      } else {\n        gen.if(_`${count} > ${max}`, () => gen.assign(valid, false).break())\n        if (min === 1) gen.assign(valid, true)\n        else gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true))\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  SchemaMap,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {checkReportMissingProp, checkMissingProp, reportMissingProp, propertyInData} from \"../code\"\n\nexport type PropertyDependencies = {[K in string]?: string[]}\n\nexport interface DependenciesErrorParams {\n  property: string\n  missingProperty: string\n  depsCount: number\n  deps: string // TODO change to string[]\n}\n\ntype SchemaDependencies = SchemaMap\n\nexport type DependenciesError = ErrorObject<\n  \"dependencies\",\n  DependenciesErrorParams,\n  {[K in string]?: string[] | AnySchema}\n>\n\nexport const error: KeywordErrorDefinition = {\n  message: ({params: {property, depsCount, deps}}) => {\n    const property_ies = depsCount === 1 ? \"property\" : \"properties\"\n    return str`must have ${property_ies} ${deps} when property ${property} is present`\n  },\n  params: ({params: {property, depsCount, deps, missingProperty}}) =>\n    _`{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"dependencies\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const [propDeps, schDeps] = splitDependencies(cxt)\n    validatePropertyDeps(cxt, propDeps)\n    validateSchemaDeps(cxt, schDeps)\n  },\n}\n\nfunction splitDependencies({schema}: KeywordCxt): [PropertyDependencies, SchemaDependencies] {\n  const propertyDeps: PropertyDependencies = {}\n  const schemaDeps: SchemaDependencies = {}\n  for (const key in schema) {\n    if (key === \"__proto__\") continue\n    const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps\n    deps[key] = schema[key]\n  }\n  return [propertyDeps, schemaDeps]\n}\n\nexport function validatePropertyDeps(\n  cxt: KeywordCxt,\n  propertyDeps: {[K in string]?: string[]} = cxt.schema\n): void {\n  const {gen, data, it} = cxt\n  if (Object.keys(propertyDeps).length === 0) return\n  const missing = gen.let(\"missing\")\n  for (const prop in propertyDeps) {\n    const deps = propertyDeps[prop] as string[]\n    if (deps.length === 0) continue\n    const hasProperty = propertyInData(gen, data, prop, it.opts.ownProperties)\n    cxt.setParams({\n      property: prop,\n      depsCount: deps.length,\n      deps: deps.join(\", \"),\n    })\n    if (it.allErrors) {\n      gen.if(hasProperty, () => {\n        for (const depProp of deps) {\n          checkReportMissingProp(cxt, depProp)\n        }\n      })\n    } else {\n      gen.if(_`${hasProperty} && (${checkMissingProp(cxt, deps, missing)})`)\n      reportMissingProp(cxt, missing)\n      gen.else()\n    }\n  }\n}\n\nexport function validateSchemaDeps(cxt: KeywordCxt, schemaDeps: SchemaMap = cxt.schema): void {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  for (const prop in schemaDeps) {\n    if (alwaysValidSchema(it, schemaDeps[prop] as AnySchema)) continue\n    gen.if(\n      propertyInData(gen, data, prop, it.opts.ownProperties),\n      () => {\n        const schCxt = cxt.subschema({keyword, schemaProp: prop}, valid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n      },\n      () => gen.var(valid, true) // TODO var\n    )\n    cxt.ok(valid)\n  }\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, not} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type PropertyNamesError = ErrorObject<\"propertyNames\", {propertyName: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: \"property name must be valid\",\n  params: ({params}) => _`{propertyName: ${params.propertyName}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"propertyNames\",\n  type: \"object\",\n  schemaType: [\"object\", \"boolean\"],\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, it} = cxt\n    if (alwaysValidSchema(it, schema)) return\n    const valid = gen.name(\"valid\")\n\n    gen.forIn(\"key\", data, (key) => {\n      cxt.setParams({propertyName: key})\n      cxt.subschema(\n        {\n          keyword: \"propertyNames\",\n          data: key,\n          dataTypes: [\"string\"],\n          propertyName: key,\n          compositeRule: true,\n        },\n        valid\n      )\n      gen.if(not(valid), () => {\n        cxt.error(true)\n        if (!it.allErrors) gen.break()\n      })\n    })\n\n    cxt.ok(valid)\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  AddedKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport {allSchemaProperties, usePattern, isOwnProperty} from \"../code\"\nimport {_, nil, or, not, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport type {SubschemaArgs} from \"../../compile/validate/subschema\"\nimport {alwaysValidSchema, schemaRefOrVal, Type} from \"../../compile/util\"\n\nexport type AdditionalPropertiesError = ErrorObject<\n  \"additionalProperties\",\n  {additionalProperty: string},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must NOT have additional properties\",\n  params: ({params}) => _`{additionalProperty: ${params.additionalProperty}}`,\n}\n\nconst def: CodeKeywordDefinition & AddedKeywordDefinition = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {gen, schema, parentSchema, data, errsCount, it} = cxt\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\")\n    const {allErrors, opts} = it\n    it.props = true\n    if (opts.removeAdditional !== \"all\" && alwaysValidSchema(it, schema)) return\n    const props = allSchemaProperties(parentSchema.properties)\n    const patProps = allSchemaProperties(parentSchema.patternProperties)\n    checkAdditionalProperties()\n    cxt.ok(_`${errsCount} === ${N.errors}`)\n\n    function checkAdditionalProperties(): void {\n      gen.forIn(\"key\", data, (key: Name) => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key)\n        else gen.if(isAdditional(key), () => additionalPropertyCode(key))\n      })\n    }\n\n    function isAdditional(key: Name): Code {\n      let definedProp: Code\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = schemaRefOrVal(it, parentSchema.properties, \"properties\")\n        definedProp = isOwnProperty(gen, propsSchema as Code, key)\n      } else if (props.length) {\n        definedProp = or(...props.map((p) => _`${key} === ${p}`))\n      } else {\n        definedProp = nil\n      }\n      if (patProps.length) {\n        definedProp = or(definedProp, ...patProps.map((p) => _`${usePattern(cxt, p)}.test(${key})`))\n      }\n      return not(definedProp)\n    }\n\n    function deleteAdditional(key: Name): void {\n      gen.code(_`delete ${data}[${key}]`)\n    }\n\n    function additionalPropertyCode(key: Name): void {\n      if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n        deleteAdditional(key)\n        return\n      }\n\n      if (schema === false) {\n        cxt.setParams({additionalProperty: key})\n        cxt.error()\n        if (!allErrors) gen.break()\n        return\n      }\n\n      if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n        const valid = gen.name(\"valid\")\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false)\n          gen.if(not(valid), () => {\n            cxt.reset()\n            deleteAdditional(key)\n          })\n        } else {\n          applyAdditionalSchema(key, valid)\n          if (!allErrors) gen.if(not(valid), () => gen.break())\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key: Name, valid: Name, errors?: false): void {\n      const subschema: SubschemaArgs = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: Type.Str,\n      }\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        })\n      }\n      cxt.subschema(subschema, valid)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {KeywordCxt} from \"../../compile/validate\"\nimport {propertyInData, allSchemaProperties} from \"../code\"\nimport {alwaysValidSchema, toHash, mergeEvaluated} from \"../../compile/util\"\nimport apDef from \"./additionalProperties\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      apDef.code(new KeywordCxt(it, apDef, \"additionalProperties\"))\n    }\n    const allProps = allSchemaProperties(schema)\n    for (const prop of allProps) {\n      it.definedProperties.add(prop)\n    }\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = mergeEvaluated.props(gen, toHash(allProps), it.props)\n    }\n    const properties = allProps.filter((p) => !alwaysValidSchema(it, schema[p]))\n    if (properties.length === 0) return\n    const valid = gen.name(\"valid\")\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop)\n      } else {\n        gen.if(propertyInData(gen, data, prop, it.opts.ownProperties))\n        applyPropertySchema(prop)\n        if (!it.allErrors) gen.else().var(valid, true)\n        gen.endIf()\n      }\n      cxt.it.definedProperties.add(prop)\n      cxt.ok(valid)\n    }\n\n    function hasDefault(prop: string): boolean | undefined {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined\n    }\n\n    function applyPropertySchema(prop: string): void {\n      cxt.subschema(\n        {\n          keyword: \"properties\",\n          schemaProp: prop,\n          dataProp: prop,\n        },\n        valid\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {allSchemaProperties, usePattern} from \"../code\"\nimport {_, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\nimport {evaluatedPropsToName, Type} from \"../../compile/util\"\nimport {AnySchema} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"patternProperties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, parentSchema, it} = cxt\n    const {opts} = it\n    const patterns = allSchemaProperties(schema)\n    const alwaysValidPatterns = patterns.filter((p) =>\n      alwaysValidSchema(it, schema[p] as AnySchema)\n    )\n\n    if (\n      patterns.length === 0 ||\n      (alwaysValidPatterns.length === patterns.length &&\n        (!it.opts.unevaluated || it.props === true))\n    ) {\n      return\n    }\n\n    const checkProperties =\n      opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties\n    const valid = gen.name(\"valid\")\n    if (it.props !== true && !(it.props instanceof Name)) {\n      it.props = evaluatedPropsToName(gen, it.props)\n    }\n    const {props} = it\n    validatePatternProperties()\n\n    function validatePatternProperties(): void {\n      for (const pat of patterns) {\n        if (checkProperties) checkMatchingProperties(pat)\n        if (it.allErrors) {\n          validateProperties(pat)\n        } else {\n          gen.var(valid, true) // TODO var\n          validateProperties(pat)\n          gen.if(valid)\n        }\n      }\n    }\n\n    function checkMatchingProperties(pat: string): void {\n      for (const prop in checkProperties) {\n        if (new RegExp(pat).test(prop)) {\n          checkStrictMode(\n            it,\n            `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`\n          )\n        }\n      }\n    }\n\n    function validateProperties(pat: string): void {\n      gen.forIn(\"key\", data, (key) => {\n        gen.if(_`${usePattern(cxt, pat)}.test(${key})`, () => {\n          const alwaysValid = alwaysValidPatterns.includes(pat)\n          if (!alwaysValid) {\n            cxt.subschema(\n              {\n                keyword: \"patternProperties\",\n                schemaProp: pat,\n                dataProp: key,\n                dataPropType: Type.Str,\n              },\n              valid\n            )\n          }\n\n          if (it.opts.unevaluated && props !== true) {\n            gen.assign(_`${props}[${key}]`, true)\n          } else if (!alwaysValid && !it.allErrors) {\n            // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n            // or if all properties were evaluated (props === true)\n            gen.if(not(valid), () => gen.break())\n          }\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type NotKeywordError = ErrorNoParams<\"not\", AnySchema>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"not\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    if (alwaysValidSchema(it, schema)) {\n      cxt.fail()\n      return\n    }\n\n    const valid = gen.name(\"valid\")\n    cxt.subschema(\n      {\n        keyword: \"not\",\n        compositeRule: true,\n        createErrors: false,\n        allErrors: false,\n      },\n      valid\n    )\n\n    cxt.failResult(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error()\n    )\n  },\n  error: {message: \"must NOT be valid\"},\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport {validateUnion} from \"../code\"\n\nexport type AnyOfError = ErrorNoParams<\"anyOf\", AnySchema[]>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"anyOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  code: validateUnion,\n  error: {message: \"must match a schema in anyOf\"},\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {SchemaCxt} from \"../../compile\"\n\nexport type OneOfError = ErrorObject<\n  \"oneOf\",\n  {passingSchemas: [number, number] | null},\n  AnySchema[]\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must match exactly one schema in oneOf\",\n  params: ({params}) => _`{passingSchemas: ${params.passing}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"oneOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    if (it.opts.discriminator && parentSchema.discriminator) return\n    const schArr: AnySchema[] = schema\n    const valid = gen.let(\"valid\", false)\n    const passing = gen.let(\"passing\", null)\n    const schValid = gen.name(\"_valid\")\n    cxt.setParams({passing})\n    // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n\n    gen.block(validateOneOf)\n\n    cxt.result(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error(true)\n    )\n\n    function validateOneOf(): void {\n      schArr.forEach((sch: AnySchema, i: number) => {\n        let schCxt: SchemaCxt | undefined\n        if (alwaysValidSchema(it, sch)) {\n          gen.var(schValid, true)\n        } else {\n          schCxt = cxt.subschema(\n            {\n              keyword: \"oneOf\",\n              schemaProp: i,\n              compositeRule: true,\n            },\n            schValid\n          )\n        }\n\n        if (i > 0) {\n          gen\n            .if(_`${schValid} && ${valid}`)\n            .assign(valid, false)\n            .assign(passing, _`[${passing}, ${i}]`)\n            .else()\n        }\n\n        gen.if(schValid, () => {\n          gen.assign(valid, true)\n          gen.assign(passing, i)\n          if (schCxt) cxt.mergeEvaluated(schCxt, Name)\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"allOf\",\n  schemaType: \"array\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    const valid = gen.name(\"valid\")\n    schema.forEach((sch: AnySchema, i: number) => {\n      if (alwaysValidSchema(it, sch)) return\n      const schCxt = cxt.subschema({keyword: \"allOf\", schemaProp: i}, valid)\n      cxt.ok(valid)\n      cxt.mergeEvaluated(schCxt)\n    })\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"../../compile\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\n\nexport type IfKeywordError = ErrorObject<\"if\", {failingKeyword: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params}) => str`must match \"${params.ifClause}\" schema`,\n  params: ({params}) => _`{failingKeyword: ${params.ifClause}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"if\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, parentSchema, it} = cxt\n    if (parentSchema.then === undefined && parentSchema.else === undefined) {\n      checkStrictMode(it, '\"if\" without \"then\" and \"else\" is ignored')\n    }\n    const hasThen = hasSchema(it, \"then\")\n    const hasElse = hasSchema(it, \"else\")\n    if (!hasThen && !hasElse) return\n\n    const valid = gen.let(\"valid\", true)\n    const schValid = gen.name(\"_valid\")\n    validateIf()\n    cxt.reset()\n\n    if (hasThen && hasElse) {\n      const ifClause = gen.let(\"ifClause\")\n      cxt.setParams({ifClause})\n      gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause))\n    } else if (hasThen) {\n      gen.if(schValid, validateClause(\"then\"))\n    } else {\n      gen.if(not(schValid), validateClause(\"else\"))\n    }\n\n    cxt.pass(valid, () => cxt.error(true))\n\n    function validateIf(): void {\n      const schCxt = cxt.subschema(\n        {\n          keyword: \"if\",\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        },\n        schValid\n      )\n      cxt.mergeEvaluated(schCxt)\n    }\n\n    function validateClause(keyword: string, ifClause?: Name): () => void {\n      return () => {\n        const schCxt = cxt.subschema({keyword}, schValid)\n        gen.assign(valid, schValid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n        if (ifClause) gen.assign(ifClause, _`${keyword}`)\n        else cxt.setParams({ifClause: keyword})\n      }\n    }\n  },\n}\n\nfunction hasSchema(it: SchemaObjCxt, keyword: string): boolean {\n  const schema = it.schema[keyword]\n  return schema !== undefined && !alwaysValidSchema(it, schema)\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"then\", \"else\"],\n  schemaType: [\"object\", \"boolean\"],\n  code({keyword, parentSchema, it}: KeywordCxt) {\n    if (parentSchema.if === undefined) checkStrictMode(it, `\"${keyword}\" without \"if\" is ignored`)\n  },\n}\n\nexport default def\n", "import type {ErrorNoParams, Vocabulary} from \"../../types\"\nimport additionalItems, {AdditionalItemsError} from \"./additionalItems\"\nimport prefixItems from \"./prefixItems\"\nimport items from \"./items\"\nimport items2020, {ItemsError} from \"./items2020\"\nimport contains, {ContainsError} from \"./contains\"\nimport dependencies, {DependenciesError} from \"./dependencies\"\nimport propertyNames, {PropertyNamesError} from \"./propertyNames\"\nimport additionalProperties, {AdditionalPropertiesError} from \"./additionalProperties\"\nimport properties from \"./properties\"\nimport patternProperties from \"./patternProperties\"\nimport notKeyword, {NotKeywordError} from \"./not\"\nimport anyOf, {AnyOfError} from \"./anyOf\"\nimport oneOf, {OneOfError} from \"./oneOf\"\nimport allOf from \"./allOf\"\nimport ifKeyword, {IfKeywordError} from \"./if\"\nimport thenElse from \"./thenElse\"\n\nexport default function getApplicator(draft2020 = false): Vocabulary {\n  const applicator = [\n    // any\n    notKeyword,\n    anyOf,\n    oneOf,\n    allOf,\n    ifKeyword,\n    thenElse,\n    // object\n    propertyNames,\n    additionalProperties,\n    dependencies,\n    properties,\n    patternProperties,\n  ]\n  // array\n  if (draft2020) applicator.push(prefixItems, items2020)\n  else applicator.push(additionalItems, items)\n  applicator.push(contains)\n  return applicator\n}\n\nexport type ApplicatorKeywordError =\n  | ErrorNoParams<\"false schema\">\n  | AdditionalItemsError\n  | ItemsError\n  | ContainsError\n  | AdditionalPropertiesError\n  | DependenciesError\n  | IfKeywordError\n  | AnyOfError\n  | OneOfError\n  | NotKeywordError\n  | PropertyNamesError\n", "import type {\n  AddedFormat,\n  FormatValidator,\n  AsyncFormatValidator,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, nil, or, Code, getProperty, regexpCode} from \"../../compile/codegen\"\n\ntype FormatValidate =\n  | FormatValidator<string>\n  | FormatValidator<number>\n  | AsyncFormatValidator<string>\n  | AsyncFormatValidator<number>\n  | RegExp\n  | string\n  | true\n\nexport type FormatError = ErrorObject<\"format\", {format: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match format \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{format: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"format\",\n  type: [\"number\", \"string\"],\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt, ruleType?: string) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    const {opts, errSchemaPath, schemaEnv, self} = it\n    if (!opts.validateFormats) return\n\n    if ($data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fDef = gen.const(\"fDef\", _`${fmts}[${schemaCode}]`)\n      const fType = gen.let(\"fType\")\n      const format = gen.let(\"format\")\n      // TODO simplify\n      gen.if(\n        _`typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`,\n        () => gen.assign(fType, _`${fDef}.type || \"string\"`).assign(format, _`${fDef}.validate`),\n        () => gen.assign(fType, _`\"string\"`).assign(format, fDef)\n      )\n      cxt.fail$data(or(unknownFmt(), invalidFmt()))\n\n      function unknownFmt(): Code {\n        if (opts.strictSchema === false) return nil\n        return _`${schemaCode} && !${format}`\n      }\n\n      function invalidFmt(): Code {\n        const callFormat = schemaEnv.$async\n          ? _`(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n          : _`${format}(${data})`\n        const validData = _`(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`\n        return _`${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`\n      }\n    }\n\n    function validateFormat(): void {\n      const formatDef: AddedFormat | undefined = self.formats[schema]\n      if (!formatDef) {\n        unknownFormat()\n        return\n      }\n      if (formatDef === true) return\n      const [fmtType, format, fmtRef] = getFormat(formatDef)\n      if (fmtType === ruleType) cxt.pass(validCondition())\n\n      function unknownFormat(): void {\n        if (opts.strictSchema === false) {\n          self.logger.warn(unknownMsg())\n          return\n        }\n        throw new Error(unknownMsg())\n\n        function unknownMsg(): string {\n          return `unknown format \"${schema as string}\" ignored in schema at path \"${errSchemaPath}\"`\n        }\n      }\n\n      function getFormat(fmtDef: AddedFormat): [string, FormatValidate, Code] {\n        const code =\n          fmtDef instanceof RegExp\n            ? regexpCode(fmtDef)\n            : opts.code.formats\n            ? _`${opts.code.formats}${getProperty(schema)}`\n            : undefined\n        const fmt = gen.scopeValue(\"formats\", {key: schema, ref: fmtDef, code})\n        if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n          return [fmtDef.type || \"string\", fmtDef.validate, _`${fmt}.validate`]\n        }\n\n        return [\"string\", fmtDef, fmt]\n      }\n\n      function validCondition(): Code {\n        if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n          if (!schemaEnv.$async) throw new Error(\"async format in sync schema\")\n          return _`await ${fmtRef}(${data})`\n        }\n        return typeof format == \"function\" ? _`${fmtRef}(${data})` : _`${fmtRef}.test(${data})`\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport formatKeyword from \"./format\"\n\nconst format: Vocabulary = [formatKeyword]\n\nexport default format\n", "import type {Vocabulary} from \"../types\"\n\nexport const metadataVocabulary: Vocabulary = [\n  \"title\",\n  \"description\",\n  \"default\",\n  \"deprecated\",\n  \"readOnly\",\n  \"writeOnly\",\n  \"examples\",\n]\n\nexport const contentVocabulary: Vocabulary = [\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"contentSchema\",\n]\n", "import type {Vocabulary} from \"../types\"\nimport coreVocabulary from \"./core\"\nimport validationVocabulary from \"./validation\"\nimport getApplicatorVocabulary from \"./applicator\"\nimport formatVocabulary from \"./format\"\nimport {metadataVocabulary, contentVocabulary} from \"./metadata\"\n\nconst draft7Vocabularies: Vocabulary[] = [\n  coreVocabulary,\n  validationVocabulary,\n  getApplicatorVocabulary(),\n  formatVocabulary,\n  metadataVocabulary,\n  contentVocabulary,\n]\n\nexport default draft7Vocabularies\n", "import type {ErrorObject} from \"../../types\"\n\nexport enum DiscrError {\n  Tag = \"tag\",\n  Mapping = \"mapping\",\n}\n\nexport type DiscrErrorObj<E extends DiscrError> = ErrorObject<\n  \"discriminator\",\n  {error: E; tag: string; tagValue: unknown},\n  string\n>\n", "import type {CodeKeywordDefinition, AnySchemaObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, getProperty, Name} from \"../../compile/codegen\"\nimport {DiscrError, DiscrErrorObj} from \"../discriminator/types\"\nimport {resolveRef, SchemaEnv} from \"../../compile\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {schemaHasRulesButRef} from \"../../compile/util\"\n\nexport type DiscriminatorError = DiscrErrorObj<DiscrError.Tag> | DiscrErrorObj<DiscrError.Mapping>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {discrError, tagName}}) =>\n    discrError === DiscrError.Tag\n      ? `tag \"${tagName}\" must be string`\n      : `value of tag \"${tagName}\" must be in oneOf`,\n  params: ({params: {discrError, tag, tagName}}) =>\n    _`{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"discriminator\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schema, parentSchema, it} = cxt\n    const {oneOf} = parentSchema\n    if (!it.opts.discriminator) {\n      throw new Error(\"discriminator: requires discriminator option\")\n    }\n    const tagName = schema.propertyName\n    if (typeof tagName != \"string\") throw new Error(\"discriminator: requires propertyName\")\n    if (schema.mapping) throw new Error(\"discriminator: mapping is not supported\")\n    if (!oneOf) throw new Error(\"discriminator: requires oneOf keyword\")\n    const valid = gen.let(\"valid\", false)\n    const tag = gen.const(\"tag\", _`${data}${getProperty(tagName)}`)\n    gen.if(\n      _`typeof ${tag} == \"string\"`,\n      () => validateMapping(),\n      () => cxt.error(false, {discrError: DiscrError.Tag, tag, tagName})\n    )\n    cxt.ok(valid)\n\n    function validateMapping(): void {\n      const mapping = getMapping()\n      gen.if(false)\n      for (const tagValue in mapping) {\n        gen.elseIf(_`${tag} === ${tagValue}`)\n        gen.assign(valid, applyTagSchema(mapping[tagValue]))\n      }\n      gen.else()\n      cxt.error(false, {discrError: DiscrError.Mapping, tag, tagName})\n      gen.endIf()\n    }\n\n    function applyTagSchema(schemaProp?: number): Name {\n      const _valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema({keyword: \"oneOf\", schemaProp}, _valid)\n      cxt.mergeEvaluated(schCxt, Name)\n      return _valid\n    }\n\n    function getMapping(): {[T in string]?: number} {\n      const oneOfMapping: {[T in string]?: number} = {}\n      const topRequired = hasRequired(parentSchema)\n      let tagRequired = true\n      for (let i = 0; i < oneOf.length; i++) {\n        let sch = oneOf[i]\n        if (sch?.$ref && !schemaHasRulesButRef(sch, it.self.RULES)) {\n          const ref = sch.$ref\n          sch = resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref)\n          if (sch instanceof SchemaEnv) sch = sch.schema\n          if (sch === undefined) throw new MissingRefError(it.opts.uriResolver, it.baseId, ref)\n        }\n        const propSch = sch?.properties?.[tagName]\n        if (typeof propSch != \"object\") {\n          throw new Error(\n            `discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`\n          )\n        }\n        tagRequired = tagRequired && (topRequired || hasRequired(sch))\n        addMappings(propSch, i)\n      }\n      if (!tagRequired) throw new Error(`discriminator: \"${tagName}\" must be required`)\n      return oneOfMapping\n\n      function hasRequired({required}: AnySchemaObject): boolean {\n        return Array.isArray(required) && required.includes(tagName)\n      }\n\n      function addMappings(sch: AnySchemaObject, i: number): void {\n        if (sch.const) {\n          addMapping(sch.const, i)\n        } else if (sch.enum) {\n          for (const tagValue of sch.enum) {\n            addMapping(tagValue, i)\n          }\n        } else {\n          throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`)\n        }\n      }\n\n      function addMapping(tagValue: unknown, i: number): void {\n        if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n          throw new Error(`discriminator: \"${tagName}\" values must be unique strings`)\n        }\n        oneOfMapping[tagValue] = i\n      }\n    }\n  },\n}\n\nexport default def\n", "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$id\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Core schema meta-schema\",\n  \"definitions\": {\n    \"schemaArray\": {\n      \"type\": \"array\",\n      \"minItems\": 1,\n      \"items\": {\"$ref\": \"#\"}\n    },\n    \"nonNegativeInteger\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"nonNegativeIntegerDefault0\": {\n      \"allOf\": [{\"$ref\": \"#/definitions/nonNegativeInteger\"}, {\"default\": 0}]\n    },\n    \"simpleTypes\": {\n      \"enum\": [\"array\", \"boolean\", \"integer\", \"null\", \"number\", \"object\", \"string\"]\n    },\n    \"stringArray\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"uniqueItems\": true,\n      \"default\": []\n    }\n  },\n  \"type\": [\"object\", \"boolean\"],\n  \"properties\": {\n    \"$id\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$schema\": {\n      \"type\": \"string\",\n      \"format\": \"uri\"\n    },\n    \"$ref\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$comment\": {\n      \"type\": \"string\"\n    },\n    \"title\": {\n      \"type\": \"string\"\n    },\n    \"description\": {\n      \"type\": \"string\"\n    },\n    \"default\": true,\n    \"readOnly\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"examples\": {\n      \"type\": \"array\",\n      \"items\": true\n    },\n    \"multipleOf\": {\n      \"type\": \"number\",\n      \"exclusiveMinimum\": 0\n    },\n    \"maximum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMaximum\": {\n      \"type\": \"number\"\n    },\n    \"minimum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMinimum\": {\n      \"type\": \"number\"\n    },\n    \"maxLength\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minLength\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"pattern\": {\n      \"type\": \"string\",\n      \"format\": \"regex\"\n    },\n    \"additionalItems\": {\"$ref\": \"#\"},\n    \"items\": {\n      \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/schemaArray\"}],\n      \"default\": true\n    },\n    \"maxItems\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minItems\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"uniqueItems\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"contains\": {\"$ref\": \"#\"},\n    \"maxProperties\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minProperties\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"required\": {\"$ref\": \"#/definitions/stringArray\"},\n    \"additionalProperties\": {\"$ref\": \"#\"},\n    \"definitions\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"properties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"patternProperties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"propertyNames\": {\"format\": \"regex\"},\n      \"default\": {}\n    },\n    \"dependencies\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\n        \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/stringArray\"}]\n      }\n    },\n    \"propertyNames\": {\"$ref\": \"#\"},\n    \"const\": true,\n    \"enum\": {\n      \"type\": \"array\",\n      \"items\": true,\n      \"minItems\": 1,\n      \"uniqueItems\": true\n    },\n    \"type\": {\n      \"anyOf\": [\n        {\"$ref\": \"#/definitions/simpleTypes\"},\n        {\n          \"type\": \"array\",\n          \"items\": {\"$ref\": \"#/definitions/simpleTypes\"},\n          \"minItems\": 1,\n          \"uniqueItems\": true\n        }\n      ]\n    },\n    \"format\": {\"type\": \"string\"},\n    \"contentMediaType\": {\"type\": \"string\"},\n    \"contentEncoding\": {\"type\": \"string\"},\n    \"if\": {\"$ref\": \"#\"},\n    \"then\": {\"$ref\": \"#\"},\n    \"else\": {\"$ref\": \"#\"},\n    \"allOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"anyOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"oneOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"not\": {\"$ref\": \"#\"}\n  },\n  \"default\": true\n}\n", "import type {AnySchemaObject} from \"./types\"\nimport AjvCore from \"./core\"\nimport draft7Vocabularies from \"./vocabularies/draft7\"\nimport discriminator from \"./vocabularies/discriminator\"\nimport * as draft7MetaSchema from \"./refs/json-schema-draft-07.json\"\n\nconst META_SUPPORT_DATA = [\"/properties\"]\n\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\"\n\nexport class Ajv extends AjvCore {\n  _addVocabularies(): void {\n    super._addVocabularies()\n    draft7Vocabularies.forEach((v) => this.addVocabulary(v))\n    if (this.opts.discriminator) this.addKeyword(discriminator)\n  }\n\n  _addDefaultMetaSchema(): void {\n    super._addDefaultMetaSchema()\n    if (!this.opts.meta) return\n    const metaSchema = this.opts.$data\n      ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n      : draft7MetaSchema\n    this.addMetaSchema(metaSchema, META_SCHEMA_ID, false)\n    this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    return (this.opts.defaultMeta =\n      super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined))\n  }\n}\n\nmodule.exports = exports = Ajv\nmodule.exports.Ajv = Ajv\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default Ajv\n\nexport {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  SchemaValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {Plugin, Options, CodeOptions, InstanceOptions, Logger, ErrorsTextOptions} from \"./core\"\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\nexport {default as ValidationError} from \"./runtime/validation_error\"\nexport {default as MissingRefError} from \"./compile/ref_error\"\n", "import type {Format, FormatDefinition} from \"ajv\"\nimport type {FormatValidator, FormatCompare} from \"ajv/dist/types\"\n\nexport type FormatMode = \"fast\" | \"full\"\n\nexport type FormatName =\n  | \"date\"\n  | \"time\"\n  | \"date-time\"\n  | \"iso-time\"\n  | \"iso-date-time\"\n  | \"duration\"\n  | \"uri\"\n  | \"uri-reference\"\n  | \"uri-template\"\n  | \"url\"\n  | \"email\"\n  | \"hostname\"\n  | \"ipv4\"\n  | \"ipv6\"\n  | \"regex\"\n  | \"uuid\"\n  | \"json-pointer\"\n  | \"json-pointer-uri-fragment\"\n  | \"relative-json-pointer\"\n  | \"byte\"\n  | \"int32\"\n  | \"int64\"\n  | \"float\"\n  | \"double\"\n  | \"password\"\n  | \"binary\"\n\nexport type DefinedFormats = {\n  [key in FormatName]: Format\n}\n\nfunction fmtDef(\n  validate: RegExp | FormatValidator<string>,\n  compare: FormatCompare<string>\n): FormatDefinition<string> {\n  return {validate, compare}\n}\n\nexport const fullFormats: DefinedFormats = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: fmtDef(date, compareDate),\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: fmtDef(getTime(true), compareTime),\n  \"date-time\": fmtDef(getDateTime(true), compareDateTime),\n  \"iso-time\": fmtDef(getTime(), compareIsoTime),\n  \"iso-date-time\": fmtDef(getDateTime(), compareIsoDateTime),\n  // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n  duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n  uri,\n  \"uri-reference\":\n    /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n  // uri-template: https://tools.ietf.org/html/rfc6570\n  \"uri-template\":\n    /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n  // For the source: https://gist.github.com/dperini/729294\n  // For test cases: https://mathiasbynens.be/demo/url-regex\n  url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n  email:\n    /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname:\n    /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)$/,\n  ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n  regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n  \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n  // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n  // byte: https://github.com/miguelmota/is-base64\n  byte,\n  // signed 32 bit integer\n  int32: {type: \"number\", validate: validateInt32},\n  // signed 64 bit integer\n  int64: {type: \"number\", validate: validateInt64},\n  // C-type float\n  float: {type: \"number\", validate: validateNumber},\n  // C-type double\n  double: {type: \"number\", validate: validateNumber},\n  // hint to the UI to hide input strings\n  password: true,\n  // unchecked string payload\n  binary: true,\n}\n\nexport const fastFormats: DefinedFormats = {\n  ...fullFormats,\n  date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n  time: fmtDef(\n    /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n    compareTime\n  ),\n  \"date-time\": fmtDef(\n    /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\dt(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n    compareDateTime\n  ),\n  \"iso-time\": fmtDef(\n    /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n    compareIsoTime\n  ),\n  \"iso-date-time\": fmtDef(\n    /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n    compareIsoDateTime\n  ),\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n  email:\n    /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n}\n\nexport const formatNames = Object.keys(fullFormats) as FormatName[]\n\nfunction isLeapYear(year: number): boolean {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)\n}\n\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n\nfunction date(str: string): boolean {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  const matches: string[] | null = DATE.exec(str)\n  if (!matches) return false\n  const year: number = +matches[1]\n  const month: number = +matches[2]\n  const day: number = +matches[3]\n  return (\n    month >= 1 &&\n    month <= 12 &&\n    day >= 1 &&\n    day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month])\n  )\n}\n\nfunction compareDate(d1: string, d2: string): number | undefined {\n  if (!(d1 && d2)) return undefined\n  if (d1 > d2) return 1\n  if (d1 < d2) return -1\n  return 0\n}\n\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d(?:\\.\\d+)?)(z|([+-])(\\d\\d)(?::?(\\d\\d))?)?$/i\n\nfunction getTime(strictTimeZone?: boolean): (str: string) => boolean {\n  return function time(str: string): boolean {\n    const matches: string[] | null = TIME.exec(str)\n    if (!matches) return false\n    const hr: number = +matches[1]\n    const min: number = +matches[2]\n    const sec: number = +matches[3]\n    const tz: string | undefined = matches[4]\n    const tzSign: number = matches[5] === \"-\" ? -1 : 1\n    const tzH: number = +(matches[6] || 0)\n    const tzM: number = +(matches[7] || 0)\n    if (tzH > 23 || tzM > 59 || (strictTimeZone && !tz)) return false\n    if (hr <= 23 && min <= 59 && sec < 60) return true\n    // leap second\n    const utcMin = min - tzM * tzSign\n    const utcHr = hr - tzH * tzSign - (utcMin < 0 ? 1 : 0)\n    return (utcHr === 23 || utcHr === -1) && (utcMin === 59 || utcMin === -1) && sec < 61\n  }\n}\n\nfunction compareTime(s1: string, s2: string): number | undefined {\n  if (!(s1 && s2)) return undefined\n  const t1 = new Date(\"2020-01-01T\" + s1).valueOf()\n  const t2 = new Date(\"2020-01-01T\" + s2).valueOf()\n  if (!(t1 && t2)) return undefined\n  return t1 - t2\n}\n\nfunction compareIsoTime(t1: string, t2: string): number | undefined {\n  if (!(t1 && t2)) return undefined\n  const a1 = TIME.exec(t1)\n  const a2 = TIME.exec(t2)\n  if (!(a1 && a2)) return undefined\n  t1 = a1[1] + a1[2] + a1[3]\n  t2 = a2[1] + a2[2] + a2[3]\n  if (t1 > t2) return 1\n  if (t1 < t2) return -1\n  return 0\n}\n\nconst DATE_TIME_SEPARATOR = /t|\\s/i\nfunction getDateTime(strictTimeZone?: boolean): (str: string) => boolean {\n  const time = getTime(strictTimeZone)\n\n  return function date_time(str: string): boolean {\n    // http://tools.ietf.org/html/rfc3339#section-5.6\n    const dateTime: string[] = str.split(DATE_TIME_SEPARATOR)\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1])\n  }\n}\n\nfunction compareDateTime(dt1: string, dt2: string): number | undefined {\n  if (!(dt1 && dt2)) return undefined\n  const d1 = new Date(dt1).valueOf()\n  const d2 = new Date(dt2).valueOf()\n  if (!(d1 && d2)) return undefined\n  return d1 - d2\n}\n\nfunction compareIsoDateTime(dt1: string, dt2: string): number | undefined {\n  if (!(dt1 && dt2)) return undefined\n  const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR)\n  const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR)\n  const res = compareDate(d1, d2)\n  if (res === undefined) return undefined\n  return res || compareTime(t1, t2)\n}\n\nconst NOT_URI_FRAGMENT = /\\/|:/\nconst URI =\n  /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i\n\nfunction uri(str: string): boolean {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str)\n}\n\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm\n\nfunction byte(str: string): boolean {\n  BYTE.lastIndex = 0\n  return BYTE.test(str)\n}\n\nconst MIN_INT32 = -(2 ** 31)\nconst MAX_INT32 = 2 ** 31 - 1\n\nfunction validateInt32(value: number): boolean {\n  return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32\n}\n\nfunction validateInt64(value: number): boolean {\n  // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n  return Number.isInteger(value)\n}\n\nfunction validateNumber(): boolean {\n  return true\n}\n\nconst Z_ANCHOR = /[^\\\\]\\\\Z/\nfunction regex(str: string): boolean {\n  if (Z_ANCHOR.test(str)) return false\n  try {\n    new RegExp(str)\n    return true\n  } catch (e) {\n    return false\n  }\n}\n", "// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport abstract class _CodeOrName {\n  abstract readonly str: string\n  abstract readonly names: UsedNames\n  abstract toString(): string\n  abstract emptyStr(): boolean\n}\n\nexport const IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i\n\nexport class Name extends _CodeOrName {\n  readonly str: string\n  constructor(s: string) {\n    super()\n    if (!IDENTIFIER.test(s)) throw new Error(\"CodeGen: name must be a valid identifier\")\n    this.str = s\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    return false\n  }\n\n  get names(): UsedNames {\n    return {[this.str]: 1}\n  }\n}\n\nexport class _Code extends _CodeOrName {\n  readonly _items: readonly CodeItem[]\n  private _str?: string\n  private _names?: UsedNames\n\n  constructor(code: string | readonly CodeItem[]) {\n    super()\n    this._items = typeof code === \"string\" ? [code] : code\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    if (this._items.length > 1) return false\n    const item = this._items[0]\n    return item === \"\" || item === '\"\"'\n  }\n\n  get str(): string {\n    return (this._str ??= this._items.reduce((s: string, c: CodeItem) => `${s}${c}`, \"\"))\n  }\n\n  get names(): UsedNames {\n    return (this._names ??= this._items.reduce((names: UsedNames, c) => {\n      if (c instanceof Name) names[c.str] = (names[c.str] || 0) + 1\n      return names\n    }, {}))\n  }\n}\n\nexport type CodeItem = Name | string | number | boolean | null\n\nexport type UsedNames = Record<string, number | undefined>\n\nexport type Code = _Code | Name\n\nexport type SafeExpr = Code | number | boolean | null\n\nexport const nil = new _Code(\"\")\n\ntype CodeArg = SafeExpr | string | undefined\n\nexport function _(strs: TemplateStringsArray, ...args: CodeArg[]): _Code {\n  const code: CodeItem[] = [strs[0]]\n  let i = 0\n  while (i < args.length) {\n    addCodeArg(code, args[i])\n    code.push(strs[++i])\n  }\n  return new _Code(code)\n}\n\nconst plus = new _Code(\"+\")\n\nexport function str(strs: TemplateStringsArray, ...args: (CodeArg | string[])[]): _Code {\n  const expr: CodeItem[] = [safeStringify(strs[0])]\n  let i = 0\n  while (i < args.length) {\n    expr.push(plus)\n    addCodeArg(expr, args[i])\n    expr.push(plus, safeStringify(strs[++i]))\n  }\n  optimize(expr)\n  return new _Code(expr)\n}\n\nexport function addCodeArg(code: CodeItem[], arg: CodeArg | string[]): void {\n  if (arg instanceof _Code) code.push(...arg._items)\n  else if (arg instanceof Name) code.push(arg)\n  else code.push(interpolate(arg))\n}\n\nfunction optimize(expr: CodeItem[]): void {\n  let i = 1\n  while (i < expr.length - 1) {\n    if (expr[i] === plus) {\n      const res = mergeExprItems(expr[i - 1], expr[i + 1])\n      if (res !== undefined) {\n        expr.splice(i - 1, 3, res)\n        continue\n      }\n      expr[i++] = \"+\"\n    }\n    i++\n  }\n}\n\nfunction mergeExprItems(a: CodeItem, b: CodeItem): CodeItem | undefined {\n  if (b === '\"\"') return a\n  if (a === '\"\"') return b\n  if (typeof a == \"string\") {\n    if (b instanceof Name || a[a.length - 1] !== '\"') return\n    if (typeof b != \"string\") return `${a.slice(0, -1)}${b}\"`\n    if (b[0] === '\"') return a.slice(0, -1) + b.slice(1)\n    return\n  }\n  if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name)) return `\"${a}${b.slice(1)}`\n  return\n}\n\nexport function strConcat(c1: Code, c2: Code): Code {\n  return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str`${c1}${c2}`\n}\n\n// TODO do not allow arrays here\nfunction interpolate(x?: string | string[] | number | boolean | null): SafeExpr | string {\n  return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n    ? x\n    : safeStringify(Array.isArray(x) ? x.join(\",\") : x)\n}\n\nexport function stringify(x: unknown): Code {\n  return new _Code(safeStringify(x))\n}\n\nexport function safeStringify(x: unknown): string {\n  return JSON.stringify(x)\n    .replace(/\\u2028/g, \"\\\\u2028\")\n    .replace(/\\u2029/g, \"\\\\u2029\")\n}\n\nexport function getProperty(key: Code | string | number): Code {\n  return typeof key == \"string\" && IDENTIFIER.test(key) ? new _Code(`.${key}`) : _`[${key}]`\n}\n\n//Does best effort to format the name properly\nexport function getEsmExportName(key: Code | string | number): Code {\n  if (typeof key == \"string\" && IDENTIFIER.test(key)) {\n    return new _Code(`${key}`)\n  }\n  throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`)\n}\n\nexport function regexpCode(rx: RegExp): Code {\n  return new _Code(rx.toString())\n}\n", "import {_, nil, Code, Name} from \"./code\"\n\ninterface NameGroup {\n  prefix: string\n  index: number\n}\n\nexport interface NameValue {\n  ref: ValueReference // this is the reference to any value that can be referred to from generated code via `globals` var in the closure\n  key?: unknown // any key to identify a global to avoid duplicates, if not passed ref is used\n  code?: Code // this is the code creating the value needed for standalone code wit_out closure - can be a primitive value, function or import (`require`)\n}\n\nexport type ValueReference = unknown // possibly make CodeGen parameterized type on this type\n\nclass ValueError extends Error {\n  readonly value?: NameValue\n  constructor(name: ValueScopeName) {\n    super(`CodeGen: \"code\" for ${name} not defined`)\n    this.value = name.value\n  }\n}\n\ninterface ScopeOptions {\n  prefixes?: Set<string>\n  parent?: Scope\n}\n\ninterface ValueScopeOptions extends ScopeOptions {\n  scope: ScopeStore\n  es5?: boolean\n  lines?: boolean\n}\n\nexport type ScopeStore = Record<string, ValueReference[] | undefined>\n\ntype ScopeValues = {\n  [Prefix in string]?: Map<unknown, ValueScopeName>\n}\n\nexport type ScopeValueSets = {\n  [Prefix in string]?: Set<ValueScopeName>\n}\n\nexport enum UsedValueState {\n  Started,\n  Completed,\n}\n\nexport type UsedScopeValues = {\n  [Prefix in string]?: Map<ValueScopeName, UsedValueState | undefined>\n}\n\nexport const varKinds = {\n  const: new Name(\"const\"),\n  let: new Name(\"let\"),\n  var: new Name(\"var\"),\n}\n\nexport class Scope {\n  protected readonly _names: {[Prefix in string]?: NameGroup} = {}\n  protected readonly _prefixes?: Set<string>\n  protected readonly _parent?: Scope\n\n  constructor({prefixes, parent}: ScopeOptions = {}) {\n    this._prefixes = prefixes\n    this._parent = parent\n  }\n\n  toName(nameOrPrefix: Name | string): Name {\n    return nameOrPrefix instanceof Name ? nameOrPrefix : this.name(nameOrPrefix)\n  }\n\n  name(prefix: string): Name {\n    return new Name(this._newName(prefix))\n  }\n\n  protected _newName(prefix: string): string {\n    const ng = this._names[prefix] || this._nameGroup(prefix)\n    return `${prefix}${ng.index++}`\n  }\n\n  private _nameGroup(prefix: string): NameGroup {\n    if (this._parent?._prefixes?.has(prefix) || (this._prefixes && !this._prefixes.has(prefix))) {\n      throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`)\n    }\n    return (this._names[prefix] = {prefix, index: 0})\n  }\n}\n\ninterface ScopePath {\n  property: string\n  itemIndex: number\n}\n\nexport class ValueScopeName extends Name {\n  readonly prefix: string\n  value?: NameValue\n  scopePath?: Code\n\n  constructor(prefix: string, nameStr: string) {\n    super(nameStr)\n    this.prefix = prefix\n  }\n\n  setValue(value: NameValue, {property, itemIndex}: ScopePath): void {\n    this.value = value\n    this.scopePath = _`.${new Name(property)}[${itemIndex}]`\n  }\n}\n\ninterface VSOptions extends ValueScopeOptions {\n  _n: Code\n}\n\nconst line = _`\\n`\n\nexport class ValueScope extends Scope {\n  protected readonly _values: ScopeValues = {}\n  protected readonly _scope: ScopeStore\n  readonly opts: VSOptions\n\n  constructor(opts: ValueScopeOptions) {\n    super(opts)\n    this._scope = opts.scope\n    this.opts = {...opts, _n: opts.lines ? line : nil}\n  }\n\n  get(): ScopeStore {\n    return this._scope\n  }\n\n  name(prefix: string): ValueScopeName {\n    return new ValueScopeName(prefix, this._newName(prefix))\n  }\n\n  value(nameOrPrefix: ValueScopeName | string, value: NameValue): ValueScopeName {\n    if (value.ref === undefined) throw new Error(\"CodeGen: ref must be passed in value\")\n    const name = this.toName(nameOrPrefix) as ValueScopeName\n    const {prefix} = name\n    const valueKey = value.key ?? value.ref\n    let vs = this._values[prefix]\n    if (vs) {\n      const _name = vs.get(valueKey)\n      if (_name) return _name\n    } else {\n      vs = this._values[prefix] = new Map()\n    }\n    vs.set(valueKey, name)\n\n    const s = this._scope[prefix] || (this._scope[prefix] = [])\n    const itemIndex = s.length\n    s[itemIndex] = value.ref\n    name.setValue(value, {property: prefix, itemIndex})\n    return name\n  }\n\n  getValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    const vs = this._values[prefix]\n    if (!vs) return\n    return vs.get(keyOrRef)\n  }\n\n  scopeRefs(scopeName: Name, values: ScopeValues | ScopeValueSets = this._values): Code {\n    return this._reduceValues(values, (name: ValueScopeName) => {\n      if (name.scopePath === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n      return _`${scopeName}${name.scopePath}`\n    })\n  }\n\n  scopeCode(\n    values: ScopeValues | ScopeValueSets = this._values,\n    usedValues?: UsedScopeValues,\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    return this._reduceValues(\n      values,\n      (name: ValueScopeName) => {\n        if (name.value === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n        return name.value.code\n      },\n      usedValues,\n      getCode\n    )\n  }\n\n  private _reduceValues(\n    values: ScopeValues | ScopeValueSets,\n    valueCode: (n: ValueScopeName) => Code | undefined,\n    usedValues: UsedScopeValues = {},\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    let code: Code = nil\n    for (const prefix in values) {\n      const vs = values[prefix]\n      if (!vs) continue\n      const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map())\n      vs.forEach((name: ValueScopeName) => {\n        if (nameSet.has(name)) return\n        nameSet.set(name, UsedValueState.Started)\n        let c = valueCode(name)\n        if (c) {\n          const def = this.opts.es5 ? varKinds.var : varKinds.const\n          code = _`${code}${def} ${name} = ${c};${this.opts._n}`\n        } else if ((c = getCode?.(name))) {\n          code = _`${code}${c}${this.opts._n}`\n        } else {\n          throw new ValueError(name)\n        }\n        nameSet.set(name, UsedValueState.Completed)\n      })\n    }\n    return code\n  }\n}\n", "import type {ScopeValueSets, NameValue, ValueScope, ValueScopeName} from \"./scope\"\nimport {_, nil, _Code, Code, Name, UsedNames, CodeItem, addCodeArg, _CodeOrName} from \"./code\"\nimport {Scope, varKinds} from \"./scope\"\n\nexport {_, str, strConcat, nil, getProperty, stringify, regexpCode, Name, Code} from \"./code\"\nexport {Scope, ScopeStore, ValueScope, ValueScopeName, ScopeValueSets, varKinds} from \"./scope\"\n\n// type for expressions that can be safely inserted in code without quotes\nexport type SafeExpr = Code | number | boolean | null\n\n// type that is either Code of function that adds code to CodeGen instance using its methods\nexport type Block = Code | (() => void)\n\nexport const operators = {\n  GT: new _Code(\">\"),\n  GTE: new _Code(\">=\"),\n  LT: new _Code(\"<\"),\n  LTE: new _Code(\"<=\"),\n  EQ: new _Code(\"===\"),\n  NEQ: new _Code(\"!==\"),\n  NOT: new _Code(\"!\"),\n  OR: new _Code(\"||\"),\n  AND: new _Code(\"&&\"),\n  ADD: new _Code(\"+\"),\n}\n\nabstract class Node {\n  abstract readonly names: UsedNames\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    return this\n  }\n\n  optimizeNames(_names: UsedNames, _constants: Constants): this | undefined {\n    return this\n  }\n\n  // get count(): number {\n  //   return 1\n  // }\n}\n\nclass Def extends Node {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private rhs?: SafeExpr\n  ) {\n    super()\n  }\n\n  render({es5, _n}: CGOptions): string {\n    const varKind = es5 ? varKinds.var : this.varKind\n    const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`\n    return `${varKind} ${this.name}${rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!names[this.name.str]) return\n    if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.rhs instanceof _CodeOrName ? this.rhs.names : {}\n  }\n}\n\nclass Assign extends Node {\n  constructor(\n    readonly lhs: Code,\n    public rhs: SafeExpr,\n    private readonly sideEffects?: boolean\n  ) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} = ${this.rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (this.lhs instanceof Name && !names[this.lhs.str] && !this.sideEffects) return\n    this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = this.lhs instanceof Name ? {} : {...this.lhs.names}\n    return addExprNames(names, this.rhs)\n  }\n}\n\nclass AssignOp extends Assign {\n  constructor(\n    lhs: Code,\n    private readonly op: Code,\n    rhs: SafeExpr,\n    sideEffects?: boolean\n  ) {\n    super(lhs, rhs, sideEffects)\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} ${this.op}= ${this.rhs};` + _n\n  }\n}\n\nclass Label extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label: Name) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.label}:` + _n\n  }\n}\n\nclass Break extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label?: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    const label = this.label ? ` ${this.label}` : \"\"\n    return `break${label};` + _n\n  }\n}\n\nclass Throw extends Node {\n  constructor(readonly error: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `throw ${this.error};` + _n\n  }\n\n  get names(): UsedNames {\n    return this.error.names\n  }\n}\n\nclass AnyCode extends Node {\n  constructor(private code: SafeExpr) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.code};` + _n\n  }\n\n  optimizeNodes(): this | undefined {\n    return `${this.code}` ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    this.code = optimizeExpr(this.code, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.code instanceof _CodeOrName ? this.code.names : {}\n  }\n}\n\nabstract class ParentNode extends Node {\n  constructor(readonly nodes: ChildNode[] = []) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return this.nodes.reduce((code, n) => code + n.render(opts), \"\")\n  }\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      const n = nodes[i].optimizeNodes()\n      if (Array.isArray(n)) nodes.splice(i, 1, ...n)\n      else if (n) nodes[i] = n\n      else nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      // iterating backwards improves 1-pass optimization\n      const n = nodes[i]\n      if (n.optimizeNames(names, constants)) continue\n      subtractNames(names, n.names)\n      nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  get names(): UsedNames {\n    return this.nodes.reduce((names: UsedNames, n) => addNames(names, n.names), {})\n  }\n\n  // get count(): number {\n  //   return this.nodes.reduce((c, n) => c + n.count, 1)\n  // }\n}\n\nabstract class BlockNode extends ParentNode {\n  render(opts: CGOptions): string {\n    return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n\n  }\n}\n\nclass Root extends ParentNode {}\n\nclass Else extends BlockNode {\n  static readonly kind = \"else\"\n}\n\nclass If extends BlockNode {\n  static readonly kind = \"if\"\n  else?: If | Else\n  constructor(\n    private condition: Code | boolean,\n    nodes?: ChildNode[]\n  ) {\n    super(nodes)\n  }\n\n  render(opts: CGOptions): string {\n    let code = `if(${this.condition})` + super.render(opts)\n    if (this.else) code += \"else \" + this.else.render(opts)\n    return code\n  }\n\n  optimizeNodes(): If | ChildNode[] | undefined {\n    super.optimizeNodes()\n    const cond = this.condition\n    if (cond === true) return this.nodes // else is ignored here\n    let e = this.else\n    if (e) {\n      const ns = e.optimizeNodes()\n      e = this.else = Array.isArray(ns) ? new Else(ns) : (ns as Else | undefined)\n    }\n    if (e) {\n      if (cond === false) return e instanceof If ? e : e.nodes\n      if (this.nodes.length) return this\n      return new If(not(cond), e instanceof If ? [e] : e.nodes)\n    }\n    if (cond === false || !this.nodes.length) return undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    this.else = this.else?.optimizeNames(names, constants)\n    if (!(super.optimizeNames(names, constants) || this.else)) return\n    this.condition = optimizeExpr(this.condition, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    addExprNames(names, this.condition)\n    if (this.else) addNames(names, this.else.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.else?.count || 0)\n  // }\n}\n\nabstract class For extends BlockNode {\n  static readonly kind = \"for\"\n}\n\nclass ForLoop extends For {\n  constructor(private iteration: Code) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.iteration})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iteration = optimizeExpr(this.iteration, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iteration.names)\n  }\n}\n\nclass ForRange extends For {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private readonly from: SafeExpr,\n    private readonly to: SafeExpr\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const varKind = opts.es5 ? varKinds.var : this.varKind\n    const {name, from, to} = this\n    return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts)\n  }\n\n  get names(): UsedNames {\n    const names = addExprNames(super.names, this.from)\n    return addExprNames(names, this.to)\n  }\n}\n\nclass ForIter extends For {\n  constructor(\n    private readonly loop: \"of\" | \"in\",\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private iterable: Code\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iterable = optimizeExpr(this.iterable, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iterable.names)\n  }\n}\n\nclass Func extends BlockNode {\n  static readonly kind = \"func\"\n  constructor(\n    public name: Name,\n    public args: Code,\n    public async?: boolean\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const _async = this.async ? \"async \" : \"\"\n    return `${_async}function ${this.name}(${this.args})` + super.render(opts)\n  }\n}\n\nclass Return extends ParentNode {\n  static readonly kind = \"return\"\n\n  render(opts: CGOptions): string {\n    return \"return \" + super.render(opts)\n  }\n}\n\nclass Try extends BlockNode {\n  catch?: Catch\n  finally?: Finally\n\n  render(opts: CGOptions): string {\n    let code = \"try\" + super.render(opts)\n    if (this.catch) code += this.catch.render(opts)\n    if (this.finally) code += this.finally.render(opts)\n    return code\n  }\n\n  optimizeNodes(): this {\n    super.optimizeNodes()\n    this.catch?.optimizeNodes() as Catch | undefined\n    this.finally?.optimizeNodes() as Finally | undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    super.optimizeNames(names, constants)\n    this.catch?.optimizeNames(names, constants)\n    this.finally?.optimizeNames(names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    if (this.catch) addNames(names, this.catch.names)\n    if (this.finally) addNames(names, this.finally.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.catch?.count || 0) + (this.finally?.count || 0)\n  // }\n}\n\nclass Catch extends BlockNode {\n  static readonly kind = \"catch\"\n  constructor(readonly error: Name) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `catch(${this.error})` + super.render(opts)\n  }\n}\n\nclass Finally extends BlockNode {\n  static readonly kind = \"finally\"\n  render(opts: CGOptions): string {\n    return \"finally\" + super.render(opts)\n  }\n}\n\ntype StartBlockNode = If | For | Func | Return | Try\n\ntype LeafNode = Def | Assign | Label | Break | Throw | AnyCode\n\ntype ChildNode = StartBlockNode | LeafNode\n\ntype EndBlockNodeType =\n  | typeof If\n  | typeof Else\n  | typeof For\n  | typeof Func\n  | typeof Return\n  | typeof Catch\n  | typeof Finally\n\ntype Constants = Record<string, SafeExpr | undefined>\n\nexport interface CodeGenOptions {\n  es5?: boolean\n  lines?: boolean\n  ownProperties?: boolean\n}\n\ninterface CGOptions extends CodeGenOptions {\n  _n: \"\\n\" | \"\"\n}\n\nexport class CodeGen {\n  readonly _scope: Scope\n  readonly _extScope: ValueScope\n  readonly _values: ScopeValueSets = {}\n  private readonly _nodes: ParentNode[]\n  private readonly _blockStarts: number[] = []\n  private readonly _constants: Constants = {}\n  private readonly opts: CGOptions\n\n  constructor(extScope: ValueScope, opts: CodeGenOptions = {}) {\n    this.opts = {...opts, _n: opts.lines ? \"\\n\" : \"\"}\n    this._extScope = extScope\n    this._scope = new Scope({parent: extScope})\n    this._nodes = [new Root()]\n  }\n\n  toString(): string {\n    return this._root.render(this.opts)\n  }\n\n  // returns unique name in the internal scope\n  name(prefix: string): Name {\n    return this._scope.name(prefix)\n  }\n\n  // reserves unique name in the external scope\n  scopeName(prefix: string): ValueScopeName {\n    return this._extScope.name(prefix)\n  }\n\n  // reserves unique name in the external scope and assigns value to it\n  scopeValue(prefixOrName: ValueScopeName | string, value: NameValue): Name {\n    const name = this._extScope.value(prefixOrName, value)\n    const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set())\n    vs.add(name)\n    return name\n  }\n\n  getScopeValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    return this._extScope.getValue(prefix, keyOrRef)\n  }\n\n  // return code that assigns values in the external scope to the names that are used internally\n  // (same names that were returned by gen.scopeName or gen.scopeValue)\n  scopeRefs(scopeName: Name): Code {\n    return this._extScope.scopeRefs(scopeName, this._values)\n  }\n\n  scopeCode(): Code {\n    return this._extScope.scopeCode(this._values)\n  }\n\n  private _def(\n    varKind: Name,\n    nameOrPrefix: Name | string,\n    rhs?: SafeExpr,\n    constant?: boolean\n  ): Name {\n    const name = this._scope.toName(nameOrPrefix)\n    if (rhs !== undefined && constant) this._constants[name.str] = rhs\n    this._leafNode(new Def(varKind, name, rhs))\n    return name\n  }\n\n  // `const` declaration (`var` in es5 mode)\n  const(nameOrPrefix: Name | string, rhs: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.const, nameOrPrefix, rhs, _constant)\n  }\n\n  // `let` declaration with optional assignment (`var` in es5 mode)\n  let(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.let, nameOrPrefix, rhs, _constant)\n  }\n\n  // `var` declaration with optional assignment\n  var(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.var, nameOrPrefix, rhs, _constant)\n  }\n\n  // assignment code\n  assign(lhs: Code, rhs: SafeExpr, sideEffects?: boolean): CodeGen {\n    return this._leafNode(new Assign(lhs, rhs, sideEffects))\n  }\n\n  // `+=` code\n  add(lhs: Code, rhs: SafeExpr): CodeGen {\n    return this._leafNode(new AssignOp(lhs, operators.ADD, rhs))\n  }\n\n  // appends passed SafeExpr to code or executes Block\n  code(c: Block | SafeExpr): CodeGen {\n    if (typeof c == \"function\") c()\n    else if (c !== nil) this._leafNode(new AnyCode(c))\n    return this\n  }\n\n  // returns code for object literal for the passed argument list of key-value pairs\n  object(...keyValues: [Name | string, SafeExpr | string][]): _Code {\n    const code: CodeItem[] = [\"{\"]\n    for (const [key, value] of keyValues) {\n      if (code.length > 1) code.push(\",\")\n      code.push(key)\n      if (key !== value || this.opts.es5) {\n        code.push(\":\")\n        addCodeArg(code, value)\n      }\n    }\n    code.push(\"}\")\n    return new _Code(code)\n  }\n\n  // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n  if(condition: Code | boolean, thenBody?: Block, elseBody?: Block): CodeGen {\n    this._blockNode(new If(condition))\n\n    if (thenBody && elseBody) {\n      this.code(thenBody).else().code(elseBody).endIf()\n    } else if (thenBody) {\n      this.code(thenBody).endIf()\n    } else if (elseBody) {\n      throw new Error('CodeGen: \"else\" body without \"then\" body')\n    }\n    return this\n  }\n\n  // `else if` clause - invalid without `if` or after `else` clauses\n  elseIf(condition: Code | boolean): CodeGen {\n    return this._elseNode(new If(condition))\n  }\n\n  // `else` clause - only valid after `if` or `else if` clauses\n  else(): CodeGen {\n    return this._elseNode(new Else())\n  }\n\n  // end `if` statement (needed if gen.if was used only with condition)\n  endIf(): CodeGen {\n    return this._endBlockNode(If, Else)\n  }\n\n  private _for(node: For, forBody?: Block): CodeGen {\n    this._blockNode(node)\n    if (forBody) this.code(forBody).endFor()\n    return this\n  }\n\n  // a generic `for` clause (or statement if `forBody` is passed)\n  for(iteration: Code, forBody?: Block): CodeGen {\n    return this._for(new ForLoop(iteration), forBody)\n  }\n\n  // `for` statement for a range of values\n  forRange(\n    nameOrPrefix: Name | string,\n    from: SafeExpr,\n    to: SafeExpr,\n    forBody: (index: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.let\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForRange(varKind, name, from, to), () => forBody(name))\n  }\n\n  // `for-of` statement (in es5 mode replace with a normal for loop)\n  forOf(\n    nameOrPrefix: Name | string,\n    iterable: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = varKinds.const\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    if (this.opts.es5) {\n      const arr = iterable instanceof Name ? iterable : this.var(\"_arr\", iterable)\n      return this.forRange(\"_i\", 0, _`${arr}.length`, (i) => {\n        this.var(name, _`${arr}[${i}]`)\n        forBody(name)\n      })\n    }\n    return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name))\n  }\n\n  // `for-in` statement.\n  // With option `ownProperties` replaced with a `for-of` loop for object keys\n  forIn(\n    nameOrPrefix: Name | string,\n    obj: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.const\n  ): CodeGen {\n    if (this.opts.ownProperties) {\n      return this.forOf(nameOrPrefix, _`Object.keys(${obj})`, forBody)\n    }\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name))\n  }\n\n  // end `for` loop\n  endFor(): CodeGen {\n    return this._endBlockNode(For)\n  }\n\n  // `label` statement\n  label(label: Name): CodeGen {\n    return this._leafNode(new Label(label))\n  }\n\n  // `break` statement\n  break(label?: Code): CodeGen {\n    return this._leafNode(new Break(label))\n  }\n\n  // `return` statement\n  return(value: Block | SafeExpr): CodeGen {\n    const node = new Return()\n    this._blockNode(node)\n    this.code(value)\n    if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node')\n    return this._endBlockNode(Return)\n  }\n\n  // `try` statement\n  try(tryBody: Block, catchCode?: (e: Name) => void, finallyCode?: Block): CodeGen {\n    if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"')\n    const node = new Try()\n    this._blockNode(node)\n    this.code(tryBody)\n    if (catchCode) {\n      const error = this.name(\"e\")\n      this._currNode = node.catch = new Catch(error)\n      catchCode(error)\n    }\n    if (finallyCode) {\n      this._currNode = node.finally = new Finally()\n      this.code(finallyCode)\n    }\n    return this._endBlockNode(Catch, Finally)\n  }\n\n  // `throw` statement\n  throw(error: Code): CodeGen {\n    return this._leafNode(new Throw(error))\n  }\n\n  // start self-balancing block\n  block(body?: Block, nodeCount?: number): CodeGen {\n    this._blockStarts.push(this._nodes.length)\n    if (body) this.code(body).endBlock(nodeCount)\n    return this\n  }\n\n  // end the current self-balancing block\n  endBlock(nodeCount?: number): CodeGen {\n    const len = this._blockStarts.pop()\n    if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\")\n    const toClose = this._nodes.length - len\n    if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n      throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`)\n    }\n    this._nodes.length = len\n    return this\n  }\n\n  // `function` heading (or definition if funcBody is passed)\n  func(name: Name, args: Code = nil, async?: boolean, funcBody?: Block): CodeGen {\n    this._blockNode(new Func(name, args, async))\n    if (funcBody) this.code(funcBody).endFunc()\n    return this\n  }\n\n  // end function definition\n  endFunc(): CodeGen {\n    return this._endBlockNode(Func)\n  }\n\n  optimize(n = 1): void {\n    while (n-- > 0) {\n      this._root.optimizeNodes()\n      this._root.optimizeNames(this._root.names, this._constants)\n    }\n  }\n\n  private _leafNode(node: LeafNode): CodeGen {\n    this._currNode.nodes.push(node)\n    return this\n  }\n\n  private _blockNode(node: StartBlockNode): void {\n    this._currNode.nodes.push(node)\n    this._nodes.push(node)\n  }\n\n  private _endBlockNode(N1: EndBlockNodeType, N2?: EndBlockNodeType): CodeGen {\n    const n = this._currNode\n    if (n instanceof N1 || (N2 && n instanceof N2)) {\n      this._nodes.pop()\n      return this\n    }\n    throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`)\n  }\n\n  private _elseNode(node: If | Else): CodeGen {\n    const n = this._currNode\n    if (!(n instanceof If)) {\n      throw new Error('CodeGen: \"else\" without \"if\"')\n    }\n    this._currNode = n.else = node\n    return this\n  }\n\n  private get _root(): Root {\n    return this._nodes[0] as Root\n  }\n\n  private get _currNode(): ParentNode {\n    const ns = this._nodes\n    return ns[ns.length - 1]\n  }\n\n  private set _currNode(node: ParentNode) {\n    const ns = this._nodes\n    ns[ns.length - 1] = node\n  }\n\n  // get nodeCount(): number {\n  //   return this._root.count\n  // }\n}\n\nfunction addNames(names: UsedNames, from: UsedNames): UsedNames {\n  for (const n in from) names[n] = (names[n] || 0) + (from[n] || 0)\n  return names\n}\n\nfunction addExprNames(names: UsedNames, from: SafeExpr): UsedNames {\n  return from instanceof _CodeOrName ? addNames(names, from.names) : names\n}\n\nfunction optimizeExpr<T extends SafeExpr | Code>(expr: T, names: UsedNames, constants: Constants): T\nfunction optimizeExpr(expr: SafeExpr, names: UsedNames, constants: Constants): SafeExpr {\n  if (expr instanceof Name) return replaceName(expr)\n  if (!canOptimize(expr)) return expr\n  return new _Code(\n    expr._items.reduce((items: CodeItem[], c: SafeExpr | string) => {\n      if (c instanceof Name) c = replaceName(c)\n      if (c instanceof _Code) items.push(...c._items)\n      else items.push(c)\n      return items\n    }, [])\n  )\n\n  function replaceName(n: Name): SafeExpr {\n    const c = constants[n.str]\n    if (c === undefined || names[n.str] !== 1) return n\n    delete names[n.str]\n    return c\n  }\n\n  function canOptimize(e: SafeExpr): e is _Code {\n    return (\n      e instanceof _Code &&\n      e._items.some(\n        (c) => c instanceof Name && names[c.str] === 1 && constants[c.str] !== undefined\n      )\n    )\n  }\n}\n\nfunction subtractNames(names: UsedNames, from: UsedNames): void {\n  for (const n in from) names[n] = (names[n] || 0) - (from[n] || 0)\n}\n\nexport function not<T extends Code | SafeExpr>(x: T): T\nexport function not(x: Code | SafeExpr): Code | SafeExpr {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : _`!${par(x)}`\n}\n\nconst andCode = mappend(operators.AND)\n\n// boolean AND (&&) expression with the passed arguments\nexport function and(...args: Code[]): Code {\n  return args.reduce(andCode)\n}\n\nconst orCode = mappend(operators.OR)\n\n// boolean OR (||) expression with the passed arguments\nexport function or(...args: Code[]): Code {\n  return args.reduce(orCode)\n}\n\ntype MAppend = (x: Code, y: Code) => Code\n\nfunction mappend(op: Code): MAppend {\n  return (x, y) => (x === nil ? y : y === nil ? x : _`${par(x)} ${op} ${par(y)}`)\n}\n\nfunction par(x: Code): Code {\n  return x instanceof Name ? x : _`(${x})`\n}\n", "import type {AnySchema, EvaluatedProperties, EvaluatedItems} from \"../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \".\"\nimport {_, getProperty, Code, Name, CodeGen} from \"./codegen\"\nimport {_Code} from \"./codegen/code\"\nimport type {Rule, ValidationRules} from \"./rules\"\n\n// TODO refactor to use Set\nexport function toHash<T extends string = string>(arr: T[]): {[K in T]?: true} {\n  const hash: {[K in T]?: true} = {}\n  for (const item of arr) hash[item] = true\n  return hash\n}\n\nexport function alwaysValidSchema(it: SchemaCxt, schema: AnySchema): boolean | void {\n  if (typeof schema == \"boolean\") return schema\n  if (Object.keys(schema).length === 0) return true\n  checkUnknownRules(it, schema)\n  return !schemaHasRules(schema, it.self.RULES.all)\n}\n\nexport function checkUnknownRules(it: SchemaCxt, schema: AnySchema = it.schema): void {\n  const {opts, self} = it\n  if (!opts.strictSchema) return\n  if (typeof schema === \"boolean\") return\n  const rules = self.RULES.keywords\n  for (const key in schema) {\n    if (!rules[key]) checkStrictMode(it, `unknown keyword: \"${key}\"`)\n  }\n}\n\nexport function schemaHasRules(\n  schema: AnySchema,\n  rules: {[Key in string]?: boolean | Rule}\n): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (rules[key]) return true\n  return false\n}\n\nexport function schemaHasRulesButRef(schema: AnySchema, RULES: ValidationRules): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (key !== \"$ref\" && RULES.all[key]) return true\n  return false\n}\n\nexport function schemaRefOrVal(\n  {topSchemaRef, schemaPath}: SchemaObjCxt,\n  schema: unknown,\n  keyword: string,\n  $data?: string | false\n): Code | number | boolean {\n  if (!$data) {\n    if (typeof schema == \"number\" || typeof schema == \"boolean\") return schema\n    if (typeof schema == \"string\") return _`${schema}`\n  }\n  return _`${topSchemaRef}${schemaPath}${getProperty(keyword)}`\n}\n\nexport function unescapeFragment(str: string): string {\n  return unescapeJsonPointer(decodeURIComponent(str))\n}\n\nexport function escapeFragment(str: string | number): string {\n  return encodeURIComponent(escapeJsonPointer(str))\n}\n\nexport function escapeJsonPointer(str: string | number): string {\n  if (typeof str == \"number\") return `${str}`\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\")\n}\n\nexport function unescapeJsonPointer(str: string): string {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\")\n}\n\nexport function eachItem<T>(xs: T | T[], f: (x: T) => void): void {\n  if (Array.isArray(xs)) {\n    for (const x of xs) f(x)\n  } else {\n    f(xs)\n  }\n}\n\ntype SomeEvaluated = EvaluatedProperties | EvaluatedItems\n\ntype MergeEvaluatedFunc<T extends SomeEvaluated> = (\n  gen: CodeGen,\n  from: Name | T,\n  to: Name | Exclude<T, true> | undefined,\n  toName?: typeof Name\n) => Name | T\n\ninterface MakeMergeFuncArgs<T extends SomeEvaluated> {\n  mergeNames: (gen: CodeGen, from: Name, to: Name) => void\n  mergeToName: (gen: CodeGen, from: T, to: Name) => void\n  mergeValues: (from: T, to: Exclude<T, true>) => T\n  resultToName: (gen: CodeGen, res?: T) => Name\n}\n\nfunction makeMergeEvaluated<T extends SomeEvaluated>({\n  mergeNames,\n  mergeToName,\n  mergeValues,\n  resultToName,\n}: MakeMergeFuncArgs<T>): MergeEvaluatedFunc<T> {\n  return (gen, from, to, toName) => {\n    const res =\n      to === undefined\n        ? from\n        : to instanceof Name\n        ? (from instanceof Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n        : from instanceof Name\n        ? (mergeToName(gen, to, from), from)\n        : mergeValues(from, to)\n    return toName === Name && !(res instanceof Name) ? resultToName(gen, res) : res\n  }\n}\n\ninterface MergeEvaluated {\n  props: MergeEvaluatedFunc<EvaluatedProperties>\n  items: MergeEvaluatedFunc<EvaluatedItems>\n}\n\nexport const mergeEvaluated: MergeEvaluated = {\n  props: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () => {\n        gen.if(\n          _`${from} === true`,\n          () => gen.assign(to, true),\n          () => gen.assign(to, _`${to} || {}`).code(_`Object.assign(${to}, ${from})`)\n        )\n      }),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () => {\n        if (from === true) {\n          gen.assign(to, true)\n        } else {\n          gen.assign(to, _`${to} || {}`)\n          setEvaluated(gen, to, from)\n        }\n      }),\n    mergeValues: (from, to) => (from === true ? true : {...from, ...to}),\n    resultToName: evaluatedPropsToName,\n  }),\n  items: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () =>\n        gen.assign(to, _`${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () =>\n        gen.assign(to, from === true ? true : _`${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n    resultToName: (gen, items) => gen.var(\"items\", items),\n  }),\n}\n\nexport function evaluatedPropsToName(gen: CodeGen, ps?: EvaluatedProperties): Name {\n  if (ps === true) return gen.var(\"props\", true)\n  const props = gen.var(\"props\", _`{}`)\n  if (ps !== undefined) setEvaluated(gen, props, ps)\n  return props\n}\n\nexport function setEvaluated(gen: CodeGen, props: Name, ps: {[K in string]?: true}): void {\n  Object.keys(ps).forEach((p) => gen.assign(_`${props}${getProperty(p)}`, true))\n}\n\nconst snippets: {[S in string]?: _Code} = {}\n\nexport function useFunc(gen: CodeGen, f: {code: string}): Name {\n  return gen.scopeValue(\"func\", {\n    ref: f,\n    code: snippets[f.code] || (snippets[f.code] = new _Code(f.code)),\n  })\n}\n\nexport enum Type {\n  Num,\n  Str,\n}\n\nexport function getErrorPath(\n  dataProp: Name | string | number,\n  dataPropType?: Type,\n  jsPropertySyntax?: boolean\n): Code | string {\n  // let path\n  if (dataProp instanceof Name) {\n    const isNumber = dataPropType === Type.Num\n    return jsPropertySyntax\n      ? isNumber\n        ? _`\"[\" + ${dataProp} + \"]\"`\n        : _`\"['\" + ${dataProp} + \"']\"`\n      : isNumber\n      ? _`\"/\" + ${dataProp}`\n      : _`\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")` // TODO maybe use global escapePointer\n  }\n  return jsPropertySyntax ? getProperty(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp)\n}\n\nexport function checkStrictMode(\n  it: SchemaCxt,\n  msg: string,\n  mode: boolean | \"log\" = it.opts.strictSchema\n): void {\n  if (!mode) return\n  msg = `strict mode: ${msg}`\n  if (mode === true) throw new Error(msg)\n  it.self.logger.warn(msg)\n}\n", "import {Name} from \"./codegen\"\n\nconst names = {\n  // validation function arguments\n  data: new Name(\"data\"), // data passed to validation function\n  // args passed from referencing schema\n  valCxt: new Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n  instancePath: new Name(\"instancePath\"),\n  parentData: new Name(\"parentData\"),\n  parentDataProperty: new Name(\"parentDataProperty\"),\n  rootData: new Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n  dynamicAnchors: new Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n  // function scoped variables\n  vErrors: new Name(\"vErrors\"), // null or array of validation errors\n  errors: new Name(\"errors\"), // counter of validation errors\n  this: new Name(\"this\"),\n  // \"globals\"\n  self: new Name(\"self\"),\n  scope: new Name(\"scope\"),\n  // JTD serialize/parse name for JSON string and position\n  json: new Name(\"json\"),\n  jsonPos: new Name(\"jsonPos\"),\n  jsonLen: new Name(\"jsonLen\"),\n  jsonPart: new Name(\"jsonPart\"),\n}\n\nexport default names\n", "import type {KeywordErrorCxt, KeywordErrorDefinition} from \"../types\"\nimport type {SchemaCxt} from \"./index\"\nimport {CodeGen, _, str, strConcat, Code, Name} from \"./codegen\"\nimport {SafeExpr} from \"./codegen/code\"\nimport {getErrorPath, Type} from \"./util\"\nimport N from \"./names\"\n\nexport const keywordError: KeywordErrorDefinition = {\n  message: ({keyword}) => str`must pass \"${keyword}\" keyword validation`,\n}\n\nexport const keyword$DataError: KeywordErrorDefinition = {\n  message: ({keyword, schemaType}) =>\n    schemaType\n      ? str`\"${keyword}\" keyword must be ${schemaType} ($data)`\n      : str`\"${keyword}\" keyword is invalid ($data)`,\n}\n\nexport interface ErrorPaths {\n  instancePath?: Code\n  schemaPath?: string\n  parentSchema?: boolean\n}\n\nexport function reportError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths,\n  overrideAllErrors?: boolean\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  if (overrideAllErrors ?? (compositeRule || allErrors)) {\n    addError(gen, errObj)\n  } else {\n    returnErrors(it, _`[${errObj}]`)\n  }\n}\n\nexport function reportExtraError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  addError(gen, errObj)\n  if (!(compositeRule || allErrors)) {\n    returnErrors(it, N.vErrors)\n  }\n}\n\nexport function resetErrorsCount(gen: CodeGen, errsCount: Name): void {\n  gen.assign(N.errors, errsCount)\n  gen.if(_`${N.vErrors} !== null`, () =>\n    gen.if(\n      errsCount,\n      () => gen.assign(_`${N.vErrors}.length`, errsCount),\n      () => gen.assign(N.vErrors, null)\n    )\n  )\n}\n\nexport function extendErrors({\n  gen,\n  keyword,\n  schemaValue,\n  data,\n  errsCount,\n  it,\n}: KeywordErrorCxt): void {\n  /* istanbul ignore if */\n  if (errsCount === undefined) throw new Error(\"ajv implementation error\")\n  const err = gen.name(\"err\")\n  gen.forRange(\"i\", errsCount, N.errors, (i) => {\n    gen.const(err, _`${N.vErrors}[${i}]`)\n    gen.if(_`${err}.instancePath === undefined`, () =>\n      gen.assign(_`${err}.instancePath`, strConcat(N.instancePath, it.errorPath))\n    )\n    gen.assign(_`${err}.schemaPath`, str`${it.errSchemaPath}/${keyword}`)\n    if (it.opts.verbose) {\n      gen.assign(_`${err}.schema`, schemaValue)\n      gen.assign(_`${err}.data`, data)\n    }\n  })\n}\n\nfunction addError(gen: CodeGen, errObj: Code): void {\n  const err = gen.const(\"err\", errObj)\n  gen.if(\n    _`${N.vErrors} === null`,\n    () => gen.assign(N.vErrors, _`[${err}]`),\n    _`${N.vErrors}.push(${err})`\n  )\n  gen.code(_`${N.errors}++`)\n}\n\nfunction returnErrors(it: SchemaCxt, errs: Code): void {\n  const {gen, validateName, schemaEnv} = it\n  if (schemaEnv.$async) {\n    gen.throw(_`new ${it.ValidationError as Name}(${errs})`)\n  } else {\n    gen.assign(_`${validateName}.errors`, errs)\n    gen.return(false)\n  }\n}\n\nconst E = {\n  keyword: new Name(\"keyword\"),\n  schemaPath: new Name(\"schemaPath\"), // also used in JTD errors\n  params: new Name(\"params\"),\n  propertyName: new Name(\"propertyName\"),\n  message: new Name(\"message\"),\n  schema: new Name(\"schema\"),\n  parentSchema: new Name(\"parentSchema\"),\n}\n\nfunction errorObjectCode(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths?: ErrorPaths\n): Code {\n  const {createErrors} = cxt.it\n  if (createErrors === false) return _`{}`\n  return errorObject(cxt, error, errorPaths)\n}\n\nfunction errorObject(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths: ErrorPaths = {}\n): Code {\n  const {gen, it} = cxt\n  const keyValues: [Name, SafeExpr | string][] = [\n    errorInstancePath(it, errorPaths),\n    errorSchemaPath(cxt, errorPaths),\n  ]\n  extraErrorProps(cxt, error, keyValues)\n  return gen.object(...keyValues)\n}\n\nfunction errorInstancePath({errorPath}: SchemaCxt, {instancePath}: ErrorPaths): [Name, Code] {\n  const instPath = instancePath\n    ? str`${errorPath}${getErrorPath(instancePath, Type.Str)}`\n    : errorPath\n  return [N.instancePath, strConcat(N.instancePath, instPath)]\n}\n\nfunction errorSchemaPath(\n  {keyword, it: {errSchemaPath}}: KeywordErrorCxt,\n  {schemaPath, parentSchema}: ErrorPaths\n): [Name, string | Code] {\n  let schPath = parentSchema ? errSchemaPath : str`${errSchemaPath}/${keyword}`\n  if (schemaPath) {\n    schPath = str`${schPath}${getErrorPath(schemaPath, Type.Str)}`\n  }\n  return [E.schemaPath, schPath]\n}\n\nfunction extraErrorProps(\n  cxt: KeywordErrorCxt,\n  {params, message}: KeywordErrorDefinition,\n  keyValues: [Name, SafeExpr | string][]\n): void {\n  const {keyword, data, schemaValue, it} = cxt\n  const {opts, propertyName, topSchemaRef, schemaPath} = it\n  keyValues.push(\n    [E.keyword, keyword],\n    [E.params, typeof params == \"function\" ? params(cxt) : params || _`{}`]\n  )\n  if (opts.messages) {\n    keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message])\n  }\n  if (opts.verbose) {\n    keyValues.push(\n      [E.schema, schemaValue],\n      [E.parentSchema, _`${topSchemaRef}${schemaPath}`],\n      [N.data, data]\n    )\n  }\n  if (propertyName) keyValues.push([E.propertyName, propertyName])\n}\n", "import type {KeywordErrorDefinition, KeywordErrorCxt} from \"../../types\"\nimport type {SchemaCxt} from \"..\"\nimport {reportError} from \"../errors\"\nimport {_, Name} from \"../codegen\"\nimport N from \"../names\"\n\nconst boolError: KeywordErrorDefinition = {\n  message: \"boolean schema is false\",\n}\n\nexport function topBoolOrEmptySchema(it: SchemaCxt): void {\n  const {gen, schema, validateName} = it\n  if (schema === false) {\n    falseSchemaError(it, false)\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(N.data)\n  } else {\n    gen.assign(_`${validateName}.errors`, null)\n    gen.return(true)\n  }\n}\n\nexport function boolOrEmptySchema(it: SchemaCxt, valid: Name): void {\n  const {gen, schema} = it\n  if (schema === false) {\n    gen.var(valid, false) // TODO var\n    falseSchemaError(it)\n  } else {\n    gen.var(valid, true) // TODO var\n  }\n}\n\nfunction falseSchemaError(it: SchemaCxt, overrideAllErrors?: boolean): void {\n  const {gen, data} = it\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt: KeywordErrorCxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it,\n  }\n  reportError(cxt, boolError, undefined, overrideAllErrors)\n}\n", "import type {AddedKeywordDefinition} from \"../types\"\n\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"] as const\n\nexport type JSONType = (typeof _jsonTypes)[number]\n\nconst jsonTypes: Set<string> = new Set(_jsonTypes)\n\nexport function isJSONType(x: unknown): x is JSONType {\n  return typeof x == \"string\" && jsonTypes.has(x)\n}\n\ntype ValidationTypes = {\n  [K in JSONType]: boolean | RuleGroup | undefined\n}\n\nexport interface ValidationRules {\n  rules: RuleGroup[]\n  post: RuleGroup\n  all: {[Key in string]?: boolean | Rule} // rules that have to be validated\n  keywords: {[Key in string]?: boolean} // all known keywords (superset of \"all\")\n  types: ValidationTypes\n}\n\nexport interface RuleGroup {\n  type?: JSONType\n  rules: Rule[]\n}\n\n// This interface wraps KeywordDefinition because definition can have multiple keywords\nexport interface Rule {\n  keyword: string\n  definition: AddedKeywordDefinition\n}\n\nexport function getRules(): ValidationRules {\n  const groups: Record<\"number\" | \"string\" | \"array\" | \"object\", RuleGroup> = {\n    number: {type: \"number\", rules: []},\n    string: {type: \"string\", rules: []},\n    array: {type: \"array\", rules: []},\n    object: {type: \"object\", rules: []},\n  }\n  return {\n    types: {...groups, integer: true, boolean: true, null: true},\n    rules: [{rules: []}, groups.number, groups.string, groups.array, groups.object],\n    post: {rules: []},\n    all: {},\n    keywords: {},\n  }\n}\n", "import type {AnySchemaObject} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport type {JSONType, RuleGroup, Rule} from \"../rules\"\n\nexport function schemaHasRulesForType(\n  {schema, self}: SchemaObjCxt,\n  type: JSONType\n): boolean | undefined {\n  const group = self.RULES.types[type]\n  return group && group !== true && shouldUseGroup(schema, group)\n}\n\nexport function shouldUseGroup(schema: AnySchemaObject, group: RuleGroup): boolean {\n  return group.rules.some((rule) => shouldUseRule(schema, rule))\n}\n\nexport function shouldUseRule(schema: AnySchemaObject, rule: Rule): boolean | undefined {\n  return (\n    schema[rule.keyword] !== undefined ||\n    rule.definition.implements?.some((kwd) => schema[kwd] !== undefined)\n  )\n}\n", "import type {\n  KeywordErrorDefinition,\n  KeywordErrorCxt,\n  ErrorObject,\n  AnySchemaObject,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {isJSONType, JSONType} from \"../rules\"\nimport {schemaHasRulesForType} from \"./applicability\"\nimport {reportError} from \"../errors\"\nimport {_, nil, and, not, operators, Code, Name} from \"../codegen\"\nimport {toHash, schemaRefOrVal} from \"../util\"\n\nexport enum DataType {\n  Correct,\n  Wrong,\n}\n\nexport function getSchemaTypes(schema: AnySchemaObject): JSONType[] {\n  const types = getJSONTypes(schema.type)\n  const hasNull = types.includes(\"null\")\n  if (hasNull) {\n    if (schema.nullable === false) throw new Error(\"type: null contradicts nullable: false\")\n  } else {\n    if (!types.length && schema.nullable !== undefined) {\n      throw new Error('\"nullable\" cannot be used without \"type\"')\n    }\n    if (schema.nullable === true) types.push(\"null\")\n  }\n  return types\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport function getJSONTypes(ts: unknown | unknown[]): JSONType[] {\n  const types: unknown[] = Array.isArray(ts) ? ts : ts ? [ts] : []\n  if (types.every(isJSONType)) return types\n  throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"))\n}\n\nexport function coerceAndCheckDataType(it: SchemaObjCxt, types: JSONType[]): boolean {\n  const {gen, data, opts} = it\n  const coerceTo = coerceToTypes(types, opts.coerceTypes)\n  const checkTypes =\n    types.length > 0 &&\n    !(coerceTo.length === 0 && types.length === 1 && schemaHasRulesForType(it, types[0]))\n  if (checkTypes) {\n    const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong)\n    gen.if(wrongType, () => {\n      if (coerceTo.length) coerceData(it, types, coerceTo)\n      else reportTypeError(it)\n    })\n  }\n  return checkTypes\n}\n\nconst COERCIBLE: Set<JSONType> = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"])\nfunction coerceToTypes(types: JSONType[], coerceTypes?: boolean | \"array\"): JSONType[] {\n  return coerceTypes\n    ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n    : []\n}\n\nfunction coerceData(it: SchemaObjCxt, types: JSONType[], coerceTo: JSONType[]): void {\n  const {gen, data, opts} = it\n  const dataType = gen.let(\"dataType\", _`typeof ${data}`)\n  const coerced = gen.let(\"coerced\", _`undefined`)\n  if (opts.coerceTypes === \"array\") {\n    gen.if(_`${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () =>\n      gen\n        .assign(data, _`${data}[0]`)\n        .assign(dataType, _`typeof ${data}`)\n        .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data))\n    )\n  }\n  gen.if(_`${coerced} !== undefined`)\n  for (const t of coerceTo) {\n    if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n      coerceSpecificType(t)\n    }\n  }\n  gen.else()\n  reportTypeError(it)\n  gen.endIf()\n\n  gen.if(_`${coerced} !== undefined`, () => {\n    gen.assign(data, coerced)\n    assignParentData(it, coerced)\n  })\n\n  function coerceSpecificType(t: string): void {\n    switch (t) {\n      case \"string\":\n        gen\n          .elseIf(_`${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n          .assign(coerced, _`\"\" + ${data}`)\n          .elseIf(_`${data} === null`)\n          .assign(coerced, _`\"\"`)\n        return\n      case \"number\":\n        gen\n          .elseIf(\n            _`${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"integer\":\n        gen\n          .elseIf(\n            _`${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"boolean\":\n        gen\n          .elseIf(_`${data} === \"false\" || ${data} === 0 || ${data} === null`)\n          .assign(coerced, false)\n          .elseIf(_`${data} === \"true\" || ${data} === 1`)\n          .assign(coerced, true)\n        return\n      case \"null\":\n        gen.elseIf(_`${data} === \"\" || ${data} === 0 || ${data} === false`)\n        gen.assign(coerced, null)\n        return\n\n      case \"array\":\n        gen\n          .elseIf(\n            _`${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`\n          )\n          .assign(coerced, _`[${data}]`)\n    }\n  }\n}\n\nfunction assignParentData({gen, parentData, parentDataProperty}: SchemaObjCxt, expr: Name): void {\n  // TODO use gen.property\n  gen.if(_`${parentData} !== undefined`, () =>\n    gen.assign(_`${parentData}[${parentDataProperty}]`, expr)\n  )\n}\n\nexport function checkDataType(\n  dataType: JSONType,\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct = DataType.Correct\n): Code {\n  const EQ = correct === DataType.Correct ? operators.EQ : operators.NEQ\n  let cond: Code\n  switch (dataType) {\n    case \"null\":\n      return _`${data} ${EQ} null`\n    case \"array\":\n      cond = _`Array.isArray(${data})`\n      break\n    case \"object\":\n      cond = _`${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`\n      break\n    case \"integer\":\n      cond = numCond(_`!(${data} % 1) && !isNaN(${data})`)\n      break\n    case \"number\":\n      cond = numCond()\n      break\n    default:\n      return _`typeof ${data} ${EQ} ${dataType}`\n  }\n  return correct === DataType.Correct ? cond : not(cond)\n\n  function numCond(_cond: Code = nil): Code {\n    return and(_`typeof ${data} == \"number\"`, _cond, strictNums ? _`isFinite(${data})` : nil)\n  }\n}\n\nexport function checkDataTypes(\n  dataTypes: JSONType[],\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct?: DataType\n): Code {\n  if (dataTypes.length === 1) {\n    return checkDataType(dataTypes[0], data, strictNums, correct)\n  }\n  let cond: Code\n  const types = toHash(dataTypes)\n  if (types.array && types.object) {\n    const notObj = _`typeof ${data} != \"object\"`\n    cond = types.null ? notObj : _`!${data} || ${notObj}`\n    delete types.null\n    delete types.array\n    delete types.object\n  } else {\n    cond = nil\n  }\n  if (types.number) delete types.integer\n  for (const t in types) cond = and(cond, checkDataType(t as JSONType, data, strictNums, correct))\n  return cond\n}\n\nexport type TypeError = ErrorObject<\"type\", {type: string}>\n\nconst typeError: KeywordErrorDefinition = {\n  message: ({schema}) => `must be ${schema}`,\n  params: ({schema, schemaValue}) =>\n    typeof schema == \"string\" ? _`{type: ${schema}}` : _`{type: ${schemaValue}}`,\n}\n\nexport function reportTypeError(it: SchemaObjCxt): void {\n  const cxt = getTypeErrorContext(it)\n  reportError(cxt, typeError)\n}\n\nfunction getTypeErrorContext(it: SchemaObjCxt): KeywordErrorCxt {\n  const {gen, data, schema} = it\n  const schemaCode = schemaRefOrVal(it, schema, \"type\")\n  return {\n    gen,\n    keyword: \"type\",\n    data,\n    schema: schema.type,\n    schemaCode,\n    schemaValue: schemaCode,\n    parentSchema: schema,\n    params: {},\n    it,\n  }\n}\n", "import type {SchemaObjCxt} from \"..\"\nimport {_, getProperty, stringify} from \"../codegen\"\nimport {checkStrictMode} from \"../util\"\n\nexport function assignDefaults(it: SchemaObjCxt, ty?: string): void {\n  const {properties, items} = it.schema\n  if (ty === \"object\" && properties) {\n    for (const key in properties) {\n      assignDefault(it, key, properties[key].default)\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach((sch, i: number) => assignDefault(it, i, sch.default))\n  }\n}\n\nfunction assignDefault(it: SchemaObjCxt, prop: string | number, defaultValue: unknown): void {\n  const {gen, compositeRule, data, opts} = it\n  if (defaultValue === undefined) return\n  const childData = _`${data}${getProperty(prop)}`\n  if (compositeRule) {\n    checkStrictMode(it, `default is ignored for: ${childData}`)\n    return\n  }\n\n  let condition = _`${childData} === undefined`\n  if (opts.useDefaults === \"empty\") {\n    condition = _`${condition} || ${childData} === null || ${childData} === \"\"`\n  }\n  // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n  gen.if(condition, _`${childData} = ${stringify(defaultValue)}`)\n}\n", "import type {AnySchema, SchemaMap} from \"../types\"\nimport type {SchemaCxt} from \"../compile\"\nimport type {KeywordCxt} from \"../compile/validate\"\nimport {CodeGen, _, and, or, not, nil, strConcat, getProperty, Code, Name} from \"../compile/codegen\"\nimport {alwaysValidSchema, Type} from \"../compile/util\"\nimport N from \"../compile/names\"\nimport {useFunc} from \"../compile/util\"\nexport function checkReportMissingProp(cxt: KeywordCxt, prop: string): void {\n  const {gen, data, it} = cxt\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n    cxt.setParams({missingProperty: _`${prop}`}, true)\n    cxt.error()\n  })\n}\n\nexport function checkMissingProp(\n  {gen, data, it: {opts}}: KeywordCxt,\n  properties: string[],\n  missing: Name\n): Code {\n  return or(\n    ...properties.map((prop) =>\n      and(noPropertyInData(gen, data, prop, opts.ownProperties), _`${missing} = ${prop}`)\n    )\n  )\n}\n\nexport function reportMissingProp(cxt: KeywordCxt, missing: Name): void {\n  cxt.setParams({missingProperty: missing}, true)\n  cxt.error()\n}\n\nexport function hasPropFunc(gen: CodeGen): Name {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: _`Object.prototype.hasOwnProperty`,\n  })\n}\n\nexport function isOwnProperty(gen: CodeGen, data: Name, property: Name | string): Code {\n  return _`${hasPropFunc(gen)}.call(${data}, ${property})`\n}\n\nexport function propertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} !== undefined`\n  return ownProperties ? _`${cond} && ${isOwnProperty(gen, data, property)}` : cond\n}\n\nexport function noPropertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} === undefined`\n  return ownProperties ? or(cond, not(isOwnProperty(gen, data, property))) : cond\n}\n\nexport function allSchemaProperties(schemaMap?: SchemaMap): string[] {\n  return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : []\n}\n\nexport function schemaProperties(it: SchemaCxt, schemaMap: SchemaMap): string[] {\n  return allSchemaProperties(schemaMap).filter(\n    (p) => !alwaysValidSchema(it, schemaMap[p] as AnySchema)\n  )\n}\n\nexport function callValidateCode(\n  {schemaCode, data, it: {gen, topSchemaRef, schemaPath, errorPath}, it}: KeywordCxt,\n  func: Code,\n  context: Code,\n  passSchema?: boolean\n): Code {\n  const dataAndSchema = passSchema ? _`${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data\n  const valCxt: [Name, Code | number][] = [\n    [N.instancePath, strConcat(N.instancePath, errorPath)],\n    [N.parentData, it.parentData],\n    [N.parentDataProperty, it.parentDataProperty],\n    [N.rootData, N.rootData],\n  ]\n  if (it.opts.dynamicRef) valCxt.push([N.dynamicAnchors, N.dynamicAnchors])\n  const args = _`${dataAndSchema}, ${gen.object(...valCxt)}`\n  return context !== nil ? _`${func}.call(${context}, ${args})` : _`${func}(${args})`\n}\n\nconst newRegExp = _`new RegExp`\n\nexport function usePattern({gen, it: {opts}}: KeywordCxt, pattern: string): Name {\n  const u = opts.unicodeRegExp ? \"u\" : \"\"\n  const {regExp} = opts.code\n  const rx = regExp(pattern, u)\n\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: _`${regExp.code === \"new RegExp\" ? newRegExp : useFunc(gen, regExp)}(${pattern}, ${u})`,\n  })\n}\n\nexport function validateArray(cxt: KeywordCxt): Name {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  if (it.allErrors) {\n    const validArr = gen.let(\"valid\", true)\n    validateItems(() => gen.assign(validArr, false))\n    return validArr\n  }\n  gen.var(valid, true)\n  validateItems(() => gen.break())\n  return valid\n\n  function validateItems(notValid: () => void): void {\n    const len = gen.const(\"len\", _`${data}.length`)\n    gen.forRange(\"i\", 0, len, (i) => {\n      cxt.subschema(\n        {\n          keyword,\n          dataProp: i,\n          dataPropType: Type.Num,\n        },\n        valid\n      )\n      gen.if(not(valid), notValid)\n    })\n  }\n}\n\nexport function validateUnion(cxt: KeywordCxt): void {\n  const {gen, schema, keyword, it} = cxt\n  /* istanbul ignore if */\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n  const alwaysValid = schema.some((sch: AnySchema) => alwaysValidSchema(it, sch))\n  if (alwaysValid && !it.opts.unevaluated) return\n\n  const valid = gen.let(\"valid\", false)\n  const schValid = gen.name(\"_valid\")\n\n  gen.block(() =>\n    schema.forEach((_sch: AnySchema, i: number) => {\n      const schCxt = cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          compositeRule: true,\n        },\n        schValid\n      )\n      gen.assign(valid, _`${valid} || ${schValid}`)\n      const merged = cxt.mergeValidEvaluated(schCxt, schValid)\n      // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n      if (!merged) gen.if(not(valid))\n    })\n  )\n\n  cxt.result(\n    valid,\n    () => cxt.reset(),\n    () => cxt.error(true)\n  )\n}\n", "import type {KeywordCxt} from \".\"\nimport type {\n  AnySchema,\n  SchemaValidateFunction,\n  AnyValidateFunction,\n  AddedKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, nil, not, stringify, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport type {JSONType} from \"../rules\"\nimport {callValidateCode} from \"../../vocabularies/code\"\nimport {extendErrors} from \"../errors\"\n\ntype KeywordCompilationResult = AnySchema | SchemaValidateFunction | AnyValidateFunction\n\nexport function macroKeywordCode(cxt: KeywordCxt, def: MacroKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, it} = cxt\n  const macroSchema = def.macro.call(it.self, schema, parentSchema, it)\n  const schemaRef = useKeyword(gen, keyword, macroSchema)\n  if (it.opts.validateSchema !== false) it.self.validateSchema(macroSchema, true)\n\n  const valid = gen.name(\"valid\")\n  cxt.subschema(\n    {\n      schema: macroSchema,\n      schemaPath: nil,\n      errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n      topSchemaRef: schemaRef,\n      compositeRule: true,\n    },\n    valid\n  )\n  cxt.pass(valid, () => cxt.error(true))\n}\n\nexport function funcKeywordCode(cxt: KeywordCxt, def: FuncKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, $data, it} = cxt\n  checkAsyncKeyword(it, def)\n  const validate =\n    !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate\n  const validateRef = useKeyword(gen, keyword, validate)\n  const valid = gen.let(\"valid\")\n  cxt.block$data(valid, validateKeyword)\n  cxt.ok(def.valid ?? valid)\n\n  function validateKeyword(): void {\n    if (def.errors === false) {\n      assignValid()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => cxt.error())\n    } else {\n      const ruleErrs = def.async ? validateAsync() : validateSync()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => addErrs(cxt, ruleErrs))\n    }\n  }\n\n  function validateAsync(): Name {\n    const ruleErrs = gen.let(\"ruleErrs\", null)\n    gen.try(\n      () => assignValid(_`await `),\n      (e) =>\n        gen.assign(valid, false).if(\n          _`${e} instanceof ${it.ValidationError as Name}`,\n          () => gen.assign(ruleErrs, _`${e}.errors`),\n          () => gen.throw(e)\n        )\n    )\n    return ruleErrs\n  }\n\n  function validateSync(): Code {\n    const validateErrs = _`${validateRef}.errors`\n    gen.assign(validateErrs, null)\n    assignValid(nil)\n    return validateErrs\n  }\n\n  function assignValid(_await: Code = def.async ? _`await ` : nil): void {\n    const passCxt = it.opts.passContext ? N.this : N.self\n    const passSchema = !((\"compile\" in def && !$data) || def.schema === false)\n    gen.assign(\n      valid,\n      _`${_await}${callValidateCode(cxt, validateRef, passCxt, passSchema)}`,\n      def.modifying\n    )\n  }\n\n  function reportErrs(errors: () => void): void {\n    gen.if(not(def.valid ?? valid), errors)\n  }\n}\n\nfunction modifyData(cxt: KeywordCxt): void {\n  const {gen, data, it} = cxt\n  gen.if(it.parentData, () => gen.assign(data, _`${it.parentData}[${it.parentDataProperty}]`))\n}\n\nfunction addErrs(cxt: KeywordCxt, errs: Code): void {\n  const {gen} = cxt\n  gen.if(\n    _`Array.isArray(${errs})`,\n    () => {\n      gen\n        .assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`)\n        .assign(N.errors, _`${N.vErrors}.length`)\n      extendErrors(cxt)\n    },\n    () => cxt.error()\n  )\n}\n\nfunction checkAsyncKeyword({schemaEnv}: SchemaObjCxt, def: FuncKeywordDefinition): void {\n  if (def.async && !schemaEnv.$async) throw new Error(\"async keyword in sync schema\")\n}\n\nfunction useKeyword(gen: CodeGen, keyword: string, result?: KeywordCompilationResult): Name {\n  if (result === undefined) throw new Error(`keyword \"${keyword}\" failed to compile`)\n  return gen.scopeValue(\n    \"keyword\",\n    typeof result == \"function\" ? {ref: result} : {ref: result, code: stringify(result)}\n  )\n}\n\nexport function validSchemaType(\n  schema: unknown,\n  schemaType: JSONType[],\n  allowUndefined = false\n): boolean {\n  // TODO add tests\n  return (\n    !schemaType.length ||\n    schemaType.some((st) =>\n      st === \"array\"\n        ? Array.isArray(schema)\n        : st === \"object\"\n        ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n        : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")\n    )\n  )\n}\n\nexport function validateKeywordUsage(\n  {schema, opts, self, errSchemaPath}: SchemaObjCxt,\n  def: AddedKeywordDefinition,\n  keyword: string\n): void {\n  /* istanbul ignore if */\n  if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n    throw new Error(\"ajv implementation error\")\n  }\n\n  const deps = def.dependencies\n  if (deps?.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n    throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`)\n  }\n\n  if (def.validateSchema) {\n    const valid = def.validateSchema(schema[keyword])\n    if (!valid) {\n      const msg =\n        `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n        self.errorsText(def.validateSchema.errors)\n      if (opts.validateSchema === \"log\") self.logger.error(msg)\n      else throw new Error(msg)\n    }\n  }\n}\n", "import type {AnySchema} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, str, getProperty, Code, Name} from \"../codegen\"\nimport {escapeFragment, getErrorPath, Type} from \"../util\"\nimport type {JSONType} from \"../rules\"\n\nexport interface SubschemaContext {\n  // TODO use Optional? align with SchemCxt property types\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef?: Code\n  errorPath?: Code\n  dataLevel?: number\n  dataTypes?: JSONType[]\n  data?: Name\n  parentData?: Name\n  parentDataProperty?: Code | number\n  dataNames?: Name[]\n  dataPathArr?: (Code | number)[]\n  propertyName?: Name\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  compositeRule?: true\n  createErrors?: boolean\n  allErrors?: boolean\n}\n\nexport type SubschemaArgs = Partial<{\n  keyword: string\n  schemaProp: string | number\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef: Code\n  data: Name | Code\n  dataProp: Code | string | number\n  dataTypes: JSONType[]\n  definedProperties: Set<string>\n  propertyName: Name\n  dataPropType: Type\n  jtdDiscriminator: string\n  jtdMetadata: boolean\n  compositeRule: true\n  createErrors: boolean\n  allErrors: boolean\n}>\n\nexport function getSubschema(\n  it: SchemaObjCxt,\n  {keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef}: SubschemaArgs\n): SubschemaContext {\n  if (keyword !== undefined && schema !== undefined) {\n    throw new Error('both \"keyword\" and \"schema\" passed, only one allowed')\n  }\n\n  if (keyword !== undefined) {\n    const sch = it.schema[keyword]\n    return schemaProp === undefined\n      ? {\n          schema: sch,\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        }\n      : {\n          schema: sch[schemaProp],\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}${getProperty(schemaProp)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}/${escapeFragment(schemaProp)}`,\n        }\n  }\n\n  if (schema !== undefined) {\n    if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n      throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"')\n    }\n    return {\n      schema,\n      schemaPath,\n      topSchemaRef,\n      errSchemaPath,\n    }\n  }\n\n  throw new Error('either \"keyword\" or \"schema\" must be passed')\n}\n\nexport function extendSubschemaData(\n  subschema: SubschemaContext,\n  it: SchemaObjCxt,\n  {dataProp, dataPropType: dpType, data, dataTypes, propertyName}: SubschemaArgs\n): void {\n  if (data !== undefined && dataProp !== undefined) {\n    throw new Error('both \"data\" and \"dataProp\" passed, only one allowed')\n  }\n\n  const {gen} = it\n\n  if (dataProp !== undefined) {\n    const {errorPath, dataPathArr, opts} = it\n    const nextData = gen.let(\"data\", _`${it.data}${getProperty(dataProp)}`, true)\n    dataContextProps(nextData)\n    subschema.errorPath = str`${errorPath}${getErrorPath(dataProp, dpType, opts.jsPropertySyntax)}`\n    subschema.parentDataProperty = _`${dataProp}`\n    subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty]\n  }\n\n  if (data !== undefined) {\n    const nextData = data instanceof Name ? data : gen.let(\"data\", data, true) // replaceable if used once?\n    dataContextProps(nextData)\n    if (propertyName !== undefined) subschema.propertyName = propertyName\n    // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n  }\n\n  if (dataTypes) subschema.dataTypes = dataTypes\n\n  function dataContextProps(_nextData: Name): void {\n    subschema.data = _nextData\n    subschema.dataLevel = it.dataLevel + 1\n    subschema.dataTypes = []\n    it.definedProperties = new Set<string>()\n    subschema.parentData = it.data\n    subschema.dataNames = [...it.dataNames, _nextData]\n  }\n}\n\nexport function extendSubschemaMode(\n  subschema: SubschemaContext,\n  {jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors}: SubschemaArgs\n): void {\n  if (compositeRule !== undefined) subschema.compositeRule = compositeRule\n  if (createErrors !== undefined) subschema.createErrors = createErrors\n  if (allErrors !== undefined) subschema.allErrors = allErrors\n  subschema.jtdDiscriminator = jtdDiscriminator // not inherited\n  subschema.jtdMetadata = jtdMetadata // not inherited\n}\n", "'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n", "import type {AnySchema, AnySchemaObject, UriResolver} from \"../types\"\nimport type Ajv from \"../ajv\"\nimport type {URIComponent} from \"fast-uri\"\nimport {eachItem} from \"./util\"\nimport * as equal from \"fast-deep-equal\"\nimport * as traverse from \"json-schema-traverse\"\n\n// the hash of local references inside the schema (created by getSchemaRefs), used for inline resolution\nexport type LocalRefs = {[Ref in string]?: AnySchemaObject}\n\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\",\n  \"const\",\n])\n\nexport function inlineRef(schema: AnySchema, limit: boolean | number = true): boolean {\n  if (typeof schema == \"boolean\") return true\n  if (limit === true) return !hasRef(schema)\n  if (!limit) return false\n  return countKeys(schema) <= limit\n}\n\nconst REF_KEYWORDS = new Set([\n  \"$ref\",\n  \"$recursiveRef\",\n  \"$recursiveAnchor\",\n  \"$dynamicRef\",\n  \"$dynamicAnchor\",\n])\n\nfunction hasRef(schema: AnySchemaObject): boolean {\n  for (const key in schema) {\n    if (REF_KEYWORDS.has(key)) return true\n    const sch = schema[key]\n    if (Array.isArray(sch) && sch.some(hasRef)) return true\n    if (typeof sch == \"object\" && hasRef(sch)) return true\n  }\n  return false\n}\n\nfunction countKeys(schema: AnySchemaObject): number {\n  let count = 0\n  for (const key in schema) {\n    if (key === \"$ref\") return Infinity\n    count++\n    if (SIMPLE_INLINED.has(key)) continue\n    if (typeof schema[key] == \"object\") {\n      eachItem(schema[key], (sch) => (count += countKeys(sch)))\n    }\n    if (count === Infinity) return Infinity\n  }\n  return count\n}\n\nexport function getFullPath(resolver: UriResolver, id = \"\", normalize?: boolean): string {\n  if (normalize !== false) id = normalizeId(id)\n  const p = resolver.parse(id)\n  return _getFullPath(resolver, p)\n}\n\nexport function _getFullPath(resolver: UriResolver, p: URIComponent): string {\n  const serialized = resolver.serialize(p)\n  return serialized.split(\"#\")[0] + \"#\"\n}\n\nconst TRAILING_SLASH_HASH = /#\\/?$/\nexport function normalizeId(id: string | undefined): string {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\"\n}\n\nexport function resolveUrl(resolver: UriResolver, baseId: string, id: string): string {\n  id = normalizeId(id)\n  return resolver.resolve(baseId, id)\n}\n\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i\n\nexport function getSchemaRefs(this: Ajv, schema: AnySchema, baseId: string): LocalRefs {\n  if (typeof schema == \"boolean\") return {}\n  const {schemaId, uriResolver} = this.opts\n  const schId = normalizeId(schema[schemaId] || baseId)\n  const baseIds: {[JsonPtr in string]?: string} = {\"\": schId}\n  const pathPrefix = getFullPath(uriResolver, schId, false)\n  const localRefs: LocalRefs = {}\n  const schemaRefs: Set<string> = new Set()\n\n  traverse(schema, {allKeys: true}, (sch, jsonPtr, _, parentJsonPtr) => {\n    if (parentJsonPtr === undefined) return\n    const fullPath = pathPrefix + jsonPtr\n    let innerBaseId = baseIds[parentJsonPtr]\n    if (typeof sch[schemaId] == \"string\") innerBaseId = addRef.call(this, sch[schemaId])\n    addAnchor.call(this, sch.$anchor)\n    addAnchor.call(this, sch.$dynamicAnchor)\n    baseIds[jsonPtr] = innerBaseId\n\n    function addRef(this: Ajv, ref: string): string {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const _resolve = this.opts.uriResolver.resolve\n      ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref)\n      if (schemaRefs.has(ref)) throw ambiguos(ref)\n      schemaRefs.add(ref)\n      let schOrRef = this.refs[ref]\n      if (typeof schOrRef == \"string\") schOrRef = this.refs[schOrRef]\n      if (typeof schOrRef == \"object\") {\n        checkAmbiguosRef(sch, schOrRef.schema, ref)\n      } else if (ref !== normalizeId(fullPath)) {\n        if (ref[0] === \"#\") {\n          checkAmbiguosRef(sch, localRefs[ref], ref)\n          localRefs[ref] = sch\n        } else {\n          this.refs[ref] = fullPath\n        }\n      }\n      return ref\n    }\n\n    function addAnchor(this: Ajv, anchor: unknown): void {\n      if (typeof anchor == \"string\") {\n        if (!ANCHOR.test(anchor)) throw new Error(`invalid anchor \"${anchor}\"`)\n        addRef.call(this, `#${anchor}`)\n      }\n    }\n  })\n\n  return localRefs\n\n  function checkAmbiguosRef(sch1: AnySchema, sch2: AnySchema | undefined, ref: string): void {\n    if (sch2 !== undefined && !equal(sch1, sch2)) throw ambiguos(ref)\n  }\n\n  function ambiguos(ref: string): Error {\n    return new Error(`reference \"${ref}\" resolves to more than one schema`)\n  }\n}\n", "import type {\n  AddedKeywordDefinition,\n  AnySchema,\n  AnySchemaObject,\n  KeywordErrorCxt,\n  KeywordCxtParams,\n} from \"../../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \"..\"\nimport type {InstanceOptions} from \"../../core\"\nimport {boolOrEmptySchema, topBoolOrEmptySchema} from \"./boolSchema\"\nimport {coerceAndCheckDataType, getSchemaTypes} from \"./dataType\"\nimport {shouldUseGroup, shouldUseRule} from \"./applicability\"\nimport {checkDataType, checkDataTypes, reportTypeError, DataType} from \"./dataType\"\nimport {assignDefaults} from \"./defaults\"\nimport {funcKeywordCode, macroKeywordCode, validateKeywordUsage, validSchemaType} from \"./keyword\"\nimport {getSubschema, extendSubschemaData, SubschemaArgs, extendSubschemaMode} from \"./subschema\"\nimport {_, nil, str, or, not, getProperty, Block, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport {resolveUrl} from \"../resolve\"\nimport {\n  schemaRefOrVal,\n  schemaHasRulesButRef,\n  checkUnknownRules,\n  checkStrictMode,\n  unescapeJsonPointer,\n  mergeEvaluated,\n} from \"../util\"\nimport type {JSONType, Rule, RuleGroup} from \"../rules\"\nimport {\n  ErrorPaths,\n  reportError,\n  reportExtraError,\n  resetErrorsCount,\n  keyword$DataError,\n} from \"../errors\"\n\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nexport function validateFunctionCode(it: SchemaCxt): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      topSchemaObjCode(it)\n      return\n    }\n  }\n  validateFunction(it, () => topBoolOrEmptySchema(it))\n}\n\nfunction validateFunction(\n  {gen, validateName, schema, schemaEnv, opts}: SchemaCxt,\n  body: Block\n): void {\n  if (opts.code.es5) {\n    gen.func(validateName, _`${N.data}, ${N.valCxt}`, schemaEnv.$async, () => {\n      gen.code(_`\"use strict\"; ${funcSourceUrl(schema, opts)}`)\n      destructureValCxtES5(gen, opts)\n      gen.code(body)\n    })\n  } else {\n    gen.func(validateName, _`${N.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () =>\n      gen.code(funcSourceUrl(schema, opts)).code(body)\n    )\n  }\n}\n\nfunction destructureValCxt(opts: InstanceOptions): Code {\n  return _`{${N.instancePath}=\"\", ${N.parentData}, ${N.parentDataProperty}, ${N.rootData}=${\n    N.data\n  }${opts.dynamicRef ? _`, ${N.dynamicAnchors}={}` : nil}}={}`\n}\n\nfunction destructureValCxtES5(gen: CodeGen, opts: InstanceOptions): void {\n  gen.if(\n    N.valCxt,\n    () => {\n      gen.var(N.instancePath, _`${N.valCxt}.${N.instancePath}`)\n      gen.var(N.parentData, _`${N.valCxt}.${N.parentData}`)\n      gen.var(N.parentDataProperty, _`${N.valCxt}.${N.parentDataProperty}`)\n      gen.var(N.rootData, _`${N.valCxt}.${N.rootData}`)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`${N.valCxt}.${N.dynamicAnchors}`)\n    },\n    () => {\n      gen.var(N.instancePath, _`\"\"`)\n      gen.var(N.parentData, _`undefined`)\n      gen.var(N.parentDataProperty, _`undefined`)\n      gen.var(N.rootData, N.data)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`{}`)\n    }\n  )\n}\n\nfunction topSchemaObjCode(it: SchemaObjCxt): void {\n  const {schema, opts, gen} = it\n  validateFunction(it, () => {\n    if (opts.$comment && schema.$comment) commentKeyword(it)\n    checkNoDefault(it)\n    gen.let(N.vErrors, null)\n    gen.let(N.errors, 0)\n    if (opts.unevaluated) resetEvaluated(it)\n    typeAndKeywords(it)\n    returnResults(it)\n  })\n  return\n}\n\nfunction resetEvaluated(it: SchemaObjCxt): void {\n  // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n  const {gen, validateName} = it\n  it.evaluated = gen.const(\"evaluated\", _`${validateName}.evaluated`)\n  gen.if(_`${it.evaluated}.dynamicProps`, () => gen.assign(_`${it.evaluated}.props`, _`undefined`))\n  gen.if(_`${it.evaluated}.dynamicItems`, () => gen.assign(_`${it.evaluated}.items`, _`undefined`))\n}\n\nfunction funcSourceUrl(schema: AnySchema, opts: InstanceOptions): Code {\n  const schId = typeof schema == \"object\" && schema[opts.schemaId]\n  return schId && (opts.code.source || opts.code.process) ? _`/*# sourceURL=${schId} */` : nil\n}\n\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it: SchemaCxt, valid: Name): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      subSchemaObjCode(it, valid)\n      return\n    }\n  }\n  boolOrEmptySchema(it, valid)\n}\n\nfunction schemaCxtHasRules({schema, self}: SchemaCxt): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (self.RULES.all[key]) return true\n  return false\n}\n\nfunction isSchemaObj(it: SchemaCxt): it is SchemaObjCxt {\n  return typeof it.schema != \"boolean\"\n}\n\nfunction subSchemaObjCode(it: SchemaObjCxt, valid: Name): void {\n  const {schema, gen, opts} = it\n  if (opts.$comment && schema.$comment) commentKeyword(it)\n  updateContext(it)\n  checkAsyncSchema(it)\n  const errsCount = gen.const(\"_errs\", N.errors)\n  typeAndKeywords(it, errsCount)\n  // TODO var\n  gen.var(valid, _`${errsCount} === ${N.errors}`)\n}\n\nfunction checkKeywords(it: SchemaObjCxt): void {\n  checkUnknownRules(it)\n  checkRefsAndKeywords(it)\n}\n\nfunction typeAndKeywords(it: SchemaObjCxt, errsCount?: Name): void {\n  if (it.opts.jtd) return schemaKeywords(it, [], false, errsCount)\n  const types = getSchemaTypes(it.schema)\n  const checkedTypes = coerceAndCheckDataType(it, types)\n  schemaKeywords(it, types, !checkedTypes, errsCount)\n}\n\nfunction checkRefsAndKeywords(it: SchemaObjCxt): void {\n  const {schema, errSchemaPath, opts, self} = it\n  if (schema.$ref && opts.ignoreKeywordsWithRef && schemaHasRulesButRef(schema, self.RULES)) {\n    self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`)\n  }\n}\n\nfunction checkNoDefault(it: SchemaObjCxt): void {\n  const {schema, opts} = it\n  if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n    checkStrictMode(it, \"default is ignored in the schema root\")\n  }\n}\n\nfunction updateContext(it: SchemaObjCxt): void {\n  const schId = it.schema[it.opts.schemaId]\n  if (schId) it.baseId = resolveUrl(it.opts.uriResolver, it.baseId, schId)\n}\n\nfunction checkAsyncSchema(it: SchemaObjCxt): void {\n  if (it.schema.$async && !it.schemaEnv.$async) throw new Error(\"async schema in sync schema\")\n}\n\nfunction commentKeyword({gen, schemaEnv, schema, errSchemaPath, opts}: SchemaObjCxt): void {\n  const msg = schema.$comment\n  if (opts.$comment === true) {\n    gen.code(_`${N.self}.logger.log(${msg})`)\n  } else if (typeof opts.$comment == \"function\") {\n    const schemaPath = str`${errSchemaPath}/$comment`\n    const rootName = gen.scopeValue(\"root\", {ref: schemaEnv.root})\n    gen.code(_`${N.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`)\n  }\n}\n\nfunction returnResults(it: SchemaCxt): void {\n  const {gen, schemaEnv, validateName, ValidationError, opts} = it\n  if (schemaEnv.$async) {\n    // TODO assign unevaluated\n    gen.if(\n      _`${N.errors} === 0`,\n      () => gen.return(N.data),\n      () => gen.throw(_`new ${ValidationError as Name}(${N.vErrors})`)\n    )\n  } else {\n    gen.assign(_`${validateName}.errors`, N.vErrors)\n    if (opts.unevaluated) assignEvaluated(it)\n    gen.return(_`${N.errors} === 0`)\n  }\n}\n\nfunction assignEvaluated({gen, evaluated, props, items}: SchemaCxt): void {\n  if (props instanceof Name) gen.assign(_`${evaluated}.props`, props)\n  if (items instanceof Name) gen.assign(_`${evaluated}.items`, items)\n}\n\nfunction schemaKeywords(\n  it: SchemaObjCxt,\n  types: JSONType[],\n  typeErrors: boolean,\n  errsCount?: Name\n): void {\n  const {gen, schema, data, allErrors, opts, self} = it\n  const {RULES} = self\n  if (schema.$ref && (opts.ignoreKeywordsWithRef || !schemaHasRulesButRef(schema, RULES))) {\n    gen.block(() => keywordCode(it, \"$ref\", (RULES.all.$ref as Rule).definition)) // TODO typecast\n    return\n  }\n  if (!opts.jtd) checkStrictTypes(it, types)\n  gen.block(() => {\n    for (const group of RULES.rules) groupKeywords(group)\n    groupKeywords(RULES.post)\n  })\n\n  function groupKeywords(group: RuleGroup): void {\n    if (!shouldUseGroup(schema, group)) return\n    if (group.type) {\n      gen.if(checkDataType(group.type, data, opts.strictNumbers))\n      iterateKeywords(it, group)\n      if (types.length === 1 && types[0] === group.type && typeErrors) {\n        gen.else()\n        reportTypeError(it)\n      }\n      gen.endIf()\n    } else {\n      iterateKeywords(it, group)\n    }\n    // TODO make it \"ok\" call?\n    if (!allErrors) gen.if(_`${N.errors} === ${errsCount || 0}`)\n  }\n}\n\nfunction iterateKeywords(it: SchemaObjCxt, group: RuleGroup): void {\n  const {\n    gen,\n    schema,\n    opts: {useDefaults},\n  } = it\n  if (useDefaults) assignDefaults(it, group.type)\n  gen.block(() => {\n    for (const rule of group.rules) {\n      if (shouldUseRule(schema, rule)) {\n        keywordCode(it, rule.keyword, rule.definition, group.type)\n      }\n    }\n  })\n}\n\nfunction checkStrictTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (it.schemaEnv.meta || !it.opts.strictTypes) return\n  checkContextTypes(it, types)\n  if (!it.opts.allowUnionTypes) checkMultipleTypes(it, types)\n  checkKeywordTypes(it, it.dataTypes)\n}\n\nfunction checkContextTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (!types.length) return\n  if (!it.dataTypes.length) {\n    it.dataTypes = types\n    return\n  }\n  types.forEach((t) => {\n    if (!includesType(it.dataTypes, t)) {\n      strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`)\n    }\n  })\n  narrowSchemaTypes(it, types)\n}\n\nfunction checkMultipleTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n    strictTypesError(it, \"use allowUnionTypes to allow union type keyword\")\n  }\n}\n\nfunction checkKeywordTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  const rules = it.self.RULES.all\n  for (const keyword in rules) {\n    const rule = rules[keyword]\n    if (typeof rule == \"object\" && shouldUseRule(it.schema, rule)) {\n      const {type} = rule.definition\n      if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n        strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`)\n      }\n    }\n  }\n}\n\nfunction hasApplicableType(schTs: JSONType[], kwdT: JSONType): boolean {\n  return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"))\n}\n\nfunction includesType(ts: JSONType[], t: JSONType): boolean {\n  return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"))\n}\n\nfunction narrowSchemaTypes(it: SchemaObjCxt, withTypes: JSONType[]): void {\n  const ts: JSONType[] = []\n  for (const t of it.dataTypes) {\n    if (includesType(withTypes, t)) ts.push(t)\n    else if (withTypes.includes(\"integer\") && t === \"number\") ts.push(\"integer\")\n  }\n  it.dataTypes = ts\n}\n\nfunction strictTypesError(it: SchemaObjCxt, msg: string): void {\n  const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n  msg += ` at \"${schemaPath}\" (strictTypes)`\n  checkStrictMode(it, msg, it.opts.strictTypes)\n}\n\nexport class KeywordCxt implements KeywordErrorCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean\n  readonly keyword: string\n  readonly data: Name // Name referencing the current level of the data instance\n  readonly $data?: string | false\n  schema: any // keyword value in the schema\n  readonly schemaValue: Code | number | boolean // Code reference to keyword schema value or primitive value\n  readonly schemaCode: Code | number | boolean // Code reference to resolved schema value (different if schema is $data)\n  readonly schemaType: JSONType[] // allowed type(s) of keyword value in the schema\n  readonly parentSchema: AnySchemaObject\n  readonly errsCount?: Name // Name reference to the number of validation errors collected before this keyword,\n  // requires option trackErrors in keyword definition\n  params: KeywordCxtParams // object to pass parameters to error messages from keyword code\n  readonly it: SchemaObjCxt // schema compilation context (schema is guaranteed to be an object, not boolean)\n  readonly def: AddedKeywordDefinition\n\n  constructor(it: SchemaObjCxt, def: AddedKeywordDefinition, keyword: string) {\n    validateKeywordUsage(it, def, keyword)\n    this.gen = it.gen\n    this.allErrors = it.allErrors\n    this.keyword = keyword\n    this.data = it.data\n    this.schema = it.schema[keyword]\n    this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data\n    this.schemaValue = schemaRefOrVal(it, this.schema, keyword, this.$data)\n    this.schemaType = def.schemaType\n    this.parentSchema = it.schema\n    this.params = {}\n    this.it = it\n    this.def = def\n\n    if (this.$data) {\n      this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it))\n    } else {\n      this.schemaCode = this.schemaValue\n      if (!validSchemaType(this.schema, def.schemaType, def.allowUndefined)) {\n        throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`)\n      }\n    }\n\n    if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n      this.errsCount = it.gen.const(\"_errs\", N.errors)\n    }\n  }\n\n  result(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.failResult(not(condition), successAction, failAction)\n  }\n\n  failResult(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.gen.if(condition)\n    if (failAction) failAction()\n    else this.error()\n    if (successAction) {\n      this.gen.else()\n      successAction()\n      if (this.allErrors) this.gen.endIf()\n    } else {\n      if (this.allErrors) this.gen.endIf()\n      else this.gen.else()\n    }\n  }\n\n  pass(condition: Code, failAction?: () => void): void {\n    this.failResult(not(condition), undefined, failAction)\n  }\n\n  fail(condition?: Code): void {\n    if (condition === undefined) {\n      this.error()\n      if (!this.allErrors) this.gen.if(false) // this branch will be removed by gen.optimize\n      return\n    }\n    this.gen.if(condition)\n    this.error()\n    if (this.allErrors) this.gen.endIf()\n    else this.gen.else()\n  }\n\n  fail$data(condition: Code): void {\n    if (!this.$data) return this.fail(condition)\n    const {schemaCode} = this\n    this.fail(_`${schemaCode} !== undefined && (${or(this.invalid$data(), condition)})`)\n  }\n\n  error(append?: boolean, errorParams?: KeywordCxtParams, errorPaths?: ErrorPaths): void {\n    if (errorParams) {\n      this.setParams(errorParams)\n      this._error(append, errorPaths)\n      this.setParams({})\n      return\n    }\n    this._error(append, errorPaths)\n  }\n\n  private _error(append?: boolean, errorPaths?: ErrorPaths): void {\n    ;(append ? reportExtraError : reportError)(this, this.def.error, errorPaths)\n  }\n\n  $dataError(): void {\n    reportError(this, this.def.$dataError || keyword$DataError)\n  }\n\n  reset(): void {\n    if (this.errsCount === undefined) throw new Error('add \"trackErrors\" to keyword definition')\n    resetErrorsCount(this.gen, this.errsCount)\n  }\n\n  ok(cond: Code | boolean): void {\n    if (!this.allErrors) this.gen.if(cond)\n  }\n\n  setParams(obj: KeywordCxtParams, assign?: true): void {\n    if (assign) Object.assign(this.params, obj)\n    else this.params = obj\n  }\n\n  block$data(valid: Name, codeBlock: () => void, $dataValid: Code = nil): void {\n    this.gen.block(() => {\n      this.check$data(valid, $dataValid)\n      codeBlock()\n    })\n  }\n\n  check$data(valid: Name = nil, $dataValid: Code = nil): void {\n    if (!this.$data) return\n    const {gen, schemaCode, schemaType, def} = this\n    gen.if(or(_`${schemaCode} === undefined`, $dataValid))\n    if (valid !== nil) gen.assign(valid, true)\n    if (schemaType.length || def.validateSchema) {\n      gen.elseIf(this.invalid$data())\n      this.$dataError()\n      if (valid !== nil) gen.assign(valid, false)\n    }\n    gen.else()\n  }\n\n  invalid$data(): Code {\n    const {gen, schemaCode, schemaType, def, it} = this\n    return or(wrong$DataType(), invalid$DataSchema())\n\n    function wrong$DataType(): Code {\n      if (schemaType.length) {\n        /* istanbul ignore if */\n        if (!(schemaCode instanceof Name)) throw new Error(\"ajv implementation error\")\n        const st = Array.isArray(schemaType) ? schemaType : [schemaType]\n        return _`${checkDataTypes(st, schemaCode, it.opts.strictNumbers, DataType.Wrong)}`\n      }\n      return nil\n    }\n\n    function invalid$DataSchema(): Code {\n      if (def.validateSchema) {\n        const validateSchemaRef = gen.scopeValue(\"validate$data\", {ref: def.validateSchema}) // TODO value.code for standalone\n        return _`!${validateSchemaRef}(${schemaCode})`\n      }\n      return nil\n    }\n  }\n\n  subschema(appl: SubschemaArgs, valid: Name): SchemaCxt {\n    const subschema = getSubschema(this.it, appl)\n    extendSubschemaData(subschema, this.it, appl)\n    extendSubschemaMode(subschema, appl)\n    const nextContext = {...this.it, ...subschema, items: undefined, props: undefined}\n    subschemaCode(nextContext, valid)\n    return nextContext\n  }\n\n  mergeEvaluated(schemaCxt: SchemaCxt, toName?: typeof Name): void {\n    const {it, gen} = this\n    if (!it.opts.unevaluated) return\n    if (it.props !== true && schemaCxt.props !== undefined) {\n      it.props = mergeEvaluated.props(gen, schemaCxt.props, it.props, toName)\n    }\n    if (it.items !== true && schemaCxt.items !== undefined) {\n      it.items = mergeEvaluated.items(gen, schemaCxt.items, it.items, toName)\n    }\n  }\n\n  mergeValidEvaluated(schemaCxt: SchemaCxt, valid: Name): boolean | void {\n    const {it, gen} = this\n    if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n      gen.if(valid, () => this.mergeEvaluated(schemaCxt, Name))\n      return true\n    }\n  }\n}\n\nfunction keywordCode(\n  it: SchemaObjCxt,\n  keyword: string,\n  def: AddedKeywordDefinition,\n  ruleType?: JSONType\n): void {\n  const cxt = new KeywordCxt(it, def, keyword)\n  if (\"code\" in def) {\n    def.code(cxt, ruleType)\n  } else if (cxt.$data && def.validate) {\n    funcKeywordCode(cxt, def)\n  } else if (\"macro\" in def) {\n    macroKeywordCode(cxt, def)\n  } else if (def.compile || def.validate) {\n    funcKeywordCode(cxt, def)\n  }\n}\n\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/\nexport function getData(\n  $data: string,\n  {dataLevel, dataNames, dataPathArr}: SchemaCxt\n): Code | number {\n  let jsonPointer\n  let data: Code\n  if ($data === \"\") return N.rootData\n  if ($data[0] === \"/\") {\n    if (!JSON_POINTER.test($data)) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    jsonPointer = $data\n    data = N.rootData\n  } else {\n    const matches = RELATIVE_JSON_POINTER.exec($data)\n    if (!matches) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    const up: number = +matches[1]\n    jsonPointer = matches[2]\n    if (jsonPointer === \"#\") {\n      if (up >= dataLevel) throw new Error(errorMsg(\"property/index\", up))\n      return dataPathArr[dataLevel - up]\n    }\n    if (up > dataLevel) throw new Error(errorMsg(\"data\", up))\n    data = dataNames[dataLevel - up]\n    if (!jsonPointer) return data\n  }\n\n  let expr = data\n  const segments = jsonPointer.split(\"/\")\n  for (const segment of segments) {\n    if (segment) {\n      data = _`${data}${getProperty(unescapeJsonPointer(segment))}`\n      expr = _`${expr} && ${data}`\n    }\n  }\n  return expr\n\n  function errorMsg(pointerType: string, up: number): string {\n    return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`\n  }\n}\n", "import type {ErrorObject} from \"../types\"\n\nexport default class ValidationError extends Error {\n  readonly errors: Partial<ErrorObject>[]\n  readonly ajv: true\n  readonly validation: true\n\n  constructor(errors: Partial<ErrorObject>[]) {\n    super(\"validation failed\")\n    this.errors = errors\n    this.ajv = this.validation = true\n  }\n}\n", "import {resolveUrl, normalizeId, getFullPath} from \"./resolve\"\nimport type {UriResolver} from \"../types\"\n\nexport default class MissingRefError extends Error {\n  readonly missingRef: string\n  readonly missingSchema: string\n\n  constructor(resolver: UriResolver, baseId: string, ref: string, msg?: string) {\n    super(msg || `can't resolve reference ${ref} from id ${baseId}`)\n    this.missingRef = resolveUrl(resolver, baseId, ref)\n    this.missingSchema = normalizeId(getFullPath(resolver, this.missingRef))\n  }\n}\n", "import type {\n  AnySchema,\n  AnySchemaObject,\n  AnyValidateFunction,\n  AsyncValidateFunction,\n  EvaluatedProperties,\n  EvaluatedItems,\n} from \"../types\"\nimport type Ajv from \"../core\"\nimport type {InstanceOptions} from \"../core\"\nimport {CodeGen, _, nil, stringify, Name, Code, ValueScopeName} from \"./codegen\"\nimport ValidationError from \"../runtime/validation_error\"\nimport N from \"./names\"\nimport {LocalRefs, getFullPath, _getFullPath, inlineRef, normalizeId, resolveUrl} from \"./resolve\"\nimport {schemaHasRulesButRef, unescapeFragment} from \"./util\"\nimport {validateFunctionCode} from \"./validate\"\nimport {URIComponent} from \"fast-uri\"\nimport {JSONType} from \"./rules\"\n\nexport type SchemaRefs = {\n  [Ref in string]?: SchemaEnv | AnySchema\n}\n\nexport interface SchemaCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean // validation mode - whether to collect all errors or break on error\n  readonly data: Name // Name with reference to the current part of data instance\n  readonly parentData: Name // should be used in keywords modifying data\n  readonly parentDataProperty: Code | number // should be used in keywords modifying data\n  readonly dataNames: Name[]\n  readonly dataPathArr: (Code | number)[]\n  readonly dataLevel: number // the level of the currently validated data,\n  // it can be used to access both the property names and the data on all levels from the top.\n  dataTypes: JSONType[] // data types applied to the current part of data instance\n  definedProperties: Set<string> // set of properties to keep track of for required checks\n  readonly topSchemaRef: Code\n  readonly validateName: Name\n  evaluated?: Name\n  readonly ValidationError?: Name\n  readonly schema: AnySchema // current schema object - equal to parentSchema passed via KeywordCxt\n  readonly schemaEnv: SchemaEnv\n  readonly rootId: string\n  baseId: string // the current schema base URI that should be used as the base for resolving URIs in references (\\$ref)\n  readonly schemaPath: Code // the run-time expression that evaluates to the property name of the current schema\n  readonly errSchemaPath: string // this is actual string, should not be changed to Code\n  readonly errorPath: Code\n  readonly propertyName?: Name\n  readonly compositeRule?: boolean // true indicates that the current schema is inside the compound keyword,\n  // where failing some rule doesn't mean validation failure (`anyOf`, `oneOf`, `not`, `if`).\n  // This flag is used to determine whether you can return validation result immediately after any error in case the option `allErrors` is not `true.\n  // You only need to use it if you have many steps in your keywords and potentially can define multiple errors.\n  props?: EvaluatedProperties | Name // properties evaluated by this schema - used by parent schema or assigned to validation function\n  items?: EvaluatedItems | Name // last item evaluated by this schema - used by parent schema or assigned to validation function\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  readonly createErrors?: boolean\n  readonly opts: InstanceOptions // Ajv instance option.\n  readonly self: Ajv // current Ajv instance\n}\n\nexport interface SchemaObjCxt extends SchemaCxt {\n  readonly schema: AnySchemaObject\n}\ninterface SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root?: SchemaEnv\n  readonly baseId?: string\n  readonly schemaPath?: string\n  readonly localRefs?: LocalRefs\n  readonly meta?: boolean\n}\n\nexport class SchemaEnv implements SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root: SchemaEnv\n  baseId: string // TODO possibly, it should be readonly\n  schemaPath?: string\n  localRefs?: LocalRefs\n  readonly meta?: boolean\n  readonly $async?: boolean // true if the current schema is asynchronous.\n  readonly refs: SchemaRefs = {}\n  readonly dynamicAnchors: {[Ref in string]?: true} = {}\n  validate?: AnyValidateFunction\n  validateName?: ValueScopeName\n  serialize?: (data: unknown) => string\n  serializeName?: ValueScopeName\n  parse?: (data: string) => unknown\n  parseName?: ValueScopeName\n\n  constructor(env: SchemaEnvArgs) {\n    let schema: AnySchemaObject | undefined\n    if (typeof env.schema == \"object\") schema = env.schema\n    this.schema = env.schema\n    this.schemaId = env.schemaId\n    this.root = env.root || this\n    this.baseId = env.baseId ?? normalizeId(schema?.[env.schemaId || \"$id\"])\n    this.schemaPath = env.schemaPath\n    this.localRefs = env.localRefs\n    this.meta = env.meta\n    this.$async = schema?.$async\n    this.refs = {}\n  }\n}\n\n// let codeSize = 0\n// let nodeCount = 0\n\n// Compiles schema in SchemaEnv\nexport function compileSchema(this: Ajv, sch: SchemaEnv): SchemaEnv {\n  // TODO refactor - remove compilations\n  const _sch = getCompilingSchema.call(this, sch)\n  if (_sch) return _sch\n  const rootId = getFullPath(this.opts.uriResolver, sch.root.baseId) // TODO if getFullPath removed 1 tests fails\n  const {es5, lines} = this.opts.code\n  const {ownProperties} = this.opts\n  const gen = new CodeGen(this.scope, {es5, lines, ownProperties})\n  let _ValidationError\n  if (sch.$async) {\n    _ValidationError = gen.scopeValue(\"Error\", {\n      ref: ValidationError,\n      code: _`require(\"ajv/dist/runtime/validation_error\").default`,\n    })\n  }\n\n  const validateName = gen.scopeName(\"validate\")\n  sch.validateName = validateName\n\n  const schemaCxt: SchemaCxt = {\n    gen,\n    allErrors: this.opts.allErrors,\n    data: N.data,\n    parentData: N.parentData,\n    parentDataProperty: N.parentDataProperty,\n    dataNames: [N.data],\n    dataPathArr: [nil], // TODO can its length be used as dataLevel if nil is removed?\n    dataLevel: 0,\n    dataTypes: [],\n    definedProperties: new Set<string>(),\n    topSchemaRef: gen.scopeValue(\n      \"schema\",\n      this.opts.code.source === true\n        ? {ref: sch.schema, code: stringify(sch.schema)}\n        : {ref: sch.schema}\n    ),\n    validateName,\n    ValidationError: _ValidationError,\n    schema: sch.schema,\n    schemaEnv: sch,\n    rootId,\n    baseId: sch.baseId || rootId,\n    schemaPath: nil,\n    errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n    errorPath: _`\"\"`,\n    opts: this.opts,\n    self: this,\n  }\n\n  let sourceCode: string | undefined\n  try {\n    this._compilations.add(sch)\n    validateFunctionCode(schemaCxt)\n    gen.optimize(this.opts.code.optimize)\n    // gen.optimize(1)\n    const validateCode = gen.toString()\n    sourceCode = `${gen.scopeRefs(N.scope)}return ${validateCode}`\n    // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n    if (this.opts.code.process) sourceCode = this.opts.code.process(sourceCode, sch)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n    const makeValidate = new Function(`${N.self}`, `${N.scope}`, sourceCode)\n    const validate: AnyValidateFunction = makeValidate(this, this.scope.get())\n    this.scope.value(validateName, {ref: validate})\n\n    validate.errors = null\n    validate.schema = sch.schema\n    validate.schemaEnv = sch\n    if (sch.$async) (validate as AsyncValidateFunction).$async = true\n    if (this.opts.code.source === true) {\n      validate.source = {validateName, validateCode, scopeValues: gen._values}\n    }\n    if (this.opts.unevaluated) {\n      const {props, items} = schemaCxt\n      validate.evaluated = {\n        props: props instanceof Name ? undefined : props,\n        items: items instanceof Name ? undefined : items,\n        dynamicProps: props instanceof Name,\n        dynamicItems: items instanceof Name,\n      }\n      if (validate.source) validate.source.evaluated = stringify(validate.evaluated)\n    }\n    sch.validate = validate\n    return sch\n  } catch (e) {\n    delete sch.validate\n    delete sch.validateName\n    if (sourceCode) this.logger.error(\"Error compiling schema, function code:\", sourceCode)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n    throw e\n  } finally {\n    this._compilations.delete(sch)\n  }\n}\n\nexport function resolveRef(\n  this: Ajv,\n  root: SchemaEnv,\n  baseId: string,\n  ref: string\n): AnySchema | SchemaEnv | undefined {\n  ref = resolveUrl(this.opts.uriResolver, baseId, ref)\n  const schOrFunc = root.refs[ref]\n  if (schOrFunc) return schOrFunc\n\n  let _sch = resolve.call(this, root, ref)\n  if (_sch === undefined) {\n    const schema = root.localRefs?.[ref] // TODO maybe localRefs should hold SchemaEnv\n    const {schemaId} = this.opts\n    if (schema) _sch = new SchemaEnv({schema, schemaId, root, baseId})\n  }\n\n  if (_sch === undefined) return\n  return (root.refs[ref] = inlineOrCompile.call(this, _sch))\n}\n\nfunction inlineOrCompile(this: Ajv, sch: SchemaEnv): AnySchema | SchemaEnv {\n  if (inlineRef(sch.schema, this.opts.inlineRefs)) return sch.schema\n  return sch.validate ? sch : compileSchema.call(this, sch)\n}\n\n// Index of schema compilation in the currently compiled list\nexport function getCompilingSchema(this: Ajv, schEnv: SchemaEnv): SchemaEnv | void {\n  for (const sch of this._compilations) {\n    if (sameSchemaEnv(sch, schEnv)) return sch\n  }\n}\n\nfunction sameSchemaEnv(s1: SchemaEnv, s2: SchemaEnv): boolean {\n  return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId\n}\n\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(\n  this: Ajv,\n  root: SchemaEnv, // information about the root schema for the current schema\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  let sch\n  while (typeof (sch = this.refs[ref]) == \"string\") ref = sch\n  return sch || this.schemas[ref] || resolveSchema.call(this, root, ref)\n}\n\n// Resolve schema, its root and baseId\nexport function resolveSchema(\n  this: Ajv,\n  root: SchemaEnv, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  const p = this.opts.uriResolver.parse(ref)\n  const refPath = _getFullPath(this.opts.uriResolver, p)\n  let baseId = getFullPath(this.opts.uriResolver, root.baseId, undefined)\n  // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n  if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n    return getJsonPointer.call(this, p, root)\n  }\n\n  const id = normalizeId(refPath)\n  const schOrRef = this.refs[id] || this.schemas[id]\n  if (typeof schOrRef == \"string\") {\n    const sch = resolveSchema.call(this, root, schOrRef)\n    if (typeof sch?.schema !== \"object\") return\n    return getJsonPointer.call(this, p, sch)\n  }\n\n  if (typeof schOrRef?.schema !== \"object\") return\n  if (!schOrRef.validate) compileSchema.call(this, schOrRef)\n  if (id === normalizeId(ref)) {\n    const {schema} = schOrRef\n    const {schemaId} = this.opts\n    const schId = schema[schemaId]\n    if (schId) baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    return new SchemaEnv({schema, schemaId, root, baseId})\n  }\n  return getJsonPointer.call(this, p, schOrRef)\n}\n\nconst PREVENT_SCOPE_CHANGE = new Set([\n  \"properties\",\n  \"patternProperties\",\n  \"enum\",\n  \"dependencies\",\n  \"definitions\",\n])\n\nfunction getJsonPointer(\n  this: Ajv,\n  parsedRef: URIComponent,\n  {baseId, schema, root}: SchemaEnv\n): SchemaEnv | undefined {\n  if (parsedRef.fragment?.[0] !== \"/\") return\n  for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n    if (typeof schema === \"boolean\") return\n    const partSchema = schema[unescapeFragment(part)]\n    if (partSchema === undefined) return\n    schema = partSchema\n    // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n    const schId = typeof schema === \"object\" && schema[this.opts.schemaId]\n    if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n      baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    }\n  }\n  let env: SchemaEnv | undefined\n  if (typeof schema != \"boolean\" && schema.$ref && !schemaHasRulesButRef(schema, this.RULES)) {\n    const $ref = resolveUrl(this.opts.uriResolver, baseId, schema.$ref)\n    env = resolveSchema.call(this, root, $ref)\n  }\n  // even though resolution failed we need to return SchemaEnv to throw exception\n  // so that compileAsync loads missing schema.\n  const {schemaId} = this.opts\n  env = env || new SchemaEnv({schema, schemaId, root, baseId})\n  if (env.schema !== env.root.schema) return env\n  return undefined\n}\n", "{\n  \"$id\": \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n  \"description\": \"Meta-schema for $data reference (JSON AnySchema extension proposal)\",\n  \"type\": \"object\",\n  \"required\": [\"$data\"],\n  \"properties\": {\n    \"$data\": {\n      \"type\": \"string\",\n      \"anyOf\": [{\"format\": \"relative-json-pointer\"}, {\"format\": \"json-pointer\"}]\n    }\n  },\n  \"additionalProperties\": false\n}\n", "import * as uri from \"fast-uri\"\n\ntype URI = typeof uri & {code: string}\n;(uri as URI).code = 'require(\"ajv/dist/runtime/uri\").default'\n\nexport default uri as URI\n", "export {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  AnyValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport interface Plugin<Opts> {\n  (ajv: Ajv, options?: Opts): Ajv\n  [prop: string]: any\n}\n\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\n\nimport type {\n  Schema,\n  AnySchema,\n  AnySchemaObject,\n  SchemaObject,\n  AsyncSchema,\n  Vocabulary,\n  KeywordDefinition,\n  AddedKeywordDefinition,\n  AnyValidateFunction,\n  ValidateFunction,\n  AsyncValidateFunction,\n  ErrorObject,\n  Format,\n  AddedFormat,\n  RegExpEngine,\n  UriResolver,\n} from \"./types\"\nimport type {JSONSchemaType} from \"./types/json-schema\"\nimport type {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nimport ValidationError from \"./runtime/validation_error\"\nimport MissingRefError from \"./compile/ref_error\"\nimport {getRules, ValidationRules, Rule, RuleGroup, JSONType} from \"./compile/rules\"\nimport {SchemaEnv, compileSchema, resolveSchema} from \"./compile\"\nimport {Code, ValueScope} from \"./compile/codegen\"\nimport {normalizeId, getSchemaRefs} from \"./compile/resolve\"\nimport {getJSONTypes} from \"./compile/validate/dataType\"\nimport {eachItem} from \"./compile/util\"\nimport * as $dataRefSchema from \"./refs/data.json\"\n\nimport DefaultUriResolver from \"./runtime/uri\"\n\nconst defaultRegExp: RegExpEngine = (str, flags) => new RegExp(str, flags)\ndefaultRegExp.code = \"new RegExp\"\n\nconst META_IGNORE_OPTIONS: (keyof Options)[] = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"]\nconst EXT_SCOPE_NAMES = new Set([\n  \"validate\",\n  \"serialize\",\n  \"parse\",\n  \"wrapper\",\n  \"root\",\n  \"schema\",\n  \"keyword\",\n  \"pattern\",\n  \"formats\",\n  \"validate$data\",\n  \"func\",\n  \"obj\",\n  \"Error\",\n])\n\nexport type Options = CurrentOptions & DeprecatedOptions\n\nexport interface CurrentOptions {\n  // strict mode options (NEW)\n  strict?: boolean | \"log\"\n  strictSchema?: boolean | \"log\"\n  strictNumbers?: boolean | \"log\"\n  strictTypes?: boolean | \"log\"\n  strictTuples?: boolean | \"log\"\n  strictRequired?: boolean | \"log\"\n  allowMatchingProperties?: boolean // disables a strict mode restriction\n  allowUnionTypes?: boolean\n  validateFormats?: boolean\n  // validation and reporting options:\n  $data?: boolean\n  allErrors?: boolean\n  verbose?: boolean\n  discriminator?: boolean\n  unicodeRegExp?: boolean\n  timestamp?: \"string\" | \"date\" // JTD only\n  parseDate?: boolean // JTD only\n  allowDate?: boolean // JTD only\n  $comment?:\n    | true\n    | ((comment: string, schemaPath?: string, rootSchema?: AnySchemaObject) => unknown)\n  formats?: {[Name in string]?: Format}\n  keywords?: Vocabulary\n  schemas?: AnySchema[] | {[Key in string]?: AnySchema}\n  logger?: Logger | false\n  loadSchema?: (uri: string) => Promise<AnySchemaObject>\n  // options to modify validated data:\n  removeAdditional?: boolean | \"all\" | \"failing\"\n  useDefaults?: boolean | \"empty\"\n  coerceTypes?: boolean | \"array\"\n  // advanced options:\n  next?: boolean // NEW\n  unevaluated?: boolean // NEW\n  dynamicRef?: boolean // NEW\n  schemaId?: \"id\" | \"$id\"\n  jtd?: boolean // NEW\n  meta?: SchemaObject | boolean\n  defaultMeta?: string | AnySchemaObject\n  validateSchema?: boolean | \"log\"\n  addUsedSchema?: boolean\n  inlineRefs?: boolean | number\n  passContext?: boolean\n  loopRequired?: number\n  loopEnum?: number // NEW\n  ownProperties?: boolean\n  multipleOfPrecision?: number\n  int32range?: boolean // JTD only\n  messages?: boolean\n  code?: CodeOptions // NEW\n  uriResolver?: UriResolver\n}\n\nexport interface CodeOptions {\n  es5?: boolean\n  esm?: boolean\n  lines?: boolean\n  optimize?: boolean | number\n  formats?: Code // code to require (or construct) map of available formats - for standalone code\n  source?: boolean\n  process?: (code: string, schema?: SchemaEnv) => string\n  regExp?: RegExpEngine\n}\n\ninterface InstanceCodeOptions extends CodeOptions {\n  regExp: RegExpEngine\n  optimize: number\n}\n\ninterface DeprecatedOptions {\n  /** @deprecated */\n  ignoreKeywordsWithRef?: boolean\n  /** @deprecated */\n  jsPropertySyntax?: boolean // added instead of jsonPointers\n  /** @deprecated */\n  unicode?: boolean\n}\n\ninterface RemovedOptions {\n  format?: boolean\n  errorDataPath?: \"object\" | \"property\"\n  nullable?: boolean // \"nullable\" keyword is supported by default\n  jsonPointers?: boolean\n  extendRefs?: true | \"ignore\" | \"fail\"\n  missingRefs?: true | \"ignore\" | \"fail\"\n  processCode?: (code: string, schema?: SchemaEnv) => string\n  sourceCode?: boolean\n  strictDefaults?: boolean\n  strictKeywords?: boolean\n  uniqueItems?: boolean\n  unknownFormats?: true | string[] | \"ignore\"\n  cache?: any\n  serialize?: (schema: AnySchema) => unknown\n  ajvErrors?: boolean\n}\n\ntype OptionsInfo<T extends RemovedOptions | DeprecatedOptions> = {\n  [K in keyof T]-?: string | undefined\n}\n\nconst removedOptions: OptionsInfo<RemovedOptions> = {\n  errorDataPath: \"\",\n  format: \"`validateFormats: false` can be used instead.\",\n  nullable: '\"nullable\" keyword is supported by default.',\n  jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n  extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n  missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n  processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n  sourceCode: \"Use option `code: {source: true}`\",\n  strictDefaults: \"It is default now, see option `strict`.\",\n  strictKeywords: \"It is default now, see option `strict`.\",\n  uniqueItems: '\"uniqueItems\" keyword is always validated.',\n  unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n  cache: \"Map is used as cache, schema object as key.\",\n  serialize: \"Map is used as cache, schema object as key.\",\n  ajvErrors: \"It is default now.\",\n}\n\nconst deprecatedOptions: OptionsInfo<DeprecatedOptions> = {\n  ignoreKeywordsWithRef: \"\",\n  jsPropertySyntax: \"\",\n  unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n}\n\ntype RequiredInstanceOptions = {\n  [K in\n    | \"strictSchema\"\n    | \"strictNumbers\"\n    | \"strictTypes\"\n    | \"strictTuples\"\n    | \"strictRequired\"\n    | \"inlineRefs\"\n    | \"loopRequired\"\n    | \"loopEnum\"\n    | \"meta\"\n    | \"messages\"\n    | \"schemaId\"\n    | \"addUsedSchema\"\n    | \"validateSchema\"\n    | \"validateFormats\"\n    | \"int32range\"\n    | \"unicodeRegExp\"\n    | \"uriResolver\"]: NonNullable<Options[K]>\n} & {code: InstanceCodeOptions}\n\nexport type InstanceOptions = Options & RequiredInstanceOptions\n\nconst MAX_EXPRESSION = 200\n\n// eslint-disable-next-line complexity\nfunction requiredOptions(o: Options): RequiredInstanceOptions {\n  const s = o.strict\n  const _optz = o.code?.optimize\n  const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0\n  const regExp = o.code?.regExp ?? defaultRegExp\n  const uriResolver = o.uriResolver ?? DefaultUriResolver\n  return {\n    strictSchema: o.strictSchema ?? s ?? true,\n    strictNumbers: o.strictNumbers ?? s ?? true,\n    strictTypes: o.strictTypes ?? s ?? \"log\",\n    strictTuples: o.strictTuples ?? s ?? \"log\",\n    strictRequired: o.strictRequired ?? s ?? false,\n    code: o.code ? {...o.code, optimize, regExp} : {optimize, regExp},\n    loopRequired: o.loopRequired ?? MAX_EXPRESSION,\n    loopEnum: o.loopEnum ?? MAX_EXPRESSION,\n    meta: o.meta ?? true,\n    messages: o.messages ?? true,\n    inlineRefs: o.inlineRefs ?? true,\n    schemaId: o.schemaId ?? \"$id\",\n    addUsedSchema: o.addUsedSchema ?? true,\n    validateSchema: o.validateSchema ?? true,\n    validateFormats: o.validateFormats ?? true,\n    unicodeRegExp: o.unicodeRegExp ?? true,\n    int32range: o.int32range ?? true,\n    uriResolver: uriResolver,\n  }\n}\n\nexport interface Logger {\n  log(...args: unknown[]): unknown\n  warn(...args: unknown[]): unknown\n  error(...args: unknown[]): unknown\n}\n\nexport default class Ajv {\n  opts: InstanceOptions\n  errors?: ErrorObject[] | null // errors from the last validation\n  logger: Logger\n  // shared external scope values for compiled functions\n  readonly scope: ValueScope\n  readonly schemas: {[Key in string]?: SchemaEnv} = {}\n  readonly refs: {[Ref in string]?: SchemaEnv | string} = {}\n  readonly formats: {[Name in string]?: AddedFormat} = {}\n  readonly RULES: ValidationRules\n  readonly _compilations: Set<SchemaEnv> = new Set()\n  private readonly _loading: {[Ref in string]?: Promise<AnySchemaObject>} = {}\n  private readonly _cache: Map<AnySchema, SchemaEnv> = new Map()\n  private readonly _metaOpts: InstanceOptions\n\n  static ValidationError = ValidationError\n  static MissingRefError = MissingRefError\n\n  constructor(opts: Options = {}) {\n    opts = this.opts = {...opts, ...requiredOptions(opts)}\n    const {es5, lines} = this.opts.code\n\n    this.scope = new ValueScope({scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines})\n    this.logger = getLogger(opts.logger)\n    const formatOpt = opts.validateFormats\n    opts.validateFormats = false\n\n    this.RULES = getRules()\n    checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\")\n    checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\")\n    this._metaOpts = getMetaSchemaOptions.call(this)\n\n    if (opts.formats) addInitialFormats.call(this)\n    this._addVocabularies()\n    this._addDefaultMetaSchema()\n    if (opts.keywords) addInitialKeywords.call(this, opts.keywords)\n    if (typeof opts.meta == \"object\") this.addMetaSchema(opts.meta)\n    addInitialSchemas.call(this)\n    opts.validateFormats = formatOpt\n  }\n\n  _addVocabularies(): void {\n    this.addKeyword(\"$async\")\n  }\n\n  _addDefaultMetaSchema(): void {\n    const {$data, meta, schemaId} = this.opts\n    let _dataRefSchema: SchemaObject = $dataRefSchema\n    if (schemaId === \"id\") {\n      _dataRefSchema = {...$dataRefSchema}\n      _dataRefSchema.id = _dataRefSchema.$id\n      delete _dataRefSchema.$id\n    }\n    if (meta && $data) this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false)\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    const {meta, schemaId} = this.opts\n    return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined)\n  }\n\n  // Validate data using schema\n  // AnySchema will be compiled and cached using schema itself as a key for Map\n  validate(schema: Schema | string, data: unknown): boolean\n  validate(schemaKeyRef: AnySchema | string, data: unknown): boolean | Promise<unknown>\n  validate<T>(schema: Schema | JSONSchemaType<T> | string, data: unknown): data is T\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  validate<T>(schema: JTDSchemaType<T>, data: unknown): data is T\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  validate<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    data: unknown\n  ): data is JTDDataType<T>\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  validate<T>(schema: AsyncSchema, data: unknown | T): Promise<T>\n  validate<T>(schemaKeyRef: AnySchema | string, data: unknown): data is T | Promise<T>\n  validate<T>(\n    schemaKeyRef: AnySchema | string, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data: unknown | T // to be validated\n  ): boolean | Promise<T> {\n    let v: AnyValidateFunction | undefined\n    if (typeof schemaKeyRef == \"string\") {\n      v = this.getSchema<T>(schemaKeyRef)\n      if (!v) throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`)\n    } else {\n      v = this.compile<T>(schemaKeyRef)\n    }\n\n    const valid = v(data)\n    if (!(\"$async\" in v)) this.errors = v.errors\n    return valid\n  }\n\n  // Create validation function for passed schema\n  // _meta: true if schema is a meta-schema. Used internally to compile meta schemas of user-defined keywords.\n  compile<T = unknown>(schema: Schema | JSONSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compile<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  compile<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    _meta?: boolean\n  ): ValidateFunction<JTDDataType<T>>\n  compile<T = unknown>(schema: AsyncSchema, _meta?: boolean): AsyncValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T> {\n    const sch = this._addSchema(schema, _meta)\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T>\n  }\n\n  // Creates validating function for passed schema with asynchronous loading of missing schemas.\n  // `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n  // TODO allow passing schema URI\n  // meta - optional true to compile meta-schema\n  compileAsync<T = unknown>(\n    schema: SchemaObject | JSONSchemaType<T>,\n    _meta?: boolean\n  ): Promise<ValidateFunction<T>>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): Promise<ValidateFunction<T>>\n  compileAsync<T = unknown>(schema: AsyncSchema, meta?: boolean): Promise<AsyncValidateFunction<T>>\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>>\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>> {\n    if (typeof this.opts.loadSchema != \"function\") {\n      throw new Error(\"options.loadSchema should be a function\")\n    }\n    const {loadSchema} = this.opts\n    return runCompileAsync.call(this, schema, meta)\n\n    async function runCompileAsync(\n      this: Ajv,\n      _schema: AnySchemaObject,\n      _meta?: boolean\n    ): Promise<AnyValidateFunction> {\n      await loadMetaSchema.call(this, _schema.$schema)\n      const sch = this._addSchema(_schema, _meta)\n      return sch.validate || _compileAsync.call(this, sch)\n    }\n\n    async function loadMetaSchema(this: Ajv, $ref?: string): Promise<void> {\n      if ($ref && !this.getSchema($ref)) {\n        await runCompileAsync.call(this, {$ref}, true)\n      }\n    }\n\n    async function _compileAsync(this: Ajv, sch: SchemaEnv): Promise<AnyValidateFunction> {\n      try {\n        return this._compileSchemaEnv(sch)\n      } catch (e) {\n        if (!(e instanceof MissingRefError)) throw e\n        checkLoaded.call(this, e)\n        await loadMissingSchema.call(this, e.missingSchema)\n        return _compileAsync.call(this, sch)\n      }\n    }\n\n    function checkLoaded(this: Ajv, {missingSchema: ref, missingRef}: MissingRefError): void {\n      if (this.refs[ref]) {\n        throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`)\n      }\n    }\n\n    async function loadMissingSchema(this: Ajv, ref: string): Promise<void> {\n      const _schema = await _loadSchema.call(this, ref)\n      if (!this.refs[ref]) await loadMetaSchema.call(this, _schema.$schema)\n      if (!this.refs[ref]) this.addSchema(_schema, ref, meta)\n    }\n\n    async function _loadSchema(this: Ajv, ref: string): Promise<AnySchemaObject> {\n      const p = this._loading[ref]\n      if (p) return p\n      try {\n        return await (this._loading[ref] = loadSchema(ref))\n      } finally {\n        delete this._loading[ref]\n      }\n    }\n  }\n\n  // Adds schema to the instance\n  addSchema(\n    schema: AnySchema | AnySchema[], // If array is passed, `key` will be ignored\n    key?: string, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta?: boolean, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n  ): Ajv {\n    if (Array.isArray(schema)) {\n      for (const sch of schema) this.addSchema(sch, undefined, _meta, _validateSchema)\n      return this\n    }\n    let id: string | undefined\n    if (typeof schema === \"object\") {\n      const {schemaId} = this.opts\n      id = schema[schemaId]\n      if (id !== undefined && typeof id != \"string\") {\n        throw new Error(`schema ${schemaId} must be string`)\n      }\n    }\n    key = normalizeId(key || id)\n    this._checkUnique(key)\n    this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true)\n    return this\n  }\n\n  // Add schema that will be used to validate other schemas\n  // options in META_IGNORE_OPTIONS are alway set to false\n  addMetaSchema(\n    schema: AnySchemaObject,\n    key?: string, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n  ): Ajv {\n    this.addSchema(schema, key, true, _validateSchema)\n    return this\n  }\n\n  //  Validate schema against its meta-schema\n  validateSchema(schema: AnySchema, throwOrLogError?: boolean): boolean | Promise<unknown> {\n    if (typeof schema == \"boolean\") return true\n    let $schema: string | AnySchemaObject | undefined\n    $schema = schema.$schema\n    if ($schema !== undefined && typeof $schema != \"string\") {\n      throw new Error(\"$schema must be a string\")\n    }\n    $schema = $schema || this.opts.defaultMeta || this.defaultMeta()\n    if (!$schema) {\n      this.logger.warn(\"meta-schema not available\")\n      this.errors = null\n      return true\n    }\n    const valid = this.validate($schema, schema)\n    if (!valid && throwOrLogError) {\n      const message = \"schema is invalid: \" + this.errorsText()\n      if (this.opts.validateSchema === \"log\") this.logger.error(message)\n      else throw new Error(message)\n    }\n    return valid\n  }\n\n  // Get compiled schema by `key` or `ref`.\n  // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n  getSchema<T = unknown>(keyRef: string): AnyValidateFunction<T> | undefined {\n    let sch\n    while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\") keyRef = sch\n    if (sch === undefined) {\n      const {schemaId} = this.opts\n      const root = new SchemaEnv({schema: {}, schemaId})\n      sch = resolveSchema.call(this, root, keyRef)\n      if (!sch) return\n      this.refs[keyRef] = sch\n    }\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T> | undefined\n  }\n\n  // Remove cached schema(s).\n  // If no parameter is passed all schemas but meta-schemas are removed.\n  // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n  // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n  removeSchema(schemaKeyRef?: AnySchema | string | RegExp): Ajv {\n    if (schemaKeyRef instanceof RegExp) {\n      this._removeAllSchemas(this.schemas, schemaKeyRef)\n      this._removeAllSchemas(this.refs, schemaKeyRef)\n      return this\n    }\n    switch (typeof schemaKeyRef) {\n      case \"undefined\":\n        this._removeAllSchemas(this.schemas)\n        this._removeAllSchemas(this.refs)\n        this._cache.clear()\n        return this\n      case \"string\": {\n        const sch = getSchEnv.call(this, schemaKeyRef)\n        if (typeof sch == \"object\") this._cache.delete(sch.schema)\n        delete this.schemas[schemaKeyRef]\n        delete this.refs[schemaKeyRef]\n        return this\n      }\n      case \"object\": {\n        const cacheKey = schemaKeyRef\n        this._cache.delete(cacheKey)\n        let id = schemaKeyRef[this.opts.schemaId]\n        if (id) {\n          id = normalizeId(id)\n          delete this.schemas[id]\n          delete this.refs[id]\n        }\n        return this\n      }\n      default:\n        throw new Error(\"ajv.removeSchema: invalid parameter\")\n    }\n  }\n\n  // add \"vocabulary\" - a collection of keywords\n  addVocabulary(definitions: Vocabulary): Ajv {\n    for (const def of definitions) this.addKeyword(def)\n    return this\n  }\n\n  addKeyword(\n    kwdOrDef: string | KeywordDefinition,\n    def?: KeywordDefinition // deprecated\n  ): Ajv {\n    let keyword: string | string[]\n    if (typeof kwdOrDef == \"string\") {\n      keyword = kwdOrDef\n      if (typeof def == \"object\") {\n        this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\")\n        def.keyword = keyword\n      }\n    } else if (typeof kwdOrDef == \"object\" && def === undefined) {\n      def = kwdOrDef\n      keyword = def.keyword\n      if (Array.isArray(keyword) && !keyword.length) {\n        throw new Error(\"addKeywords: keyword must be string or non-empty array\")\n      }\n    } else {\n      throw new Error(\"invalid addKeywords parameters\")\n    }\n\n    checkKeyword.call(this, keyword, def)\n    if (!def) {\n      eachItem(keyword, (kwd) => addRule.call(this, kwd))\n      return this\n    }\n    keywordMetaschema.call(this, def)\n    const definition: AddedKeywordDefinition = {\n      ...def,\n      type: getJSONTypes(def.type),\n      schemaType: getJSONTypes(def.schemaType),\n    }\n    eachItem(\n      keyword,\n      definition.type.length === 0\n        ? (k) => addRule.call(this, k, definition)\n        : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t))\n    )\n    return this\n  }\n\n  getKeyword(keyword: string): AddedKeywordDefinition | boolean {\n    const rule = this.RULES.all[keyword]\n    return typeof rule == \"object\" ? rule.definition : !!rule\n  }\n\n  // Remove keyword\n  removeKeyword(keyword: string): Ajv {\n    // TODO return type should be Ajv\n    const {RULES} = this\n    delete RULES.keywords[keyword]\n    delete RULES.all[keyword]\n    for (const group of RULES.rules) {\n      const i = group.rules.findIndex((rule) => rule.keyword === keyword)\n      if (i >= 0) group.rules.splice(i, 1)\n    }\n    return this\n  }\n\n  // Add format\n  addFormat(name: string, format: Format): Ajv {\n    if (typeof format == \"string\") format = new RegExp(format)\n    this.formats[name] = format\n    return this\n  }\n\n  errorsText(\n    errors: ErrorObject[] | null | undefined = this.errors, // optional array of validation errors\n    {separator = \", \", dataVar = \"data\"}: ErrorsTextOptions = {} // optional options with properties `separator` and `dataVar`\n  ): string {\n    if (!errors || errors.length === 0) return \"No errors\"\n    return errors\n      .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n      .reduce((text, msg) => text + separator + msg)\n  }\n\n  $dataMetaSchema(metaSchema: AnySchemaObject, keywordsJsonPointers: string[]): AnySchemaObject {\n    const rules = this.RULES.all\n    metaSchema = JSON.parse(JSON.stringify(metaSchema))\n    for (const jsonPointer of keywordsJsonPointers) {\n      const segments = jsonPointer.split(\"/\").slice(1) // first segment is an empty string\n      let keywords = metaSchema\n      for (const seg of segments) keywords = keywords[seg] as AnySchemaObject\n\n      for (const key in rules) {\n        const rule = rules[key]\n        if (typeof rule != \"object\") continue\n        const {$data} = rule.definition\n        const schema = keywords[key] as AnySchemaObject | undefined\n        if ($data && schema) keywords[key] = schemaOrData(schema)\n      }\n    }\n\n    return metaSchema\n  }\n\n  private _removeAllSchemas(schemas: {[Ref in string]?: SchemaEnv | string}, regex?: RegExp): void {\n    for (const keyRef in schemas) {\n      const sch = schemas[keyRef]\n      if (!regex || regex.test(keyRef)) {\n        if (typeof sch == \"string\") {\n          delete schemas[keyRef]\n        } else if (sch && !sch.meta) {\n          this._cache.delete(sch.schema)\n          delete schemas[keyRef]\n        }\n      }\n    }\n  }\n\n  _addSchema(\n    schema: AnySchema,\n    meta?: boolean,\n    baseId?: string,\n    validateSchema = this.opts.validateSchema,\n    addSchema = this.opts.addUsedSchema\n  ): SchemaEnv {\n    let id: string | undefined\n    const {schemaId} = this.opts\n    if (typeof schema == \"object\") {\n      id = schema[schemaId]\n    } else {\n      if (this.opts.jtd) throw new Error(\"schema must be object\")\n      else if (typeof schema != \"boolean\") throw new Error(\"schema must be object or boolean\")\n    }\n    let sch = this._cache.get(schema)\n    if (sch !== undefined) return sch\n\n    baseId = normalizeId(id || baseId)\n    const localRefs = getSchemaRefs.call(this, schema, baseId)\n    sch = new SchemaEnv({schema, schemaId, meta, baseId, localRefs})\n    this._cache.set(sch.schema, sch)\n    if (addSchema && !baseId.startsWith(\"#\")) {\n      // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n      if (baseId) this._checkUnique(baseId)\n      this.refs[baseId] = sch\n    }\n    if (validateSchema) this.validateSchema(schema, true)\n    return sch\n  }\n\n  private _checkUnique(id: string): void {\n    if (this.schemas[id] || this.refs[id]) {\n      throw new Error(`schema with key or id \"${id}\" already exists`)\n    }\n  }\n\n  private _compileSchemaEnv(sch: SchemaEnv): AnyValidateFunction {\n    if (sch.meta) this._compileMetaSchema(sch)\n    else compileSchema.call(this, sch)\n\n    /* istanbul ignore if */\n    if (!sch.validate) throw new Error(\"ajv implementation error\")\n    return sch.validate\n  }\n\n  private _compileMetaSchema(sch: SchemaEnv): void {\n    const currentOpts = this.opts\n    this.opts = this._metaOpts\n    try {\n      compileSchema.call(this, sch)\n    } finally {\n      this.opts = currentOpts\n    }\n  }\n}\n\nexport interface ErrorsTextOptions {\n  separator?: string\n  dataVar?: string\n}\n\nfunction checkOptions(\n  this: Ajv,\n  checkOpts: OptionsInfo<RemovedOptions | DeprecatedOptions>,\n  options: Options & RemovedOptions,\n  msg: string,\n  log: \"warn\" | \"error\" = \"error\"\n): void {\n  for (const key in checkOpts) {\n    const opt = key as keyof typeof checkOpts\n    if (opt in options) this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`)\n  }\n}\n\nfunction getSchEnv(this: Ajv, keyRef: string): SchemaEnv | string | undefined {\n  keyRef = normalizeId(keyRef) // TODO tests fail without this line\n  return this.schemas[keyRef] || this.refs[keyRef]\n}\n\nfunction addInitialSchemas(this: Ajv): void {\n  const optsSchemas = this.opts.schemas\n  if (!optsSchemas) return\n  if (Array.isArray(optsSchemas)) this.addSchema(optsSchemas)\n  else for (const key in optsSchemas) this.addSchema(optsSchemas[key] as AnySchema, key)\n}\n\nfunction addInitialFormats(this: Ajv): void {\n  for (const name in this.opts.formats) {\n    const format = this.opts.formats[name]\n    if (format) this.addFormat(name, format)\n  }\n}\n\nfunction addInitialKeywords(\n  this: Ajv,\n  defs: Vocabulary | {[K in string]?: KeywordDefinition}\n): void {\n  if (Array.isArray(defs)) {\n    this.addVocabulary(defs)\n    return\n  }\n  this.logger.warn(\"keywords option as map is deprecated, pass array\")\n  for (const keyword in defs) {\n    const def = defs[keyword] as KeywordDefinition\n    if (!def.keyword) def.keyword = keyword\n    this.addKeyword(def)\n  }\n}\n\nfunction getMetaSchemaOptions(this: Ajv): InstanceOptions {\n  const metaOpts = {...this.opts}\n  for (const opt of META_IGNORE_OPTIONS) delete metaOpts[opt]\n  return metaOpts\n}\n\nconst noLogs = {log() {}, warn() {}, error() {}}\n\nfunction getLogger(logger?: Partial<Logger> | false): Logger {\n  if (logger === false) return noLogs\n  if (logger === undefined) return console\n  if (logger.log && logger.warn && logger.error) return logger as Logger\n  throw new Error(\"logger must implement log, warn and error methods\")\n}\n\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i\n\nfunction checkKeyword(this: Ajv, keyword: string | string[], def?: KeywordDefinition): void {\n  const {RULES} = this\n  eachItem(keyword, (kwd) => {\n    if (RULES.keywords[kwd]) throw new Error(`Keyword ${kwd} is already defined`)\n    if (!KEYWORD_NAME.test(kwd)) throw new Error(`Keyword ${kwd} has invalid name`)\n  })\n  if (!def) return\n  if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n    throw new Error('$data keyword must have \"code\" or \"validate\" function')\n  }\n}\n\nfunction addRule(\n  this: Ajv,\n  keyword: string,\n  definition?: AddedKeywordDefinition,\n  dataType?: JSONType\n): void {\n  const post = definition?.post\n  if (dataType && post) throw new Error('keyword with \"post\" flag cannot have \"type\"')\n  const {RULES} = this\n  let ruleGroup = post ? RULES.post : RULES.rules.find(({type: t}) => t === dataType)\n  if (!ruleGroup) {\n    ruleGroup = {type: dataType, rules: []}\n    RULES.rules.push(ruleGroup)\n  }\n  RULES.keywords[keyword] = true\n  if (!definition) return\n\n  const rule: Rule = {\n    keyword,\n    definition: {\n      ...definition,\n      type: getJSONTypes(definition.type),\n      schemaType: getJSONTypes(definition.schemaType),\n    },\n  }\n  if (definition.before) addBeforeRule.call(this, ruleGroup, rule, definition.before)\n  else ruleGroup.rules.push(rule)\n  RULES.all[keyword] = rule\n  definition.implements?.forEach((kwd) => this.addKeyword(kwd))\n}\n\nfunction addBeforeRule(this: Ajv, ruleGroup: RuleGroup, rule: Rule, before: string): void {\n  const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before)\n  if (i >= 0) {\n    ruleGroup.rules.splice(i, 0, rule)\n  } else {\n    ruleGroup.rules.push(rule)\n    this.logger.warn(`rule ${before} is not defined`)\n  }\n}\n\nfunction keywordMetaschema(this: Ajv, def: KeywordDefinition): void {\n  let {metaSchema} = def\n  if (metaSchema === undefined) return\n  if (def.$data && this.opts.$data) metaSchema = schemaOrData(metaSchema)\n  def.validateSchema = this.compile(metaSchema, true)\n}\n\nconst $dataRef = {\n  $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n}\n\nfunction schemaOrData(schema: AnySchema): AnySchemaObject {\n  return {anyOf: [schema, $dataRef]}\n}\n", "import type {CodeKeywordDefinition} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"id\",\n  code() {\n    throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID')\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {callValidateCode} from \"../code\"\nimport {_, nil, stringify, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport {SchemaEnv, resolveRef} from \"../../compile\"\nimport {mergeEvaluated} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"$ref\",\n  schemaType: \"string\",\n  code(cxt: KeywordCxt): void {\n    const {gen, schema: $ref, it} = cxt\n    const {baseId, schemaEnv: env, validateName, opts, self} = it\n    const {root} = env\n    if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId) return callRootRef()\n    const schOrEnv = resolveRef.call(self, root, baseId, $ref)\n    if (schOrEnv === undefined) throw new MissingRefError(it.opts.uriResolver, baseId, $ref)\n    if (schOrEnv instanceof SchemaEnv) return callValidate(schOrEnv)\n    return inlineRefSchema(schOrEnv)\n\n    function callRootRef(): void {\n      if (env === root) return callRef(cxt, validateName, env, env.$async)\n      const rootName = gen.scopeValue(\"root\", {ref: root})\n      return callRef(cxt, _`${rootName}.validate`, root, root.$async)\n    }\n\n    function callValidate(sch: SchemaEnv): void {\n      const v = getValidate(cxt, sch)\n      callRef(cxt, v, sch, sch.$async)\n    }\n\n    function inlineRefSchema(sch: AnySchema): void {\n      const schName = gen.scopeValue(\n        \"schema\",\n        opts.code.source === true ? {ref: sch, code: stringify(sch)} : {ref: sch}\n      )\n      const valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema(\n        {\n          schema: sch,\n          dataTypes: [],\n          schemaPath: nil,\n          topSchemaRef: schName,\n          errSchemaPath: $ref,\n        },\n        valid\n      )\n      cxt.mergeEvaluated(schCxt)\n      cxt.ok(valid)\n    }\n  },\n}\n\nexport function getValidate(cxt: KeywordCxt, sch: SchemaEnv): Code {\n  const {gen} = cxt\n  return sch.validate\n    ? gen.scopeValue(\"validate\", {ref: sch.validate})\n    : _`${gen.scopeValue(\"wrapper\", {ref: sch})}.validate`\n}\n\nexport function callRef(cxt: KeywordCxt, v: Code, sch?: SchemaEnv, $async?: boolean): void {\n  const {gen, it} = cxt\n  const {allErrors, schemaEnv: env, opts} = it\n  const passCxt = opts.passContext ? N.this : nil\n  if ($async) callAsyncRef()\n  else callSyncRef()\n\n  function callAsyncRef(): void {\n    if (!env.$async) throw new Error(\"async schema referenced by sync schema\")\n    const valid = gen.let(\"valid\")\n    gen.try(\n      () => {\n        gen.code(_`await ${callValidateCode(cxt, v, passCxt)}`)\n        addEvaluatedFrom(v) // TODO will not work with async, it has to be returned with the result\n        if (!allErrors) gen.assign(valid, true)\n      },\n      (e) => {\n        gen.if(_`!(${e} instanceof ${it.ValidationError as Name})`, () => gen.throw(e))\n        addErrorsFrom(e)\n        if (!allErrors) gen.assign(valid, false)\n      }\n    )\n    cxt.ok(valid)\n  }\n\n  function callSyncRef(): void {\n    cxt.result(\n      callValidateCode(cxt, v, passCxt),\n      () => addEvaluatedFrom(v),\n      () => addErrorsFrom(v)\n    )\n  }\n\n  function addErrorsFrom(source: Code): void {\n    const errs = _`${source}.errors`\n    gen.assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`) // TODO tagged\n    gen.assign(N.errors, _`${N.vErrors}.length`)\n  }\n\n  function addEvaluatedFrom(source: Code): void {\n    if (!it.opts.unevaluated) return\n    const schEvaluated = sch?.validate?.evaluated\n    // TODO refactor\n    if (it.props !== true) {\n      if (schEvaluated && !schEvaluated.dynamicProps) {\n        if (schEvaluated.props !== undefined) {\n          it.props = mergeEvaluated.props(gen, schEvaluated.props, it.props)\n        }\n      } else {\n        const props = gen.var(\"props\", _`${source}.evaluated.props`)\n        it.props = mergeEvaluated.props(gen, props, it.props, Name)\n      }\n    }\n    if (it.items !== true) {\n      if (schEvaluated && !schEvaluated.dynamicItems) {\n        if (schEvaluated.items !== undefined) {\n          it.items = mergeEvaluated.items(gen, schEvaluated.items, it.items)\n        }\n      } else {\n        const items = gen.var(\"items\", _`${source}.evaluated.items`)\n        it.items = mergeEvaluated.items(gen, items, it.items, Name)\n      }\n    }\n  }\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport idKeyword from \"./id\"\nimport refKeyword from \"./ref\"\n\nconst core: Vocabulary = [\n  \"$schema\",\n  \"$id\",\n  \"$defs\",\n  \"$vocabulary\",\n  {keyword: \"$comment\"},\n  \"definitions\",\n  idKeyword,\n  refKeyword,\n]\n\nexport default core\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators, Code} from \"../../compile/codegen\"\n\nconst ops = operators\n\ntype Kwd = \"maximum\" | \"minimum\" | \"exclusiveMaximum\" | \"exclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  maximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  minimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  exclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  exclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitNumberError = ErrorObject<\n  Kwd,\n  {limit: number; comparison: Comparison},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`must be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    cxt.fail$data(_`${data} ${KWDs[keyword as Kwd].fail} ${schemaCode} || isNaN(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type MultipleOfError = ErrorObject<\n  \"multipleOf\",\n  {multipleOf: number},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must be multiple of ${schemaCode}`,\n  params: ({schemaCode}) => _`{multipleOf: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"multipleOf\",\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schemaCode, it} = cxt\n    // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n    const prec = it.opts.multipleOfPrecision\n    const res = gen.let(\"res\")\n    const invalid = prec\n      ? _`Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n      : _`${res} !== parseInt(${res})`\n    cxt.fail$data(_`(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`)\n  },\n}\n\nexport default def\n", "// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nexport default function ucs2length(str: string): number {\n  const len = str.length\n  let length = 0\n  let pos = 0\n  let value: number\n  while (pos < len) {\n    length++\n    value = str.charCodeAt(pos++)\n    if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos)\n      if ((value & 0xfc00) === 0xdc00) pos++ // low surrogate\n    }\n  }\n  return length\n}\n\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default'\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport ucs2length from \"../../runtime/ucs2length\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} characters`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxLength\", \"minLength\"],\n  type: \"string\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode, it} = cxt\n    const op = keyword === \"maxLength\" ? operators.GT : operators.LT\n    const len =\n      it.opts.unicode === false ? _`${data}.length` : _`${useFunc(cxt.gen, ucs2length)}(${data})`\n    cxt.fail$data(_`${len} ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {usePattern} from \"../code\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type PatternError = ErrorObject<\"pattern\", {pattern: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match pattern \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{pattern: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"pattern\",\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {data, $data, schema, schemaCode, it} = cxt\n    // TODO regexp should be wrapped in try/catchs\n    const u = it.opts.unicodeRegExp ? \"u\" : \"\"\n    const regExp = $data ? _`(new RegExp(${schemaCode}, ${u}))` : usePattern(cxt, schema)\n    cxt.fail$data(_`!${regExp}.test(${data})`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} properties`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxProperties\", \"minProperties\"],\n  type: \"object\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxProperties\" ? operators.GT : operators.LT\n    cxt.fail$data(_`Object.keys(${data}).length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {\n  checkReportMissingProp,\n  checkMissingProp,\n  reportMissingProp,\n  propertyInData,\n  noPropertyInData,\n} from \"../code\"\nimport {_, str, nil, not, Name, Code} from \"../../compile/codegen\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nexport type RequiredError = ErrorObject<\n  \"required\",\n  {missingProperty: string},\n  string[] | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {missingProperty}}) => str`must have required property '${missingProperty}'`,\n  params: ({params: {missingProperty}}) => _`{missingProperty: ${missingProperty}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, schemaCode, data, $data, it} = cxt\n    const {opts} = it\n    if (!$data && schema.length === 0) return\n    const useLoop = schema.length >= opts.loopRequired\n    if (it.allErrors) allErrorsMode()\n    else exitOnErrorMode()\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties\n      const {definedProperties} = cxt.it\n      for (const requiredKey of schema) {\n        if (props?.[requiredKey] === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`\n          checkStrictMode(it, msg, it.opts.strictRequired)\n        }\n      }\n    }\n\n    function allErrorsMode(): void {\n      if (useLoop || $data) {\n        cxt.block$data(nil, loopAllRequired)\n      } else {\n        for (const prop of schema) {\n          checkReportMissingProp(cxt, prop)\n        }\n      }\n    }\n\n    function exitOnErrorMode(): void {\n      const missing = gen.let(\"missing\")\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true)\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid))\n        cxt.ok(valid)\n      } else {\n        gen.if(checkMissingProp(cxt, schema, missing))\n        reportMissingProp(cxt, missing)\n        gen.else()\n      }\n    }\n\n    function loopAllRequired(): void {\n      gen.forOf(\"prop\", schemaCode as Code, (prop) => {\n        cxt.setParams({missingProperty: prop})\n        gen.if(noPropertyInData(gen, data, prop, opts.ownProperties), () => cxt.error())\n      })\n    }\n\n    function loopUntilMissing(missing: Name, valid: Name): void {\n      cxt.setParams({missingProperty: missing})\n      gen.forOf(\n        missing,\n        schemaCode as Code,\n        () => {\n          gen.assign(valid, propertyInData(gen, data, missing, opts.ownProperties))\n          gen.if(not(valid), () => {\n            cxt.error()\n            gen.break()\n          })\n        },\n        nil\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} items`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxItems\", \"minItems\"],\n  type: \"array\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxItems\" ? operators.GT : operators.LT\n    cxt.fail$data(_`${data}.length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n", "// https://github.com/ajv-validator/ajv/issues/889\nimport * as equal from \"fast-deep-equal\"\n\ntype Equal = typeof equal & {code: string}\n;(equal as Equal).code = 'require(\"ajv/dist/runtime/equal\").default'\n\nexport default equal as Equal\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkDataTypes, getSchemaTypes, DataType} from \"../../compile/validate/dataType\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type UniqueItemsError = ErrorObject<\n  \"uniqueItems\",\n  {i: number; j: number},\n  boolean | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {i, j}}) =>\n    str`must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n  params: ({params: {i, j}}) => _`{i: ${i}, j: ${j}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"uniqueItems\",\n  type: \"array\",\n  schemaType: \"boolean\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, parentSchema, schemaCode, it} = cxt\n    if (!$data && !schema) return\n    const valid = gen.let(\"valid\")\n    const itemTypes = parentSchema.items ? getSchemaTypes(parentSchema.items) : []\n    cxt.block$data(valid, validateUniqueItems, _`${schemaCode} === false`)\n    cxt.ok(valid)\n\n    function validateUniqueItems(): void {\n      const i = gen.let(\"i\", _`${data}.length`)\n      const j = gen.let(\"j\")\n      cxt.setParams({i, j})\n      gen.assign(valid, true)\n      gen.if(_`${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j))\n    }\n\n    function canOptimize(): boolean {\n      return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\")\n    }\n\n    function loopN(i: Name, j: Name): void {\n      const item = gen.name(\"item\")\n      const wrongType = checkDataTypes(itemTypes, item, it.opts.strictNumbers, DataType.Wrong)\n      const indices = gen.const(\"indices\", _`{}`)\n      gen.for(_`;${i}--;`, () => {\n        gen.let(item, _`${data}[${i}]`)\n        gen.if(wrongType, _`continue`)\n        if (itemTypes.length > 1) gen.if(_`typeof ${item} == \"string\"`, _`${item} += \"_\"`)\n        gen\n          .if(_`typeof ${indices}[${item}] == \"number\"`, () => {\n            gen.assign(j, _`${indices}[${item}]`)\n            cxt.error()\n            gen.assign(valid, false).break()\n          })\n          .code(_`${indices}[${item}] = ${i}`)\n      })\n    }\n\n    function loopN2(i: Name, j: Name): void {\n      const eql = useFunc(gen, equal)\n      const outer = gen.name(\"outer\")\n      gen.label(outer).for(_`;${i}--;`, () =>\n        gen.for(_`${j} = ${i}; ${j}--;`, () =>\n          gen.if(_`${eql}(${data}[${i}], ${data}[${j}])`, () => {\n            cxt.error()\n            gen.assign(valid, false).break(outer)\n          })\n        )\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type ConstError = ErrorObject<\"const\", {allowedValue: any}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to constant\",\n  params: ({schemaCode}) => _`{allowedValue: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"const\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schemaCode, schema} = cxt\n    if ($data || (schema && typeof schema == \"object\")) {\n      cxt.fail$data(_`!${useFunc(gen, equal)}(${data}, ${schemaCode})`)\n    } else {\n      cxt.fail(_`${schema} !== ${data}`)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, or, Name, Code} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type EnumError = ErrorObject<\"enum\", {allowedValues: any[]}, any[] | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to one of the allowed values\",\n  params: ({schemaCode}) => _`{allowedValues: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"enum\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    if (!$data && schema.length === 0) throw new Error(\"enum must have non-empty array\")\n    const useLoop = schema.length >= it.opts.loopEnum\n    let eql: Name | undefined\n    const getEql = (): Name => (eql ??= useFunc(gen, equal))\n\n    let valid: Code\n    if (useLoop || $data) {\n      valid = gen.let(\"valid\")\n      cxt.block$data(valid, loopEnum)\n    } else {\n      /* istanbul ignore if */\n      if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n      const vSchema = gen.const(\"vSchema\", schemaCode)\n      valid = or(...schema.map((_x: unknown, i: number) => equalCode(vSchema, i)))\n    }\n    cxt.pass(valid)\n\n    function loopEnum(): void {\n      gen.assign(valid, false)\n      gen.forOf(\"v\", schemaCode as Code, (v) =>\n        gen.if(_`${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break())\n      )\n    }\n\n    function equalCode(vSchema: Name, i: number): Code {\n      const sch = schema[i]\n      return typeof sch === \"object\" && sch !== null\n        ? _`${getEql()}(${data}, ${vSchema}[${i}])`\n        : _`${data} === ${sch}`\n    }\n  },\n}\n\nexport default def\n", "import type {ErrorObject, Vocabulary} from \"../../types\"\nimport limitNumber, {LimitNumberError} from \"./limitNumber\"\nimport multipleOf, {MultipleOfError} from \"./multipleOf\"\nimport limitLength from \"./limitLength\"\nimport pattern, {PatternError} from \"./pattern\"\nimport limitProperties from \"./limitProperties\"\nimport required, {RequiredError} from \"./required\"\nimport limitItems from \"./limitItems\"\nimport uniqueItems, {UniqueItemsError} from \"./uniqueItems\"\nimport constKeyword, {ConstError} from \"./const\"\nimport enumKeyword, {EnumError} from \"./enum\"\n\nconst validation: Vocabulary = [\n  // number\n  limitNumber,\n  multipleOf,\n  // string\n  limitLength,\n  pattern,\n  // object\n  limitProperties,\n  required,\n  // array\n  limitItems,\n  uniqueItems,\n  // any\n  {keyword: \"type\", schemaType: [\"string\", \"array\"]},\n  {keyword: \"nullable\", schemaType: \"boolean\"},\n  constKeyword,\n  enumKeyword,\n]\n\nexport default validation\n\ntype LimitError = ErrorObject<\n  \"maxItems\" | \"minItems\" | \"minProperties\" | \"maxProperties\" | \"minLength\" | \"maxLength\",\n  {limit: number},\n  number | {$data: string}\n>\n\nexport type ValidationKeywordError =\n  | LimitError\n  | LimitNumberError\n  | MultipleOfError\n  | PatternError\n  | RequiredError\n  | UniqueItemsError\n  | ConstError\n  | EnumError\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type AdditionalItemsError = ErrorObject<\"additionalItems\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"additionalItems\" as const,\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {parentSchema, it} = cxt\n    const {items} = parentSchema\n    if (!Array.isArray(items)) {\n      checkStrictMode(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas')\n      return\n    }\n    validateAdditionalItems(cxt, items)\n  },\n}\n\nexport function validateAdditionalItems(cxt: KeywordCxt, items: AnySchema[]): void {\n  const {gen, schema, data, keyword, it} = cxt\n  it.items = true\n  const len = gen.const(\"len\", _`${data}.length`)\n  if (schema === false) {\n    cxt.setParams({len: items.length})\n    cxt.pass(_`${len} <= ${items.length}`)\n  } else if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n    const valid = gen.var(\"valid\", _`${len} <= ${items.length}`) // TODO var\n    gen.if(not(valid), () => validateItems(valid))\n    cxt.ok(valid)\n  }\n\n  function validateItems(valid: Name): void {\n    gen.forRange(\"i\", items.length, len, (i) => {\n      cxt.subschema({keyword, dataProp: i, dataPropType: Type.Num}, valid)\n      if (!it.allErrors) gen.if(not(valid), () => gen.break())\n    })\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema, AnySchemaObject} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {alwaysValidSchema, mergeEvaluated, checkStrictMode} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"array\", \"boolean\"],\n  before: \"uniqueItems\",\n  code(cxt: KeywordCxt) {\n    const {schema, it} = cxt\n    if (Array.isArray(schema)) return validateTuple(cxt, \"additionalItems\", schema)\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    cxt.ok(validateArray(cxt))\n  },\n}\n\nexport function validateTuple(\n  cxt: KeywordCxt,\n  extraItems: string,\n  schArr: AnySchema[] = cxt.schema\n): void {\n  const {gen, parentSchema, data, keyword, it} = cxt\n  checkStrictTuple(parentSchema)\n  if (it.opts.unevaluated && schArr.length && it.items !== true) {\n    it.items = mergeEvaluated.items(gen, schArr.length, it.items)\n  }\n  const valid = gen.name(\"valid\")\n  const len = gen.const(\"len\", _`${data}.length`)\n  schArr.forEach((sch: AnySchema, i: number) => {\n    if (alwaysValidSchema(it, sch)) return\n    gen.if(_`${len} > ${i}`, () =>\n      cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          dataProp: i,\n        },\n        valid\n      )\n    )\n    cxt.ok(valid)\n  })\n\n  function checkStrictTuple(sch: AnySchemaObject): void {\n    const {opts, errSchemaPath} = it\n    const l = schArr.length\n    const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false)\n    if (opts.strictTuples && !fullTuple) {\n      const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`\n      checkStrictMode(it, msg, opts.strictTuples)\n    }\n  }\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {validateTuple} from \"./items\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"prefixItems\",\n  type: \"array\",\n  schemaType: [\"array\"],\n  before: \"uniqueItems\",\n  code: (cxt) => validateTuple(cxt, \"items\"),\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\nimport {validateAdditionalItems} from \"./additionalItems\"\n\nexport type ItemsError = ErrorObject<\"items\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {schema, parentSchema, it} = cxt\n    const {prefixItems} = parentSchema\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    if (prefixItems) validateAdditionalItems(cxt, prefixItems)\n    else cxt.ok(validateArray(cxt))\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type ContainsError = ErrorObject<\n  \"contains\",\n  {minContains: number; maxContains?: number},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {min, max}}) =>\n    max === undefined\n      ? str`must contain at least ${min} valid item(s)`\n      : str`must contain at least ${min} and no more than ${max} valid item(s)`,\n  params: ({params: {min, max}}) =>\n    max === undefined ? _`{minContains: ${min}}` : _`{minContains: ${min}, maxContains: ${max}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"contains\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    let min: number\n    let max: number | undefined\n    const {minContains, maxContains} = parentSchema\n    if (it.opts.next) {\n      min = minContains === undefined ? 1 : minContains\n      max = maxContains\n    } else {\n      min = 1\n    }\n    const len = gen.const(\"len\", _`${data}.length`)\n    cxt.setParams({min, max})\n    if (max === undefined && min === 0) {\n      checkStrictMode(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`)\n      return\n    }\n    if (max !== undefined && min > max) {\n      checkStrictMode(it, `\"minContains\" > \"maxContains\" is always invalid`)\n      cxt.fail()\n      return\n    }\n    if (alwaysValidSchema(it, schema)) {\n      let cond = _`${len} >= ${min}`\n      if (max !== undefined) cond = _`${cond} && ${len} <= ${max}`\n      cxt.pass(cond)\n      return\n    }\n\n    it.items = true\n    const valid = gen.name(\"valid\")\n    if (max === undefined && min === 1) {\n      validateItems(valid, () => gen.if(valid, () => gen.break()))\n    } else if (min === 0) {\n      gen.let(valid, true)\n      if (max !== undefined) gen.if(_`${data}.length > 0`, validateItemsWithCount)\n    } else {\n      gen.let(valid, false)\n      validateItemsWithCount()\n    }\n    cxt.result(valid, () => cxt.reset())\n\n    function validateItemsWithCount(): void {\n      const schValid = gen.name(\"_valid\")\n      const count = gen.let(\"count\", 0)\n      validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)))\n    }\n\n    function validateItems(_valid: Name, block: () => void): void {\n      gen.forRange(\"i\", 0, len, (i) => {\n        cxt.subschema(\n          {\n            keyword: \"contains\",\n            dataProp: i,\n            dataPropType: Type.Num,\n            compositeRule: true,\n          },\n          _valid\n        )\n        block()\n      })\n    }\n\n    function checkLimits(count: Name): void {\n      gen.code(_`${count}++`)\n      if (max === undefined) {\n        gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true).break())\n      } else {\n        gen.if(_`${count} > ${max}`, () => gen.assign(valid, false).break())\n        if (min === 1) gen.assign(valid, true)\n        else gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true))\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  SchemaMap,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {checkReportMissingProp, checkMissingProp, reportMissingProp, propertyInData} from \"../code\"\n\nexport type PropertyDependencies = {[K in string]?: string[]}\n\nexport interface DependenciesErrorParams {\n  property: string\n  missingProperty: string\n  depsCount: number\n  deps: string // TODO change to string[]\n}\n\ntype SchemaDependencies = SchemaMap\n\nexport type DependenciesError = ErrorObject<\n  \"dependencies\",\n  DependenciesErrorParams,\n  {[K in string]?: string[] | AnySchema}\n>\n\nexport const error: KeywordErrorDefinition = {\n  message: ({params: {property, depsCount, deps}}) => {\n    const property_ies = depsCount === 1 ? \"property\" : \"properties\"\n    return str`must have ${property_ies} ${deps} when property ${property} is present`\n  },\n  params: ({params: {property, depsCount, deps, missingProperty}}) =>\n    _`{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"dependencies\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const [propDeps, schDeps] = splitDependencies(cxt)\n    validatePropertyDeps(cxt, propDeps)\n    validateSchemaDeps(cxt, schDeps)\n  },\n}\n\nfunction splitDependencies({schema}: KeywordCxt): [PropertyDependencies, SchemaDependencies] {\n  const propertyDeps: PropertyDependencies = {}\n  const schemaDeps: SchemaDependencies = {}\n  for (const key in schema) {\n    if (key === \"__proto__\") continue\n    const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps\n    deps[key] = schema[key]\n  }\n  return [propertyDeps, schemaDeps]\n}\n\nexport function validatePropertyDeps(\n  cxt: KeywordCxt,\n  propertyDeps: {[K in string]?: string[]} = cxt.schema\n): void {\n  const {gen, data, it} = cxt\n  if (Object.keys(propertyDeps).length === 0) return\n  const missing = gen.let(\"missing\")\n  for (const prop in propertyDeps) {\n    const deps = propertyDeps[prop] as string[]\n    if (deps.length === 0) continue\n    const hasProperty = propertyInData(gen, data, prop, it.opts.ownProperties)\n    cxt.setParams({\n      property: prop,\n      depsCount: deps.length,\n      deps: deps.join(\", \"),\n    })\n    if (it.allErrors) {\n      gen.if(hasProperty, () => {\n        for (const depProp of deps) {\n          checkReportMissingProp(cxt, depProp)\n        }\n      })\n    } else {\n      gen.if(_`${hasProperty} && (${checkMissingProp(cxt, deps, missing)})`)\n      reportMissingProp(cxt, missing)\n      gen.else()\n    }\n  }\n}\n\nexport function validateSchemaDeps(cxt: KeywordCxt, schemaDeps: SchemaMap = cxt.schema): void {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  for (const prop in schemaDeps) {\n    if (alwaysValidSchema(it, schemaDeps[prop] as AnySchema)) continue\n    gen.if(\n      propertyInData(gen, data, prop, it.opts.ownProperties),\n      () => {\n        const schCxt = cxt.subschema({keyword, schemaProp: prop}, valid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n      },\n      () => gen.var(valid, true) // TODO var\n    )\n    cxt.ok(valid)\n  }\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, not} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type PropertyNamesError = ErrorObject<\"propertyNames\", {propertyName: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: \"property name must be valid\",\n  params: ({params}) => _`{propertyName: ${params.propertyName}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"propertyNames\",\n  type: \"object\",\n  schemaType: [\"object\", \"boolean\"],\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, it} = cxt\n    if (alwaysValidSchema(it, schema)) return\n    const valid = gen.name(\"valid\")\n\n    gen.forIn(\"key\", data, (key) => {\n      cxt.setParams({propertyName: key})\n      cxt.subschema(\n        {\n          keyword: \"propertyNames\",\n          data: key,\n          dataTypes: [\"string\"],\n          propertyName: key,\n          compositeRule: true,\n        },\n        valid\n      )\n      gen.if(not(valid), () => {\n        cxt.error(true)\n        if (!it.allErrors) gen.break()\n      })\n    })\n\n    cxt.ok(valid)\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  AddedKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport {allSchemaProperties, usePattern, isOwnProperty} from \"../code\"\nimport {_, nil, or, not, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport type {SubschemaArgs} from \"../../compile/validate/subschema\"\nimport {alwaysValidSchema, schemaRefOrVal, Type} from \"../../compile/util\"\n\nexport type AdditionalPropertiesError = ErrorObject<\n  \"additionalProperties\",\n  {additionalProperty: string},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must NOT have additional properties\",\n  params: ({params}) => _`{additionalProperty: ${params.additionalProperty}}`,\n}\n\nconst def: CodeKeywordDefinition & AddedKeywordDefinition = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {gen, schema, parentSchema, data, errsCount, it} = cxt\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\")\n    const {allErrors, opts} = it\n    it.props = true\n    if (opts.removeAdditional !== \"all\" && alwaysValidSchema(it, schema)) return\n    const props = allSchemaProperties(parentSchema.properties)\n    const patProps = allSchemaProperties(parentSchema.patternProperties)\n    checkAdditionalProperties()\n    cxt.ok(_`${errsCount} === ${N.errors}`)\n\n    function checkAdditionalProperties(): void {\n      gen.forIn(\"key\", data, (key: Name) => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key)\n        else gen.if(isAdditional(key), () => additionalPropertyCode(key))\n      })\n    }\n\n    function isAdditional(key: Name): Code {\n      let definedProp: Code\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = schemaRefOrVal(it, parentSchema.properties, \"properties\")\n        definedProp = isOwnProperty(gen, propsSchema as Code, key)\n      } else if (props.length) {\n        definedProp = or(...props.map((p) => _`${key} === ${p}`))\n      } else {\n        definedProp = nil\n      }\n      if (patProps.length) {\n        definedProp = or(definedProp, ...patProps.map((p) => _`${usePattern(cxt, p)}.test(${key})`))\n      }\n      return not(definedProp)\n    }\n\n    function deleteAdditional(key: Name): void {\n      gen.code(_`delete ${data}[${key}]`)\n    }\n\n    function additionalPropertyCode(key: Name): void {\n      if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n        deleteAdditional(key)\n        return\n      }\n\n      if (schema === false) {\n        cxt.setParams({additionalProperty: key})\n        cxt.error()\n        if (!allErrors) gen.break()\n        return\n      }\n\n      if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n        const valid = gen.name(\"valid\")\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false)\n          gen.if(not(valid), () => {\n            cxt.reset()\n            deleteAdditional(key)\n          })\n        } else {\n          applyAdditionalSchema(key, valid)\n          if (!allErrors) gen.if(not(valid), () => gen.break())\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key: Name, valid: Name, errors?: false): void {\n      const subschema: SubschemaArgs = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: Type.Str,\n      }\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        })\n      }\n      cxt.subschema(subschema, valid)\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport {KeywordCxt} from \"../../compile/validate\"\nimport {propertyInData, allSchemaProperties} from \"../code\"\nimport {alwaysValidSchema, toHash, mergeEvaluated} from \"../../compile/util\"\nimport apDef from \"./additionalProperties\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      apDef.code(new KeywordCxt(it, apDef, \"additionalProperties\"))\n    }\n    const allProps = allSchemaProperties(schema)\n    for (const prop of allProps) {\n      it.definedProperties.add(prop)\n    }\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = mergeEvaluated.props(gen, toHash(allProps), it.props)\n    }\n    const properties = allProps.filter((p) => !alwaysValidSchema(it, schema[p]))\n    if (properties.length === 0) return\n    const valid = gen.name(\"valid\")\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop)\n      } else {\n        gen.if(propertyInData(gen, data, prop, it.opts.ownProperties))\n        applyPropertySchema(prop)\n        if (!it.allErrors) gen.else().var(valid, true)\n        gen.endIf()\n      }\n      cxt.it.definedProperties.add(prop)\n      cxt.ok(valid)\n    }\n\n    function hasDefault(prop: string): boolean | undefined {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined\n    }\n\n    function applyPropertySchema(prop: string): void {\n      cxt.subschema(\n        {\n          keyword: \"properties\",\n          schemaProp: prop,\n          dataProp: prop,\n        },\n        valid\n      )\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {allSchemaProperties, usePattern} from \"../code\"\nimport {_, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\nimport {evaluatedPropsToName, Type} from \"../../compile/util\"\nimport {AnySchema} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"patternProperties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, parentSchema, it} = cxt\n    const {opts} = it\n    const patterns = allSchemaProperties(schema)\n    const alwaysValidPatterns = patterns.filter((p) =>\n      alwaysValidSchema(it, schema[p] as AnySchema)\n    )\n\n    if (\n      patterns.length === 0 ||\n      (alwaysValidPatterns.length === patterns.length &&\n        (!it.opts.unevaluated || it.props === true))\n    ) {\n      return\n    }\n\n    const checkProperties =\n      opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties\n    const valid = gen.name(\"valid\")\n    if (it.props !== true && !(it.props instanceof Name)) {\n      it.props = evaluatedPropsToName(gen, it.props)\n    }\n    const {props} = it\n    validatePatternProperties()\n\n    function validatePatternProperties(): void {\n      for (const pat of patterns) {\n        if (checkProperties) checkMatchingProperties(pat)\n        if (it.allErrors) {\n          validateProperties(pat)\n        } else {\n          gen.var(valid, true) // TODO var\n          validateProperties(pat)\n          gen.if(valid)\n        }\n      }\n    }\n\n    function checkMatchingProperties(pat: string): void {\n      for (const prop in checkProperties) {\n        if (new RegExp(pat).test(prop)) {\n          checkStrictMode(\n            it,\n            `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`\n          )\n        }\n      }\n    }\n\n    function validateProperties(pat: string): void {\n      gen.forIn(\"key\", data, (key) => {\n        gen.if(_`${usePattern(cxt, pat)}.test(${key})`, () => {\n          const alwaysValid = alwaysValidPatterns.includes(pat)\n          if (!alwaysValid) {\n            cxt.subschema(\n              {\n                keyword: \"patternProperties\",\n                schemaProp: pat,\n                dataProp: key,\n                dataPropType: Type.Str,\n              },\n              valid\n            )\n          }\n\n          if (it.opts.unevaluated && props !== true) {\n            gen.assign(_`${props}[${key}]`, true)\n          } else if (!alwaysValid && !it.allErrors) {\n            // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n            // or if all properties were evaluated (props === true)\n            gen.if(not(valid), () => gen.break())\n          }\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type NotKeywordError = ErrorNoParams<\"not\", AnySchema>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"not\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    if (alwaysValidSchema(it, schema)) {\n      cxt.fail()\n      return\n    }\n\n    const valid = gen.name(\"valid\")\n    cxt.subschema(\n      {\n        keyword: \"not\",\n        compositeRule: true,\n        createErrors: false,\n        allErrors: false,\n      },\n      valid\n    )\n\n    cxt.failResult(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error()\n    )\n  },\n  error: {message: \"must NOT be valid\"},\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport {validateUnion} from \"../code\"\n\nexport type AnyOfError = ErrorNoParams<\"anyOf\", AnySchema[]>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"anyOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  code: validateUnion,\n  error: {message: \"must match a schema in anyOf\"},\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {SchemaCxt} from \"../../compile\"\n\nexport type OneOfError = ErrorObject<\n  \"oneOf\",\n  {passingSchemas: [number, number] | null},\n  AnySchema[]\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must match exactly one schema in oneOf\",\n  params: ({params}) => _`{passingSchemas: ${params.passing}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"oneOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    if (it.opts.discriminator && parentSchema.discriminator) return\n    const schArr: AnySchema[] = schema\n    const valid = gen.let(\"valid\", false)\n    const passing = gen.let(\"passing\", null)\n    const schValid = gen.name(\"_valid\")\n    cxt.setParams({passing})\n    // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n\n    gen.block(validateOneOf)\n\n    cxt.result(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error(true)\n    )\n\n    function validateOneOf(): void {\n      schArr.forEach((sch: AnySchema, i: number) => {\n        let schCxt: SchemaCxt | undefined\n        if (alwaysValidSchema(it, sch)) {\n          gen.var(schValid, true)\n        } else {\n          schCxt = cxt.subschema(\n            {\n              keyword: \"oneOf\",\n              schemaProp: i,\n              compositeRule: true,\n            },\n            schValid\n          )\n        }\n\n        if (i > 0) {\n          gen\n            .if(_`${schValid} && ${valid}`)\n            .assign(valid, false)\n            .assign(passing, _`[${passing}, ${i}]`)\n            .else()\n        }\n\n        gen.if(schValid, () => {\n          gen.assign(valid, true)\n          gen.assign(passing, i)\n          if (schCxt) cxt.mergeEvaluated(schCxt, Name)\n        })\n      })\n    }\n  },\n}\n\nexport default def\n", "import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"allOf\",\n  schemaType: \"array\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    const valid = gen.name(\"valid\")\n    schema.forEach((sch: AnySchema, i: number) => {\n      if (alwaysValidSchema(it, sch)) return\n      const schCxt = cxt.subschema({keyword: \"allOf\", schemaProp: i}, valid)\n      cxt.ok(valid)\n      cxt.mergeEvaluated(schCxt)\n    })\n  },\n}\n\nexport default def\n", "import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"../../compile\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\n\nexport type IfKeywordError = ErrorObject<\"if\", {failingKeyword: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params}) => str`must match \"${params.ifClause}\" schema`,\n  params: ({params}) => _`{failingKeyword: ${params.ifClause}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"if\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, parentSchema, it} = cxt\n    if (parentSchema.then === undefined && parentSchema.else === undefined) {\n      checkStrictMode(it, '\"if\" without \"then\" and \"else\" is ignored')\n    }\n    const hasThen = hasSchema(it, \"then\")\n    const hasElse = hasSchema(it, \"else\")\n    if (!hasThen && !hasElse) return\n\n    const valid = gen.let(\"valid\", true)\n    const schValid = gen.name(\"_valid\")\n    validateIf()\n    cxt.reset()\n\n    if (hasThen && hasElse) {\n      const ifClause = gen.let(\"ifClause\")\n      cxt.setParams({ifClause})\n      gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause))\n    } else if (hasThen) {\n      gen.if(schValid, validateClause(\"then\"))\n    } else {\n      gen.if(not(schValid), validateClause(\"else\"))\n    }\n\n    cxt.pass(valid, () => cxt.error(true))\n\n    function validateIf(): void {\n      const schCxt = cxt.subschema(\n        {\n          keyword: \"if\",\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        },\n        schValid\n      )\n      cxt.mergeEvaluated(schCxt)\n    }\n\n    function validateClause(keyword: string, ifClause?: Name): () => void {\n      return () => {\n        const schCxt = cxt.subschema({keyword}, schValid)\n        gen.assign(valid, schValid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n        if (ifClause) gen.assign(ifClause, _`${keyword}`)\n        else cxt.setParams({ifClause: keyword})\n      }\n    }\n  },\n}\n\nfunction hasSchema(it: SchemaObjCxt, keyword: string): boolean {\n  const schema = it.schema[keyword]\n  return schema !== undefined && !alwaysValidSchema(it, schema)\n}\n\nexport default def\n", "import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"then\", \"else\"],\n  schemaType: [\"object\", \"boolean\"],\n  code({keyword, parentSchema, it}: KeywordCxt) {\n    if (parentSchema.if === undefined) checkStrictMode(it, `\"${keyword}\" without \"if\" is ignored`)\n  },\n}\n\nexport default def\n", "import type {ErrorNoParams, Vocabulary} from \"../../types\"\nimport additionalItems, {AdditionalItemsError} from \"./additionalItems\"\nimport prefixItems from \"./prefixItems\"\nimport items from \"./items\"\nimport items2020, {ItemsError} from \"./items2020\"\nimport contains, {ContainsError} from \"./contains\"\nimport dependencies, {DependenciesError} from \"./dependencies\"\nimport propertyNames, {PropertyNamesError} from \"./propertyNames\"\nimport additionalProperties, {AdditionalPropertiesError} from \"./additionalProperties\"\nimport properties from \"./properties\"\nimport patternProperties from \"./patternProperties\"\nimport notKeyword, {NotKeywordError} from \"./not\"\nimport anyOf, {AnyOfError} from \"./anyOf\"\nimport oneOf, {OneOfError} from \"./oneOf\"\nimport allOf from \"./allOf\"\nimport ifKeyword, {IfKeywordError} from \"./if\"\nimport thenElse from \"./thenElse\"\n\nexport default function getApplicator(draft2020 = false): Vocabulary {\n  const applicator = [\n    // any\n    notKeyword,\n    anyOf,\n    oneOf,\n    allOf,\n    ifKeyword,\n    thenElse,\n    // object\n    propertyNames,\n    additionalProperties,\n    dependencies,\n    properties,\n    patternProperties,\n  ]\n  // array\n  if (draft2020) applicator.push(prefixItems, items2020)\n  else applicator.push(additionalItems, items)\n  applicator.push(contains)\n  return applicator\n}\n\nexport type ApplicatorKeywordError =\n  | ErrorNoParams<\"false schema\">\n  | AdditionalItemsError\n  | ItemsError\n  | ContainsError\n  | AdditionalPropertiesError\n  | DependenciesError\n  | IfKeywordError\n  | AnyOfError\n  | OneOfError\n  | NotKeywordError\n  | PropertyNamesError\n", "import type {\n  AddedFormat,\n  FormatValidator,\n  AsyncFormatValidator,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, nil, or, Code, getProperty, regexpCode} from \"../../compile/codegen\"\n\ntype FormatValidate =\n  | FormatValidator<string>\n  | FormatValidator<number>\n  | AsyncFormatValidator<string>\n  | AsyncFormatValidator<number>\n  | RegExp\n  | string\n  | true\n\nexport type FormatError = ErrorObject<\"format\", {format: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match format \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{format: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"format\",\n  type: [\"number\", \"string\"],\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt, ruleType?: string) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    const {opts, errSchemaPath, schemaEnv, self} = it\n    if (!opts.validateFormats) return\n\n    if ($data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fDef = gen.const(\"fDef\", _`${fmts}[${schemaCode}]`)\n      const fType = gen.let(\"fType\")\n      const format = gen.let(\"format\")\n      // TODO simplify\n      gen.if(\n        _`typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`,\n        () => gen.assign(fType, _`${fDef}.type || \"string\"`).assign(format, _`${fDef}.validate`),\n        () => gen.assign(fType, _`\"string\"`).assign(format, fDef)\n      )\n      cxt.fail$data(or(unknownFmt(), invalidFmt()))\n\n      function unknownFmt(): Code {\n        if (opts.strictSchema === false) return nil\n        return _`${schemaCode} && !${format}`\n      }\n\n      function invalidFmt(): Code {\n        const callFormat = schemaEnv.$async\n          ? _`(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n          : _`${format}(${data})`\n        const validData = _`(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`\n        return _`${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`\n      }\n    }\n\n    function validateFormat(): void {\n      const formatDef: AddedFormat | undefined = self.formats[schema]\n      if (!formatDef) {\n        unknownFormat()\n        return\n      }\n      if (formatDef === true) return\n      const [fmtType, format, fmtRef] = getFormat(formatDef)\n      if (fmtType === ruleType) cxt.pass(validCondition())\n\n      function unknownFormat(): void {\n        if (opts.strictSchema === false) {\n          self.logger.warn(unknownMsg())\n          return\n        }\n        throw new Error(unknownMsg())\n\n        function unknownMsg(): string {\n          return `unknown format \"${schema as string}\" ignored in schema at path \"${errSchemaPath}\"`\n        }\n      }\n\n      function getFormat(fmtDef: AddedFormat): [string, FormatValidate, Code] {\n        const code =\n          fmtDef instanceof RegExp\n            ? regexpCode(fmtDef)\n            : opts.code.formats\n            ? _`${opts.code.formats}${getProperty(schema)}`\n            : undefined\n        const fmt = gen.scopeValue(\"formats\", {key: schema, ref: fmtDef, code})\n        if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n          return [fmtDef.type || \"string\", fmtDef.validate, _`${fmt}.validate`]\n        }\n\n        return [\"string\", fmtDef, fmt]\n      }\n\n      function validCondition(): Code {\n        if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n          if (!schemaEnv.$async) throw new Error(\"async format in sync schema\")\n          return _`await ${fmtRef}(${data})`\n        }\n        return typeof format == \"function\" ? _`${fmtRef}(${data})` : _`${fmtRef}.test(${data})`\n      }\n    }\n  },\n}\n\nexport default def\n", "import type {Vocabulary} from \"../../types\"\nimport formatKeyword from \"./format\"\n\nconst format: Vocabulary = [formatKeyword]\n\nexport default format\n", "import type {Vocabulary} from \"../types\"\n\nexport const metadataVocabulary: Vocabulary = [\n  \"title\",\n  \"description\",\n  \"default\",\n  \"deprecated\",\n  \"readOnly\",\n  \"writeOnly\",\n  \"examples\",\n]\n\nexport const contentVocabulary: Vocabulary = [\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"contentSchema\",\n]\n", "import type {Vocabulary} from \"../types\"\nimport coreVocabulary from \"./core\"\nimport validationVocabulary from \"./validation\"\nimport getApplicatorVocabulary from \"./applicator\"\nimport formatVocabulary from \"./format\"\nimport {metadataVocabulary, contentVocabulary} from \"./metadata\"\n\nconst draft7Vocabularies: Vocabulary[] = [\n  coreVocabulary,\n  validationVocabulary,\n  getApplicatorVocabulary(),\n  formatVocabulary,\n  metadataVocabulary,\n  contentVocabulary,\n]\n\nexport default draft7Vocabularies\n", "import type {ErrorObject} from \"../../types\"\n\nexport enum DiscrError {\n  Tag = \"tag\",\n  Mapping = \"mapping\",\n}\n\nexport type DiscrErrorObj<E extends DiscrError> = ErrorObject<\n  \"discriminator\",\n  {error: E; tag: string; tagValue: unknown},\n  string\n>\n", "import type {CodeKeywordDefinition, AnySchemaObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, getProperty, Name} from \"../../compile/codegen\"\nimport {DiscrError, DiscrErrorObj} from \"../discriminator/types\"\nimport {resolveRef, SchemaEnv} from \"../../compile\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {schemaHasRulesButRef} from \"../../compile/util\"\n\nexport type DiscriminatorError = DiscrErrorObj<DiscrError.Tag> | DiscrErrorObj<DiscrError.Mapping>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {discrError, tagName}}) =>\n    discrError === DiscrError.Tag\n      ? `tag \"${tagName}\" must be string`\n      : `value of tag \"${tagName}\" must be in oneOf`,\n  params: ({params: {discrError, tag, tagName}}) =>\n    _`{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"discriminator\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schema, parentSchema, it} = cxt\n    const {oneOf} = parentSchema\n    if (!it.opts.discriminator) {\n      throw new Error(\"discriminator: requires discriminator option\")\n    }\n    const tagName = schema.propertyName\n    if (typeof tagName != \"string\") throw new Error(\"discriminator: requires propertyName\")\n    if (schema.mapping) throw new Error(\"discriminator: mapping is not supported\")\n    if (!oneOf) throw new Error(\"discriminator: requires oneOf keyword\")\n    const valid = gen.let(\"valid\", false)\n    const tag = gen.const(\"tag\", _`${data}${getProperty(tagName)}`)\n    gen.if(\n      _`typeof ${tag} == \"string\"`,\n      () => validateMapping(),\n      () => cxt.error(false, {discrError: DiscrError.Tag, tag, tagName})\n    )\n    cxt.ok(valid)\n\n    function validateMapping(): void {\n      const mapping = getMapping()\n      gen.if(false)\n      for (const tagValue in mapping) {\n        gen.elseIf(_`${tag} === ${tagValue}`)\n        gen.assign(valid, applyTagSchema(mapping[tagValue]))\n      }\n      gen.else()\n      cxt.error(false, {discrError: DiscrError.Mapping, tag, tagName})\n      gen.endIf()\n    }\n\n    function applyTagSchema(schemaProp?: number): Name {\n      const _valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema({keyword: \"oneOf\", schemaProp}, _valid)\n      cxt.mergeEvaluated(schCxt, Name)\n      return _valid\n    }\n\n    function getMapping(): {[T in string]?: number} {\n      const oneOfMapping: {[T in string]?: number} = {}\n      const topRequired = hasRequired(parentSchema)\n      let tagRequired = true\n      for (let i = 0; i < oneOf.length; i++) {\n        let sch = oneOf[i]\n        if (sch?.$ref && !schemaHasRulesButRef(sch, it.self.RULES)) {\n          const ref = sch.$ref\n          sch = resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref)\n          if (sch instanceof SchemaEnv) sch = sch.schema\n          if (sch === undefined) throw new MissingRefError(it.opts.uriResolver, it.baseId, ref)\n        }\n        const propSch = sch?.properties?.[tagName]\n        if (typeof propSch != \"object\") {\n          throw new Error(\n            `discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`\n          )\n        }\n        tagRequired = tagRequired && (topRequired || hasRequired(sch))\n        addMappings(propSch, i)\n      }\n      if (!tagRequired) throw new Error(`discriminator: \"${tagName}\" must be required`)\n      return oneOfMapping\n\n      function hasRequired({required}: AnySchemaObject): boolean {\n        return Array.isArray(required) && required.includes(tagName)\n      }\n\n      function addMappings(sch: AnySchemaObject, i: number): void {\n        if (sch.const) {\n          addMapping(sch.const, i)\n        } else if (sch.enum) {\n          for (const tagValue of sch.enum) {\n            addMapping(tagValue, i)\n          }\n        } else {\n          throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`)\n        }\n      }\n\n      function addMapping(tagValue: unknown, i: number): void {\n        if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n          throw new Error(`discriminator: \"${tagName}\" values must be unique strings`)\n        }\n        oneOfMapping[tagValue] = i\n      }\n    }\n  },\n}\n\nexport default def\n", "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"$id\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Core schema meta-schema\",\n  \"definitions\": {\n    \"schemaArray\": {\n      \"type\": \"array\",\n      \"minItems\": 1,\n      \"items\": {\"$ref\": \"#\"}\n    },\n    \"nonNegativeInteger\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"nonNegativeIntegerDefault0\": {\n      \"allOf\": [{\"$ref\": \"#/definitions/nonNegativeInteger\"}, {\"default\": 0}]\n    },\n    \"simpleTypes\": {\n      \"enum\": [\"array\", \"boolean\", \"integer\", \"null\", \"number\", \"object\", \"string\"]\n    },\n    \"stringArray\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"uniqueItems\": true,\n      \"default\": []\n    }\n  },\n  \"type\": [\"object\", \"boolean\"],\n  \"properties\": {\n    \"$id\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$schema\": {\n      \"type\": \"string\",\n      \"format\": \"uri\"\n    },\n    \"$ref\": {\n      \"type\": \"string\",\n      \"format\": \"uri-reference\"\n    },\n    \"$comment\": {\n      \"type\": \"string\"\n    },\n    \"title\": {\n      \"type\": \"string\"\n    },\n    \"description\": {\n      \"type\": \"string\"\n    },\n    \"default\": true,\n    \"readOnly\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"examples\": {\n      \"type\": \"array\",\n      \"items\": true\n    },\n    \"multipleOf\": {\n      \"type\": \"number\",\n      \"exclusiveMinimum\": 0\n    },\n    \"maximum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMaximum\": {\n      \"type\": \"number\"\n    },\n    \"minimum\": {\n      \"type\": \"number\"\n    },\n    \"exclusiveMinimum\": {\n      \"type\": \"number\"\n    },\n    \"maxLength\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minLength\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"pattern\": {\n      \"type\": \"string\",\n      \"format\": \"regex\"\n    },\n    \"additionalItems\": {\"$ref\": \"#\"},\n    \"items\": {\n      \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/schemaArray\"}],\n      \"default\": true\n    },\n    \"maxItems\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minItems\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"uniqueItems\": {\n      \"type\": \"boolean\",\n      \"default\": false\n    },\n    \"contains\": {\"$ref\": \"#\"},\n    \"maxProperties\": {\"$ref\": \"#/definitions/nonNegativeInteger\"},\n    \"minProperties\": {\"$ref\": \"#/definitions/nonNegativeIntegerDefault0\"},\n    \"required\": {\"$ref\": \"#/definitions/stringArray\"},\n    \"additionalProperties\": {\"$ref\": \"#\"},\n    \"definitions\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"properties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"default\": {}\n    },\n    \"patternProperties\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\"$ref\": \"#\"},\n      \"propertyNames\": {\"format\": \"regex\"},\n      \"default\": {}\n    },\n    \"dependencies\": {\n      \"type\": \"object\",\n      \"additionalProperties\": {\n        \"anyOf\": [{\"$ref\": \"#\"}, {\"$ref\": \"#/definitions/stringArray\"}]\n      }\n    },\n    \"propertyNames\": {\"$ref\": \"#\"},\n    \"const\": true,\n    \"enum\": {\n      \"type\": \"array\",\n      \"items\": true,\n      \"minItems\": 1,\n      \"uniqueItems\": true\n    },\n    \"type\": {\n      \"anyOf\": [\n        {\"$ref\": \"#/definitions/simpleTypes\"},\n        {\n          \"type\": \"array\",\n          \"items\": {\"$ref\": \"#/definitions/simpleTypes\"},\n          \"minItems\": 1,\n          \"uniqueItems\": true\n        }\n      ]\n    },\n    \"format\": {\"type\": \"string\"},\n    \"contentMediaType\": {\"type\": \"string\"},\n    \"contentEncoding\": {\"type\": \"string\"},\n    \"if\": {\"$ref\": \"#\"},\n    \"then\": {\"$ref\": \"#\"},\n    \"else\": {\"$ref\": \"#\"},\n    \"allOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"anyOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"oneOf\": {\"$ref\": \"#/definitions/schemaArray\"},\n    \"not\": {\"$ref\": \"#\"}\n  },\n  \"default\": true\n}\n", "import type {AnySchemaObject} from \"./types\"\nimport AjvCore from \"./core\"\nimport draft7Vocabularies from \"./vocabularies/draft7\"\nimport discriminator from \"./vocabularies/discriminator\"\nimport * as draft7MetaSchema from \"./refs/json-schema-draft-07.json\"\n\nconst META_SUPPORT_DATA = [\"/properties\"]\n\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\"\n\nexport class Ajv extends AjvCore {\n  _addVocabularies(): void {\n    super._addVocabularies()\n    draft7Vocabularies.forEach((v) => this.addVocabulary(v))\n    if (this.opts.discriminator) this.addKeyword(discriminator)\n  }\n\n  _addDefaultMetaSchema(): void {\n    super._addDefaultMetaSchema()\n    if (!this.opts.meta) return\n    const metaSchema = this.opts.$data\n      ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n      : draft7MetaSchema\n    this.addMetaSchema(metaSchema, META_SCHEMA_ID, false)\n    this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    return (this.opts.defaultMeta =\n      super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined))\n  }\n}\n\nmodule.exports = exports = Ajv\nmodule.exports.Ajv = Ajv\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default Ajv\n\nexport {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  SchemaValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {Plugin, Options, CodeOptions, InstanceOptions, Logger, ErrorsTextOptions} from \"./core\"\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\nexport {default as ValidationError} from \"./runtime/validation_error\"\nexport {default as MissingRefError} from \"./compile/ref_error\"\n", "import type Ajv from \"ajv\"\nimport type {\n  Plugin,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  Code,\n  Name,\n  ErrorObject,\n} from \"ajv\"\nimport type {AddedFormat} from \"ajv/dist/types\"\nimport type {Rule} from \"ajv/dist/compile/rules\"\nimport {KeywordCxt} from \"ajv\"\nimport {_, str, or, getProperty, operators} from \"ajv/dist/compile/codegen\"\n\ntype Kwd = \"formatMaximum\" | \"formatMinimum\" | \"formatExclusiveMaximum\" | \"formatExclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst ops = operators\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  formatMaximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  formatMinimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  formatExclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  formatExclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitFormatError = ErrorObject<Kwd, {limit: string; comparison: Comparison}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`should be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nexport const formatLimitDefinition: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt) {\n    const {gen, data, schemaCode, keyword, it} = cxt\n    const {opts, self} = it\n    if (!opts.validateFormats) return\n\n    const fCxt = new KeywordCxt(it, (self.RULES.all.format as Rule).definition, \"format\")\n    if (fCxt.$data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fmt = gen.const(\"fmt\", _`${fmts}[${fCxt.schemaCode}]`)\n      cxt.fail$data(\n        or(\n          _`typeof ${fmt} != \"object\"`,\n          _`${fmt} instanceof RegExp`,\n          _`typeof ${fmt}.compare != \"function\"`,\n          compareCode(fmt)\n        )\n      )\n    }\n\n    function validateFormat(): void {\n      const format = fCxt.schema as string\n      const fmtDef: AddedFormat | undefined = self.formats[format]\n      if (!fmtDef || fmtDef === true) return\n      if (\n        typeof fmtDef != \"object\" ||\n        fmtDef instanceof RegExp ||\n        typeof fmtDef.compare != \"function\"\n      ) {\n        throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`)\n      }\n      const fmt = gen.scopeValue(\"formats\", {\n        key: format,\n        ref: fmtDef,\n        code: opts.code.formats ? _`${opts.code.formats}${getProperty(format)}` : undefined,\n      })\n\n      cxt.fail$data(compareCode(fmt))\n    }\n\n    function compareCode(fmt: Name): Code {\n      return _`${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword as Kwd].fail} 0`\n    }\n  },\n  dependencies: [\"format\"],\n}\n\nconst formatLimitPlugin: Plugin<undefined> = (ajv: Ajv): Ajv => {\n  ajv.addKeyword(formatLimitDefinition)\n  return ajv\n}\n\nexport default formatLimitPlugin\n", "import {\n  DefinedFormats,\n  FormatMode,\n  FormatName,\n  formatNames,\n  fastFormats,\n  fullFormats,\n} from \"./formats\"\nimport formatLimit from \"./limit\"\nimport type Ajv from \"ajv\"\nimport type {Plugin, Format} from \"ajv\"\nimport {_, Name} from \"ajv/dist/compile/codegen\"\n\nexport {FormatMode, FormatName} from \"./formats\"\nexport {LimitFormatError} from \"./limit\"\nexport interface FormatOptions {\n  mode?: FormatMode\n  formats?: FormatName[]\n  keywords?: boolean\n}\n\nexport type FormatsPluginOptions = FormatName[] | FormatOptions\n\nexport interface FormatsPlugin extends Plugin<FormatsPluginOptions> {\n  get: (format: FormatName, mode?: FormatMode) => Format\n}\n\nconst fullName = new Name(\"fullFormats\")\nconst fastName = new Name(\"fastFormats\")\n\nconst formatsPlugin: FormatsPlugin = (\n  ajv: Ajv,\n  opts: FormatsPluginOptions = {keywords: true}\n): Ajv => {\n  if (Array.isArray(opts)) {\n    addFormats(ajv, opts, fullFormats, fullName)\n    return ajv\n  }\n  const [formats, exportName] =\n    opts.mode === \"fast\" ? [fastFormats, fastName] : [fullFormats, fullName]\n  const list = opts.formats || formatNames\n  addFormats(ajv, list, formats, exportName)\n  if (opts.keywords) formatLimit(ajv)\n  return ajv\n}\n\nformatsPlugin.get = (name: FormatName, mode: FormatMode = \"full\"): Format => {\n  const formats = mode === \"fast\" ? fastFormats : fullFormats\n  const f = formats[name]\n  if (!f) throw new Error(`Unknown format \"${name}\"`)\n  return f\n}\n\nfunction addFormats(ajv: Ajv, list: FormatName[], fs: DefinedFormats, exportName: Name): void {\n  ajv.opts.code.formats ??= _`require(\"ajv-formats/dist/formats\").${exportName}`\n  for (const f of list) ajv.addFormat(f, fs[f])\n}\n\nmodule.exports = exports = formatsPlugin\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default formatsPlugin\n", "import type { createGenerateUniqueNumber } from './generate-unique-number';\n\nexport const createAddUniqueNumber = (generateUniqueNumber: ReturnType<typeof createGenerateUniqueNumber>) => {\n    return (set: Set<number>) => {\n        const number = generateUniqueNumber(set);\n\n        set.add(number);\n\n        return number;\n    };\n};\n", "export const createCache = (lastNumberWeakMap: WeakMap<Map<number, any> | Set<number>, number>) => {\n    return (collection: Map<number, any> | Set<number>, nextNumber: number) => {\n        lastNumberWeakMap.set(collection, nextNumber);\n\n        return nextNumber;\n    };\n};\n", "import type { createCache } from './cache';\n\n/*\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n * is fairly new.\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\n\nexport const createGenerateUniqueNumber = (\n    cache: ReturnType<typeof createCache>,\n    lastNumberWeakMap: WeakMap<Map<number, any> | Set<number>, number>\n) => {\n    return (collection: Map<number, any> | Set<number>) => {\n        const lastNumber = lastNumberWeakMap.get(collection);\n\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n\n        if (!collection.has(nextNumber)) {\n            return cache(collection, nextNumber);\n        }\n\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n            while (collection.has(nextNumber)) {\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n            }\n\n            return cache(collection, nextNumber);\n        }\n\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n\n        return cache(collection, nextNumber);\n    };\n};\n", "import { createAddUniqueNumber } from './factories/add-unique-number';\nimport { createCache } from './factories/cache';\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\n\nconst LAST_NUMBER_WEAK_MAP = new WeakMap<Map<number, any> | Set<number>, number>();\n\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\n\nexport { addUniqueNumber, generateUniqueNumber };\n", "import type { generateUniqueNumber as generateUniqueNumberFunction } from 'fast-unique-numbers';\nimport { IWorkerDefinition, IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\nimport type { isMessagePort as isMessagePortFunction } from '../guards/message-port';\nimport { IBrokerDefinition, IDefaultBrokerDefinition, IWorkerEvent } from '../interfaces';\nimport { TBrokerImplementation } from '../types';\nimport type { createCreateOrGetOngoingRequests } from './create-or-get-ongoing-requests';\nimport type { createExtendBrokerImplementation } from './extend-broker-implementation';\n\nexport const createBrokerFactory =\n    (\n        createOrGetOngoingRequests: ReturnType<typeof createCreateOrGetOngoingRequests>,\n        extendBrokerImplementation: ReturnType<typeof createExtendBrokerImplementation>,\n        generateUniqueNumber: typeof generateUniqueNumberFunction,\n        isMessagePort: typeof isMessagePortFunction\n    ) =>\n    <T extends IBrokerDefinition, U extends IWorkerDefinition>(\n        brokerImplementation: TBrokerImplementation<T, U>\n    ): ((sender: MessagePort | Worker) => T & IDefaultBrokerDefinition) => {\n        const fullBrokerImplementation = extendBrokerImplementation(brokerImplementation);\n\n        return (sender: MessagePort | Worker) => {\n            const ongoingRequests = createOrGetOngoingRequests(sender);\n\n            sender.addEventListener('message', <EventListener>(({ data: message }: IWorkerEvent) => {\n                const { id } = message;\n\n                if (id !== null && ongoingRequests.has(id)) {\n                    const { reject, resolve } = <{ reject: Function; resolve: Function }>ongoingRequests.get(id);\n\n                    ongoingRequests.delete(id);\n\n                    if ((<IWorkerErrorMessage>message).error === undefined) {\n                        resolve((<IWorkerResultMessage>message).result);\n                    } else {\n                        reject(new Error((<IWorkerErrorMessage>message).error.message));\n                    }\n                }\n            }));\n\n            if (isMessagePort(sender)) {\n                sender.start();\n            }\n\n            const call = <V extends keyof U>(method: V, params: U[V]['params'] = null, transferables: U[V]['transferables'] = []) => {\n                return new Promise<U[V]['response']['result']>((resolve, reject) => {\n                    const id = generateUniqueNumber(ongoingRequests);\n\n                    ongoingRequests.set(id, { reject, resolve });\n\n                    if (params === null) {\n                        sender.postMessage({ id, method }, <Transferable[]>transferables);\n                    } else {\n                        sender.postMessage({ id, method, params }, <Transferable[]>transferables);\n                    }\n                });\n            };\n            const notify = <V extends keyof U>(method: V, params: U[V]['params'], transferables: U[V]['transferables'] = []) => {\n                sender.postMessage({ id: null, method, params }, <Transferable[]>transferables);\n            };\n\n            let functions: object = {};\n\n            for (const [key, handler] of Object.entries(fullBrokerImplementation)) {\n                functions = { ...functions, [key]: handler({ call, notify }) };\n            }\n\n            return <T & IDefaultBrokerDefinition>{ ...functions };\n        };\n    };\n", "export const createCreateOrGetOngoingRequests =\n    (ongoingRequestsMap: WeakMap<MessagePort | Worker, Map<number, { reject: Function; resolve: Function }>>) =>\n    (sender: MessagePort | Worker): Map<number, { reject: Function; resolve: Function }> => {\n        if (ongoingRequestsMap.has(sender)) {\n            // @todo TypeScript needs to be convinced that has() works as expected.\n            return <Map<number, { reject: Function; resolve: Function }>>ongoingRequestsMap.get(sender);\n        }\n\n        const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\n\n        ongoingRequestsMap.set(sender, ongoingRequests);\n\n        return ongoingRequests;\n    };\n", "import { IWorkerDefinition } from 'worker-factory';\nimport { IBrokerDefinition, IDefaultBrokerDefinition } from '../interfaces';\nimport { TBrokerImplementation } from '../types';\n\nexport const createExtendBrokerImplementation =\n    (portMap: WeakMap<MessagePort, number>) =>\n    <T extends IBrokerDefinition, U extends IWorkerDefinition>(\n        partialBrokerImplementation: TBrokerImplementation<T, U>\n    ): TBrokerImplementation<T & IDefaultBrokerDefinition, U> =>\n        <TBrokerImplementation<T & IDefaultBrokerDefinition, U>>{\n            ...partialBrokerImplementation,\n            connect: ({ call }) => {\n                return async (): Promise<MessagePort> => {\n                    const { port1, port2 } = new MessageChannel();\n\n                    const portId = <number>await call('connect', { port: port1 }, [port1]);\n\n                    portMap.set(port2, portId);\n\n                    return port2;\n                };\n            },\n            disconnect: ({ call }) => {\n                return async (port: MessagePort): Promise<void> => {\n                    const portId = portMap.get(port);\n\n                    if (portId === undefined) {\n                        throw new Error('The given port is not connected.');\n                    }\n\n                    await call('disconnect', { portId });\n                };\n            },\n            isSupported: ({ call }) => {\n                return () => call('isSupported');\n            }\n        };\n", "export const isMessagePort = (sender: MessagePort | Worker): sender is MessagePort => {\n    return typeof (<MessagePort>sender).start === 'function';\n};\n", "export {};\n//# sourceMappingURL=broker-actions.js.map", "export {};\n//# sourceMappingURL=broker-definition.js.map", "export {};\n//# sourceMappingURL=default-broker-definition.js.map", "export {};\n//# sourceMappingURL=worker-event.js.map", "export * from './broker-actions';\nexport * from './broker-definition';\nexport * from './default-broker-definition';\nexport * from './worker-event';\n", "export {};\n//# sourceMappingURL=broker-implementation.js.map", "export * from './broker-implementation';\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { createBrokerFactory } from './factories/create-broker';\nimport { createCreateOrGetOngoingRequests } from './factories/create-or-get-ongoing-requests';\nimport { createExtendBrokerImplementation } from './factories/extend-broker-implementation';\nimport { isMessagePort } from './guards/message-port';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const createBroker = createBrokerFactory(\n    createCreateOrGetOngoingRequests(new WeakMap<MessagePort | Worker, Map<number, { reject: Function; resolve: Function }>>()),\n    createExtendBrokerImplementation(new WeakMap<MessagePort, number>()),\n    generateUniqueNumber,\n    isMessagePort\n);\n", "export {};\n//# sourceMappingURL=media-encoder-host-broker-definition.js.map", "export * from './media-encoder-host-broker-definition';\n", "export {};\n//# sourceMappingURL=media-encoder-host-broker-loader.js.map", "export {};\n//# sourceMappingURL=media-encoder-host-broker-wrapper.js.map", "export * from './media-encoder-host-broker-loader';\nexport * from './media-encoder-host-broker-wrapper';\n", "import { createBroker } from 'broker-factory';\nimport { addUniqueNumber } from 'fast-unique-numbers';\nimport { TMediaEncoderHostWorkerDefinition } from 'media-encoder-host-worker';\nimport { IMediaEncoderHostBrokerDefinition } from './interfaces';\nimport { TMediaEncoderHostBrokerLoader, TMediaEncoderHostBrokerWrapper } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst encoderIds: Set<number> = new Set();\n\nexport const wrap: TMediaEncoderHostBrokerWrapper = createBroker<IMediaEncoderHostBrokerDefinition, TMediaEncoderHostWorkerDefinition>({\n    deregister: ({ call }) => {\n        return (port) => {\n            return call('deregister', { port }, [port]);\n        };\n    },\n    encode: ({ call }) => {\n        return async (encoderId, timeslice) => {\n            const arrayBuffers = await call('encode', { encoderId, timeslice });\n\n            encoderIds.delete(encoderId);\n\n            return arrayBuffers;\n        };\n    },\n    instantiate: ({ call }) => {\n        return async (mimeType, sampleRate) => {\n            const encoderId = addUniqueNumber(encoderIds);\n            const port = await call('instantiate', { encoderId, mimeType, sampleRate });\n\n            return { encoderId, port };\n        };\n    },\n    register: ({ call }) => {\n        return (port) => {\n            return call('register', { port }, [port]);\n        };\n    }\n});\n\nexport const load: TMediaEncoderHostBrokerLoader = (url: string) => {\n    const worker = new Worker(url);\n\n    return wrap(worker);\n};\n", "// This is the minified and stringified code of the media-encoder-host-worker package.\nexport const worker = `(()=>{var e={455:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),l=a(c,i),d=t(l);e.addUniqueNumber=d,e.generateUniqueNumber=l}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{\"use strict\";var e=r(455);const t=new WeakMap,n=new WeakMap,o=(r=>{const o=(s=r,{...s,connect:e=>{let{call:r}=e;return async()=>{const{port1:e,port2:n}=new MessageChannel,o=await r(\"connect\",{port:e},[e]);return t.set(n,o),n}},disconnect:e=>{let{call:r}=e;return async e=>{const n=t.get(e);if(void 0===n)throw new Error(\"The given port is not connected.\");await r(\"disconnect\",{portId:n})}},isSupported:e=>{let{call:t}=e;return()=>t(\"isSupported\")}});var s;return t=>{const r=(e=>{if(n.has(e))return n.get(e);const t=new Map;return n.set(e,t),t})(t);t.addEventListener(\"message\",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>\"function\"==typeof e.start)(t)&&t.start();const s=function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((a,i)=>{const c=(0,e.generateUniqueNumber)(r);r.set(c,{reject:i,resolve:a}),null===o?t.postMessage({id:c,method:n},s):t.postMessage({id:c,method:n,params:o},s)}))},a=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.postMessage({id:null,method:e,params:r},n)};let i={};for(const[e,t]of Object.entries(o))i={...i,[e]:t({call:s,notify:a})};return{...i}}})({characterize:e=>{let{call:t}=e;return()=>t(\"characterize\")},encode:e=>{let{call:t}=e;return(e,r)=>t(\"encode\",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t(\"record\",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),s=-32603,a=-32602,i=-32601,c=(e,t)=>Object.assign(new Error(e),{status:t}),l=e=>c('The handler of the method called \"'.concat(e,'\" returned an unexpected result.'),s),d=(e,t)=>async r=>{let{data:{id:n,method:o,params:a}}=r;const d=t[o];try{if(void 0===d)throw(e=>c('The requested method called \"'.concat(e,'\" is not supported.'),i))(o);const t=void 0===a?d():d(a);if(void 0===t)throw(e=>c('The handler of the method called \"'.concat(e,'\" returned no required result.'),s))(o);const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw l(o)}else{if(void 0===r.result)throw l(o);const{result:t,transferables:s=[]}=r;e.postMessage({id:n,result:t},s)}}catch(t){const{message:r,status:o=-32603}=t;e.postMessage({error:{code:o,message:r},id:n})}},u=new Map,h=(t,r,n)=>({...r,connect:n=>{let{port:o}=n;o.start();const s=t(o,r),a=(0,e.generateUniqueNumber)(u);return u.set(a,(()=>{s(),o.close(),u.delete(a)})),{result:a}},disconnect:e=>{let{portId:t}=e;const r=u.get(t);if(void 0===r)throw(e=>c('The specified parameter called \"portId\" with the given value \"'.concat(e,'\" does not identify a port connected to this worker.'),a))(t);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),f=function(e,t){const r=h(f,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=d(e,r);return e.addEventListener(\"message\",n),()=>e.removeEventListener(\"message\",n)},p=e=>{e.onmessage=null,e.close()},w=new Map,m=new WeakMap,g=((e,t)=>r=>{const n=t.get(r);if(void 0===n)throw new Error(\"There is no encoder stored which wraps this port.\");e.delete(n),t.delete(r)})(w,m),v=new Map,y=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error(\"There was no instance of an encoder stored with the given id.\");return r})(v),M=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(v,y),E=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise((t=>{o.onmessage=s=>{let{data:i}=s;0===i.length?(e(o),t(n.encode(r,null))):n.record(r,a,i)}})):n.encode(r,null)})(p,M),b=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error(\"There is no encoder registered which could handle the given mimeType.\")})(w),T=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error('There is already an encoder registered with an id called \"'.concat(n,'\".'));const a=r(o),{port1:i,port2:c}=new MessageChannel,l=[a,i,!0,s];return t.set(n,l),i.onmessage=t=>{let{data:r}=t;0===r.length?(e(i),l[2]=!1):a.record(n,s,r.map((e=>\"number\"==typeof e?new Float32Array(e):e)))},c})(p,v,b),I=((e,t,r)=>async n=>{const o=r(n),s=await o.characterize(),a=s.toString();if(e.has(a)||t.has(n))throw new Error(\"There is already an encoder stored which handles exactly the same mime types.\");return e.set(a,[s,o]),t.set(n,a),s})(w,m,o),A=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(y);f(self,{deregister:async e=>{let{port:t}=e;return{result:g(t)}},encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await E(t):await A(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=T(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await I(t)}}})})()})();`; // tslint:disable-line:max-line-length\n", "import { load as loadWorker } from 'media-encoder-host-broker';\nimport { worker } from './worker/worker';\n\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n\nconst url: string = URL.createObjectURL(blob);\n\nconst mediaEncoderHost = loadWorker(url);\n\nexport const connect = mediaEncoderHost.connect;\n\nexport const deregister = mediaEncoderHost.deregister;\n\nexport const disconnect = mediaEncoderHost.disconnect;\n\nexport const encode = mediaEncoderHost.encode;\n\nexport const instantiate = mediaEncoderHost.instantiate;\n\nexport const isSupported = mediaEncoderHost.isSupported;\n\nexport const register = mediaEncoderHost.register;\n\nURL.revokeObjectURL(url);\n", "import { IBlobEvent } from '../interfaces';\nimport { TBlobEventFactoryFactory } from '../types';\n\nexport const createBlobEventFactory: TBlobEventFactoryFactory = (nativeBlobEventConstructor) => {\n    return (type, blobEventInit) => {\n        // Bug #14: Safari does not yet support the BlobEvent.\n        if (nativeBlobEventConstructor === null) {\n            const { data, ...eventInit } = blobEventInit;\n            const fakeBlobEvent = <IBlobEvent>new Event(type, eventInit);\n\n            (<Omit<IBlobEvent, 'data'> & { -readonly [P in 'data']: IBlobEvent[P] }>fakeBlobEvent).data = data;\n\n            return fakeBlobEvent;\n        }\n\n        return new nativeBlobEventConstructor(type, blobEventInit);\n    };\n};\n", "import { TDecodeWebMChunkFactory } from '../types';\n\nexport const createDecodeWebMChunk: TDecodeWebMChunkFactory = (readElementContent, readElementType) => {\n    return (dataView, elementType, channelCount) => {\n        const contents: (readonly Float32Array[])[] = [];\n\n        let currentElementType = elementType;\n        let offset = 0;\n\n        while (offset < dataView.byteLength) {\n            if (currentElementType === null) {\n                const lengthAndType = readElementType(dataView, offset);\n\n                if (lengthAndType === null) {\n                    break;\n                }\n\n                const { length, type } = lengthAndType;\n\n                currentElementType = type;\n                offset += length;\n            } else {\n                const contentAndLength = readElementContent(dataView, offset, currentElementType, channelCount);\n\n                if (contentAndLength === null) {\n                    break;\n                }\n\n                const { content, length } = contentAndLength;\n\n                currentElementType = null;\n                offset += length;\n\n                if (content !== null) {\n                    contents.push(content);\n                }\n            }\n        }\n\n        return { contents, currentElementType, offset };\n    };\n};\n", "import { IEventTarget } from '../interfaces';\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\n\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (createEventTarget, wrapEventListener) => {\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\n\n        private _nativeEventTarget: TNativeEventTarget;\n\n        constructor(nativeEventTarget: null | TNativeEventTarget = null) {\n            this._listeners = new WeakMap();\n            this._nativeEventTarget = nativeEventTarget === null ? createEventTarget() : nativeEventTarget;\n        }\n\n        public addEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | AddEventListenerOptions\n        ): void {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n\n        public dispatchEvent(event: Event): boolean {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n\n        public removeEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | EventListenerOptions\n        ): void {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n", "import { TEventTargetFactoryFactory } from '../types';\n\nexport const createEventTargetFactory: TEventTargetFactoryFactory = (window) => {\n    return () => {\n        if (window === null) {\n            throw new Error('A native EventTarget could not be created.');\n        }\n\n        return window.document.createElement('p');\n    };\n};\n", "import { TInvalidModificationErrorFactory } from '../types';\n\nexport const createInvalidModificationError: TInvalidModificationErrorFactory = (message = '') => {\n    try {\n        return new DOMException(message, 'InvalidModificationError');\n    } catch (err) {\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 13;\n        err.message = message;\n        err.name = 'InvalidModificationError';\n\n        return err;\n    }\n};\n", "import { TInvalidStateErrorFactory } from '../types';\n\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => {\n    try {\n        return new DOMException('', 'InvalidStateError');\n    } catch (err) {\n        // Bug #122: Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 11;\n        err.name = 'InvalidStateError';\n\n        return err;\n    }\n};\n", "import { TIsSupportedPromiseFactory } from '../types';\n\nexport const createIsSupportedPromise: TIsSupportedPromiseFactory = (window) => {\n    if (\n        window !== null &&\n        window.MediaStream !== undefined &&\n        /*\n         * Bug #10: An early experimental implemenation in Safari did not provide the isTypeSupported() function.\n         */\n        (window.MediaRecorder === undefined || window.MediaRecorder.isTypeSupported !== undefined)\n    ) {\n        /*\n         * Bug #5: Up until v70 Firefox did emit a blob of type video/webm when asked to encode a MediaStream with a video track into an\n         * audio codec.\n         */\n        return new Promise((resolve) => {\n            // Bug #11 Safari does not yet support the MediaRecorder but that isn't tested here.\n            if (window.MediaRecorder === undefined) {\n                return resolve(true);\n            }\n\n            // @todo captureStream() is not defined yet.\n            const canvasElement: HTMLCanvasElement & { captureStream?(): MediaStream } = document.createElement('canvas');\n\n            // @todo https://bugzilla.mozilla.org/show_bug.cgi?id=1388974\n            canvasElement.getContext('2d');\n\n            if (typeof canvasElement.captureStream !== 'function') {\n                return resolve(false);\n            }\n\n            const mediaStream = canvasElement.captureStream();\n            const mimeType = 'audio/webm';\n\n            try {\n                const mediaRecorder = new window.MediaRecorder(mediaStream, { mimeType });\n\n                mediaRecorder.addEventListener('dataavailable', ({ data }) => resolve(data.type === mimeType));\n                mediaRecorder.start();\n\n                setTimeout(() => mediaRecorder.stop(), 10);\n            } catch (err) {\n                resolve(err.name === 'NotSupportedError');\n            }\n        });\n    }\n\n    return Promise.resolve(false);\n};\n", "import { IMediaRecorder, IMediaRecorderEventMap, IMediaRecorderOptions } from '../interfaces';\nimport {\n    TBlobEventHandler,\n    TErrorEventHandler,\n    TEventHandler,\n    TMediaRecorderConstructorFactory,\n    TNativeEventTarget,\n    TRecordingState\n} from '../types';\n\nexport const createMediaRecorderConstructor: TMediaRecorderConstructorFactory = (\n    createNativeMediaRecorder,\n    createNotSupportedError,\n    createWebAudioMediaRecorder,\n    createWebmPcmMediaRecorder,\n    encoderRegexes,\n    eventTargetConstructor,\n    nativeMediaRecorderConstructor\n) => {\n    return class MediaRecorder extends eventTargetConstructor<IMediaRecorderEventMap> implements IMediaRecorder {\n        private _internalMediaRecorder: Omit<\n            IMediaRecorder,\n            'ondataavailable' | 'onerror' | 'onpause' | 'onresume' | 'onstart' | 'onstop' | keyof TNativeEventTarget\n        >;\n\n        private _ondataavailable: null | [TBlobEventHandler<this>, TBlobEventHandler<this>];\n\n        private _onerror: null | [TErrorEventHandler<this>, TErrorEventHandler<this>];\n\n        private _onpause: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onresume: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onstart: null | [TEventHandler<this>, TEventHandler<this>];\n\n        private _onstop: null | [TEventHandler<this>, TEventHandler<this>];\n\n        constructor(stream: MediaStream, options: IMediaRecorderOptions = {}) {\n            const { mimeType } = options;\n\n            if (\n                nativeMediaRecorderConstructor !== null &&\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                (mimeType === undefined ||\n                    (nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                        nativeMediaRecorderConstructor.isTypeSupported(mimeType)))\n            ) {\n                const internalMediaRecorder = createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\n\n                super(internalMediaRecorder);\n\n                this._internalMediaRecorder = internalMediaRecorder;\n            } else if (mimeType !== undefined && encoderRegexes.some((regex) => regex.test(mimeType))) {\n                super();\n\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                if (\n                    nativeMediaRecorderConstructor !== null &&\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                    nativeMediaRecorderConstructor.isTypeSupported('audio/webm;codecs=pcm')\n                ) {\n                    this._internalMediaRecorder = createWebmPcmMediaRecorder(this, nativeMediaRecorderConstructor, stream, mimeType);\n                } else {\n                    this._internalMediaRecorder = createWebAudioMediaRecorder(this, stream, mimeType);\n                }\n            } else {\n                // This is creating a native MediaRecorder just to provoke it to throw an error.\n                if (nativeMediaRecorderConstructor !== null) {\n                    createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\n                }\n\n                throw createNotSupportedError();\n            }\n\n            this._ondataavailable = null;\n            this._onerror = null;\n            this._onpause = null;\n            this._onresume = null;\n            this._onstart = null;\n            this._onstop = null;\n        }\n\n        get mimeType(): string {\n            return this._internalMediaRecorder.mimeType;\n        }\n\n        get ondataavailable(): null | TBlobEventHandler<this> {\n            return this._ondataavailable === null ? this._ondataavailable : this._ondataavailable[0];\n        }\n\n        set ondataavailable(value) {\n            if (this._ondataavailable !== null) {\n                this.removeEventListener('dataavailable', this._ondataavailable[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('dataavailable', boundListener);\n\n                this._ondataavailable = [value, boundListener];\n            } else {\n                this._ondataavailable = null;\n            }\n        }\n\n        get onerror(): null | TErrorEventHandler<this> {\n            return this._onerror === null ? this._onerror : this._onerror[0];\n        }\n\n        set onerror(value) {\n            if (this._onerror !== null) {\n                this.removeEventListener('error', this._onerror[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('error', boundListener);\n\n                this._onerror = [value, boundListener];\n            } else {\n                this._onerror = null;\n            }\n        }\n\n        get onpause(): null | TEventHandler<this> {\n            return this._onpause === null ? this._onpause : this._onpause[0];\n        }\n\n        set onpause(value) {\n            if (this._onpause !== null) {\n                this.removeEventListener('pause', this._onpause[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('pause', boundListener);\n\n                this._onpause = [value, boundListener];\n            } else {\n                this._onpause = null;\n            }\n        }\n\n        get onresume(): null | TEventHandler<this> {\n            return this._onresume === null ? this._onresume : this._onresume[0];\n        }\n\n        set onresume(value) {\n            if (this._onresume !== null) {\n                this.removeEventListener('resume', this._onresume[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('resume', boundListener);\n\n                this._onresume = [value, boundListener];\n            } else {\n                this._onresume = null;\n            }\n        }\n\n        get onstart(): null | TEventHandler<this> {\n            return this._onstart === null ? this._onstart : this._onstart[0];\n        }\n\n        set onstart(value) {\n            if (this._onstart !== null) {\n                this.removeEventListener('start', this._onstart[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('start', boundListener);\n\n                this._onstart = [value, boundListener];\n            } else {\n                this._onstart = null;\n            }\n        }\n\n        get onstop(): null | TEventHandler<this> {\n            return this._onstop === null ? this._onstop : this._onstop[0];\n        }\n\n        set onstop(value) {\n            if (this._onstop !== null) {\n                this.removeEventListener('stop', this._onstop[1]);\n            }\n\n            if (typeof value === 'function') {\n                const boundListener = value.bind(this);\n\n                this.addEventListener('stop', boundListener);\n\n                this._onstop = [value, boundListener];\n            } else {\n                this._onstop = null;\n            }\n        }\n\n        get state(): TRecordingState {\n            return this._internalMediaRecorder.state;\n        }\n\n        public pause(): void {\n            return this._internalMediaRecorder.pause();\n        }\n\n        public resume(): void {\n            return this._internalMediaRecorder.resume();\n        }\n\n        public start(timeslice?: number): void {\n            return this._internalMediaRecorder.start(timeslice);\n        }\n\n        public stop(): void {\n            return this._internalMediaRecorder.stop();\n        }\n\n        public static isTypeSupported(mimeType: string): boolean {\n            return (\n                (nativeMediaRecorderConstructor !== null &&\n                    // Bug #10: Safari does not yet implement the isTypeSupported() method.\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\n                    nativeMediaRecorderConstructor.isTypeSupported(mimeType)) ||\n                encoderRegexes.some((regex) => regex.test(mimeType))\n            );\n        }\n    };\n};\n", "import { TNativeBlobEventConstructorFactory } from '../types';\n\nexport const createNativeBlobEventConstructor: TNativeBlobEventConstructorFactory = (window) => {\n    if (window !== null && window.BlobEvent !== undefined) {\n        return window.BlobEvent;\n    }\n\n    return null;\n};\n", "import { IBlobEvent, IMediaRecorder } from '../interfaces';\nimport { TEventHandler, TNativeMediaRecorderFactoryFactory } from '../types';\n\nexport const createNativeMediaRecorderFactory: TNativeMediaRecorderFactoryFactory = (\n    createInvalidModificationError,\n    createNotSupportedError\n) => {\n    return (nativeMediaRecorderConstructor, stream, mediaRecorderOptions) => {\n        const bufferedBlobs: Blob[] = [];\n        const dataAvailableListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: IBlobEvent) => void>();\n        const errorListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: ErrorEvent) => void>();\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(stream, mediaRecorderOptions);\n        const stopListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: Event) => void>();\n\n        let isActive = true;\n\n        nativeMediaRecorder.addEventListener = ((addEventListener) => {\n            return (\n                type: string,\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\n                options?: boolean | AddEventListenerOptions\n            ) => {\n                let patchedEventListener = listener;\n\n                if (typeof listener === 'function') {\n                    if (type === 'dataavailable') {\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n                        patchedEventListener = (event: IBlobEvent) => {\n                            setTimeout(() => {\n                                if (isActive && nativeMediaRecorder.state === 'inactive') {\n                                    bufferedBlobs.push(event.data);\n                                } else {\n                                    if (bufferedBlobs.length > 0) {\n                                        const blob = event.data;\n\n                                        Object.defineProperty(event, 'data', {\n                                            value: new Blob([...bufferedBlobs, blob], { type: blob.type })\n                                        });\n\n                                        bufferedBlobs.length = 0;\n                                    }\n\n                                    listener.call(nativeMediaRecorder, event);\n                                }\n                            });\n                        };\n\n                        dataAvailableListeners.set(listener, patchedEventListener);\n                    } else if (type === 'error') {\n                        // Bug #12 & #13: Firefox fires a regular event with an error property.\n                        patchedEventListener = (event: ErrorEvent | (Event & { error?: Error })) => {\n                            // Bug #3 & #4: Chrome throws an error event without any error.\n                            if (event.error === undefined) {\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: createInvalidModificationError() }));\n                                // Bug #1 & #2: Firefox throws an error event with an UnknownError.\n                            } else if (event.error.name === 'UnknownError') {\n                                const message = event.error.message;\n\n                                listener.call(\n                                    nativeMediaRecorder,\n                                    new ErrorEvent('error', { error: createInvalidModificationError(message) })\n                                );\n                            } else if (event instanceof ErrorEvent) {\n                                listener.call(nativeMediaRecorder, event);\n                            } else {\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: event.error }));\n                            }\n                        };\n\n                        errorListeners.set(listener, patchedEventListener);\n                    } else if (type === 'stop') {\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n                        patchedEventListener = (event: Event) => {\n                            isActive = false;\n\n                            setTimeout(() => listener.call(nativeMediaRecorder, event));\n                        };\n\n                        stopListeners.set(listener, patchedEventListener);\n                    }\n                }\n\n                return addEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\n            };\n        })(nativeMediaRecorder.addEventListener);\n\n        nativeMediaRecorder.dispatchEvent = ((dispatchEvent) => {\n            // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\n            return (event: Event) => {\n                let wasActive: boolean;\n\n                setTimeout(() => {\n                    wasActive = isActive;\n                    isActive = false;\n                });\n\n                const returnValue = dispatchEvent.call(nativeMediaRecorder, event);\n\n                setTimeout(() => (isActive = wasActive));\n\n                return returnValue;\n            };\n        })(nativeMediaRecorder.dispatchEvent);\n\n        nativeMediaRecorder.removeEventListener = ((removeEventListener) => {\n            return (\n                type: string,\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\n                options?: boolean | EventListenerOptions\n            ) => {\n                let patchedEventListener = listener;\n\n                if (typeof listener === 'function') {\n                    if (type === 'dataavailable') {\n                        const dataAvailableListener = dataAvailableListeners.get(listener);\n\n                        if (dataAvailableListener !== undefined) {\n                            patchedEventListener = dataAvailableListener;\n                        }\n                    } else if (type === 'error') {\n                        const errorListener = errorListeners.get(listener);\n\n                        if (errorListener !== undefined) {\n                            patchedEventListener = errorListener;\n                        }\n                    } else if (type === 'stop') {\n                        const stopListener = stopListeners.get(listener);\n\n                        if (stopListener !== undefined) {\n                            patchedEventListener = stopListener;\n                        }\n                    }\n                }\n\n                return removeEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\n            };\n        })(nativeMediaRecorder.removeEventListener);\n\n        nativeMediaRecorder.start = ((start) => {\n            return (timeslice?: number) => {\n                /*\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\n                 * codec.\n                 */\n                if (\n                    mediaRecorderOptions.mimeType !== undefined &&\n                    mediaRecorderOptions.mimeType.startsWith('audio/') &&\n                    stream.getVideoTracks().length > 0\n                ) {\n                    throw createNotSupportedError();\n                }\n\n                isActive = timeslice !== undefined;\n\n                return timeslice === undefined ? start.call(nativeMediaRecorder) : start.call(nativeMediaRecorder, timeslice);\n            };\n        })(nativeMediaRecorder.start);\n\n        return nativeMediaRecorder;\n    };\n};\n", "import { TNativeMediaRecorderConstructorFactory } from '../types';\n\nexport const createNativeMediaRecorderConstructor: TNativeMediaRecorderConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    return window.MediaRecorder === undefined ? null : window.MediaRecorder;\n};\n", "import { TNotSupportedErrorFactory } from '../types';\n\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => {\n    try {\n        return new DOMException('', 'NotSupportedError');\n    } catch (err) {\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\n        err.code = 9;\n        err.name = 'NotSupportedError';\n\n        return err;\n    }\n};\n", "import { TReadElementContentFactory } from '../types';\n\nexport const createReadElementContent: TReadElementContentFactory = (readVariableSizeInteger) => {\n    return (dataView, offset, type, channelCount = 2) => {\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\n\n        if (lengthAndValue === null) {\n            return lengthAndValue;\n        }\n\n        const { length, value } = lengthAndValue;\n\n        if (type === 'master') {\n            return { content: null, length };\n        }\n\n        if (offset + length + value > dataView.byteLength) {\n            return null;\n        }\n\n        if (type === 'binary') {\n            const numberOfSamples = (value / Float32Array.BYTES_PER_ELEMENT - 1) / channelCount;\n            const content = Array.from({ length: channelCount }, () => new Float32Array(numberOfSamples));\n\n            for (let i = 0; i < numberOfSamples; i += 1) {\n                const elementOffset = i * channelCount + 1;\n\n                for (let j = 0; j < channelCount; j += 1) {\n                    content[j][i] = dataView.getFloat32(offset + length + (elementOffset + j) * Float32Array.BYTES_PER_ELEMENT, true);\n                }\n            }\n\n            return { content, length: length + value };\n        }\n\n        return { content: null, length: length + value };\n    };\n};\n", "import { TReadElementTypeFactory } from '../types';\n\nexport const createReadElementType: TReadElementTypeFactory = (readVariableSizeInteger) => {\n    return (dataView, offset) => {\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\n\n        if (lengthAndValue === null) {\n            return lengthAndValue;\n        }\n\n        const { length, value } = lengthAndValue;\n\n        if (value === 35) {\n            return { length, type: 'binary' };\n        }\n\n        if (\n            value === 46 ||\n            value === 97 ||\n            value === 88713574 ||\n            value === 106212971 ||\n            value === 139690087 ||\n            value === 172351395 ||\n            value === 256095861\n        ) {\n            return { length, type: 'master' };\n        }\n\n        return { length, type: 'unknown' };\n    };\n};\n", "import { TReadVariableSizeIntegerFactory } from '../types';\n\nexport const createReadVariableSizeInteger: TReadVariableSizeIntegerFactory = (readVariableSizeIntegerLength) => {\n    return (dataView, offset) => {\n        const length = readVariableSizeIntegerLength(dataView, offset);\n\n        if (length === null) {\n            return length;\n        }\n\n        const firstDataByteOffset = offset + Math.floor((length - 1) / 8);\n\n        if (firstDataByteOffset + length > dataView.byteLength) {\n            return null;\n        }\n\n        const firstDataByte = dataView.getUint8(firstDataByteOffset);\n\n        let value = firstDataByte & ((1 << (8 - (length % 8))) - 1); // tslint:disable-line:no-bitwise\n\n        for (let i = 1; i < length; i += 1) {\n            value = (value << 8) + dataView.getUint8(firstDataByteOffset + i); // tslint:disable-line:no-bitwise\n        }\n\n        return { length, value };\n    };\n};\n", "import { TAddUniqueNumberFactory } from '../types';\n\nexport const createAddUniqueNumber: TAddUniqueNumberFactory = (generateUniqueNumber) => {\n    return (set) => {\n        const number = generateUniqueNumber(set);\n\n        set.add(number);\n\n        return number;\n    };\n};\n", "import { TCacheFactory } from '../types';\n\nexport const createCache: TCacheFactory = (lastNumberWeakMap) => {\n    return (collection, nextNumber) => {\n        lastNumberWeakMap.set(collection, nextNumber);\n\n        return nextNumber;\n    };\n};\n", "import { TGenerateUniqueNumberFactory } from '../types';\n\n/*\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n * is fairly new.\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\n\nexport const createGenerateUniqueNumber: TGenerateUniqueNumberFactory = (cache, lastNumberWeakMap) => {\n    return (collection) => {\n        const lastNumber = lastNumberWeakMap.get(collection);\n\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n\n        if (!collection.has(nextNumber)) {\n            return cache(collection, nextNumber);\n        }\n\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n            while (collection.has(nextNumber)) {\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n            }\n\n            return cache(collection, nextNumber);\n        }\n\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n\n        return cache(collection, nextNumber);\n    };\n};\n", "export {};\n//# sourceMappingURL=add-unique-number-factory.js.map", "export {};\n//# sourceMappingURL=add-unique-number-function.js.map", "export {};\n//# sourceMappingURL=cache-factory.js.map", "export {};\n//# sourceMappingURL=cache-function.js.map", "export {};\n//# sourceMappingURL=generate-unique-number-factory.js.map", "export {};\n//# sourceMappingURL=generate-unique-number-function.js.map", "export * from './add-unique-number-factory';\nexport * from './add-unique-number-function';\nexport * from './cache-factory';\nexport * from './cache-function';\nexport * from './generate-unique-number-factory';\nexport * from './generate-unique-number-function';\n", "import { createAddUniqueNumber } from './factories/add-unique-number';\nimport { createCache } from './factories/cache';\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './types/index';\n\nconst LAST_NUMBER_WEAK_MAP = new WeakMap<Map<number, any> | Set<number>, number>();\n\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\n\nexport { addUniqueNumber, generateUniqueNumber };\n", "/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\ndeclare global {\n  interface SymbolConstructor {\n    readonly observable: symbol;\n  }\n}\n\nexport const observable = Symbol.observable || \"@@observable\";\n", "/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\nimport { observable } from \"./symbols\";\nimport { InteropObservable } from \"./types\";\n\nexport function patch<T extends InteropObservable<any>>(instance: T): T;\nexport function patch<T extends new (...args: any[]) => InteropObservable<any>>(\n  constructor: T\n): T;\nexport function patch(\n  arg: InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>)\n): InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>) {\n  if (!Symbol.observable) {\n    if (\n      typeof arg === \"function\" &&\n      arg.prototype &&\n      arg.prototype[Symbol.observable]\n    ) {\n      (arg.prototype as any)[observable] = arg.prototype[Symbol.observable];\n      delete arg.prototype[Symbol.observable];\n    } else {\n      (arg as any)[observable] = arg[Symbol.observable];\n      delete arg[Symbol.observable];\n    }\n  }\n  return arg;\n}\n", "/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\nimport { Observer, PartialObserver } from \"./types\";\n\nconst noop = () => {};\nconst rethrow = (error: unknown) => {\n  /* eslint-disable-next-line etc/throw-error */\n  throw error;\n};\n\nexport function toObserver<T>(observer?: PartialObserver<T>): Observer<T> {\n  if (observer) {\n    if (observer.next && observer.error && observer.complete) {\n      return observer as Observer<T>;\n    }\n    return {\n      complete: (observer.complete ?? noop).bind(observer),\n      error: (observer.error ?? rethrow).bind(observer),\n      next: (observer.next ?? noop).bind(observer),\n    };\n  }\n  return {\n    complete: noop,\n    error: rethrow,\n    next: noop,\n  };\n}\n", "export {};\r\n//# sourceMappingURL=types.js.map", "/**\n * @license Use of this source code is governed by an MIT-style license that\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\n */\n\nexport * from \"./patch\";\nexport * from \"./symbols\";\nexport * from \"./to-observer\";\nexport * from \"./types\";\n", "import { TAnimationFrameFactory } from '../types';\n\nexport const createAnimationFrame: TAnimationFrameFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.cancelAnimationFrame === undefined || window.requestAnimationFrame === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            let animationFrameHandle = window.requestAnimationFrame(function animationFrameCallback(timestamp): void {\n                animationFrameHandle = window.requestAnimationFrame(animationFrameCallback);\n\n                observer.next(timestamp);\n            });\n\n            return () => window.cancelAnimationFrame(animationFrameHandle);\n        });\n};\n", "import { TSubscribableThing } from '../types';\nimport type { createMapSubscribableThing } from './map-subscribable-thing';\nimport type { createMutations } from './mutations';\nimport type { createPrependSubscribableThing } from './prepend-subscribable-thing';\n\nexport const createAttribute = (\n    mapSubscribableThing: ReturnType<typeof createMapSubscribableThing>,\n    mutations: ReturnType<typeof createMutations>,\n    prependSubscribableThing: ReturnType<typeof createPrependSubscribableThing>\n) => {\n    return (htmlElement: HTMLElement, name: string): TSubscribableThing<null | string> => {\n        const getAttribute = () => htmlElement.getAttribute(name);\n\n        return prependSubscribableThing(\n            mapSubscribableThing(\n                mutations(htmlElement, {\n                    attributeFilter: [name],\n                    childList: false,\n                    subtree: false\n                }),\n                () => getAttribute()\n            ),\n            getAttribute()\n        );\n    };\n};\n", "import { TEmitNotSupportedErrorFunction, TSubscribableThing, TWindow, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createGeolocation = (\n    emitNotSupportedError: TEmitNotSupportedErrorFunction,\n    window: null | TWindow,\n    wrapSubscribeFunction: TWrapSubscribeFunctionFunction\n) => {\n    return (options?: PositionOptions): TSubscribableThing<GeolocationPosition> =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.geolocation === undefined ||\n                window.navigator.geolocation.clearWatch === undefined ||\n                window.navigator.geolocation.watchPosition === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            const watchId = window.navigator.geolocation.watchPosition(\n                (position) => observer.next(position),\n                (err) => observer.error(err),\n                options\n            );\n\n            return () => window.navigator.geolocation.clearWatch(watchId);\n        });\n};\n", "import { TIntersectionsFactory } from '../types';\n\nexport const createIntersections: TIntersectionsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (htmlElement, options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.IntersectionObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const intersectionObserverObserver = new window.IntersectionObserver((entries) => observer.next(entries), options);\n\n            try {\n                intersectionObserverObserver.observe(htmlElement);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => intersectionObserverObserver.disconnect();\n        });\n};\n", "import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createMapSubscribableThing =\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\n    <TValue, TMappedValue>(\n        subscribableThing: TSubscribableThing<TValue>,\n        map: (value: TValue) => TMappedValue\n    ): TSubscribableThing<TMappedValue> =>\n        wrapSubscribeFunction((observer) => subscribableThing({ ...observer, next: (value) => observer.next(map(value)) }));\n", "import { TMediaDevicesFactory } from '../types';\n\nexport const createMediaDevices: TMediaDevicesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.mediaDevices === undefined ||\n                window.navigator.mediaDevices.enumerateDevices === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            let isActive = true;\n\n            const enumerateDevices = () => {\n                window.navigator.mediaDevices.enumerateDevices().then(\n                    (mediaDevices) => {\n                        if (isActive) {\n                            observer.next(mediaDevices);\n                        }\n                    },\n                    (err) => {\n                        if (isActive) {\n                            unsubscribe();\n\n                            observer.error(err);\n                        }\n                    }\n                );\n            };\n            const unsubscribe = () => {\n                isActive = false;\n                window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\n            };\n\n            enumerateDevices();\n            window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\n\n            return unsubscribe;\n        });\n};\n", "import { TMediaQueryMatchFactory } from '../types';\n\nexport const createMediaQueryMatch: TMediaQueryMatchFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (mediaQueryString) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.matchMedia === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const mediaQueryList = window.matchMedia(mediaQueryString);\n\n            observer.next(mediaQueryList.matches);\n\n            mediaQueryList.onchange = () => observer.next(mediaQueryList.matches);\n\n            return () => {\n                mediaQueryList.onchange = null;\n            };\n        });\n};\n", "import { TMetricsFactory } from '../types';\n\nexport const createMetrics: TMetricsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.PerformanceObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const performanceObserver = new window.PerformanceObserver((entryList) => observer.next(entryList.getEntries()));\n\n            try {\n                performanceObserver.observe(options);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => performanceObserver.disconnect();\n        });\n};\n", "import { TMidiInputsFactory } from '../types';\n\nexport const createMidiInputs: TMidiInputsFactory = (wrapSubscribeFunction) => {\n    return (midiAccess) =>\n        wrapSubscribeFunction((observer) => {\n            let midiInputs = Array.from(midiAccess.inputs.values());\n\n            const emitMidiInputs = () => {\n                const midiAccessInputs = midiAccess.inputs;\n\n                if (midiInputs.length !== midiAccessInputs.size || midiInputs.some(({ id }) => !midiAccessInputs.has(id))) {\n                    midiInputs = Array.from(midiAccessInputs.values());\n\n                    observer.next(midiInputs);\n                }\n            };\n\n            observer.next(midiInputs);\n            midiAccess.addEventListener('statechange', emitMidiInputs);\n\n            return () => midiAccess.removeEventListener('statechange', emitMidiInputs);\n        });\n};\n", "import { TMidiOutputsFactory } from '../types';\n\nexport const createMidiOutputs: TMidiOutputsFactory = (wrapSubscribeFunction) => {\n    return (midiAccess) =>\n        wrapSubscribeFunction((observer) => {\n            let midiOutputs = Array.from(midiAccess.outputs.values());\n\n            const emitMidiOutputs = () => {\n                const midiAccessOutputs = midiAccess.outputs;\n\n                if (midiOutputs.length !== midiAccessOutputs.size || midiOutputs.some(({ id }) => !midiAccessOutputs.has(id))) {\n                    midiOutputs = Array.from(midiAccessOutputs.values());\n\n                    observer.next(midiOutputs);\n                }\n            };\n\n            observer.next(midiOutputs);\n            midiAccess.addEventListener('statechange', emitMidiOutputs);\n\n            return () => midiAccess.removeEventListener('statechange', emitMidiOutputs);\n        });\n};\n", "import { TMutationsFactory } from '../types';\n\nexport const createMutations: TMutationsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (htmlElement, options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.MutationObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const mutationObserver = new window.MutationObserver((records) => observer.next(records));\n\n            try {\n                mutationObserver.observe(htmlElement, options);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => mutationObserver.disconnect();\n        });\n};\n", "import { TEventHandler, TEventType, TOnFactory } from '../types';\n\nexport const createOn: TOnFactory = (wrapSubscribeFunction) => {\n    return (target, type, options) =>\n        wrapSubscribeFunction((observer) => {\n            const listener: TEventHandler<typeof target> = (event) => observer.next(<TEventType<typeof target, typeof type>>event);\n\n            target.addEventListener(type, listener, options);\n\n            return () => target.removeEventListener(type, listener, options);\n        });\n};\n", "import { TOnlineFactory } from '../types';\n\nexport const createOnline: TOnlineFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return () =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.navigator === undefined || window.navigator.onLine === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const emitFalse = () => observer.next(false);\n            const emitTrue = () => observer.next(true);\n\n            window.addEventListener('offline', emitFalse);\n            window.addEventListener('online', emitTrue);\n\n            observer.next(window.navigator.onLine);\n\n            return () => {\n                window.removeEventListener('offline', emitFalse);\n                window.removeEventListener('online', emitTrue);\n            };\n        });\n};\n", "import { TPermissionStateFactory } from '../types';\n\nexport const createPermissionState: TPermissionStateFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (permissionDescriptor) =>\n        wrapSubscribeFunction((observer) => {\n            if (\n                window === null ||\n                window.navigator === undefined ||\n                window.navigator.permissions === undefined ||\n                window.navigator.permissions.query === undefined\n            ) {\n                return emitNotSupportedError(observer);\n            }\n\n            let isActive = true;\n            let unsubscribe = () => {\n                isActive = false;\n            };\n\n            window.navigator.permissions.query(permissionDescriptor).then(\n                (permissionStatus) => {\n                    if (isActive) {\n                        observer.next(permissionStatus.state);\n                    }\n\n                    if (isActive) {\n                        permissionStatus.onchange = () => observer.next(permissionStatus.state);\n\n                        unsubscribe = () => {\n                            permissionStatus.onchange = null;\n                        };\n                    }\n                },\n                (err) => {\n                    if (isActive) {\n                        observer.error(err);\n                    }\n                }\n            );\n\n            return () => unsubscribe();\n        });\n};\n", "import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\n\nexport const createPrependSubscribableThing =\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\n    <TValue, TPrependedValue>(\n        subscribableThing: TSubscribableThing<TValue>,\n        prependedValue: TPrependedValue\n    ): TSubscribableThing<TPrependedValue | TValue> =>\n        wrapSubscribeFunction((observer) => {\n            observer.next(prependedValue);\n\n            return subscribableThing(observer);\n        });\n", "import { TReportsFactory } from '../types';\n\nexport const createReports: TReportsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.ReportingObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const reportingObserver = new window.ReportingObserver((reportList) => observer.next(reportList), options);\n\n            reportingObserver.observe();\n\n            return () => reportingObserver.disconnect();\n        });\n};\n", "import { IResizeObserverEntry } from '../interfaces';\nimport { TResizesFactory } from '../types';\n\nexport const createResizes: TResizesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (htmlElement, options) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.ResizeObserver === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const resizeObserver = new window.ResizeObserver((entries) => observer.next(<IResizeObserverEntry[]>entries));\n\n            try {\n                resizeObserver.observe(htmlElement, options);\n            } catch (err) {\n                observer.error(err);\n            }\n\n            return () => resizeObserver.disconnect();\n        });\n};\n", "import { TUnhandledRejectionFactory } from '../types';\n\nexport const createUnhandledRejection: TUnhandledRejectionFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (coolingOffPeriod) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.clearInterval === undefined || window.setInterval === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const possiblyUnhandledRejections = new Map<Promise<any>, { reason: any; timestamp: number }>();\n\n            let intervalId: null | number = null;\n\n            const deletePossiblyUnhandledRejection = ({ promise }: PromiseRejectionEvent) => possiblyUnhandledRejections.delete(promise);\n            const emitUnhandledRejection = () => {\n                const latestTimestampToEmit = Date.now() - coolingOffPeriod;\n\n                possiblyUnhandledRejections.forEach(({ reason, timestamp }, promise) => {\n                    if (timestamp > latestTimestampToEmit) {\n                        return;\n                    }\n\n                    possiblyUnhandledRejections.delete(promise);\n                    observer.next(reason);\n                });\n\n                if (intervalId !== null && possiblyUnhandledRejections.size === 0) {\n                    window.clearInterval(intervalId);\n                    intervalId = null;\n                }\n            };\n            const registerPossiblyUnhandledRejection = (event: PromiseRejectionEvent) => {\n                event.preventDefault();\n\n                possiblyUnhandledRejections.set(event.promise, {\n                    reason: event.reason,\n                    timestamp: Date.now()\n                });\n\n                if (intervalId === null) {\n                    intervalId = window.setInterval(emitUnhandledRejection, coolingOffPeriod / 2);\n                }\n            };\n\n            window.addEventListener('rejectionhandled', deletePossiblyUnhandledRejection);\n            window.addEventListener('unhandledrejection', registerPossiblyUnhandledRejection);\n\n            return () => {\n                if (intervalId !== null) {\n                    window.clearInterval(intervalId);\n                }\n\n                window.removeEventListener('rejectionhandled', deletePossiblyUnhandledRejection);\n                window.removeEventListener('unhandledrejection', registerPossiblyUnhandledRejection);\n            };\n        });\n};\n", "import { TVideoFrameFactory } from '../types';\n\nexport const createVideoFrame: TVideoFrameFactory = (emitNotSupportedError, wrapSubscribeFunction) => {\n    return (videoElement) =>\n        wrapSubscribeFunction((observer) => {\n            if (videoElement.cancelVideoFrameCallback === undefined || videoElement.requestVideoFrameCallback === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            let videoFrameHandle = videoElement.requestVideoFrameCallback(function videoFrameCallback(now, metadata): void {\n                videoFrameHandle = videoElement.requestVideoFrameCallback(videoFrameCallback);\n\n                observer.next({ ...metadata, now });\n            });\n\n            return () => videoElement.cancelVideoFrameCallback(videoFrameHandle);\n        });\n};\n", "import { IWakeLockSentinel } from '../interfaces';\nimport { TWakeLockFactory } from '../types';\n\nexport const createWakeLock: TWakeLockFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\n    return (type) =>\n        wrapSubscribeFunction((observer) => {\n            if (window === null || window.navigator === undefined || window.navigator.wakeLock === undefined) {\n                return emitNotSupportedError(observer);\n            }\n\n            const releaseWakeLock = (wakeLockSentinel: IWakeLockSentinel) =>\n                wakeLockSentinel.release().catch(() => {\n                    // Ignore errors.\n                });\n            const removeReleaseEventListener = (wakeLockSentinel: IWakeLockSentinel) => {\n                wakeLockSentinel.onrelease = null;\n            };\n\n            let isActive = true;\n\n            const unsubscribeWhileRequesting = () => {\n                isActive = false;\n            };\n\n            let unsubscribe = unsubscribeWhileRequesting;\n\n            const requestWakeLock = () =>\n                window.navigator.wakeLock.request(type).then(\n                    (wakeLockSentinel) => {\n                        if (isActive) {\n                            observer.next(true);\n                        }\n\n                        if (isActive) {\n                            wakeLockSentinel.onrelease = () => {\n                                observer.next(false);\n\n                                unsubscribe = unsubscribeWhileRequesting;\n\n                                removeReleaseEventListener(wakeLockSentinel);\n                                requestWakeLock();\n                            };\n\n                            unsubscribe = () => {\n                                removeReleaseEventListener(wakeLockSentinel);\n                                releaseWakeLock(wakeLockSentinel);\n                            };\n                        } else {\n                            releaseWakeLock(wakeLockSentinel);\n                        }\n                    },\n                    (err) => {\n                        if (isActive) {\n                            observer.error(err);\n                        }\n                    }\n                );\n\n            requestWakeLock();\n\n            return () => unsubscribe();\n        });\n};\n", "import { TWindow, TWindowFactory } from '../types';\n\n// @todo TypeScript does not include type definitions for the Reporting API yet.\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n", "import { Observer, Subscribable } from 'rxjs-interop';\nimport { TObserverParameters, TSubscribableThing, TSubscribeFunction, TWrapSubscribeFunctionFactory } from '../types';\n\nexport const createWrapSubscribeFunction: TWrapSubscribeFunctionFactory = (patch, toObserver) => {\n    const emptyFunction = () => {}; // tslint:disable-line:no-empty\n    const isNextFunction = <T>(args: TObserverParameters<T>): args is [Observer<T>['next']] => typeof args[0] === 'function';\n\n    return <T>(innerSubscribe: TSubscribeFunction<T>) => {\n        const subscribe = <TSubscribableThing<T>>((...args: TObserverParameters<T>) => {\n            const unsubscribe = innerSubscribe(isNextFunction(args) ? toObserver({ next: args[0] }) : toObserver(...args));\n\n            if (unsubscribe !== undefined) {\n                return unsubscribe;\n            }\n\n            return emptyFunction;\n        });\n\n        subscribe[Symbol.observable] = () => ({\n            subscribe: (...args: Parameters<Subscribable<T>['subscribe']>) => ({ unsubscribe: subscribe(...args) })\n        });\n\n        return patch(subscribe);\n    };\n};\n", "import { TEmitNotSupportedErrorFunction } from '../types';\n\nexport const emitNotSupportedError: TEmitNotSupportedErrorFunction = (observer) => {\n    observer.error(new Error('The required browser API seems to be not supported.'));\n\n    return () => {}; // tslint:disable-line:no-empty\n};\n", "export {};\n//# sourceMappingURL=html-video-element.js.map", "export {};\n//# sourceMappingURL=midi-access.js.map", "export {};\n//# sourceMappingURL=midi-connection-event.js.map", "export {};\n//# sourceMappingURL=midi-input.js.map", "export {};\n//# sourceMappingURL=midi-input-event-map.js.map", "export {};\n//# sourceMappingURL=midi-message-event.js.map", "export {};\n//# sourceMappingURL=midi-output.js.map", "export {};\n//# sourceMappingURL=midi-output-event-map.js.map", "export {};\n//# sourceMappingURL=midi-port.js.map", "export {};\n//# sourceMappingURL=report.js.map", "export {};\n//# sourceMappingURL=report-body.js.map", "export {};\n//# sourceMappingURL=reporting-observer.js.map", "export {};\n//# sourceMappingURL=reporting-observer-options.js.map", "export {};\n//# sourceMappingURL=resize-observer.js.map", "export {};\n//# sourceMappingURL=resize-observer-entry.js.map", "export {};\n//# sourceMappingURL=resize-observer-options.js.map", "export {};\n//# sourceMappingURL=resize-observer-size.js.map", "export {};\n//# sourceMappingURL=video-frame-metadata.js.map", "export {};\n//# sourceMappingURL=wake-lock.js.map", "export {};\n//# sourceMappingURL=wake-lock-sentinel.js.map", "export {};\n//# sourceMappingURL=wake-lock-sentinel-event-map.js.map", "export * from './html-video-element';\nexport * from './midi-access';\nexport * from './midi-connection-event';\nexport * from './midi-input';\nexport * from './midi-input-event-map';\nexport * from './midi-message-event';\nexport * from './midi-output';\nexport * from './midi-output-event-map';\nexport * from './midi-port';\nexport * from './report';\nexport * from './report-body';\nexport * from './reporting-observer';\nexport * from './reporting-observer-options';\nexport * from './resize-observer';\nexport * from './resize-observer-entry';\nexport * from './resize-observer-options';\nexport * from './resize-observer-size';\nexport * from './video-frame-metadata';\nexport * from './wake-lock';\nexport * from './wake-lock-sentinel';\nexport * from './wake-lock-sentinel-event-map';\n", "export {};\n//# sourceMappingURL=animation-frame-factory.js.map", "export {};\n//# sourceMappingURL=animation-frame-function.js.map", "export {};\n//# sourceMappingURL=emit-not-supported-error-function.js.map", "export {};\n//# sourceMappingURL=event-handler.js.map", "export {};\n//# sourceMappingURL=event-target-with-property-handler.js.map", "export {};\n//# sourceMappingURL=event-type.js.map", "export {};\n//# sourceMappingURL=flexible-subscribe-function.js.map", "export {};\n//# sourceMappingURL=intersections-factory.js.map", "export {};\n//# sourceMappingURL=intersections-function.js.map", "export {};\n//# sourceMappingURL=media-devices-factory.js.map", "export {};\n//# sourceMappingURL=media-devices-function.js.map", "export {};\n//# sourceMappingURL=media-query-match-factory.js.map", "export {};\n//# sourceMappingURL=media-query-match-function.js.map", "export {};\n//# sourceMappingURL=metrics-factory.js.map", "export {};\n//# sourceMappingURL=metrics-function.js.map", "export {};\n//# sourceMappingURL=midi-connection-event-handler.js.map", "export {};\n//# sourceMappingURL=midi-inputs-factory.js.map", "export {};\n//# sourceMappingURL=midi-inputs-function.js.map", "export {};\n//# sourceMappingURL=midi-message-event-handler.js.map", "export {};\n//# sourceMappingURL=midi-outputs-factory.js.map", "export {};\n//# sourceMappingURL=midi-outputs-function.js.map", "export {};\n//# sourceMappingURL=midi-port-connection-state.js.map", "export {};\n//# sourceMappingURL=midi-port-device-state.js.map", "export {};\n//# sourceMappingURL=midi-port-type.js.map", "export {};\n//# sourceMappingURL=mutations-factory.js.map", "export {};\n//# sourceMappingURL=mutations-function.js.map", "export {};\n//# sourceMappingURL=observer-parameters.js.map", "export {};\n//# sourceMappingURL=online-factory.js.map", "export {};\n//# sourceMappingURL=online-function.js.map", "export {};\n//# sourceMappingURL=on-factory.js.map", "export {};\n//# sourceMappingURL=on-function.js.map", "export {};\n//# sourceMappingURL=optional-unsubscribe-function.js.map", "export {};\n//# sourceMappingURL=permission-state-factory.js.map", "export {};\n//# sourceMappingURL=permission-state-function.js.map", "export {};\n//# sourceMappingURL=release-event-handler.js.map", "export {};\n//# sourceMappingURL=reports-factory.js.map", "export {};\n//# sourceMappingURL=reports-function.js.map", "export {};\n//# sourceMappingURL=resize-observer-box-options.js.map", "export {};\n//# sourceMappingURL=resizes-factory.js.map", "export {};\n//# sourceMappingURL=resizes-function.js.map", "export {};\n//# sourceMappingURL=subscribable-thing.js.map", "export {};\n//# sourceMappingURL=subscribe-function.js.map", "export {};\n//# sourceMappingURL=unhandled-rejection-factory.js.map", "export {};\n//# sourceMappingURL=unhandled-rejection-function.js.map", "export {};\n//# sourceMappingURL=unsubscribe-function.js.map", "export {};\n//# sourceMappingURL=video-frame-factory.js.map", "export {};\n//# sourceMappingURL=video-frame-function.js.map", "export {};\n//# sourceMappingURL=video-frame-request-callback.js.map", "export {};\n//# sourceMappingURL=wake-lock-factory.js.map", "export {};\n//# sourceMappingURL=wake-lock-function.js.map", "export {};\n//# sourceMappingURL=wake-lock-type.js.map", "export {};\n//# sourceMappingURL=window.js.map", "export {};\n//# sourceMappingURL=window-factory.js.map", "export {};\n//# sourceMappingURL=wrap-subscribe-function-factory.js.map", "export {};\n//# sourceMappingURL=wrap-subscribe-function-function.js.map", "export * from './animation-frame-factory';\nexport * from './animation-frame-function';\nexport * from './emit-not-supported-error-function';\nexport * from './event-handler';\nexport * from './event-target-with-property-handler';\nexport * from './event-type';\nexport * from './flexible-subscribe-function';\nexport * from './intersections-factory';\nexport * from './intersections-function';\nexport * from './media-devices-factory';\nexport * from './media-devices-function';\nexport * from './media-query-match-factory';\nexport * from './media-query-match-function';\nexport * from './metrics-factory';\nexport * from './metrics-function';\nexport * from './midi-connection-event-handler';\nexport * from './midi-inputs-factory';\nexport * from './midi-inputs-function';\nexport * from './midi-message-event-handler';\nexport * from './midi-outputs-factory';\nexport * from './midi-outputs-function';\nexport * from './midi-port-connection-state';\nexport * from './midi-port-device-state';\nexport * from './midi-port-type';\nexport * from './mutations-factory';\nexport * from './mutations-function';\nexport * from './observer-parameters';\nexport * from './online-factory';\nexport * from './online-function';\nexport * from './on-factory';\nexport * from './on-function';\nexport * from './optional-unsubscribe-function';\nexport * from './permission-state-factory';\nexport * from './permission-state-function';\nexport * from './release-event-handler';\nexport * from './reports-factory';\nexport * from './reports-function';\nexport * from './resize-observer-box-options';\nexport * from './resizes-factory';\nexport * from './resizes-function';\nexport * from './subscribable-thing';\nexport * from './subscribe-function';\nexport * from './unhandled-rejection-factory';\nexport * from './unhandled-rejection-function';\nexport * from './unsubscribe-function';\nexport * from './video-frame-factory';\nexport * from './video-frame-function';\nexport * from './video-frame-request-callback';\nexport * from './wake-lock-factory';\nexport * from './wake-lock-function';\nexport * from './wake-lock-type';\nexport * from './window';\nexport * from './window-factory';\nexport * from './wrap-subscribe-function-factory';\nexport * from './wrap-subscribe-function-function';\n", "import { patch, toObserver } from 'rxjs-interop';\nimport { createAnimationFrame } from './factories/animation-frame';\nimport { createAttribute } from './factories/attribute';\nimport { createGeolocation } from './factories/geolocation';\nimport { createIntersections } from './factories/intersections';\nimport { createMapSubscribableThing } from './factories/map-subscribable-thing';\nimport { createMediaDevices } from './factories/media-devices';\nimport { createMediaQueryMatch } from './factories/media-query-match';\nimport { createMetrics } from './factories/metrics';\nimport { createMidiInputs } from './factories/midi-inputs';\nimport { createMidiOutputs } from './factories/midi-outputs';\nimport { createMutations } from './factories/mutations';\nimport { createOn } from './factories/on';\nimport { createOnline } from './factories/online';\nimport { createPermissionState } from './factories/permission-state';\nimport { createPrependSubscribableThing } from './factories/prepend-subscribable-thing';\nimport { createReports } from './factories/reports';\nimport { createResizes } from './factories/resizes';\nimport { createUnhandledRejection } from './factories/unhandled-rejection';\nimport { createVideoFrame } from './factories/video-frame';\nimport { createWakeLock } from './factories/wake-lock';\nimport { createWindow } from './factories/window';\nimport { createWrapSubscribeFunction } from './factories/wrap-subscribe-function';\nimport { emitNotSupportedError } from './functions/emit-not-supported-error';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst window = createWindow();\nconst wrapSubscribeFunction = createWrapSubscribeFunction(patch, toObserver);\n\nexport const animationFrame = createAnimationFrame(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mutations = createMutations(emitNotSupportedError, window, wrapSubscribeFunction);\n\nconst mapSubscribableThing = createMapSubscribableThing(wrapSubscribeFunction);\nconst prependSubscribableThing = createPrependSubscribableThing(wrapSubscribeFunction);\n\nexport const attribute = createAttribute(mapSubscribableThing, mutations, prependSubscribableThing);\n\nexport const geolocation = createGeolocation(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const intersections = createIntersections(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mediaDevices = createMediaDevices(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const mediaQueryMatch = createMediaQueryMatch(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const metrics = createMetrics(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const midiInputs = createMidiInputs(wrapSubscribeFunction);\n\nexport const midiOutputs = createMidiOutputs(wrapSubscribeFunction);\n\nexport const on = createOn(wrapSubscribeFunction);\n\nexport const online = createOnline(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const permissionState = createPermissionState(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const reports = createReports(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const resizes = createResizes(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const unhandledRejection = createUnhandledRejection(emitNotSupportedError, window, wrapSubscribeFunction);\n\nexport const videoFrame = createVideoFrame(emitNotSupportedError, wrapSubscribeFunction);\n\nexport const wakeLock = createWakeLock(emitNotSupportedError, window, wrapSubscribeFunction);\n", "/*!\n * dashify <https://github.com/jonschlinkert/dashify>\n *\n * Copyright (c) 2015-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = (str, options) => {\n  if (typeof str !== 'string') throw new TypeError('expected a string');\n  return str.trim()\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\n    .replace(/\\W/g, m => /[-]/.test(m) ? m : '-')\n    .replace(/^-+|-+$/g, '')\n    .replace(/-{2,}/g, m => options && options.condense ? '-' : m)\n    .toLowerCase();\n};\n", "/*\n * indefinite-article.js v1.0.0, 12-18-2011\n *\n * @author: Rodrigo Neri (@rigoneri)\n *\n * (The MIT License)\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nvar indefiniteArticle = function(phrase) {\n    var i, word;\n\n    // Getting the first word\n    var match = /\\w+/.exec(phrase);\n    if (match)\n        word = match[0];\n    else\n        return \"an\";\n\n    var l_word = word.toLowerCase();\n    // Specific start of words that should be preceeded by 'an'\n    var alt_cases = [\"honest\", \"hour\", \"hono\"];\n    for (i in alt_cases) {\n        if (l_word.indexOf(alt_cases[i]) == 0)\n            return \"an\";\n    }\n\n    // Single letter word which should be preceeded by 'an'\n    if (l_word.length == 1) {\n        if (\"aedhilmnorsx\".indexOf(l_word) >= 0)\n            return \"an\";\n        else\n            return \"a\";\n    }\n\n    // Capital words which should likely be preceeded by 'an'\n    if (word.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/)) {\n        return \"an\";\n    }\n\n    // Special cases where a word that begins with a vowel should be preceeded by 'a'\n    var regexes = [/^e[uw]/, /^onc?e\\b/, /^uni([^nmd]|mo)/, /^u[bcfhjkqrst][aeiou]/];\n    for (i = 0; i < regexes.length; i++) {\n        if (l_word.match(regexes[i]))\n            return \"a\"\n    }\n\n    // Special capital words (UK, UN)\n    if (word.match(/^U[NK][AIEO]/)) {\n        return \"a\";\n    }\n    else if (word == word.toUpperCase()) {\n        if (\"aedhilmnorsx\".indexOf(l_word[0]) >= 0)\n            return \"an\";\n        else\n            return \"a\";\n    }\n\n    // Basic method of words that begin with a vowel being preceeded by 'an'\n    if (\"aeiou\".indexOf(l_word[0]) >= 0)\n        return \"an\";\n\n    // Instances where y follwed by specific letters is preceeded by 'an'\n    if (l_word.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/))\n        return \"an\";\n\n    return \"a\";\n};\n\nif ((typeof module !== 'undefined') && (typeof module.exports !== 'undefined')) {\n    module.exports = indefiniteArticle;\n} else {\n    window.indefiniteArticle = indefiniteArticle;\n}\n", "export {};\n//# sourceMappingURL=augmented-error.js.map", "export {};\n//# sourceMappingURL=aws-error.js.map", "export {};\n//# sourceMappingURL=error-template.js.map", "export {};\n//# sourceMappingURL=param-object.js.map", "export {};\n//# sourceMappingURL=variable.js.map", "export * from './augmented-error';\nexport * from './aws-error';\nexport * from './error-template';\nexport * from './param-object';\nexport * from './variable';\n", "export {};\n//# sourceMappingURL=render-function.js.map", "export * from './render-function';\n", "import dashify from 'dashify';\nimport indefiniteArticle from 'indefinite-article';\nimport { IAWSError, IAugmentedError, IErrorTemplate, IParameterObject, IVariable } from './interfaces';\nimport { TRenderFunction } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst applyModifiers = (name: string, modifiers: string[]) => {\n    if (modifiers === undefined) {\n        return name;\n    }\n\n    return modifiers.reduce((modifiedName, modifier) => {\n        if (modifier === 'capitalize') {\n            const head = modifiedName.charAt(0).toUpperCase();\n            const tail = modifiedName.slice(1);\n\n            return `${head}${tail}`;\n        }\n\n        if (modifier === 'dashify') {\n            return dashify(modifiedName);\n        }\n\n        if (modifier === 'prependIndefiniteArticle') {\n            return `${indefiniteArticle(modifiedName)} ${modifiedName}`;\n        }\n\n        return modifiedName;\n    }, name);\n};\n\nconst buildRegex = (variable: IVariable) => {\n    const expression = variable.name + variable.modifiers.map((modifier) => `\\\\.${modifier}\\\\(\\\\)`).join('');\n\n    return new RegExp(`\\\\$\\\\{${expression}}`, 'g');\n};\n\nconst preRenderString = (string: string, parameters: IParameterObject) => {\n    const expressionRegex = /\\${([^.}]+)((\\.[^(]+\\(\\))*)}/g;\n\n    const variables: IVariable[] = [];\n\n    let expressionResult = expressionRegex.exec(string);\n\n    while (expressionResult !== null) {\n        const variable: IVariable = {\n            modifiers: [],\n            name: expressionResult[1]\n        };\n\n        if (expressionResult[3] !== undefined) {\n            const modifiersRegex = /\\.[^(]+\\(\\)/g;\n\n            let modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\n\n            while (modifiersRegexResult !== null) {\n                variable.modifiers.push(modifiersRegexResult[0].slice(1, -2));\n\n                modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\n            }\n        }\n\n        variables.push(variable);\n\n        expressionResult = expressionRegex.exec(string);\n    }\n\n    const preRenderedParts = variables.reduce(\n        (parts: (string | TRenderFunction)[], variable: IVariable) =>\n            parts\n                .map((part) => {\n                    if (typeof part === 'string') {\n                        return part.split(buildRegex(variable)).reduce((prts: (string | TRenderFunction)[], prt: string, index: number) => {\n                            if (index === 0) {\n                                return [prt];\n                            }\n\n                            if (variable.name in parameters) {\n                                return [...prts, applyModifiers(parameters[variable.name], variable.modifiers), prt];\n                            }\n\n                            return [...prts, (prmtrs: IParameterObject) => applyModifiers(prmtrs[variable.name], variable.modifiers), prt];\n                        }, []);\n                    }\n\n                    return [part];\n                })\n                .reduce((prts: (string | TRenderFunction)[], part: (string | TRenderFunction)[]) => [...prts, ...part], []),\n        [string]\n    );\n\n    return (missingParameters: IParameterObject) =>\n        preRenderedParts\n            .reduce((renderedParts: string[], preRenderedPart: string | TRenderFunction) => {\n                if (typeof preRenderedPart === 'string') {\n                    return [...renderedParts, preRenderedPart];\n                }\n\n                return [...renderedParts, preRenderedPart(missingParameters)];\n            }, [])\n            .join('');\n};\n\nexport const compile = (template: IErrorTemplate, knownParameters: IParameterObject = {}) => {\n    const renderCode = template.code === undefined ? undefined : preRenderString(template.code, knownParameters);\n    const renderMessage = template.message === undefined ? undefined : preRenderString(template.message, knownParameters);\n\n    function render(missingParameters: IParameterObject, cause?: Error | IAWSError): IAugmentedError;\n    function render(cause: Error | IAWSError): IAugmentedError;\n    function render(\n        causeOrMissingParameters: Error | IAWSError | IParameterObject = {},\n        optionalCause?: Error | IAWSError\n    ): IAugmentedError {\n        const hasNoOptionalCause =\n            optionalCause === undefined &&\n            (causeOrMissingParameters instanceof Error ||\n                ((<IAWSError>causeOrMissingParameters).code !== undefined &&\n                    (<IAWSError>causeOrMissingParameters).code.slice(-9) === 'Exception'));\n        const { cause, missingParameters } = hasNoOptionalCause\n            ? {\n                  cause: <Error | IAWSError>causeOrMissingParameters,\n                  missingParameters: {}\n              }\n            : {\n                  cause: <Error | IAWSError>optionalCause,\n                  missingParameters: <IParameterObject>causeOrMissingParameters\n              };\n\n        const err: IAugmentedError = <IAugmentedError>(\n            (renderMessage === undefined ? new Error() : new Error(renderMessage(<IParameterObject>missingParameters)))\n        );\n\n        if (cause !== null) {\n            err.cause = cause;\n        }\n\n        if (renderCode !== undefined) {\n            err.code = renderCode(missingParameters);\n        }\n\n        if (template.status !== undefined) {\n            err.status = template.status;\n        }\n\n        return err;\n    }\n\n    return render;\n};\n", "import { IAugmentedError, IParameterObject, compile } from 'compilerr';\n\nconst JSON_RPC_ERROR_CODES = { INTERNAL_ERROR: -32603, INVALID_PARAMS: -32602, METHOD_NOT_FOUND: -32601 };\n\nexport const renderMethodNotFoundError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The requested method called \"${method}\" is not supported.',\n    status: JSON_RPC_ERROR_CODES.METHOD_NOT_FOUND\n});\n\nexport const renderMissingResponseError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The handler of the method called \"${method}\" returned no required result.',\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\n});\n\nexport const renderUnexpectedResultError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The handler of the method called \"${method}\" returned an unexpected result.',\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\n});\n\nexport const renderUnknownPortIdError: (missingParameters: IParameterObject) => IAugmentedError = compile({\n    message: 'The specified parameter called \"portId\" with the given value \"${portId}\" does not identify a port connected to this worker.',\n    status: JSON_RPC_ERROR_CODES.INVALID_PARAMS\n});\n", "import { IAugmentedError } from 'compilerr';\nimport { IBrokerEvent, IErrorNotification, IErrorResponse, IReceiver, IRequest, IWorkerDefinition } from '../interfaces';\nimport { TMessageReceiverWithParams, TMessageReceiverWithoutParams, TWorkerImplementation } from '../types';\nimport { renderMethodNotFoundError, renderMissingResponseError, renderUnexpectedResultError } from './error-renderers';\n\nexport const createMessageHandler = <T extends IWorkerDefinition>(receiver: IReceiver, workerImplementation: TWorkerImplementation<T>) => {\n    return async ({ data: { id, method, params } }: IBrokerEvent<T>) => {\n        const messageHandler = workerImplementation[method];\n\n        try {\n            if (messageHandler === undefined) {\n                throw renderMethodNotFoundError({ method });\n            }\n\n            const response =\n                params === undefined\n                    ? (messageHandler as TMessageReceiverWithoutParams<T[typeof method]['response']>)()\n                    : (messageHandler as TMessageReceiverWithParams<T[typeof method]['params'], T[typeof method]['response']>)(params);\n\n            if (response === undefined) {\n                throw renderMissingResponseError({ method });\n            }\n\n            const synchronousResponse = response instanceof Promise ? await response : response;\n\n            if (id === null) {\n                if (synchronousResponse.result !== undefined) {\n                    throw renderUnexpectedResultError({ method });\n                }\n            } else {\n                if (synchronousResponse.result === undefined) {\n                    throw renderUnexpectedResultError({ method });\n                }\n\n                const { result, transferables = [] } = <IRequest['response']>synchronousResponse;\n\n                receiver.postMessage({ id, result }, transferables);\n            }\n        } catch (err) {\n            const { message, status = -32603 } = <IAugmentedError>err;\n\n            receiver.postMessage(<IErrorNotification | IErrorResponse>{ error: { code: status, message }, id });\n        }\n    };\n};\n", "// Bug #1: Safari does currently not support to use transferables.\n\nexport const isSupportingTransferables = () =>\n    new Promise<boolean>((resolve) => {\n        const arrayBuffer = new ArrayBuffer(0);\n        const { port1, port2 } = new MessageChannel();\n\n        port1.onmessage = ({ data }) => resolve(data !== null);\n        port2.postMessage(arrayBuffer, [arrayBuffer]);\n    });\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { IDefaultWorkerDefinition, IReceiver, IWorkerDefinition } from '../interfaces';\nimport { TDestroyWorkerFunction, TWorkerImplementation } from '../types';\nimport { renderUnknownPortIdError } from './error-renderers';\nimport { isSupportingTransferables } from './is-supporting-transferables';\n\nconst DESTROY_WORKER_FUNCTIONS: Map<number, TDestroyWorkerFunction> = new Map();\n\nexport const extendWorkerImplementation = <T extends IWorkerDefinition>(\n    createWorker: (receiver: IReceiver, workerImplementation: TWorkerImplementation<T>) => TDestroyWorkerFunction,\n    partialWorkerImplementation: TWorkerImplementation<T>,\n    isSupportedFunction: () => boolean | Promise<boolean>\n): TWorkerImplementation<T> & TWorkerImplementation<IDefaultWorkerDefinition> => ({\n    ...partialWorkerImplementation,\n    connect: ({ port }) => {\n        port.start();\n\n        const destroyWorker = createWorker(port, partialWorkerImplementation);\n        const portId = generateUniqueNumber(DESTROY_WORKER_FUNCTIONS);\n\n        DESTROY_WORKER_FUNCTIONS.set(portId, () => {\n            destroyWorker();\n            port.close();\n            DESTROY_WORKER_FUNCTIONS.delete(portId);\n        });\n\n        return { result: portId };\n    },\n    disconnect: ({ portId }) => {\n        const destroyWorker = DESTROY_WORKER_FUNCTIONS.get(portId);\n\n        if (destroyWorker === undefined) {\n            throw renderUnknownPortIdError({ portId: portId.toString() });\n        }\n\n        destroyWorker();\n\n        return { result: null };\n    },\n    isSupported: async () => {\n        const isSelfSupported = await isSupportingTransferables();\n\n        if (isSelfSupported) {\n            const result = isSupportedFunction();\n            const synchronousResult = result instanceof Promise ? await result : result;\n\n            return { result: synchronousResult };\n        }\n\n        return { result: false };\n    }\n});\n", "export {};\n//# sourceMappingURL=broker-event.js.map", "export {};\n//# sourceMappingURL=broker-message.js.map", "export {};\n//# sourceMappingURL=default-worker-definition.js.map", "export {};\n//# sourceMappingURL=error.js.map", "export {};\n//# sourceMappingURL=error-notification.js.map", "export {};\n//# sourceMappingURL=error-response.js.map", "export {};\n//# sourceMappingURL=notification.js.map", "export {};\n//# sourceMappingURL=receiver.js.map", "export {};\n//# sourceMappingURL=request.js.map", "export {};\n//# sourceMappingURL=value-array.js.map", "export {};\n//# sourceMappingURL=value-map.js.map", "export {};\n//# sourceMappingURL=worker-definition.js.map", "export {};\n//# sourceMappingURL=worker-error-message.js.map", "export {};\n//# sourceMappingURL=worker-result-message.js.map", "export * from './broker-event';\nexport * from './broker-message';\nexport * from './default-worker-definition';\nexport * from './error';\nexport * from './error-notification';\nexport * from './error-response';\nexport * from './notification';\nexport * from './receiver';\nexport * from './request';\nexport * from './value-array';\nexport * from './value-map';\nexport * from './worker-definition';\nexport * from './worker-error-message';\nexport * from './worker-result-message';\n", "export {};\n//# sourceMappingURL=destroy-worker-function.js.map", "export {};\n//# sourceMappingURL=message.js.map", "export {};\n//# sourceMappingURL=message-receiver.js.map", "export {};\n//# sourceMappingURL=message-receiver-with-params.js.map", "export {};\n//# sourceMappingURL=message-receiver-without-params.js.map", "export {};\n//# sourceMappingURL=typed-array.js.map", "export {};\n//# sourceMappingURL=value.js.map", "export {};\n//# sourceMappingURL=value-map.js.map", "export {};\n//# sourceMappingURL=worker-definition.js.map", "export {};\n//# sourceMappingURL=worker-implementation.js.map", "export {};\n//# sourceMappingURL=worker-message.js.map", "export * from './destroy-worker-function';\nexport * from './message';\nexport * from './message-receiver';\nexport * from './message-receiver-with-params';\nexport * from './message-receiver-without-params';\nexport * from './typed-array';\nexport * from './value';\nexport * from './value-map';\nexport * from './worker-definition';\nexport * from './worker-implementation';\nexport * from './worker-message';\n", "import { createMessageHandler } from './helpers/create-message-handler';\nimport { extendWorkerImplementation } from './helpers/extend-worker-implementation';\nimport { isSupportingTransferables } from './helpers/is-supporting-transferables';\nimport { IReceiver, IWorkerDefinition } from './interfaces';\nimport { TDestroyWorkerFunction, TWorkerImplementation } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const createWorker = <T extends IWorkerDefinition>(\n    receiver: IReceiver,\n    workerImplementation: TWorkerImplementation<T>,\n    isSupportedFunction: () => boolean | Promise<boolean> = () => true\n): TDestroyWorkerFunction => {\n    const fullWorkerImplementation = extendWorkerImplementation<T>(createWorker, workerImplementation, isSupportedFunction);\n    const messageHandler = createMessageHandler(receiver, fullWorkerImplementation);\n\n    receiver.addEventListener('message', messageHandler);\n\n    return () => receiver.removeEventListener('message', messageHandler);\n};\n\nexport { isSupportingTransferables as isSupported };\n", "export const createAddRecorderAudioWorkletModule = (blobConstructor: typeof Blob, urlConstructor: typeof URL, worklet: string) => {\n    return async (addAudioWorkletModule: (url: string) => Promise<void>) => {\n        const blob = new blobConstructor([worklet], { type: 'application/javascript; charset=utf-8' });\n        const url = urlConstructor.createObjectURL(blob);\n\n        try {\n            await addAudioWorkletModule(url);\n        } finally {\n            urlConstructor.revokeObjectURL(url);\n        }\n    };\n};\n", "import type { IWorkerEvent } from 'broker-factory';\nimport type { IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\n\nexport const createListener = (ongoingRequests: Map<number, { reject: Function; resolve: Function }>) => {\n    return ({ data: message }: IWorkerEvent) => {\n        const { id } = message;\n\n        if (id !== null) {\n            const ongoingRequest = ongoingRequests.get(id);\n\n            if (ongoingRequest !== undefined) {\n                const { reject, resolve } = ongoingRequest;\n\n                ongoingRequests.delete(id);\n\n                if ((<IWorkerErrorMessage>message).error === undefined) {\n                    resolve((<IWorkerResultMessage>message).result);\n                } else {\n                    reject(new Error((<IWorkerErrorMessage>message).error.message));\n                }\n            }\n        }\n    };\n};\n", "import type { generateUniqueNumber as generateUniqueNumberFunction } from 'fast-unique-numbers';\n\nexport const createPostMessageFactory = (generateUniqueNumber: typeof generateUniqueNumberFunction) => {\n    return (ongoingRequests: Map<number, { reject: Function; resolve: Function }>, port: MessagePort) => {\n        return (message: { method: string; params?: object }, transferables: Transferable[] = []): Promise<void> => {\n            return new Promise((resolve, reject) => {\n                const id = generateUniqueNumber(ongoingRequests);\n\n                ongoingRequests.set(id, { reject, resolve });\n\n                port.postMessage({ id, ...message }, transferables);\n            });\n        };\n    };\n};\n", "import type {\n    IAudioWorkletNode,\n    TAudioWorkletNodeConstructor,\n    TContext,\n    TNativeAudioWorkletNode,\n    TNativeAudioWorkletNodeConstructor,\n    TNativeContext\n} from 'standardized-audio-context';\nimport type { on as onFunction } from 'subscribable-things';\nimport type { validateState as validateStateFunction } from '../functions/validate-state';\nimport { INativeRecorderAudioWorkletNode, IRecorderAudioWorkletNode } from '../interfaces';\nimport { TAnyRecorderAudioWorkletNodeOptions, TState } from '../types';\nimport type { createListener as createListenerFunction } from './listener';\nimport type { createPostMessageFactory } from './post-message-factory';\n\nexport const createRecorderAudioWorkletNodeFactory = (\n    createListener: typeof createListenerFunction,\n    createPostMessage: ReturnType<typeof createPostMessageFactory>,\n    on: typeof onFunction,\n    validateState: typeof validateStateFunction\n) => {\n    return <T extends TContext | TNativeContext>(\n        audioWorkletNodeConstructor: T extends TContext ? TAudioWorkletNodeConstructor : TNativeAudioWorkletNodeConstructor,\n        context: T,\n        options: Partial<TAnyRecorderAudioWorkletNodeOptions<T>> = {}\n    ): T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode => {\n        type TAnyAudioWorkletNode = T extends TContext ? IAudioWorkletNode<T> : TNativeAudioWorkletNode;\n        type TAnyRecorderAudioWorkletNode = T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode;\n\n        const audioWorkletNode: TAnyAudioWorkletNode = new (<any>audioWorkletNodeConstructor)(context, 'recorder-audio-worklet-processor', {\n            ...options,\n            channelCountMode: 'explicit',\n            numberOfInputs: 1,\n            numberOfOutputs: 0\n        });\n        const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\n        const postMessage = createPostMessage(ongoingRequests, audioWorkletNode.port);\n        const unsubscribe = on(audioWorkletNode.port, 'message')(createListener(ongoingRequests));\n\n        audioWorkletNode.port.start();\n\n        let state: TState = 'inactive';\n\n        Object.defineProperties(audioWorkletNode, {\n            pause: {\n                get(): TAnyRecorderAudioWorkletNode['pause'] {\n                    return async () => {\n                        validateState(['recording'], state);\n\n                        state = 'paused';\n\n                        return postMessage({\n                            method: 'pause'\n                        });\n                    };\n                }\n            },\n            port: {\n                get(): TAnyRecorderAudioWorkletNode['port'] {\n                    throw new Error(\"The port of a RecorderAudioWorkletNode can't be accessed.\");\n                }\n            },\n            record: {\n                get(): TAnyRecorderAudioWorkletNode['record'] {\n                    return async (encoderPort: MessagePort) => {\n                        validateState(['inactive'], state);\n\n                        state = 'recording';\n\n                        return postMessage(\n                            {\n                                method: 'record',\n                                params: { encoderPort }\n                            },\n                            [encoderPort]\n                        );\n                    };\n                }\n            },\n            resume: {\n                get(): TAnyRecorderAudioWorkletNode['resume'] {\n                    return async () => {\n                        validateState(['paused'], state);\n\n                        state = 'recording';\n\n                        return postMessage({\n                            method: 'resume'\n                        });\n                    };\n                }\n            },\n            stop: {\n                get(): TAnyRecorderAudioWorkletNode['stop'] {\n                    return async () => {\n                        validateState(['paused', 'recording'], state);\n\n                        state = 'stopped';\n\n                        try {\n                            await postMessage({ method: 'stop' });\n                        } finally {\n                            unsubscribe();\n                        }\n                    };\n                }\n            }\n        });\n\n        return <TAnyRecorderAudioWorkletNode>audioWorkletNode;\n    };\n};\n", "import { TState } from '../types';\n\nexport const validateState = (expectedStates: TState[], currentState: TState): void => {\n    if (!expectedStates.includes(currentState)) {\n        throw new Error(\n            `Expected the state to be ${expectedStates\n                .map((expectedState) => `\"${expectedState}\"`)\n                .join(' or ')} but it was \"${currentState}\".`\n        );\n    }\n};\n", "// This is the minified and stringified code of the recorder-audio-worklet-processor package.\nexport const worklet = `(()=>{\"use strict\";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._state=\"inactive\",this.port.onmessage=e=>{let{data:t}=e;\"pause\"===t.method?\"active\"===this._state||\"recording\"===this._state?(this._state=\"paused\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"record\"===t.method?\"inactive\"===this._state?(this._encoderPort=t.params.encoderPort,this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"resume\"===t.method?\"paused\"===this._state?(this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"stop\"===t.method?\"active\"!==this._state&&\"paused\"!==this._state&&\"recording\"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):\"number\"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:\"The requested method is not supported.\"},id:t.id})}}process(e){let[t]=e;if(\"inactive\"===this._state||\"paused\"===this._state)return!0;if(\"active\"===this._state){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0===t.length)return!0;this._state=\"recording\"}if(\"recording\"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0!==t.length)return this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),!0;this._stop(this._encoderPort)}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:\"The internal state does not allow to process the given message.\"},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state=\"stopped\"}}e.parameterDescriptors=[],registerProcessor(\"recorder-audio-worklet-processor\",e)})();`; // tslint:disable-line:max-line-length\n", "export {};\n//# sourceMappingURL=native-recorder-audio-worklet-node.js.map", "export {};\n//# sourceMappingURL=recorder-audio-worklet-node.js.map", "export * from './native-recorder-audio-worklet-node';\nexport * from './recorder-audio-worklet-node';\n", "export {};\n//# sourceMappingURL=any-recorder-audio-worklet-node-options.js.map", "export {};\n//# sourceMappingURL=native-recorder-audio-worklet-node-options.js.map", "export {};\n//# sourceMappingURL=recorder-audio-worklet-node-options.js.map", "export {};\n//# sourceMappingURL=state.js.map", "export * from './any-recorder-audio-worklet-node-options';\nexport * from './native-recorder-audio-worklet-node-options';\nexport * from './recorder-audio-worklet-node-options';\nexport * from './state';\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { on } from 'subscribable-things';\nimport { isSupported } from 'worker-factory';\nimport { createAddRecorderAudioWorkletModule } from './factories/add-recorder-audio-worklet-module';\nimport { createListener } from './factories/listener';\nimport { createPostMessageFactory } from './factories/post-message-factory';\nimport { createRecorderAudioWorkletNodeFactory } from './factories/recorder-audio-worklet-node-factory';\nimport { validateState } from './functions/validate-state';\nimport { worklet } from './worklet/worklet';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const addRecorderAudioWorkletModule = createAddRecorderAudioWorkletModule(Blob, URL, worklet);\n\nexport const createRecorderAudioWorkletNode = createRecorderAudioWorkletNodeFactory(\n    createListener,\n    createPostMessageFactory(generateUniqueNumber),\n    on,\n    validateState\n);\n\nexport { isSupported };\n", "import { IExtendedExponentialRampToValueAutomationEvent } from '../interfaces';\n\nexport const createExtendedExponentialRampToValueAutomationEvent = (\n    value: number,\n    endTime: number,\n    insertTime: number\n): IExtendedExponentialRampToValueAutomationEvent => {\n    return { endTime, insertTime, type: 'exponentialRampToValue', value };\n};\n", "import { IExtendedLinearRampToValueAutomationEvent } from '../interfaces';\n\nexport const createExtendedLinearRampToValueAutomationEvent = (\n    value: number,\n    endTime: number,\n    insertTime: number\n): IExtendedLinearRampToValueAutomationEvent => {\n    return { endTime, insertTime, type: 'linearRampToValue', value };\n};\n", "import { ISetValueAutomationEvent } from '../interfaces';\n\nexport const createSetValueAutomationEvent = (value: number, startTime: number): ISetValueAutomationEvent => {\n    return { startTime, type: 'setValue', value };\n};\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\n\nexport const createSetValueCurveAutomationEvent = (\n    values: number[] | Float32Array,\n    startTime: number,\n    duration: number\n): ISetValueCurveAutomationEvent => {\n    return { duration, startTime, type: 'setValueCurve', values };\n};\n", "import { ISetTargetAutomationEvent } from '../interfaces';\n\nexport const getTargetValueAtTime = (\n    time: number,\n    valueAtStartTime: number,\n    { startTime, target, timeConstant }: ISetTargetAutomationEvent\n): number => {\n    return target + (valueAtStartTime - target) * Math.exp((startTime - time) / timeConstant);\n};\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isExponentialRampToValueAutomationEvent = (\n    automationEvent: TAutomationEvent\n): automationEvent is IExponentialRampToValueAutomationEvent => {\n    return automationEvent.type === 'exponentialRampToValue';\n};\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isLinearRampToValueAutomationEvent = (\n    automationEvent: TAutomationEvent\n): automationEvent is ILinearRampToValueAutomationEvent => {\n    return automationEvent.type === 'linearRampToValue';\n};\n", "import { IExponentialRampToValueAutomationEvent, ILinearRampToValueAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\nimport { isExponentialRampToValueAutomationEvent } from './exponential-ramp-to-value-automation-event';\nimport { isLinearRampToValueAutomationEvent } from './linear-ramp-to-value-automation-event';\n\nexport const isAnyRampToValueAutomationEvent = (\n    automationEvent: TAutomationEvent\n): automationEvent is IExponentialRampToValueAutomationEvent | ILinearRampToValueAutomationEvent => {\n    return isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent);\n};\n", "import { ISetValueAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isSetValueAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetValueAutomationEvent => {\n    return automationEvent.type === 'setValue';\n};\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isSetValueCurveAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetValueCurveAutomationEvent => {\n    return automationEvent.type === 'setValueCurve';\n};\n", "import { getTargetValueAtTime } from '../functions/get-target-value-at-time';\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\nimport { TPersistentAutomationEvent } from '../types';\n\nexport const getValueOfAutomationEventAtIndexAtTime = (\n    automationEvents: TPersistentAutomationEvent[],\n    index: number,\n    time: number,\n    defaultValue: number\n): number => {\n    const automationEvent = automationEvents[index];\n\n    return automationEvent === undefined\n        ? defaultValue\n        : isAnyRampToValueAutomationEvent(automationEvent) || isSetValueAutomationEvent(automationEvent)\n        ? automationEvent.value\n        : isSetValueCurveAutomationEvent(automationEvent)\n        ? automationEvent.values[automationEvent.values.length - 1]\n        : getTargetValueAtTime(\n              time,\n              getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, automationEvent.startTime, defaultValue),\n              automationEvent\n          );\n};\n", "import { getValueOfAutomationEventAtIndexAtTime } from '../functions/get-value-of-automation-event-at-index-at-time';\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\nimport { IExtendedExponentialRampToValueAutomationEvent, IExtendedLinearRampToValueAutomationEvent } from '../interfaces';\nimport { TPersistentAutomationEvent } from '../types';\n\nexport const getEndTimeAndValueOfPreviousAutomationEvent = (\n    automationEvents: TPersistentAutomationEvent[],\n    index: number,\n    currentAutomationEvent: TPersistentAutomationEvent,\n    nextAutomationEvent: IExtendedExponentialRampToValueAutomationEvent | IExtendedLinearRampToValueAutomationEvent,\n    defaultValue: number\n): [number, number] => {\n    return currentAutomationEvent === undefined\n        ? [nextAutomationEvent.insertTime, defaultValue]\n        : isAnyRampToValueAutomationEvent(currentAutomationEvent)\n        ? [currentAutomationEvent.endTime, currentAutomationEvent.value]\n        : isSetValueAutomationEvent(currentAutomationEvent)\n        ? [currentAutomationEvent.startTime, currentAutomationEvent.value]\n        : isSetValueCurveAutomationEvent(currentAutomationEvent)\n        ? [\n              currentAutomationEvent.startTime + currentAutomationEvent.duration,\n              currentAutomationEvent.values[currentAutomationEvent.values.length - 1]\n          ]\n        : [\n              currentAutomationEvent.startTime,\n              getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, currentAutomationEvent.startTime, defaultValue)\n          ];\n};\n", "import { ICancelAndHoldAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isCancelAndHoldAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ICancelAndHoldAutomationEvent => {\n    return automationEvent.type === 'cancelAndHold';\n};\n", "import { ICancelScheduledValuesAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isCancelScheduledValuesAutomationEvent = (\n    automationEvent: TAutomationEvent\n): automationEvent is ICancelScheduledValuesAutomationEvent => {\n    return automationEvent.type === 'cancelScheduledValues';\n};\n", "import { isCancelAndHoldAutomationEvent } from '../guards/cancel-and-hold-automation-event';\nimport { isCancelScheduledValuesAutomationEvent } from '../guards/cancel-scheduled-values-automation-event';\nimport { isExponentialRampToValueAutomationEvent } from '../guards/exponential-ramp-to-value-automation-event';\nimport { isLinearRampToValueAutomationEvent } from '../guards/linear-ramp-to-value-automation-event';\nimport { TAutomationEvent } from '../types';\n\nexport const getEventTime = (automationEvent: TAutomationEvent): number => {\n    if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n        return automationEvent.cancelTime;\n    }\n\n    if (isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent)) {\n        return automationEvent.endTime;\n    }\n\n    return automationEvent.startTime;\n};\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\n\nexport const getExponentialRampValueAtTime = (\n    time: number,\n    startTime: number,\n    valueAtStartTime: number,\n    { endTime, value }: IExponentialRampToValueAutomationEvent\n) => {\n    if (valueAtStartTime === value) {\n        return value;\n    }\n\n    if ((0 < valueAtStartTime && 0 < value) || (valueAtStartTime < 0 && value < 0)) {\n        return valueAtStartTime * (value / valueAtStartTime) ** ((time - startTime) / (endTime - startTime));\n    }\n\n    return 0;\n};\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\n\nexport const getLinearRampValueAtTime = (\n    time: number,\n    startTime: number,\n    valueAtStartTime: number,\n    { endTime, value }: ILinearRampToValueAutomationEvent\n) => {\n    return valueAtStartTime + ((time - startTime) / (endTime - startTime)) * (value - valueAtStartTime);\n};\n", "export const interpolateValue = (values: number[] | Float32Array, theoreticIndex: number) => {\n    const lowerIndex = Math.floor(theoreticIndex);\n    const upperIndex = Math.ceil(theoreticIndex);\n\n    if (lowerIndex === upperIndex) {\n        return values[lowerIndex];\n    }\n\n    return (1 - (theoreticIndex - lowerIndex)) * values[lowerIndex] + (1 - (upperIndex - theoreticIndex)) * values[upperIndex];\n};\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\nimport { interpolateValue } from './interpolate-value';\n\nexport const getValueCurveValueAtTime = (time: number, { duration, startTime, values }: ISetValueCurveAutomationEvent): number => {\n    const theoreticIndex = ((time - startTime) / duration) * (values.length - 1);\n\n    return interpolateValue(values, theoreticIndex);\n};\n", "import { ISetTargetAutomationEvent } from '../interfaces';\nimport { TAutomationEvent } from '../types';\n\nexport const isSetTargetAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetTargetAutomationEvent => {\n    return automationEvent.type === 'setTarget';\n};\n", "import { createExtendedExponentialRampToValueAutomationEvent } from '../functions/create-extended-exponential-ramp-to-value-automation-event';\nimport { createExtendedLinearRampToValueAutomationEvent } from '../functions/create-extended-linear-ramp-to-value-automation-event';\nimport { createSetValueAutomationEvent } from '../functions/create-set-value-automation-event';\nimport { createSetValueCurveAutomationEvent } from '../functions/create-set-value-curve-automation-event';\nimport { getEndTimeAndValueOfPreviousAutomationEvent } from '../functions/get-end-time-and-value-of-previous-automation-event';\nimport { getEventTime } from '../functions/get-event-time';\nimport { getExponentialRampValueAtTime } from '../functions/get-exponential-ramp-value-at-time';\nimport { getLinearRampValueAtTime } from '../functions/get-linear-ramp-value-at-time';\nimport { getTargetValueAtTime } from '../functions/get-target-value-at-time';\nimport { getValueCurveValueAtTime } from '../functions/get-value-curve-value-at-time';\nimport { getValueOfAutomationEventAtIndexAtTime } from '../functions/get-value-of-automation-event-at-index-at-time';\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\nimport { isCancelAndHoldAutomationEvent } from '../guards/cancel-and-hold-automation-event';\nimport { isCancelScheduledValuesAutomationEvent } from '../guards/cancel-scheduled-values-automation-event';\nimport { isExponentialRampToValueAutomationEvent } from '../guards/exponential-ramp-to-value-automation-event';\nimport { isLinearRampToValueAutomationEvent } from '../guards/linear-ramp-to-value-automation-event';\nimport { isSetTargetAutomationEvent } from '../guards/set-target-automation-event';\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\nimport { TAutomationEvent, TPersistentAutomationEvent } from '../types';\n\nexport class AutomationEventList {\n    private _automationEvents: TPersistentAutomationEvent[];\n\n    private _currenTime: number;\n\n    private _defaultValue: number;\n\n    constructor(defaultValue: number) {\n        this._automationEvents = [];\n        this._currenTime = 0;\n        this._defaultValue = defaultValue;\n    }\n\n    public [Symbol.iterator](): Iterator<TPersistentAutomationEvent> {\n        return this._automationEvents[Symbol.iterator]();\n    }\n\n    public add(automationEvent: TAutomationEvent): boolean {\n        const eventTime = getEventTime(automationEvent);\n\n        if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n            const index = this._automationEvents.findIndex((currentAutomationEvent) => {\n                if (isCancelScheduledValuesAutomationEvent(automationEvent) && isSetValueCurveAutomationEvent(currentAutomationEvent)) {\n                    return currentAutomationEvent.startTime + currentAutomationEvent.duration >= eventTime;\n                }\n\n                return getEventTime(currentAutomationEvent) >= eventTime;\n            });\n            const removedAutomationEvent = this._automationEvents[index];\n\n            if (index !== -1) {\n                this._automationEvents = this._automationEvents.slice(0, index);\n            }\n\n            if (isCancelAndHoldAutomationEvent(automationEvent)) {\n                const lastAutomationEvent = this._automationEvents[this._automationEvents.length - 1];\n\n                if (removedAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(removedAutomationEvent)) {\n                    if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                        throw new Error('The internal list is malformed.');\n                    }\n\n                    const startTime =\n                        lastAutomationEvent === undefined\n                            ? removedAutomationEvent.insertTime\n                            : isSetValueCurveAutomationEvent(lastAutomationEvent)\n                            ? lastAutomationEvent.startTime + lastAutomationEvent.duration\n                            : getEventTime(lastAutomationEvent);\n                    const startValue =\n                        lastAutomationEvent === undefined\n                            ? this._defaultValue\n                            : isSetValueCurveAutomationEvent(lastAutomationEvent)\n                            ? lastAutomationEvent.values[lastAutomationEvent.values.length - 1]\n                            : lastAutomationEvent.value;\n                    const value = isExponentialRampToValueAutomationEvent(removedAutomationEvent)\n                        ? getExponentialRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent)\n                        : getLinearRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent);\n                    const truncatedAutomationEvent = isExponentialRampToValueAutomationEvent(removedAutomationEvent)\n                        ? createExtendedExponentialRampToValueAutomationEvent(value, eventTime, this._currenTime)\n                        : createExtendedLinearRampToValueAutomationEvent(value, eventTime, this._currenTime);\n\n                    this._automationEvents.push(truncatedAutomationEvent);\n                }\n\n                if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                    this._automationEvents.push(createSetValueAutomationEvent(this.getValue(eventTime), eventTime));\n                }\n\n                if (\n                    lastAutomationEvent !== undefined &&\n                    isSetValueCurveAutomationEvent(lastAutomationEvent) &&\n                    lastAutomationEvent.startTime + lastAutomationEvent.duration > eventTime\n                ) {\n                    const duration = eventTime - lastAutomationEvent.startTime;\n                    const ratio = (lastAutomationEvent.values.length - 1) / lastAutomationEvent.duration;\n                    const length = Math.max(2, 1 + Math.ceil(duration * ratio));\n                    const fraction = (duration / (length - 1)) * ratio;\n                    const values = lastAutomationEvent.values.slice(0, length);\n\n                    if (fraction < 1) {\n                        for (let i = 1; i < length; i += 1) {\n                            const factor = (fraction * i) % 1;\n\n                            values[i] = lastAutomationEvent.values[i - 1] * (1 - factor) + lastAutomationEvent.values[i] * factor;\n                        }\n                    }\n\n                    this._automationEvents[this._automationEvents.length - 1] = createSetValueCurveAutomationEvent(\n                        values,\n                        lastAutomationEvent.startTime,\n                        duration\n                    );\n                }\n            }\n        } else {\n            const index = this._automationEvents.findIndex((currentAutomationEvent) => getEventTime(currentAutomationEvent) > eventTime);\n\n            const previousAutomationEvent =\n                index === -1 ? this._automationEvents[this._automationEvents.length - 1] : this._automationEvents[index - 1];\n\n            if (\n                previousAutomationEvent !== undefined &&\n                isSetValueCurveAutomationEvent(previousAutomationEvent) &&\n                getEventTime(previousAutomationEvent) + previousAutomationEvent.duration > eventTime\n            ) {\n                return false;\n            }\n\n            const persistentAutomationEvent = isExponentialRampToValueAutomationEvent(automationEvent)\n                ? createExtendedExponentialRampToValueAutomationEvent(automationEvent.value, automationEvent.endTime, this._currenTime)\n                : isLinearRampToValueAutomationEvent(automationEvent)\n                ? createExtendedLinearRampToValueAutomationEvent(automationEvent.value, eventTime, this._currenTime)\n                : automationEvent;\n\n            if (index === -1) {\n                this._automationEvents.push(persistentAutomationEvent);\n            } else {\n                if (\n                    isSetValueCurveAutomationEvent(automationEvent) &&\n                    eventTime + automationEvent.duration > getEventTime(this._automationEvents[index])\n                ) {\n                    return false;\n                }\n\n                this._automationEvents.splice(index, 0, persistentAutomationEvent);\n            }\n        }\n\n        return true;\n    }\n\n    public flush(time: number): void {\n        const index = this._automationEvents.findIndex((currentAutomationEvent) => getEventTime(currentAutomationEvent) > time);\n\n        if (index > 1) {\n            const remainingAutomationEvents = this._automationEvents.slice(index - 1);\n            const firstRemainingAutomationEvent = remainingAutomationEvents[0];\n\n            if (isSetTargetAutomationEvent(firstRemainingAutomationEvent)) {\n                remainingAutomationEvents.unshift(\n                    createSetValueAutomationEvent(\n                        getValueOfAutomationEventAtIndexAtTime(\n                            this._automationEvents,\n                            index - 2,\n                            firstRemainingAutomationEvent.startTime,\n                            this._defaultValue\n                        ),\n                        firstRemainingAutomationEvent.startTime\n                    )\n                );\n            }\n\n            this._automationEvents = remainingAutomationEvents;\n        }\n    }\n\n    public getValue(time: number): number {\n        if (this._automationEvents.length === 0) {\n            return this._defaultValue;\n        }\n\n        const indexOfNextEvent = this._automationEvents.findIndex((automationEvent) => getEventTime(automationEvent) > time);\n        const nextAutomationEvent = this._automationEvents[indexOfNextEvent];\n        const indexOfCurrentEvent = (indexOfNextEvent === -1 ? this._automationEvents.length : indexOfNextEvent) - 1;\n        const currentAutomationEvent = this._automationEvents[indexOfCurrentEvent];\n\n        if (\n            currentAutomationEvent !== undefined &&\n            isSetTargetAutomationEvent(currentAutomationEvent) &&\n            (nextAutomationEvent === undefined ||\n                !isAnyRampToValueAutomationEvent(nextAutomationEvent) ||\n                nextAutomationEvent.insertTime > time)\n        ) {\n            return getTargetValueAtTime(\n                time,\n                getValueOfAutomationEventAtIndexAtTime(\n                    this._automationEvents,\n                    indexOfCurrentEvent - 1,\n                    currentAutomationEvent.startTime,\n                    this._defaultValue\n                ),\n                currentAutomationEvent\n            );\n        }\n\n        if (\n            currentAutomationEvent !== undefined &&\n            isSetValueAutomationEvent(currentAutomationEvent) &&\n            (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))\n        ) {\n            return currentAutomationEvent.value;\n        }\n\n        if (\n            currentAutomationEvent !== undefined &&\n            isSetValueCurveAutomationEvent(currentAutomationEvent) &&\n            (nextAutomationEvent === undefined ||\n                !isAnyRampToValueAutomationEvent(nextAutomationEvent) ||\n                currentAutomationEvent.startTime + currentAutomationEvent.duration > time)\n        ) {\n            if (time < currentAutomationEvent.startTime + currentAutomationEvent.duration) {\n                return getValueCurveValueAtTime(time, currentAutomationEvent);\n            }\n\n            return currentAutomationEvent.values[currentAutomationEvent.values.length - 1];\n        }\n\n        if (\n            currentAutomationEvent !== undefined &&\n            isAnyRampToValueAutomationEvent(currentAutomationEvent) &&\n            (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))\n        ) {\n            return currentAutomationEvent.value;\n        }\n\n        if (nextAutomationEvent !== undefined && isExponentialRampToValueAutomationEvent(nextAutomationEvent)) {\n            const [startTime, value] = getEndTimeAndValueOfPreviousAutomationEvent(\n                this._automationEvents,\n                indexOfCurrentEvent,\n                currentAutomationEvent,\n                nextAutomationEvent,\n                this._defaultValue\n            );\n\n            return getExponentialRampValueAtTime(time, startTime, value, nextAutomationEvent);\n        }\n\n        if (nextAutomationEvent !== undefined && isLinearRampToValueAutomationEvent(nextAutomationEvent)) {\n            const [startTime, value] = getEndTimeAndValueOfPreviousAutomationEvent(\n                this._automationEvents,\n                indexOfCurrentEvent,\n                currentAutomationEvent,\n                nextAutomationEvent,\n                this._defaultValue\n            );\n\n            return getLinearRampValueAtTime(time, startTime, value, nextAutomationEvent);\n        }\n\n        return this._defaultValue;\n    }\n}\n", "import { ICancelAndHoldAutomationEvent } from '../interfaces';\n\nexport const createCancelAndHoldAutomationEvent = (cancelTime: number): ICancelAndHoldAutomationEvent => {\n    return { cancelTime, type: 'cancelAndHold' };\n};\n", "import { ICancelScheduledValuesAutomationEvent } from '../interfaces';\n\nexport const createCancelScheduledValuesAutomationEvent = (cancelTime: number): ICancelScheduledValuesAutomationEvent => {\n    return { cancelTime, type: 'cancelScheduledValues' };\n};\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\n\nexport const createExponentialRampToValueAutomationEvent = (value: number, endTime: number): IExponentialRampToValueAutomationEvent => {\n    return { endTime, type: 'exponentialRampToValue', value };\n};\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\n\nexport const createLinearRampToValueAutomationEvent = (value: number, endTime: number): ILinearRampToValueAutomationEvent => {\n    return { endTime, type: 'linearRampToValue', value };\n};\n", "import { ISetTargetAutomationEvent } from '../interfaces';\n\nexport const createSetTargetAutomationEvent = (target: number, startTime: number, timeConstant: number): ISetTargetAutomationEvent => {\n    return { startTime, target, timeConstant, type: 'setTarget' };\n};\n", "export {};\n//# sourceMappingURL=cancel-and-hold-automation-event.js.map", "export {};\n//# sourceMappingURL=cancel-scheduled-values-automation-event.js.map", "export {};\n//# sourceMappingURL=exponential-ramp-to-value-automation-event.js.map", "export {};\n//# sourceMappingURL=extended-exponential-ramp-to-value-automation-event.js.map", "export {};\n//# sourceMappingURL=extended-linear-ramp-to-value-automation-event.js.map", "export {};\n//# sourceMappingURL=linear-ramp-to-value-automation-event.js.map", "export {};\n//# sourceMappingURL=set-value-automation-event.js.map", "export {};\n//# sourceMappingURL=set-target-automation-event.js.map", "export {};\n//# sourceMappingURL=set-value-curve-automation-event.js.map", "export * from './cancel-and-hold-automation-event';\nexport * from './cancel-scheduled-values-automation-event';\nexport * from './exponential-ramp-to-value-automation-event';\nexport * from './extended-exponential-ramp-to-value-automation-event';\nexport * from './extended-linear-ramp-to-value-automation-event';\nexport * from './linear-ramp-to-value-automation-event';\nexport * from './set-value-automation-event';\nexport * from './set-target-automation-event';\nexport * from './set-value-curve-automation-event';\n", "export {};\n//# sourceMappingURL=automation-event.js.map", "export {};\n//# sourceMappingURL=persistent-automation-event.js.map", "export * from './automation-event';\nexport * from './persistent-automation-event';\n", "import { AutomationEventList } from './classes/automation-event-list';\nimport { createCancelAndHoldAutomationEvent } from './functions/create-cancel-and-hold-automation-event';\nimport { createCancelScheduledValuesAutomationEvent } from './functions/create-cancel-scheduled-values-automation-event';\nimport { createExponentialRampToValueAutomationEvent } from './functions/create-exponential-ramp-to-value-automation-event';\nimport { createLinearRampToValueAutomationEvent } from './functions/create-linear-ramp-to-value-automation-event';\nimport { createSetTargetAutomationEvent } from './functions/create-set-target-automation-event';\nimport { createSetValueAutomationEvent } from './functions/create-set-value-automation-event';\nimport { createSetValueCurveAutomationEvent } from './functions/create-set-value-curve-automation-event';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport { AutomationEventList };\n\nexport { createCancelAndHoldAutomationEvent };\n\nexport { createCancelScheduledValuesAutomationEvent };\n\nexport { createExponentialRampToValueAutomationEvent };\n\nexport { createLinearRampToValueAutomationEvent };\n\nexport { createSetTargetAutomationEvent };\n\nexport { createSetValueAutomationEvent };\n\nexport { createSetValueCurveAutomationEvent };\n", "import { TAbortErrorFactory } from '../types';\n\nexport const createAbortError: TAbortErrorFactory = () => new DOMException('', 'AbortError');\n", "import { TAddActiveInputConnectionToAudioNodeFactory } from '../types/add-active-input-connection-to-audio-node-factory';\n\nexport const createAddActiveInputConnectionToAudioNode: TAddActiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\n    return (activeInputs, source, [output, input, eventListener], ignoreDuplicates) => {\n        insertElementInSet(\n            activeInputs[input],\n            [source, output, eventListener],\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\n            ignoreDuplicates\n        );\n    };\n};\n", "import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TActiveInputConnection, TAddAudioNodeConnectionsFactory, TContext, TNativeAudioNode } from '../types';\n\nexport const createAddAudioNodeConnections: TAddAudioNodeConnectionsFactory = (audioNodeConnectionsStore) => {\n    return <T extends TContext>(\n        audioNode: IAudioNode<T>,\n        audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null,\n        nativeAudioNode: TNativeAudioNode\n    ) => {\n        const activeInputs = [];\n\n        for (let i = 0; i < nativeAudioNode.numberOfInputs; i += 1) {\n            activeInputs.push(new Set<TActiveInputConnection<T>>());\n        }\n\n        audioNodeConnectionsStore.set(audioNode, {\n            activeInputs,\n            outputs: new Set(),\n            passiveInputs: new WeakMap(),\n            renderer: audioNodeRenderer\n        });\n    };\n};\n", "import { IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAddAudioParamConnectionsFactory, TContext } from '../types';\n\nexport const createAddAudioParamConnections: TAddAudioParamConnectionsFactory = (audioParamConnectionsStore) => {\n    return <T extends TContext>(\n        audioParam: IAudioParam,\n        audioParamRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null\n    ) => {\n        audioParamConnectionsStore.set(audioParam, { activeInputs: new Set(), passiveInputs: new WeakMap(), renderer: audioParamRenderer });\n    };\n};\n", "import { IAudioNode, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from './interfaces';\nimport {\n    TAudioNodeConnectionsStore,\n    TAudioNodeStore,\n    TAudioParamConnectionsStore,\n    TAudioParamStore,\n    TContext,\n    TContextStore,\n    TCycleCounters,\n    TInternalStateEventListener,\n    TNativeAudioWorkletNode,\n    TNativeContext\n} from './types';\n\nexport const ACTIVE_AUDIO_NODE_STORE: WeakSet<IAudioNode<TContext>> = new WeakSet();\n\nexport const AUDIO_NODE_CONNECTIONS_STORE: TAudioNodeConnectionsStore = new WeakMap();\n\nexport const AUDIO_NODE_STORE: TAudioNodeStore = new WeakMap();\n\nexport const AUDIO_PARAM_CONNECTIONS_STORE: TAudioParamConnectionsStore = new WeakMap();\n\nexport const AUDIO_PARAM_STORE: TAudioParamStore = new WeakMap();\n\nexport const CONTEXT_STORE: TContextStore = new WeakMap();\n\nexport const EVENT_LISTENERS: WeakMap<IAudioNode<TContext>, Set<TInternalStateEventListener>> = new WeakMap();\n\nexport const CYCLE_COUNTERS: TCycleCounters = new WeakMap();\n\n// This clunky name is borrowed from the spec. :-)\nexport const NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS: WeakMap<\n    TNativeContext,\n    Map<string, IAudioWorkletProcessorConstructor>\n> = new WeakMap();\n\nexport const NODE_TO_PROCESSOR_MAPS: WeakMap<\n    TNativeContext,\n    WeakMap<TNativeAudioWorkletNode, Promise<IAudioWorkletProcessor>>\n> = new WeakMap();\n", "import { TConstructor } from '../types';\n\nconst handler = {\n    construct(): any {\n        return handler;\n    }\n};\n\nexport const isConstructible = (constructible: TConstructor): boolean => {\n    try {\n        const proxy = new Proxy(constructible, handler);\n\n        new proxy(); // tslint:disable-line:no-unused-expression\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n", "/*\n * This massive regex tries to cover all the following cases.\n *\n * import './path';\n * import defaultImport from './path';\n * import { namedImport } from './path';\n * import { namedImport as renamendImport } from './path';\n * import * as namespaceImport from './path';\n * import defaultImport, { namedImport } from './path';\n * import defaultImport, { namedImport as renamendImport } from './path';\n * import defaultImport, * as namespaceImport from './path';\n */\nconst IMPORT_STATEMENT_REGEX = /^import(?:(?:[\\s]+[\\w]+|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\{[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?(?:[\\s]*,[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?)*[\\s]*}|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\*[\\s]+as[\\s]+[\\w]+)[\\s]+from)?(?:[\\s]*)(\"([^\"\\\\]|\\\\.)+\"|'([^'\\\\]|\\\\.)+')(?:[\\s]*);?/; // tslint:disable-line:max-line-length\n\nexport const splitImportStatements = (source: string, url: string): [string, string] => {\n    const importStatements = [];\n\n    let sourceWithoutImportStatements = source.replace(/^[\\s]+/, '');\n    let result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n\n    while (result !== null) {\n        const unresolvedUrl = result[1].slice(1, -1);\n\n        const importStatementWithResolvedUrl = result[0]\n            .replace(/([\\s]+)?;?$/, '')\n            .replace(unresolvedUrl, new URL(unresolvedUrl, url).toString());\n        importStatements.push(importStatementWithResolvedUrl);\n\n        sourceWithoutImportStatements = sourceWithoutImportStatements.slice(result[0].length).replace(/^[\\s]+/, '');\n        result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n    }\n\n    return [importStatements.join(';'), sourceWithoutImportStatements];\n};\n", "import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport { isConstructible } from '../helpers/is-constructible';\nimport { splitImportStatements } from '../helpers/split-import-statements';\nimport { IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { TAddAudioWorkletModuleFactory, TEvaluateAudioWorkletGlobalScopeFunction } from '../types';\n\nconst verifyParameterDescriptors = (parameterDescriptors: IAudioWorkletProcessorConstructor['parameterDescriptors']) => {\n    if (parameterDescriptors !== undefined && !Array.isArray(parameterDescriptors)) {\n        throw new TypeError('The parameterDescriptors property of given value for processorCtor is not an array.');\n    }\n};\n\nconst verifyProcessorCtor = <T extends IAudioWorkletProcessorConstructor>(processorCtor: T) => {\n    if (!isConstructible(processorCtor)) {\n        throw new TypeError('The given value for processorCtor should be a constructor.');\n    }\n\n    if (processorCtor.prototype === null || typeof processorCtor.prototype !== 'object') {\n        throw new TypeError('The given value for processorCtor should have a prototype.');\n    }\n};\n\nexport const createAddAudioWorkletModule: TAddAudioWorkletModuleFactory = (\n    cacheTestResult,\n    createNotSupportedError,\n    evaluateSource,\n    exposeCurrentFrameAndCurrentTime,\n    fetchSource,\n    getNativeContext,\n    getOrCreateBackupOfflineAudioContext,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor,\n    ongoingRequests,\n    resolvedRequests,\n    testAudioWorkletProcessorPostMessageSupport,\n    window\n) => {\n    let index = 0;\n\n    return (context, moduleURL, options = { credentials: 'omit' }) => {\n        const resolvedRequestsOfContext = resolvedRequests.get(context);\n\n        if (resolvedRequestsOfContext !== undefined && resolvedRequestsOfContext.has(moduleURL)) {\n            return Promise.resolve();\n        }\n\n        const ongoingRequestsOfContext = ongoingRequests.get(context);\n\n        if (ongoingRequestsOfContext !== undefined) {\n            const promiseOfOngoingRequest = ongoingRequestsOfContext.get(moduleURL);\n\n            if (promiseOfOngoingRequest !== undefined) {\n                return promiseOfOngoingRequest;\n            }\n        }\n\n        const nativeContext = getNativeContext(context);\n\n        // Bug #59: Safari does not implement the audioWorklet property.\n        const promise =\n            nativeContext.audioWorklet === undefined\n                ? fetchSource(moduleURL)\n                      .then(([source, absoluteUrl]) => {\n                          const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n\n                          /*\n                           * This is the unminified version of the code used below:\n                           *\n                           * ```js\n                           * ${ importStatements };\n                           * ((a, b) => {\n                           *     (a[b] = a[b] || [ ]).push(\n                           *         (AudioWorkletProcessor, global, registerProcessor, sampleRate, self, window) => {\n                           *             ${ sourceWithoutImportStatements }\n                           *         }\n                           *     );\n                           * })(window, '_AWGS');\n                           * ```\n                           */\n                          // tslint:disable-next-line:max-line-length\n                          const wrappedSource = `${importStatements};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${sourceWithoutImportStatements}\n})})(window,'_AWGS')`;\n\n                          // @todo Evaluating the given source code is a possible security problem.\n                          return evaluateSource(wrappedSource);\n                      })\n                      .then(() => {\n                          const evaluateAudioWorkletGlobalScope = (<TEvaluateAudioWorkletGlobalScopeFunction[]>(<any>window)._AWGS).pop();\n\n                          if (evaluateAudioWorkletGlobalScope === undefined) {\n                              // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                              throw new SyntaxError();\n                          }\n\n                          exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\n                              evaluateAudioWorkletGlobalScope(\n                                  class AudioWorkletProcessor {},\n                                  undefined,\n                                  (name, processorCtor) => {\n                                      if (name.trim() === '') {\n                                          throw createNotSupportedError();\n                                      }\n\n                                      const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n\n                                      if (nodeNameToProcessorConstructorMap !== undefined) {\n                                          if (nodeNameToProcessorConstructorMap.has(name)) {\n                                              throw createNotSupportedError();\n                                          }\n\n                                          verifyProcessorCtor(processorCtor);\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\n\n                                          nodeNameToProcessorConstructorMap.set(name, processorCtor);\n                                      } else {\n                                          verifyProcessorCtor(processorCtor);\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\n\n                                          NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(nativeContext, new Map([[name, processorCtor]]));\n                                      }\n                                  },\n                                  nativeContext.sampleRate,\n                                  undefined,\n                                  undefined\n                              )\n                          );\n                      })\n                : Promise.all([\n                      fetchSource(moduleURL),\n                      Promise.resolve(\n                          cacheTestResult(testAudioWorkletProcessorPostMessageSupport, testAudioWorkletProcessorPostMessageSupport)\n                      )\n                  ]).then(([[source, absoluteUrl], isSupportingPostMessage]) => {\n                      const currentIndex = index + 1;\n\n                      index = currentIndex;\n\n                      const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n                      /*\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                       *\n                       * This is the unminified version of the code used below.\n                       *\n                       * ```js\n                       * class extends AudioWorkletProcessor {\n                       *\n                       *     __buffers = new WeakSet();\n                       *\n                       *     constructor () {\n                       *         super();\n                       *\n                       *         this.port.postMessage = ((postMessage) => {\n                       *             return (message, transferables) => {\n                       *                 const filteredTransferables = (transferables)\n                       *                     ? transferables.filter((transferable) => !this.__buffers.has(transferable))\n                       *                     : transferables;\n                       *\n                       *                 return postMessage.call(this.port, message, filteredTransferables);\n                       *              };\n                       *         })(this.port.postMessage);\n                       *     }\n                       * }\n                       * ```\n                       */\n                      const patchedAudioWorkletProcessor = isSupportingPostMessage\n                          ? 'AudioWorkletProcessor'\n                          : 'class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}';\n                      /*\n                       * Bug #170: Chrome and Edge do call process() with an array with empty channelData for each input if no input is connected.\n                       *\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                       *\n                       * Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                       *\n                       * This is the unminified version of the code used below:\n                       *\n                       * ```js\n                       * `${ importStatements };\n                       * ((AudioWorkletProcessor, registerProcessor) => {${ sourceWithoutImportStatements }\n                       * })(\n                       *     ${patchedAudioWorkletProcessor },\n                       *     (name, processorCtor) => registerProcessor(name, class extends processorCtor {\n                       *\n                       *         __collectBuffers = (array) => {\n                       *             array.forEach((element) => this.__buffers.add(element.buffer));\n                       *         };\n                       *\n                       *         process (inputs, outputs, parameters) {\n                       *             inputs.forEach(this.__collectBuffers);\n                       *             outputs.forEach(this.__collectBuffers);\n                       *             this.__collectBuffers(Object.values(parameters));\n                       *\n                       *             return super.process(\n                       *                 (inputs.map((input) => input.some((channelData) => channelData.length === 0)) ? [ ] : input),\n                       *                 outputs,\n                       *                 parameters\n                       *             );\n                       *         }\n                       *\n                       *     })\n                       * );\n                       *\n                       * registerProcessor(`__sac${currentIndex}`, class extends AudioWorkletProcessor{\n                       *\n                       *     process () {\n                       *         return false;\n                       *     }\n                       *\n                       * })`\n                       * ```\n                       */\n                      const memberDefinition = isSupportingPostMessage ? '' : '__c = (a) => a.forEach(e=>this.__b.add(e.buffer));';\n                      const bufferRegistration = isSupportingPostMessage\n                          ? ''\n                          : 'i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));';\n                      const wrappedSource = `${importStatements};((AudioWorkletProcessor,registerProcessor)=>{${sourceWithoutImportStatements}\n})(${patchedAudioWorkletProcessor},(n,p)=>registerProcessor(n,class extends p{${memberDefinition}process(i,o,p){${bufferRegistration}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${currentIndex}',class extends AudioWorkletProcessor{process(){return !1}})`;\n                      const blob = new Blob([wrappedSource], { type: 'application/javascript; charset=utf-8' });\n                      const url = URL.createObjectURL(blob);\n\n                      return nativeContext.audioWorklet\n                          .addModule(url, options)\n                          .then(() => {\n                              if (isNativeOfflineAudioContext(nativeContext)) {\n                                  return nativeContext;\n                              }\n\n                              // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n                              const backupOfflineAudioContext = getOrCreateBackupOfflineAudioContext(nativeContext);\n\n                              return backupOfflineAudioContext.audioWorklet.addModule(url, options).then(() => backupOfflineAudioContext);\n                          })\n                          .then((nativeContextOrBackupOfflineAudioContext) => {\n                              if (nativeAudioWorkletNodeConstructor === null) {\n                                  throw new SyntaxError();\n                              }\n\n                              try {\n                                  // Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                                  new nativeAudioWorkletNodeConstructor(nativeContextOrBackupOfflineAudioContext, `__sac${currentIndex}`); // tslint:disable-line:no-unused-expression\n                              } catch {\n                                  throw new SyntaxError();\n                              }\n                          })\n                          .finally(() => URL.revokeObjectURL(url));\n                  });\n\n        if (ongoingRequestsOfContext === undefined) {\n            ongoingRequests.set(context, new Map([[moduleURL, promise]]));\n        } else {\n            ongoingRequestsOfContext.set(moduleURL, promise);\n        }\n\n        promise\n            .then(() => {\n                const updatedResolvedRequestsOfContext = resolvedRequests.get(context);\n\n                if (updatedResolvedRequestsOfContext === undefined) {\n                    resolvedRequests.set(context, new Set([moduleURL]));\n                } else {\n                    updatedResolvedRequestsOfContext.add(moduleURL);\n                }\n            })\n            .finally(() => {\n                const updatedOngoingRequestsOfContext = ongoingRequests.get(context);\n\n                if (updatedOngoingRequestsOfContext !== undefined) {\n                    updatedOngoingRequestsOfContext.delete(moduleURL);\n                }\n            });\n\n        return promise;\n    };\n};\n", "import { TGetValueForKeyFunction } from '../types';\n\nexport const getValueForKey: TGetValueForKeyFunction = (map, key) => {\n    const value = map.get(key);\n\n    if (value === undefined) {\n        throw new Error('A value with the given key could not be found.');\n    }\n\n    return value;\n};\n", "import { TPickElementFromSetFunction } from '../types';\n\nexport const pickElementFromSet: TPickElementFromSetFunction = (set, predicate) => {\n    const matchingElements = Array.from(set).filter(predicate);\n\n    if (matchingElements.length > 1) {\n        throw Error('More than one element was found.');\n    }\n\n    if (matchingElements.length === 0) {\n        throw Error('No element was found.');\n    }\n\n    const [matchingElement] = matchingElements;\n\n    set.delete(matchingElement);\n\n    return matchingElement;\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TContext, TPassiveAudioNodeInputConnection } from '../types';\nimport { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deletePassiveInputConnectionToAudioNode = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioNodeInputConnection>>,\n    source: IAudioNode<T>,\n    output: number,\n    input: number\n) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(\n        passiveInputConnections,\n        (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input\n    );\n\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n\n    return matchingConnection;\n};\n", "import { EVENT_LISTENERS } from '../globals';\nimport { TGetEventListenersOfAudioNodeFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getEventListenersOfAudioNode: TGetEventListenersOfAudioNodeFunction = (audioNode) => {\n    return getValueForKey(EVENT_LISTENERS, audioNode);\n};\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const setInternalStateToActive = <T extends TContext>(audioNode: IAudioNode<T>) => {\n    if (ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is already stored.');\n    }\n\n    ACTIVE_AUDIO_NODE_STORE.add(audioNode);\n\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(true));\n};\n", "import { IAudioNode, IAudioWorkletNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioWorkletNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioWorkletNode<T> => {\n    return 'port' in audioNode;\n};\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const setInternalStateToPassive = <T extends TContext>(audioNode: IAudioNode<T>) => {\n    if (!ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is not stored.');\n    }\n\n    ACTIVE_AUDIO_NODE_STORE.delete(audioNode);\n\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(false));\n};\n", "import { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\n\n// Set the internalState of the audioNode to 'passive' if it is not an AudioWorkletNode and if it has no 'active' input connections.\nexport const setInternalStateToPassiveWhenNecessary = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    activeInputs: Set<TActiveInputConnection<T>>[]\n) => {\n    if (!isAudioWorkletNode(audioNode) && activeInputs.every((connections) => connections.size === 0)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n", "import { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nimport { IAudioNode } from '../interfaces';\nimport { TAddConnectionToAudioNodeFactory, TContext, TInternalStateEventListener } from '../types';\n\nexport const createAddConnectionToAudioNode: TAddConnectionToAudioNodeFactory = (\n    addActiveInputConnectionToAudioNode,\n    addPassiveInputConnectionToAudioNode,\n    connectNativeAudioNodeToNativeAudioNode,\n    deleteActiveInputConnectionToAudioNode,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getAudioNodeConnections,\n    getAudioNodeTailTime,\n    getEventListenersOfAudioNode,\n    getNativeAudioNode,\n    insertElementInSet,\n    isActiveAudioNode,\n    isPartOfACycle,\n    isPassiveAudioNode\n) => {\n    const tailTimeTimeoutIds = new WeakMap<IAudioNode<TContext>, number>();\n\n    return (source, destination, output, input, isOffline) => {\n        const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n        const { outputs } = getAudioNodeConnections(source);\n        const eventListeners = getEventListenersOfAudioNode(source);\n\n        const eventListener: TInternalStateEventListener = (isActive) => {\n            const nativeDestinationAudioNode = getNativeAudioNode(destination);\n            const nativeSourceAudioNode = getNativeAudioNode(source);\n\n            if (isActive) {\n                const partialConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n\n                addActiveInputConnectionToAudioNode(activeInputs, source, partialConnection, false);\n\n                if (!isOffline && !isPartOfACycle(source)) {\n                    connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n\n                if (isPassiveAudioNode(destination)) {\n                    setInternalStateToActive(destination);\n                }\n            } else {\n                const partialConnection = deleteActiveInputConnectionToAudioNode(activeInputs, source, output, input);\n\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, partialConnection, false);\n\n                if (!isOffline && !isPartOfACycle(source)) {\n                    disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n\n                const tailTime = getAudioNodeTailTime(destination);\n\n                if (tailTime === 0) {\n                    if (isActiveAudioNode(destination)) {\n                        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                    }\n                } else {\n                    const tailTimeTimeoutId = tailTimeTimeoutIds.get(destination);\n\n                    if (tailTimeTimeoutId !== undefined) {\n                        clearTimeout(tailTimeTimeoutId);\n                    }\n\n                    tailTimeTimeoutIds.set(\n                        destination,\n                        setTimeout(() => {\n                            if (isActiveAudioNode(destination)) {\n                                setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                            }\n                        }, tailTime * 1000)\n                    );\n                }\n            }\n        };\n\n        if (\n            insertElementInSet(\n                outputs,\n                [destination, output, input],\n                (outputConnection) =>\n                    outputConnection[0] === destination && outputConnection[1] === output && outputConnection[2] === input,\n                true\n            )\n        ) {\n            eventListeners.add(eventListener);\n\n            if (isActiveAudioNode(source)) {\n                addActiveInputConnectionToAudioNode(activeInputs, source, [output, input, eventListener], true);\n            } else {\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, [source, output, eventListener], true);\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n", "import { TAddPassiveInputConnectionToAudioNodeFactory } from '../types';\n\nexport const createAddPassiveInputConnectionToAudioNode: TAddPassiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\n    return (passiveInputs, input, [source, output, eventListener], ignoreDuplicates) => {\n        const passiveInputConnections = passiveInputs.get(source);\n\n        if (passiveInputConnections === undefined) {\n            passiveInputs.set(source, new Set([[output, input, eventListener]]));\n        } else {\n            insertElementInSet(\n                passiveInputConnections,\n                [output, input, eventListener],\n                (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input,\n                ignoreDuplicates\n            );\n        }\n    };\n};\n", "import { TAddSilentConnectionFactory } from '../types';\n\nexport const createAddSilentConnection: TAddSilentConnectionFactory = (createNativeGainNode) => {\n    return (nativeContext, nativeAudioScheduledSourceNode) => {\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        nativeAudioScheduledSourceNode.connect(nativeGainNode).connect(nativeContext.destination);\n\n        const disconnect = () => {\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnect);\n            nativeAudioScheduledSourceNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n\n        nativeAudioScheduledSourceNode.addEventListener('ended', disconnect);\n    };\n};\n", "import { TAddUnrenderedAudioWorkletNodeFactory } from '../types';\n\nexport const createAddUnrenderedAudioWorkletNode: TAddUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).add(audioWorkletNode);\n    };\n};\n", "import { IAnalyserNode, IAnalyserOptions } from '../interfaces';\nimport { TAnalyserNodeConstructorFactory, TAudioNodeRenderer, TContext, TNativeAnalyserNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    fftSize: 2048,\n    maxDecibels: -30,\n    minDecibels: -100,\n    smoothingTimeConstant: 0.8\n} as const;\n\nexport const createAnalyserNodeConstructor: TAnalyserNodeConstructorFactory = (\n    audionNodeConstructor,\n    createAnalyserNodeRenderer,\n    createIndexSizeError,\n    createNativeAnalyserNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class AnalyserNode<T extends TContext> extends audionNodeConstructor<T> implements IAnalyserNode<T> {\n        private _nativeAnalyserNode: TNativeAnalyserNode;\n\n        constructor(context: T, options?: Partial<IAnalyserOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAnalyserNode = createNativeAnalyserNode(nativeContext, mergedOptions);\n            const analyserNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createAnalyserNodeRenderer() : null)\n            );\n\n            super(context, false, nativeAnalyserNode, analyserNodeRenderer);\n\n            this._nativeAnalyserNode = nativeAnalyserNode;\n        }\n\n        get fftSize(): number {\n            return this._nativeAnalyserNode.fftSize;\n        }\n\n        set fftSize(value) {\n            this._nativeAnalyserNode.fftSize = value;\n        }\n\n        get frequencyBinCount(): number {\n            return this._nativeAnalyserNode.frequencyBinCount;\n        }\n\n        get maxDecibels(): number {\n            return this._nativeAnalyserNode.maxDecibels;\n        }\n\n        set maxDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const maxDecibels = this._nativeAnalyserNode.maxDecibels;\n\n            this._nativeAnalyserNode.maxDecibels = value;\n\n            if (!(value > this._nativeAnalyserNode.minDecibels)) {\n                this._nativeAnalyserNode.maxDecibels = maxDecibels;\n\n                throw createIndexSizeError();\n            }\n        }\n\n        get minDecibels(): number {\n            return this._nativeAnalyserNode.minDecibels;\n        }\n\n        set minDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const minDecibels = this._nativeAnalyserNode.minDecibels;\n\n            this._nativeAnalyserNode.minDecibels = value;\n\n            if (!(this._nativeAnalyserNode.maxDecibels > value)) {\n                this._nativeAnalyserNode.minDecibels = minDecibels;\n\n                throw createIndexSizeError();\n            }\n        }\n\n        get smoothingTimeConstant(): number {\n            return this._nativeAnalyserNode.smoothingTimeConstant;\n        }\n\n        set smoothingTimeConstant(value) {\n            this._nativeAnalyserNode.smoothingTimeConstant = value;\n        }\n\n        public getByteFrequencyData(array: Uint8Array): void {\n            this._nativeAnalyserNode.getByteFrequencyData(array);\n        }\n\n        public getByteTimeDomainData(array: Uint8Array): void {\n            this._nativeAnalyserNode.getByteTimeDomainData(array);\n        }\n\n        public getFloatFrequencyData(array: Float32Array): void {\n            this._nativeAnalyserNode.getFloatFrequencyData(array);\n        }\n\n        public getFloatTimeDomainData(array: Float32Array): void {\n            this._nativeAnalyserNode.getFloatTimeDomainData(array);\n        }\n    };\n};\n", "import { TNativeAudioNode, TNativeContext } from '../types';\n\nexport const isOwnedByContext = (nativeAudioNode: TNativeAudioNode, nativeContext: TNativeContext): boolean => {\n    return nativeAudioNode.context === nativeContext;\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAnalyserNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAnalyserNodeRendererFactoryFactory, TNativeAnalyserNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createAnalyserNodeRendererFactory: TAnalyserNodeRendererFactoryFactory = (\n    createNativeAnalyserNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAnalyserNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAnalyserNode>();\n\n        const createAnalyserNode = async (proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAnalyserNode = getNativeAudioNode<T, TNativeAnalyserNode>(proxy);\n\n            // If the initially used nativeAnalyserNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAnalyserNodeIsOwnedByContext = isOwnedByContext(nativeAnalyserNode, nativeOfflineAudioContext);\n\n            if (!nativeAnalyserNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAnalyserNode.channelCount,\n                    channelCountMode: nativeAnalyserNode.channelCountMode,\n                    channelInterpretation: nativeAnalyserNode.channelInterpretation,\n                    fftSize: nativeAnalyserNode.fftSize,\n                    maxDecibels: nativeAnalyserNode.maxDecibels,\n                    minDecibels: nativeAnalyserNode.minDecibels,\n                    smoothingTimeConstant: nativeAnalyserNode.smoothingTimeConstant\n                };\n\n                nativeAnalyserNode = createNativeAnalyserNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAnalyserNodes.set(nativeOfflineAudioContext, nativeAnalyserNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAnalyserNode);\n\n            return nativeAnalyserNode;\n        };\n\n        return {\n            render(proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAnalyserNode> {\n                const renderedNativeAnalyserNode = renderedNativeAnalyserNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAnalyserNode !== undefined) {\n                    return Promise.resolve(renderedNativeAnalyserNode);\n                }\n\n                return createAnalyserNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TNativeAudioBuffer } from '../types';\n\nexport const testAudioBufferCopyChannelMethodsOutOfBoundsSupport = (nativeAudioBuffer: TNativeAudioBuffer): boolean => {\n    try {\n        nativeAudioBuffer.copyToChannel(new Float32Array(1), 0, -1);\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n", "import { TIndexSizeErrorFactory } from '../types';\n\nexport const createIndexSizeError: TIndexSizeErrorFactory = () => new DOMException('', 'IndexSizeError');\n", "import { createIndexSizeError } from '../factories/index-size-error';\nimport { TNativeAudioBuffer } from '../types';\n\nexport const wrapAudioBufferGetChannelDataMethod = (audioBuffer: TNativeAudioBuffer): void => {\n    audioBuffer.getChannelData = ((getChannelData) => {\n        return (channel: number) => {\n            try {\n                return getChannelData.call(audioBuffer, channel);\n            } catch (err) {\n                if (err.code === 12) {\n                    throw createIndexSizeError();\n                }\n\n                throw err;\n            }\n        };\n    })(audioBuffer.getChannelData);\n};\n", "import { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from '../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { IAudioBuffer, IAudioBufferOptions } from '../interfaces';\nimport { TAudioBufferConstructorFactory, TNativeOfflineAudioContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createAudioBufferConstructor: TAudioBufferConstructorFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    createNotSupportedError,\n    nativeAudioBufferConstructor,\n    nativeOfflineAudioContextConstructor,\n    testNativeAudioBufferConstructorSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    let nativeOfflineAudioContext: null | TNativeOfflineAudioContext = null;\n\n    return class AudioBuffer implements IAudioBuffer {\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public copyFromChannel!: (destination: Float32Array, channelNumber: number, bufferOffset?: number) => void;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public copyToChannel!: (source: Float32Array, channelNumber: number, bufferOffset?: number) => void;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public duration!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public getChannelData!: (channel: number) => Float32Array;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public length!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public numberOfChannels!: number;\n\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\n        public sampleRate!: number;\n\n        constructor(options: IAudioBufferOptions) {\n            if (nativeOfflineAudioContextConstructor === null) {\n                throw new Error('Missing the native OfflineAudioContext constructor.');\n            }\n\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            if (nativeOfflineAudioContext === null) {\n                nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n            }\n\n            /*\n             * Bug #99: Firefox does not throw a NotSupportedError when the numberOfChannels is zero. But it only does it when using the\n             * factory function. But since Firefox also supports the constructor everything should be fine.\n             */\n            const audioBuffer =\n                nativeAudioBufferConstructor !== null &&\n                cacheTestResult(testNativeAudioBufferConstructorSupport, testNativeAudioBufferConstructorSupport)\n                    ? new nativeAudioBufferConstructor({ length, numberOfChannels, sampleRate })\n                    : nativeOfflineAudioContext.createBuffer(numberOfChannels, length, sampleRate);\n\n            // Bug #99: Safari does not throw an error when the numberOfChannels is zero.\n            if (audioBuffer.numberOfChannels === 0) {\n                throw createNotSupportedError();\n            }\n\n            // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n            // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n            if (typeof audioBuffer.copyFromChannel !== 'function') {\n                wrapAudioBufferCopyChannelMethods(audioBuffer);\n                wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n            } else if (\n                !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                    testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                )\n            ) {\n                wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n            }\n\n            audioBufferStore.add(audioBuffer);\n\n            /*\n             * This does violate all good pratices but it is necessary to allow this AudioBuffer to be used with native\n             * (Offline)AudioContexts.\n             */\n            return audioBuffer;\n        }\n\n        public static [Symbol.hasInstance](instance: unknown): boolean {\n            return (\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === AudioBuffer.prototype) ||\n                audioBufferStore.has(<any>instance)\n            );\n        }\n    };\n};\n", "export const MOST_NEGATIVE_SINGLE_FLOAT = -3.4028234663852886e38;\n\nexport const MOST_POSITIVE_SINGLE_FLOAT = -MOST_NEGATIVE_SINGLE_FLOAT;\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { TIsActiveAudioNodeFunction } from '../types';\n\nexport const isActiveAudioNode: TIsActiveAudioNodeFunction = (audioNode) => ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport { IAudioBufferSourceNode, IAudioBufferSourceOptions, IAudioParam, IAudioScheduledSourceNodeEventMap } from '../interfaces';\nimport {\n    TAnyAudioBuffer,\n    TAudioBufferSourceNodeConstructorFactory,\n    TAudioBufferSourceNodeRenderer,\n    TContext,\n    TEventHandler,\n    TNativeAudioBufferSourceNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    // Bug #149: Safari does not yet support the detune AudioParam.\n    loop: false,\n    loopEnd: 0,\n    loopStart: 0,\n    playbackRate: 1\n} as const;\n\nexport const createAudioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioBufferSourceNodeRenderer,\n    createAudioParam,\n    createInvalidStateError,\n    createNativeAudioBufferSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class AudioBufferSourceNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IAudioBufferSourceNode<T>\n    {\n        private _audioBufferSourceNodeRenderer: TAudioBufferSourceNodeRenderer<T>;\n\n        private _isBufferNullified: boolean;\n\n        private _isBufferSet: boolean;\n\n        private _nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode;\n\n        private _onended: null | TEventHandler<this>;\n\n        private _playbackRate: IAudioParam;\n\n        constructor(context: T, options?: Partial<IAudioBufferSourceOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const audioBufferSourceNodeRenderer = <TAudioBufferSourceNodeRenderer<T>>(\n                (isOffline ? createAudioBufferSourceNodeRenderer() : null)\n            );\n\n            super(context, false, nativeAudioBufferSourceNode, audioBufferSourceNodeRenderer);\n\n            this._audioBufferSourceNodeRenderer = audioBufferSourceNodeRenderer;\n            this._isBufferNullified = false;\n            this._isBufferSet = mergedOptions.buffer !== null;\n            this._nativeAudioBufferSourceNode = nativeAudioBufferSourceNode;\n            this._onended = null;\n            // Bug #73: Safari does not export the correct values for maxValue and minValue.\n            this._playbackRate = createAudioParam(\n                this,\n                isOffline,\n                nativeAudioBufferSourceNode.playbackRate,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n        }\n\n        get buffer(): null | TAnyAudioBuffer {\n            if (this._isBufferNullified) {\n                return null;\n            }\n\n            return this._nativeAudioBufferSourceNode.buffer;\n        }\n\n        set buffer(value) {\n            this._nativeAudioBufferSourceNode.buffer = value;\n\n            // Bug #72: Only Chrome & Edge do not allow to reassign the buffer yet.\n            if (value !== null) {\n                if (this._isBufferSet) {\n                    throw createInvalidStateError();\n                }\n\n                this._isBufferSet = true;\n            }\n        }\n\n        get loop(): boolean {\n            return this._nativeAudioBufferSourceNode.loop;\n        }\n\n        set loop(value) {\n            this._nativeAudioBufferSourceNode.loop = value;\n        }\n\n        get loopEnd(): number {\n            return this._nativeAudioBufferSourceNode.loopEnd;\n        }\n\n        set loopEnd(value) {\n            this._nativeAudioBufferSourceNode.loopEnd = value;\n        }\n\n        get loopStart(): number {\n            return this._nativeAudioBufferSourceNode.loopStart;\n        }\n\n        set loopStart(value) {\n            this._nativeAudioBufferSourceNode.loopStart = value;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeAudioBufferSourceNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeAudioBufferSourceNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        get playbackRate(): IAudioParam {\n            return this._playbackRate;\n        }\n\n        public start(when = 0, offset = 0, duration?: number): void {\n            this._nativeAudioBufferSourceNode.start(when, offset, duration);\n\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.start = duration === undefined ? [when, offset] : [when, offset, duration];\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeAudioBufferSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeAudioBufferSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeAudioBufferSourceNode.stop(when);\n\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioBufferSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAudioBufferSourceNodeRendererFactoryFactory, TNativeAudioBufferSourceNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createAudioBufferSourceNodeRendererFactory: TAudioBufferSourceNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioBufferSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode>();\n\n        let start: null | [number, number] | [number, number, number] = null;\n        let stop: null | number = null;\n\n        const createAudioBufferSourceNode = async (\n            proxy: IAudioBufferSourceNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ) => {\n            let nativeAudioBufferSourceNode = getNativeAudioNode<T, TNativeAudioBufferSourceNode>(proxy);\n\n            /*\n             * If the initially used nativeAudioBufferSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeAudioBufferSourceNodeIsOwnedByContext = isOwnedByContext(nativeAudioBufferSourceNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeAudioBufferSourceNode.buffer,\n                    channelCount: nativeAudioBufferSourceNode.channelCount,\n                    channelCountMode: nativeAudioBufferSourceNode.channelCountMode,\n                    channelInterpretation: nativeAudioBufferSourceNode.channelInterpretation,\n                    // Bug #149: Safari does not yet support the detune AudioParam.\n                    loop: nativeAudioBufferSourceNode.loop,\n                    loopEnd: nativeAudioBufferSourceNode.loopEnd,\n                    loopStart: nativeAudioBufferSourceNode.loopStart,\n                    playbackRate: nativeAudioBufferSourceNode.playbackRate.value\n                };\n\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeAudioBufferSourceNode.start(...start);\n                }\n\n                if (stop !== null) {\n                    nativeAudioBufferSourceNode.stop(stop);\n                }\n            }\n\n            renderedNativeAudioBufferSourceNodes.set(nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await renderAutomation(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            } else {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await connectAudioParam(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n\n            return nativeAudioBufferSourceNode;\n        };\n\n        return {\n            set start(value: [number, number] | [number, number, number]) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(\n                proxy: IAudioBufferSourceNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioBufferSourceNode> {\n                const renderedNativeAudioBufferSourceNode = renderedNativeAudioBufferSourceNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioBufferSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioBufferSourceNode);\n                }\n\n                return createAudioBufferSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { IAudioBufferSourceNode, IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioBufferSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioBufferSourceNode<T> => {\n    return 'playbackRate' in audioNode;\n};\n", "import { IAudioNode, IBiquadFilterNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isBiquadFilterNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IBiquadFilterNode<T> => {\n    return 'frequency' in audioNode && 'gain' in audioNode;\n};\n", "import { IAudioNode, IConstantSourceNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isConstantSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IConstantSourceNode<T> => {\n    return 'offset' in audioNode;\n};\n", "import { IAudioNode, IGainNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isGainNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IGainNode<T> => {\n    return !('frequency' in audioNode) && 'gain' in audioNode;\n};\n", "import { IAudioNode, IOscillatorNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isOscillatorNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IOscillatorNode<T> => {\n    return 'detune' in audioNode && 'frequency' in audioNode && !('gain' in audioNode);\n};\n", "import { IAudioNode, IStereoPannerNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isStereoPannerNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IStereoPannerNode<T> => {\n    return 'pan' in audioNode;\n};\n", "import { AUDIO_NODE_CONNECTIONS_STORE } from '../globals';\nimport { IAudioNode } from '../interfaces';\nimport { TAudioNodeConnections, TContext, TGetAudioNodeConnectionsFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioNodeConnections: TGetAudioNodeConnectionsFunction = <T extends TContext>(\n    audioNode: IAudioNode<T>\n): TAudioNodeConnections<T> => {\n    return <TAudioNodeConnections<T>>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE, audioNode);\n};\n", "import { AUDIO_PARAM_CONNECTIONS_STORE } from '../globals';\nimport { IAudioParam } from '../interfaces';\nimport { TAudioParamConnections, TContext, TGetAudioParamConnectionsFunction } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioParamConnections: TGetAudioParamConnectionsFunction = <T extends TContext>(\n    audioParam: IAudioParam\n): TAudioParamConnections<T> => {\n    return <TAudioParamConnections<T>>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE, audioParam);\n};\n", "import { isAudioBufferSourceNode } from '../guards/audio-buffer-source-node';\nimport { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { isBiquadFilterNode } from '../guards/biquad-filter-node';\nimport { isConstantSourceNode } from '../guards/constant-source-node';\nimport { isGainNode } from '../guards/gain-node';\nimport { isOscillatorNode } from '../guards/oscillator-node';\nimport { isStereoPannerNode } from '../guards/stereo-panner-node';\nimport { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { getAudioNodeConnections } from './get-audio-node-connections';\nimport { getAudioParamConnections } from './get-audio-param-connections';\nimport { isActiveAudioNode } from './is-active-audio-node';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\n\nexport const deactivateActiveAudioNodeInputConnections = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    trace: readonly IAudioNode<T>[]\n) => {\n    const { activeInputs } = getAudioNodeConnections(audioNode);\n\n    activeInputs.forEach((connections) =>\n        connections.forEach(([source]) => {\n            if (!trace.includes(audioNode)) {\n                deactivateActiveAudioNodeInputConnections(source, [...trace, audioNode]);\n            }\n        })\n    );\n\n    const audioParams = isAudioBufferSourceNode(audioNode)\n        ? [\n              // Bug #149: Safari does not yet support the detune AudioParam.\n              audioNode.playbackRate\n          ]\n        : isAudioWorkletNode(audioNode)\n        ? Array.from(audioNode.parameters.values())\n        : isBiquadFilterNode(audioNode)\n        ? [audioNode.Q, audioNode.detune, audioNode.frequency, audioNode.gain]\n        : isConstantSourceNode(audioNode)\n        ? [audioNode.offset]\n        : isGainNode(audioNode)\n        ? [audioNode.gain]\n        : isOscillatorNode(audioNode)\n        ? [audioNode.detune, audioNode.frequency]\n        : isStereoPannerNode(audioNode)\n        ? [audioNode.pan]\n        : [];\n\n    for (const audioParam of audioParams) {\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\n\n        if (audioParamConnections !== undefined) {\n            audioParamConnections.activeInputs.forEach(([source]) => deactivateActiveAudioNodeInputConnections(source, trace));\n        }\n    }\n\n    if (isActiveAudioNode(audioNode)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n", "import { IAudioDestinationNode } from '../interfaces';\nimport { TContext } from '../types';\nimport { deactivateActiveAudioNodeInputConnections } from './deactivate-active-audio-node-input-connections';\n\nexport const deactivateAudioGraph = <T extends TContext>(context: T): void => {\n    deactivateActiveAudioNodeInputConnections(<IAudioDestinationNode<T>>context.destination, []);\n};\n", "import { IAudioContextOptions } from '../interfaces';\n\nexport const isValidLatencyHint = (latencyHint: IAudioContextOptions['latencyHint']) => {\n    return (\n        latencyHint === undefined ||\n        typeof latencyHint === 'number' ||\n        (typeof latencyHint === 'string' && (latencyHint === 'balanced' || latencyHint === 'interactive' || latencyHint === 'playback'))\n    );\n};\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\nimport {\n    IAudioContext,\n    IAudioContextOptions,\n    IMediaElementAudioSourceNode,\n    IMediaStreamAudioDestinationNode,\n    IMediaStreamAudioSourceNode,\n    IMediaStreamTrackAudioSourceNode\n} from '../interfaces';\nimport { TAudioContextConstructorFactory, TAudioContextState, TNativeAudioContext, TNativeGainNode, TNativeOscillatorNode } from '../types';\n\nexport const createAudioContextConstructor: TAudioContextConstructorFactory = (\n    baseAudioContextConstructor,\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    mediaElementAudioSourceNodeConstructor,\n    mediaStreamAudioDestinationNodeConstructor,\n    mediaStreamAudioSourceNodeConstructor,\n    mediaStreamTrackAudioSourceNodeConstructor,\n    nativeAudioContextConstructor\n) => {\n    return class AudioContext extends baseAudioContextConstructor<IAudioContext> implements IAudioContext {\n        private _baseLatency: number;\n\n        private _nativeAudioContext: TNativeAudioContext;\n\n        private _nativeGainNode: null | TNativeGainNode;\n\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\n\n        private _state: null | 'suspended';\n\n        constructor(options: IAudioContextOptions = {}) {\n            if (nativeAudioContextConstructor === null) {\n                throw new Error('Missing the native AudioContext constructor.');\n            }\n\n            let nativeAudioContext: TNativeAudioContext;\n\n            try {\n                nativeAudioContext = new nativeAudioContextConstructor(options);\n            } catch (err) {\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\n            if (nativeAudioContext === null) {\n                throw createUnknownError();\n            }\n\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\n            if (!isValidLatencyHint(options.latencyHint)) {\n                throw new TypeError(\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\n                );\n            }\n\n            // Bug #150 Safari does not support setting the sampleRate.\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\n                throw createNotSupportedError();\n            }\n\n            super(nativeAudioContext, 2);\n\n            const { latencyHint } = options;\n            const { sampleRate } = nativeAudioContext;\n\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\n            this._baseLatency =\n                typeof nativeAudioContext.baseLatency === 'number'\n                    ? nativeAudioContext.baseLatency\n                    : latencyHint === 'balanced'\n                    ? 512 / sampleRate\n                    : latencyHint === 'interactive' || latencyHint === undefined\n                    ? 256 / sampleRate\n                    : latencyHint === 'playback'\n                    ? 1024 / sampleRate\n                    : /*\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\n                       * ScriptProcessorNode.\n                       */\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\n            this._nativeAudioContext = nativeAudioContext;\n\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                this._nativeGainNode = nativeAudioContext.createGain();\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\n\n                this._nativeGainNode.gain.value = 1e-37;\n\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\n                this._nativeOscillatorNode.start();\n            } else {\n                this._nativeGainNode = null;\n                this._nativeOscillatorNode = null;\n            }\n\n            this._state = null;\n\n            /*\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\n             * to 'running'.\n             */\n            if (nativeAudioContext.state === 'running') {\n                this._state = 'suspended';\n\n                const revokeState = () => {\n                    if (this._state === 'suspended') {\n                        this._state = null;\n                    }\n\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\n                };\n\n                nativeAudioContext.addEventListener('statechange', revokeState);\n            }\n        }\n\n        get baseLatency(): number {\n            return this._baseLatency;\n        }\n\n        get state(): TAudioContextState {\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\n        }\n\n        public close(): Promise<void> {\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\n            if (this.state === 'closed') {\n                return this._nativeAudioContext.close().then(() => {\n                    throw createInvalidStateError();\n                });\n            }\n\n            // Bug #34: If the state was set to suspended before it should be revoked now.\n            if (this._state === 'suspended') {\n                this._state = null;\n            }\n\n            return this._nativeAudioContext.close().then(() => {\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\n                    this._nativeOscillatorNode.stop();\n\n                    this._nativeGainNode.disconnect();\n                    this._nativeOscillatorNode.disconnect();\n                }\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        public createMediaElementSource(mediaElement: HTMLMediaElement): IMediaElementAudioSourceNode<this> {\n            return new mediaElementAudioSourceNodeConstructor(this, { mediaElement });\n        }\n\n        public createMediaStreamDestination(): IMediaStreamAudioDestinationNode<this> {\n            return new mediaStreamAudioDestinationNodeConstructor(this);\n        }\n\n        public createMediaStreamSource(mediaStream: MediaStream): IMediaStreamAudioSourceNode<this> {\n            return new mediaStreamAudioSourceNodeConstructor(this, { mediaStream });\n        }\n\n        public createMediaStreamTrackSource(mediaStreamTrack: MediaStreamTrack): IMediaStreamTrackAudioSourceNode<this> {\n            return new mediaStreamTrackAudioSourceNodeConstructor(this, { mediaStreamTrack });\n        }\n\n        public resume(): Promise<void> {\n            if (this._state === 'suspended') {\n                return new Promise((resolve, reject) => {\n                    const resolvePromise = () => {\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\n\n                        if (this._nativeAudioContext.state === 'running') {\n                            resolve();\n                        } else {\n                            this.resume().then(resolve, reject);\n                        }\n                    };\n\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\n                });\n            }\n\n            return this._nativeAudioContext.resume().catch((err) => {\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined || err.code === 15) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n\n        public suspend(): Promise<void> {\n            return this._nativeAudioContext.suspend().catch((err) => {\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n    };\n};\n", "import { IAudioDestinationNode } from '../interfaces';\nimport {\n    TAudioDestinationNodeConstructorFactory,\n    TAudioNodeRenderer,\n    TChannelCountMode,\n    TContext,\n    TNativeAudioDestinationNode\n} from '../types';\n\nexport const createAudioDestinationNodeConstructor: TAudioDestinationNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioDestinationNodeRenderer,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeAudioDestinationNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    renderInputsOfAudioNode\n) => {\n    return class AudioDestinationNode<T extends TContext> extends audioNodeConstructor<T> implements IAudioDestinationNode<T> {\n        private _isNodeOfNativeOfflineAudioContext: boolean;\n\n        private _nativeAudioDestinationNode: TNativeAudioDestinationNode;\n\n        constructor(context: T, channelCount: number) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const nativeAudioDestinationNode = createNativeAudioDestinationNode(nativeContext, channelCount, isOffline);\n            const audioDestinationNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createAudioDestinationNodeRenderer(renderInputsOfAudioNode) : null)\n            );\n\n            super(context, false, nativeAudioDestinationNode, audioDestinationNodeRenderer);\n\n            this._isNodeOfNativeOfflineAudioContext = isOffline;\n            this._nativeAudioDestinationNode = nativeAudioDestinationNode;\n        }\n\n        get channelCount(): number {\n            return this._nativeAudioDestinationNode.channelCount;\n        }\n\n        set channelCount(value) {\n            // Bug #52: Chrome, Edge & Safari do not throw an exception at all.\n            // Bug #54: Firefox does throw an IndexSizeError.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n\n            // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n            if (value > this._nativeAudioDestinationNode.maxChannelCount) {\n                throw createIndexSizeError();\n            }\n\n            this._nativeAudioDestinationNode.channelCount = value;\n        }\n\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeAudioDestinationNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            // Bug #53: No browser does throw an exception yet.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n\n            this._nativeAudioDestinationNode.channelCountMode = value;\n        }\n\n        get maxChannelCount(): number {\n            return this._nativeAudioDestinationNode.maxChannelCount;\n        }\n    };\n};\n", "import { IAudioDestinationNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport {\n    TAudioDestinationNodeRendererFactory,\n    TNativeAudioDestinationNode,\n    TNativeOfflineAudioContext,\n    TRenderInputsOfAudioNodeFunction\n} from '../types';\n\nexport const createAudioDestinationNodeRenderer: TAudioDestinationNodeRendererFactory = <\n    T extends IMinimalOfflineAudioContext | IOfflineAudioContext\n>(\n    renderInputsOfAudioNode: TRenderInputsOfAudioNodeFunction\n) => {\n    const renderedNativeAudioDestinationNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioDestinationNode>();\n\n    const createAudioDestinationNode = async (proxy: IAudioDestinationNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeOfflineAudioContext.destination;\n\n        renderedNativeAudioDestinationNodes.set(nativeOfflineAudioContext, nativeAudioDestinationNode);\n\n        await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioDestinationNode);\n\n        return nativeAudioDestinationNode;\n    };\n\n    return {\n        render(\n            proxy: IAudioDestinationNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ): Promise<TNativeAudioDestinationNode> {\n            const renderedNativeAudioDestinationNode = renderedNativeAudioDestinationNodes.get(nativeOfflineAudioContext);\n\n            if (renderedNativeAudioDestinationNode !== undefined) {\n                return Promise.resolve(renderedNativeAudioDestinationNode);\n            }\n\n            return createAudioDestinationNode(proxy, nativeOfflineAudioContext);\n        }\n    };\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam } from '../interfaces';\nimport { TAudioListenerFactoryFactory } from '../types';\n\nexport const createAudioListenerFactory: TAudioListenerFactoryFactory = (\n    createAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    getFirstSample,\n    isNativeOfflineAudioContext,\n    overwriteAccessors\n) => {\n    return (context, nativeContext) => {\n        const nativeListener = nativeContext.listener;\n\n        // Bug #117: Only Chrome & Edge support the new interface already.\n        const createFakeAudioParams = () => {\n            const buffer = new Float32Array(1);\n            const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'speakers',\n                numberOfInputs: 9\n            });\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            let isScriptProcessorNodeCreated = false;\n            let lastOrientation: [number, number, number, number, number, number] = [0, 0, -1, 0, 1, 0];\n            let lastPosition: [number, number, number] = [0, 0, 0];\n\n            const createScriptProcessorNode = () => {\n                if (isScriptProcessorNodeCreated) {\n                    return;\n                }\n\n                isScriptProcessorNodeCreated = true;\n\n                const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\n\n                // tslint:disable-next-line:deprecation\n                scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n                    const orientation: [number, number, number, number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 0),\n                        getFirstSample(inputBuffer, buffer, 1),\n                        getFirstSample(inputBuffer, buffer, 2),\n                        getFirstSample(inputBuffer, buffer, 3),\n                        getFirstSample(inputBuffer, buffer, 4),\n                        getFirstSample(inputBuffer, buffer, 5)\n                    ];\n\n                    if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                        nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\n\n                        lastOrientation = orientation;\n                    }\n\n                    const positon: [number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 6),\n                        getFirstSample(inputBuffer, buffer, 7),\n                        getFirstSample(inputBuffer, buffer, 8)\n                    ];\n\n                    if (positon.some((value, index) => value !== lastPosition[index])) {\n                        nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\n\n                        lastPosition = positon;\n                    }\n                };\n\n                channelMergerNode.connect(scriptProcessorNode);\n            };\n            const createSetOrientation = (index: number) => (value: number) => {\n                if (value !== lastOrientation[index]) {\n                    lastOrientation[index] = value;\n\n                    nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n                }\n            };\n            const createSetPosition = (index: number) => (value: number) => {\n                if (value !== lastPosition[index]) {\n                    lastPosition[index] = value;\n\n                    nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\n                }\n            };\n            const createFakeAudioParam = (input: number, initialValue: number, setValue: (value: number) => void) => {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset: initialValue\n                });\n\n                constantSourceNode.connect(channelMergerNode, 0, input);\n\n                // @todo This should be stopped when the context is closed.\n                constantSourceNode.start();\n\n                Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\n                    get(): number {\n                        return initialValue;\n                    }\n                });\n\n                /*\n                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\n                 * minValue for GainNodes.\n                 */\n                const audioParam = createAudioParam(\n                    <any>{ context },\n                    isOffline,\n                    constantSourceNode.offset,\n                    MOST_POSITIVE_SINGLE_FLOAT,\n                    MOST_NEGATIVE_SINGLE_FLOAT\n                );\n\n                overwriteAccessors(\n                    audioParam,\n                    'value',\n                    (get) => () => get.call(audioParam),\n                    (set) => (value) => {\n                        try {\n                            set.call(audioParam, value);\n                        } catch (err) {\n                            if (err.code !== 9) {\n                                throw err;\n                            }\n                        }\n\n                        createScriptProcessorNode();\n\n                        if (isOffline) {\n                            // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\n                            setValue(value);\n                        }\n                    }\n                );\n\n                audioParam.cancelAndHoldAtTime = ((cancelAndHoldAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelAndHoldAtTime']>) => {\n                        const value = cancelAndHoldAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelAndHoldAtTime);\n                audioParam.cancelScheduledValues = ((cancelScheduledValues) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelScheduledValues']>) => {\n                        const value = cancelScheduledValues.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelScheduledValues);\n                audioParam.exponentialRampToValueAtTime = ((exponentialRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['exponentialRampToValueAtTime']>) => {\n                        const value = exponentialRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.exponentialRampToValueAtTime);\n                audioParam.linearRampToValueAtTime = ((linearRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['linearRampToValueAtTime']>) => {\n                        const value = linearRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.linearRampToValueAtTime);\n                audioParam.setTargetAtTime = ((setTargetAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setTargetAtTime']>) => {\n                        const value = setTargetAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setTargetAtTime);\n                audioParam.setValueAtTime = ((setValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueAtTime']>) => {\n                        const value = setValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueAtTime);\n                audioParam.setValueCurveAtTime = ((setValueCurveAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueCurveAtTime']>) => {\n                        const value = setValueCurveAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueCurveAtTime);\n\n                return audioParam;\n            };\n\n            return {\n                forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\n                forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\n                forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\n                positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\n                positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\n                positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\n                upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\n                upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\n                upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\n            };\n        };\n\n        const { forwardX, forwardY, forwardZ, positionX, positionY, positionZ, upX, upY, upZ } =\n            nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\n\n        return {\n            get forwardX(): IAudioParam {\n                return forwardX;\n            },\n            get forwardY(): IAudioParam {\n                return forwardY;\n            },\n            get forwardZ(): IAudioParam {\n                return forwardZ;\n            },\n            get positionX(): IAudioParam {\n                return positionX;\n            },\n            get positionY(): IAudioParam {\n                return positionY;\n            },\n            get positionZ(): IAudioParam {\n                return positionZ;\n            },\n            get upX(): IAudioParam {\n                return upX;\n            },\n            get upY(): IAudioParam {\n                return upY;\n            },\n            get upZ(): IAudioParam {\n                return upZ;\n            }\n        };\n    };\n};\n", "import { IAudioNode, IAudioParam } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isAudioNode = <T extends TContext>(\n    audioNodeOrAudioParam: IAudioNode<T> | IAudioParam\n): audioNodeOrAudioParam is IAudioNode<T> => {\n    return 'context' in audioNodeOrAudioParam;\n};\n", "import { TAudioNodeOutputConnection, TContext, TOutputConnection } from '../types';\nimport { isAudioNode } from './audio-node';\n\nexport const isAudioNodeOutputConnection = <T extends TContext>(\n    outputConnection: TOutputConnection<T>\n): outputConnection is TAudioNodeOutputConnection<T> => {\n    return isAudioNode(outputConnection[0]);\n};\n", "import { TInsertElementInSetFunction } from '../types';\n\nexport const insertElementInSet: TInsertElementInSetFunction = (set, element, predicate, ignoreDuplicates) => {\n    for (const lmnt of set) {\n        if (predicate(lmnt)) {\n            if (ignoreDuplicates) {\n                return false;\n            }\n\n            throw Error('The set contains at least one similar element.');\n        }\n    }\n\n    set.add(element);\n\n    return true;\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { insertElementInSet } from './insert-element-in-set';\n\nexport const addActiveInputConnectionToAudioParam = <T extends TContext>(\n    activeInputs: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    [output, eventListener]: TPassiveAudioParamInputConnection,\n    ignoreDuplicates: boolean\n) => {\n    insertElementInSet(\n        activeInputs,\n        [source, output, eventListener],\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\n        ignoreDuplicates\n    );\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { insertElementInSet } from './insert-element-in-set';\n\nexport const addPassiveInputConnectionToAudioParam = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\n    [source, output, eventListener]: TActiveInputConnection<T>,\n    ignoreDuplicates: boolean\n) => {\n    const passiveInputConnections = passiveInputs.get(source);\n\n    if (passiveInputConnections === undefined) {\n        passiveInputs.set(source, new Set([[output, eventListener]]));\n    } else {\n        insertElementInSet(\n            passiveInputConnections,\n            [output, eventListener],\n            (passiveInputConnection) => passiveInputConnection[0] === output,\n            ignoreDuplicates\n        );\n    }\n};\n", "import { INativeAudioNodeFaker } from '../interfaces';\nimport { TNativeAudioNode } from '../types';\n\nexport const isNativeAudioNodeFaker = (\n    nativeAudioNodeOrNativeAudioNodeFaker: TNativeAudioNode | INativeAudioNodeFaker\n): nativeAudioNodeOrNativeAudioNodeFaker is INativeAudioNodeFaker => {\n    return 'inputs' in nativeAudioNodeOrNativeAudioNodeFaker;\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { INativeAudioNodeFaker } from '../interfaces';\nimport { TConnectNativeAudioNodeToNativeAudioNodeFunction, TNativeAudioNode } from '../types';\n\nexport const connectNativeAudioNodeToNativeAudioNode: TConnectNativeAudioNodeToNativeAudioNodeFunction = (\n    nativeSourceAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n    nativeDestinationAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n    output: number,\n    input: number\n): [TNativeAudioNode, number, number] => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        const fakeNativeDestinationAudioNode = nativeDestinationAudioNode.inputs[input];\n\n        nativeSourceAudioNode.connect(fakeNativeDestinationAudioNode, output, 0);\n\n        return [fakeNativeDestinationAudioNode, output, 0];\n    }\n\n    nativeSourceAudioNode.connect(nativeDestinationAudioNode, output, input);\n\n    return [nativeDestinationAudioNode, output, input];\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\n\nexport const deleteActiveInputConnection = <T extends TContext>(\n    activeInputConnections: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    output: number\n): null | TActiveInputConnection<T> => {\n    for (const activeInputConnection of activeInputConnections) {\n        if (activeInputConnection[0] === source && activeInputConnection[1] === output) {\n            activeInputConnections.delete(activeInputConnection);\n\n            return activeInputConnection;\n        }\n    }\n\n    return null;\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TActiveInputConnection, TContext } from '../types';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deleteActiveInputConnectionToAudioParam = <T extends TContext>(\n    activeInputs: Set<TActiveInputConnection<T>>,\n    source: IAudioNode<T>,\n    output: number\n) => {\n    return pickElementFromSet(\n        activeInputs,\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\n    );\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TContext, TInternalStateEventListener } from '../types';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\n\nexport const deleteEventListenerOfAudioNode = <T extends TContext>(\n    audioNode: IAudioNode<T>,\n    eventListener: TInternalStateEventListener\n) => {\n    const eventListeners = getEventListenersOfAudioNode(audioNode);\n\n    if (!eventListeners.delete(eventListener)) {\n        throw new Error('Missing the expected event listener.');\n    }\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TContext, TPassiveAudioParamInputConnection } from '../types';\nimport { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\n\nexport const deletePassiveInputConnectionToAudioParam = <T extends TContext>(\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\n    source: IAudioNode<T>,\n    output: number\n) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(\n        passiveInputConnections,\n        (passiveInputConnection) => passiveInputConnection[0] === output\n    );\n\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n\n    return matchingConnection;\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { TDisconnectNativeAudioNodeFromNativeAudioNodeFunction } from '../types';\n\nexport const disconnectNativeAudioNodeFromNativeAudioNode: TDisconnectNativeAudioNodeFromNativeAudioNodeFunction = (\n    nativeSourceAudioNode,\n    nativeDestinationAudioNode,\n    output,\n    input\n) => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode.inputs[input], output, 0);\n    } else {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode, output, input);\n    }\n};\n", "import { AUDIO_NODE_STORE } from '../globals';\nimport { IAudioNode, INativeAudioNodeFaker } from '../interfaces';\nimport { TContext, TGetNativeAudioNodeFunction, TNativeAudioNode } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getNativeAudioNode: TGetNativeAudioNodeFunction = <T extends TContext, U extends TNativeAudioNode | INativeAudioNodeFaker>(\n    audioNode: IAudioNode<T>\n): U => {\n    return <U>getValueForKey(AUDIO_NODE_STORE, audioNode);\n};\n", "import { AUDIO_PARAM_STORE } from '../globals';\nimport { IAudioParam } from '../interfaces';\nimport { TNativeAudioParam } from '../types';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getNativeAudioParam = (audioParam: IAudioParam): TNativeAudioParam => {\n    return getValueForKey(AUDIO_PARAM_STORE, audioParam);\n};\n", "import { CYCLE_COUNTERS } from '../globals';\nimport { TIsPartOfACycleFunction } from '../types';\n\nexport const isPartOfACycle: TIsPartOfACycleFunction = (audioNode) => {\n    return CYCLE_COUNTERS.has(audioNode);\n};\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { TIsPassiveAudioNodeFunction } from '../types';\n\nexport const isPassiveAudioNode: TIsPassiveAudioNodeFunction = (audioNode) => {\n    return !ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n};\n", "import { TNativeAudioContext, TNativeAudioWorkletNodeConstructor } from '../types';\n\nexport const testAudioNodeDisconnectMethodSupport = (\n    nativeAudioContext: TNativeAudioContext,\n    nativeAudioWorkletNodeConstructor: null | TNativeAudioWorkletNodeConstructor\n): Promise<boolean> => {\n    return new Promise((resolve) => {\n        /*\n         * This bug existed in Safari up until v14.0.2. Since AudioWorklets were not supported in Safari until v14.1 the presence of the\n         * constructor for an AudioWorkletNode can be used here to skip the test.\n         */\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            resolve(true);\n        } else {\n            const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1); // tslint:disable-line deprecation\n            const dummy = nativeAudioContext.createGain();\n            // Bug #95: Safari does not play one sample buffers.\n            const ones = nativeAudioContext.createBuffer(1, 2, 44100);\n            const channelData = ones.getChannelData(0);\n\n            channelData[0] = 1;\n            channelData[1] = 1;\n\n            const source = nativeAudioContext.createBufferSource();\n\n            source.buffer = ones;\n            source.loop = true;\n\n            source.connect(analyzer).connect(nativeAudioContext.destination);\n            source.connect(dummy);\n            source.disconnect(dummy);\n\n            // tslint:disable-next-line:deprecation\n            analyzer.onaudioprocess = (event) => {\n                const chnnlDt = event.inputBuffer.getChannelData(0); // tslint:disable-line deprecation\n\n                if (Array.prototype.some.call(chnnlDt, (sample: number) => sample === 1)) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n\n                source.stop();\n\n                analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\n\n                source.disconnect(analyzer);\n                analyzer.disconnect(nativeAudioContext.destination);\n            };\n\n            source.start();\n        }\n    });\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const visitEachAudioNodeOnce = <T extends TContext>(\n    cycles: IAudioNode<T>[][],\n    visitor: (audioNode: IAudioNode<T>, count: number) => void\n): void => {\n    const counts = new Map<IAudioNode<T>, number>();\n\n    for (const cycle of cycles) {\n        for (const audioNode of cycle) {\n            const count = counts.get(audioNode);\n\n            counts.set(audioNode, count === undefined ? 1 : count + 1);\n        }\n    }\n\n    counts.forEach((count, audioNode) => visitor(audioNode, count));\n};\n", "import { TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const isNativeAudioNode = (\n    nativeAudioNodeOrAudioParam: TNativeAudioNode | TNativeAudioParam\n): nativeAudioNodeOrAudioParam is TNativeAudioNode => {\n    return 'context' in nativeAudioNodeOrAudioParam;\n};\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const wrapAudioNodeDisconnectMethod = (nativeAudioNode: TNativeAudioNode): void => {\n    const connections = new Map<TNativeAudioNode | TNativeAudioParam, { input: number; output: number }[]>();\n\n    nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\n        // tslint:disable-next-line:invalid-void no-inferrable-types\n        return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\n            const returnValue = isNativeAudioNode(destination) ? connect(destination, output, input) : connect(destination, output);\n\n            // Save the new connection only if the calls to connect above didn't throw an error.\n            const connectionsToDestination = connections.get(destination);\n\n            if (connectionsToDestination === undefined) {\n                connections.set(destination, [{ input, output }]);\n            } else {\n                if (connectionsToDestination.every((connection) => connection.input !== input || connection.output !== output)) {\n                    connectionsToDestination.push({ input, output });\n                }\n            }\n\n            return returnValue;\n        };\n    })(nativeAudioNode.connect.bind(nativeAudioNode));\n\n    nativeAudioNode.disconnect = ((disconnect) => {\n        return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\n            disconnect.apply(nativeAudioNode);\n\n            if (destinationOrOutput === undefined) {\n                connections.clear();\n            } else if (typeof destinationOrOutput === 'number') {\n                for (const [destination, connectionsToDestination] of connections) {\n                    const filteredConnections = connectionsToDestination.filter((connection) => connection.output !== destinationOrOutput);\n\n                    if (filteredConnections.length === 0) {\n                        connections.delete(destination);\n                    } else {\n                        connections.set(destination, filteredConnections);\n                    }\n                }\n            } else if (connections.has(destinationOrOutput)) {\n                if (output === undefined) {\n                    connections.delete(destinationOrOutput);\n                } else {\n                    const connectionsToDestination = connections.get(destinationOrOutput);\n\n                    if (connectionsToDestination !== undefined) {\n                        const filteredConnections = connectionsToDestination.filter(\n                            (connection) => connection.output !== output && (connection.input !== input || input === undefined)\n                        );\n\n                        if (filteredConnections.length === 0) {\n                            connections.delete(destinationOrOutput);\n                        } else {\n                            connections.set(destinationOrOutput, filteredConnections);\n                        }\n                    }\n                }\n            }\n\n            for (const [destination, connectionsToDestination] of connections) {\n                connectionsToDestination.forEach((connection) => {\n                    if (isNativeAudioNode(destination)) {\n                        nativeAudioNode.connect(destination, connection.output, connection.input);\n                    } else {\n                        nativeAudioNode.connect(destination, connection.output);\n                    }\n                });\n            }\n        };\n    })(nativeAudioNode.disconnect);\n};\n", "import { AUDIO_NODE_STORE, EVENT_LISTENERS } from '../globals';\nimport { isAudioNode } from '../guards/audio-node';\nimport { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { addActiveInputConnectionToAudioParam } from '../helpers/add-active-input-connection-to-audio-param';\nimport { addPassiveInputConnectionToAudioParam } from '../helpers/add-passive-input-connection-to-audio-param';\nimport { connectNativeAudioNodeToNativeAudioNode } from '../helpers/connect-native-audio-node-to-native-audio-node';\nimport { deleteActiveInputConnection } from '../helpers/delete-active-input-connection';\nimport { deleteActiveInputConnectionToAudioParam } from '../helpers/delete-active-input-connection-to-audio-param';\nimport { deleteEventListenerOfAudioNode } from '../helpers/delete-event-listeners-of-audio-node';\nimport { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { deletePassiveInputConnectionToAudioParam } from '../helpers/delete-passive-input-connection-to-audio-param';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from '../helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from '../helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from '../helpers/get-event-listeners-of-audio-node';\nimport { getNativeAudioNode } from '../helpers/get-native-audio-node';\nimport { getNativeAudioParam } from '../helpers/get-native-audio-param';\nimport { insertElementInSet } from '../helpers/insert-element-in-set';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { isPartOfACycle } from '../helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from '../helpers/is-passive-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nimport { testAudioNodeDisconnectMethodSupport } from '../helpers/test-audio-node-disconnect-method-support';\nimport { visitEachAudioNodeOnce } from '../helpers/visit-each-audio-node-once';\nimport { wrapAudioNodeDisconnectMethod } from '../helpers/wrap-audio-node-disconnect-method';\nimport {\n    IAudioNode,\n    IAudioNodeRenderer,\n    IAudioParam,\n    IMinimalOfflineAudioContext,\n    INativeAudioNodeFaker,\n    IOfflineAudioContext\n} from '../interfaces';\nimport {\n    TAudioNodeConstructorFactory,\n    TChannelCountMode,\n    TChannelInterpretation,\n    TContext,\n    TInternalStateEventListener,\n    TNativeAudioNode,\n    TNativeAudioParam\n} from '../types';\n\nconst addConnectionToAudioParamOfAudioContext = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioParam,\n    output: number,\n    isOffline: boolean\n): boolean => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\n    const { outputs } = getAudioNodeConnections(source);\n    const eventListeners = getEventListenersOfAudioNode(source);\n\n    const eventListener: TInternalStateEventListener = (isActive) => {\n        const nativeAudioNode = getNativeAudioNode(source);\n        const nativeAudioParam = getNativeAudioParam(destination);\n\n        if (isActive) {\n            const partialConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n\n            addActiveInputConnectionToAudioParam(activeInputs, source, partialConnection, false);\n\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.connect(nativeAudioParam, output);\n            }\n        } else {\n            const partialConnection = deleteActiveInputConnectionToAudioParam(activeInputs, source, output);\n\n            addPassiveInputConnectionToAudioParam(passiveInputs, partialConnection, false);\n\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.disconnect(nativeAudioParam, output);\n            }\n        }\n    };\n\n    if (\n        insertElementInSet(\n            outputs,\n            [destination, output],\n            (outputConnection) => outputConnection[0] === destination && outputConnection[1] === output,\n            true\n        )\n    ) {\n        eventListeners.add(eventListener);\n\n        if (isActiveAudioNode(source)) {\n            addActiveInputConnectionToAudioParam(activeInputs, source, [output, eventListener], true);\n        } else {\n            addPassiveInputConnectionToAudioParam(passiveInputs, [source, output, eventListener], true);\n        }\n\n        return true;\n    }\n\n    return false;\n};\n\nconst deleteInputConnectionOfAudioNode = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioNode<T>,\n    output: number,\n    input: number\n): [null | TInternalStateEventListener, boolean] => {\n    const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n\n    const activeInputConnection = deleteActiveInputConnection(activeInputs[input], source, output);\n\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n\n        return [passiveInputConnection[2], false];\n    }\n\n    return [activeInputConnection[2], true];\n};\n\nconst deleteInputConnectionOfAudioParam = <T extends TContext>(\n    source: IAudioNode<T>,\n    destination: IAudioParam,\n    output: number\n): [null | TInternalStateEventListener, boolean] => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\n\n    const activeInputConnection = deleteActiveInputConnection(activeInputs, source, output);\n\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n\n        return [passiveInputConnection[1], false];\n    }\n\n    return [activeInputConnection[2], true];\n};\n\nconst deleteInputsOfAudioNode = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioNode<T>,\n    output: number,\n    input: number\n) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioNode(source, destination, output, input);\n\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(source), getNativeAudioNode(destination), output, input);\n        }\n    }\n\n    if (isActiveAudioNode(destination)) {\n        const { activeInputs } = getAudioNodeConnections(destination);\n\n        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n    }\n};\n\nconst deleteInputsOfAudioParam = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioParam,\n    output: number\n) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioParam(source, destination, output);\n\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            getNativeAudioNode(source).disconnect(getNativeAudioParam(destination), output);\n        }\n    }\n};\n\nconst deleteAnyConnection = <T extends TContext>(source: IAudioNode<T>, isOffline: boolean): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (isAudioNodeOutputConnection(outputConnection)) {\n            deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n        } else {\n            deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n        }\n\n        destinations.push(outputConnection[0]);\n    }\n\n    audioNodeConnectionsOfSource.outputs.clear();\n\n    return destinations;\n};\n\nconst deleteConnectionAtOutput = <T extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    output: number\n): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (outputConnection[1] === output) {\n            if (isAudioNodeOutputConnection(outputConnection)) {\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n            } else {\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n            }\n\n            destinations.push(outputConnection[0]);\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n        }\n    }\n\n    return destinations;\n};\n\nconst deleteConnectionToDestination = <T extends TContext, U extends TContext>(\n    source: IAudioNode<T>,\n    isOffline: boolean,\n    destination: IAudioNode<U> | IAudioParam,\n    output?: number,\n    input?: number\n): (IAudioNode<T> | IAudioParam)[] => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n\n    return Array.from(audioNodeConnectionsOfSource.outputs)\n        .filter(\n            (outputConnection) =>\n                outputConnection[0] === destination &&\n                (output === undefined || outputConnection[1] === output) &&\n                (input === undefined || outputConnection[2] === input)\n        )\n        .map((outputConnection) => {\n            if (isAudioNodeOutputConnection(outputConnection)) {\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n            } else {\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n            }\n\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n\n            return outputConnection[0];\n        });\n};\n\nexport const createAudioNodeConstructor: TAudioNodeConstructorFactory = (\n    addAudioNodeConnections,\n    addConnectionToAudioNode,\n    cacheTestResult,\n    createIncrementCycleCounter,\n    createIndexSizeError,\n    createInvalidAccessError,\n    createNotSupportedError,\n    decrementCycleCounter,\n    detectCycles,\n    eventTargetConstructor,\n    getNativeContext,\n    isNativeAudioContext,\n    isNativeAudioNode,\n    isNativeAudioParam,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor\n) => {\n    return class AudioNode<T extends TContext, EventMap extends Record<string, Event> = {}>\n        extends eventTargetConstructor<EventMap>\n        implements IAudioNode<T, EventMap>\n    {\n        private _context: T;\n\n        private _nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode;\n\n        constructor(\n            context: T,\n            isActive: boolean,\n            nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\n            audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null\n        ) {\n            super(nativeAudioNode);\n\n            this._context = context;\n            this._nativeAudioNode = nativeAudioNode;\n\n            const nativeContext = getNativeContext(context);\n\n            // Bug #12: Safari does not support to disconnect a specific destination.\n            if (\n                isNativeAudioContext(nativeContext) &&\n                true !==\n                    cacheTestResult(testAudioNodeDisconnectMethodSupport, () => {\n                        return testAudioNodeDisconnectMethodSupport(nativeContext, nativeAudioWorkletNodeConstructor);\n                    })\n            ) {\n                wrapAudioNodeDisconnectMethod(nativeAudioNode);\n            }\n\n            AUDIO_NODE_STORE.set(this, nativeAudioNode);\n            EVENT_LISTENERS.set(this, new Set());\n\n            if (context.state !== 'closed' && isActive) {\n                setInternalStateToActive(this);\n            }\n\n            addAudioNodeConnections(this, audioNodeRenderer, nativeAudioNode);\n        }\n\n        get channelCount(): number {\n            return this._nativeAudioNode.channelCount;\n        }\n\n        set channelCount(value) {\n            this._nativeAudioNode.channelCount = value;\n        }\n\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeAudioNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            this._nativeAudioNode.channelCountMode = value;\n        }\n\n        get channelInterpretation(): TChannelInterpretation {\n            return this._nativeAudioNode.channelInterpretation;\n        }\n\n        set channelInterpretation(value) {\n            this._nativeAudioNode.channelInterpretation = value;\n        }\n\n        get context(): T {\n            return this._context;\n        }\n\n        get numberOfInputs(): number {\n            return this._nativeAudioNode.numberOfInputs;\n        }\n\n        get numberOfOutputs(): number {\n            return this._nativeAudioNode.numberOfOutputs;\n        }\n\n        public connect<U extends TContext, V extends IAudioNode<U>>(destinationNode: V, output?: number, input?: number): V;\n        public connect(destinationParam: IAudioParam, output?: number): void;\n        // tslint:disable-next-line:invalid-void\n        public connect<U extends TContext, V extends IAudioNode<U>>(destination: V | IAudioParam, output = 0, input = 0): void | V {\n            // Bug #174: Safari does expose a wrong numberOfOutputs for MediaStreamAudioDestinationNodes.\n            if (output < 0 || output >= this._nativeAudioNode.numberOfOutputs) {\n                throw createIndexSizeError();\n            }\n\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            if (isNativeAudioNode(destination) || isNativeAudioParam(destination)) {\n                throw createInvalidAccessError();\n            }\n\n            if (isAudioNode(destination)) {\n                const nativeDestinationAudioNode = getNativeAudioNode(destination);\n\n                try {\n                    const connection = connectNativeAudioNodeToNativeAudioNode(\n                        this._nativeAudioNode,\n                        nativeDestinationAudioNode,\n                        output,\n                        input\n                    );\n\n                    const isPassive = isPassiveAudioNode(this);\n\n                    if (isOffline || isPassive) {\n                        this._nativeAudioNode.disconnect(...connection);\n                    }\n\n                    if (this.context.state !== 'closed' && !isPassive && isPassiveAudioNode(destination)) {\n                        setInternalStateToActive(destination);\n                    }\n                } catch (err) {\n                    // Bug #41: Safari does not throw the correct exception so far.\n                    if (err.code === 12) {\n                        throw createInvalidAccessError();\n                    }\n\n                    throw err;\n                }\n\n                const isNewConnectionToAudioNode = addConnectionToAudioNode(\n                    this,\n                    <IAudioNode<TContext>>destination,\n                    output,\n                    input,\n                    isOffline\n                );\n\n                // Bug #164: Only Firefox detects cycles so far.\n                if (isNewConnectionToAudioNode) {\n                    const cycles = detectCycles([this], <IAudioNode<T>>(<unknown>destination));\n\n                    visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n                }\n\n                return destination;\n            }\n\n            const nativeAudioParam = getNativeAudioParam(destination);\n\n            /*\n             * Bug #73, #147 & #153: Safari does not support to connect an input signal to the playbackRate AudioParam of an\n             * AudioBufferSourceNode. This can't be easily detected and that's why the outdated name property is used here to identify\n             * Safari. In addition to that the maxValue property is used to only detect the affected versions below v14.0.2.\n             */\n            if ((<TNativeAudioParam & { name: string }>nativeAudioParam).name === 'playbackRate' && nativeAudioParam.maxValue === 1024) {\n                throw createNotSupportedError();\n            }\n\n            try {\n                this._nativeAudioNode.connect(nativeAudioParam, output);\n\n                if (isOffline || isPassiveAudioNode(this)) {\n                    this._nativeAudioNode.disconnect(nativeAudioParam, output);\n                }\n            } catch (err) {\n                // Bug #58: Safari doesn't throw an InvalidAccessError yet.\n                if (err.code === 12) {\n                    throw createInvalidAccessError();\n                }\n\n                throw err;\n            }\n\n            const isNewConnectionToAudioParam = addConnectionToAudioParamOfAudioContext(this, destination, output, isOffline);\n\n            // Bug #164: Only Firefox detects cycles so far.\n            if (isNewConnectionToAudioParam) {\n                const cycles = detectCycles([this], destination);\n\n                visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n            }\n        }\n\n        public disconnect(output?: number): void;\n        public disconnect<U extends TContext>(destinationNode: IAudioNode<U>, output?: number, input?: number): void;\n        public disconnect(destinationParam: IAudioParam, output?: number): void;\n        public disconnect<U extends TContext>(\n            destinationOrOutput?: number | IAudioNode<U> | IAudioParam,\n            output?: number,\n            input?: number\n        ): void {\n            let destinations: (IAudioNode<T> | IAudioParam)[];\n\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            if (destinationOrOutput === undefined) {\n                destinations = deleteAnyConnection(this, isOffline);\n            } else if (typeof destinationOrOutput === 'number') {\n                if (destinationOrOutput < 0 || destinationOrOutput >= this.numberOfOutputs) {\n                    throw createIndexSizeError();\n                }\n\n                destinations = deleteConnectionAtOutput(this, isOffline, destinationOrOutput);\n            } else {\n                if (output !== undefined && (output < 0 || output >= this.numberOfOutputs)) {\n                    throw createIndexSizeError();\n                }\n\n                if (isAudioNode(destinationOrOutput) && input !== undefined && (input < 0 || input >= destinationOrOutput.numberOfInputs)) {\n                    throw createIndexSizeError();\n                }\n\n                destinations = deleteConnectionToDestination(this, isOffline, destinationOrOutput, output, input);\n\n                if (destinations.length === 0) {\n                    throw createInvalidAccessError();\n                }\n            }\n\n            // Bug #164: Only Firefox detects cycles so far.\n            for (const destination of destinations) {\n                const cycles = detectCycles([this], destination);\n\n                visitEachAudioNodeOnce(cycles, decrementCycleCounter);\n            }\n        }\n    };\n};\n", "import { AutomationEventList } from 'automation-events';\nimport { IAudioNode, IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TAudioParamFactoryFactory, TContext, TNativeAudioParam } from '../types';\n\nexport const createAudioParamFactory: TAudioParamFactoryFactory = (\n    addAudioParamConnections,\n    audioParamAudioNodeStore,\n    audioParamStore,\n    createAudioParamRenderer,\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent,\n    nativeAudioContextConstructor,\n    setValueAtTimeUntilPossible\n) => {\n    return <T extends TContext>(\n        audioNode: IAudioNode<T>,\n        isAudioParamOfOfflineAudioContext: boolean,\n        nativeAudioParam: TNativeAudioParam,\n        maxValue: null | number = null,\n        minValue: null | number = null\n    ): IAudioParam => {\n        // Bug #196 Only Safari sets the defaultValue to the initial value.\n        const defaultValue = nativeAudioParam.value;\n        const automationEventList = new AutomationEventList(defaultValue);\n        const audioParamRenderer = isAudioParamOfOfflineAudioContext ? createAudioParamRenderer(automationEventList) : null;\n        const audioParam = {\n            get defaultValue(): number {\n                return defaultValue;\n            },\n            get maxValue(): number {\n                return maxValue === null ? nativeAudioParam.maxValue : maxValue;\n            },\n            get minValue(): number {\n                return minValue === null ? nativeAudioParam.minValue : minValue;\n            },\n            get value(): number {\n                return nativeAudioParam.value;\n            },\n            set value(value) {\n                nativeAudioParam.value = value;\n\n                // Bug #98: Firefox & Safari do not yet treat the value setter like a call to setValueAtTime().\n                audioParam.setValueAtTime(value, audioNode.context.currentTime);\n            },\n            cancelAndHoldAtTime(cancelTime: number): IAudioParam {\n                // Bug #28: Firefox & Safari do not yet implement cancelAndHoldAtTime().\n                if (typeof nativeAudioParam.cancelAndHoldAtTime === 'function') {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n                    nativeAudioParam.cancelAndHoldAtTime(cancelTime);\n                } else {\n                    const previousLastEvent = Array.from(automationEventList).pop();\n\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n\n                    const currentLastEvent = Array.from(automationEventList).pop();\n\n                    nativeAudioParam.cancelScheduledValues(cancelTime);\n\n                    if (previousLastEvent !== currentLastEvent && currentLastEvent !== undefined) {\n                        if (currentLastEvent.type === 'exponentialRampToValue') {\n                            nativeAudioParam.exponentialRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        } else if (currentLastEvent.type === 'linearRampToValue') {\n                            nativeAudioParam.linearRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        } else if (currentLastEvent.type === 'setValue') {\n                            nativeAudioParam.setValueAtTime(currentLastEvent.value, currentLastEvent.startTime);\n                        } else if (currentLastEvent.type === 'setValueCurve') {\n                            nativeAudioParam.setValueCurveAtTime(\n                                currentLastEvent.values,\n                                currentLastEvent.startTime,\n                                currentLastEvent.duration\n                            );\n                        }\n                    }\n                }\n\n                return audioParam;\n            },\n            cancelScheduledValues(cancelTime: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createCancelScheduledValuesAutomationEvent(cancelTime));\n                nativeAudioParam.cancelScheduledValues(cancelTime);\n\n                return audioParam;\n            },\n            exponentialRampToValueAtTime(value: number, endTime: number): IAudioParam {\n                // Bug #45: Safari does not throw an error yet.\n                if (value === 0) {\n                    throw new RangeError();\n                }\n\n                // Bug #187: Safari does not throw an error yet.\n                if (!Number.isFinite(endTime) || endTime < 0) {\n                    throw new RangeError();\n                }\n\n                const currentTime = audioNode.context.currentTime;\n\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n\n                // Bug #194: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n\n                automationEventList.add(createExponentialRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.exponentialRampToValueAtTime(value, endTime);\n\n                return audioParam;\n            },\n            linearRampToValueAtTime(value: number, endTime: number): IAudioParam {\n                const currentTime = audioNode.context.currentTime;\n\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n\n                // Bug #195: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n\n                automationEventList.add(createLinearRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.linearRampToValueAtTime(value, endTime);\n\n                return audioParam;\n            },\n            setTargetAtTime(target: number, startTime: number, timeConstant: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createSetTargetAutomationEvent(target, startTime, timeConstant));\n                nativeAudioParam.setTargetAtTime(target, startTime, timeConstant);\n\n                return audioParam;\n            },\n            setValueAtTime(value: number, startTime: number): IAudioParam {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n\n                automationEventList.add(createSetValueAutomationEvent(value, startTime));\n                nativeAudioParam.setValueAtTime(value, startTime);\n\n                return audioParam;\n            },\n            setValueCurveAtTime(values: Iterable<number>, startTime: number, duration: number): IAudioParam {\n                // Bug 183: Safari only accepts a Float32Array.\n                const convertedValues = values instanceof Float32Array ? values : new Float32Array(values);\n                /*\n                 * Bug #152: Safari does not correctly interpolate the values of the curve.\n                 * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the\n                 * existence of the webkitAudioContext is used as a workaround here.\n                 */\n                if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                    const endTime = startTime + duration;\n                    const sampleRate = audioNode.context.sampleRate;\n                    const firstSample = Math.ceil(startTime * sampleRate);\n                    const lastSample = Math.floor(endTime * sampleRate);\n                    const numberOfInterpolatedValues = lastSample - firstSample;\n                    const interpolatedValues = new Float32Array(numberOfInterpolatedValues);\n\n                    for (let i = 0; i < numberOfInterpolatedValues; i += 1) {\n                        const theoreticIndex = ((convertedValues.length - 1) / duration) * ((firstSample + i) / sampleRate - startTime);\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n\n                        interpolatedValues[i] =\n                            lowerIndex === upperIndex\n                                ? convertedValues[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * convertedValues[lowerIndex] +\n                                  (1 - (upperIndex - theoreticIndex)) * convertedValues[upperIndex];\n                    }\n\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createSetValueCurveAutomationEvent(interpolatedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(interpolatedValues, startTime, duration);\n\n                    const timeOfLastSample = lastSample / sampleRate;\n\n                    if (timeOfLastSample < endTime) {\n                        setValueAtTimeUntilPossible(audioParam, interpolatedValues[interpolatedValues.length - 1], timeOfLastSample);\n                    }\n\n                    setValueAtTimeUntilPossible(audioParam, convertedValues[convertedValues.length - 1], endTime);\n                } else {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n\n                    automationEventList.add(createSetValueCurveAutomationEvent(convertedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(convertedValues, startTime, duration);\n                }\n\n                return audioParam;\n            }\n        };\n\n        audioParamStore.set(audioParam, nativeAudioParam);\n        audioParamAudioNodeStore.set(audioParam, audioNode);\n\n        addAudioParamConnections(\n            audioParam,\n            <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null>audioParamRenderer\n        );\n\n        return audioParam;\n    };\n};\n", "import { TAudioParamRendererFactory, TNativeAudioParam } from '../types';\n\nexport const createAudioParamRenderer: TAudioParamRendererFactory = (automationEventList) => {\n    return {\n        replay(audioParam: TNativeAudioParam): void {\n            for (const automationEvent of automationEventList) {\n                if (automationEvent.type === 'exponentialRampToValue') {\n                    const { endTime, value } = automationEvent;\n\n                    audioParam.exponentialRampToValueAtTime(value, endTime);\n                } else if (automationEvent.type === 'linearRampToValue') {\n                    const { endTime, value } = automationEvent;\n\n                    audioParam.linearRampToValueAtTime(value, endTime);\n                } else if (automationEvent.type === 'setTarget') {\n                    const { startTime, target, timeConstant } = automationEvent;\n\n                    audioParam.setTargetAtTime(target, startTime, timeConstant);\n                } else if (automationEvent.type === 'setValue') {\n                    const { startTime, value } = automationEvent;\n\n                    audioParam.setValueAtTime(value, startTime);\n                } else if (automationEvent.type === 'setValueCurve') {\n                    const { duration, startTime, values } = automationEvent;\n\n                    audioParam.setValueCurveAtTime(values, startTime, duration);\n                } else {\n                    throw new Error(\"Can't apply an unknown automation.\");\n                }\n            }\n        }\n    };\n};\n", "import { IReadOnlyMap } from './interfaces';\n\nexport class ReadOnlyMap<T, U> implements IReadOnlyMap<T, U> {\n    private _map: Map<T, U>;\n\n    constructor(parameters: [T, U][]) {\n        this._map = new Map(parameters);\n    }\n\n    get size(): number {\n        return this._map.size;\n    }\n\n    public entries(): IterableIterator<[T, U]> {\n        return this._map.entries();\n    }\n\n    public forEach(callback: (audioParam: U, name: T, map: ReadOnlyMap<T, U>) => void, thisArg: any = null): void {\n        return this._map.forEach((value: U, key: T) => callback.call(thisArg, value, key, this));\n    }\n\n    public get(name: T): undefined | U {\n        return this._map.get(name);\n    }\n\n    public has(name: T): boolean {\n        return this._map.has(name);\n    }\n\n    public keys(): IterableIterator<T> {\n        return this._map.keys();\n    }\n\n    public values(): IterableIterator<U> {\n        return this._map.values();\n    }\n}\n", "import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport {\n    IAudioParam,\n    IAudioWorkletNode,\n    IAudioWorkletNodeEventMap,\n    IAudioWorkletNodeOptions,\n    IMinimalAudioContext,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IReadOnlyMap\n} from '../interfaces';\nimport { ReadOnlyMap } from '../read-only-map';\nimport {\n    TAudioNodeRenderer,\n    TAudioParamMap,\n    TAudioWorkletNodeConstructorFactory,\n    TContext,\n    TErrorEventHandler,\n    TNativeAudioContext,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    // Bug #61: The channelCountMode should be 'max' according to the spec but is set to 'explicit' to achieve consistent behavior.\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 1,\n    numberOfOutputs: 1,\n    parameterData: {},\n    processorOptions: {}\n} as const;\n\nexport const createAudioWorkletNodeConstructor: TAudioWorkletNodeConstructorFactory = (\n    addUnrenderedAudioWorkletNode,\n    audioNodeConstructor,\n    createAudioParam,\n    createAudioWorkletNodeRenderer,\n    createNativeAudioWorkletNode,\n    getAudioNodeConnections,\n    getBackupOfflineAudioContext,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor,\n    sanitizeAudioWorkletNodeOptions,\n    setActiveAudioWorkletNodeInputs,\n    testAudioWorkletNodeOptionsClonability,\n    wrapEventListener\n) => {\n    return class AudioWorkletNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioWorkletNodeEventMap>\n        implements IAudioWorkletNode<T>\n    {\n        private _nativeAudioWorkletNode: TNativeAudioWorkletNode;\n\n        private _onprocessorerror: null | TErrorEventHandler<this>;\n\n        private _parameters: null | TAudioParamMap;\n\n        constructor(context: T, name: string, options?: Partial<IAudioWorkletNodeOptions>) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = sanitizeAudioWorkletNodeOptions({ ...DEFAULT_OPTIONS, ...options });\n\n            // Bug #191: Safari doesn't throw an error if the options aren't clonable.\n            testAudioWorkletNodeOptionsClonability(mergedOptions);\n\n            const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n            const processorConstructor = nodeNameToProcessorConstructorMap?.get(name);\n            // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n            const nativeContextOrBackupOfflineAudioContext =\n                isOffline || nativeContext.state !== 'closed'\n                    ? nativeContext\n                    : getBackupOfflineAudioContext(<TNativeAudioContext>nativeContext) ?? nativeContext;\n            const nativeAudioWorkletNode = createNativeAudioWorkletNode(\n                nativeContextOrBackupOfflineAudioContext,\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\n                nativeAudioWorkletNodeConstructor,\n                name,\n                processorConstructor,\n                mergedOptions\n            );\n            const audioWorkletNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createAudioWorkletNodeRenderer(name, mergedOptions, processorConstructor) : null)\n            );\n\n            /*\n             * @todo Add a mechanism to switch an AudioWorkletNode to passive once the process() function of the AudioWorkletProcessor\n             * returns false.\n             */\n            super(context, true, nativeAudioWorkletNode, audioWorkletNodeRenderer);\n\n            const parameters: [string, IAudioParam][] = [];\n\n            nativeAudioWorkletNode.parameters.forEach((nativeAudioParam, nm) => {\n                const audioParam = createAudioParam(this, isOffline, nativeAudioParam);\n\n                parameters.push([nm, audioParam]);\n            });\n\n            this._nativeAudioWorkletNode = nativeAudioWorkletNode;\n            this._onprocessorerror = null;\n            this._parameters = new ReadOnlyMap(parameters);\n\n            /*\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to\n             * the destination.\n             */\n            if (isOffline) {\n                addUnrenderedAudioWorkletNode(nativeContext, <IAudioWorkletNode<IMinimalOfflineAudioContext | IOfflineAudioContext>>this);\n            }\n\n            const { activeInputs } = getAudioNodeConnections(this);\n\n            setActiveAudioWorkletNodeInputs(nativeAudioWorkletNode, activeInputs);\n        }\n\n        get onprocessorerror(): null | TErrorEventHandler<this> {\n            return this._onprocessorerror;\n        }\n\n        set onprocessorerror(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, <EventListenerOrEventListenerObject>value) : null;\n\n            this._nativeAudioWorkletNode.onprocessorerror = wrappedListener;\n\n            const nativeOnProcessorError = this._nativeAudioWorkletNode.onprocessorerror;\n\n            this._onprocessorerror =\n                nativeOnProcessorError !== null && nativeOnProcessorError === wrappedListener\n                    ? value\n                    : <null | TErrorEventHandler<this>>nativeOnProcessorError;\n        }\n\n        get parameters(): TAudioParamMap {\n            if (this._parameters === null) {\n                // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                return <IReadOnlyMap<string, TNativeAudioParam>>this._nativeAudioWorkletNode.parameters;\n            }\n\n            return this._parameters;\n        }\n\n        get port(): MessagePort {\n            return this._nativeAudioWorkletNode.port;\n        }\n    };\n};\n", "import { TNativeAudioBuffer } from '../types';\n\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: number]: Float32Array },\n    key: number,\n    channelNumber: number,\n    bufferOffset: number\n): void;\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: string]: Float32Array },\n    key: string,\n    channelNumber: number,\n    bufferOffset: number\n): void;\nexport function copyFromChannel(\n    audioBuffer: TNativeAudioBuffer,\n    // @todo There is currently no way to define something like { [ key: number | string ]: Float32Array }\n    parent: any,\n    key: number | string,\n    channelNumber: number,\n    bufferOffset: number\n): void {\n    if (typeof audioBuffer.copyFromChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = new Float32Array(128);\n        }\n\n        audioBuffer.copyFromChannel(parent[key], channelNumber, bufferOffset);\n\n        // Bug #5: Safari does not support copyFromChannel().\n    } else {\n        const channelData = audioBuffer.getChannelData(channelNumber);\n\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = channelData.slice(bufferOffset, bufferOffset + 128);\n        } else {\n            const slicedInput = new Float32Array(channelData.buffer, bufferOffset * Float32Array.BYTES_PER_ELEMENT, 128);\n\n            parent[key].set(slicedInput);\n        }\n    }\n}\n", "import { TNativeAudioBuffer } from '../types';\n\nexport const copyToChannel = (\n    audioBuffer: TNativeAudioBuffer,\n    parent: { [key: number]: Float32Array },\n    key: number,\n    channelNumber: number,\n    bufferOffset: number\n): void => {\n    if (typeof audioBuffer.copyToChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.copyToChannel(parent[key], channelNumber, bufferOffset);\n        }\n\n        // Bug #5: Safari does not support copyToChannel().\n    } else {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.getChannelData(channelNumber).set(parent[key], bufferOffset);\n        }\n    }\n};\n", "export const createNestedArrays = (x: number, y: number | number[]): Float32Array[][] => {\n    const arrays: Float32Array[][] = [];\n\n    for (let i = 0; i < x; i += 1) {\n        const array = [];\n\n        const length = typeof y === 'number' ? y : y[i];\n\n        for (let j = 0; j < length; j += 1) {\n            array.push(new Float32Array(128));\n        }\n\n        arrays.push(array);\n    }\n\n    return arrays;\n};\n", "import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { IAudioNode, IAudioWorkletProcessor } from '../interfaces';\nimport { TContext, TNativeAudioWorkletNode, TNativeOfflineAudioContext } from '../types';\nimport { getNativeAudioNode } from './get-native-audio-node';\nimport { getValueForKey } from './get-value-for-key';\n\nexport const getAudioWorkletProcessor = <T extends TContext>(\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    proxy: IAudioNode<T>\n): Promise<IAudioWorkletProcessor> => {\n    const nodeToProcessorMap = getValueForKey(NODE_TO_PROCESSOR_MAPS, nativeOfflineAudioContext);\n    const nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\n\n    return getValueForKey(nodeToProcessorMap, nativeAudioWorkletNode);\n};\n", "import { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioWorkletProcessor } from '../helpers/get-audio-worklet-processor';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport {\n    IAudioWorkletNode,\n    IAudioWorkletNodeOptions,\n    IAudioWorkletProcessorConstructor,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IReadOnlyMap\n} from '../interfaces';\nimport {\n    TAudioWorkletNodeRendererFactoryFactory,\n    TExposeCurrentFrameAndCurrentTimeFunction,\n    TNativeAudioBuffer,\n    TNativeAudioNode,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode,\n    TNativeChannelMergerNode,\n    TNativeChannelSplitterNode,\n    TNativeGainNode,\n    TNativeOfflineAudioContext\n} from '../types';\n\nconst processBuffer = async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n    proxy: IAudioWorkletNode<T>,\n    renderedBuffer: null | TNativeAudioBuffer,\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    options: IAudioWorkletNodeOptions,\n    outputChannelCount: number[],\n    processorConstructor: undefined | IAudioWorkletProcessorConstructor,\n    exposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFunction\n): Promise<null | TNativeAudioBuffer> => {\n    // Ceil the length to the next full render quantum.\n    // Bug #17: Safari does not yet expose the length.\n    const length = renderedBuffer === null ? Math.ceil(proxy.context.length / 128) * 128 : renderedBuffer.length;\n    const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n    const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n    const processedBuffer =\n        numberOfOutputChannels === 0\n            ? null\n            : nativeOfflineAudioContext.createBuffer(numberOfOutputChannels, length, nativeOfflineAudioContext.sampleRate);\n\n    if (processorConstructor === undefined) {\n        throw new Error('Missing the processor constructor.');\n    }\n\n    const audioNodeConnections = getAudioNodeConnections(proxy);\n    const audioWorkletProcessor = await getAudioWorkletProcessor(nativeOfflineAudioContext, proxy);\n    const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n    const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n    const parameters: { [name: string]: Float32Array } = Array.from(proxy.parameters.keys()).reduce(\n        (prmtrs, name) => ({ ...prmtrs, [name]: new Float32Array(128) }),\n        {}\n    );\n\n    for (let i = 0; i < length; i += 128) {\n        if (options.numberOfInputs > 0 && renderedBuffer !== null) {\n            for (let j = 0; j < options.numberOfInputs; j += 1) {\n                for (let k = 0; k < options.channelCount; k += 1) {\n                    copyFromChannel(renderedBuffer, inputs[j], k, k, i);\n                }\n            }\n        }\n\n        if (processorConstructor.parameterDescriptors !== undefined && renderedBuffer !== null) {\n            processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                copyFromChannel(renderedBuffer, parameters, name, numberOfInputChannels + index, i);\n            });\n        }\n\n        for (let j = 0; j < options.numberOfInputs; j += 1) {\n            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                // The byteLength will be 0 when the ArrayBuffer was transferred.\n                if (outputs[j][k].byteLength === 0) {\n                    outputs[j][k] = new Float32Array(128);\n                }\n            }\n        }\n\n        try {\n            const potentiallyEmptyInputs = inputs.map((input, index) => {\n                if (audioNodeConnections.activeInputs[index].size === 0) {\n                    return [];\n                }\n\n                return input;\n            });\n            const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\n                i / nativeOfflineAudioContext.sampleRate,\n                nativeOfflineAudioContext.sampleRate,\n                () => audioWorkletProcessor.process(potentiallyEmptyInputs, outputs, parameters)\n            );\n\n            if (processedBuffer !== null) {\n                for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                    for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                        copyToChannel(processedBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[j];\n                }\n            }\n\n            if (!activeSourceFlag) {\n                break;\n            }\n        } catch (error) {\n            proxy.dispatchEvent(\n                new ErrorEvent('processorerror', {\n                    colno: error.colno,\n                    filename: error.filename,\n                    lineno: error.lineno,\n                    message: error.message\n                })\n            );\n\n            break;\n        }\n    }\n\n    return processedBuffer;\n};\n\nexport const createAudioWorkletNodeRendererFactory: TAudioWorkletNodeRendererFactoryFactory = (\n    connectAudioParam,\n    connectMultipleOutputs,\n    createNativeAudioBufferSourceNode,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    deleteUnrenderedAudioWorkletNode,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getNativeAudioNode,\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        name: string,\n        options: IAudioWorkletNodeOptions,\n        processorConstructor: undefined | IAudioWorkletProcessorConstructor\n    ) => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioWorkletNode | TNativeGainNode>();\n\n        let processedBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IAudioWorkletNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\n            let nativeOutputNodes: null | [TNativeChannelSplitterNode, TNativeChannelMergerNode[], TNativeGainNode] = null;\n\n            const nativeAudioWorkletNodeIsOwnedByContext = isOwnedByContext(nativeAudioWorkletNode, nativeOfflineAudioContext);\n            const outputChannelCount = Array.isArray(options.outputChannelCount)\n                ? options.outputChannelCount\n                : Array.from(options.outputChannelCount);\n\n            // Bug #61: Only Chrome, Edge & Firefox have an implementation of the AudioWorkletNode yet.\n            if (nativeAudioWorkletNodeConstructor === null) {\n                const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n                const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, {\n                    channelCount: Math.max(1, numberOfOutputChannels),\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    numberOfOutputs: Math.max(1, numberOfOutputChannels)\n                });\n                const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\n\n                for (let i = 0; i < proxy.numberOfOutputs; i += 1) {\n                    outputChannelMergerNodes.push(\n                        createNativeChannelMergerNode(nativeOfflineAudioContext, {\n                            channelCount: 1,\n                            channelCountMode: 'explicit',\n                            channelInterpretation: 'speakers',\n                            numberOfInputs: outputChannelCount[i]\n                        })\n                    );\n                }\n\n                const outputGainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: options.channelCountMode,\n                    channelInterpretation: options.channelInterpretation,\n                    gain: 1\n                });\n\n                outputGainNode.connect = <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputChannelMergerNodes);\n                outputGainNode.disconnect = <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputChannelMergerNodes);\n\n                nativeOutputNodes = [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode];\n            } else if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(nativeOfflineAudioContext, name);\n            }\n\n            renderedNativeAudioNodes.set(\n                nativeOfflineAudioContext,\n                nativeOutputNodes === null ? nativeAudioWorkletNode : nativeOutputNodes[2]\n            );\n\n            if (nativeOutputNodes !== null) {\n                if (processedBufferPromise === null) {\n                    if (processorConstructor === undefined) {\n                        throw new Error('Missing the processor constructor.');\n                    }\n\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                    const numberOfInputChannels = proxy.channelCount * proxy.numberOfInputs;\n                    const numberOfParameters =\n                        processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n                    const numberOfChannels = numberOfInputChannels + numberOfParameters;\n\n                    const renderBuffer = async () => {\n                        const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                            numberOfChannels,\n                            // Ceil the length to the next full render quantum.\n                            // Bug #17: Safari does not yet expose the length.\n                            Math.ceil(proxy.context.length / 128) * 128,\n                            nativeOfflineAudioContext.sampleRate\n                        );\n                        const gainNodes: TNativeGainNode[] = [];\n                        const inputChannelSplitterNodes = [];\n\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes.push(\n                                createNativeGainNode(partialOfflineAudioContext, {\n                                    channelCount: options.channelCount,\n                                    channelCountMode: options.channelCountMode,\n                                    channelInterpretation: options.channelInterpretation,\n                                    gain: 1\n                                })\n                            );\n                            inputChannelSplitterNodes.push(\n                                createNativeChannelSplitterNode(partialOfflineAudioContext, {\n                                    channelCount: options.channelCount,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    numberOfOutputs: options.channelCount\n                                })\n                            );\n                        }\n\n                        const constantSourceNodes = await Promise.all(\n                            Array.from(proxy.parameters.values()).map(async (audioParam) => {\n                                const constantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                    channelCount: 1,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    offset: audioParam.value\n                                });\n\n                                await renderAutomation(partialOfflineAudioContext, audioParam, constantSourceNode.offset);\n\n                                return constantSourceNode;\n                            })\n                        );\n\n                        const inputChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                            channelCount: 1,\n                            channelCountMode: 'explicit',\n                            channelInterpretation: 'speakers',\n                            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n                        });\n\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n\n                            for (let j = 0; j < options.channelCount; j += 1) {\n                                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n                            }\n                        }\n\n                        for (const [index, constantSourceNode] of constantSourceNodes.entries()) {\n                            constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                            constantSourceNode.start(0);\n                        }\n\n                        inputChannelMergerNode.connect(partialOfflineAudioContext.destination);\n\n                        await Promise.all(\n                            gainNodes.map((gainNode) => renderInputsOfAudioNode(proxy, partialOfflineAudioContext, gainNode))\n                        );\n\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    };\n\n                    processedBufferPromise = processBuffer(\n                        proxy,\n                        numberOfChannels === 0 ? null : await renderBuffer(),\n                        nativeOfflineAudioContext,\n                        options,\n                        outputChannelCount,\n                        processorConstructor,\n                        exposeCurrentFrameAndCurrentTime\n                    );\n                }\n\n                const processedBuffer = await processedBufferPromise;\n                const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n                const [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode] = nativeOutputNodes;\n\n                if (processedBuffer !== null) {\n                    audioBufferSourceNode.buffer = processedBuffer;\n                    audioBufferSourceNode.start(0);\n                }\n\n                audioBufferSourceNode.connect(outputChannelSplitterNode);\n\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < proxy.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n\n                return outputGainNode;\n            }\n\n            if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await renderAutomation(\n                        nativeOfflineAudioContext,\n                        audioParam,\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\n                    );\n                }\n            } else {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await connectAudioParam(\n                        nativeOfflineAudioContext,\n                        audioParam,\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\n                    );\n                }\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioWorkletNode);\n\n            return nativeAudioWorkletNode;\n        };\n\n        return {\n            render(\n                proxy: IAudioWorkletNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioWorkletNode | TNativeGainNode> {\n                deleteUnrenderedAudioWorkletNode(nativeOfflineAudioContext, proxy);\n\n                const renderedNativeAudioWorkletNodeOrGainNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioWorkletNodeOrGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioWorkletNodeOrGainNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import {\n    IAnalyserNode,\n    IAudioBuffer,\n    IAudioBufferSourceNode,\n    IAudioNode,\n    IAudioWorklet,\n    IBaseAudioContext,\n    IBiquadFilterNode,\n    IConstantSourceNode,\n    IConvolverNode,\n    IDelayNode,\n    IDynamicsCompressorNode,\n    IGainNode,\n    IIIRFilterNode,\n    IOscillatorNode,\n    IPannerNode,\n    IPeriodicWave,\n    IPeriodicWaveConstraints,\n    IStereoPannerNode,\n    IWaveShaperNode,\n    IWorkletOptions\n} from '../interfaces';\nimport { TBaseAudioContextConstructorFactory, TContext, TDecodeErrorCallback, TDecodeSuccessCallback, TNativeContext } from '../types';\n\nexport const createBaseAudioContextConstructor: TBaseAudioContextConstructorFactory = (\n    addAudioWorkletModule,\n    analyserNodeConstructor,\n    audioBufferConstructor,\n    audioBufferSourceNodeConstructor,\n    biquadFilterNodeConstructor,\n    channelMergerNodeConstructor,\n    channelSplitterNodeConstructor,\n    constantSourceNodeConstructor,\n    convolverNodeConstructor,\n    decodeAudioData,\n    delayNodeConstructor,\n    dynamicsCompressorNodeConstructor,\n    gainNodeConstructor,\n    iIRFilterNodeConstructor,\n    minimalBaseAudioContextConstructor,\n    oscillatorNodeConstructor,\n    pannerNodeConstructor,\n    periodicWaveConstructor,\n    stereoPannerNodeConstructor,\n    waveShaperNodeConstructor\n) => {\n    return class BaseAudioContext<T extends TContext> extends minimalBaseAudioContextConstructor<T> implements IBaseAudioContext<T> {\n        private _audioWorklet: undefined | IAudioWorklet;\n\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\n            super(_nativeContext, numberOfChannels);\n\n            this._audioWorklet =\n                addAudioWorkletModule === undefined\n                    ? undefined\n                    : {\n                          addModule: (moduleURL: string, options?: IWorkletOptions) => {\n                              return addAudioWorkletModule(<T>(<unknown>this), moduleURL, options);\n                          }\n                      };\n        }\n\n        get audioWorklet(): undefined | IAudioWorklet {\n            return this._audioWorklet;\n        }\n\n        public createAnalyser(): IAnalyserNode<T> {\n            return new analyserNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createBiquadFilter(): IBiquadFilterNode<T> {\n            return new biquadFilterNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createBuffer(numberOfChannels: number, length: number, sampleRate: number): IAudioBuffer {\n            return new audioBufferConstructor({ length, numberOfChannels, sampleRate });\n        }\n\n        public createBufferSource(): IAudioBufferSourceNode<T> {\n            return new audioBufferSourceNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createChannelMerger(numberOfInputs = 6): IAudioNode<T> {\n            return new channelMergerNodeConstructor(<T>(<unknown>this), { numberOfInputs });\n        }\n\n        public createChannelSplitter(numberOfOutputs = 6): IAudioNode<T> {\n            return new channelSplitterNodeConstructor(<T>(<unknown>this), { numberOfOutputs });\n        }\n\n        public createConstantSource(): IConstantSourceNode<T> {\n            return new constantSourceNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createConvolver(): IConvolverNode<T> {\n            return new convolverNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createDelay(maxDelayTime = 1): IDelayNode<T> {\n            return new delayNodeConstructor(<T>(<unknown>this), { maxDelayTime });\n        }\n\n        public createDynamicsCompressor(): IDynamicsCompressorNode<T> {\n            return new dynamicsCompressorNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createGain(): IGainNode<T> {\n            return new gainNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createIIRFilter(feedforward: Iterable<number>, feedback: Iterable<number>): IIIRFilterNode<T> {\n            return new iIRFilterNodeConstructor(<T>(<unknown>this), { feedback, feedforward });\n        }\n\n        public createOscillator(): IOscillatorNode<T> {\n            return new oscillatorNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createPanner(): IPannerNode<T> {\n            return new pannerNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createPeriodicWave(\n            real: Iterable<number>,\n            imag: Iterable<number>,\n            constraints: Partial<IPeriodicWaveConstraints> = { disableNormalization: false }\n        ): IPeriodicWave {\n            return new periodicWaveConstructor(<T>(<unknown>this), { ...constraints, imag, real });\n        }\n\n        public createStereoPanner(): IStereoPannerNode<T> {\n            return new stereoPannerNodeConstructor(<T>(<unknown>this));\n        }\n\n        public createWaveShaper(): IWaveShaperNode<T> {\n            return new waveShaperNodeConstructor(<T>(<unknown>this));\n        }\n\n        public decodeAudioData(\n            audioData: ArrayBuffer,\n            successCallback?: TDecodeSuccessCallback,\n            errorCallback?: TDecodeErrorCallback\n        ): Promise<IAudioBuffer> {\n            return decodeAudioData(this._nativeContext, audioData).then(\n                (audioBuffer) => {\n                    if (typeof successCallback === 'function') {\n                        successCallback(audioBuffer);\n                    }\n\n                    return audioBuffer;\n                },\n                (err) => {\n                    if (typeof errorCallback === 'function') {\n                        errorCallback(err);\n                    }\n\n                    throw err;\n                }\n            );\n        }\n    };\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IBiquadFilterNode, IBiquadFilterOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TBiquadFilterNodeConstructorFactory, TBiquadFilterType, TContext, TNativeBiquadFilterNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    Q: 1,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    detune: 0,\n    frequency: 350,\n    gain: 0,\n    type: 'lowpass'\n} as const;\n\nexport const createBiquadFilterNodeConstructor: TBiquadFilterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createBiquadFilterNodeRenderer,\n    createInvalidAccessError,\n    createNativeBiquadFilterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class BiquadFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IBiquadFilterNode<T> {\n        private _detune: IAudioParam;\n\n        private _frequency: IAudioParam;\n\n        private _gain: IAudioParam;\n\n        private _nativeBiquadFilterNode: TNativeBiquadFilterNode;\n\n        private _Q: IAudioParam;\n\n        constructor(context: T, options?: Partial<IBiquadFilterOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const biquadFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createBiquadFilterNodeRenderer() : null);\n\n            super(context, false, nativeBiquadFilterNode, biquadFilterNodeRenderer);\n\n            // Bug #80: Safari does not export the correct values for maxValue and minValue.\n            this._Q = createAudioParam(this, isOffline, nativeBiquadFilterNode.Q, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            // Bug #78: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(\n                this,\n                isOffline,\n                nativeBiquadFilterNode.detune,\n                1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT),\n                -1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT)\n            );\n            // Bug #77: Firefox & Safari do not export the correct value for minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeBiquadFilterNode.frequency, context.sampleRate / 2, 0);\n            // Bug #79: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(\n                this,\n                isOffline,\n                nativeBiquadFilterNode.gain,\n                40 * Math.log10(MOST_POSITIVE_SINGLE_FLOAT),\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._nativeBiquadFilterNode = nativeBiquadFilterNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get detune(): IAudioParam {\n            return this._detune;\n        }\n\n        get frequency(): IAudioParam {\n            return this._frequency;\n        }\n\n        get gain(): IAudioParam {\n            return this._gain;\n        }\n\n        get Q(): IAudioParam {\n            return this._Q;\n        }\n\n        get type(): TBiquadFilterType {\n            return this._nativeBiquadFilterNode.type;\n        }\n\n        set type(value) {\n            this._nativeBiquadFilterNode.type = value;\n        }\n\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n            // Bug #189: Safari does throw an InvalidStateError.\n            try {\n                this._nativeBiquadFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n            } catch (err) {\n                if (err.code === 11) {\n                    throw createInvalidAccessError();\n                }\n\n                throw err;\n            }\n\n            // Bug #68: Safari does not throw an error if the parameters differ in their length.\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IBiquadFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TBiquadFilterNodeRendererFactoryFactory, TNativeBiquadFilterNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createBiquadFilterNodeRendererFactory: TBiquadFilterNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeBiquadFilterNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeBiquadFilterNodes = new WeakMap<TNativeOfflineAudioContext, TNativeBiquadFilterNode>();\n\n        const createBiquadFilterNode = async (proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeBiquadFilterNode = getNativeAudioNode<T, TNativeBiquadFilterNode>(proxy);\n\n            /*\n             * If the initially used nativeBiquadFilterNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeBiquadFilterNodeIsOwnedByContext = isOwnedByContext(nativeBiquadFilterNode, nativeOfflineAudioContext);\n\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                const options = {\n                    Q: nativeBiquadFilterNode.Q.value,\n                    channelCount: nativeBiquadFilterNode.channelCount,\n                    channelCountMode: nativeBiquadFilterNode.channelCountMode,\n                    channelInterpretation: nativeBiquadFilterNode.channelInterpretation,\n                    detune: nativeBiquadFilterNode.detune.value,\n                    frequency: nativeBiquadFilterNode.frequency.value,\n                    gain: nativeBiquadFilterNode.gain.value,\n                    type: nativeBiquadFilterNode.type\n                };\n\n                nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeBiquadFilterNodes.set(nativeOfflineAudioContext, nativeBiquadFilterNode);\n\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeBiquadFilterNode);\n\n            return nativeBiquadFilterNode;\n        };\n\n        return {\n            render(proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeBiquadFilterNode> {\n                const renderedNativeBiquadFilterNode = renderedNativeBiquadFilterNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeBiquadFilterNode !== undefined) {\n                    return Promise.resolve(renderedNativeBiquadFilterNode);\n                }\n\n                return createBiquadFilterNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TCacheTestResultFactory } from '../types';\n\nexport const createCacheTestResult: TCacheTestResultFactory = (ongoingTests, testResults) => {\n    return (tester, test) => {\n        const cachedTestResult = testResults.get(tester);\n\n        if (cachedTestResult !== undefined) {\n            return cachedTestResult;\n        }\n\n        const ongoingTest = ongoingTests.get(tester);\n\n        if (ongoingTest !== undefined) {\n            return ongoingTest;\n        }\n\n        try {\n            const synchronousTestResult = test();\n\n            if (synchronousTestResult instanceof Promise) {\n                ongoingTests.set(tester, synchronousTestResult);\n\n                return synchronousTestResult\n                    .catch(() => false)\n                    .then((finalTestResult) => {\n                        ongoingTests.delete(tester);\n                        testResults.set(tester, finalTestResult);\n\n                        return finalTestResult;\n                    });\n            }\n\n            testResults.set(tester, synchronousTestResult);\n\n            return synchronousTestResult;\n        } catch {\n            testResults.set(tester, false);\n\n            return false;\n        }\n    };\n};\n", "import { IChannelMergerOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TChannelMergerNodeConstructorFactory, TContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 1,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 6\n} as const;\n\nexport const createChannelMergerNodeConstructor: TChannelMergerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createChannelMergerNodeRenderer,\n    createNativeChannelMergerNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class ChannelMergerNode<T extends TContext> extends audioNodeConstructor<T> {\n        constructor(context: T, options?: Partial<IChannelMergerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeChannelMergerNode = createNativeChannelMergerNode(nativeContext, mergedOptions);\n            const channelMergerNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelMergerNodeRenderer() : null)\n            );\n\n            super(context, false, nativeChannelMergerNode, channelMergerNodeRenderer);\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TChannelMergerNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createChannelMergerNodeRendererFactory: TChannelMergerNodeRendererFactoryFactory = (\n    createNativeChannelMergerNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\n\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\n\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfInputs: nativeAudioNode.numberOfInputs\n                };\n\n                nativeAudioNode = createNativeChannelMergerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n\n            return nativeAudioNode;\n        };\n\n        return {\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { IChannelSplitterOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TChannelSplitterNodeConstructorFactory, TContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 6,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'discrete',\n    numberOfOutputs: 6\n} as const;\n\nexport const createChannelSplitterNodeConstructor: TChannelSplitterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createChannelSplitterNodeRenderer,\n    createNativeChannelSplitterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    sanitizeChannelSplitterOptions\n) => {\n    return class ChannelSplitterNode<T extends TContext> extends audioNodeConstructor<T> {\n        constructor(context: T, options?: Partial<IChannelSplitterOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizeChannelSplitterOptions({ ...DEFAULT_OPTIONS, ...options });\n            const nativeChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, mergedOptions);\n            const channelSplitterNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelSplitterNodeRenderer() : null)\n            );\n\n            super(context, false, nativeChannelSplitterNode, channelSplitterNodeRenderer);\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TChannelSplitterNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createChannelSplitterNodeRendererFactory: TChannelSplitterNodeRendererFactoryFactory = (\n    createNativeChannelSplitterNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\n\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\n\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfOutputs: nativeAudioNode.numberOfOutputs\n                };\n\n                nativeAudioNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n\n            return nativeAudioNode;\n        };\n\n        return {\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TConnectAudioParamFactory } from '../types';\n\nexport const createConnectAudioParam: TConnectAudioParamFactory = (renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TConnectMultipleOutputsFactory } from '../types';\n\nexport const createConnectMultipleOutputs: TConnectMultipleOutputsFactory = (createIndexSizeError) => {\n    return (outputAudioNodes, destination, output = 0, input = 0) => {\n        const outputAudioNode = outputAudioNodes[output];\n\n        if (outputAudioNode === undefined) {\n            throw createIndexSizeError();\n        }\n\n        if (isNativeAudioNode(destination)) {\n            return outputAudioNode.connect(destination, 0, input);\n        }\n\n        return outputAudioNode.connect(destination, 0);\n    };\n};\n", "import { TConnectedNativeAudioBufferSourceNodeFactoryFactory } from '../types';\n\nexport const createConnectedNativeAudioBufferSourceNodeFactory: TConnectedNativeAudioBufferSourceNodeFactoryFactory = (\n    createNativeAudioBufferSourceNode\n) => {\n    return (nativeContext, nativeAudioNode) => {\n        const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const nativeAudioBuffer = nativeContext.createBuffer(1, 2, 44100);\n\n        nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n        nativeAudioBufferSourceNode.loop = true;\n\n        nativeAudioBufferSourceNode.connect(nativeAudioNode);\n        nativeAudioBufferSourceNode.start();\n\n        return () => {\n            nativeAudioBufferSourceNode.stop();\n            nativeAudioBufferSourceNode.disconnect(nativeAudioNode);\n        };\n    };\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport { IAudioParam, IAudioScheduledSourceNodeEventMap, IConstantSourceNode, IConstantSourceOptions } from '../interfaces';\nimport {\n    TConstantSourceNodeConstructorFactory,\n    TConstantSourceNodeRenderer,\n    TContext,\n    TEventHandler,\n    TNativeConstantSourceNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    offset: 1\n} as const;\n\nexport const createConstantSourceNodeConstructor: TConstantSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createConstantSourceNodeRendererFactory,\n    createNativeConstantSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class ConstantSourceNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IConstantSourceNode<T>\n    {\n        private _constantSourceNodeRenderer: TConstantSourceNodeRenderer<T>;\n\n        private _nativeConstantSourceNode: TNativeConstantSourceNode;\n\n        private _offset: IAudioParam;\n\n        private _onended: null | TEventHandler<this>;\n\n        constructor(context: T, options?: Partial<IConstantSourceOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConstantSourceNode = createNativeConstantSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const constantSourceNodeRenderer = <TConstantSourceNodeRenderer<T>>(\n                (isOffline ? createConstantSourceNodeRendererFactory() : null)\n            );\n\n            super(context, false, nativeConstantSourceNode, constantSourceNodeRenderer);\n\n            this._constantSourceNodeRenderer = constantSourceNodeRenderer;\n            this._nativeConstantSourceNode = nativeConstantSourceNode;\n            /*\n             * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and minValue\n             * for GainNodes.\n             */\n            this._offset = createAudioParam(\n                this,\n                isOffline,\n                nativeConstantSourceNode.offset,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._onended = null;\n        }\n\n        get offset(): IAudioParam {\n            return this._offset;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeConstantSourceNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeConstantSourceNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        public start(when = 0): void {\n            this._nativeConstantSourceNode.start(when);\n\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.start = when;\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeConstantSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeConstantSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeConstantSourceNode.stop(when);\n\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IConstantSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TConstantSourceNodeRendererFactoryFactory, TNativeConstantSourceNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createConstantSourceNodeRendererFactory: TConstantSourceNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeConstantSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeConstantSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConstantSourceNode>();\n\n        let start: null | number = null;\n        let stop: null | number = null;\n\n        const createConstantSourceNode = async (proxy: IConstantSourceNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeConstantSourceNode = getNativeAudioNode<T, TNativeConstantSourceNode>(proxy);\n\n            /*\n             * If the initially used nativeConstantSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeConstantSourceNodeIsOwnedByContext = isOwnedByContext(nativeConstantSourceNode, nativeOfflineAudioContext);\n\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeConstantSourceNode.channelCount,\n                    channelCountMode: nativeConstantSourceNode.channelCountMode,\n                    channelInterpretation: nativeConstantSourceNode.channelInterpretation,\n                    offset: nativeConstantSourceNode.offset.value\n                };\n\n                nativeConstantSourceNode = createNativeConstantSourceNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeConstantSourceNode.start(start);\n                }\n\n                if (stop !== null) {\n                    nativeConstantSourceNode.stop(stop);\n                }\n            }\n\n            renderedNativeConstantSourceNodes.set(nativeOfflineAudioContext, nativeConstantSourceNode);\n\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConstantSourceNode);\n\n            return nativeConstantSourceNode;\n        };\n\n        return {\n            set start(value: number) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(\n                proxy: IConstantSourceNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeConstantSourceNode> {\n                const renderedNativeConstantSourceNode = renderedNativeConstantSourceNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeConstantSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeConstantSourceNode);\n                }\n\n                return createConstantSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TConvertNumberToUnsignedLongFactory } from '../types';\n\nexport const createConvertNumberToUnsignedLong: TConvertNumberToUnsignedLongFactory = (unit32Array) => {\n    return (value) => {\n        unit32Array[0] = value;\n\n        return unit32Array[0];\n    };\n};\n", "import { IConvolverNode, IConvolverOptions } from '../interfaces';\nimport { TAnyAudioBuffer, TAudioNodeRenderer, TContext, TConvolverNodeConstructorFactory, TNativeConvolverNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    disableNormalization: false\n} as const;\n\nexport const createConvolverNodeConstructor: TConvolverNodeConstructorFactory = (\n    audioNodeConstructor,\n    createConvolverNodeRenderer,\n    createNativeConvolverNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class ConvolverNode<T extends TContext> extends audioNodeConstructor<T> implements IConvolverNode<T> {\n        private _isBufferNullified: boolean;\n\n        private _nativeConvolverNode: TNativeConvolverNode;\n\n        constructor(context: T, options?: Partial<IConvolverOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConvolverNode = createNativeConvolverNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const convolverNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createConvolverNodeRenderer() : null);\n\n            super(context, false, nativeConvolverNode, convolverNodeRenderer);\n\n            this._isBufferNullified = false;\n            this._nativeConvolverNode = nativeConvolverNode;\n\n            if (mergedOptions.buffer !== null) {\n                setAudioNodeTailTime(this, mergedOptions.buffer.duration);\n            }\n        }\n\n        get buffer(): null | TAnyAudioBuffer {\n            if (this._isBufferNullified) {\n                return null;\n            }\n\n            return this._nativeConvolverNode.buffer;\n        }\n\n        set buffer(value) {\n            this._nativeConvolverNode.buffer = value;\n\n            // Bug #115: Safari does not allow to set the buffer to null.\n            if (value === null && this._nativeConvolverNode.buffer !== null) {\n                const nativeContext = this._nativeConvolverNode.context;\n\n                this._nativeConvolverNode.buffer = nativeContext.createBuffer(1, 1, nativeContext.sampleRate);\n                this._isBufferNullified = true;\n\n                setAudioNodeTailTime(this, 0);\n            } else {\n                this._isBufferNullified = false;\n\n                setAudioNodeTailTime(this, this._nativeConvolverNode.buffer === null ? 0 : this._nativeConvolverNode.buffer.duration);\n            }\n        }\n\n        get normalize(): boolean {\n            return this._nativeConvolverNode.normalize;\n        }\n\n        set normalize(value) {\n            this._nativeConvolverNode.normalize = value;\n        }\n    };\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IConvolverNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TConvolverNodeRendererFactoryFactory, TNativeConvolverNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createConvolverNodeRendererFactory: TConvolverNodeRendererFactoryFactory = (\n    createNativeConvolverNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeConvolverNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConvolverNode>();\n\n        const createConvolverNode = async (proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeConvolverNode = getNativeAudioNode<T, TNativeConvolverNode>(proxy);\n\n            // If the initially used nativeConvolverNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeConvolverNodeIsOwnedByContext = isOwnedByContext(nativeConvolverNode, nativeOfflineAudioContext);\n\n            if (!nativeConvolverNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeConvolverNode.buffer,\n                    channelCount: nativeConvolverNode.channelCount,\n                    channelCountMode: nativeConvolverNode.channelCountMode,\n                    channelInterpretation: nativeConvolverNode.channelInterpretation,\n                    disableNormalization: !nativeConvolverNode.normalize\n                };\n\n                nativeConvolverNode = createNativeConvolverNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeConvolverNodes.set(nativeOfflineAudioContext, nativeConvolverNode);\n\n            if (isNativeAudioNodeFaker(nativeConvolverNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode);\n            }\n\n            return nativeConvolverNode;\n        };\n\n        return {\n            render(proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeConvolverNode> {\n                const renderedNativeConvolverNode = renderedNativeConvolverNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeConvolverNode !== undefined) {\n                    return Promise.resolve(renderedNativeConvolverNode);\n                }\n\n                return createConvolverNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TCreateNativeOfflineAudioContextFactory } from '../types';\n\nexport const createCreateNativeOfflineAudioContext: TCreateNativeOfflineAudioContextFactory = (\n    createNotSupportedError,\n    nativeOfflineAudioContextConstructor\n) => {\n    return (numberOfChannels, length, sampleRate) => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n\n        try {\n            return new nativeOfflineAudioContextConstructor(numberOfChannels, length, sampleRate);\n        } catch (err) {\n            // Bug #143, #144 & #146: Safari throws a SyntaxError when numberOfChannels, length or sampleRate are invalid.\n            if (err.name === 'SyntaxError') {\n                throw createNotSupportedError();\n            }\n\n            throw err;\n        }\n    };\n};\n", "import { TDataCloneErrorFactory } from '../types';\n\nexport const createDataCloneError: TDataCloneErrorFactory = () => new DOMException('', 'DataCloneError');\n", "export const detachArrayBuffer = (arrayBuffer: ArrayBuffer): Promise<void> => {\n    const { port1, port2 } = new MessageChannel();\n\n    return new Promise((resolve) => {\n        const closeAndResolve = () => {\n            port2.onmessage = null;\n\n            port1.close();\n            port2.close();\n\n            resolve();\n        };\n\n        port2.onmessage = () => closeAndResolve();\n\n        try {\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\n        } catch {\n            // Ignore errors.\n        } finally {\n            closeAndResolve();\n        }\n    });\n};\n", "import { detachArrayBuffer } from '../helpers/detach-array-buffer';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { TDecodeAudioDataFactory } from '../types';\n\nexport const createDecodeAudioData: TDecodeAudioDataFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    createDataCloneError,\n    createEncodingError,\n    detachedArrayBuffers,\n    getNativeContext,\n    isNativeContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    testPromiseSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    return (anyContext, audioData) => {\n        const nativeContext = isNativeContext(anyContext) ? anyContext : getNativeContext(anyContext);\n\n        // Bug #43: Only Chrome and Edge do throw a DataCloneError.\n        if (detachedArrayBuffers.has(audioData)) {\n            const err = createDataCloneError();\n\n            return Promise.reject(err);\n        }\n\n        // The audioData parameter maybe of a type which can't be added to a WeakSet.\n        try {\n            detachedArrayBuffers.add(audioData);\n        } catch {\n            // Ignore errors.\n        }\n\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeContext))) {\n            return nativeContext.decodeAudioData(audioData).then((audioBuffer) => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                detachArrayBuffer(audioData).catch(() => {\n                    // Ignore errors.\n                });\n\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n                if (\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                    )\n                ) {\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n                }\n\n                audioBufferStore.add(audioBuffer);\n\n                return audioBuffer;\n            });\n        }\n\n        // Bug #21: Safari does not return a Promise yet.\n        return new Promise((resolve, reject) => {\n            const complete = async () => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                try {\n                    await detachArrayBuffer(audioData);\n                } catch {\n                    // Ignore errors.\n                }\n            };\n\n            const fail = (err: DOMException | Error) => {\n                reject(err);\n                complete();\n            };\n\n            // Bug #26: Safari throws a synchronous error.\n            try {\n                // Bug #1: Safari requires a successCallback.\n                nativeContext.decodeAudioData(\n                    audioData,\n                    (audioBuffer) => {\n                        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n                        // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n                        if (typeof audioBuffer.copyFromChannel !== 'function') {\n                            wrapAudioBufferCopyChannelMethods(audioBuffer);\n                            wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                        }\n\n                        audioBufferStore.add(audioBuffer);\n\n                        complete().then(() => resolve(audioBuffer));\n                    },\n                    (err: DOMException | Error) => {\n                        // Bug #4: Safari returns null instead of an error.\n                        if (err === null) {\n                            fail(createEncodingError());\n                        } else {\n                            fail(err);\n                        }\n                    }\n                );\n            } catch (err) {\n                fail(err);\n            }\n        });\n    };\n};\n", "import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { TDecrementCycleCounterFactory } from '../types';\n\nexport const createDecrementCycleCounter: TDecrementCycleCounterFactory = (\n    connectNativeAudioNodeToNativeAudioNode,\n    cycleCounters,\n    getAudioNodeConnections,\n    getNativeAudioNode,\n    getNativeAudioParam,\n    getNativeContext,\n    isActiveAudioNode,\n    isNativeOfflineAudioContext\n) => {\n    return (audioNode, count) => {\n        const cycleCounter = cycleCounters.get(audioNode);\n\n        if (cycleCounter === undefined) {\n            throw new Error('Missing the expected cycle count.');\n        }\n\n        const nativeContext = getNativeContext(audioNode.context);\n        const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n        if (cycleCounter === count) {\n            cycleCounters.delete(audioNode);\n\n            if (!isOffline && isActiveAudioNode(audioNode)) {\n                const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                const { outputs } = getAudioNodeConnections(audioNode);\n\n                for (const output of outputs) {\n                    if (isAudioNodeOutputConnection(output)) {\n                        const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n\n                        connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\n                    } else {\n                        const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n\n                        nativeSourceAudioNode.connect(nativeDestinationAudioParam, output[1]);\n                    }\n                }\n            }\n        } else {\n            cycleCounters.set(audioNode, cycleCounter - count);\n        }\n    };\n};\n", "import { IAudioParam, IDelayNode, IDelayOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TDelayNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    delayTime: 0,\n    maxDelayTime: 1\n} as const;\n\nexport const createDelayNodeConstructor: TDelayNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createDelayNodeRenderer,\n    createNativeDelayNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class DelayNode<T extends TContext> extends audioNodeConstructor<T> implements IDelayNode<T> {\n        private _delayTime: IAudioParam;\n\n        constructor(context: T, options?: Partial<IDelayOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDelayNode = createNativeDelayNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const delayNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDelayNodeRenderer(mergedOptions.maxDelayTime) : null);\n\n            super(context, false, nativeDelayNode, delayNodeRenderer);\n\n            this._delayTime = createAudioParam(this, isOffline, nativeDelayNode.delayTime);\n\n            setAudioNodeTailTime(this, mergedOptions.maxDelayTime);\n        }\n\n        get delayTime(): IAudioParam {\n            return this._delayTime;\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IDelayNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TDelayNodeRendererFactoryFactory, TNativeDelayNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createDelayNodeRendererFactory: TDelayNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeDelayNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(maxDelayTime: number) => {\n        const renderedNativeDelayNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDelayNode>();\n\n        const createDelayNode = async (proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeDelayNode = getNativeAudioNode<T, TNativeDelayNode>(proxy);\n\n            // If the initially used nativeDelayNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeDelayNodeIsOwnedByContext = isOwnedByContext(nativeDelayNode, nativeOfflineAudioContext);\n\n            if (!nativeDelayNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeDelayNode.channelCount,\n                    channelCountMode: nativeDelayNode.channelCountMode,\n                    channelInterpretation: nativeDelayNode.channelInterpretation,\n                    delayTime: nativeDelayNode.delayTime.value,\n                    maxDelayTime\n                };\n\n                nativeDelayNode = createNativeDelayNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeDelayNodes.set(nativeOfflineAudioContext, nativeDelayNode);\n\n            if (!nativeDelayNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDelayNode);\n\n            return nativeDelayNode;\n        };\n\n        return {\n            render(proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeDelayNode> {\n                const renderedNativeDelayNode = renderedNativeDelayNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeDelayNode !== undefined) {\n                    return Promise.resolve(renderedNativeDelayNode);\n                }\n\n                return createDelayNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TDeleteActiveInputConnectionToAudioNodeFactory } from '../types';\n\nexport const createDeleteActiveInputConnectionToAudioNode: TDeleteActiveInputConnectionToAudioNodeFactory = (pickElementFromSet) => {\n    return (activeInputs, source, output, input) => {\n        return pickElementFromSet(\n            activeInputs[input],\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\n        );\n    };\n};\n", "import { TDeleteUnrenderedAudioWorkletNodeFactory } from '../types';\n\nexport const createDeleteUnrenderedAudioWorkletNode: TDeleteUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).delete(audioWorkletNode);\n    };\n};\n", "import { IAudioNode, IDelayNode } from '../interfaces';\nimport { TContext } from '../types';\n\nexport const isDelayNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IDelayNode<T> => {\n    return 'delayTime' in audioNode;\n};\n", "import { isAudioNode } from '../guards/audio-node';\nimport { isDelayNode } from '../guards/delay-node';\nimport { IAudioNode, IAudioParam } from '../interfaces';\nimport { TContext, TDetectCyclesFactory } from '../types';\n\nexport const createDetectCycles: TDetectCyclesFactory = (audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey) => {\n    return function detectCycles<T extends TContext>(chain: IAudioNode<T>[], nextLink: IAudioNode<T> | IAudioParam): IAudioNode<T>[][] {\n        const audioNode = isAudioNode(nextLink) ? nextLink : <IAudioNode<T>>getValueForKey(audioParamAudioNodeStore, nextLink);\n\n        if (isDelayNode(audioNode)) {\n            return [];\n        }\n\n        if (chain[0] === audioNode) {\n            return [chain];\n        }\n\n        if (chain.includes(audioNode)) {\n            return [];\n        }\n\n        const { outputs } = getAudioNodeConnections(audioNode);\n\n        return Array.from(outputs)\n            .map((outputConnection) => detectCycles([...chain, audioNode], outputConnection[0]))\n            .reduce((mergedCycles, nestedCycles) => mergedCycles.concat(nestedCycles), []);\n    };\n};\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\nimport { TDisconnectMultipleOutputsFactory, TIndexSizeErrorFactory, TNativeAudioNode } from '../types';\n\nconst getOutputAudioNodeAtIndex = (\n    createIndexSizeError: TIndexSizeErrorFactory,\n    outputAudioNodes: TNativeAudioNode[],\n    output: number\n): TNativeAudioNode => {\n    const outputAudioNode = outputAudioNodes[output];\n\n    if (outputAudioNode === undefined) {\n        throw createIndexSizeError();\n    }\n\n    return outputAudioNode;\n};\n\nexport const createDisconnectMultipleOutputs: TDisconnectMultipleOutputsFactory = (createIndexSizeError) => {\n    return (outputAudioNodes, destinationOrOutput = undefined, output = undefined, input = 0) => {\n        if (destinationOrOutput === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect());\n        }\n\n        if (typeof destinationOrOutput === 'number') {\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, destinationOrOutput).disconnect();\n        }\n\n        if (isNativeAudioNode(destinationOrOutput)) {\n            if (output === undefined) {\n                return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n            }\n\n            if (input === undefined) {\n                return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n            }\n\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0, input);\n        }\n\n        if (output === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n        }\n\n        return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n    };\n};\n", "import { IAudioParam, IDynamicsCompressorNode, IDynamicsCompressorOptions } from '../interfaces';\nimport {\n    TAudioNodeRenderer,\n    TChannelCountMode,\n    TContext,\n    TDynamicsCompressorNodeConstructorFactory,\n    TNativeAudioParam,\n    TNativeDynamicsCompressorNode\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    attack: 0.003,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    knee: 30,\n    ratio: 12,\n    release: 0.25,\n    threshold: -24\n} as const;\n\nexport const createDynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createDynamicsCompressorNodeRenderer,\n    createNativeDynamicsCompressorNode,\n    createNotSupportedError,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class DynamicsCompressorNode<T extends TContext> extends audioNodeConstructor<T> implements IDynamicsCompressorNode<T> {\n        private _attack: IAudioParam;\n\n        private _knee: IAudioParam;\n\n        private _nativeDynamicsCompressorNode: TNativeDynamicsCompressorNode;\n\n        private _ratio: IAudioParam;\n\n        private _release: IAudioParam;\n\n        private _threshold: IAudioParam;\n\n        constructor(context: T, options?: Partial<IDynamicsCompressorOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const dynamicsCompressorNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDynamicsCompressorNodeRenderer() : null);\n\n            super(context, false, nativeDynamicsCompressorNode, dynamicsCompressorNodeRenderer);\n\n            this._attack = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.attack);\n            this._knee = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.knee);\n            this._nativeDynamicsCompressorNode = nativeDynamicsCompressorNode;\n            this._ratio = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.ratio);\n            this._release = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.release);\n            this._threshold = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.threshold);\n\n            setAudioNodeTailTime(this, 0.006);\n        }\n\n        get attack(): IAudioParam {\n            return this._attack;\n        }\n\n        // Bug #108: Safari allows a channelCount of three and above which is why the getter and setter needs to be overwritten here.\n        get channelCount(): number {\n            return this._nativeDynamicsCompressorNode.channelCount;\n        }\n\n        set channelCount(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCount;\n\n            this._nativeDynamicsCompressorNode.channelCount = value;\n\n            if (value > 2) {\n                this._nativeDynamicsCompressorNode.channelCount = previousChannelCount;\n\n                throw createNotSupportedError();\n            }\n        }\n\n        /*\n         * Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max' yet which is why the getter and setter needs to be\n         * overwritten here.\n         */\n        get channelCountMode(): TChannelCountMode {\n            return this._nativeDynamicsCompressorNode.channelCountMode;\n        }\n\n        set channelCountMode(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCountMode;\n\n            this._nativeDynamicsCompressorNode.channelCountMode = value;\n\n            if (value === 'max') {\n                this._nativeDynamicsCompressorNode.channelCountMode = previousChannelCount;\n\n                throw createNotSupportedError();\n            }\n        }\n\n        get knee(): IAudioParam {\n            return this._knee;\n        }\n\n        get ratio(): IAudioParam {\n            return this._ratio;\n        }\n\n        get reduction(): number {\n            // Bug #111: Safari returns an AudioParam instead of a number.\n            if (typeof (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value === 'number') {\n                return (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value;\n            }\n\n            return this._nativeDynamicsCompressorNode.reduction;\n        }\n\n        get release(): IAudioParam {\n            return this._release;\n        }\n\n        get threshold(): IAudioParam {\n            return this._threshold;\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IDynamicsCompressorNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TDynamicsCompressorNodeRendererFactoryFactory, TNativeDynamicsCompressorNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createDynamicsCompressorNodeRendererFactory: TDynamicsCompressorNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeDynamicsCompressorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeDynamicsCompressorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDynamicsCompressorNode>();\n\n        const createDynamicsCompressorNode = async (\n            proxy: IDynamicsCompressorNode<T>,\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\n        ) => {\n            let nativeDynamicsCompressorNode = getNativeAudioNode<T, TNativeDynamicsCompressorNode>(proxy);\n\n            /*\n             * If the initially used nativeDynamicsCompressorNode was not constructed on the same OfflineAudioContext it needs to be\n             * created again.\n             */\n            const nativeDynamicsCompressorNodeIsOwnedByContext = isOwnedByContext(nativeDynamicsCompressorNode, nativeOfflineAudioContext);\n\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                const options = {\n                    attack: nativeDynamicsCompressorNode.attack.value,\n                    channelCount: nativeDynamicsCompressorNode.channelCount,\n                    channelCountMode: nativeDynamicsCompressorNode.channelCountMode,\n                    channelInterpretation: nativeDynamicsCompressorNode.channelInterpretation,\n                    knee: nativeDynamicsCompressorNode.knee.value,\n                    ratio: nativeDynamicsCompressorNode.ratio.value,\n                    release: nativeDynamicsCompressorNode.release.value,\n                    threshold: nativeDynamicsCompressorNode.threshold.value\n                };\n\n                nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeDynamicsCompressorNodes.set(nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await renderAutomation(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await renderAutomation(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await renderAutomation(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await renderAutomation(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n\n            return nativeDynamicsCompressorNode;\n        };\n\n        return {\n            render(\n                proxy: IDynamicsCompressorNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeDynamicsCompressorNode> {\n                const renderedNativeDynamicsCompressorNode = renderedNativeDynamicsCompressorNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeDynamicsCompressorNode !== undefined) {\n                    return Promise.resolve(renderedNativeDynamicsCompressorNode);\n                }\n\n                return createDynamicsCompressorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TEncodingErrorFactory } from '../types';\n\nexport const createEncodingError: TEncodingErrorFactory = () => new DOMException('', 'EncodingError');\n", "import { TEvaluateSourceFactory } from '../types';\n\nexport const createEvaluateSource: TEvaluateSourceFactory = (window) => {\n    return (source) =>\n        new Promise((resolve, reject) => {\n            if (window === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n\n                return;\n            }\n\n            const head = window.document.head;\n\n            if (head === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n            } else {\n                const script = window.document.createElement('script');\n                // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\n                const blob = new Blob([source], { type: 'application/javascript' });\n                const url = URL.createObjectURL(blob);\n\n                const originalOnErrorHandler = window.onerror;\n\n                const removeErrorEventListenerAndRevokeUrl = () => {\n                    window.onerror = originalOnErrorHandler;\n\n                    URL.revokeObjectURL(url);\n                };\n\n                window.onerror = (message, src, lineno, colno, error) => {\n                    // @todo Edge thinks the source is the one of the html document.\n                    if (src === url || (src === window.location.href && lineno === 1 && colno === 1)) {\n                        removeErrorEventListenerAndRevokeUrl();\n                        reject(error);\n\n                        return false;\n                    }\n\n                    if (originalOnErrorHandler !== null) {\n                        return originalOnErrorHandler(message, src, lineno, colno, error);\n                    }\n                };\n\n                script.onerror = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                    reject(new SyntaxError());\n                };\n                script.onload = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    resolve();\n                };\n                script.src = url;\n                script.type = 'module';\n\n                head.appendChild(script);\n            }\n        });\n};\n", "import { IEventTarget } from '../interfaces';\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\n\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (wrapEventListener) => {\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\n\n        constructor(private _nativeEventTarget: TNativeEventTarget) {\n            this._listeners = new WeakMap();\n        }\n\n        public addEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | AddEventListenerOptions\n        ): void {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n\n        public dispatchEvent(event: Event): boolean {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n\n        public removeEventListener(\n            type: string,\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\n            options?: boolean | EventListenerOptions\n        ): void {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n", "import { TExposeCurrentFrameAndCurrentTimeFactory } from '../types';\n\nexport const createExposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFactory = (window) => {\n    return (currentTime, sampleRate, fn) => {\n        Object.defineProperties(window, {\n            currentFrame: {\n                configurable: true,\n                get(): number {\n                    return Math.round(currentTime * sampleRate);\n                }\n            },\n            currentTime: {\n                configurable: true,\n                get(): number {\n                    return currentTime;\n                }\n            }\n        });\n\n        try {\n            return fn();\n        } finally {\n            if (window !== null) {\n                delete (<any>window).currentFrame;\n                delete (<any>window).currentTime;\n            }\n        }\n    };\n};\n", "import { TFetchSourceFactory } from '../types';\n\nexport const createFetchSource: TFetchSourceFactory = (createAbortError) => {\n    return async (url) => {\n        try {\n            const response = await fetch(url);\n\n            if (response.ok) {\n                return [await response.text(), response.url];\n            }\n        } catch {\n            // Ignore errors.\n        } // tslint:disable-line:no-empty\n\n        throw createAbortError();\n    };\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IGainNode, IGainOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TGainNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    gain: 1\n} as const;\n\nexport const createGainNodeConstructor: TGainNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createGainNodeRenderer,\n    createNativeGainNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class GainNode<T extends TContext> extends audioNodeConstructor<T> implements IGainNode<T> {\n        private _gain: IAudioParam;\n\n        constructor(context: T, options?: Partial<IGainOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeGainNode = createNativeGainNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const gainNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createGainNodeRenderer() : null);\n\n            super(context, false, nativeGainNode, gainNodeRenderer);\n\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(this, isOffline, nativeGainNode.gain, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n        }\n\n        get gain(): IAudioParam {\n            return this._gain;\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IGainNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TGainNodeRendererFactoryFactory, TNativeGainNode, TNativeOfflineAudioContext } from '../types';\n\nexport const createGainNodeRendererFactory: TGainNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeGainNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeGainNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode>();\n\n        const createGainNode = async (proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeGainNode = getNativeAudioNode<T, TNativeGainNode>(proxy);\n\n            // If the initially used nativeGainNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeGainNodeIsOwnedByContext = isOwnedByContext(nativeGainNode, nativeOfflineAudioContext);\n\n            if (!nativeGainNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeGainNode.channelCount,\n                    channelCountMode: nativeGainNode.channelCountMode,\n                    channelInterpretation: nativeGainNode.channelInterpretation,\n                    gain: nativeGainNode.gain.value\n                };\n\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeGainNodes.set(nativeOfflineAudioContext, nativeGainNode);\n\n            if (!nativeGainNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeGainNode);\n\n            return nativeGainNode;\n        };\n\n        return {\n            render(proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeGainNode> {\n                const renderedNativeGainNode = renderedNativeGainNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNode);\n                }\n\n                return createGainNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TActiveInputConnection, TContext, TGetActiveAudioWorkletNodeInputsFactory, TNativeAudioWorkletNode } from '../types';\n\nexport const createGetActiveAudioWorkletNodeInputs: TGetActiveAudioWorkletNodeInputsFactory = (\n    activeAudioWorkletNodeInputsStore,\n    getValueForKey\n) => {\n    return <T extends TContext>(nativeAudioWorkletNode: TNativeAudioWorkletNode) =>\n        <Set<TActiveInputConnection<T>>[]>getValueForKey(activeAudioWorkletNodeInputsStore, nativeAudioWorkletNode);\n};\n", "import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TGetAudioNodeRendererFactory } from '../types';\n\nexport const createGetAudioNodeRenderer: TGetAudioNodeRendererFactory = (getAudioNodeConnections) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        audioNode: IAudioNode<T>\n    ): IAudioNodeRenderer<T, IAudioNode<T>> => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n\n        if (audioNodeConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioNode in the audio graph.');\n        }\n\n        return <IAudioNodeRenderer<T, IAudioNode<T>>>audioNodeConnections.renderer;\n    };\n};\n", "import { TGetAudioNodeTailTimeFactory } from '../types';\n\nexport const createGetAudioNodeTailTime: TGetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\n    return (audioNode) => audioNodeTailTimeStore.get(audioNode) ?? 0;\n};\n", "import { IMinimalOfflineAudioContext } from '../interfaces';\nimport { TGetAudioParamRendererFactory } from '../types';\n\nexport const createGetAudioParamRenderer: TGetAudioParamRendererFactory = (getAudioParamConnections) => {\n    return (audioParam) => {\n        const audioParamConnections = getAudioParamConnections<IMinimalOfflineAudioContext>(audioParam);\n\n        if (audioParamConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioParam in the audio graph.');\n        }\n\n        return audioParamConnections.renderer;\n    };\n};\n", "import { TGetBackupOfflineAudioContextFactory } from '../types';\n\nexport const createGetBackupOfflineAudioContext: TGetBackupOfflineAudioContextFactory = (backupOfflineAudioContextStore) => {\n    return (nativeContext) => {\n        return backupOfflineAudioContextStore.get(nativeContext);\n    };\n};\n", "import { TInvalidStateErrorFactory } from '../types';\n\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => new DOMException('', 'InvalidStateError');\n", "import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TContext, TGetNativeContextFactory, TNativeAudioContext, TNativeOfflineAudioContext } from '../types';\nimport { createInvalidStateError } from './invalid-state-error';\n\nexport const createGetNativeContext: TGetNativeContextFactory = (contextStore) => {\n    return <T extends TContext>(\n        context: T\n    ): T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext => {\n        const nativeContext = contextStore.get(context);\n\n        if (nativeContext === undefined) {\n            throw createInvalidStateError();\n        }\n\n        return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext>(\n            nativeContext\n        );\n    };\n};\n", "import { TGetOrCreateBackupOfflineAudioContextFactory } from '../types';\n\nexport const createGetOrCreateBackupOfflineAudioContext: TGetOrCreateBackupOfflineAudioContextFactory = (\n    backupOfflineAudioContextStore,\n    nativeOfflineAudioContextConstructor\n) => {\n    return (nativeContext) => {\n        let backupOfflineAudioContext = backupOfflineAudioContextStore.get(nativeContext);\n\n        if (backupOfflineAudioContext !== undefined) {\n            return backupOfflineAudioContext;\n        }\n\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        backupOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        backupOfflineAudioContextStore.set(nativeContext, backupOfflineAudioContext);\n\n        return backupOfflineAudioContext;\n    };\n};\n", "import { TGetUnrenderedAudioWorkletNodesFactory } from '../types';\n\nexport const createGetUnrenderedAudioWorkletNodes: TGetUnrenderedAudioWorkletNodesFactory = (unrenderedAudioWorkletNodeStore) => {\n    return (nativeContext) => {\n        const unrenderedAudioWorkletNodes = unrenderedAudioWorkletNodeStore.get(nativeContext);\n\n        if (unrenderedAudioWorkletNodes === undefined) {\n            throw new Error('The context has no set of AudioWorkletNodes.');\n        }\n\n        return unrenderedAudioWorkletNodes;\n    };\n};\n", "import { TInvalidAccessErrorFactory } from '../types';\n\nexport const createInvalidAccessError: TInvalidAccessErrorFactory = () => new DOMException('', 'InvalidAccessError');\n", "import { createInvalidAccessError } from '../factories/invalid-access-error';\nimport { TNativeIIRFilterNode } from '../types';\n\nexport const wrapIIRFilterNodeGetFrequencyResponseMethod = (nativeIIRFilterNode: TNativeIIRFilterNode): void => {\n    nativeIIRFilterNode.getFrequencyResponse = ((getFrequencyResponse) => {\n        return (frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array) => {\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n\n            return getFrequencyResponse.call(nativeIIRFilterNode, frequencyHz, magResponse, phaseResponse);\n        };\n    })(nativeIIRFilterNode.getFrequencyResponse);\n};\n", "import { wrapIIRFilterNodeGetFrequencyResponseMethod } from '../helpers/wrap-iir-filter-node-get-frequency-response-method';\nimport { IIIRFilterNode, IIIRFilterOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TIIRFilterNodeConstructorFactory, TNativeIIRFilterNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers'\n} as const;\n\nexport const createIIRFilterNodeConstructor: TIIRFilterNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeIIRFilterNode,\n    createIIRFilterNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class IIRFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IIIRFilterNode<T> {\n        private _nativeIIRFilterNode: TNativeIIRFilterNode;\n\n        constructor(\n            context: T,\n            options: { feedback: IIIRFilterOptions['feedback']; feedforward: IIIRFilterOptions['feedforward'] } & Partial<IIIRFilterOptions>\n        ) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeIIRFilterNode = createNativeIIRFilterNode(\n                nativeContext,\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\n                mergedOptions\n            );\n            const iirFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(\n                (isOffline ? createIIRFilterNodeRenderer(mergedOptions.feedback, mergedOptions.feedforward) : null)\n            );\n\n            super(context, false, nativeIIRFilterNode, iirFilterNodeRenderer);\n\n            // Bug #23 & #24: FirefoxDeveloper does not throw an InvalidAccessError.\n            // @todo Write a test which allows other browsers to remain unpatched.\n            wrapIIRFilterNodeGetFrequencyResponseMethod(nativeIIRFilterNode);\n\n            this._nativeIIRFilterNode = nativeIIRFilterNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n            return this._nativeIIRFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n        }\n    };\n};\n", "// This implementation as shamelessly inspired by source code of\n// tslint:disable-next-line:max-line-length\n// {@link https://chromium.googlesource.com/chromium/src.git/+/master/third_party/WebKit/Source/platform/audio/IIRFilter.cpp|Chromium's IIRFilter}.\nexport const filterBuffer = (\n    feedback: Float64Array,\n    feedbackLength: number,\n    feedforward: Float64Array,\n    feedforwardLength: number,\n    minLength: number,\n    xBuffer: Float32Array,\n    yBuffer: Float32Array,\n    bufferIndex: number,\n    bufferLength: number,\n    input: Float32Array,\n    output: Float32Array\n) => {\n    const inputLength = input.length;\n\n    let i = bufferIndex;\n\n    for (let j = 0; j < inputLength; j += 1) {\n        let y = feedforward[0] * input[j];\n\n        for (let k = 1; k < minLength; k += 1) {\n            const x = (i - k) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n\n            y += feedforward[k] * xBuffer[x];\n            y -= feedback[k] * yBuffer[x];\n        }\n\n        for (let k = minLength; k < feedforwardLength; k += 1) {\n            y += feedforward[k] * xBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n\n        for (let k = minLength; k < feedbackLength; k += 1) {\n            y -= feedback[k] * yBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n\n        xBuffer[i] = input[j];\n        yBuffer[i] = y;\n\n        i = (i + 1) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n\n        output[j] = y;\n    }\n\n    return i;\n};\n", "import { filterBuffer } from '../helpers/filter-buffer';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IIIRFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport {\n    TIIRFilterNodeRendererFactoryFactory,\n    TNativeAudioBuffer,\n    TNativeAudioBufferSourceNode,\n    TNativeIIRFilterNode,\n    TNativeOfflineAudioContext\n} from '../types';\n\nconst filterFullBuffer = (\n    renderedBuffer: TNativeAudioBuffer,\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\n    feedback: Iterable<number>,\n    feedforward: Iterable<number>\n) => {\n    const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n    const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n    const feedbackLength = convertedFeedback.length;\n    const feedforwardLength = convertedFeedforward.length;\n    const minLength = Math.min(feedbackLength, feedforwardLength);\n\n    if (convertedFeedback[0] !== 1) {\n        for (let i = 0; i < feedbackLength; i += 1) {\n            convertedFeedforward[i] /= convertedFeedback[0];\n        }\n\n        for (let i = 1; i < feedforwardLength; i += 1) {\n            convertedFeedback[i] /= convertedFeedback[0];\n        }\n    }\n\n    const bufferLength = 32;\n    const xBuffer = new Float32Array(bufferLength);\n    const yBuffer = new Float32Array(bufferLength);\n\n    const filteredBuffer = nativeOfflineAudioContext.createBuffer(\n        renderedBuffer.numberOfChannels,\n        renderedBuffer.length,\n        renderedBuffer.sampleRate\n    );\n\n    const numberOfChannels = renderedBuffer.numberOfChannels;\n\n    for (let i = 0; i < numberOfChannels; i += 1) {\n        const input = renderedBuffer.getChannelData(i);\n        const output = filteredBuffer.getChannelData(i);\n\n        xBuffer.fill(0);\n        yBuffer.fill(0);\n\n        filterBuffer(\n            convertedFeedback,\n            feedbackLength,\n            convertedFeedforward,\n            feedforwardLength,\n            minLength,\n            xBuffer,\n            yBuffer,\n            0,\n            bufferLength,\n            input,\n            output\n        );\n    }\n\n    return filteredBuffer;\n};\n\nexport const createIIRFilterNodeRendererFactory: TIIRFilterNodeRendererFactoryFactory = (\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(feedback: Iterable<number>, feedforward: Iterable<number>) => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode | TNativeIIRFilterNode>();\n\n        let filteredBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IIIRFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeAudioBufferSourceNode: null | TNativeAudioBufferSourceNode = null;\n            let nativeIIRFilterNode = getNativeAudioNode<T, TNativeIIRFilterNode>(proxy);\n\n            // If the initially used nativeIIRFilterNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeIIRFilterNodeIsOwnedByContext = isOwnedByContext(nativeIIRFilterNode, nativeOfflineAudioContext);\n\n            // Bug #9: Safari does not support IIRFilterNodes.\n            if (nativeOfflineAudioContext.createIIRFilter === undefined) {\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n            } else if (!nativeIIRFilterNodeIsOwnedByContext) {\n                // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n                nativeIIRFilterNode = nativeOfflineAudioContext.createIIRFilter(<number[]>feedforward, <number[]>feedback);\n            }\n\n            renderedNativeAudioNodes.set(\n                nativeOfflineAudioContext,\n                nativeAudioBufferSourceNode === null ? nativeIIRFilterNode : nativeAudioBufferSourceNode\n            );\n\n            if (nativeAudioBufferSourceNode !== null) {\n                if (filteredBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                        // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                        proxy.context.destination.channelCount,\n                        // Bug #17: Safari does not yet expose the length.\n                        proxy.context.length,\n                        nativeOfflineAudioContext.sampleRate\n                    );\n\n                    filteredBufferPromise = (async () => {\n                        await renderInputsOfAudioNode(proxy, partialOfflineAudioContext, partialOfflineAudioContext.destination);\n\n                        const renderedBuffer = await renderNativeOfflineAudioContext(partialOfflineAudioContext);\n\n                        return filterFullBuffer(renderedBuffer, nativeOfflineAudioContext, feedback, feedforward);\n                    })();\n                }\n\n                const filteredBuffer = await filteredBufferPromise;\n\n                nativeAudioBufferSourceNode.buffer = filteredBuffer;\n                nativeAudioBufferSourceNode.start(0);\n\n                return nativeAudioBufferSourceNode;\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeIIRFilterNode);\n\n            return nativeIIRFilterNode;\n        };\n\n        return {\n            render(\n                proxy: IIIRFilterNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeAudioBufferSourceNode | TNativeIIRFilterNode> {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { TIncrementCycleCounterFactoryFactory } from '../types';\n\nexport const createIncrementCycleCounterFactory: TIncrementCycleCounterFactoryFactory = (\n    cycleCounters,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getAudioNodeConnections,\n    getNativeAudioNode,\n    getNativeAudioParam,\n    isActiveAudioNode\n) => {\n    return (isOffline) => {\n        return (audioNode, count) => {\n            const cycleCounter = cycleCounters.get(audioNode);\n\n            if (cycleCounter === undefined) {\n                if (!isOffline && isActiveAudioNode(audioNode)) {\n                    const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                    const { outputs } = getAudioNodeConnections(audioNode);\n\n                    for (const output of outputs) {\n                        if (isAudioNodeOutputConnection(output)) {\n                            const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n\n                            disconnectNativeAudioNodeFromNativeAudioNode(\n                                nativeSourceAudioNode,\n                                nativeDestinationAudioNode,\n                                output[1],\n                                output[2]\n                            );\n                        } else {\n                            const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n\n                            nativeSourceAudioNode.disconnect(nativeDestinationAudioParam, output[1]);\n                        }\n                    }\n                }\n\n                cycleCounters.set(audioNode, count);\n            } else {\n                cycleCounters.set(audioNode, cycleCounter + count);\n            }\n        };\n    };\n};\n", "import { IAudioContext, IMinimalAudioContext } from '../interfaces';\nimport { TIsAnyAudioContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsAnyAudioContext: TIsAnyAudioContextFactory = (contextStore, isNativeAudioContext) => {\n    return (anything): anything is IAudioContext | IMinimalAudioContext | TNativeAudioContext => {\n        const nativeContext = contextStore.get(<any>anything);\n\n        return isNativeAudioContext(nativeContext) || isNativeAudioContext(anything);\n    };\n};\n", "import { IAudioNode } from '../interfaces';\nimport { TIsAnyAudioNodeFactory, TNativeAudioNode } from '../types';\n\nexport const createIsAnyAudioNode: TIsAnyAudioNodeFactory = (audioNodeStore, isNativeAudioNode) => {\n    return (anything): anything is IAudioNode<any> | TNativeAudioNode => audioNodeStore.has(<any>anything) || isNativeAudioNode(anything);\n};\n", "import { IAudioParam } from '../interfaces';\nimport { TIsAnyAudioParamFactory, TNativeAudioParam } from '../types';\n\nexport const createIsAnyAudioParam: TIsAnyAudioParamFactory = (audioParamStore, isNativeAudioParam) => {\n    return (anything): anything is IAudioParam | TNativeAudioParam => audioParamStore.has(<any>anything) || isNativeAudioParam(anything);\n};\n", "import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TIsAnyOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\n\nexport const createIsAnyOfflineAudioContext: TIsAnyOfflineAudioContextFactory = (contextStore, isNativeOfflineAudioContext) => {\n    return (anything): anything is IMinimalOfflineAudioContext | IOfflineAudioContext | TNativeOfflineAudioContext => {\n        const nativeContext = contextStore.get(<any>anything);\n\n        return isNativeOfflineAudioContext(nativeContext) || isNativeOfflineAudioContext(anything);\n    };\n};\n", "import { TIsNativeAudioContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsNativeAudioContext: TIsNativeAudioContextFactory = (nativeAudioContextConstructor) => {\n    return (anything): anything is TNativeAudioContext => {\n        return nativeAudioContextConstructor !== null && anything instanceof nativeAudioContextConstructor;\n    };\n};\n", "import { TIsNativeAudioNodeFactory, TNativeAudioNode } from '../types';\n\nexport const createIsNativeAudioNode: TIsNativeAudioNodeFactory = (window) => {\n    return (anything): anything is TNativeAudioNode => {\n        return window !== null && typeof window.AudioNode === 'function' && anything instanceof window.AudioNode;\n    };\n};\n", "import { TIsNativeAudioParamFactory, TNativeAudioParam } from '../types';\n\nexport const createIsNativeAudioParam: TIsNativeAudioParamFactory = (window) => {\n    return (anything): anything is TNativeAudioParam => {\n        return window !== null && typeof window.AudioParam === 'function' && anything instanceof window.AudioParam;\n    };\n};\n", "import { TIsNativeContextFactory, TNativeAudioContext } from '../types';\n\nexport const createIsNativeContext: TIsNativeContextFactory = (isNativeAudioContext, isNativeOfflineAudioContext) => {\n    return (anything): anything is TNativeAudioContext => {\n        return isNativeAudioContext(anything) || isNativeOfflineAudioContext(anything);\n    };\n};\n", "import { TIsNativeOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\n\nexport const createIsNativeOfflineAudioContext: TIsNativeOfflineAudioContextFactory = (nativeOfflineAudioContextConstructor) => {\n    return (anything): anything is TNativeOfflineAudioContext => {\n        return nativeOfflineAudioContextConstructor !== null && anything instanceof nativeOfflineAudioContextConstructor;\n    };\n};\n", "import { TIsSecureContextFactory } from '../types';\n\nexport const createIsSecureContext: TIsSecureContextFactory = (window) => window !== null && window.isSecureContext;\n", "import { TIsSupportedPromiseFactory } from '../types';\n\nexport const createIsSupportedPromise: TIsSupportedPromiseFactory = async (\n    cacheTestResult,\n    testAudioBufferCopyChannelMethodsSubarraySupport,\n    testAudioContextCloseMethodSupport,\n    testAudioContextDecodeAudioDataMethodTypeErrorSupport,\n    testAudioContextOptionsSupport,\n    testAudioNodeConnectMethodSupport,\n    testAudioWorkletProcessorNoOutputsSupport,\n    testChannelMergerNodeChannelCountSupport,\n    testConstantSourceNodeAccurateSchedulingSupport,\n    testConvolverNodeBufferReassignabilitySupport,\n    testConvolverNodeChannelCountSupport,\n    testDomExceptionContrucorSupport,\n    testIsSecureContextSupport,\n    testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport,\n    testStereoPannerNodeDefaultValueSupport,\n    testTransferablesSupport\n) => {\n    if (\n        cacheTestResult(testAudioBufferCopyChannelMethodsSubarraySupport, testAudioBufferCopyChannelMethodsSubarraySupport) &&\n        cacheTestResult(testAudioContextCloseMethodSupport, testAudioContextCloseMethodSupport) &&\n        cacheTestResult(testAudioContextOptionsSupport, testAudioContextOptionsSupport) &&\n        cacheTestResult(testAudioNodeConnectMethodSupport, testAudioNodeConnectMethodSupport) &&\n        cacheTestResult(testChannelMergerNodeChannelCountSupport, testChannelMergerNodeChannelCountSupport) &&\n        cacheTestResult(testConstantSourceNodeAccurateSchedulingSupport, testConstantSourceNodeAccurateSchedulingSupport) &&\n        cacheTestResult(testConvolverNodeBufferReassignabilitySupport, testConvolverNodeBufferReassignabilitySupport) &&\n        cacheTestResult(testConvolverNodeChannelCountSupport, testConvolverNodeChannelCountSupport) &&\n        cacheTestResult(testDomExceptionContrucorSupport, testDomExceptionContrucorSupport) &&\n        cacheTestResult(testIsSecureContextSupport, testIsSecureContextSupport) &&\n        cacheTestResult(\n            testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport,\n            testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport\n        )\n    ) {\n        const results = await Promise.all([\n            cacheTestResult(testAudioContextDecodeAudioDataMethodTypeErrorSupport, testAudioContextDecodeAudioDataMethodTypeErrorSupport),\n            cacheTestResult(testAudioWorkletProcessorNoOutputsSupport, testAudioWorkletProcessorNoOutputsSupport),\n            cacheTestResult(testStereoPannerNodeDefaultValueSupport, testStereoPannerNodeDefaultValueSupport),\n            cacheTestResult(testTransferablesSupport, testTransferablesSupport)\n        ]);\n\n        return results.every((result) => result);\n    }\n\n    return false;\n};\n", "import { IAudioContext, IMediaElementAudioSourceNode, IMediaElementAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaElementAudioSourceNodeConstructorFactory, TNativeMediaElementAudioSourceNode } from '../types';\n\nexport const createMediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaElementAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaElementAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaElementAudioSourceNode<T> {\n        private _nativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNode;\n\n        constructor(context: T, options: IMediaElementAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaElementAudioSourceNode = createNativeMediaElementAudioSourceNode(nativeContext, options);\n\n            // Bug #171: Safari allows to create a MediaElementAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw TypeError();\n            }\n\n            super(context, true, nativeMediaElementAudioSourceNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaElementAudioSourceNode = nativeMediaElementAudioSourceNode;\n        }\n\n        get mediaElement(): HTMLMediaElement {\n            return this._nativeMediaElementAudioSourceNode.mediaElement;\n        }\n    };\n};\n", "import { IAudioContext, IAudioNodeOptions, IMediaStreamAudioDestinationNode, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamAudioDestinationNodeConstructorFactory, TNativeMediaStreamAudioDestinationNode } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers'\n} as const;\n\nexport const createMediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamAudioDestinationNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaStreamAudioDestinationNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamAudioDestinationNode<T> {\n        private _nativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNode;\n\n        constructor(context: T, options?: Partial<IAudioNodeOptions>) {\n            const nativeContext = getNativeContext(context);\n\n            // Bug #173: Safari allows to create a MediaStreamAudioDestinationNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeMediaStreamAudioDestinationNode = createNativeMediaStreamAudioDestinationNode(nativeContext, mergedOptions);\n\n            super(context, false, nativeMediaStreamAudioDestinationNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaStreamAudioDestinationNode = nativeMediaStreamAudioDestinationNode;\n        }\n\n        get stream(): MediaStream {\n            return this._nativeMediaStreamAudioDestinationNode.stream;\n        }\n    };\n};\n", "import { IAudioContext, IMediaStreamAudioSourceNode, IMediaStreamAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamAudioSourceNodeConstructorFactory, TNativeMediaStreamAudioSourceNode } from '../types';\n\nexport const createMediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class MediaStreamAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamAudioSourceNode<T> {\n        private _nativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNode;\n\n        constructor(context: T, options: IMediaStreamAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamAudioSourceNode = createNativeMediaStreamAudioSourceNode(nativeContext, options);\n\n            // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n\n            super(context, true, nativeMediaStreamAudioSourceNode, <TAudioNodeRenderer<T>>null);\n\n            this._nativeMediaStreamAudioSourceNode = nativeMediaStreamAudioSourceNode;\n        }\n\n        get mediaStream(): MediaStream {\n            return this._nativeMediaStreamAudioSourceNode.mediaStream;\n        }\n    };\n};\n", "import { IAudioContext, IMediaStreamTrackAudioSourceNode, IMediaStreamTrackAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\nimport { TAudioNodeRenderer, TMediaStreamTrackAudioSourceNodeConstructorFactory } from '../types';\n\nexport const createMediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructorFactory = (\n    audioNodeConstructor,\n    createNativeMediaStreamTrackAudioSourceNode,\n    getNativeContext\n) => {\n    return class MediaStreamTrackAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\n        implements IMediaStreamTrackAudioSourceNode<T> {\n        constructor(context: T, options: IMediaStreamTrackAudioSourceOptions) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNode(nativeContext, options);\n\n            super(context, true, nativeMediaStreamTrackAudioSourceNode, <TAudioNodeRenderer<T>>null);\n        }\n    };\n};\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\nimport { IAudioContextOptions, IMinimalAudioContext } from '../interfaces';\nimport {\n    TAudioContextState,\n    TMinimalAudioContextConstructorFactory,\n    TNativeAudioContext,\n    TNativeGainNode,\n    TNativeOscillatorNode\n} from '../types';\n\nexport const createMinimalAudioContextConstructor: TMinimalAudioContextConstructorFactory = (\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    minimalBaseAudioContextConstructor,\n    nativeAudioContextConstructor\n) => {\n    return class MinimalAudioContext extends minimalBaseAudioContextConstructor<IMinimalAudioContext> implements IMinimalAudioContext {\n        private _baseLatency: number;\n\n        private _nativeAudioContext: TNativeAudioContext;\n\n        private _nativeGainNode: null | TNativeGainNode;\n\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\n\n        private _state: null | 'suspended';\n\n        constructor(options: IAudioContextOptions = {}) {\n            if (nativeAudioContextConstructor === null) {\n                throw new Error('Missing the native AudioContext constructor.');\n            }\n\n            let nativeAudioContext: TNativeAudioContext;\n\n            try {\n                nativeAudioContext = new nativeAudioContextConstructor(options);\n            } catch (err) {\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\n            if (nativeAudioContext === null) {\n                throw createUnknownError();\n            }\n\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\n            if (!isValidLatencyHint(options.latencyHint)) {\n                throw new TypeError(\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\n                );\n            }\n\n            // Bug #150 Safari does not support setting the sampleRate.\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\n                throw createNotSupportedError();\n            }\n\n            super(nativeAudioContext, 2);\n\n            const { latencyHint } = options;\n            const { sampleRate } = nativeAudioContext;\n\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\n            this._baseLatency =\n                typeof nativeAudioContext.baseLatency === 'number'\n                    ? nativeAudioContext.baseLatency\n                    : latencyHint === 'balanced'\n                    ? 512 / sampleRate\n                    : latencyHint === 'interactive' || latencyHint === undefined\n                    ? 256 / sampleRate\n                    : latencyHint === 'playback'\n                    ? 1024 / sampleRate\n                    : /*\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\n                       * ScriptProcessorNode.\n                       */\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\n            this._nativeAudioContext = nativeAudioContext;\n\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                this._nativeGainNode = nativeAudioContext.createGain();\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\n\n                this._nativeGainNode.gain.value = 1e-37;\n\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\n                this._nativeOscillatorNode.start();\n            } else {\n                this._nativeGainNode = null;\n                this._nativeOscillatorNode = null;\n            }\n\n            this._state = null;\n\n            /*\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\n             * to 'running'.\n             */\n            if (nativeAudioContext.state === 'running') {\n                this._state = 'suspended';\n\n                const revokeState = () => {\n                    if (this._state === 'suspended') {\n                        this._state = null;\n                    }\n\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\n                };\n\n                nativeAudioContext.addEventListener('statechange', revokeState);\n            }\n        }\n\n        get baseLatency(): number {\n            return this._baseLatency;\n        }\n\n        get state(): TAudioContextState {\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\n        }\n\n        public close(): Promise<void> {\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\n            if (this.state === 'closed') {\n                return this._nativeAudioContext.close().then(() => {\n                    throw createInvalidStateError();\n                });\n            }\n\n            // Bug #34: If the state was set to suspended before it should be revoked now.\n            if (this._state === 'suspended') {\n                this._state = null;\n            }\n\n            return this._nativeAudioContext.close().then(() => {\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\n                    this._nativeOscillatorNode.stop();\n\n                    this._nativeGainNode.disconnect();\n                    this._nativeOscillatorNode.disconnect();\n                }\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        public resume(): Promise<void> {\n            if (this._state === 'suspended') {\n                return new Promise((resolve, reject) => {\n                    const resolvePromise = () => {\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\n\n                        if (this._nativeAudioContext.state === 'running') {\n                            resolve();\n                        } else {\n                            this.resume().then(resolve, reject);\n                        }\n                    };\n\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\n                });\n            }\n\n            return this._nativeAudioContext.resume().catch((err) => {\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined || err.code === 15) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n\n        public suspend(): Promise<void> {\n            return this._nativeAudioContext.suspend().catch((err) => {\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined) {\n                    throw createInvalidStateError();\n                }\n\n                throw err;\n            });\n        }\n    };\n};\n", "import { CONTEXT_STORE } from '../globals';\nimport { IAudioDestinationNode, IAudioListener, IMinimalBaseAudioContext, IMinimalBaseAudioContextEventMap } from '../interfaces';\nimport { TAudioContextState, TContext, TEventHandler, TMinimalBaseAudioContextConstructorFactory, TNativeContext } from '../types';\n\nexport const createMinimalBaseAudioContextConstructor: TMinimalBaseAudioContextConstructorFactory = (\n    audioDestinationNodeConstructor,\n    createAudioListener,\n    eventTargetConstructor,\n    isNativeOfflineAudioContext,\n    unrenderedAudioWorkletNodeStore,\n    wrapEventListener\n) => {\n    return class MinimalBaseAudioContext<T extends TContext>\n        extends eventTargetConstructor<IMinimalBaseAudioContextEventMap>\n        implements IMinimalBaseAudioContext<T>\n    {\n        private _destination: IAudioDestinationNode<T>;\n\n        private _listener: IAudioListener;\n\n        private _onstatechange: null | TEventHandler<T>;\n\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\n            super(_nativeContext);\n\n            CONTEXT_STORE.set(<T>(<unknown>this), _nativeContext);\n\n            if (isNativeOfflineAudioContext(_nativeContext)) {\n                unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\n            }\n\n            this._destination = new audioDestinationNodeConstructor(<T>(<unknown>this), numberOfChannels);\n            this._listener = createAudioListener(<T>(<unknown>this), _nativeContext);\n            this._onstatechange = null;\n        }\n\n        get currentTime(): number {\n            return this._nativeContext.currentTime;\n        }\n\n        get destination(): IAudioDestinationNode<T> {\n            return this._destination;\n        }\n\n        get listener(): IAudioListener {\n            return this._listener;\n        }\n\n        get onstatechange(): null | TEventHandler<T> {\n            return this._onstatechange;\n        }\n\n        set onstatechange(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeContext.onstatechange = wrappedListener;\n\n            const nativeOnStateChange = this._nativeContext.onstatechange;\n\n            this._onstatechange = nativeOnStateChange !== null && nativeOnStateChange === wrappedListener ? value : nativeOnStateChange;\n        }\n\n        get sampleRate(): number {\n            return this._nativeContext.sampleRate;\n        }\n\n        get state(): TAudioContextState {\n            return this._nativeContext.state;\n        }\n    };\n};\n", "import { TNativeContext } from '../types';\n\nexport const testPromiseSupport = (nativeContext: TNativeContext): boolean => {\n    // This 12 numbers represent the 48 bytes of an empty WAVE file with a single sample.\n    const uint32Array = new Uint32Array([1179011410, 40, 1163280727, 544501094, 16, 131073, 44100, 176400, 1048580, 1635017060, 4, 0]);\n\n    try {\n        // Bug #1: Safari requires a successCallback.\n        const promise = nativeContext.decodeAudioData(<ArrayBuffer>uint32Array.buffer, () => {\n            // Ignore the success callback.\n        });\n\n        if (promise === undefined) {\n            return false;\n        }\n\n        promise.catch(() => {\n            // Ignore rejected errors.\n        });\n\n        return true;\n    } catch {\n        // Ignore errors.\n    }\n\n    return false;\n};\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IAudioBuffer, IMinimalOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\nimport { TAudioContextState, TMinimalOfflineAudioContextConstructorFactory, TNativeOfflineAudioContext } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createMinimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructorFactory = (\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    minimalBaseAudioContextConstructor,\n    startRendering\n) => {\n    return class MinimalOfflineAudioContext extends minimalBaseAudioContextConstructor<IMinimalOfflineAudioContext>\n        implements IMinimalOfflineAudioContext {\n        private _length: number;\n\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\n\n        private _state: null | TAudioContextState;\n\n        constructor(options: IOfflineAudioContextOptions) {\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener(\n                    'statechange',\n                    (() => {\n                        let i = 0;\n\n                        const delayStateChangeEvent = (event: Event) => {\n                            if (this._state === 'running') {\n                                if (i > 0) {\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                    event.stopImmediatePropagation();\n\n                                    this._waitForThePromiseToSettle(event);\n                                } else {\n                                    i += 1;\n                                }\n                            }\n                        };\n\n                        return delayStateChangeEvent;\n                    })()\n                );\n            }\n\n            super(nativeOfflineAudioContext, numberOfChannels);\n\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n\n        get length(): number {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n\n            return this._nativeOfflineAudioContext.length;\n        }\n\n        get state(): TAudioContextState {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n\n        public startRendering(): Promise<IAudioBuffer> {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n\n            this._state = 'running';\n\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        private _waitForThePromiseToSettle(event: Event): void {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            } else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n", "import { TMonitorConnectionsFactory, TNativeAudioNode, TNativeAudioParam } from '../types';\n\nexport const createMonitorConnections: TMonitorConnectionsFactory = (insertElementInSet, isNativeAudioNode) => {\n    return (nativeAudioNode, whenConnected, whenDisconnected) => {\n        const connections = new Set<[TNativeAudioNode, number, number] | [TNativeAudioParam, number]>();\n\n        nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\n            // tslint:disable-next-line:invalid-void no-inferrable-types\n            return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\n                const wasDisconnected = connections.size === 0;\n\n                if (isNativeAudioNode(destination)) {\n                    // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                    (<(destination: TNativeAudioNode, output?: number, input?: number) => TNativeAudioNode>connect).call(\n                        nativeAudioNode,\n                        destination,\n                        output,\n                        input\n                    );\n\n                    insertElementInSet(\n                        connections,\n                        [destination, output, input],\n                        (connection) => connection[0] === destination && connection[1] === output && connection[2] === input,\n                        true\n                    );\n\n                    if (wasDisconnected) {\n                        whenConnected();\n                    }\n\n                    return destination;\n                }\n\n                connect.call(nativeAudioNode, destination, output);\n\n                insertElementInSet(\n                    connections,\n                    [destination, output],\n                    (connection) => connection[0] === destination && connection[1] === output,\n                    true\n                );\n\n                if (wasDisconnected) {\n                    whenConnected();\n                }\n\n                return;\n            };\n        })(nativeAudioNode.connect);\n\n        nativeAudioNode.disconnect = ((disconnect) => {\n            return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\n                const wasConnected = connections.size > 0;\n\n                if (destinationOrOutput === undefined) {\n                    disconnect.apply(nativeAudioNode);\n\n                    connections.clear();\n                } else if (typeof destinationOrOutput === 'number') {\n                    // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n                    (<(output: number) => void>disconnect).call(nativeAudioNode, destinationOrOutput);\n\n                    for (const connection of connections) {\n                        if (connection[1] === destinationOrOutput) {\n                            connections.delete(connection);\n                        }\n                    }\n                } else {\n                    if (isNativeAudioNode(destinationOrOutput)) {\n                        // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                        (<(destination: TNativeAudioNode, output?: number, input?: number) => void>disconnect).call(\n                            nativeAudioNode,\n                            destinationOrOutput,\n                            output,\n                            input\n                        );\n                    } else {\n                        // @todo TypeScript cannot infer the overloaded signature with 2 arguments yet.\n                        (<(destination: TNativeAudioParam, output?: number) => void>disconnect).call(\n                            nativeAudioNode,\n                            destinationOrOutput,\n                            output\n                        );\n                    }\n\n                    for (const connection of connections) {\n                        if (\n                            connection[0] === destinationOrOutput &&\n                            (output === undefined || connection[1] === output) &&\n                            (input === undefined || connection[2] === input)\n                        ) {\n                            connections.delete(connection);\n                        }\n                    }\n                }\n\n                const isDisconnected = connections.size === 0;\n\n                if (wasConnected && isDisconnected) {\n                    whenDisconnected();\n                }\n            };\n        })(nativeAudioNode.disconnect);\n\n        return nativeAudioNode;\n    };\n};\n", "export const assignNativeAudioNodeOption = <T extends keyof any, U extends any>(\n    nativeAudioNode: Record<T, U>,\n    options: Record<T, U>,\n    option: T\n) => {\n    const value = options[option];\n\n    if (value !== undefined && value !== nativeAudioNode[option]) {\n        nativeAudioNode[option] = value;\n    }\n};\n", "import { IAudioNodeOptions } from '../interfaces';\nimport { TNativeAudioNode } from '../types';\nimport { assignNativeAudioNodeOption } from './assign-native-audio-node-option';\n\nexport const assignNativeAudioNodeOptions = (nativeAudioNode: TNativeAudioNode, options: IAudioNodeOptions): void => {\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCount');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCountMode');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelInterpretation');\n};\n", "import { TNativeAnalyserNode } from '../types';\n\nexport const testAnalyserNodeGetFloatTimeDomainDataMethodSupport = (nativeAnalyserNode: TNativeAnalyserNode): boolean => {\n    return typeof nativeAnalyserNode.getFloatTimeDomainData === 'function';\n};\n", "import { TNativeAnalyserNode } from '../types';\n\nexport const wrapAnalyserNodeGetFloatTimeDomainDataMethod = (nativeAnalyserNode: TNativeAnalyserNode): void => {\n    nativeAnalyserNode.getFloatTimeDomainData = (array: Float32Array) => {\n        const byteTimeDomainData = new Uint8Array(array.length);\n\n        nativeAnalyserNode.getByteTimeDomainData(byteTimeDomainData);\n\n        const length = Math.max(byteTimeDomainData.length, nativeAnalyserNode.fftSize);\n\n        for (let i = 0; i < length; i += 1) {\n            array[i] = (byteTimeDomainData[i] - 128) * 0.0078125;\n        }\n\n        return array;\n    };\n};\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { testAnalyserNodeGetFloatTimeDomainDataMethodSupport } from '../helpers/test-analyser-node-get-float-time-domain-data-method-support';\nimport { wrapAnalyserNodeGetFloatTimeDomainDataMethod } from '../helpers/wrap-analyser-node-get-float-time-domain-data-method';\nimport { TNativeAnalyserNodeFactoryFactory } from '../types';\n\nexport const createNativeAnalyserNodeFactory: TNativeAnalyserNodeFactoryFactory = (cacheTestResult, createIndexSizeError) => {\n    return (nativeContext, options) => {\n        const nativeAnalyserNode = nativeContext.createAnalyser();\n\n        // Bug #37: Firefox does not create an AnalyserNode with the default properties.\n        assignNativeAudioNodeOptions(nativeAnalyserNode, options);\n\n        // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n        if (!(options.maxDecibels > options.minDecibels)) {\n            throw createIndexSizeError();\n        }\n\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'fftSize');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'maxDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'minDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'smoothingTimeConstant');\n\n        // Bug #36: Safari does not support getFloatTimeDomainData() yet.\n        if (\n            !cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport, () =>\n                testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode)\n            )\n        ) {\n            wrapAnalyserNodeGetFloatTimeDomainDataMethod(nativeAnalyserNode);\n        }\n\n        return nativeAnalyserNode;\n    };\n};\n", "import { TNativeAudioBufferConstructorFactory } from '../types';\n\nexport const createNativeAudioBufferConstructor: TNativeAudioBufferConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('AudioBuffer')) {\n        return window.AudioBuffer;\n    }\n\n    return null;\n};\n", "export const assignNativeAudioNodeAudioParamValue = <T extends { [key: string]: any }, U extends { [key: string]: any }>(\n    nativeAudioNode: T,\n    options: U,\n    audioParam: keyof T & keyof U\n) => {\n    const value = options[audioParam];\n\n    if (value !== undefined && value !== nativeAudioNode[audioParam].value) {\n        nativeAudioNode[audioParam].value = value;\n    }\n};\n", "import { createInvalidStateError } from '../factories/invalid-state-error';\nimport { TNativeAudioBufferSourceNode } from '../types';\n\nexport const wrapAudioBufferSourceNodeStartMethodConsecutiveCalls = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        let isScheduled = false;\n\n        return (when = 0, offset = 0, duration?: number) => {\n            if (isScheduled) {\n                throw createInvalidStateError();\n            }\n\n            start.call(nativeAudioBufferSourceNode, when, offset, duration);\n\n            isScheduled = true;\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n", "import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\n\nexport const wrapAudioScheduledSourceNodeStartMethodNegativeParameters = (\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\n): void => {\n    nativeAudioScheduledSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration?: number) => {\n            if ((typeof duration === 'number' && duration < 0) || offset < 0 || when < 0) {\n                throw new RangeError(\"The parameters can't be negative.\");\n            }\n\n            // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n            (<(when: number, offset: number, duration?: number) => void>start).call(nativeAudioScheduledSourceNode, when, offset, duration);\n        };\n    })(nativeAudioScheduledSourceNode.start);\n};\n", "import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\n\nexport const wrapAudioScheduledSourceNodeStopMethodNegativeParameters = (\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\n): void => {\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        return (when = 0) => {\n            if (when < 0) {\n                throw new RangeError(\"The parameter can't be negative.\");\n            }\n\n            stop.call(nativeAudioScheduledSourceNode, when);\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioBufferSourceNodeStartMethodConsecutiveCalls } from '../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeAudioBufferSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeAudioBufferSourceNodeFactory: TNativeAudioBufferSourceNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioBufferSourceNodeStartMethodOffsetClampling,\n    wrapAudioBufferSourceNodeStopMethodNullifiedBuffer,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n) => {\n    return (nativeContext, options) => {\n        const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n        assignNativeAudioNodeOptions(nativeAudioBufferSourceNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeAudioBufferSourceNode, options, 'playbackRate');\n\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'buffer');\n\n        // Bug #149: Safari does not yet support the detune AudioParam.\n\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loop');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopEnd');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopStart');\n\n        // Bug #69: Safari does allow calls to start() of an already scheduled AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, () =>\n                testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #154 & #155: Safari does not handle offsets which are equal to or greater than the duration of the buffer.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodOffsetClampingSupport, () =>\n                testAudioBufferSourceNodeStartMethodOffsetClampingSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStartMethodOffsetClampling(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #162: Safari does throw an error when stop() is called on an AudioBufferSourceNode which has no buffer assigned to it.\n        if (\n            !cacheTestResult(testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, () =>\n                testAudioBufferSourceNodeStopMethodNullifiedBufferSupport(nativeContext)\n            )\n        ) {\n            wrapAudioBufferSourceNodeStopMethodNullifiedBuffer(nativeAudioBufferSourceNode, nativeContext);\n        }\n\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeAudioBufferSourceNode, nativeContext);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeAudioBufferSourceNode);\n\n        return nativeAudioBufferSourceNode;\n    };\n};\n", "import { TNativeAudioContextConstructorFactory } from '../types';\n\nexport const createNativeAudioContextConstructor: TNativeAudioContextConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('AudioContext')) {\n        return window.AudioContext;\n    }\n\n    return window.hasOwnProperty('webkitAudioContext') ? (<any>window).webkitAudioContext : null;\n};\n", "import { TNativeAudioDestinationNode, TNativeAudioDestinationNodeFactoryFactory, TNativeGainNode } from '../types';\n\nexport const createNativeAudioDestinationNodeFactory: TNativeAudioDestinationNodeFactoryFactory = (\n    createNativeGainNode,\n    overwriteAccessors\n) => {\n    return (nativeContext, channelCount, isNodeOfNativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeContext.destination;\n\n        // Bug #132: Safari does not have the correct channelCount.\n        if (nativeAudioDestinationNode.channelCount !== channelCount) {\n            try {\n                nativeAudioDestinationNode.channelCount = channelCount;\n            } catch {\n                // Bug #169: Safari throws an error on each attempt to change the channelCount.\n            }\n        }\n\n        // Bug #83: Safari does not have the correct channelCountMode.\n        if (isNodeOfNativeOfflineAudioContext && nativeAudioDestinationNode.channelCountMode !== 'explicit') {\n            nativeAudioDestinationNode.channelCountMode = 'explicit';\n        }\n\n        // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n        if (nativeAudioDestinationNode.maxChannelCount === 0) {\n            Object.defineProperty(nativeAudioDestinationNode, 'maxChannelCount', {\n                value: channelCount\n            });\n        }\n\n        // Bug #168: No browser does yet have an AudioDestinationNode with an output.\n        const gainNode = createNativeGainNode(nativeContext, {\n            channelCount,\n            channelCountMode: nativeAudioDestinationNode.channelCountMode,\n            channelInterpretation: nativeAudioDestinationNode.channelInterpretation,\n            gain: 1\n        });\n\n        overwriteAccessors(\n            gainNode,\n            'channelCount',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n\n                try {\n                    nativeAudioDestinationNode.channelCount = value;\n                } catch (err) {\n                    // Bug #169: Safari throws an error on each attempt to change the channelCount.\n                    if (value > nativeAudioDestinationNode.maxChannelCount) {\n                        throw err;\n                    }\n                }\n            }\n        );\n\n        overwriteAccessors(\n            gainNode,\n            'channelCountMode',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n                nativeAudioDestinationNode.channelCountMode = value;\n            }\n        );\n\n        overwriteAccessors(\n            gainNode,\n            'channelInterpretation',\n            (get) => () => get.call(gainNode),\n            (set) => (value) => {\n                set.call(gainNode, value);\n                nativeAudioDestinationNode.channelInterpretation = value;\n            }\n        );\n\n        Object.defineProperty(gainNode, 'maxChannelCount', {\n            get: () => nativeAudioDestinationNode.maxChannelCount\n        });\n\n        // @todo This should be disconnected when the context is closed.\n        gainNode.connect(nativeAudioDestinationNode);\n\n        return <{ maxChannelCount: TNativeAudioDestinationNode['maxChannelCount'] } & TNativeGainNode>gainNode;\n    };\n};\n", "import { TNativeAudioWorkletNodeConstructorFactory } from '../types';\n\nexport const createNativeAudioWorkletNodeConstructor: TNativeAudioWorkletNodeConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    return window.hasOwnProperty('AudioWorkletNode') ? window.AudioWorkletNode : null;\n};\n", "import { IAudioWorkletNodeOptions } from '../interfaces';\n\nexport const testClonabilityOfAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): void => {\n    const { port1 } = new MessageChannel();\n\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    } finally {\n        port1.close();\n    }\n};\n", "import { testClonabilityOfAudioWorkletNodeOptions } from '../helpers/test-clonability-of-audio-worklet-node-options';\nimport { TNativeAudioWorkletNode, TNativeAudioWorkletNodeFactoryFactory, TNativeAudioWorkletNodeOptions } from '../types';\n\nexport const createNativeAudioWorkletNodeFactory: TNativeAudioWorkletNodeFactoryFactory = (\n    createInvalidStateError,\n    createNativeAudioWorkletNodeFaker,\n    createNativeGainNode,\n    createNotSupportedError,\n    monitorConnections\n) => {\n    return (nativeContext, baseLatency, nativeAudioWorkletNodeConstructor, name, processorConstructor, options) => {\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            try {\n                const nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(\n                    nativeContext,\n                    name,\n                    <TNativeAudioWorkletNodeOptions>options\n                );\n                const patchedEventListeners: Map<\n                    EventListenerOrEventListenerObject,\n                    NonNullable<TNativeAudioWorkletNode['onprocessorerror']>\n                > = new Map();\n\n                let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\n\n                Object.defineProperties(nativeAudioWorkletNode, {\n                    /*\n                     * Bug #61: Overwriting the property accessors for channelCount and channelCountMode is necessary as long as some\n                     * browsers have no native implementation to achieve a consistent behavior.\n                     */\n                    channelCount: {\n                        get: () => options.channelCount,\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    channelCountMode: {\n                        get: () => 'explicit',\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    // Bug #156: Chrome and Edge do not yet fire an ErrorEvent.\n                    onprocessorerror: {\n                        get: () => onprocessorerror,\n                        set: (value) => {\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.removeEventListener('processorerror', onprocessorerror);\n                            }\n\n                            onprocessorerror = typeof value === 'function' ? value : null;\n\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.addEventListener('processorerror', onprocessorerror);\n                            }\n                        }\n                    }\n                });\n\n                nativeAudioWorkletNode.addEventListener = ((addEventListener) => {\n                    return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\n                        if (args[0] === 'processorerror') {\n                            const unpatchedEventListener =\n                                typeof args[1] === 'function'\n                                    ? args[1]\n                                    : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                                    ? args[1].handleEvent\n                                    : null;\n\n                            if (unpatchedEventListener !== null) {\n                                const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                                if (patchedEventListener !== undefined) {\n                                    args[1] = patchedEventListener;\n                                } else {\n                                    args[1] = (event: Event) => {\n                                        // Bug #178: Chrome and Edge do fire an event of type error.\n                                        if (event.type === 'error') {\n                                            Object.defineProperties(event, {\n                                                type: { value: 'processorerror' }\n                                            });\n\n                                            unpatchedEventListener(event);\n                                        } else {\n                                            unpatchedEventListener(new ErrorEvent(args[0], { ...event }));\n                                        }\n                                    };\n\n                                    patchedEventListeners.set(unpatchedEventListener, args[1]);\n                                }\n                            }\n                        }\n\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        addEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n\n                        return addEventListener.call(nativeAudioWorkletNode, ...args);\n                    };\n                })(nativeAudioWorkletNode.addEventListener);\n\n                nativeAudioWorkletNode.removeEventListener = ((removeEventListener) => {\n                    return (...args: any[]): void => {\n                        if (args[0] === 'processorerror') {\n                            const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                            if (patchedEventListener !== undefined) {\n                                patchedEventListeners.delete(args[1]);\n\n                                args[1] = patchedEventListener;\n                            }\n                        }\n\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        removeEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n\n                        return removeEventListener.call(nativeAudioWorkletNode, args[0], args[1], args[2]);\n                    };\n                })(nativeAudioWorkletNode.removeEventListener);\n\n                /*\n                 * Bug #86: Chrome and Edge do not invoke the process() function if the corresponding AudioWorkletNode is unconnected but\n                 * has an output.\n                 */\n                if (options.numberOfOutputs !== 0) {\n                    const nativeGainNode = createNativeGainNode(nativeContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'discrete',\n                        gain: 0\n                    });\n\n                    nativeAudioWorkletNode.connect(nativeGainNode).connect(nativeContext.destination);\n\n                    const whenConnected = () => nativeGainNode.disconnect();\n                    const whenDisconnected = () => nativeGainNode.connect(nativeContext.destination);\n\n                    // @todo Disconnect the connection when the process() function of the AudioWorkletNode returns false.\n                    return monitorConnections(nativeAudioWorkletNode, whenConnected, whenDisconnected);\n                }\n\n                return nativeAudioWorkletNode;\n            } catch (err) {\n                // Bug #60: Chrome & Edge throw an InvalidStateError instead of a NotSupportedError.\n                if (err.code === 11) {\n                    throw createNotSupportedError();\n                }\n\n                throw err;\n            }\n        }\n\n        // Bug #61: Only Chrome & Edge have an implementation of the AudioWorkletNode yet.\n        if (processorConstructor === undefined) {\n            throw createNotSupportedError();\n        }\n\n        testClonabilityOfAudioWorkletNodeOptions(options);\n\n        return createNativeAudioWorkletNodeFaker(nativeContext, baseLatency, processorConstructor, options);\n    };\n};\n", "export const computeBufferSize = (baseLatency: null | number, sampleRate: number) => {\n    if (baseLatency === null) {\n        return 512;\n    }\n\n    return Math.max(512, Math.min(16384, Math.pow(2, Math.round(Math.log2(baseLatency * sampleRate)))));\n};\n", "import { IAudioWorkletNodeOptions } from '../interfaces';\n\nexport const cloneAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): Promise<IAudioWorkletNodeOptions> => {\n    return new Promise((resolve, reject) => {\n        const { port1, port2 } = new MessageChannel();\n\n        port1.onmessage = ({ data }) => {\n            port1.close();\n            port2.close();\n\n            resolve(data);\n        };\n        port1.onmessageerror = ({ data }) => {\n            port1.close();\n            port2.close();\n\n            reject(data);\n        };\n\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port2.postMessage(audioWorkletNodeOptions);\n    });\n};\n", "import { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { cloneAudioWorkletNodeOptions } from './clone-audio-worklet-node-options';\n\nexport const createAudioWorkletProcessorPromise = async (\n    processorConstructor: IAudioWorkletProcessorConstructor,\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\n): Promise<IAudioWorkletProcessor> => {\n    const clonedAudioWorkletNodeOptions = await cloneAudioWorkletNodeOptions(audioWorkletNodeOptions);\n\n    return new processorConstructor(clonedAudioWorkletNodeOptions);\n};\n", "import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\nimport { TNativeAudioWorkletNode, TNativeContext } from '../types';\nimport { createAudioWorkletProcessorPromise } from './create-audio-worklet-processor-promise';\n\nexport const createAudioWorkletProcessor = (\n    nativeContext: TNativeContext,\n    nativeAudioWorkletNode: TNativeAudioWorkletNode,\n    processorConstructor: IAudioWorkletProcessorConstructor,\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\n): Promise<IAudioWorkletProcessor> => {\n    let nodeToProcessorMap = NODE_TO_PROCESSOR_MAPS.get(nativeContext);\n\n    if (nodeToProcessorMap === undefined) {\n        nodeToProcessorMap = new WeakMap();\n\n        NODE_TO_PROCESSOR_MAPS.set(nativeContext, nodeToProcessorMap);\n    }\n\n    const audioWorkletProcessorPromise = createAudioWorkletProcessorPromise(processorConstructor, audioWorkletNodeOptions);\n\n    nodeToProcessorMap.set(nativeAudioWorkletNode, audioWorkletProcessorPromise);\n\n    return audioWorkletProcessorPromise;\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createAudioWorkletProcessor } from '../helpers/create-audio-worklet-processor';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { IAudioWorkletProcessor } from '../interfaces';\nimport { ReadOnlyMap } from '../read-only-map';\nimport {\n    TNativeAudioNode,\n    TNativeAudioParam,\n    TNativeAudioWorkletNode,\n    TNativeAudioWorkletNodeFakerFactoryFactory,\n    TNativeChannelMergerNode,\n    TNativeChannelSplitterNode,\n    TNativeConstantSourceNode,\n    TNativeGainNode\n} from '../types';\n\nexport const createNativeAudioWorkletNodeFakerFactory: TNativeAudioWorkletNodeFakerFactoryFactory = (\n    connectMultipleOutputs,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getActiveAudioWorkletNodeInputs,\n    monitorConnections\n) => {\n    return (nativeContext, baseLatency, processorConstructor, options) => {\n        if (options.numberOfInputs === 0 && options.numberOfOutputs === 0) {\n            throw createNotSupportedError();\n        }\n\n        const outputChannelCount = Array.isArray(options.outputChannelCount)\n            ? options.outputChannelCount\n            : Array.from(options.outputChannelCount);\n\n        // @todo Check if any of the channelCount values is greater than the implementation's maximum number of channels.\n        if (outputChannelCount.some((channelCount) => channelCount < 1)) {\n            throw createNotSupportedError();\n        }\n\n        if (outputChannelCount.length !== options.numberOfOutputs) {\n            throw createIndexSizeError();\n        }\n\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (options.channelCountMode !== 'explicit') {\n            throw createNotSupportedError();\n        }\n\n        const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n        const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n        const numberOfParameters =\n            processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (numberOfInputChannels + numberOfParameters > 6 || numberOfOutputChannels > 6) {\n            throw createNotSupportedError();\n        }\n\n        const messageChannel = new MessageChannel();\n        const gainNodes: TNativeGainNode[] = [];\n        const inputChannelSplitterNodes: TNativeChannelSplitterNode[] = [];\n\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes.push(\n                createNativeGainNode(nativeContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: options.channelCountMode,\n                    channelInterpretation: options.channelInterpretation,\n                    gain: 1\n                })\n            );\n            inputChannelSplitterNodes.push(\n                createNativeChannelSplitterNode(nativeContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    numberOfOutputs: options.channelCount\n                })\n            );\n        }\n\n        const constantSourceNodes: TNativeConstantSourceNode[] = [];\n\n        if (processorConstructor.parameterDescriptors !== undefined) {\n            for (const { defaultValue, maxValue, minValue, name } of processorConstructor.parameterDescriptors) {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset:\n                        options.parameterData[name] !== undefined\n                            ? options.parameterData[name]\n                            : defaultValue === undefined\n                            ? 0\n                            : defaultValue\n                });\n\n                Object.defineProperties(constantSourceNode.offset, {\n                    defaultValue: {\n                        get: () => (defaultValue === undefined ? 0 : defaultValue)\n                    },\n                    maxValue: {\n                        get: () => (maxValue === undefined ? MOST_POSITIVE_SINGLE_FLOAT : maxValue)\n                    },\n                    minValue: {\n                        get: () => (minValue === undefined ? MOST_NEGATIVE_SINGLE_FLOAT : minValue)\n                    }\n                });\n\n                constantSourceNodes.push(constantSourceNode);\n            }\n        }\n\n        const inputChannelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'speakers',\n            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n        });\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const scriptProcessorNode = createNativeScriptProcessorNode(\n            nativeContext,\n            bufferSize,\n            numberOfInputChannels + numberOfParameters,\n            // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n            Math.max(1, numberOfOutputChannels)\n        );\n        const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: Math.max(1, numberOfOutputChannels),\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: Math.max(1, numberOfOutputChannels)\n        });\n        const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\n\n        for (let i = 0; i < options.numberOfOutputs; i += 1) {\n            outputChannelMergerNodes.push(\n                createNativeChannelMergerNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'speakers',\n                    numberOfInputs: outputChannelCount[i]\n                })\n            );\n        }\n\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n\n            for (let j = 0; j < options.channelCount; j += 1) {\n                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n            }\n        }\n\n        const parameterMap = new ReadOnlyMap(\n            processorConstructor.parameterDescriptors === undefined\n                ? []\n                : processorConstructor.parameterDescriptors.map(({ name }, index) => {\n                      const constantSourceNode = constantSourceNodes[index];\n\n                      constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                      constantSourceNode.start(0);\n\n                      return <[string, TNativeAudioParam]>[name, constantSourceNode.offset];\n                  })\n        );\n\n        inputChannelMergerNode.connect(scriptProcessorNode);\n\n        let channelInterpretation = options.channelInterpretation;\n        let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\n\n        // Bug #87: Expose at least one output to make this node connectable.\n        const outputAudioNodes = options.numberOfOutputs === 0 ? [scriptProcessorNode] : outputChannelMergerNodes;\n        const nativeAudioWorkletNodeFaker = {\n            get bufferSize(): number {\n                return bufferSize;\n            },\n            get channelCount(): number {\n                return options.channelCount;\n            },\n            set channelCount(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelCountMode(): TNativeAudioWorkletNode['channelCountMode'] {\n                return options.channelCountMode;\n            },\n            set channelCountMode(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelInterpretation(): TNativeAudioWorkletNode['channelInterpretation'] {\n                return channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                for (const gainNode of gainNodes) {\n                    gainNode.channelInterpretation = value;\n                }\n\n                channelInterpretation = value;\n            },\n            get context(): TNativeAudioWorkletNode['context'] {\n                return scriptProcessorNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return gainNodes;\n            },\n            get numberOfInputs(): number {\n                return options.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return options.numberOfOutputs;\n            },\n            get onprocessorerror(): TNativeAudioWorkletNode['onprocessorerror'] {\n                return onprocessorerror;\n            },\n            set onprocessorerror(value) {\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.removeEventListener('processorerror', onprocessorerror);\n                }\n\n                onprocessorerror = typeof value === 'function' ? value : null;\n\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.addEventListener('processorerror', onprocessorerror);\n                }\n            },\n            get parameters(): TNativeAudioWorkletNode['parameters'] {\n                return parameterMap;\n            },\n            get port(): TNativeAudioWorkletNode['port'] {\n                return messageChannel.port2;\n            },\n            addEventListener(...args: any[]): void {\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            connect: <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputAudioNodes),\n            disconnect: <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputAudioNodes),\n            dispatchEvent(...args: any[]): boolean {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        const patchedEventListeners: Map<EventListenerOrEventListenerObject, NonNullable<MessagePort['onmessage']>> = new Map();\n\n        messageChannel.port1.addEventListener = ((addEventListener) => {\n            return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\n                if (args[0] === 'message') {\n                    const unpatchedEventListener =\n                        typeof args[1] === 'function'\n                            ? args[1]\n                            : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                            ? args[1].handleEvent\n                            : null;\n\n                    if (unpatchedEventListener !== null) {\n                        const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                        if (patchedEventListener !== undefined) {\n                            args[1] = <EventListenerOrEventListenerObject>patchedEventListener;\n                        } else {\n                            args[1] = (event: Event) => {\n                                exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\n                                    unpatchedEventListener(event)\n                                );\n                            };\n\n                            patchedEventListeners.set(unpatchedEventListener, args[1]);\n                        }\n                    }\n                }\n\n                return addEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.addEventListener);\n\n        messageChannel.port1.removeEventListener = ((removeEventListener) => {\n            return (...args: any[]): void => {\n                if (args[0] === 'message') {\n                    const patchedEventListener = patchedEventListeners.get(args[1]);\n\n                    if (patchedEventListener !== undefined) {\n                        patchedEventListeners.delete(args[1]);\n\n                        args[1] = patchedEventListener;\n                    }\n                }\n\n                return removeEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.removeEventListener);\n\n        let onmessage: MessagePort['onmessage'] = null;\n\n        Object.defineProperty(messageChannel.port1, 'onmessage', {\n            get: () => onmessage,\n            set: (value) => {\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.removeEventListener('message', onmessage);\n                }\n\n                onmessage = typeof value === 'function' ? value : null;\n\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.addEventListener('message', onmessage);\n                    messageChannel.port1.start();\n                }\n            }\n        });\n\n        processorConstructor.prototype.port = messageChannel.port1;\n\n        let audioWorkletProcessor: null | IAudioWorkletProcessor = null;\n\n        const audioWorkletProcessorPromise = createAudioWorkletProcessor(\n            nativeContext,\n            nativeAudioWorkletNodeFaker,\n            processorConstructor,\n            options\n        );\n\n        audioWorkletProcessorPromise.then((dWrkltPrcssr) => (audioWorkletProcessor = dWrkltPrcssr));\n\n        const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n        const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n        const parameters: { [name: string]: Float32Array } =\n            processorConstructor.parameterDescriptors === undefined\n                ? []\n                : processorConstructor.parameterDescriptors.reduce(\n                      (prmtrs, { name }) => ({ ...prmtrs, [name]: new Float32Array(128) }),\n                      {}\n                  );\n\n        let isActive = true;\n\n        const disconnectOutputsGraph = () => {\n            if (options.numberOfOutputs > 0) {\n                scriptProcessorNode.disconnect(outputChannelSplitterNode);\n            }\n\n            for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                    outputChannelSplitterNode.disconnect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                }\n\n                outputChannelSplitterNodeOutput += outputChannelCount[i];\n            }\n        };\n\n        const activeInputIndexes = new Map<number, number>();\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer, outputBuffer }: AudioProcessingEvent) => {\n            if (audioWorkletProcessor !== null) {\n                const activeInputs = getActiveAudioWorkletNodeInputs(nativeAudioWorkletNodeFaker);\n\n                for (let i = 0; i < bufferSize; i += 128) {\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < options.channelCount; k += 1) {\n                            copyFromChannel(inputBuffer, inputs[j], k, k, i);\n                        }\n                    }\n\n                    if (processorConstructor.parameterDescriptors !== undefined) {\n                        processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                            copyFromChannel(inputBuffer, parameters, name, numberOfInputChannels + index, i);\n                        });\n                    }\n\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                            // The byteLength will be 0 when the ArrayBuffer was transferred.\n                            if (outputs[j][k].byteLength === 0) {\n                                outputs[j][k] = new Float32Array(128);\n                            }\n                        }\n                    }\n\n                    try {\n                        const potentiallyEmptyInputs = inputs.map((input, index) => {\n                            const activeInput = activeInputs[index];\n\n                            if (activeInput.size > 0) {\n                                activeInputIndexes.set(index, bufferSize / 128);\n\n                                return input;\n                            }\n\n                            const count = activeInputIndexes.get(index);\n\n                            if (count === undefined) {\n                                return [];\n                            }\n\n                            if (input.every((channelData) => channelData.every((sample) => sample === 0))) {\n                                if (count === 1) {\n                                    activeInputIndexes.delete(index);\n                                } else {\n                                    activeInputIndexes.set(index, count - 1);\n                                }\n                            }\n\n                            return input;\n                        });\n\n                        const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\n                            nativeContext.currentTime + i / nativeContext.sampleRate,\n                            nativeContext.sampleRate,\n                            () => (<IAudioWorkletProcessor>audioWorkletProcessor).process(potentiallyEmptyInputs, outputs, parameters)\n                        );\n\n                        isActive = activeSourceFlag;\n\n                        for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                                copyToChannel(outputBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                            }\n\n                            outputChannelSplitterNodeOutput += outputChannelCount[j];\n                        }\n                    } catch (error) {\n                        isActive = false;\n\n                        nativeAudioWorkletNodeFaker.dispatchEvent(\n                            new ErrorEvent('processorerror', {\n                                colno: error.colno,\n                                filename: error.filename,\n                                lineno: error.lineno,\n                                message: error.message\n                            })\n                        );\n                    }\n\n                    if (!isActive) {\n                        for (let j = 0; j < options.numberOfInputs; j += 1) {\n                            gainNodes[j].disconnect(inputChannelSplitterNodes[j]);\n\n                            for (let k = 0; k < options.channelCount; k += 1) {\n                                inputChannelSplitterNodes[i].disconnect(inputChannelMergerNode, k, j * options.channelCount + k);\n                            }\n                        }\n\n                        if (processorConstructor.parameterDescriptors !== undefined) {\n                            const length = processorConstructor.parameterDescriptors.length;\n\n                            for (let j = 0; j < length; j += 1) {\n                                const constantSourceNode = constantSourceNodes[j];\n\n                                constantSourceNode.disconnect(inputChannelMergerNode, 0, numberOfInputChannels + j);\n                                constantSourceNode.stop();\n                            }\n                        }\n\n                        inputChannelMergerNode.disconnect(scriptProcessorNode);\n\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n\n                        if (isConnected) {\n                            disconnectOutputsGraph();\n                        } else {\n                            disconnectFakeGraph();\n                        }\n\n                        break;\n                    }\n                }\n            }\n        };\n\n        let isConnected = false;\n\n        // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        const connectFakeGraph = () => scriptProcessorNode.connect(nativeGainNode).connect(nativeContext.destination);\n        const disconnectFakeGraph = () => {\n            scriptProcessorNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n        const whenConnected = () => {\n            if (isActive) {\n                disconnectFakeGraph();\n\n                if (options.numberOfOutputs > 0) {\n                    scriptProcessorNode.connect(outputChannelSplitterNode);\n                }\n\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n            }\n\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            if (isActive) {\n                connectFakeGraph();\n                disconnectOutputsGraph();\n            }\n\n            isConnected = false;\n        };\n\n        connectFakeGraph();\n\n        return monitorConnections(nativeAudioWorkletNodeFaker, whenConnected, whenDisconnected);\n    };\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeBiquadFilterNodeFactory } from '../types';\n\nexport const createNativeBiquadFilterNode: TNativeBiquadFilterNodeFactory = (nativeContext, options) => {\n    const nativeBiquadFilterNode = nativeContext.createBiquadFilter();\n\n    assignNativeAudioNodeOptions(nativeBiquadFilterNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'Q');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'detune');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'frequency');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'gain');\n\n    assignNativeAudioNodeOption(nativeBiquadFilterNode, options, 'type');\n\n    return nativeBiquadFilterNode;\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeChannelMergerNodeFactoryFactory } from '../types';\n\nexport const createNativeChannelMergerNodeFactory: TNativeChannelMergerNodeFactoryFactory = (\n    nativeAudioContextConstructor,\n    wrapChannelMergerNode\n) => {\n    return (nativeContext, options) => {\n        const nativeChannelMergerNode = nativeContext.createChannelMerger(options.numberOfInputs);\n\n        /*\n         * Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here.\n         */\n        if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n            wrapChannelMergerNode(nativeContext, nativeChannelMergerNode);\n        }\n\n        assignNativeAudioNodeOptions(nativeChannelMergerNode, options);\n\n        return nativeChannelMergerNode;\n    };\n};\n", "import { createInvalidStateError } from '../factories/invalid-state-error';\nimport { TNativeChannelSplitterNode } from '../types';\n\nexport const wrapChannelSplitterNode = (channelSplitterNode: TNativeChannelSplitterNode): void => {\n    const channelCount = channelSplitterNode.numberOfOutputs;\n\n    // Bug #97: Safari does not throw an error when attempting to change the channelCount to something other than its initial value.\n    Object.defineProperty(channelSplitterNode, 'channelCount', {\n        get: () => channelCount,\n        set: (value) => {\n            if (value !== channelCount) {\n                throw createInvalidStateError();\n            }\n        }\n    });\n\n    // Bug #30: Safari does not throw an error when attempting to change the channelCountMode to something other than explicit.\n    Object.defineProperty(channelSplitterNode, 'channelCountMode', {\n        get: () => 'explicit',\n        set: (value) => {\n            if (value !== 'explicit') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n\n    // Bug #32: Safari does not throw an error when attempting to change the channelInterpretation to something other than discrete.\n    Object.defineProperty(channelSplitterNode, 'channelInterpretation', {\n        get: () => 'discrete',\n        set: (value) => {\n            if (value !== 'discrete') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapChannelSplitterNode } from '../helpers/wrap-channel-splitter-node';\nimport { TNativeChannelSplitterNodeFactory } from '../types';\n\nexport const createNativeChannelSplitterNode: TNativeChannelSplitterNodeFactory = (nativeContext, options) => {\n    const nativeChannelSplitterNode = nativeContext.createChannelSplitter(options.numberOfOutputs);\n\n    // Bug #96: Safari does not have the correct channelCount.\n    // Bug #29: Safari does not have the correct channelCountMode.\n    // Bug #31: Safari does not have the correct channelInterpretation.\n    assignNativeAudioNodeOptions(nativeChannelSplitterNode, options);\n\n    // Bug #29, #30, #31, #32, #96 & #97: Only Chrome, Edge & Firefox partially support the spec yet.\n    wrapChannelSplitterNode(nativeChannelSplitterNode);\n\n    return nativeChannelSplitterNode;\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeConstantSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeConstantSourceNodeFactory: TNativeConstantSourceNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    createNativeConstantSourceNodeFaker,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\n) => {\n    return (nativeContext, options) => {\n        // Bug #62: Safari does not support ConstantSourceNodes.\n        if (nativeContext.createConstantSource === undefined) {\n            return createNativeConstantSourceNodeFaker(nativeContext, options);\n        }\n\n        const nativeConstantSourceNode = nativeContext.createConstantSource();\n\n        assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset');\n\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeConstantSourceNode);\n\n        return nativeConstantSourceNode;\n    };\n};\n", "import { TNativeAudioNode } from '../types';\n\nexport const interceptConnections = <T extends object>(\n    original: T,\n    interceptor: TNativeAudioNode\n): T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] } => {\n    (<T & { connect: TNativeAudioNode['connect'] }>original).connect = interceptor.connect.bind(interceptor);\n\n    (<T & { disconnect: TNativeAudioNode['disconnect'] }>original).disconnect = interceptor.disconnect.bind(interceptor);\n\n    return <T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] }>original;\n};\n", "import { interceptConnections } from '../helpers/intercept-connections';\nimport {\n    TNativeAudioBufferSourceNode,\n    TNativeAudioNode,\n    TNativeConstantSourceNode,\n    TNativeConstantSourceNodeFakerFactoryFactory\n} from '../types';\n\nexport const createNativeConstantSourceNodeFakerFactory: TNativeConstantSourceNodeFakerFactoryFactory = (\n    addSilentConnection,\n    createNativeAudioBufferSourceNode,\n    createNativeGainNode,\n    monitorConnections\n) => {\n    return (nativeContext, { offset, ...audioNodeOptions }) => {\n        const audioBuffer = nativeContext.createBuffer(1, 2, 44100);\n        const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const gainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: offset });\n\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n        const channelData = audioBuffer.getChannelData(0);\n\n        // Bug #95: Safari does not play or loop one sample buffers.\n        channelData[0] = 1;\n        channelData[1] = 1;\n\n        audioBufferSourceNode.buffer = audioBuffer;\n        audioBufferSourceNode.loop = true;\n\n        const nativeConstantSourceNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return gainNode.channelCount;\n            },\n            set channelCount(value) {\n                gainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeConstantSourceNode['channelCountMode'] {\n                return gainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                gainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeConstantSourceNode['channelInterpretation'] {\n                return gainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                gainNode.channelInterpretation = value;\n            },\n            get context(): TNativeConstantSourceNode['context'] {\n                return gainNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [];\n            },\n            get numberOfInputs(): number {\n                return audioBufferSourceNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return gainNode.numberOfOutputs;\n            },\n            get offset(): TNativeConstantSourceNode['offset'] {\n                return gainNode.gain;\n            },\n            get onended(): TNativeConstantSourceNode['onended'] {\n                return audioBufferSourceNode.onended;\n            },\n            set onended(value) {\n                audioBufferSourceNode.onended = <TNativeAudioBufferSourceNode['onended']>value;\n            },\n            addEventListener(...args: any[]): void {\n                return audioBufferSourceNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return audioBufferSourceNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return audioBufferSourceNode.removeEventListener(args[0], args[1], args[2]);\n            },\n            start(when = 0): void {\n                audioBufferSourceNode.start.call(audioBufferSourceNode, when);\n            },\n            stop(when = 0): void {\n                audioBufferSourceNode.stop.call(audioBufferSourceNode, when);\n            }\n        };\n\n        const whenConnected = () => audioBufferSourceNode.connect(gainNode);\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(gainNode);\n\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, audioBufferSourceNode);\n\n        return monitorConnections(interceptConnections(nativeConstantSourceNodeFaker, gainNode), whenConnected, whenDisconnected);\n    };\n};\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeConvolverNodeFactoryFactory } from '../types';\n\nexport const createNativeConvolverNodeFactory: TNativeConvolverNodeFactoryFactory = (createNotSupportedError, overwriteAccessors) => {\n    return (nativeContext, options) => {\n        const nativeConvolverNode = nativeContext.createConvolver();\n\n        assignNativeAudioNodeOptions(nativeConvolverNode, options);\n\n        // The normalize property needs to be set before setting the buffer.\n        if (options.disableNormalization === nativeConvolverNode.normalize) {\n            nativeConvolverNode.normalize = !options.disableNormalization;\n        }\n\n        assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer');\n\n        // Bug #113: Safari does allow to set the channelCount to a value larger than 2.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        overwriteAccessors(\n            nativeConvolverNode,\n            'channelCount',\n            (get) => () => get.call(nativeConvolverNode),\n            (set) => (value) => {\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n\n                return set.call(nativeConvolverNode, value);\n            }\n        );\n\n        // Bug #114: Safari allows to set the channelCountMode to 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        overwriteAccessors(\n            nativeConvolverNode,\n            'channelCountMode',\n            (get) => () => get.call(nativeConvolverNode),\n            (set) => (value) => {\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                return set.call(nativeConvolverNode, value);\n            }\n        );\n\n        return nativeConvolverNode;\n    };\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeDelayNodeFactory } from '../types';\n\nexport const createNativeDelayNode: TNativeDelayNodeFactory = (nativeContext, options) => {\n    const nativeDelayNode = nativeContext.createDelay(options.maxDelayTime);\n\n    assignNativeAudioNodeOptions(nativeDelayNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeDelayNode, options, 'delayTime');\n\n    return nativeDelayNode;\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeDynamicsCompressorNodeFactoryFactory } from '../types';\n\nexport const createNativeDynamicsCompressorNodeFactory: TNativeDynamicsCompressorNodeFactoryFactory = (createNotSupportedError) => {\n    return (nativeContext, options) => {\n        const nativeDynamicsCompressorNode = nativeContext.createDynamicsCompressor();\n\n        assignNativeAudioNodeOptions(nativeDynamicsCompressorNode, options);\n\n        // Bug #108: Safari allows a channelCount of three and above.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        // Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'attack');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'knee');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'ratio');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'release');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'threshold');\n\n        return nativeDynamicsCompressorNode;\n    };\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeGainNodeFactory } from '../types';\n\nexport const createNativeGainNode: TNativeGainNodeFactory = (nativeContext, options) => {\n    const nativeGainNode = nativeContext.createGain();\n\n    assignNativeAudioNodeOptions(nativeGainNode, options);\n\n    assignNativeAudioNodeAudioParamValue(nativeGainNode, options, 'gain');\n\n    return nativeGainNode;\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeIIRFilterNodeFactoryFactory } from '../types';\n\nexport const createNativeIIRFilterNodeFactory: TNativeIIRFilterNodeFactoryFactory = (createNativeIIRFilterNodeFaker) => {\n    return (nativeContext, baseLatency, options) => {\n        // Bug #9: Safari does not support IIRFilterNodes.\n        if (nativeContext.createIIRFilter === undefined) {\n            return createNativeIIRFilterNodeFaker(nativeContext, baseLatency, options);\n        }\n\n        // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n        const nativeIIRFilterNode = nativeContext.createIIRFilter(<number[]>options.feedforward, <number[]>options.feedback);\n\n        assignNativeAudioNodeOptions(nativeIIRFilterNode, options);\n\n        return nativeIIRFilterNode;\n    };\n};\n", "import { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { filterBuffer } from '../helpers/filter-buffer';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativeIIRFilterNode, TNativeIIRFilterNodeFakerFactoryFactory } from '../types';\n\nfunction divide(a: [number, number], b: [number, number]): [number, number] {\n    const denominator = b[0] * b[0] + b[1] * b[1];\n\n    return [(a[0] * b[0] + a[1] * b[1]) / denominator, (a[1] * b[0] - a[0] * b[1]) / denominator];\n}\n\nfunction multiply(a: [number, number], b: [number, number]): [number, number] {\n    return [a[0] * b[0] - a[1] * b[1], a[0] * b[1] + a[1] * b[0]];\n}\n\nfunction evaluatePolynomial(coefficient: Float64Array, z: [number, number]): [number, number] {\n    let result: [number, number] = [0, 0];\n\n    for (let i = coefficient.length - 1; i >= 0; i -= 1) {\n        result = multiply(result, z);\n\n        result[0] += coefficient[i];\n    }\n\n    return result;\n}\n\nexport const createNativeIIRFilterNodeFakerFactory: TNativeIIRFilterNodeFakerFactoryFactory = (\n    createInvalidAccessError,\n    createInvalidStateError,\n    createNativeScriptProcessorNode,\n    createNotSupportedError\n) => {\n    return (nativeContext, baseLatency, { channelCount, channelCountMode, channelInterpretation, feedback, feedforward }) => {\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n        const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n        const feedbackLength = convertedFeedback.length;\n        const feedforwardLength = convertedFeedforward.length;\n        const minLength = Math.min(feedbackLength, feedforwardLength);\n\n        if (feedbackLength === 0 || feedbackLength > 20) {\n            throw createNotSupportedError();\n        }\n\n        if (convertedFeedback[0] === 0) {\n            throw createInvalidStateError();\n        }\n\n        if (feedforwardLength === 0 || feedforwardLength > 20) {\n            throw createNotSupportedError();\n        }\n\n        if (convertedFeedforward[0] === 0) {\n            throw createInvalidStateError();\n        }\n\n        if (convertedFeedback[0] !== 1) {\n            for (let i = 0; i < feedforwardLength; i += 1) {\n                convertedFeedforward[i] /= convertedFeedback[0];\n            }\n\n            for (let i = 1; i < feedbackLength; i += 1) {\n                convertedFeedback[i] /= convertedFeedback[0];\n            }\n        }\n\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, bufferSize, channelCount, channelCount);\n\n        scriptProcessorNode.channelCount = channelCount;\n        scriptProcessorNode.channelCountMode = channelCountMode;\n        scriptProcessorNode.channelInterpretation = channelInterpretation;\n\n        const bufferLength = 32;\n        const bufferIndexes: number[] = [];\n        const xBuffers: Float32Array[] = [];\n        const yBuffers: Float32Array[] = [];\n\n        for (let i = 0; i < channelCount; i += 1) {\n            bufferIndexes.push(0);\n\n            const xBuffer = new Float32Array(bufferLength);\n            const yBuffer = new Float32Array(bufferLength);\n\n            xBuffer.fill(0);\n            yBuffer.fill(0);\n\n            xBuffers.push(xBuffer);\n            yBuffers.push(yBuffer);\n        }\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = (event: AudioProcessingEvent) => {\n            const inputBuffer = event.inputBuffer;\n            const outputBuffer = event.outputBuffer;\n\n            const numberOfChannels = inputBuffer.numberOfChannels;\n\n            for (let i = 0; i < numberOfChannels; i += 1) {\n                const input = inputBuffer.getChannelData(i);\n                const output = outputBuffer.getChannelData(i);\n\n                bufferIndexes[i] = filterBuffer(\n                    convertedFeedback,\n                    feedbackLength,\n                    convertedFeedforward,\n                    feedforwardLength,\n                    minLength,\n                    xBuffers[i],\n                    yBuffers[i],\n                    bufferIndexes[i],\n                    bufferLength,\n                    input,\n                    output\n                );\n            }\n        };\n\n        const nyquist = nativeContext.sampleRate / 2;\n\n        const nativeIIRFilterNodeFaker = {\n            get bufferSize(): number {\n                return bufferSize;\n            },\n            get channelCount(): number {\n                return scriptProcessorNode.channelCount;\n            },\n            set channelCount(value) {\n                scriptProcessorNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeIIRFilterNode['channelCountMode'] {\n                return scriptProcessorNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                scriptProcessorNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeIIRFilterNode['channelInterpretation'] {\n                return scriptProcessorNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                scriptProcessorNode.channelInterpretation = value;\n            },\n            get context(): TNativeIIRFilterNode['context'] {\n                return scriptProcessorNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [scriptProcessorNode];\n            },\n            get numberOfInputs(): number {\n                return scriptProcessorNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return scriptProcessorNode.numberOfOutputs;\n            },\n            addEventListener(...args: any[]): void {\n                // @todo Dissallow adding an audioprocess listener.\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\n                if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                    throw createInvalidAccessError();\n                }\n\n                const length = frequencyHz.length;\n\n                for (let i = 0; i < length; i += 1) {\n                    const omega = -Math.PI * (frequencyHz[i] / nyquist);\n                    const z: [number, number] = [Math.cos(omega), Math.sin(omega)];\n                    const numerator = evaluatePolynomial(convertedFeedforward, z);\n                    const denominator = evaluatePolynomial(convertedFeedback, z);\n                    const response = divide(numerator, denominator);\n\n                    magResponse[i] = Math.sqrt(response[0] * response[0] + response[1] * response[1]);\n                    phaseResponse[i] = Math.atan2(response[1], response[0]);\n                }\n            },\n            removeEventListener(...args: any[]): void {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        return interceptConnections(nativeIIRFilterNodeFaker, scriptProcessorNode);\n    };\n};\n", "import { TNativeMediaElementAudioSourceNodeFactory } from '../types';\n\nexport const createNativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNodeFactory = (nativeAudioContext, options) => {\n    return nativeAudioContext.createMediaElementSource(options.mediaElement);\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeMediaStreamAudioDestinationNodeFactory } from '../types';\n\nexport const createNativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNodeFactory = (nativeAudioContext, options) => {\n    const nativeMediaStreamAudioDestinationNode = nativeAudioContext.createMediaStreamDestination();\n\n    assignNativeAudioNodeOptions(nativeMediaStreamAudioDestinationNode, options);\n\n    // Bug #174: Safari does expose a wrong numberOfOutputs.\n    if (nativeMediaStreamAudioDestinationNode.numberOfOutputs === 1) {\n        Object.defineProperty(nativeMediaStreamAudioDestinationNode, 'numberOfOutputs', { get: () => 0 });\n    }\n\n    return nativeMediaStreamAudioDestinationNode;\n};\n", "import { TNativeMediaStreamAudioSourceNodeFactory } from '../types';\n\nexport const createNativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNodeFactory = (nativeAudioContext, { mediaStream }) => {\n    const audioStreamTracks = mediaStream.getAudioTracks();\n    /*\n     * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n     * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n     */\n    audioStreamTracks.sort((a, b) => (a.id < b.id ? -1 : a.id > b.id ? 1 : 0));\n\n    const filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n\n    const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n\n    /*\n     * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs\n     * to be overwritten as it would otherwise expose the reconstructed version.\n     */\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\n\n    return nativeMediaStreamAudioSourceNode;\n};\n", "import { TNativeMediaStreamTrackAudioSourceNodeFactoryFactory } from '../types';\n\nexport const createNativeMediaStreamTrackAudioSourceNodeFactory: TNativeMediaStreamTrackAudioSourceNodeFactoryFactory = (\n    createInvalidStateError,\n    isNativeOfflineAudioContext\n) => {\n    return (nativeAudioContext, { mediaStreamTrack }) => {\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n            return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\n        }\n\n        const mediaStream = new MediaStream([mediaStreamTrack]);\n        const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream);\n\n        // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n        if (mediaStreamTrack.kind !== 'audio') {\n            throw createInvalidStateError();\n        }\n\n        // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n        if (isNativeOfflineAudioContext(nativeAudioContext)) {\n            throw new TypeError();\n        }\n\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n", "import { TNativeOfflineAudioContextConstructorFactory } from '../types';\n\nexport const createNativeOfflineAudioContextConstructor: TNativeOfflineAudioContextConstructorFactory = (window) => {\n    if (window === null) {\n        return null;\n    }\n\n    if (window.hasOwnProperty('OfflineAudioContext')) {\n        return window.OfflineAudioContext;\n    }\n\n    return window.hasOwnProperty('webkitOfflineAudioContext') ? (<any>window).webkitOfflineAudioContext : null;\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nimport { TNativeOscillatorNodeFactoryFactory } from '../types';\n\nexport const createNativeOscillatorNodeFactory: TNativeOscillatorNodeFactoryFactory = (\n    addSilentConnection,\n    cacheTestResult,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n) => {\n    return (nativeContext, options) => {\n        const nativeOscillatorNode = nativeContext.createOscillator();\n\n        assignNativeAudioNodeOptions(nativeOscillatorNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'detune');\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'frequency');\n\n        if (options.periodicWave !== undefined) {\n            nativeOscillatorNode.setPeriodicWave(options.periodicWave);\n        } else {\n            assignNativeAudioNodeOption(nativeOscillatorNode, options, 'type');\n        }\n\n        // Bug #44: Only Chrome & Edge throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeOscillatorNode);\n        }\n\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeOscillatorNode, nativeContext);\n        }\n\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\n            )\n        ) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeOscillatorNode);\n        }\n\n        // Bug #175: Safari will not fire an ended event if the OscillatorNode is unconnected.\n        addSilentConnection(nativeContext, nativeOscillatorNode);\n\n        return nativeOscillatorNode;\n    };\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativePannerNodeFactoryFactory } from '../types';\n\nexport const createNativePannerNodeFactory: TNativePannerNodeFactoryFactory = (createNativePannerNodeFaker) => {\n    return (nativeContext, options) => {\n        const nativePannerNode = nativeContext.createPanner();\n\n        // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n        if (nativePannerNode.orientationX === undefined) {\n            return createNativePannerNodeFaker(nativeContext, options);\n        }\n\n        assignNativeAudioNodeOptions(nativePannerNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationZ');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionZ');\n\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneInnerAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterGain');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'distanceModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'maxDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'panningModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'refDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'rolloffFactor');\n\n        return nativePannerNode;\n    };\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativePannerNode, TNativePannerNodeFakerFactoryFactory } from '../types';\n\nexport const createNativePannerNodeFakerFactory: TNativePannerNodeFakerFactoryFactory = (\n    connectNativeAudioNodeToNativeAudioNode,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getFirstSample,\n    monitorConnections\n) => {\n    return (\n        nativeContext,\n        {\n            coneInnerAngle,\n            coneOuterAngle,\n            coneOuterGain,\n            distanceModel,\n            maxDistance,\n            orientationX,\n            orientationY,\n            orientationZ,\n            panningModel,\n            positionX,\n            positionY,\n            positionZ,\n            refDistance,\n            rolloffFactor,\n            ...audioNodeOptions\n        }\n    ) => {\n        const pannerNode = nativeContext.createPanner();\n\n        // Bug #125: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n\n        // Bug #126: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\n\n        const SINGLE_CHANNEL_OPTIONS = {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete'\n        } as const;\n\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            channelInterpretation: 'speakers',\n            numberOfInputs: 6\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const orientationXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 1 });\n        const orientationYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const orientationZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\n        const waveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            curve: new Float32Array([1, 1]),\n            oversample: 'none'\n        });\n\n        let lastOrientation: [number, number, number] = [orientationX, orientationY, orientationZ];\n        let lastPosition: [number, number, number] = [positionX, positionY, positionZ];\n\n        const buffer = new Float32Array(1);\n\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n            const orientation: [number, number, number] = [\n                getFirstSample(inputBuffer, buffer, 0),\n                getFirstSample(inputBuffer, buffer, 1),\n                getFirstSample(inputBuffer, buffer, 2)\n            ];\n\n            if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                pannerNode.setOrientation(...orientation); // tslint:disable-line:deprecation\n\n                lastOrientation = orientation;\n            }\n\n            const positon: [number, number, number] = [\n                getFirstSample(inputBuffer, buffer, 3),\n                getFirstSample(inputBuffer, buffer, 4),\n                getFirstSample(inputBuffer, buffer, 5)\n            ];\n\n            if (positon.some((value, index) => value !== lastPosition[index])) {\n                pannerNode.setPosition(...positon); // tslint:disable-line:deprecation\n\n                lastPosition = positon;\n            }\n        };\n\n        Object.defineProperty(orientationYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(orientationZGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionXGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionZGainNode.gain, 'defaultValue', { get: () => 0 });\n\n        const nativePannerNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return pannerNode.channelCount;\n            },\n            set channelCount(value) {\n                // Bug #125: Safari does not throw an error yet.\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCount = value;\n                pannerNode.channelCount = value;\n            },\n            get channelCountMode(): TNativePannerNode['channelCountMode'] {\n                return pannerNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                // Bug #126: Safari does not throw an error yet.\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCountMode = value;\n                pannerNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativePannerNode['channelInterpretation'] {\n                return pannerNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                pannerNode.channelInterpretation = value;\n            },\n            get coneInnerAngle(): TNativePannerNode['coneInnerAngle'] {\n                return pannerNode.coneInnerAngle;\n            },\n            set coneInnerAngle(value) {\n                pannerNode.coneInnerAngle = value;\n            },\n            get coneOuterAngle(): TNativePannerNode['coneOuterAngle'] {\n                return pannerNode.coneOuterAngle;\n            },\n            set coneOuterAngle(value) {\n                pannerNode.coneOuterAngle = value;\n            },\n            get coneOuterGain(): TNativePannerNode['coneOuterGain'] {\n                return pannerNode.coneOuterGain;\n            },\n            set coneOuterGain(value) {\n                // Bug #127: Safari does not throw an InvalidStateError yet.\n                if (value < 0 || value > 1) {\n                    throw createInvalidStateError();\n                }\n\n                pannerNode.coneOuterGain = value;\n            },\n            get context(): TNativePannerNode['context'] {\n                return pannerNode.context;\n            },\n            get distanceModel(): TNativePannerNode['distanceModel'] {\n                return pannerNode.distanceModel;\n            },\n            set distanceModel(value) {\n                pannerNode.distanceModel = value;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get maxDistance(): TNativePannerNode['maxDistance'] {\n                return pannerNode.maxDistance;\n            },\n            set maxDistance(value) {\n                // Bug #128: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.maxDistance = value;\n            },\n            get numberOfInputs(): number {\n                return pannerNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return pannerNode.numberOfOutputs;\n            },\n            get orientationX(): TNativePannerNode['orientationX'] {\n                return orientationXGainNode.gain;\n            },\n            get orientationY(): TNativePannerNode['orientationY'] {\n                return orientationYGainNode.gain;\n            },\n            get orientationZ(): TNativePannerNode['orientationZ'] {\n                return orientationZGainNode.gain;\n            },\n            get panningModel(): TNativePannerNode['panningModel'] {\n                return pannerNode.panningModel;\n            },\n            set panningModel(value) {\n                pannerNode.panningModel = value;\n            },\n            get positionX(): TNativePannerNode['positionX'] {\n                return positionXGainNode.gain;\n            },\n            get positionY(): TNativePannerNode['positionY'] {\n                return positionYGainNode.gain;\n            },\n            get positionZ(): TNativePannerNode['positionZ'] {\n                return positionZGainNode.gain;\n            },\n            get refDistance(): TNativePannerNode['refDistance'] {\n                return pannerNode.refDistance;\n            },\n            set refDistance(value) {\n                // Bug #129: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.refDistance = value;\n            },\n            get rolloffFactor(): TNativePannerNode['rolloffFactor'] {\n                return pannerNode.rolloffFactor;\n            },\n            set rolloffFactor(value) {\n                // Bug #130: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n\n                pannerNode.rolloffFactor = value;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\n            nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\n        }\n\n        if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\n            nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\n        }\n\n        if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\n            nativePannerNodeFaker.coneOuterGain = coneOuterGain;\n        }\n\n        if (distanceModel !== nativePannerNodeFaker.distanceModel) {\n            nativePannerNodeFaker.distanceModel = distanceModel;\n        }\n\n        if (maxDistance !== nativePannerNodeFaker.maxDistance) {\n            nativePannerNodeFaker.maxDistance = maxDistance;\n        }\n\n        if (orientationX !== nativePannerNodeFaker.orientationX.value) {\n            nativePannerNodeFaker.orientationX.value = orientationX;\n        }\n\n        if (orientationY !== nativePannerNodeFaker.orientationY.value) {\n            nativePannerNodeFaker.orientationY.value = orientationY;\n        }\n\n        if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\n            nativePannerNodeFaker.orientationZ.value = orientationZ;\n        }\n\n        if (panningModel !== nativePannerNodeFaker.panningModel) {\n            nativePannerNodeFaker.panningModel = panningModel;\n        }\n\n        if (positionX !== nativePannerNodeFaker.positionX.value) {\n            nativePannerNodeFaker.positionX.value = positionX;\n        }\n\n        if (positionY !== nativePannerNodeFaker.positionY.value) {\n            nativePannerNodeFaker.positionY.value = positionY;\n        }\n\n        if (positionZ !== nativePannerNodeFaker.positionZ.value) {\n            nativePannerNodeFaker.positionZ.value = positionZ;\n        }\n\n        if (refDistance !== nativePannerNodeFaker.refDistance) {\n            nativePannerNodeFaker.refDistance = refDistance;\n        }\n\n        if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\n            nativePannerNodeFaker.rolloffFactor = rolloffFactor;\n        }\n\n        if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\n            pannerNode.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n        }\n\n        if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\n            pannerNode.setPosition(...lastPosition); // tslint:disable-line:deprecation\n        }\n\n        const whenConnected = () => {\n            inputGainNode.connect(pannerNode);\n\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n\n            waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\n            waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\n            waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\n            waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\n            waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\n            waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\n\n            channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(pannerNode);\n\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n\n            waveShaperNode.disconnect(orientationXGainNode);\n            orientationXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationYGainNode);\n            orientationYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationZGainNode);\n            orientationZGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionXGainNode);\n            positionXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionYGainNode);\n            positionYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionZGainNode);\n            positionZGainNode.disconnect(channelMergerNode);\n\n            channelMergerNode.disconnect(scriptProcessorNode);\n            scriptProcessorNode.disconnect(nativeContext.destination);\n        };\n\n        return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\n    };\n};\n", "import { TNativePeriodicWaveFactoryFactory } from '../types';\n\nexport const createNativePeriodicWaveFactory: TNativePeriodicWaveFactoryFactory = (createIndexSizeError) => {\n    return (nativeContext, { disableNormalization, imag, real }) => {\n        // Bug #180: Safari does not allow to use ordinary arrays.\n        const convertedImag = imag instanceof Float32Array ? imag : new Float32Array(imag);\n        const convertedReal = real instanceof Float32Array ? real : new Float32Array(real);\n\n        const nativePeriodicWave = nativeContext.createPeriodicWave(convertedReal, convertedImag, { disableNormalization });\n\n        // Bug #181: Safari does not throw an IndexSizeError so far if the given arrays have less than two values.\n        if (Array.from(imag).length < 2) {\n            throw createIndexSizeError();\n        }\n\n        return nativePeriodicWave;\n    };\n};\n", "import { TNativeScriptProcessorNodeFactory } from '../types';\n\nexport const createNativeScriptProcessorNode: TNativeScriptProcessorNodeFactory = (\n    nativeContext,\n    bufferSize,\n    numberOfInputChannels,\n    numberOfOutputChannels\n) => {\n    return nativeContext.createScriptProcessor(bufferSize, numberOfInputChannels, numberOfOutputChannels); // tslint:disable-line deprecation\n};\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeStereoPannerNodeFactoryFactory } from '../types';\n\nexport const createNativeStereoPannerNodeFactory: TNativeStereoPannerNodeFactoryFactory = (\n    createNativeStereoPannerNodeFaker,\n    createNotSupportedError\n) => {\n    return (nativeContext, options) => {\n        const channelCountMode = options.channelCountMode;\n\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        if (channelCountMode === 'clamped-max') {\n            throw createNotSupportedError();\n        }\n\n        // Bug #105: Safari does not support the StereoPannerNode.\n        if (nativeContext.createStereoPanner === undefined) {\n            return createNativeStereoPannerNodeFaker(nativeContext, options);\n        }\n\n        const nativeStereoPannerNode = nativeContext.createStereoPanner();\n\n        assignNativeAudioNodeOptions(nativeStereoPannerNode, options);\n\n        assignNativeAudioNodeAudioParamValue(nativeStereoPannerNode, options, 'pan');\n\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        Object.defineProperty(nativeStereoPannerNode, 'channelCountMode', {\n            get: () => channelCountMode,\n            set: (value) => {\n                if (value !== channelCountMode) {\n                    throw createNotSupportedError();\n                }\n            }\n        });\n\n        return nativeStereoPannerNode;\n    };\n};\n", "import { interceptConnections } from '../helpers/intercept-connections';\nimport { INativeWaveShaperNodeFaker } from '../interfaces';\nimport {\n    TNativeAudioNode,\n    TNativeChannelMergerNode,\n    TNativeContext,\n    TNativeGainNode,\n    TNativeStereoPannerNode,\n    TNativeStereoPannerNodeFakerFactoryFactory\n} from '../types';\n\nexport const createNativeStereoPannerNodeFakerFactory: TNativeStereoPannerNodeFakerFactoryFactory = (\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeGainNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    monitorConnections\n) => {\n    // The curve has a size of 14bit plus 1 value to have an exact representation for zero. This value has been determined experimentally.\n    const CURVE_SIZE = 16385;\n    const DC_CURVE = new Float32Array([1, 1]);\n    const HALF_PI = Math.PI / 2;\n    const SINGLE_CHANNEL_OPTIONS = { channelCount: 1, channelCountMode: 'explicit', channelInterpretation: 'discrete' } as const;\n    const SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS = { ...SINGLE_CHANNEL_OPTIONS, oversample: 'none' } as const;\n\n    const buildInternalGraphForMono = (\n        nativeContext: TNativeContext,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        const leftWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightWaveShaperCurve = new Float32Array(CURVE_SIZE);\n\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            const x = (i / (CURVE_SIZE - 1)) * HALF_PI;\n\n            leftWaveShaperCurve[i] = Math.cos(x);\n            rightWaveShaperCurve[i] = Math.sin(x);\n        }\n\n        const leftGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: leftWaveShaperCurve })\n        );\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\n        );\n        const rightGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: rightWaveShaperCurve })\n        );\n\n        return {\n            connectGraph(): void {\n                inputGainNode.connect(leftGainNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.connect(rightGainNode);\n\n                panWaveShaperNode.connect(panGainNode);\n\n                panGainNode.connect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.connect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n\n                leftWaveShaperNode.connect(leftGainNode.gain);\n                rightWaveShaperNode.connect(rightGainNode.gain);\n\n                leftGainNode.connect(channelMergerNode, 0, 0);\n                rightGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph(): void {\n                inputGainNode.disconnect(leftGainNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.disconnect(rightGainNode);\n\n                panWaveShaperNode.disconnect(panGainNode);\n\n                panGainNode.disconnect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n\n                leftWaveShaperNode.disconnect(leftGainNode.gain);\n                rightWaveShaperNode.disconnect(rightGainNode.gain);\n\n                leftGainNode.disconnect(channelMergerNode, 0, 0);\n                rightGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n\n    const buildInternalGraphForStereo = (\n        nativeContext: TNativeContext,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        const leftInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const leftInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n\n        const centerIndex = Math.floor(CURVE_SIZE / 2);\n\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            if (i > centerIndex) {\n                const x = ((i - centerIndex) / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n\n                leftInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                leftInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n                rightInputForLeftOutputWaveShaperCurve[i] = 0;\n                rightInputForRightOutputWaveShaperCurve[i] = 1;\n            } else {\n                const x = (i / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n\n                leftInputForLeftOutputWaveShaperCurve[i] = 1;\n                leftInputForRightOutputWaveShaperCurve[i] = 0;\n                rightInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                rightInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n            }\n        }\n\n        const channelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: 2,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: 2\n        });\n        const leftInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForLeftOutputWaveShaperCurve\n        });\n        const leftInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForRightOutputWaveShaperCurve\n        });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\n        );\n        const rightInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForLeftOutputWaveShaperCurve\n        });\n        const rightInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForRightOutputWaveShaperCurve\n        });\n\n        return {\n            connectGraph(): void {\n                inputGainNode.connect(channelSplitterNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n\n                channelSplitterNode.connect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.connect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.connect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.connect(rightInputForRightOutputGainNode, 1);\n\n                panWaveShaperNode.connect(panGainNode);\n\n                panGainNode.connect(\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForLeftOutputWaveShaperNode\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForRightOutputWaveShaperNode\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForLeftOutputWaveShaperNode\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.connect(\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForRightOutputWaveShaperNode\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\n                );\n\n                leftInputForLeftOutputWaveShaperNode.connect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.connect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.connect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.connect(rightInputForRightOutputGainNode.gain);\n\n                leftInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n\n                leftInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph(): void {\n                inputGainNode.disconnect(channelSplitterNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n\n                channelSplitterNode.disconnect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.disconnect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.disconnect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.disconnect(rightInputForRightOutputGainNode, 1);\n\n                panWaveShaperNode.disconnect(panGainNode);\n\n                panGainNode.disconnect(\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForLeftOutputWaveShaperNode\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? leftInputForRightOutputWaveShaperNode\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForLeftOutputWaveShaperNode\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\n                );\n                panGainNode.disconnect(\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\n                        ? rightInputForRightOutputWaveShaperNode\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\n                );\n\n                leftInputForLeftOutputWaveShaperNode.disconnect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.disconnect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.disconnect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.disconnect(rightInputForRightOutputGainNode.gain);\n\n                leftInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n\n                leftInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n\n    const buildInternalGraph = (\n        nativeContext: TNativeContext,\n        channelCount: number,\n        inputGainNode: TNativeGainNode,\n        panGainNode: TNativeGainNode,\n        channelMergerNode: TNativeChannelMergerNode\n    ) => {\n        if (channelCount === 1) {\n            return buildInternalGraphForMono(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n\n        if (channelCount === 2) {\n            return buildInternalGraphForStereo(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n\n        throw createNotSupportedError();\n    };\n\n    return (nativeContext, { channelCount, channelCountMode, pan, ...audioNodeOptions }) => {\n        if (channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...audioNodeOptions,\n            channelCount: 1,\n            channelCountMode,\n            numberOfInputs: 2\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, channelCount, channelCountMode, gain: 1 });\n        const panGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: pan\n        });\n\n        let { connectGraph, disconnectGraph } = buildInternalGraph(\n            nativeContext,\n            channelCount,\n            inputGainNode,\n            panGainNode,\n            channelMergerNode\n        );\n\n        Object.defineProperty(panGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(panGainNode.gain, 'maxValue', { get: () => 1 });\n        Object.defineProperty(panGainNode.gain, 'minValue', { get: () => -1 });\n\n        const nativeStereoPannerNodeFakerFactory = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return inputGainNode.channelCount;\n            },\n            set channelCount(value) {\n                if (inputGainNode.channelCount !== value) {\n                    if (isConnected) {\n                        disconnectGraph();\n                    }\n\n                    ({ connectGraph, disconnectGraph } = buildInternalGraph(\n                        nativeContext,\n                        value,\n                        inputGainNode,\n                        panGainNode,\n                        channelMergerNode\n                    ));\n\n                    if (isConnected) {\n                        connectGraph();\n                    }\n                }\n\n                inputGainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeStereoPannerNode['channelCountMode'] {\n                return inputGainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                if (value === 'clamped-max' || value === 'max') {\n                    throw createNotSupportedError();\n                }\n\n                inputGainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeStereoPannerNode['channelInterpretation'] {\n                return inputGainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n            },\n            get context(): TNativeStereoPannerNode['context'] {\n                return inputGainNode.context;\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get numberOfInputs(): number {\n                return inputGainNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return inputGainNode.numberOfOutputs;\n            },\n            get pan(): TNativeStereoPannerNode['pan'] {\n                return panGainNode.gain;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        let isConnected = false;\n\n        const whenConnected = () => {\n            connectGraph();\n\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            disconnectGraph();\n\n            isConnected = false;\n        };\n\n        return monitorConnections(\n            interceptConnections(nativeStereoPannerNodeFakerFactory, channelMergerNode),\n            whenConnected,\n            whenDisconnected\n        );\n    };\n};\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { TNativeWaveShaperNodeFactoryFactory } from '../types';\n\nexport const createNativeWaveShaperNodeFactory: TNativeWaveShaperNodeFactoryFactory = (\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeWaveShaperNodeFaker,\n    isDCCurve,\n    monitorConnections,\n    nativeAudioContextConstructor,\n    overwriteAccessors\n) => {\n    return (nativeContext, options) => {\n        const nativeWaveShaperNode = nativeContext.createWaveShaper();\n\n        /*\n         * Bug #119: Safari does not correctly map the values.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here. Testing for the automationRate property is necessary because this workaround\n         * isn't necessary anymore since v14.0.2 of Safari.\n         */\n        if (\n            nativeAudioContextConstructor !== null &&\n            nativeAudioContextConstructor.name === 'webkitAudioContext' &&\n            nativeContext.createGain().gain.automationRate === undefined\n        ) {\n            return createNativeWaveShaperNodeFaker(nativeContext, options);\n        }\n\n        assignNativeAudioNodeOptions(nativeWaveShaperNode, options);\n\n        const curve = options.curve === null || options.curve instanceof Float32Array ? options.curve : new Float32Array(options.curve);\n\n        // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n        if (curve !== null && curve.length < 2) {\n            throw createInvalidStateError();\n        }\n\n        // Only values of type Float32Array can be assigned to the curve property.\n        assignNativeAudioNodeOption(nativeWaveShaperNode, { curve }, 'curve');\n        assignNativeAudioNodeOption(nativeWaveShaperNode, options, 'oversample');\n\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\n        let isConnected = false;\n\n        overwriteAccessors(\n            nativeWaveShaperNode,\n            'curve',\n            (get) => () => get.call(nativeWaveShaperNode),\n            (set) => (value) => {\n                set.call(nativeWaveShaperNode, value);\n\n                if (isConnected) {\n                    if (isDCCurve(value) && disconnectNativeAudioBufferSourceNode === null) {\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(\n                            nativeContext,\n                            nativeWaveShaperNode\n                        );\n                    } else if (!isDCCurve(value) && disconnectNativeAudioBufferSourceNode !== null) {\n                        disconnectNativeAudioBufferSourceNode();\n                        disconnectNativeAudioBufferSourceNode = null;\n                    }\n                }\n\n                return value;\n            }\n        );\n\n        const whenConnected = () => {\n            isConnected = true;\n\n            if (isDCCurve(nativeWaveShaperNode.curve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, nativeWaveShaperNode);\n            }\n        };\n        const whenDisconnected = () => {\n            isConnected = false;\n\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n\n        return monitorConnections(nativeWaveShaperNode, whenConnected, whenDisconnected);\n    };\n};\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nimport { TNativeAudioNode, TNativeWaveShaperNode, TNativeWaveShaperNodeFakerFactoryFactory } from '../types';\n\nexport const createNativeWaveShaperNodeFakerFactory: TNativeWaveShaperNodeFakerFactoryFactory = (\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeGainNode,\n    isDCCurve,\n    monitorConnections\n) => {\n    return (nativeContext, { curve, oversample, ...audioNodeOptions }) => {\n        const negativeWaveShaperNode = nativeContext.createWaveShaper();\n        const positiveWaveShaperNode = nativeContext.createWaveShaper();\n\n        assignNativeAudioNodeOptions(negativeWaveShaperNode, audioNodeOptions);\n        assignNativeAudioNodeOptions(positiveWaveShaperNode, audioNodeOptions);\n\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const invertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n        const outputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const revertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\n        let isConnected = false;\n        let unmodifiedCurve: null | TNativeWaveShaperNode['curve'] = null;\n\n        const nativeWaveShaperNodeFaker = {\n            get bufferSize(): undefined {\n                return undefined;\n            },\n            get channelCount(): number {\n                return negativeWaveShaperNode.channelCount;\n            },\n            set channelCount(value) {\n                inputGainNode.channelCount = value;\n                invertGainNode.channelCount = value;\n                negativeWaveShaperNode.channelCount = value;\n                outputGainNode.channelCount = value;\n                positiveWaveShaperNode.channelCount = value;\n                revertGainNode.channelCount = value;\n            },\n            get channelCountMode(): TNativeWaveShaperNode['channelCountMode'] {\n                return negativeWaveShaperNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                inputGainNode.channelCountMode = value;\n                invertGainNode.channelCountMode = value;\n                negativeWaveShaperNode.channelCountMode = value;\n                outputGainNode.channelCountMode = value;\n                positiveWaveShaperNode.channelCountMode = value;\n                revertGainNode.channelCountMode = value;\n            },\n            get channelInterpretation(): TNativeWaveShaperNode['channelInterpretation'] {\n                return negativeWaveShaperNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                invertGainNode.channelInterpretation = value;\n                negativeWaveShaperNode.channelInterpretation = value;\n                outputGainNode.channelInterpretation = value;\n                positiveWaveShaperNode.channelInterpretation = value;\n                revertGainNode.channelInterpretation = value;\n            },\n            get context(): TNativeWaveShaperNode['context'] {\n                return negativeWaveShaperNode.context;\n            },\n            get curve(): TNativeWaveShaperNode['curve'] {\n                return unmodifiedCurve;\n            },\n            set curve(value) {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                if (value !== null && value.length < 2) {\n                    throw createInvalidStateError();\n                }\n\n                if (value === null) {\n                    negativeWaveShaperNode.curve = value;\n                    positiveWaveShaperNode.curve = value;\n                } else {\n                    const curveLength = value.length;\n\n                    const negativeCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n                    const positiveCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n\n                    negativeCurve[0] = value[0];\n                    positiveCurve[0] = -value[curveLength - 1];\n\n                    const length = Math.ceil((curveLength + 1) / 2);\n                    const centerIndex = (curveLength + 1) / 2 - 1;\n\n                    for (let i = 1; i < length; i += 1) {\n                        const theoreticIndex = (i / length) * centerIndex;\n\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n\n                        negativeCurve[i] =\n                            lowerIndex === upperIndex\n                                ? value[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * value[lowerIndex] +\n                                  (1 - (upperIndex - theoreticIndex)) * value[upperIndex];\n                        positiveCurve[i] =\n                            lowerIndex === upperIndex\n                                ? -value[curveLength - 1 - lowerIndex]\n                                : -((1 - (theoreticIndex - lowerIndex)) * value[curveLength - 1 - lowerIndex]) -\n                                  (1 - (upperIndex - theoreticIndex)) * value[curveLength - 1 - upperIndex];\n                    }\n\n                    negativeCurve[length] = curveLength % 2 === 1 ? value[length - 1] : (value[length - 2] + value[length - 1]) / 2;\n\n                    negativeWaveShaperNode.curve = negativeCurve;\n                    positiveWaveShaperNode.curve = positiveCurve;\n                }\n\n                unmodifiedCurve = value;\n\n                if (isConnected) {\n                    if (isDCCurve(unmodifiedCurve) && disconnectNativeAudioBufferSourceNode === null) {\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n                    } else if (disconnectNativeAudioBufferSourceNode !== null) {\n                        disconnectNativeAudioBufferSourceNode();\n                        disconnectNativeAudioBufferSourceNode = null;\n                    }\n                }\n            },\n            get inputs(): TNativeAudioNode[] {\n                return [inputGainNode];\n            },\n            get numberOfInputs(): number {\n                return negativeWaveShaperNode.numberOfInputs;\n            },\n            get numberOfOutputs(): number {\n                return negativeWaveShaperNode.numberOfOutputs;\n            },\n            get oversample(): TNativeWaveShaperNode['oversample'] {\n                return negativeWaveShaperNode.oversample;\n            },\n            set oversample(value) {\n                negativeWaveShaperNode.oversample = value;\n                positiveWaveShaperNode.oversample = value;\n            },\n            addEventListener(...args: any[]): void {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args: any[]): boolean {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args: any[]): void {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n\n        if (curve !== null) {\n            // Only values of type Float32Array can be assigned to the curve property.\n            nativeWaveShaperNodeFaker.curve = curve instanceof Float32Array ? curve : new Float32Array(curve);\n        }\n\n        if (oversample !== nativeWaveShaperNodeFaker.oversample) {\n            nativeWaveShaperNodeFaker.oversample = oversample;\n        }\n\n        const whenConnected = () => {\n            inputGainNode.connect(negativeWaveShaperNode).connect(outputGainNode);\n\n            inputGainNode.connect(invertGainNode).connect(positiveWaveShaperNode).connect(revertGainNode).connect(outputGainNode);\n\n            isConnected = true;\n\n            if (isDCCurve(unmodifiedCurve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n            }\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(negativeWaveShaperNode);\n            negativeWaveShaperNode.disconnect(outputGainNode);\n\n            inputGainNode.disconnect(invertGainNode);\n            invertGainNode.disconnect(positiveWaveShaperNode);\n            positiveWaveShaperNode.disconnect(revertGainNode);\n            revertGainNode.disconnect(outputGainNode);\n\n            isConnected = false;\n\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n\n        return monitorConnections(interceptConnections(nativeWaveShaperNodeFaker, outputGainNode), whenConnected, whenDisconnected);\n    };\n};\n", "import { TNotSupportedErrorFactory } from '../types';\n\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => new DOMException('', 'NotSupportedError');\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IAudioBuffer, IOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\nimport { TAudioContextState, TNativeOfflineAudioContext, TOfflineAudioContextConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n} as const;\n\nexport const createOfflineAudioContextConstructor: TOfflineAudioContextConstructorFactory = (\n    baseAudioContextConstructor,\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    startRendering\n) => {\n    return class OfflineAudioContext extends baseAudioContextConstructor<IOfflineAudioContext> implements IOfflineAudioContext {\n        private _length: number;\n\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\n\n        private _state: null | TAudioContextState;\n\n        constructor(options: IOfflineAudioContextOptions);\n        constructor(numberOfChannels: number, length: number, sampleRate: number);\n        constructor(a: number | IOfflineAudioContextOptions, b?: number, c?: number) {\n            let options: IOfflineAudioContextOptions;\n\n            if (typeof a === 'number' && b !== undefined && c !== undefined) {\n                options = { length: b, numberOfChannels: a, sampleRate: c };\n            } else if (typeof a === 'object') {\n                options = a;\n            } else {\n                throw new Error('The given parameters are not valid.');\n            }\n\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener(\n                    'statechange',\n                    (() => {\n                        let i = 0;\n\n                        const delayStateChangeEvent = (event: Event) => {\n                            if (this._state === 'running') {\n                                if (i > 0) {\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                    event.stopImmediatePropagation();\n\n                                    this._waitForThePromiseToSettle(event);\n                                } else {\n                                    i += 1;\n                                }\n                            }\n                        };\n\n                        return delayStateChangeEvent;\n                    })()\n                );\n            }\n\n            super(nativeOfflineAudioContext, numberOfChannels);\n\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n\n        get length(): number {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n\n            return this._nativeOfflineAudioContext.length;\n        }\n\n        get state(): TAudioContextState {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n\n        public startRendering(): Promise<IAudioBuffer> {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n\n            this._state = 'running';\n\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n\n                deactivateAudioGraph(this);\n            });\n        }\n\n        private _waitForThePromiseToSettle(event: Event): void {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            } else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n", "import { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nimport {\n    IAudioParam,\n    IAudioScheduledSourceNodeEventMap,\n    IMinimalOfflineAudioContext,\n    IOscillatorNode,\n    IOscillatorNodeRenderer,\n    IOscillatorOptions\n} from '../interfaces';\nimport {\n    TContext,\n    TEventHandler,\n    TNativeOscillatorNode,\n    TOscillatorNodeConstructorFactory,\n    TOscillatorNodeRenderer,\n    TOscillatorType\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max', // This attribute has no effect for nodes with no inputs.\n    channelInterpretation: 'speakers', // This attribute has no effect for nodes with no inputs.\n    detune: 0,\n    frequency: 440,\n    periodicWave: undefined,\n    type: 'sine'\n} as const;\n\nexport const createOscillatorNodeConstructor: TOscillatorNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeOscillatorNode,\n    createOscillatorNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n) => {\n    return class OscillatorNode<T extends TContext>\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\n        implements IOscillatorNode<T>\n    {\n        private _detune: IAudioParam;\n\n        private _frequency: IAudioParam;\n\n        private _nativeOscillatorNode: TNativeOscillatorNode;\n\n        private _onended: null | TEventHandler<this>;\n\n        private _oscillatorNodeRenderer: TOscillatorNodeRenderer<T>;\n\n        constructor(context: T, options?: Partial<IOscillatorOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeOscillatorNode = createNativeOscillatorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const oscillatorNodeRenderer = <TOscillatorNodeRenderer<T>>(isOffline ? createOscillatorNodeRenderer() : null);\n            const nyquist = context.sampleRate / 2;\n\n            super(context, false, nativeOscillatorNode, oscillatorNodeRenderer);\n\n            // Bug #81: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(this, isOffline, nativeOscillatorNode.detune, 153600, -153600);\n            // Bug #76: Safari does not export the correct values for maxValue and minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeOscillatorNode.frequency, nyquist, -nyquist);\n            this._nativeOscillatorNode = nativeOscillatorNode;\n            this._onended = null;\n            this._oscillatorNodeRenderer = oscillatorNodeRenderer;\n\n            if (this._oscillatorNodeRenderer !== null && mergedOptions.periodicWave !== undefined) {\n                (<IOscillatorNodeRenderer<IMinimalOfflineAudioContext>>this._oscillatorNodeRenderer).periodicWave =\n                    mergedOptions.periodicWave;\n            }\n        }\n\n        get detune(): IAudioParam {\n            return this._detune;\n        }\n\n        get frequency(): IAudioParam {\n            return this._frequency;\n        }\n\n        get onended(): null | TEventHandler<this> {\n            return this._onended;\n        }\n\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n\n            this._nativeOscillatorNode.onended = wrappedListener;\n\n            const nativeOnEnded = this._nativeOscillatorNode.onended;\n\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n\n        get type(): TOscillatorType {\n            return this._nativeOscillatorNode.type;\n        }\n\n        set type(value) {\n            this._nativeOscillatorNode.type = value;\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = null;\n            }\n        }\n\n        public setPeriodicWave(periodicWave: PeriodicWave): void {\n            this._nativeOscillatorNode.setPeriodicWave(periodicWave);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = periodicWave;\n            }\n        }\n\n        public start(when = 0): void {\n            this._nativeOscillatorNode.start(when);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.start = when;\n            }\n\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n\n                const resetInternalStateToPassive = () => {\n                    this._nativeOscillatorNode.removeEventListener('ended', resetInternalStateToPassive);\n\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n\n                this._nativeOscillatorNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n\n        public stop(when = 0): void {\n            this._nativeOscillatorNode.stop(when);\n\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IOscillatorNode, IPeriodicWave } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeOscillatorNode, TOscillatorNodeRendererFactoryFactory } from '../types';\n\nexport const createOscillatorNodeRendererFactory: TOscillatorNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeOscillatorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeOscillatorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeOscillatorNode>();\n\n        let periodicWave: null | IPeriodicWave = null;\n        let start: null | number = null;\n        let stop: null | number = null;\n\n        const createOscillatorNode = async (proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeOscillatorNode = getNativeAudioNode<T, TNativeOscillatorNode>(proxy);\n\n            // If the initially used nativeOscillatorNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeOscillatorNodeIsOwnedByContext = isOwnedByContext(nativeOscillatorNode, nativeOfflineAudioContext);\n\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeOscillatorNode.channelCount,\n                    channelCountMode: nativeOscillatorNode.channelCountMode,\n                    channelInterpretation: nativeOscillatorNode.channelInterpretation,\n                    detune: nativeOscillatorNode.detune.value,\n                    frequency: nativeOscillatorNode.frequency.value,\n                    periodicWave: periodicWave === null ? undefined : periodicWave,\n                    type: nativeOscillatorNode.type\n                };\n\n                nativeOscillatorNode = createNativeOscillatorNode(nativeOfflineAudioContext, options);\n\n                if (start !== null) {\n                    nativeOscillatorNode.start(start);\n                }\n\n                if (stop !== null) {\n                    nativeOscillatorNode.stop(stop);\n                }\n            }\n\n            renderedNativeOscillatorNodes.set(nativeOfflineAudioContext, nativeOscillatorNode);\n\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            }\n\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeOscillatorNode);\n\n            return nativeOscillatorNode;\n        };\n\n        return {\n            set periodicWave(value: null | IPeriodicWave) {\n                periodicWave = value;\n            },\n            set start(value: number) {\n                start = value;\n            },\n            set stop(value: number) {\n                stop = value;\n            },\n            render(proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeOscillatorNode> {\n                const renderedNativeOscillatorNode = renderedNativeOscillatorNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeOscillatorNode !== undefined) {\n                    return Promise.resolve(renderedNativeOscillatorNode);\n                }\n\n                return createOscillatorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam, IPannerNode, IPannerOptions } from '../interfaces';\nimport {\n    TAudioNodeRenderer,\n    TContext,\n    TDistanceModelType,\n    TNativePannerNode,\n    TPannerNodeConstructorFactory,\n    TPanningModelType\n} from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    coneInnerAngle: 360,\n    coneOuterAngle: 360,\n    coneOuterGain: 0,\n    distanceModel: 'inverse',\n    maxDistance: 10000,\n    orientationX: 1,\n    orientationY: 0,\n    orientationZ: 0,\n    panningModel: 'equalpower',\n    positionX: 0,\n    positionY: 0,\n    positionZ: 0,\n    refDistance: 1,\n    rolloffFactor: 1\n} as const;\n\nexport const createPannerNodeConstructor: TPannerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativePannerNode,\n    createPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class PannerNode<T extends TContext> extends audioNodeConstructor<T> implements IPannerNode<T> {\n        private _nativePannerNode: TNativePannerNode;\n\n        private _orientationX: IAudioParam;\n\n        private _orientationY: IAudioParam;\n\n        private _orientationZ: IAudioParam;\n\n        private _positionX: IAudioParam;\n\n        private _positionY: IAudioParam;\n\n        private _positionZ: IAudioParam;\n\n        constructor(context: T, options?: Partial<IPannerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativePannerNode = createNativePannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const pannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createPannerNodeRenderer() : null);\n\n            super(context, false, nativePannerNode, pannerNodeRenderer);\n\n            this._nativePannerNode = nativePannerNode;\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._orientationX = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationX,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._orientationY = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationY,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._orientationZ = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.orientationZ,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionX = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionX,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionY = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionY,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n            this._positionZ = createAudioParam(\n                this,\n                isOffline,\n                nativePannerNode.positionZ,\n                MOST_POSITIVE_SINGLE_FLOAT,\n                MOST_NEGATIVE_SINGLE_FLOAT\n            );\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get coneInnerAngle(): number {\n            return this._nativePannerNode.coneInnerAngle;\n        }\n\n        set coneInnerAngle(value) {\n            this._nativePannerNode.coneInnerAngle = value;\n        }\n\n        get coneOuterAngle(): number {\n            return this._nativePannerNode.coneOuterAngle;\n        }\n\n        set coneOuterAngle(value) {\n            this._nativePannerNode.coneOuterAngle = value;\n        }\n\n        get coneOuterGain(): number {\n            return this._nativePannerNode.coneOuterGain;\n        }\n\n        set coneOuterGain(value) {\n            this._nativePannerNode.coneOuterGain = value;\n        }\n\n        get distanceModel(): TDistanceModelType {\n            return this._nativePannerNode.distanceModel;\n        }\n\n        set distanceModel(value) {\n            this._nativePannerNode.distanceModel = value;\n        }\n\n        get maxDistance(): number {\n            return this._nativePannerNode.maxDistance;\n        }\n\n        set maxDistance(value) {\n            this._nativePannerNode.maxDistance = value;\n        }\n\n        get orientationX(): IAudioParam {\n            return this._orientationX;\n        }\n\n        get orientationY(): IAudioParam {\n            return this._orientationY;\n        }\n\n        get orientationZ(): IAudioParam {\n            return this._orientationZ;\n        }\n\n        get panningModel(): TPanningModelType {\n            return this._nativePannerNode.panningModel;\n        }\n\n        set panningModel(value) {\n            this._nativePannerNode.panningModel = value;\n        }\n\n        get positionX(): IAudioParam {\n            return this._positionX;\n        }\n\n        get positionY(): IAudioParam {\n            return this._positionY;\n        }\n\n        get positionZ(): IAudioParam {\n            return this._positionZ;\n        }\n\n        get refDistance(): number {\n            return this._nativePannerNode.refDistance;\n        }\n\n        set refDistance(value) {\n            this._nativePannerNode.refDistance = value;\n        }\n\n        get rolloffFactor(): number {\n            return this._nativePannerNode.rolloffFactor;\n        }\n\n        set rolloffFactor(value) {\n            this._nativePannerNode.rolloffFactor = value;\n        }\n    };\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, INativePannerNodeFaker, IOfflineAudioContext, IPannerNode } from '../interfaces';\nimport {\n    TNativeAudioBuffer,\n    TNativeGainNode,\n    TNativeOfflineAudioContext,\n    TNativePannerNode,\n    TPannerNodeRendererFactoryFactory\n} from '../types';\n\nexport const createPannerNodeRendererFactory: TPannerNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativePannerNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode | TNativePannerNode>();\n\n        let renderedBufferPromise: null | Promise<TNativeAudioBuffer> = null;\n\n        const createAudioNode = async (proxy: IPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeGainNode: null | TNativeGainNode = null;\n            let nativePannerNode = getNativeAudioNode<T, TNativePannerNode>(proxy);\n\n            const commonAudioNodeOptions = {\n                channelCount: nativePannerNode.channelCount,\n                channelCountMode: nativePannerNode.channelCountMode,\n                channelInterpretation: nativePannerNode.channelInterpretation\n            };\n            const commonNativePannerNodeOptions = {\n                ...commonAudioNodeOptions,\n                coneInnerAngle: nativePannerNode.coneInnerAngle,\n                coneOuterAngle: nativePannerNode.coneOuterAngle,\n                coneOuterGain: nativePannerNode.coneOuterGain,\n                distanceModel: nativePannerNode.distanceModel,\n                maxDistance: nativePannerNode.maxDistance,\n                panningModel: nativePannerNode.panningModel,\n                refDistance: nativePannerNode.refDistance,\n                rolloffFactor: nativePannerNode.rolloffFactor\n            };\n\n            // If the initially used nativePannerNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativePannerNodeIsOwnedByContext = isOwnedByContext(nativePannerNode, nativeOfflineAudioContext);\n\n            // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n            if ('bufferSize' in nativePannerNode) {\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n            } else if (!nativePannerNodeIsOwnedByContext) {\n                const options = {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: nativePannerNode.orientationX.value,\n                    orientationY: nativePannerNode.orientationY.value,\n                    orientationZ: nativePannerNode.orientationZ.value,\n                    positionX: nativePannerNode.positionX.value,\n                    positionY: nativePannerNode.positionY.value,\n                    positionZ: nativePannerNode.positionZ.value\n                };\n\n                nativePannerNode = createNativePannerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeGainNode === null ? nativePannerNode : nativeGainNode);\n\n            if (nativeGainNode !== null) {\n                if (renderedBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                        6,\n                        // Bug #17: Safari does not yet expose the length.\n                        proxy.context.length,\n                        nativeOfflineAudioContext.sampleRate\n                    );\n                    const nativeChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'speakers',\n                        numberOfInputs: 6\n                    });\n                    nativeChannelMergerNode.connect(partialOfflineAudioContext.destination);\n\n                    renderedBufferPromise = (async () => {\n                        const nativeConstantSourceNodes = await Promise.all(\n                            [\n                                proxy.orientationX,\n                                proxy.orientationY,\n                                proxy.orientationZ,\n                                proxy.positionX,\n                                proxy.positionY,\n                                proxy.positionZ\n                            ].map(async (audioParam, index) => {\n                                const nativeConstantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                    channelCount: 1,\n                                    channelCountMode: 'explicit',\n                                    channelInterpretation: 'discrete',\n                                    offset: index === 0 ? 1 : 0\n                                });\n\n                                await renderAutomation(partialOfflineAudioContext, audioParam, nativeConstantSourceNode.offset);\n\n                                return nativeConstantSourceNode;\n                            })\n                        );\n\n                        for (let i = 0; i < 6; i += 1) {\n                            nativeConstantSourceNodes[i].connect(nativeChannelMergerNode, 0, i);\n                            nativeConstantSourceNodes[i].start(0);\n                        }\n\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    })();\n                }\n\n                const renderedBuffer = await renderedBufferPromise;\n                const inputGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, inputGainNode);\n\n                const channelDatas: Float32Array[] = [];\n\n                for (let i = 0; i < renderedBuffer.numberOfChannels; i += 1) {\n                    channelDatas.push(renderedBuffer.getChannelData(i));\n                }\n\n                let lastOrientation = [channelDatas[0][0], channelDatas[1][0], channelDatas[2][0]];\n                let lastPosition = [channelDatas[3][0], channelDatas[4][0], channelDatas[5][0]];\n                let gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n                let partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: lastOrientation[0],\n                    orientationY: lastOrientation[1],\n                    orientationZ: lastOrientation[2],\n                    positionX: lastPosition[0],\n                    positionY: lastPosition[1],\n                    positionZ: lastPosition[2]\n                });\n\n                inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\n                partialPannerNode.connect(nativeGainNode);\n\n                for (let i = 128; i < renderedBuffer.length; i += 128) {\n                    const orientation: [number, number, number] = [channelDatas[0][i], channelDatas[1][i], channelDatas[2][i]];\n                    const positon: [number, number, number] = [channelDatas[3][i], channelDatas[4][i], channelDatas[5][i]];\n\n                    if (\n                        orientation.some((value, index) => value !== lastOrientation[index]) ||\n                        positon.some((value, index) => value !== lastPosition[index])\n                    ) {\n                        lastOrientation = orientation;\n                        lastPosition = positon;\n\n                        const currentTime = i / nativeOfflineAudioContext.sampleRate;\n\n                        gateGainNode.gain.setValueAtTime(0, currentTime);\n\n                        gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 0 });\n                        partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                            ...commonNativePannerNodeOptions,\n                            orientationX: lastOrientation[0],\n                            orientationY: lastOrientation[1],\n                            orientationZ: lastOrientation[2],\n                            positionX: lastPosition[0],\n                            positionY: lastPosition[1],\n                            positionZ: lastPosition[2]\n                        });\n\n                        gateGainNode.gain.setValueAtTime(1, currentTime);\n\n                        inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\n                        partialPannerNode.connect(nativeGainNode);\n                    }\n                }\n\n                return nativeGainNode;\n            }\n\n            if (!nativePannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            }\n\n            if (isNativeAudioNodeFaker(nativePannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode);\n            }\n\n            return nativePannerNode;\n        };\n\n        return {\n            render(\n                proxy: IPannerNode<T>,\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\n            ): Promise<TNativeGainNode | TNativePannerNode> {\n                const renderedNativeGainNodeOrNativePannerNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeGainNodeOrNativePannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNodeOrNativePannerNode);\n                }\n\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { IPeriodicWave, IPeriodicWaveOptions } from '../interfaces';\nimport { TContext, TPeriodicWaveConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    disableNormalization: false\n} as const;\n\nexport const createPeriodicWaveConstructor: TPeriodicWaveConstructorFactory = (\n    createNativePeriodicWave,\n    getNativeContext,\n    periodicWaveStore,\n    sanitizePeriodicWaveOptions\n) => {\n    return class PeriodicWave<T extends TContext> implements IPeriodicWave {\n        constructor(context: T, options?: Partial<IPeriodicWaveOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizePeriodicWaveOptions({ ...DEFAULT_OPTIONS, ...options });\n            const periodicWave = createNativePeriodicWave(nativeContext, mergedOptions);\n\n            periodicWaveStore.add(periodicWave);\n\n            // This does violate all good pratices but it is used here to simplify the handling of periodic waves.\n            return periodicWave;\n        }\n\n        public static [Symbol.hasInstance](instance: unknown): boolean {\n            return (\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === PeriodicWave.prototype) ||\n                periodicWaveStore.has(<any>instance)\n            );\n        }\n    };\n};\n", "import { TRenderAutomationFactory } from '../types';\n\nexport const createRenderAutomation: TRenderAutomationFactory = (getAudioParamRenderer, renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        const audioParamRenderer = getAudioParamRenderer(audioParam);\n\n        audioParamRenderer.replay(nativeAudioParam);\n\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n", "import { IAudioDestinationNode } from '../interfaces';\nimport { TRenderInputsOfAudioNodeFactory } from '../types';\n\nexport const createRenderInputsOfAudioNode: TRenderInputsOfAudioNodeFactory = (\n    getAudioNodeConnections,\n    getAudioNodeRenderer,\n    isPartOfACycle\n) => {\n    return async (audioNode, nativeOfflineAudioContext, nativeAudioNode) => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n\n        await Promise.all(\n            audioNodeConnections.activeInputs\n                .map((connections, input) =>\n                    Array.from(connections).map(async ([source, output]) => {\n                        const audioNodeRenderer = getAudioNodeRenderer(source);\n                        const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n                        const destination = <IAudioDestinationNode<typeof audioNode.context>>audioNode.context.destination;\n\n                        if (!isPartOfACycle(source) && (audioNode !== destination || !isPartOfACycle(audioNode))) {\n                            renderedNativeAudioNode.connect(nativeAudioNode, output, input);\n                        }\n                    })\n                )\n                .reduce((allRenderingPromises, renderingPromises) => [...allRenderingPromises, ...renderingPromises], [])\n        );\n    };\n};\n", "import { IAudioParam, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\nimport { TNativeAudioParam, TNativeOfflineAudioContext, TRenderInputsOfAudioParamFactory } from '../types';\n\nexport const createRenderInputsOfAudioParam: TRenderInputsOfAudioParamFactory = (\n    getAudioNodeRenderer,\n    getAudioParamConnections,\n    isPartOfACycle\n) => {\n    return async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\n        audioParam: IAudioParam,\n        nativeOfflineAudioContext: TNativeOfflineAudioContext,\n        nativeAudioParam: TNativeAudioParam\n    ): Promise<void> => {\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\n\n        await Promise.all(\n            Array.from(audioParamConnections.activeInputs).map(async ([source, output]) => {\n                const audioNodeRenderer = getAudioNodeRenderer(source);\n                const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n\n                if (!isPartOfACycle(source)) {\n                    renderedNativeAudioNode.connect(nativeAudioParam, output);\n                }\n            })\n        );\n    };\n};\n", "import { testPromiseSupport } from '../helpers/test-promise-support';\nimport { IOfflineAudioCompletionEvent } from '../interfaces';\nimport { TNativeAudioBuffer, TRenderNativeOfflineAudioContextFactory } from '../types';\n\nexport const createRenderNativeOfflineAudioContext: TRenderNativeOfflineAudioContextFactory = (\n    cacheTestResult,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    testOfflineAudioContextCurrentTimeSupport\n) => {\n    return (nativeOfflineAudioContext) => {\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n            // Bug #158: Chrome and Edge do not advance currentTime if it is not accessed while rendering the audio.\n            return Promise.resolve(\n                cacheTestResult(testOfflineAudioContextCurrentTimeSupport, testOfflineAudioContextCurrentTimeSupport)\n            ).then((isOfflineAudioContextCurrentTimeSupported) => {\n                if (!isOfflineAudioContextCurrentTimeSupported) {\n                    const scriptProcessorNode = createNativeScriptProcessorNode(nativeOfflineAudioContext, 512, 0, 1);\n\n                    nativeOfflineAudioContext.oncomplete = () => {\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n                        scriptProcessorNode.disconnect();\n                    };\n                    scriptProcessorNode.onaudioprocess = () => nativeOfflineAudioContext.currentTime; // tslint:disable-line:deprecation\n\n                    scriptProcessorNode.connect(nativeOfflineAudioContext.destination);\n                }\n\n                return nativeOfflineAudioContext.startRendering();\n            });\n        }\n\n        return new Promise<TNativeAudioBuffer>((resolve) => {\n            // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n            const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'discrete',\n                gain: 0\n            });\n\n            nativeOfflineAudioContext.oncomplete = (event: IOfflineAudioCompletionEvent) => {\n                gainNode.disconnect();\n\n                resolve(event.renderedBuffer);\n            };\n\n            gainNode.connect(nativeOfflineAudioContext.destination);\n\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n", "import { TSetActiveAudioWorkletNodeInputsFactory } from '../types';\n\nexport const createSetActiveAudioWorkletNodeInputs: TSetActiveAudioWorkletNodeInputsFactory = (activeAudioWorkletNodeInputsStore) => {\n    return (nativeAudioWorkletNode, activeInputs) => {\n        activeAudioWorkletNodeInputsStore.set(nativeAudioWorkletNode, activeInputs);\n    };\n};\n", "import { TSetAudioNodeTailTimeFactory } from '../types';\n\nexport const createSetAudioNodeTailTime: TSetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\n    return (audioNode, tailTime) => audioNodeTailTimeStore.set(audioNode, tailTime);\n};\n", "import { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nimport { TStartRenderingFactory } from '../types';\n\nexport const createStartRendering: TStartRenderingFactory = (\n    audioBufferStore,\n    cacheTestResult,\n    getAudioNodeRenderer,\n    getUnrenderedAudioWorkletNodes,\n    renderNativeOfflineAudioContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n) => {\n    return (destination, nativeOfflineAudioContext) =>\n        getAudioNodeRenderer(destination)\n            .render(destination, nativeOfflineAudioContext)\n            /*\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to the\n             * destination.\n             */\n            .then(() =>\n                Promise.all(\n                    Array.from(getUnrenderedAudioWorkletNodes(nativeOfflineAudioContext)).map((audioWorkletNode) =>\n                        getAudioNodeRenderer(audioWorkletNode).render(audioWorkletNode, nativeOfflineAudioContext)\n                    )\n                )\n            )\n            .then(() => renderNativeOfflineAudioContext(nativeOfflineAudioContext))\n            .then((audioBuffer) => {\n                // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n                // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n                if (typeof audioBuffer.copyFromChannel !== 'function') {\n                    wrapAudioBufferCopyChannelMethods(audioBuffer);\n                    wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                    // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n                } else if (\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\n                    )\n                ) {\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n                }\n\n                audioBufferStore.add(audioBuffer);\n\n                return audioBuffer;\n            });\n};\n", "import { IAudioParam, IStereoPannerNode, IStereoPannerOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TStereoPannerNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    /*\n     * Bug #105: The channelCountMode should be 'clamped-max' according to the spec but is set to 'explicit' to achieve consistent\n     * behavior.\n     */\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    pan: 0\n} as const;\n\nexport const createStereoPannerNodeConstructor: TStereoPannerNodeConstructorFactory = (\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeStereoPannerNode,\n    createStereoPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext\n) => {\n    return class StereoPannerNode<T extends TContext> extends audioNodeConstructor<T> implements IStereoPannerNode<T> {\n        private _pan: IAudioParam;\n\n        constructor(context: T, options?: Partial<IStereoPannerOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeStereoPannerNode = createNativeStereoPannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const stereoPannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createStereoPannerNodeRenderer() : null);\n\n            super(context, false, nativeStereoPannerNode, stereoPannerNodeRenderer);\n\n            this._pan = createAudioParam(this, isOffline, nativeStereoPannerNode.pan);\n        }\n\n        get pan(): IAudioParam {\n            return this._pan;\n        }\n    };\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IStereoPannerNode } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeStereoPannerNode, TStereoPannerNodeRendererFactoryFactory } from '../types';\n\nexport const createStereoPannerNodeRendererFactory: TStereoPannerNodeRendererFactoryFactory = (\n    connectAudioParam,\n    createNativeStereoPannerNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeStereoPannerNodes = new WeakMap<TNativeOfflineAudioContext, TNativeStereoPannerNode>();\n\n        const createStereoPannerNode = async (proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeStereoPannerNode = getNativeAudioNode<T, TNativeStereoPannerNode>(proxy);\n\n            /*\n             * If the initially used nativeStereoPannerNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeStereoPannerNodeIsOwnedByContext = isOwnedByContext(nativeStereoPannerNode, nativeOfflineAudioContext);\n\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeStereoPannerNode.channelCount,\n                    channelCountMode: nativeStereoPannerNode.channelCountMode,\n                    channelInterpretation: nativeStereoPannerNode.channelInterpretation,\n                    pan: nativeStereoPannerNode.pan.value\n                };\n\n                nativeStereoPannerNode = createNativeStereoPannerNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeStereoPannerNodes.set(nativeOfflineAudioContext, nativeStereoPannerNode);\n\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            } else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            }\n\n            if (isNativeAudioNodeFaker(nativeStereoPannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode);\n            }\n\n            return nativeStereoPannerNode;\n        };\n\n        return {\n            render(proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeStereoPannerNode> {\n                const renderedNativeStereoPannerNode = renderedNativeStereoPannerNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeStereoPannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeStereoPannerNode);\n                }\n\n                return createStereoPannerNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TTestAudioBufferConstructorSupportFactory } from '../types';\n\n// Bug #33: Safari exposes an AudioBuffer but it can't be used as a constructor.\nexport const createTestAudioBufferConstructorSupport: TTestAudioBufferConstructorSupportFactory = (nativeAudioBufferConstructor) => {\n    return () => {\n        if (nativeAudioBufferConstructor === null) {\n            return false;\n        }\n\n        try {\n            new nativeAudioBufferConstructor({ length: 1, sampleRate: 44100 }); // tslint:disable-line:no-unused-expression\n        } catch {\n            return false;\n        }\n\n        return true;\n    };\n};\n", "import { TTestAudioBufferCopyChannelMethodsSubarraySupportFactory } from '../types';\n\n/*\n * Firefox up to version 67 didn't fully support the copyFromChannel() and copyToChannel() methods. Therefore testing one of those methods\n * is enough to know if the other one is supported as well.\n */\nexport const createTestAudioBufferCopyChannelMethodsSubarraySupport: TTestAudioBufferCopyChannelMethodsSubarraySupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const nativeAudioBuffer = nativeOfflineAudioContext.createBuffer(1, 1, 44100);\n\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n        if (nativeAudioBuffer.copyToChannel === undefined) {\n            return true;\n        }\n\n        const source = new Float32Array(2);\n\n        try {\n            nativeAudioBuffer.copyFromChannel(source, 0, 0);\n        } catch {\n            return false;\n        }\n\n        return true;\n    };\n};\n", "import { TTestAudioContextCloseMethodSupportFactory } from '../types';\n\nexport const createTestAudioContextCloseMethodSupport: TTestAudioContextCloseMethodSupportFactory = (nativeAudioContextConstructor) => {\n    return () => {\n        if (nativeAudioContextConstructor === null) {\n            return false;\n        }\n\n        // Try to check the prototype before constructing the AudioContext.\n        if (nativeAudioContextConstructor.prototype !== undefined && nativeAudioContextConstructor.prototype.close !== undefined) {\n            return true;\n        }\n\n        const audioContext = new nativeAudioContextConstructor();\n\n        const isAudioContextClosable = audioContext.close !== undefined;\n\n        try {\n            audioContext.close();\n        } catch {\n            // Ignore errors.\n        }\n\n        return isAudioContextClosable;\n    };\n};\n", "import { TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory } from '../types';\n\n/**\n * Edge up to version 14, Firefox up to version 52, Safari up to version 9 and maybe other browsers\n * did not refuse to decode invalid parameters with a TypeError.\n */\nexport const createTestAudioContextDecodeAudioDataMethodTypeErrorSupport: TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            let isPending = true;\n\n            const resolvePromise = (err: Error) => {\n                if (isPending) {\n                    isPending = false;\n\n                    offlineAudioContext.startRendering();\n\n                    resolve(err instanceof TypeError);\n                }\n            };\n\n            let promise;\n\n            // Bug #26: Safari throws a synchronous error.\n            try {\n                promise = offlineAudioContext\n                    // Bug #1: Safari requires a successCallback.\n                    .decodeAudioData(\n                        <any>null,\n                        () => {\n                            // Ignore the success callback.\n                        },\n                        resolvePromise\n                    );\n            } catch (err) {\n                resolvePromise(err);\n            }\n\n            // Bug #21: Safari does not support promises yet.\n            if (promise !== undefined) {\n                // Bug #6: Chrome, Edge and Firefox do not call the errorCallback.\n                promise.catch(resolvePromise);\n            }\n        });\n    };\n};\n", "import { TTestAudioContextOptionsSupportFactory } from '../types';\n\nexport const createTestAudioContextOptionsSupport: TTestAudioContextOptionsSupportFactory = (nativeAudioContextConstructor) => {\n    return () => {\n        if (nativeAudioContextConstructor === null) {\n            return false;\n        }\n\n        let audioContext;\n\n        try {\n            audioContext = new nativeAudioContextConstructor({ latencyHint: 'balanced' });\n        } catch {\n            return false;\n        }\n\n        audioContext.close();\n\n        return true;\n    };\n};\n", "import { TTestAudioNodeConnectMethodSupportFactory } from '../types';\n\n// Safari up to version 12.0 (but not v12.1) didn't return the destination in case it was an AudioNode.\nexport const createTestAudioNodeConnectMethodSupport: TTestAudioNodeConnectMethodSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const nativeGainNode = nativeOfflineAudioContext.createGain();\n        const isSupported = nativeGainNode.connect(nativeGainNode) === nativeGainNode;\n\n        nativeGainNode.disconnect(nativeGainNode);\n\n        return isSupported;\n    };\n};\n", "import { TTestAudioWorkletProcessorNoOutputsSupportFactory } from '../types';\n\n/**\n * Chrome version 66 and 67 did not call the process() function of an AudioWorkletProcessor if it had no outputs. AudioWorklet support was\n * enabled by default in version 66.\n */\nexport const createTestAudioWorkletProcessorNoOutputsSupport: TTestAudioWorkletProcessorNoOutputsSupportFactory = (\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor\n) => {\n    return async () => {\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\n        if (nativeAudioWorkletNodeConstructor === null) {\n            return true;\n        }\n\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const blob = new Blob(\n            [\n                'let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor(\"a\",A)'\n            ],\n            {\n                type: 'application/javascript; charset=utf-8'\n            }\n        );\n        const messageChannel = new MessageChannel();\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\n        const url = URL.createObjectURL(blob);\n\n        let isCallingProcess = false;\n\n        try {\n            await offlineAudioContext.audioWorklet.addModule(url);\n\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\n            const oscillator = offlineAudioContext.createOscillator();\n\n            await new Promise<void>((resolve) => {\n                audioWorkletNode.port.onmessage = () => resolve();\n                audioWorkletNode.port.postMessage(messageChannel.port2, [messageChannel.port2]);\n            });\n\n            audioWorkletNode.port.onmessage = () => (isCallingProcess = true);\n\n            oscillator.connect(audioWorkletNode);\n            oscillator.start(0);\n\n            await offlineAudioContext.startRendering();\n\n            isCallingProcess = await new Promise((resolve) => {\n                messageChannel.port1.onmessage = ({ data }) => resolve(data === 1);\n                messageChannel.port1.postMessage(0);\n            });\n        } catch {\n            // Ignore errors.\n        } finally {\n            messageChannel.port1.close();\n            URL.revokeObjectURL(url);\n        }\n\n        return isCallingProcess;\n    };\n};\n", "import { TTestAudioWorkletProcessorPostMessageSupportFactory } from '../types';\n\n// Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\nexport const createTestAudioWorkletProcessorPostMessageSupport: TTestAudioWorkletProcessorPostMessageSupportFactory = (\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor\n) => {\n    return async () => {\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\n        if (nativeAudioWorkletNodeConstructor === null) {\n            return true;\n        }\n\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const blob = new Blob(\n            ['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor(\"a\",A)'],\n            {\n                type: 'application/javascript; charset=utf-8'\n            }\n        );\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\n        const url = URL.createObjectURL(blob);\n\n        let isEmittingMessageEvents = false;\n        let isEmittingProcessorErrorEvents = false;\n\n        try {\n            await offlineAudioContext.audioWorklet.addModule(url);\n\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\n            const oscillator = offlineAudioContext.createOscillator();\n\n            audioWorkletNode.port.onmessage = () => (isEmittingMessageEvents = true);\n            audioWorkletNode.onprocessorerror = () => (isEmittingProcessorErrorEvents = true);\n\n            oscillator.connect(audioWorkletNode);\n            oscillator.start(0);\n\n            await offlineAudioContext.startRendering();\n\n            // Bug #197: Safari does not deliver the messages before the promise returned by startRendering() resolves.\n            await new Promise((resolve) => setTimeout(resolve));\n        } catch {\n            // Ignore errors.\n        } finally {\n            URL.revokeObjectURL(url);\n        }\n\n        return isEmittingMessageEvents && !isEmittingProcessorErrorEvents;\n    };\n};\n", "import { TTestChannelMergerNodeChannelCountSupportFactory } from '../types';\n\n/**\n * Firefox up to version 69 did not throw an error when setting a different channelCount or channelCountMode.\n */\nexport const createTestChannelMergerNodeChannelCountSupport: TTestChannelMergerNodeChannelCountSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const nativeChannelMergerNode = offlineAudioContext.createChannelMerger();\n\n        /**\n         * Bug #15: Safari does not return the default properties. It still needs to be patched. This test is supposed to test the support\n         * in other browsers.\n         */\n        if (nativeChannelMergerNode.channelCountMode === 'max') {\n            return true;\n        }\n\n        try {\n            nativeChannelMergerNode.channelCount = 2;\n        } catch {\n            return true;\n        }\n\n        return false;\n    };\n};\n", "import { TTestConstantSourceNodeAccurateSchedulingSupportFactory } from '../types';\n\nexport const createTestConstantSourceNodeAccurateSchedulingSupport: TTestConstantSourceNodeAccurateSchedulingSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        // Bug #62: Safari does not support ConstantSourceNodes.\n        if (nativeOfflineAudioContext.createConstantSource === undefined) {\n            return true;\n        }\n\n        const nativeConstantSourceNode = nativeOfflineAudioContext.createConstantSource();\n\n        /*\n         * @todo This is using bug #75 to detect bug #70. That works because both bugs were unique to\n         * the implementation of Firefox right now, but it could probably be done in a better way.\n         */\n        return nativeConstantSourceNode.offset.maxValue !== Number.POSITIVE_INFINITY;\n    };\n};\n", "import { TTestConvolverNodeBufferReassignabilitySupportFactory } from '../types';\n\n// Opera up to version 57 did not allow to reassign the buffer of a ConvolverNode.\nexport const createTestConvolverNodeBufferReassignabilitySupport: TTestConvolverNodeBufferReassignabilitySupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const nativeConvolverNode = offlineAudioContext.createConvolver();\n\n        nativeConvolverNode.buffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\n\n        try {\n            nativeConvolverNode.buffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\n        } catch {\n            return false;\n        }\n\n        return true;\n    };\n};\n", "import { TTestConvolverNodeChannelCountSupportFactory } from '../types';\n\n// Chrome up to version v80, Edge up to version v80 and Opera up to version v67 did not allow to set the channelCount property of a ConvolverNode to 1. They also did not allow to set the channelCountMode to 'explicit'.\nexport const createTestConvolverNodeChannelCountSupport: TTestConvolverNodeChannelCountSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        const nativeConvolverNode = offlineAudioContext.createConvolver();\n\n        try {\n            nativeConvolverNode.channelCount = 1;\n        } catch {\n            return false;\n        }\n\n        return true;\n    };\n};\n", "import { TTestIsSecureContextSupportFactory } from '../types';\n\nexport const createTestIsSecureContextSupport: TTestIsSecureContextSupportFactory = (window) => {\n    return () => window !== null && window.hasOwnProperty('isSecureContext');\n};\n", "import { TTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupportFactory } from '../types';\n\n// Firefox up to version 68 did not throw an error when creating a MediaStreamAudioSourceNode with a mediaStream that had no audio track.\nexport const createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport: TTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupportFactory =\n    (nativeAudioContextConstructor) => {\n        return () => {\n            if (nativeAudioContextConstructor === null) {\n                return false;\n            }\n\n            const audioContext = new nativeAudioContextConstructor();\n\n            try {\n                audioContext.createMediaStreamSource(new MediaStream());\n\n                return false;\n            } catch (err) {\n                return true;\n            } finally {\n                audioContext.close();\n            }\n        };\n    };\n", "import { TTestOfflineAudioContextCurrentTimeSupportFactory } from '../types';\n\nexport const createTestOfflineAudioContextCurrentTimeSupport: TTestOfflineAudioContextCurrentTimeSupportFactory = (\n    createNativeGainNode,\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n        const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            nativeOfflineAudioContext.oncomplete = () => {\n                gainNode.disconnect();\n\n                resolve(nativeOfflineAudioContext.currentTime !== 0);\n            };\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n", "import { TTestStereoPannerNodeDefaultValueSupportFactory } from '../types';\n\n/**\n * Firefox up to version 62 did not kick off the processing of the StereoPannerNode if the value of pan was zero.\n */\nexport const createTestStereoPannerNodeDefaultValueSupport: TTestStereoPannerNodeDefaultValueSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        /*\n         * Bug #105: Safari does not support the StereoPannerNode. Therefore the returned value should normally be false but the faker does\n         * support the tested behaviour.\n         */\n        if (nativeOfflineAudioContext.createStereoPanner === undefined) {\n            return Promise.resolve(true);\n        }\n\n        // Bug #62: Safari does not support ConstantSourceNodes.\n        if (nativeOfflineAudioContext.createConstantSource === undefined) {\n            return Promise.resolve(true);\n        }\n\n        const constantSourceNode = nativeOfflineAudioContext.createConstantSource();\n        const stereoPanner = nativeOfflineAudioContext.createStereoPanner();\n\n        constantSourceNode.channelCount = 1;\n        constantSourceNode.offset.value = 1;\n\n        stereoPanner.channelCount = 1;\n\n        constantSourceNode.start();\n\n        constantSourceNode.connect(stereoPanner).connect(nativeOfflineAudioContext.destination);\n\n        return nativeOfflineAudioContext.startRendering().then((buffer) => buffer.getChannelData(0)[0] !== 1);\n    };\n};\n", "import { TUnknownErrorFactory } from '../types';\n\nexport const createUnknownError: TUnknownErrorFactory = () => new DOMException('', 'UnknownError');\n", "import { IWaveShaperNode, IWaveShaperOptions } from '../interfaces';\nimport { TAudioNodeRenderer, TContext, TNativeWaveShaperNode, TOverSampleType, TWaveShaperNodeConstructorFactory } from '../types';\n\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    curve: null,\n    oversample: 'none'\n} as const;\n\nexport const createWaveShaperNodeConstructor: TWaveShaperNodeConstructorFactory = (\n    audioNodeConstructor,\n    createInvalidStateError,\n    createNativeWaveShaperNode,\n    createWaveShaperNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n) => {\n    return class WaveShaperNode<T extends TContext> extends audioNodeConstructor<T> implements IWaveShaperNode<T> {\n        private _isCurveNullified: boolean;\n\n        private _nativeWaveShaperNode: TNativeWaveShaperNode;\n\n        constructor(context: T, options?: Partial<IWaveShaperOptions>) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeWaveShaperNode = createNativeWaveShaperNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const waveShaperNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createWaveShaperNodeRenderer() : null);\n\n            // @todo Add a mechanism to only switch a WaveShaperNode to active while it is connected.\n            super(context, true, nativeWaveShaperNode, waveShaperNodeRenderer);\n\n            this._isCurveNullified = false;\n            this._nativeWaveShaperNode = nativeWaveShaperNode;\n\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n\n        get curve(): null | Float32Array {\n            if (this._isCurveNullified) {\n                return null;\n            }\n\n            return this._nativeWaveShaperNode.curve;\n        }\n\n        set curve(value) {\n            // Bug #103: Safari does not allow to set the curve to null.\n            if (value === null) {\n                this._isCurveNullified = true;\n                this._nativeWaveShaperNode.curve = new Float32Array([0, 0]);\n            } else {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n                if (value.length < 2) {\n                    throw createInvalidStateError();\n                }\n\n                this._isCurveNullified = false;\n                this._nativeWaveShaperNode.curve = value;\n            }\n        }\n\n        get oversample(): TOverSampleType {\n            return this._nativeWaveShaperNode.oversample;\n        }\n\n        set oversample(value) {\n            this._nativeWaveShaperNode.oversample = value;\n        }\n    };\n};\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IWaveShaperNode } from '../interfaces';\nimport { TNativeOfflineAudioContext, TNativeWaveShaperNode, TWaveShaperNodeRendererFactoryFactory } from '../types';\n\nexport const createWaveShaperNodeRendererFactory: TWaveShaperNodeRendererFactoryFactory = (\n    createNativeWaveShaperNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n) => {\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\n        const renderedNativeWaveShaperNodes = new WeakMap<TNativeOfflineAudioContext, TNativeWaveShaperNode>();\n\n        const createWaveShaperNode = async (proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\n            let nativeWaveShaperNode = getNativeAudioNode<T, TNativeWaveShaperNode>(proxy);\n\n            // If the initially used nativeWaveShaperNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeWaveShaperNodeIsOwnedByContext = isOwnedByContext(nativeWaveShaperNode, nativeOfflineAudioContext);\n\n            if (!nativeWaveShaperNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeWaveShaperNode.channelCount,\n                    channelCountMode: nativeWaveShaperNode.channelCountMode,\n                    channelInterpretation: nativeWaveShaperNode.channelInterpretation,\n                    curve: nativeWaveShaperNode.curve,\n                    oversample: nativeWaveShaperNode.oversample\n                };\n\n                nativeWaveShaperNode = createNativeWaveShaperNode(nativeOfflineAudioContext, options);\n            }\n\n            renderedNativeWaveShaperNodes.set(nativeOfflineAudioContext, nativeWaveShaperNode);\n\n            if (isNativeAudioNodeFaker(nativeWaveShaperNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode.inputs[0]);\n            } else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode);\n            }\n\n            return nativeWaveShaperNode;\n        };\n\n        return {\n            render(proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeWaveShaperNode> {\n                const renderedNativeWaveShaperNode = renderedNativeWaveShaperNodes.get(nativeOfflineAudioContext);\n\n                if (renderedNativeWaveShaperNode !== undefined) {\n                    return Promise.resolve(renderedNativeWaveShaperNode);\n                }\n\n                return createWaveShaperNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n", "import { TWindow, TWindowFactory } from '../types';\n\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n", "import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsFactory } from '../types';\n\nexport const createWrapAudioBufferCopyChannelMethods: TWrapAudioBufferCopyChannelMethodsFactory = (\n    convertNumberToUnsignedLong,\n    createIndexSizeError\n) => {\n    return (audioBuffer: TNativeAudioBuffer): void => {\n        audioBuffer.copyFromChannel = (destination, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const destinationLength = destination.length;\n\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < destinationLength; i += 1) {\n                destination[i] = channelData[i + bufferOffset];\n            }\n        };\n\n        audioBuffer.copyToChannel = (source, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const sourceLength = source.length;\n\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < sourceLength; i += 1) {\n                channelData[i + bufferOffset] = source[i];\n            }\n        };\n    };\n};\n", "import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory } from '../types';\n\nexport const createWrapAudioBufferCopyChannelMethodsOutOfBounds: TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory = (\n    convertNumberToUnsignedLong\n) => {\n    return (audioBuffer: TNativeAudioBuffer): void => {\n        audioBuffer.copyFromChannel = ((copyFromChannel) => {\n            return (destination: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n                if (bufferOffset < audioBuffer.length) {\n                    return copyFromChannel.call(audioBuffer, destination, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyFromChannel);\n\n        audioBuffer.copyToChannel = ((copyToChannel) => {\n            return (source: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n\n                if (bufferOffset < audioBuffer.length) {\n                    return copyToChannel.call(audioBuffer, source, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyToChannel);\n    };\n};\n", "import { TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory } from '../types';\n\nexport const createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer: TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory = (\n    overwriteAccessors\n) => {\n    return (nativeAudioBufferSourceNode, nativeContext) => {\n        const nullifiedBuffer = nativeContext.createBuffer(1, 1, 44100);\n\n        if (nativeAudioBufferSourceNode.buffer === null) {\n            nativeAudioBufferSourceNode.buffer = nullifiedBuffer;\n        }\n\n        overwriteAccessors(\n            nativeAudioBufferSourceNode,\n            'buffer',\n            (get) => () => {\n                const value = get.call(nativeAudioBufferSourceNode);\n\n                return value === nullifiedBuffer ? null : value;\n            },\n            (set) => (value) => {\n                return set.call(nativeAudioBufferSourceNode, value === null ? nullifiedBuffer : value);\n            }\n        );\n    };\n};\n", "import { TWrapChannelMergerNodeFactory } from '../types';\n\nexport const createWrapChannelMergerNode: TWrapChannelMergerNodeFactory = (createInvalidStateError, monitorConnections) => {\n    return (nativeContext, channelMergerNode) => {\n        // Bug #15: Safari does not return the default properties.\n        channelMergerNode.channelCount = 1;\n        channelMergerNode.channelCountMode = 'explicit';\n\n        // Bug #16: Safari does not throw an error when setting a different channelCount or channelCountMode.\n        Object.defineProperty(channelMergerNode, 'channelCount', {\n            get: () => 1,\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n\n        Object.defineProperty(channelMergerNode, 'channelCountMode', {\n            get: () => 'explicit',\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n\n        // Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n        const audioBufferSourceNode = nativeContext.createBufferSource();\n\n        const whenConnected = () => {\n            const length = channelMergerNode.numberOfInputs;\n\n            for (let i = 0; i < length; i += 1) {\n                audioBufferSourceNode.connect(channelMergerNode, 0, i);\n            }\n        };\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(channelMergerNode);\n\n        monitorConnections(channelMergerNode, whenConnected, whenDisconnected);\n    };\n};\n", "import { TGetFirstSampleFunction } from '../types';\n\nexport const getFirstSample: TGetFirstSampleFunction = (audioBuffer, buffer, channelNumber) => {\n    // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n    if (audioBuffer.copyFromChannel === undefined) {\n        return audioBuffer.getChannelData(channelNumber)[0];\n    }\n\n    audioBuffer.copyFromChannel(buffer, channelNumber);\n\n    return buffer[0];\n};\n", "import { TIsDCCurveFunction } from '../types';\n\nexport const isDCCurve: TIsDCCurveFunction = (curve) => {\n    if (curve === null) {\n        return false;\n    }\n\n    const length = curve.length;\n\n    if (length % 2 !== 0) {\n        return curve[Math.floor(length / 2)] !== 0;\n    }\n\n    return curve[length / 2 - 1] + curve[length / 2] !== 0;\n};\n", "import { TOverwriteAccessorsFunction } from '../types';\n\nexport const overwriteAccessors: TOverwriteAccessorsFunction = (object, property, createGetter, createSetter) => {\n    let prototype = object;\n\n    while (!prototype.hasOwnProperty(property)) {\n        prototype = Object.getPrototypeOf(prototype);\n    }\n\n    const { get, set } = <Required<PropertyDescriptor>>Object.getOwnPropertyDescriptor(prototype, property);\n\n    Object.defineProperty(object, property, { get: createGetter(get), set: createSetter(set) });\n};\n", "import { TSanitizeAudioWorkletNodeOptionsFunction } from '../types';\n\nexport const sanitizeAudioWorkletNodeOptions: TSanitizeAudioWorkletNodeOptionsFunction = (options) => {\n    return {\n        ...options,\n        outputChannelCount:\n            options.outputChannelCount !== undefined\n                ? options.outputChannelCount\n                : options.numberOfInputs === 1 && options.numberOfOutputs === 1\n                ? /*\n                   * Bug #61: This should be the computedNumberOfChannels, but unfortunately that is almost impossible to fake. That's why\n                   * the channelCountMode is required to be 'explicit' as long as there is not a native implementation in every browser. That\n                   * makes sure the computedNumberOfChannels is equivilant to the channelCount which makes it much easier to compute.\n                   */\n                  [options.channelCount]\n                : Array.from({ length: options.numberOfOutputs }, () => 1)\n    };\n};\n", "import { TSanitizeChannelSplitterOptionsFunction } from '../types';\n\nexport const sanitizeChannelSplitterOptions: TSanitizeChannelSplitterOptionsFunction = (options) => {\n    return { ...options, channelCount: options.numberOfOutputs };\n};\n", "import { TSanitizePeriodicWaveOptionsFunction } from '../types';\n\nexport const sanitizePeriodicWaveOptions: TSanitizePeriodicWaveOptionsFunction = (options) => {\n    const { imag, real } = options;\n\n    if (imag === undefined) {\n        if (real === undefined) {\n            return { ...options, imag: [0, 0], real: [0, 0] };\n        }\n\n        return { ...options, imag: Array.from(real, () => 0), real };\n    }\n\n    if (real === undefined) {\n        return { ...options, imag, real: Array.from(imag, () => 0) };\n    }\n\n    return { ...options, imag, real };\n};\n", "import { TSetValueAtTimeUntilPossibleFunction } from '../types';\n\nexport const setValueAtTimeUntilPossible: TSetValueAtTimeUntilPossibleFunction = (audioParam, value, startTime) => {\n    try {\n        audioParam.setValueAtTime(value, startTime);\n    } catch (err) {\n        if (err.code !== 9) {\n            throw err;\n        }\n\n        setValueAtTimeUntilPossible(audioParam, value, startTime + 1e-7);\n    }\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.start();\n\n    try {\n        nativeAudioBufferSourceNode.start();\n    } catch {\n        return true;\n    }\n\n    return false;\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStartMethodOffsetClampingSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n\n    try {\n        nativeAudioBufferSourceNode.start(0, 1);\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioBufferSourceNodeStopMethodNullifiedBufferSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.start();\n\n    try {\n        nativeAudioBufferSourceNode.stop();\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStartMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n\n    try {\n        nativeAudioBufferSourceNode.start(-1);\n    } catch (err) {\n        return err instanceof RangeError;\n    }\n\n    return false;\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n    nativeAudioBufferSourceNode.start();\n    nativeAudioBufferSourceNode.stop();\n\n    try {\n        nativeAudioBufferSourceNode.stop();\n\n        return true;\n    } catch {\n        return false;\n    }\n};\n", "import { TNativeContext } from '../types';\n\nexport const testAudioScheduledSourceNodeStopMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n\n    try {\n        nativeAudioBufferSourceNode.stop(-1);\n    } catch (err) {\n        return err instanceof RangeError;\n    }\n\n    return false;\n};\n", "import { TTestAudioWorkletNodeOptionsClonabilityFunction } from '../types';\n\nexport const testAudioWorkletNodeOptionsClonability: TTestAudioWorkletNodeOptionsClonabilityFunction = (audioWorkletNodeOptions) => {\n    const { port1, port2 } = new MessageChannel();\n\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    } finally {\n        port1.close();\n        port2.close();\n    }\n};\n", "/*\n * Bug #122: Edge up to version v18 did not allow to construct a DOMException'. It also had a couple more bugs but since this is easy to\n * test it's used here as a placeholder.\n *\n * Bug #27: Edge up to version v18 did reject an invalid arrayBuffer passed to decodeAudioData() with a DOMException.\n *\n * Bug #50: Edge up to version v18 did not allow to create AudioNodes on a closed context.\n *\n * Bug #57: Edge up to version v18 did not throw an error when assigning the type of an OscillatorNode to 'custom'.\n *\n * Bug #63: Edge up to version v18 did not expose the mediaElement property of a MediaElementAudioSourceNode.\n *\n * Bug #64: Edge up to version v18 did not support the MediaStreamAudioDestinationNode.\n *\n * Bug #71: Edge up to version v18 did not allow to set the buffer of an AudioBufferSourceNode to null.\n *\n * Bug #93: Edge up to version v18 did set the sampleRate of an AudioContext to zero when it was closed.\n *\n * Bug #101: Edge up to version v18 refused to execute decodeAudioData() on a closed context.\n *\n * Bug #106: Edge up to version v18 did not expose the maxValue and minValue properties of the pan AudioParam of a StereoPannerNode.\n *\n * Bug #110: Edge up to version v18 did not expose the maxValue and minValue properties of the attack, knee, ratio, release and threshold AudioParams of a DynamicsCompressorNode.\n *\n * Bug #123: Edge up to version v18 did not support HRTF as the panningModel for a PannerNode.\n *\n * Bug #145: Edge up to version v18 did throw an IndexSizeError when an OfflineAudioContext was created with a sampleRate of zero.\n *\n * Bug #161: Edge up to version v18 did not expose the maxValue and minValue properties of the delayTime AudioParam of a DelayNode.\n */\nexport const testDomExceptionConstructorSupport = () => {\n    try {\n        new DOMException(); // tslint:disable-line:no-unused-expression\n    } catch {\n        return false;\n    }\n\n    return true;\n};\n", "// Safari at version 11 did not support transferables.\nexport const testTransferablesSupport = () =>\n    new Promise<boolean>((resolve) => {\n        const arrayBuffer = new ArrayBuffer(0);\n        const { port1, port2 } = new MessageChannel();\n\n        port1.onmessage = ({ data }) => resolve(data !== null);\n        port2.postMessage(arrayBuffer, [arrayBuffer]);\n    });\n", "import { TNativeAudioBufferSourceNode } from '../types';\n\nexport const wrapAudioBufferSourceNodeStartMethodOffsetClamping = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration?: number) => {\n            const buffer = nativeAudioBufferSourceNode.buffer;\n            // Bug #154: Safari does not clamp the offset if it is equal to or greater than the duration of the buffer.\n            const clampedOffset = buffer === null ? offset : Math.min(buffer.duration, offset);\n\n            // Bug #155: Safari does not handle the offset correctly if it would cause the buffer to be not be played at all.\n            if (buffer !== null && clampedOffset > buffer.duration - 0.5 / nativeAudioBufferSourceNode.context.sampleRate) {\n                start.call(nativeAudioBufferSourceNode, when, 0, 0);\n            } else {\n                start.call(nativeAudioBufferSourceNode, when, clampedOffset, duration);\n            }\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n", "import { TNativeAudioNode, TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction } from '../types';\nimport { interceptConnections } from './intercept-connections';\n\nexport const wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls: TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction = (\n    nativeAudioScheduledSourceNode,\n    nativeContext\n) => {\n    const nativeGainNode = nativeContext.createGain();\n\n    nativeAudioScheduledSourceNode.connect(nativeGainNode);\n\n    const disconnectGainNode = ((disconnect) => {\n        return () => {\n            // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n            (<(destinaton: TNativeAudioNode) => void>disconnect).call(nativeAudioScheduledSourceNode, nativeGainNode);\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnectGainNode);\n        };\n    })(nativeAudioScheduledSourceNode.disconnect);\n\n    nativeAudioScheduledSourceNode.addEventListener('ended', disconnectGainNode);\n\n    interceptConnections(nativeAudioScheduledSourceNode, nativeGainNode);\n\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        let isStopped = false;\n\n        return (when = 0) => {\n            if (isStopped) {\n                try {\n                    stop.call(nativeAudioScheduledSourceNode, when);\n                } catch {\n                    nativeGainNode.gain.setValueAtTime(0, when);\n                }\n            } else {\n                stop.call(nativeAudioScheduledSourceNode, when);\n\n                isStopped = true;\n            }\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n", "import { TWrapEventListenerFunction } from '../types';\n\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\n    return (event) => {\n        const descriptor = { value: target };\n\n        Object.defineProperties(event, {\n            currentTarget: descriptor,\n            target: descriptor\n        });\n\n        if (typeof eventListener === 'function') {\n            return eventListener.call(target, event);\n        }\n\n        return eventListener.handleEvent.call(target, event);\n    };\n};\n", "export {};\n//# sourceMappingURL=analyser-node.js.map", "export {};\n//# sourceMappingURL=analyser-options.js.map", "export {};\n//# sourceMappingURL=audio-buffer.js.map", "export {};\n//# sourceMappingURL=audio-buffer-options.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-renderer.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-options.js.map", "export {};\n//# sourceMappingURL=audio-context.js.map", "export {};\n//# sourceMappingURL=audio-context-options.js.map", "export {};\n//# sourceMappingURL=audio-destination-node.js.map", "export {};\n//# sourceMappingURL=audio-listener.js.map", "export {};\n//# sourceMappingURL=audio-node.js.map", "export {};\n//# sourceMappingURL=audio-node-options.js.map", "export {};\n//# sourceMappingURL=audio-node-renderer.js.map", "export {};\n//# sourceMappingURL=audio-param.js.map", "export {};\n//# sourceMappingURL=audio-param-descriptor.js.map", "export {};\n//# sourceMappingURL=audio-param-renderer.js.map", "export {};\n//# sourceMappingURL=audio-scheduled-source-node.js.map", "export {};\n//# sourceMappingURL=audio-scheduled-source-node-event-map.js.map", "export {};\n//# sourceMappingURL=audio-worklet.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-event-map.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-options.js.map", "export {};\n//# sourceMappingURL=audio-worklet-processor.js.map", "export {};\n//# sourceMappingURL=audio-worklet-processor-constructor.js.map", "export {};\n//# sourceMappingURL=automation.js.map", "export {};\n//# sourceMappingURL=base-audio-context.js.map", "export {};\n//# sourceMappingURL=biquad-filter-node.js.map", "export {};\n//# sourceMappingURL=biquad-filter-options.js.map", "export {};\n//# sourceMappingURL=channel-merger-options.js.map", "export {};\n//# sourceMappingURL=channel-splitter-options.js.map", "export {};\n//# sourceMappingURL=common-audio-context.js.map", "export {};\n//# sourceMappingURL=common-offline-audio-context.js.map", "export {};\n//# sourceMappingURL=constant-source-node.js.map", "export {};\n//# sourceMappingURL=constant-source-node-renderer.js.map", "export {};\n//# sourceMappingURL=constant-source-options.js.map", "export {};\n//# sourceMappingURL=convolver-node.js.map", "export {};\n//# sourceMappingURL=convolver-options.js.map", "export {};\n//# sourceMappingURL=delay-node.js.map", "export {};\n//# sourceMappingURL=delay-options.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-node.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-options.js.map", "export {};\n//# sourceMappingURL=event-target.js.map", "export {};\n//# sourceMappingURL=gain-node.js.map", "export {};\n//# sourceMappingURL=gain-options.js.map", "export {};\n//# sourceMappingURL=iir-filter-node.js.map", "export {};\n//# sourceMappingURL=iir-filter-options.js.map", "export {};\n//# sourceMappingURL=media-element-audio-source-node.js.map", "export {};\n//# sourceMappingURL=media-element-audio-source-options.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-destination-node.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-source-node.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-source-options.js.map", "export {};\n//# sourceMappingURL=media-stream-track-audio-source-node.js.map", "export {};\n//# sourceMappingURL=media-stream-track-audio-source-options.js.map", "export {};\n//# sourceMappingURL=minimal-audio-context.js.map", "export {};\n//# sourceMappingURL=minimal-base-audio-context.js.map", "export {};\n//# sourceMappingURL=minimal-base-audio-context-event-map.js.map", "export {};\n//# sourceMappingURL=minimal-offline-audio-context.js.map", "export {};\n//# sourceMappingURL=native-audio-node-faker.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-faker.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node-faker.js.map", "export {};\n//# sourceMappingURL=native-convolver-node-faker.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node-faker.js.map", "export {};\n//# sourceMappingURL=native-panner-node-faker.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node-faker.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node-faker.js.map", "export {};\n//# sourceMappingURL=offline-audio-completion-event.js.map", "export {};\n//# sourceMappingURL=offline-audio-context.js.map", "export {};\n//# sourceMappingURL=offline-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=offline-audio-context-options.js.map", "export {};\n//# sourceMappingURL=oscillator-node.js.map", "export {};\n//# sourceMappingURL=oscillator-node-renderer.js.map", "export {};\n//# sourceMappingURL=oscillator-options.js.map", "export {};\n//# sourceMappingURL=panner-node.js.map", "export {};\n//# sourceMappingURL=panner-options.js.map", "export {};\n//# sourceMappingURL=periodic-wave.js.map", "export {};\n//# sourceMappingURL=periodic-wave-constraints.js.map", "export {};\n//# sourceMappingURL=periodic-wave-options.js.map", "export {};\n//# sourceMappingURL=read-only-map.js.map", "export {};\n//# sourceMappingURL=stereo-panner-node.js.map", "export {};\n//# sourceMappingURL=stereo-panner-options.js.map", "export {};\n//# sourceMappingURL=wave-shaper-node.js.map", "export {};\n//# sourceMappingURL=wave-shaper-options.js.map", "// @todo This is currently named IWorkletOptions and not IAudioWorkletOptions because it defines the options of a generic Worklet.\n\nexport interface IWorkletOptions {\n    credentials: 'include' | 'omit' | 'same-origin';\n}\n", "export * from './analyser-node';\nexport * from './analyser-options';\nexport * from './audio-buffer';\nexport * from './audio-buffer-options';\nexport * from './audio-buffer-source-node';\nexport * from './audio-buffer-source-node-renderer';\nexport * from './audio-buffer-source-options';\nexport * from './audio-context';\nexport * from './audio-context-options';\nexport * from './audio-destination-node';\nexport * from './audio-listener';\nexport * from './audio-node';\nexport * from './audio-node-options';\nexport * from './audio-node-renderer';\nexport * from './audio-param';\nexport * from './audio-param-descriptor';\nexport * from './audio-param-renderer';\nexport * from './audio-scheduled-source-node';\nexport * from './audio-scheduled-source-node-event-map';\nexport * from './audio-worklet';\nexport * from './audio-worklet-node';\nexport * from './audio-worklet-node-event-map';\nexport * from './audio-worklet-node-options';\nexport * from './audio-worklet-processor';\nexport * from './audio-worklet-processor-constructor';\nexport * from './automation';\nexport * from './base-audio-context';\nexport * from './biquad-filter-node';\nexport * from './biquad-filter-options';\nexport * from './channel-merger-options';\nexport * from './channel-splitter-options';\nexport * from './common-audio-context';\nexport * from './common-offline-audio-context';\nexport * from './constant-source-node';\nexport * from './constant-source-node-renderer';\nexport * from './constant-source-options';\nexport * from './convolver-node';\nexport * from './convolver-options';\nexport * from './delay-node';\nexport * from './delay-options';\nexport * from './dynamics-compressor-node';\nexport * from './dynamics-compressor-options';\nexport * from './event-target';\nexport * from './gain-node';\nexport * from './gain-options';\nexport * from './iir-filter-node';\nexport * from './iir-filter-options';\nexport * from './media-element-audio-source-node';\nexport * from './media-element-audio-source-options';\nexport * from './media-stream-audio-destination-node';\nexport * from './media-stream-audio-source-node';\nexport * from './media-stream-audio-source-options';\nexport * from './media-stream-track-audio-source-node';\nexport * from './media-stream-track-audio-source-options';\nexport * from './minimal-audio-context';\nexport * from './minimal-base-audio-context';\nexport * from './minimal-base-audio-context-event-map';\nexport * from './minimal-offline-audio-context';\nexport * from './native-audio-node-faker';\nexport * from './native-audio-worklet-node-faker';\nexport * from './native-constant-source-node-faker';\nexport * from './native-convolver-node-faker';\nexport * from './native-iir-filter-node-faker';\nexport * from './native-panner-node-faker';\nexport * from './native-stereo-panner-node-faker';\nexport * from './native-wave-shaper-node-faker';\nexport * from './offline-audio-completion-event';\nexport * from './offline-audio-context';\nexport * from './offline-audio-context-constructor';\nexport * from './offline-audio-context-options';\nexport * from './oscillator-node';\nexport * from './oscillator-node-renderer';\nexport * from './oscillator-options';\nexport * from './panner-node';\nexport * from './panner-options';\nexport * from './periodic-wave';\nexport * from './periodic-wave-constraints';\nexport * from './periodic-wave-options';\nexport * from './read-only-map';\nexport * from './stereo-panner-node';\nexport * from './stereo-panner-options';\nexport * from './wave-shaper-node';\nexport * from './wave-shaper-options';\nexport * from './worklet-options';\n", "export {};\n//# sourceMappingURL=abort-error-factory.js.map", "export {};\n//# sourceMappingURL=active-audio-worklet-node-inputs-store.js.map", "export {};\n//# sourceMappingURL=active-input-connection.js.map", "export {};\n//# sourceMappingURL=add-active-input-connection-to-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=add-active-input-connection-to-audio-node-function.js.map", "export {};\n//# sourceMappingURL=add-audio-node-connections-factory.js.map", "export {};\n//# sourceMappingURL=add-audio-node-connections-function.js.map", "export {};\n//# sourceMappingURL=add-audio-param-connections-factory.js.map", "export {};\n//# sourceMappingURL=add-audio-param-connections-function.js.map", "export {};\n//# sourceMappingURL=add-audio-worklet-module-factory.js.map", "export {};\n//# sourceMappingURL=add-audio-worklet-module-function.js.map", "export {};\n//# sourceMappingURL=add-connection-to-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=add-connection-to-audio-node-function.js.map", "export {};\n//# sourceMappingURL=add-passive-input-connection-to-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=add-passive-input-connection-to-audio-node-function.js.map", "export {};\n//# sourceMappingURL=add-silent-connection-factory.js.map", "export {};\n//# sourceMappingURL=add-silent-connection-function.js.map", "export {};\n//# sourceMappingURL=add-unrendered-audio-worklet-node-factory.js.map", "export {};\n//# sourceMappingURL=add-unrendered-audio-worklet-node-function.js.map", "export {};\n//# sourceMappingURL=analyser-node-constructor.js.map", "export {};\n//# sourceMappingURL=analyser-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=analyser-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=analyser-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=any-audio-buffer.js.map", "export {};\n//# sourceMappingURL=any-context.js.map", "export {};\n//# sourceMappingURL=audio-buffer-constructor.js.map", "export {};\n//# sourceMappingURL=audio-buffer-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-constructor.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-renderer.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=audio-buffer-source-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=audio-buffer-store.js.map", "export {};\n//# sourceMappingURL=audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-context-latency-category.js.map", "export {};\n//# sourceMappingURL=audio-context-state.js.map", "export {};\n//# sourceMappingURL=audio-destination-node-constructor.js.map", "export {};\n//# sourceMappingURL=audio-destination-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-destination-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=audio-listener-factory.js.map", "export {};\n//# sourceMappingURL=audio-listener-factory-factory.js.map", "export {};\n//# sourceMappingURL=audio-node-connections.js.map", "export {};\n//# sourceMappingURL=audio-node-connections-store.js.map", "export {};\n//# sourceMappingURL=audio-node-constructor.js.map", "export {};\n//# sourceMappingURL=audio-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-node-output-connection.js.map", "export {};\n//# sourceMappingURL=audio-node-renderer.js.map", "export {};\n//# sourceMappingURL=audio-node-store.js.map", "export {};\n//# sourceMappingURL=audio-node-tail-time-store.js.map", "export {};\n//# sourceMappingURL=audio-param-audio-node-store.js.map", "export {};\n//# sourceMappingURL=audio-param-connections.js.map", "export {};\n//# sourceMappingURL=audio-param-connections-store.js.map", "export {};\n//# sourceMappingURL=audio-param-factory.js.map", "export {};\n//# sourceMappingURL=audio-param-factory-factory.js.map", "export {};\n//# sourceMappingURL=audio-param-map.js.map", "export {};\n//# sourceMappingURL=audio-param-output-connection.js.map", "export {};\n//# sourceMappingURL=audio-param-renderer-factory.js.map", "export {};\n//# sourceMappingURL=audio-param-store.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-constructor.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=audio-worklet-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=backup-offline-audio-context-store.js.map", "export {};\n//# sourceMappingURL=base-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=base-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=biquad-filter-node-constructor.js.map", "export {};\n//# sourceMappingURL=biquad-filter-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=biquad-filter-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=biquad-filter-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=biquad-filter-type.js.map", "export {};\n//# sourceMappingURL=channel-count-mode.js.map", "export {};\n//# sourceMappingURL=channel-interpretation.js.map", "export {};\n//# sourceMappingURL=channel-merger-node-constructor.js.map", "export {};\n//# sourceMappingURL=channel-merger-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=channel-merger-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=channel-merger-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=channel-splitter-node-constructor.js.map", "export {};\n//# sourceMappingURL=channel-splitter-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=channel-splitter-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=channel-splitter-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=cache-test-result-factory.js.map", "export {};\n//# sourceMappingURL=cache-test-result-function.js.map", "export {};\n//# sourceMappingURL=connect-audio-param-factory.js.map", "export {};\n//# sourceMappingURL=connect-audio-param-function.js.map", "export {};\n//# sourceMappingURL=connect-multiple-outputs-factory.js.map", "export {};\n//# sourceMappingURL=connect-multiple-outputs-function.js.map", "export {};\n//# sourceMappingURL=connect-native-audio-node-to-native-audio-node-function.js.map", "export {};\n//# sourceMappingURL=connected-native-audio-buffer-source-node-factory.js.map", "export {};\n//# sourceMappingURL=connected-native-audio-buffer-source-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=constant-source-node-constructor.js.map", "export {};\n//# sourceMappingURL=constant-source-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=constant-source-node-renderer.js.map", "export {};\n//# sourceMappingURL=constant-source-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=constant-source-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=constructor.js.map", "export {};\n//# sourceMappingURL=context.js.map", "export {};\n//# sourceMappingURL=context-store.js.map", "export {};\n//# sourceMappingURL=convert-number-to-unsigned-long-factory.js.map", "export {};\n//# sourceMappingURL=convert-number-to-unsigned-long-function.js.map", "export {};\n//# sourceMappingURL=convolver-node-constructor.js.map", "export {};\n//# sourceMappingURL=convolver-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=convolver-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=convolver-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=create-native-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=create-native-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=cycle-counters.js.map", "export {};\n//# sourceMappingURL=data-clone-error-factory.js.map", "export {};\n//# sourceMappingURL=decode-audio-data-factory.js.map", "export {};\n//# sourceMappingURL=decode-audio-data-function.js.map", "export {};\n//# sourceMappingURL=decode-error-callback.js.map", "export {};\n//# sourceMappingURL=decode-success-callback.js.map", "export {};\n//# sourceMappingURL=decrement-cycle-counter-factory.js.map", "export {};\n//# sourceMappingURL=decrement-cycle-counter-function.js.map", "export {};\n//# sourceMappingURL=delay-node-constructor.js.map", "export {};\n//# sourceMappingURL=delay-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=delay-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=delay-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=delete-active-input-connection-to-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=delete-active-input-connection-to-audio-node-function.js.map", "export {};\n//# sourceMappingURL=delete-unrendered-audio-worklet-node-factory.js.map", "export {};\n//# sourceMappingURL=delete-unrendered-audio-worklet-node-function.js.map", "export {};\n//# sourceMappingURL=detect-cycles-factory.js.map", "export {};\n//# sourceMappingURL=detect-cycles-function.js.map", "export {};\n//# sourceMappingURL=disconnect-multiple-outputs-factory.js.map", "export {};\n//# sourceMappingURL=disconnect-multiple-outputs-function.js.map", "export {};\n//# sourceMappingURL=disconnect-native-audio-node-from-native-audio-node-function.js.map", "export {};\n//# sourceMappingURL=distance-model-type.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-node-constructor.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=dynamics-compressor-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=encoding-error-factory.js.map", "export {};\n//# sourceMappingURL=error-event-handler.js.map", "export {};\n//# sourceMappingURL=evaluate-audio-worklet-global-scope-function.js.map", "export {};\n//# sourceMappingURL=evaluate-source-factory.js.map", "export {};\n//# sourceMappingURL=evaluate-source-function.js.map", "export {};\n//# sourceMappingURL=event-handler.js.map", "export {};\n//# sourceMappingURL=event-target-constructor.js.map", "export {};\n//# sourceMappingURL=event-target-constructor-factory.js.map", "export {};\n//# sourceMappingURL=expose-current-frame-and-current-time-factory.js.map", "export {};\n//# sourceMappingURL=expose-current-frame-and-current-time-function.js.map", "export {};\n//# sourceMappingURL=fetch-source-factory.js.map", "export {};\n//# sourceMappingURL=fetch-source-function.js.map", "export {};\n//# sourceMappingURL=gain-node-constructor.js.map", "export {};\n//# sourceMappingURL=gain-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=gain-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=gain-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=get-active-audio-worklet-node-inputs-factory.js.map", "export {};\n//# sourceMappingURL=get-active-audio-worklet-node-inputs-function.js.map", "export {};\n//# sourceMappingURL=get-audio-node-connections-function.js.map", "export {};\n//# sourceMappingURL=get-audio-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=get-audio-node-renderer-function.js.map", "export {};\n//# sourceMappingURL=get-audio-node-tail-time-factory.js.map", "export {};\n//# sourceMappingURL=get-audio-node-tail-time-function.js.map", "export {};\n//# sourceMappingURL=get-audio-param-connections-function.js.map", "export {};\n//# sourceMappingURL=get-audio-param-renderer-factory.js.map", "export {};\n//# sourceMappingURL=get-audio-param-renderer-function.js.map", "export {};\n//# sourceMappingURL=get-backup-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=get-backup-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=get-event-listeners-of-audio-node-function.js.map", "export {};\n//# sourceMappingURL=get-first-sample-function.js.map", "export {};\n//# sourceMappingURL=get-native-audio-node-function.js.map", "export {};\n//# sourceMappingURL=get-native-audio-param-function.js.map", "export {};\n//# sourceMappingURL=get-native-context-factory.js.map", "export {};\n//# sourceMappingURL=get-native-context-function.js.map", "export {};\n//# sourceMappingURL=get-or-create-backup-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=get-or-create-backup-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=get-unrendered-audio-worklet-nodes-factory.js.map", "export {};\n//# sourceMappingURL=get-unrendered-audio-worklet-nodes-function.js.map", "export {};\n//# sourceMappingURL=get-value-for-key-function.js.map", "export {};\n//# sourceMappingURL=iir-filter-node-constructor.js.map", "export {};\n//# sourceMappingURL=iir-filter-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=iir-filter-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=iir-filter-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=increment-cycle-counter-factory.js.map", "export {};\n//# sourceMappingURL=increment-cycle-counter-factory-factory.js.map", "export {};\n//# sourceMappingURL=increment-cycle-counter-function.js.map", "export {};\n//# sourceMappingURL=index-size-error-factory.js.map", "export {};\n//# sourceMappingURL=insert-element-in-set-function.js.map", "export {};\n//# sourceMappingURL=internal-state-event-listener.js.map", "export {};\n//# sourceMappingURL=invalid-access-error-factory.js.map", "export {};\n//# sourceMappingURL=invalid-state-error-factory.js.map", "export {};\n//# sourceMappingURL=is-active-audio-node-function.js.map", "export {};\n//# sourceMappingURL=is-any-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=is-any-audio-context-function.js.map", "export {};\n//# sourceMappingURL=is-any-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=is-any-audio-node-function.js.map", "export {};\n//# sourceMappingURL=is-any-audio-param-factory.js.map", "export {};\n//# sourceMappingURL=is-any-audio-param-function.js.map", "export {};\n//# sourceMappingURL=is-any-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=is-any-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=is-dc-curve-function.js.map", "export {};\n//# sourceMappingURL=is-native-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=is-native-audio-context-function.js.map", "export {};\n//# sourceMappingURL=is-native-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=is-native-audio-node-function.js.map", "export {};\n//# sourceMappingURL=is-native-audio-param-factory.js.map", "export {};\n//# sourceMappingURL=is-native-audio-param-function.js.map", "export {};\n//# sourceMappingURL=is-native-context-factory.js.map", "export {};\n//# sourceMappingURL=is-native-context-function.js.map", "export {};\n//# sourceMappingURL=is-native-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=is-native-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=is-part-of-a-cycle-function.js.map", "export {};\n//# sourceMappingURL=is-passive-audio-node-function.js.map", "export {};\n//# sourceMappingURL=is-secure-context-factory.js.map", "export {};\n//# sourceMappingURL=is-supported-promise-factory.js.map", "export {};\n//# sourceMappingURL=media-element-audio-source-node-constructor.js.map", "export {};\n//# sourceMappingURL=media-element-audio-source-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-destination-node-constructor.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-destination-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-source-node-constructor.js.map", "export {};\n//# sourceMappingURL=media-stream-audio-source-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=media-stream-track-audio-source-node-constructor.js.map", "export {};\n//# sourceMappingURL=media-stream-track-audio-source-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=minimal-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=minimal-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=minimal-base-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=minimal-base-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=minimal-offline-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=minimal-offline-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=monitor-connections-factory.js.map", "export {};\n//# sourceMappingURL=monitor-connections-function.js.map", "export {};\n//# sourceMappingURL=native-analyser-node.js.map", "export {};\n//# sourceMappingURL=native-analyser-node-factory.js.map", "export {};\n//# sourceMappingURL=native-analyser-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer-constructor.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer-source-node.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer-source-node-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-buffer-source-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-context.js.map", "export {};\n//# sourceMappingURL=native-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=native-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-destination-node.js.map", "export {};\n//# sourceMappingURL=native-audio-destination-node-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-destination-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-listener.js.map", "export {};\n//# sourceMappingURL=native-audio-node.js.map", "export {};\n//# sourceMappingURL=native-audio-param.js.map", "export {};\n//# sourceMappingURL=native-audio-param-map.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-constructor.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-audio-worklet-node-options.js.map", "export {};\n//# sourceMappingURL=native-biquad-filter-node.js.map", "export {};\n//# sourceMappingURL=native-biquad-filter-node-factory.js.map", "export {};\n//# sourceMappingURL=native-channel-merger-node.js.map", "export {};\n//# sourceMappingURL=native-channel-merger-node-factory.js.map", "export {};\n//# sourceMappingURL=native-channel-merger-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-channel-splitter-node.js.map", "export {};\n//# sourceMappingURL=native-channel-splitter-node-factory.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node-factory.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-constant-source-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-context.js.map", "export {};\n//# sourceMappingURL=native-convolver-node.js.map", "export {};\n//# sourceMappingURL=native-convolver-node-factory.js.map", "export {};\n//# sourceMappingURL=native-convolver-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-delay-node-factory.js.map", "export {};\n//# sourceMappingURL=native-delay-node.js.map", "export {};\n//# sourceMappingURL=native-dynamics-compressor-node.js.map", "export {};\n//# sourceMappingURL=native-dynamics-compressor-node-factory.js.map", "export {};\n//# sourceMappingURL=native-dynamics-compressor-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-event-target.js.map", "export {};\n//# sourceMappingURL=native-gain-node.js.map", "export {};\n//# sourceMappingURL=native-gain-node-factory.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node-factory.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-iir-filter-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-media-element-audio-source-node.js.map", "export {};\n//# sourceMappingURL=native-media-element-audio-source-node-factory.js.map", "export {};\n//# sourceMappingURL=native-media-stream-audio-destination-node.js.map", "export {};\n//# sourceMappingURL=native-media-stream-audio-destination-node-factory.js.map", "export {};\n//# sourceMappingURL=native-media-stream-audio-source-node.js.map", "export {};\n//# sourceMappingURL=native-media-stream-audio-source-node-factory.js.map", "export {};\n//# sourceMappingURL=native-media-stream-track-audio-source-node.js.map", "export {};\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory.js.map", "export {};\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-offline-audio-context.js.map", "export {};\n//# sourceMappingURL=native-offline-audio-context-constructor.js.map", "export {};\n//# sourceMappingURL=native-offline-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-oscillator-node.js.map", "export {};\n//# sourceMappingURL=native-oscillator-node-factory.js.map", "export {};\n//# sourceMappingURL=native-oscillator-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-panner-node.js.map", "export {};\n//# sourceMappingURL=native-panner-node-factory.js.map", "export {};\n//# sourceMappingURL=native-panner-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-panner-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-panner-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-periodic-wave.js.map", "export {};\n//# sourceMappingURL=native-periodic-wave-factory.js.map", "export {};\n//# sourceMappingURL=native-periodic-wave-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-script-processor-node.js.map", "export {};\n//# sourceMappingURL=native-script-processor-node-factory.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node-factory.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-stereo-panner-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node-factory.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node-factory-factory.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node-faker-factory.js.map", "export {};\n//# sourceMappingURL=native-wave-shaper-node-faker-factory-factory.js.map", "export {};\n//# sourceMappingURL=not-supported-error-factory.js.map", "export {};\n//# sourceMappingURL=offline-audio-context-constructor-factory.js.map", "export {};\n//# sourceMappingURL=oscillator-node-constructor.js.map", "export {};\n//# sourceMappingURL=oscillator-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=oscillator-node-renderer.js.map", "export {};\n//# sourceMappingURL=oscillator-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=oscillator-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=oscillator-type.js.map", "export {};\n//# sourceMappingURL=output-connection.js.map", "export {};\n//# sourceMappingURL=over-sample-type.js.map", "export {};\n//# sourceMappingURL=overwrite-accessors-function.js.map", "export {};\n//# sourceMappingURL=panner-node-constructor.js.map", "export {};\n//# sourceMappingURL=panner-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=panner-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=panner-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=panning-model-type.js.map", "export {};\n//# sourceMappingURL=passive-audio-node-input-connection.js.map", "export {};\n//# sourceMappingURL=passive-audio-param-input-connection.js.map", "export {};\n//# sourceMappingURL=periodic-wave-constructor.js.map", "export {};\n//# sourceMappingURL=periodic-wave-constructor-factory.js.map", "export {};\n//# sourceMappingURL=pick-element-from-set-function.js.map", "export {};\n//# sourceMappingURL=render-automation-factory.js.map", "export {};\n//# sourceMappingURL=render-automation-function.js.map", "export {};\n//# sourceMappingURL=render-inputs-of-audio-node-factory.js.map", "export {};\n//# sourceMappingURL=render-inputs-of-audio-node-function.js.map", "export {};\n//# sourceMappingURL=render-inputs-of-audio-param-factory.js.map", "export {};\n//# sourceMappingURL=render-inputs-of-audio-param-function.js.map", "export {};\n//# sourceMappingURL=render-native-offline-audio-context-factory.js.map", "export {};\n//# sourceMappingURL=render-native-offline-audio-context-function.js.map", "export {};\n//# sourceMappingURL=sanitize-audio-worklet-node-options-function.js.map", "export {};\n//# sourceMappingURL=sanitize-channel-splitter-options-function.js.map", "export {};\n//# sourceMappingURL=sanitize-periodic-wave-options-function.js.map", "export {};\n//# sourceMappingURL=set-active-audio-worklet-node-inputs-factory.js.map", "export {};\n//# sourceMappingURL=set-active-audio-worklet-node-inputs-function.js.map", "export {};\n//# sourceMappingURL=set-audio-node-tail-time-factory.js.map", "export {};\n//# sourceMappingURL=set-audio-node-tail-time-function.js.map", "export {};\n//# sourceMappingURL=set-value-at-time-until-possible-function.js.map", "export {};\n//# sourceMappingURL=start-rendering-factory.js.map", "export {};\n//# sourceMappingURL=start-rendering-function.js.map", "export {};\n//# sourceMappingURL=stereo-panner-node-constructor.js.map", "export {};\n//# sourceMappingURL=stereo-panner-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=stereo-panner-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=stereo-panner-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-buffer-copy-channel-methods-subarray-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-buffer-constructor-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-context-close-method-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-context-decode-audio-data-method-type-error-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-context-options-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-node-connect-method-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-worklet-node-options-clonability-function.js.map", "export {};\n//# sourceMappingURL=test-audio-worklet-processor-no-outputs-support-factory.js.map", "export {};\n//# sourceMappingURL=test-audio-worklet-processor-post-message-support-factory.js.map", "export {};\n//# sourceMappingURL=test-channel-merger-node-channel-count-support-factory.js.map", "export {};\n//# sourceMappingURL=test-constant-source-node-accurate-scheduling-support-factory.js.map", "export {};\n//# sourceMappingURL=test-convolver-node-buffer-reassignability-support-factory.js.map", "export {};\n//# sourceMappingURL=test-convolver-node-channel-count-support-factory.js.map", "export {};\n//# sourceMappingURL=test-is-secure-context-support-factory.js.map", "export {};\n//# sourceMappingURL=test-media-stream-audio-source-node-media-stream-without-audio-track-support.js.map", "export {};\n//# sourceMappingURL=test-offline-audio-context-current-time-support-factory.js.map", "export {};\n//# sourceMappingURL=test-stereo-panner-node-default-value-support-factory.js.map", "export {};\n//# sourceMappingURL=unknown-error-factory.js.map", "export {};\n//# sourceMappingURL=unrendered-audio-worklet-node-store.js.map", "export {};\n//# sourceMappingURL=unrendered-audio-worklet-nodes.js.map", "export {};\n//# sourceMappingURL=wave-shaper-node-constructor.js.map", "export {};\n//# sourceMappingURL=wave-shaper-node-constructor-factory.js.map", "export {};\n//# sourceMappingURL=wave-shaper-node-renderer-factory-factory.js.map", "export {};\n//# sourceMappingURL=wave-shaper-node-renderer-factory.js.map", "export {};\n//# sourceMappingURL=window.js.map", "export {};\n//# sourceMappingURL=window-factory.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-factory.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-function.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-out-of-bounds-function.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-source-node-start-method-offset-clamping-function.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory.js.map", "export {};\n//# sourceMappingURL=wrap-audio-buffer-source-node-stop-method-nullified-buffer-function.js.map", "export {};\n//# sourceMappingURL=wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function.js.map", "export {};\n//# sourceMappingURL=wrap-channel-merger-node-factory.js.map", "export {};\n//# sourceMappingURL=wrap-channel-merger-node-function.js.map", "export {};\n//# sourceMappingURL=wrap-event-listener-function.js.map", "export * from './abort-error-factory';\nexport * from './active-audio-worklet-node-inputs-store';\nexport * from './active-input-connection';\nexport * from './add-active-input-connection-to-audio-node-factory';\nexport * from './add-active-input-connection-to-audio-node-function';\nexport * from './add-audio-node-connections-factory';\nexport * from './add-audio-node-connections-function';\nexport * from './add-audio-param-connections-factory';\nexport * from './add-audio-param-connections-function';\nexport * from './add-audio-worklet-module-factory';\nexport * from './add-audio-worklet-module-function';\nexport * from './add-connection-to-audio-node-factory';\nexport * from './add-connection-to-audio-node-function';\nexport * from './add-passive-input-connection-to-audio-node-factory';\nexport * from './add-passive-input-connection-to-audio-node-function';\nexport * from './add-silent-connection-factory';\nexport * from './add-silent-connection-function';\nexport * from './add-unrendered-audio-worklet-node-factory';\nexport * from './add-unrendered-audio-worklet-node-function';\nexport * from './analyser-node-constructor';\nexport * from './analyser-node-constructor-factory';\nexport * from './analyser-node-renderer-factory';\nexport * from './analyser-node-renderer-factory-factory';\nexport * from './any-audio-buffer';\nexport * from './any-context';\nexport * from './audio-buffer-constructor';\nexport * from './audio-buffer-constructor-factory';\nexport * from './audio-buffer-source-node-constructor';\nexport * from './audio-buffer-source-node-constructor-factory';\nexport * from './audio-buffer-source-node-renderer';\nexport * from './audio-buffer-source-node-renderer-factory';\nexport * from './audio-buffer-source-node-renderer-factory-factory';\nexport * from './audio-buffer-store';\nexport * from './audio-context-constructor';\nexport * from './audio-context-constructor-factory';\nexport * from './audio-context-latency-category';\nexport * from './audio-context-state';\nexport * from './audio-destination-node-constructor';\nexport * from './audio-destination-node-constructor-factory';\nexport * from './audio-destination-node-renderer-factory';\nexport * from './audio-listener-factory';\nexport * from './audio-listener-factory-factory';\nexport * from './audio-node-connections';\nexport * from './audio-node-connections-store';\nexport * from './audio-node-constructor';\nexport * from './audio-node-constructor-factory';\nexport * from './audio-node-output-connection';\nexport * from './audio-node-renderer';\nexport * from './audio-node-store';\nexport * from './audio-node-tail-time-store';\nexport * from './audio-param-audio-node-store';\nexport * from './audio-param-connections';\nexport * from './audio-param-connections-store';\nexport * from './audio-param-factory';\nexport * from './audio-param-factory-factory';\nexport * from './audio-param-map';\nexport * from './audio-param-output-connection';\nexport * from './audio-param-renderer-factory';\nexport * from './audio-param-store';\nexport * from './audio-worklet-node-constructor';\nexport * from './audio-worklet-node-constructor-factory';\nexport * from './audio-worklet-node-renderer-factory';\nexport * from './audio-worklet-node-renderer-factory-factory';\nexport * from './backup-offline-audio-context-store';\nexport * from './base-audio-context-constructor';\nexport * from './base-audio-context-constructor-factory';\nexport * from './biquad-filter-node-constructor';\nexport * from './biquad-filter-node-constructor-factory';\nexport * from './biquad-filter-node-renderer-factory';\nexport * from './biquad-filter-node-renderer-factory-factory';\nexport * from './biquad-filter-type';\nexport * from './channel-count-mode';\nexport * from './channel-interpretation';\nexport * from './channel-merger-node-constructor';\nexport * from './channel-merger-node-constructor-factory';\nexport * from './channel-merger-node-renderer-factory';\nexport * from './channel-merger-node-renderer-factory-factory';\nexport * from './channel-splitter-node-constructor';\nexport * from './channel-splitter-node-constructor-factory';\nexport * from './channel-splitter-node-renderer-factory';\nexport * from './channel-splitter-node-renderer-factory-factory';\nexport * from './cache-test-result-factory';\nexport * from './cache-test-result-function';\nexport * from './connect-audio-param-factory';\nexport * from './connect-audio-param-function';\nexport * from './connect-multiple-outputs-factory';\nexport * from './connect-multiple-outputs-function';\nexport * from './connect-native-audio-node-to-native-audio-node-function';\nexport * from './connected-native-audio-buffer-source-node-factory';\nexport * from './connected-native-audio-buffer-source-node-factory-factory';\nexport * from './constant-source-node-constructor';\nexport * from './constant-source-node-constructor-factory';\nexport * from './constant-source-node-renderer';\nexport * from './constant-source-node-renderer-factory';\nexport * from './constant-source-node-renderer-factory-factory';\nexport * from './constructor';\nexport * from './context';\nexport * from './context-store';\nexport * from './convert-number-to-unsigned-long-factory';\nexport * from './convert-number-to-unsigned-long-function';\nexport * from './convolver-node-constructor';\nexport * from './convolver-node-constructor-factory';\nexport * from './convolver-node-renderer-factory';\nexport * from './convolver-node-renderer-factory-factory';\nexport * from './create-native-offline-audio-context-factory';\nexport * from './create-native-offline-audio-context-function';\nexport * from './cycle-counters';\nexport * from './data-clone-error-factory';\nexport * from './decode-audio-data-factory';\nexport * from './decode-audio-data-function';\nexport * from './decode-error-callback';\nexport * from './decode-success-callback';\nexport * from './decrement-cycle-counter-factory';\nexport * from './decrement-cycle-counter-function';\nexport * from './delay-node-constructor';\nexport * from './delay-node-constructor-factory';\nexport * from './delay-node-renderer-factory';\nexport * from './delay-node-renderer-factory-factory';\nexport * from './delete-active-input-connection-to-audio-node-factory';\nexport * from './delete-active-input-connection-to-audio-node-function';\nexport * from './delete-unrendered-audio-worklet-node-factory';\nexport * from './delete-unrendered-audio-worklet-node-function';\nexport * from './detect-cycles-factory';\nexport * from './detect-cycles-function';\nexport * from './disconnect-multiple-outputs-factory';\nexport * from './disconnect-multiple-outputs-function';\nexport * from './disconnect-native-audio-node-from-native-audio-node-function';\nexport * from './distance-model-type';\nexport * from './dynamics-compressor-node-constructor';\nexport * from './dynamics-compressor-node-constructor-factory';\nexport * from './dynamics-compressor-node-renderer-factory';\nexport * from './dynamics-compressor-node-renderer-factory-factory';\nexport * from './encoding-error-factory';\nexport * from './error-event-handler';\nexport * from './evaluate-audio-worklet-global-scope-function';\nexport * from './evaluate-source-factory';\nexport * from './evaluate-source-function';\nexport * from './event-handler';\nexport * from './event-target-constructor';\nexport * from './event-target-constructor-factory';\nexport * from './expose-current-frame-and-current-time-factory';\nexport * from './expose-current-frame-and-current-time-function';\nexport * from './fetch-source-factory';\nexport * from './fetch-source-function';\nexport * from './gain-node-constructor';\nexport * from './gain-node-constructor-factory';\nexport * from './gain-node-renderer-factory';\nexport * from './gain-node-renderer-factory-factory';\nexport * from './get-active-audio-worklet-node-inputs-factory';\nexport * from './get-active-audio-worklet-node-inputs-function';\nexport * from './get-audio-node-connections-function';\nexport * from './get-audio-node-renderer-factory';\nexport * from './get-audio-node-renderer-function';\nexport * from './get-audio-node-tail-time-factory';\nexport * from './get-audio-node-tail-time-function';\nexport * from './get-audio-param-connections-function';\nexport * from './get-audio-param-renderer-factory';\nexport * from './get-audio-param-renderer-function';\nexport * from './get-backup-offline-audio-context-factory';\nexport * from './get-backup-offline-audio-context-function';\nexport * from './get-event-listeners-of-audio-node-function';\nexport * from './get-first-sample-function';\nexport * from './get-native-audio-node-function';\nexport * from './get-native-audio-param-function';\nexport * from './get-native-context-factory';\nexport * from './get-native-context-function';\nexport * from './get-or-create-backup-offline-audio-context-factory';\nexport * from './get-or-create-backup-offline-audio-context-function';\nexport * from './get-unrendered-audio-worklet-nodes-factory';\nexport * from './get-unrendered-audio-worklet-nodes-function';\nexport * from './get-value-for-key-function';\nexport * from './iir-filter-node-constructor';\nexport * from './iir-filter-node-constructor-factory';\nexport * from './iir-filter-node-renderer-factory';\nexport * from './iir-filter-node-renderer-factory-factory';\nexport * from './increment-cycle-counter-factory';\nexport * from './increment-cycle-counter-factory-factory';\nexport * from './increment-cycle-counter-function';\nexport * from './index-size-error-factory';\nexport * from './insert-element-in-set-function';\nexport * from './internal-state-event-listener';\nexport * from './invalid-access-error-factory';\nexport * from './invalid-state-error-factory';\nexport * from './is-active-audio-node-function';\nexport * from './is-any-audio-context-factory';\nexport * from './is-any-audio-context-function';\nexport * from './is-any-audio-node-factory';\nexport * from './is-any-audio-node-function';\nexport * from './is-any-audio-param-factory';\nexport * from './is-any-audio-param-function';\nexport * from './is-any-offline-audio-context-factory';\nexport * from './is-any-offline-audio-context-function';\nexport * from './is-dc-curve-function';\nexport * from './is-native-audio-context-factory';\nexport * from './is-native-audio-context-function';\nexport * from './is-native-audio-node-factory';\nexport * from './is-native-audio-node-function';\nexport * from './is-native-audio-param-factory';\nexport * from './is-native-audio-param-function';\nexport * from './is-native-context-factory';\nexport * from './is-native-context-function';\nexport * from './is-native-offline-audio-context-factory';\nexport * from './is-native-offline-audio-context-function';\nexport * from './is-part-of-a-cycle-function';\nexport * from './is-passive-audio-node-function';\nexport * from './is-secure-context-factory';\nexport * from './is-supported-promise-factory';\nexport * from './media-element-audio-source-node-constructor';\nexport * from './media-element-audio-source-node-constructor-factory';\nexport * from './media-stream-audio-destination-node-constructor';\nexport * from './media-stream-audio-destination-node-constructor-factory';\nexport * from './media-stream-audio-source-node-constructor';\nexport * from './media-stream-audio-source-node-constructor-factory';\nexport * from './media-stream-track-audio-source-node-constructor';\nexport * from './media-stream-track-audio-source-node-constructor-factory';\nexport * from './minimal-audio-context-constructor';\nexport * from './minimal-audio-context-constructor-factory';\nexport * from './minimal-base-audio-context-constructor';\nexport * from './minimal-base-audio-context-constructor-factory';\nexport * from './minimal-offline-audio-context-constructor';\nexport * from './minimal-offline-audio-context-constructor-factory';\nexport * from './monitor-connections-factory';\nexport * from './monitor-connections-function';\nexport * from './native-analyser-node';\nexport * from './native-analyser-node-factory';\nexport * from './native-analyser-node-factory-factory';\nexport * from './native-audio-buffer';\nexport * from './native-audio-buffer-constructor';\nexport * from './native-audio-buffer-constructor-factory';\nexport * from './native-audio-buffer-source-node';\nexport * from './native-audio-buffer-source-node-factory';\nexport * from './native-audio-buffer-source-node-factory-factory';\nexport * from './native-audio-context';\nexport * from './native-audio-context-constructor';\nexport * from './native-audio-context-constructor-factory';\nexport * from './native-audio-destination-node';\nexport * from './native-audio-destination-node-factory';\nexport * from './native-audio-destination-node-factory-factory';\nexport * from './native-audio-listener';\nexport * from './native-audio-node';\nexport * from './native-audio-param';\nexport * from './native-audio-param-map';\nexport * from './native-audio-worklet';\nexport * from './native-audio-worklet-node';\nexport * from './native-audio-worklet-node-constructor';\nexport * from './native-audio-worklet-node-constructor-factory';\nexport * from './native-audio-worklet-node-factory';\nexport * from './native-audio-worklet-node-factory-factory';\nexport * from './native-audio-worklet-node-faker-factory';\nexport * from './native-audio-worklet-node-faker-factory-factory';\nexport * from './native-audio-worklet-node-options';\nexport * from './native-biquad-filter-node';\nexport * from './native-biquad-filter-node-factory';\nexport * from './native-channel-merger-node';\nexport * from './native-channel-merger-node-factory';\nexport * from './native-channel-merger-node-factory-factory';\nexport * from './native-channel-splitter-node';\nexport * from './native-channel-splitter-node-factory';\nexport * from './native-constant-source-node';\nexport * from './native-constant-source-node-factory';\nexport * from './native-constant-source-node-factory-factory';\nexport * from './native-constant-source-node-faker-factory';\nexport * from './native-constant-source-node-faker-factory-factory';\nexport * from './native-context';\nexport * from './native-convolver-node';\nexport * from './native-convolver-node-factory';\nexport * from './native-convolver-node-factory-factory';\nexport * from './native-delay-node-factory';\nexport * from './native-delay-node';\nexport * from './native-dynamics-compressor-node';\nexport * from './native-dynamics-compressor-node-factory';\nexport * from './native-dynamics-compressor-node-factory-factory';\nexport * from './native-event-target';\nexport * from './native-gain-node';\nexport * from './native-gain-node-factory';\nexport * from './native-iir-filter-node';\nexport * from './native-iir-filter-node-factory';\nexport * from './native-iir-filter-node-factory-factory';\nexport * from './native-iir-filter-node-faker-factory';\nexport * from './native-iir-filter-node-faker-factory-factory';\nexport * from './native-media-element-audio-source-node';\nexport * from './native-media-element-audio-source-node-factory';\nexport * from './native-media-stream-audio-destination-node';\nexport * from './native-media-stream-audio-destination-node-factory';\nexport * from './native-media-stream-audio-source-node';\nexport * from './native-media-stream-audio-source-node-factory';\nexport * from './native-media-stream-track-audio-source-node';\nexport * from './native-media-stream-track-audio-source-node-factory';\nexport * from './native-media-stream-track-audio-source-node-factory-factory';\nexport * from './native-offline-audio-context';\nexport * from './native-offline-audio-context-constructor';\nexport * from './native-offline-audio-context-constructor-factory';\nexport * from './native-oscillator-node';\nexport * from './native-oscillator-node-factory';\nexport * from './native-oscillator-node-factory-factory';\nexport * from './native-panner-node';\nexport * from './native-panner-node-factory';\nexport * from './native-panner-node-factory-factory';\nexport * from './native-panner-node-faker-factory';\nexport * from './native-panner-node-faker-factory-factory';\nexport * from './native-periodic-wave';\nexport * from './native-periodic-wave-factory';\nexport * from './native-periodic-wave-factory-factory';\nexport * from './native-script-processor-node';\nexport * from './native-script-processor-node-factory';\nexport * from './native-stereo-panner-node';\nexport * from './native-stereo-panner-node-factory';\nexport * from './native-stereo-panner-node-factory-factory';\nexport * from './native-stereo-panner-node-faker-factory';\nexport * from './native-stereo-panner-node-faker-factory-factory';\nexport * from './native-wave-shaper-node';\nexport * from './native-wave-shaper-node-factory';\nexport * from './native-wave-shaper-node-factory-factory';\nexport * from './native-wave-shaper-node-faker-factory';\nexport * from './native-wave-shaper-node-faker-factory-factory';\nexport * from './not-supported-error-factory';\nexport * from './offline-audio-context-constructor-factory';\nexport * from './oscillator-node-constructor';\nexport * from './oscillator-node-constructor-factory';\nexport * from './oscillator-node-renderer';\nexport * from './oscillator-node-renderer-factory';\nexport * from './oscillator-node-renderer-factory-factory';\nexport * from './oscillator-type';\nexport * from './output-connection';\nexport * from './over-sample-type';\nexport * from './overwrite-accessors-function';\nexport * from './panner-node-constructor';\nexport * from './panner-node-constructor-factory';\nexport * from './panner-node-renderer-factory';\nexport * from './panner-node-renderer-factory-factory';\nexport * from './panning-model-type';\nexport * from './passive-audio-node-input-connection';\nexport * from './passive-audio-param-input-connection';\nexport * from './periodic-wave-constructor';\nexport * from './periodic-wave-constructor-factory';\nexport * from './pick-element-from-set-function';\nexport * from './render-automation-factory';\nexport * from './render-automation-function';\nexport * from './render-inputs-of-audio-node-factory';\nexport * from './render-inputs-of-audio-node-function';\nexport * from './render-inputs-of-audio-param-factory';\nexport * from './render-inputs-of-audio-param-function';\nexport * from './render-native-offline-audio-context-factory';\nexport * from './render-native-offline-audio-context-function';\nexport * from './sanitize-audio-worklet-node-options-function';\nexport * from './sanitize-channel-splitter-options-function';\nexport * from './sanitize-periodic-wave-options-function';\nexport * from './set-active-audio-worklet-node-inputs-factory';\nexport * from './set-active-audio-worklet-node-inputs-function';\nexport * from './set-audio-node-tail-time-factory';\nexport * from './set-audio-node-tail-time-function';\nexport * from './set-value-at-time-until-possible-function';\nexport * from './start-rendering-factory';\nexport * from './start-rendering-function';\nexport * from './stereo-panner-node-constructor';\nexport * from './stereo-panner-node-constructor-factory';\nexport * from './stereo-panner-node-renderer-factory-factory';\nexport * from './stereo-panner-node-renderer-factory';\nexport * from './test-audio-buffer-copy-channel-methods-subarray-support-factory';\nexport * from './test-audio-buffer-constructor-support-factory';\nexport * from './test-audio-context-close-method-support-factory';\nexport * from './test-audio-context-decode-audio-data-method-type-error-support-factory';\nexport * from './test-audio-context-options-support-factory';\nexport * from './test-audio-node-connect-method-support-factory';\nexport * from './test-audio-worklet-node-options-clonability-function';\nexport * from './test-audio-worklet-processor-no-outputs-support-factory';\nexport * from './test-audio-worklet-processor-post-message-support-factory';\nexport * from './test-channel-merger-node-channel-count-support-factory';\nexport * from './test-constant-source-node-accurate-scheduling-support-factory';\nexport * from './test-convolver-node-buffer-reassignability-support-factory';\nexport * from './test-convolver-node-channel-count-support-factory';\nexport * from './test-is-secure-context-support-factory';\nexport * from './test-media-stream-audio-source-node-media-stream-without-audio-track-support';\nexport * from './test-offline-audio-context-current-time-support-factory';\nexport * from './test-stereo-panner-node-default-value-support-factory';\nexport * from './unknown-error-factory';\nexport * from './unrendered-audio-worklet-node-store';\nexport * from './unrendered-audio-worklet-nodes';\nexport * from './wave-shaper-node-constructor';\nexport * from './wave-shaper-node-constructor-factory';\nexport * from './wave-shaper-node-renderer-factory-factory';\nexport * from './wave-shaper-node-renderer-factory';\nexport * from './window';\nexport * from './window-factory';\nexport * from './wrap-audio-buffer-copy-channel-methods-factory';\nexport * from './wrap-audio-buffer-copy-channel-methods-function';\nexport * from './wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory';\nexport * from './wrap-audio-buffer-copy-channel-methods-out-of-bounds-function';\nexport * from './wrap-audio-buffer-source-node-start-method-offset-clamping-function';\nexport * from './wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory';\nexport * from './wrap-audio-buffer-source-node-stop-method-nullified-buffer-function';\nexport * from './wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function';\nexport * from './wrap-channel-merger-node-factory';\nexport * from './wrap-channel-merger-node-function';\nexport * from './wrap-event-listener-function';\n", "import {\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent\n} from 'automation-events';\nimport { createAbortError } from './factories/abort-error';\nimport { createAddActiveInputConnectionToAudioNode } from './factories/add-active-input-connection-to-audio-node';\nimport { createAddAudioNodeConnections } from './factories/add-audio-node-connections';\nimport { createAddAudioParamConnections } from './factories/add-audio-param-connections';\nimport { createAddAudioWorkletModule } from './factories/add-audio-worklet-module';\nimport { createAddConnectionToAudioNode } from './factories/add-connection-to-audio-node';\nimport { createAddPassiveInputConnectionToAudioNode } from './factories/add-passive-input-connection-to-audio-node';\nimport { createAddSilentConnection } from './factories/add-silent-connection';\nimport { createAddUnrenderedAudioWorkletNode } from './factories/add-unrendered-audio-worklet-node';\nimport { createAnalyserNodeConstructor } from './factories/analyser-node-constructor';\nimport { createAnalyserNodeRendererFactory } from './factories/analyser-node-renderer-factory';\nimport { createAudioBufferConstructor } from './factories/audio-buffer-constructor';\nimport { createAudioBufferSourceNodeConstructor } from './factories/audio-buffer-source-node-constructor';\nimport { createAudioBufferSourceNodeRendererFactory } from './factories/audio-buffer-source-node-renderer-factory';\nimport { createAudioContextConstructor } from './factories/audio-context-constructor';\nimport { createAudioDestinationNodeConstructor } from './factories/audio-destination-node-constructor';\nimport { createAudioDestinationNodeRenderer } from './factories/audio-destination-node-renderer-factory';\nimport { createAudioListenerFactory } from './factories/audio-listener-factory';\nimport { createAudioNodeConstructor } from './factories/audio-node-constructor';\nimport { createAudioParamFactory } from './factories/audio-param-factory';\nimport { createAudioParamRenderer } from './factories/audio-param-renderer';\nimport { createAudioWorkletNodeConstructor } from './factories/audio-worklet-node-constructor';\nimport { createAudioWorkletNodeRendererFactory } from './factories/audio-worklet-node-renderer-factory';\nimport { createBaseAudioContextConstructor } from './factories/base-audio-context-constructor';\nimport { createBiquadFilterNodeConstructor } from './factories/biquad-filter-node-constructor';\nimport { createBiquadFilterNodeRendererFactory } from './factories/biquad-filter-node-renderer-factory';\nimport { createCacheTestResult } from './factories/cache-test-result';\nimport { createChannelMergerNodeConstructor } from './factories/channel-merger-node-constructor';\nimport { createChannelMergerNodeRendererFactory } from './factories/channel-merger-node-renderer-factory';\nimport { createChannelSplitterNodeConstructor } from './factories/channel-splitter-node-constructor';\nimport { createChannelSplitterNodeRendererFactory } from './factories/channel-splitter-node-renderer-factory';\nimport { createConnectAudioParam } from './factories/connect-audio-param';\nimport { createConnectMultipleOutputs } from './factories/connect-multiple-outputs';\nimport { createConnectedNativeAudioBufferSourceNodeFactory } from './factories/connected-native-audio-buffer-source-node-factory';\nimport { createConstantSourceNodeConstructor } from './factories/constant-source-node-constructor';\nimport { createConstantSourceNodeRendererFactory } from './factories/constant-source-node-renderer-factory';\nimport { createConvertNumberToUnsignedLong } from './factories/convert-number-to-unsigned-long';\nimport { createConvolverNodeConstructor } from './factories/convolver-node-constructor';\nimport { createConvolverNodeRendererFactory } from './factories/convolver-node-renderer-factory';\nimport { createCreateNativeOfflineAudioContext } from './factories/create-native-offline-audio-context';\nimport { createDataCloneError } from './factories/data-clone-error';\nimport { createDecodeAudioData } from './factories/decode-audio-data';\nimport { createDecrementCycleCounter } from './factories/decrement-cycle-counter';\nimport { createDelayNodeConstructor } from './factories/delay-node-constructor';\nimport { createDelayNodeRendererFactory } from './factories/delay-node-renderer-factory';\nimport { createDeleteActiveInputConnectionToAudioNode } from './factories/delete-active-input-connection-to-audio-node';\nimport { createDeleteUnrenderedAudioWorkletNode } from './factories/delete-unrendered-audio-worklet-node';\nimport { createDetectCycles } from './factories/detect-cycles';\nimport { createDisconnectMultipleOutputs } from './factories/disconnect-multiple-outputs';\nimport { createDynamicsCompressorNodeConstructor } from './factories/dynamics-compressor-node-constructor';\nimport { createDynamicsCompressorNodeRendererFactory } from './factories/dynamics-compressor-node-renderer-factory';\nimport { createEncodingError } from './factories/encoding-error';\nimport { createEvaluateSource } from './factories/evaluate-source';\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\nimport { createExposeCurrentFrameAndCurrentTime } from './factories/expose-current-frame-and-current-time';\nimport { createFetchSource } from './factories/fetch-source';\nimport { createGainNodeConstructor } from './factories/gain-node-constructor';\nimport { createGainNodeRendererFactory } from './factories/gain-node-renderer-factory';\nimport { createGetActiveAudioWorkletNodeInputs } from './factories/get-active-audio-worklet-node-inputs';\nimport { createGetAudioNodeRenderer } from './factories/get-audio-node-renderer';\nimport { createGetAudioNodeTailTime } from './factories/get-audio-node-tail-time';\nimport { createGetAudioParamRenderer } from './factories/get-audio-param-renderer';\nimport { createGetBackupOfflineAudioContext } from './factories/get-backup-offline-audio-context';\nimport { createGetNativeContext } from './factories/get-native-context';\nimport { createGetOrCreateBackupOfflineAudioContext } from './factories/get-or-create-backup-offline-audio-context';\nimport { createGetUnrenderedAudioWorkletNodes } from './factories/get-unrendered-audio-worklet-nodes';\nimport { createIIRFilterNodeConstructor } from './factories/iir-filter-node-constructor';\nimport { createIIRFilterNodeRendererFactory } from './factories/iir-filter-node-renderer-factory';\nimport { createIncrementCycleCounterFactory } from './factories/increment-cycle-counter-factory';\nimport { createIndexSizeError } from './factories/index-size-error';\nimport { createInvalidAccessError } from './factories/invalid-access-error';\nimport { createInvalidStateError } from './factories/invalid-state-error';\nimport { createIsAnyAudioContext } from './factories/is-any-audio-context';\nimport { createIsAnyAudioNode } from './factories/is-any-audio-node';\nimport { createIsAnyAudioParam } from './factories/is-any-audio-param';\nimport { createIsAnyOfflineAudioContext } from './factories/is-any-offline-audio-context';\nimport { createIsNativeAudioContext } from './factories/is-native-audio-context';\nimport { createIsNativeAudioNode } from './factories/is-native-audio-node';\nimport { createIsNativeAudioParam } from './factories/is-native-audio-param';\nimport { createIsNativeContext } from './factories/is-native-context';\nimport { createIsNativeOfflineAudioContext } from './factories/is-native-offline-audio-context';\nimport { createIsSecureContext } from './factories/is-secure-context';\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\nimport { createMediaElementAudioSourceNodeConstructor } from './factories/media-element-audio-source-node-constructor';\nimport { createMediaStreamAudioDestinationNodeConstructor } from './factories/media-stream-audio-destination-node-constructor';\nimport { createMediaStreamAudioSourceNodeConstructor } from './factories/media-stream-audio-source-node-constructor';\nimport { createMediaStreamTrackAudioSourceNodeConstructor } from './factories/media-stream-track-audio-source-node-constructor';\nimport { createMinimalAudioContextConstructor } from './factories/minimal-audio-context-constructor';\nimport { createMinimalBaseAudioContextConstructor } from './factories/minimal-base-audio-context-constructor';\nimport { createMinimalOfflineAudioContextConstructor } from './factories/minimal-offline-audio-context-constructor';\nimport { createMonitorConnections } from './factories/monitor-connections';\nimport { createNativeAnalyserNodeFactory } from './factories/native-analyser-node-factory';\nimport { createNativeAudioBufferConstructor } from './factories/native-audio-buffer-constructor';\nimport { createNativeAudioBufferSourceNodeFactory } from './factories/native-audio-buffer-source-node-factory';\nimport { createNativeAudioContextConstructor } from './factories/native-audio-context-constructor';\nimport { createNativeAudioDestinationNodeFactory } from './factories/native-audio-destination-node';\nimport { createNativeAudioWorkletNodeConstructor } from './factories/native-audio-worklet-node-constructor';\nimport { createNativeAudioWorkletNodeFactory } from './factories/native-audio-worklet-node-factory';\nimport { createNativeAudioWorkletNodeFakerFactory } from './factories/native-audio-worklet-node-faker-factory';\nimport { createNativeBiquadFilterNode } from './factories/native-biquad-filter-node';\nimport { createNativeChannelMergerNodeFactory } from './factories/native-channel-merger-node-factory';\nimport { createNativeChannelSplitterNode } from './factories/native-channel-splitter-node';\nimport { createNativeConstantSourceNodeFactory } from './factories/native-constant-source-node-factory';\nimport { createNativeConstantSourceNodeFakerFactory } from './factories/native-constant-source-node-faker-factory';\nimport { createNativeConvolverNodeFactory } from './factories/native-convolver-node-factory';\nimport { createNativeDelayNode } from './factories/native-delay-node';\nimport { createNativeDynamicsCompressorNodeFactory } from './factories/native-dynamics-compressor-node-factory';\nimport { createNativeGainNode } from './factories/native-gain-node';\nimport { createNativeIIRFilterNodeFactory } from './factories/native-iir-filter-node-factory';\nimport { createNativeIIRFilterNodeFakerFactory } from './factories/native-iir-filter-node-faker-factory';\nimport { createNativeMediaElementAudioSourceNode } from './factories/native-media-element-audio-source-node';\nimport { createNativeMediaStreamAudioDestinationNode } from './factories/native-media-stream-audio-destination-node';\nimport { createNativeMediaStreamAudioSourceNode } from './factories/native-media-stream-audio-source-node';\nimport { createNativeMediaStreamTrackAudioSourceNodeFactory } from './factories/native-media-stream-track-audio-source-node-factory';\nimport { createNativeOfflineAudioContextConstructor } from './factories/native-offline-audio-context-constructor';\nimport { createNativeOscillatorNodeFactory } from './factories/native-oscillator-node-factory';\nimport { createNativePannerNodeFactory } from './factories/native-panner-node-factory';\nimport { createNativePannerNodeFakerFactory } from './factories/native-panner-node-faker-factory';\nimport { createNativePeriodicWaveFactory } from './factories/native-periodic-wave-factory';\nimport { createNativeScriptProcessorNode } from './factories/native-script-processor-node';\nimport { createNativeStereoPannerNodeFactory } from './factories/native-stereo-panner-node-factory';\nimport { createNativeStereoPannerNodeFakerFactory } from './factories/native-stereo-panner-node-faker-factory';\nimport { createNativeWaveShaperNodeFactory } from './factories/native-wave-shaper-node-factory';\nimport { createNativeWaveShaperNodeFakerFactory } from './factories/native-wave-shaper-node-faker-factory';\nimport { createNotSupportedError } from './factories/not-supported-error';\nimport { createOfflineAudioContextConstructor } from './factories/offline-audio-context-constructor';\nimport { createOscillatorNodeConstructor } from './factories/oscillator-node-constructor';\nimport { createOscillatorNodeRendererFactory } from './factories/oscillator-node-renderer-factory';\nimport { createPannerNodeConstructor } from './factories/panner-node-constructor';\nimport { createPannerNodeRendererFactory } from './factories/panner-node-renderer-factory';\nimport { createPeriodicWaveConstructor } from './factories/periodic-wave-constructor';\nimport { createRenderAutomation } from './factories/render-automation';\nimport { createRenderInputsOfAudioNode } from './factories/render-inputs-of-audio-node';\nimport { createRenderInputsOfAudioParam } from './factories/render-inputs-of-audio-param';\nimport { createRenderNativeOfflineAudioContext } from './factories/render-native-offline-audio-context';\nimport { createSetActiveAudioWorkletNodeInputs } from './factories/set-active-audio-worklet-node-inputs';\nimport { createSetAudioNodeTailTime } from './factories/set-audio-node-tail-time';\nimport { createStartRendering } from './factories/start-rendering';\nimport { createStereoPannerNodeConstructor } from './factories/stereo-panner-node-constructor';\nimport { createStereoPannerNodeRendererFactory } from './factories/stereo-panner-node-renderer-factory';\nimport { createTestAudioBufferConstructorSupport } from './factories/test-audio-buffer-constructor-support';\nimport { createTestAudioBufferCopyChannelMethodsSubarraySupport } from './factories/test-audio-buffer-copy-channel-methods-subarray-support';\nimport { createTestAudioContextCloseMethodSupport } from './factories/test-audio-context-close-method-support';\nimport { createTestAudioContextDecodeAudioDataMethodTypeErrorSupport } from './factories/test-audio-context-decode-audio-data-method-type-error-support';\nimport { createTestAudioContextOptionsSupport } from './factories/test-audio-context-options-support';\nimport { createTestAudioNodeConnectMethodSupport } from './factories/test-audio-node-connect-method-support';\nimport { createTestAudioWorkletProcessorNoOutputsSupport } from './factories/test-audio-worklet-processor-no-outputs-support';\nimport { createTestAudioWorkletProcessorPostMessageSupport } from './factories/test-audio-worklet-processor-post-message-support';\nimport { createTestChannelMergerNodeChannelCountSupport } from './factories/test-channel-merger-node-channel-count-support';\nimport { createTestConstantSourceNodeAccurateSchedulingSupport } from './factories/test-constant-source-node-accurate-scheduling-support';\nimport { createTestConvolverNodeBufferReassignabilitySupport } from './factories/test-convolver-node-buffer-reassignability-support';\nimport { createTestConvolverNodeChannelCountSupport } from './factories/test-convolver-node-channel-count-support';\nimport { createTestIsSecureContextSupport } from './factories/test-is-secure-context-support';\nimport { createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport } from './factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support';\nimport { createTestOfflineAudioContextCurrentTimeSupport } from './factories/test-offline-audio-context-current-time-support';\nimport { createTestStereoPannerNodeDefaultValueSupport } from './factories/test-stereo-panner-node-default-value-support';\nimport { createUnknownError } from './factories/unknown-error';\nimport { createWaveShaperNodeConstructor } from './factories/wave-shaper-node-constructor';\nimport { createWaveShaperNodeRendererFactory } from './factories/wave-shaper-node-renderer-factory';\nimport { createWindow } from './factories/window';\nimport { createWrapAudioBufferCopyChannelMethods } from './factories/wrap-audio-buffer-copy-channel-methods';\nimport { createWrapAudioBufferCopyChannelMethodsOutOfBounds } from './factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds';\nimport { createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer } from './factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer';\nimport { createWrapChannelMergerNode } from './factories/wrap-channel-merger-node';\nimport {\n    AUDIO_NODE_CONNECTIONS_STORE,\n    AUDIO_NODE_STORE,\n    AUDIO_PARAM_CONNECTIONS_STORE,\n    AUDIO_PARAM_STORE,\n    CONTEXT_STORE,\n    CYCLE_COUNTERS\n} from './globals';\nimport { connectNativeAudioNodeToNativeAudioNode } from './helpers/connect-native-audio-node-to-native-audio-node';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from './helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from './helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from './helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from './helpers/get-event-listeners-of-audio-node';\nimport { getFirstSample } from './helpers/get-first-sample';\nimport { getNativeAudioNode } from './helpers/get-native-audio-node';\nimport { getNativeAudioParam } from './helpers/get-native-audio-param';\nimport { getValueForKey } from './helpers/get-value-for-key';\nimport { insertElementInSet } from './helpers/insert-element-in-set';\nimport { isActiveAudioNode } from './helpers/is-active-audio-node';\nimport { isDCCurve } from './helpers/is-dc-curve';\nimport { isPartOfACycle } from './helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from './helpers/is-passive-audio-node';\nimport { overwriteAccessors } from './helpers/overwrite-accessors';\nimport { pickElementFromSet } from './helpers/pick-element-from-set';\nimport { sanitizeAudioWorkletNodeOptions } from './helpers/sanitize-audio-worklet-node-options';\nimport { sanitizeChannelSplitterOptions } from './helpers/sanitize-channel-splitter-options';\nimport { sanitizePeriodicWaveOptions } from './helpers/sanitize-periodic-wave-options';\nimport { setValueAtTimeUntilPossible } from './helpers/set-value-at-time-until-possible';\nimport { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from './helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport } from './helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support';\nimport { testAudioBufferSourceNodeStartMethodOffsetClampingSupport } from './helpers/test-audio-buffer-source-node-start-method-offset-clamping-support';\nimport { testAudioBufferSourceNodeStopMethodNullifiedBufferSupport } from './helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support';\nimport { testAudioScheduledSourceNodeStartMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support';\nimport { testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport } from './helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support';\nimport { testAudioScheduledSourceNodeStopMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support';\nimport { testAudioWorkletNodeOptionsClonability } from './helpers/test-audio-worklet-node-options-clonability';\nimport { testDomExceptionConstructorSupport } from './helpers/test-dom-exception-constructor-support';\nimport { testPromiseSupport } from './helpers/test-promise-support';\nimport { testTransferablesSupport } from './helpers/test-transferables-support';\nimport { wrapAudioBufferSourceNodeStartMethodOffsetClamping } from './helpers/wrap-audio-buffer-source-node-start-method-offset-clamping';\nimport { wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls } from './helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls';\nimport { wrapEventListener } from './helpers/wrap-event-listener';\nimport {\n    IAnalyserNode,\n    IAudioBuffer,\n    IAudioBufferSourceNode,\n    IAudioContext,\n    IAudioNode,\n    IAudioWorkletNode,\n    IBiquadFilterNode,\n    IConstantSourceNode,\n    IConvolverNode,\n    IDelayNode,\n    IDynamicsCompressorNode,\n    IGainNode,\n    IIIRFilterNode,\n    IMediaElementAudioSourceNode,\n    IMediaStreamAudioDestinationNode,\n    IMediaStreamAudioSourceNode,\n    IMediaStreamTrackAudioSourceNode,\n    IMinimalAudioContext,\n    IMinimalOfflineAudioContext,\n    IOfflineAudioContext,\n    IOfflineAudioContextConstructor,\n    IOscillatorNode,\n    IPannerNode,\n    IPeriodicWave,\n    IStereoPannerNode,\n    IWaveShaperNode\n} from './interfaces';\nimport {\n    TActiveAudioWorkletNodeInputsStore,\n    TAddAudioWorkletModuleFunction,\n    TAnalyserNodeConstructor,\n    TAudioBufferConstructor,\n    TAudioBufferSourceNodeConstructor,\n    TAudioBufferStore,\n    TAudioContextConstructor,\n    TAudioParamAudioNodeStore,\n    TAudioWorkletNodeConstructor,\n    TBackupOfflineAudioContextStore,\n    TBiquadFilterNodeConstructor,\n    TChannelMergerNodeConstructor,\n    TChannelSplitterNodeConstructor,\n    TConstantSourceNodeConstructor,\n    TContext,\n    TConvolverNodeConstructor,\n    TDecodeAudioDataFunction,\n    TDelayNodeConstructor,\n    TDynamicsCompressorNodeConstructor,\n    TGainNodeConstructor,\n    TIIRFilterNodeConstructor,\n    TMediaElementAudioSourceNodeConstructor,\n    TMediaStreamAudioDestinationNodeConstructor,\n    TMediaStreamAudioSourceNodeConstructor,\n    TMediaStreamTrackAudioSourceNodeConstructor,\n    TMinimalAudioContextConstructor,\n    TMinimalOfflineAudioContextConstructor,\n    TOscillatorNodeConstructor,\n    TPannerNodeConstructor,\n    TPeriodicWaveConstructor,\n    TStereoPannerNodeConstructor,\n    TUnrenderedAudioWorkletNodeStore,\n    TWaveShaperNodeConstructor\n} from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst addActiveInputConnectionToAudioNode = createAddActiveInputConnectionToAudioNode(insertElementInSet);\nconst addPassiveInputConnectionToAudioNode = createAddPassiveInputConnectionToAudioNode(insertElementInSet);\nconst deleteActiveInputConnectionToAudioNode = createDeleteActiveInputConnectionToAudioNode(pickElementFromSet);\nconst audioNodeTailTimeStore = new WeakMap();\nconst getAudioNodeTailTime = createGetAudioNodeTailTime(audioNodeTailTimeStore);\nconst cacheTestResult = createCacheTestResult(new Map(), new WeakMap());\nconst window = createWindow();\nconst createNativeAnalyserNode = createNativeAnalyserNodeFactory(cacheTestResult, createIndexSizeError);\nconst getAudioNodeRenderer = createGetAudioNodeRenderer(getAudioNodeConnections);\nconst renderInputsOfAudioNode = createRenderInputsOfAudioNode(getAudioNodeConnections, getAudioNodeRenderer, isPartOfACycle);\nconst createAnalyserNodeRenderer = createAnalyserNodeRendererFactory(createNativeAnalyserNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst getNativeContext = createGetNativeContext(CONTEXT_STORE);\nconst nativeOfflineAudioContextConstructor = createNativeOfflineAudioContextConstructor(window);\nconst isNativeOfflineAudioContext = createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor);\nconst audioParamAudioNodeStore: TAudioParamAudioNodeStore = new WeakMap();\nconst eventTargetConstructor = createEventTargetConstructor(wrapEventListener);\nconst nativeAudioContextConstructor = createNativeAudioContextConstructor(window);\nconst isNativeAudioContext = createIsNativeAudioContext(nativeAudioContextConstructor);\nconst isNativeAudioNode = createIsNativeAudioNode(window);\nconst isNativeAudioParam = createIsNativeAudioParam(window);\nconst nativeAudioWorkletNodeConstructor = createNativeAudioWorkletNodeConstructor(window);\nconst audioNodeConstructor = createAudioNodeConstructor(\n    createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),\n    createAddConnectionToAudioNode(\n        addActiveInputConnectionToAudioNode,\n        addPassiveInputConnectionToAudioNode,\n        connectNativeAudioNodeToNativeAudioNode,\n        deleteActiveInputConnectionToAudioNode,\n        disconnectNativeAudioNodeFromNativeAudioNode,\n        getAudioNodeConnections,\n        getAudioNodeTailTime,\n        getEventListenersOfAudioNode,\n        getNativeAudioNode,\n        insertElementInSet,\n        isActiveAudioNode,\n        isPartOfACycle,\n        isPassiveAudioNode\n    ),\n    cacheTestResult,\n    createIncrementCycleCounterFactory(\n        CYCLE_COUNTERS,\n        disconnectNativeAudioNodeFromNativeAudioNode,\n        getAudioNodeConnections,\n        getNativeAudioNode,\n        getNativeAudioParam,\n        isActiveAudioNode\n    ),\n    createIndexSizeError,\n    createInvalidAccessError,\n    createNotSupportedError,\n    createDecrementCycleCounter(\n        connectNativeAudioNodeToNativeAudioNode,\n        CYCLE_COUNTERS,\n        getAudioNodeConnections,\n        getNativeAudioNode,\n        getNativeAudioParam,\n        getNativeContext,\n        isActiveAudioNode,\n        isNativeOfflineAudioContext\n    ),\n    createDetectCycles(audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey),\n    eventTargetConstructor,\n    getNativeContext,\n    isNativeAudioContext,\n    isNativeAudioNode,\n    isNativeAudioParam,\n    isNativeOfflineAudioContext,\n    nativeAudioWorkletNodeConstructor\n);\nconst analyserNodeConstructor: TAnalyserNodeConstructor = createAnalyserNodeConstructor(\n    audioNodeConstructor,\n    createAnalyserNodeRenderer,\n    createIndexSizeError,\n    createNativeAnalyserNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\n\ntype analyserNodeConstructor<T extends TContext> = IAnalyserNode<T>;\n\nexport { analyserNodeConstructor as AnalyserNode };\n\nconst audioBufferStore: TAudioBufferStore = new WeakSet();\nconst nativeAudioBufferConstructor = createNativeAudioBufferConstructor(window);\nconst convertNumberToUnsignedLong = createConvertNumberToUnsignedLong(new Uint32Array(1));\nconst wrapAudioBufferCopyChannelMethods = createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong, createIndexSizeError);\nconst wrapAudioBufferCopyChannelMethodsOutOfBounds = createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong);\nconst audioBufferConstructor: TAudioBufferConstructor = createAudioBufferConstructor(\n    audioBufferStore,\n    cacheTestResult,\n    createNotSupportedError,\n    nativeAudioBufferConstructor,\n    nativeOfflineAudioContextConstructor,\n    createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\n\ntype audioBufferConstructor = IAudioBuffer;\n\nexport { audioBufferConstructor as AudioBuffer };\n\nconst addSilentConnection = createAddSilentConnection(createNativeGainNode);\nconst renderInputsOfAudioParam = createRenderInputsOfAudioParam(getAudioNodeRenderer, getAudioParamConnections, isPartOfACycle);\nconst connectAudioParam = createConnectAudioParam(renderInputsOfAudioParam);\nconst createNativeAudioBufferSourceNode = createNativeAudioBufferSourceNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioBufferSourceNodeStartMethodOffsetClamping,\n    createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n);\nconst renderAutomation = createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections), renderInputsOfAudioParam);\nconst createAudioBufferSourceNodeRenderer = createAudioBufferSourceNodeRendererFactory(\n    connectAudioParam,\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst createAudioParam = createAudioParamFactory(\n    createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),\n    audioParamAudioNodeStore,\n    AUDIO_PARAM_STORE,\n    createAudioParamRenderer,\n    createCancelAndHoldAutomationEvent,\n    createCancelScheduledValuesAutomationEvent,\n    createExponentialRampToValueAutomationEvent,\n    createLinearRampToValueAutomationEvent,\n    createSetTargetAutomationEvent,\n    createSetValueAutomationEvent,\n    createSetValueCurveAutomationEvent,\n    nativeAudioContextConstructor,\n    setValueAtTimeUntilPossible\n);\nconst audioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructor = createAudioBufferSourceNodeConstructor(\n    audioNodeConstructor,\n    createAudioBufferSourceNodeRenderer,\n    createAudioParam,\n    createInvalidStateError,\n    createNativeAudioBufferSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\n\ntype audioBufferSourceNodeConstructor<T extends TContext> = IAudioBufferSourceNode<T>;\n\nexport { audioBufferSourceNodeConstructor as AudioBufferSourceNode };\n\nconst audioDestinationNodeConstructor = createAudioDestinationNodeConstructor(\n    audioNodeConstructor,\n    createAudioDestinationNodeRenderer,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeAudioDestinationNodeFactory(createNativeGainNode, overwriteAccessors),\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    renderInputsOfAudioNode\n);\nconst createBiquadFilterNodeRenderer = createBiquadFilterNodeRendererFactory(\n    connectAudioParam,\n    createNativeBiquadFilterNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst setAudioNodeTailTime = createSetAudioNodeTailTime(audioNodeTailTimeStore);\nconst biquadFilterNodeConstructor: TBiquadFilterNodeConstructor = createBiquadFilterNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createBiquadFilterNodeRenderer,\n    createInvalidAccessError,\n    createNativeBiquadFilterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst monitorConnections = createMonitorConnections(insertElementInSet, isNativeAudioNode);\nconst wrapChannelMergerNode = createWrapChannelMergerNode(createInvalidStateError, monitorConnections);\nconst createNativeChannelMergerNode = createNativeChannelMergerNodeFactory(nativeAudioContextConstructor, wrapChannelMergerNode);\nconst createChannelMergerNodeRenderer = createChannelMergerNodeRendererFactory(\n    createNativeChannelMergerNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst channelMergerNodeConstructor: TChannelMergerNodeConstructor = createChannelMergerNodeConstructor(\n    audioNodeConstructor,\n    createChannelMergerNodeRenderer,\n    createNativeChannelMergerNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createChannelSplitterNodeRenderer = createChannelSplitterNodeRendererFactory(\n    createNativeChannelSplitterNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst channelSplitterNodeConstructor: TChannelSplitterNodeConstructor = createChannelSplitterNodeConstructor(\n    audioNodeConstructor,\n    createChannelSplitterNodeRenderer,\n    createNativeChannelSplitterNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    sanitizeChannelSplitterOptions\n);\nconst createNativeConstantSourceNodeFaker = createNativeConstantSourceNodeFakerFactory(\n    addSilentConnection,\n    createNativeAudioBufferSourceNode,\n    createNativeGainNode,\n    monitorConnections\n);\nconst createNativeConstantSourceNode = createNativeConstantSourceNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    createNativeConstantSourceNodeFaker,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\n);\nconst createConstantSourceNodeRenderer = createConstantSourceNodeRendererFactory(\n    connectAudioParam,\n    createNativeConstantSourceNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst constantSourceNodeConstructor: TConstantSourceNodeConstructor = createConstantSourceNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createConstantSourceNodeRenderer,\n    createNativeConstantSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\nconst createNativeConvolverNode = createNativeConvolverNodeFactory(createNotSupportedError, overwriteAccessors);\nconst createConvolverNodeRenderer = createConvolverNodeRendererFactory(\n    createNativeConvolverNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst convolverNodeConstructor: TConvolverNodeConstructor = createConvolverNodeConstructor(\n    audioNodeConstructor,\n    createConvolverNodeRenderer,\n    createNativeConvolverNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createDelayNodeRenderer = createDelayNodeRendererFactory(\n    connectAudioParam,\n    createNativeDelayNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst delayNodeConstructor: TDelayNodeConstructor = createDelayNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createDelayNodeRenderer,\n    createNativeDelayNode,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createNativeDynamicsCompressorNode = createNativeDynamicsCompressorNodeFactory(createNotSupportedError);\nconst createDynamicsCompressorNodeRenderer = createDynamicsCompressorNodeRendererFactory(\n    connectAudioParam,\n    createNativeDynamicsCompressorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst dynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructor = createDynamicsCompressorNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createDynamicsCompressorNodeRenderer,\n    createNativeDynamicsCompressorNode,\n    createNotSupportedError,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createGainNodeRenderer = createGainNodeRendererFactory(\n    connectAudioParam,\n    createNativeGainNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst gainNodeConstructor: TGainNodeConstructor = createGainNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createGainNodeRenderer,\n    createNativeGainNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createNativeIIRFilterNodeFaker = createNativeIIRFilterNodeFakerFactory(\n    createInvalidAccessError,\n    createInvalidStateError,\n    createNativeScriptProcessorNode,\n    createNotSupportedError\n);\nconst renderNativeOfflineAudioContext = createRenderNativeOfflineAudioContext(\n    cacheTestResult,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode, nativeOfflineAudioContextConstructor)\n);\nconst createIIRFilterNodeRenderer = createIIRFilterNodeRendererFactory(\n    createNativeAudioBufferSourceNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst createNativeIIRFilterNode = createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker);\nconst iIRFilterNodeConstructor: TIIRFilterNodeConstructor = createIIRFilterNodeConstructor(\n    audioNodeConstructor,\n    createNativeIIRFilterNode,\n    createIIRFilterNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createAudioListener = createAudioListenerFactory(\n    createAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    getFirstSample,\n    isNativeOfflineAudioContext,\n    overwriteAccessors\n);\nconst unrenderedAudioWorkletNodeStore: TUnrenderedAudioWorkletNodeStore = new WeakMap();\nconst minimalBaseAudioContextConstructor = createMinimalBaseAudioContextConstructor(\n    audioDestinationNodeConstructor,\n    createAudioListener,\n    eventTargetConstructor,\n    isNativeOfflineAudioContext,\n    unrenderedAudioWorkletNodeStore,\n    wrapEventListener\n);\nconst createNativeOscillatorNode = createNativeOscillatorNodeFactory(\n    addSilentConnection,\n    cacheTestResult,\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\n);\nconst createOscillatorNodeRenderer = createOscillatorNodeRendererFactory(\n    connectAudioParam,\n    createNativeOscillatorNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst oscillatorNodeConstructor: TOscillatorNodeConstructor = createOscillatorNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeOscillatorNode,\n    createOscillatorNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    wrapEventListener\n);\nconst createConnectedNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode);\nconst createNativeWaveShaperNodeFaker = createNativeWaveShaperNodeFakerFactory(\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeGainNode,\n    isDCCurve,\n    monitorConnections\n);\nconst createNativeWaveShaperNode = createNativeWaveShaperNodeFactory(\n    createConnectedNativeAudioBufferSourceNode,\n    createInvalidStateError,\n    createNativeWaveShaperNodeFaker,\n    isDCCurve,\n    monitorConnections,\n    nativeAudioContextConstructor,\n    overwriteAccessors\n);\nconst createNativePannerNodeFaker = createNativePannerNodeFakerFactory(\n    connectNativeAudioNodeToNativeAudioNode,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    disconnectNativeAudioNodeFromNativeAudioNode,\n    getFirstSample,\n    monitorConnections\n);\nconst createNativePannerNode = createNativePannerNodeFactory(createNativePannerNodeFaker);\nconst createPannerNodeRenderer = createPannerNodeRendererFactory(\n    connectAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativePannerNode,\n    getNativeAudioNode,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst pannerNodeConstructor: TPannerNodeConstructor = createPannerNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativePannerNode,\n    createPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst createNativePeriodicWave = createNativePeriodicWaveFactory(createIndexSizeError);\nconst periodicWaveConstructor: TPeriodicWaveConstructor = createPeriodicWaveConstructor(\n    createNativePeriodicWave,\n    getNativeContext,\n    new WeakSet(),\n    sanitizePeriodicWaveOptions\n);\nconst nativeStereoPannerNodeFakerFactory = createNativeStereoPannerNodeFakerFactory(\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeGainNode,\n    createNativeWaveShaperNode,\n    createNotSupportedError,\n    monitorConnections\n);\nconst createNativeStereoPannerNode = createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory, createNotSupportedError);\nconst createStereoPannerNodeRenderer = createStereoPannerNodeRendererFactory(\n    connectAudioParam,\n    createNativeStereoPannerNode,\n    getNativeAudioNode,\n    renderAutomation,\n    renderInputsOfAudioNode\n);\nconst stereoPannerNodeConstructor: TStereoPannerNodeConstructor = createStereoPannerNodeConstructor(\n    audioNodeConstructor,\n    createAudioParam,\n    createNativeStereoPannerNode,\n    createStereoPannerNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createWaveShaperNodeRenderer = createWaveShaperNodeRendererFactory(\n    createNativeWaveShaperNode,\n    getNativeAudioNode,\n    renderInputsOfAudioNode\n);\nconst waveShaperNodeConstructor: TWaveShaperNodeConstructor = createWaveShaperNodeConstructor(\n    audioNodeConstructor,\n    createInvalidStateError,\n    createNativeWaveShaperNode,\n    createWaveShaperNodeRenderer,\n    getNativeContext,\n    isNativeOfflineAudioContext,\n    setAudioNodeTailTime\n);\nconst isSecureContext = createIsSecureContext(window);\nconst exposeCurrentFrameAndCurrentTime = createExposeCurrentFrameAndCurrentTime(window);\nconst backupOfflineAudioContextStore: TBackupOfflineAudioContextStore = new WeakMap();\nconst getOrCreateBackupOfflineAudioContext = createGetOrCreateBackupOfflineAudioContext(\n    backupOfflineAudioContextStore,\n    nativeOfflineAudioContextConstructor\n);\n\n// The addAudioWorkletModule() function is only available in a SecureContext.\nexport const addAudioWorkletModule: undefined | TAddAudioWorkletModuleFunction = isSecureContext\n    ? createAddAudioWorkletModule(\n          cacheTestResult,\n          createNotSupportedError,\n          createEvaluateSource(window),\n          exposeCurrentFrameAndCurrentTime,\n          createFetchSource(createAbortError),\n          getNativeContext,\n          getOrCreateBackupOfflineAudioContext,\n          isNativeOfflineAudioContext,\n          nativeAudioWorkletNodeConstructor,\n          new WeakMap(),\n          new WeakMap(),\n          createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\n          // @todo window is guaranteed to be defined because isSecureContext checks that as well.\n          <NonNullable<typeof window>>window\n      )\n    : undefined;\n\nconst isNativeContext = createIsNativeContext(isNativeAudioContext, isNativeOfflineAudioContext);\n\nexport const decodeAudioData: TDecodeAudioDataFunction = createDecodeAudioData(\n    audioBufferStore,\n    cacheTestResult,\n    createDataCloneError,\n    createEncodingError,\n    new WeakSet(),\n    getNativeContext,\n    isNativeContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    testPromiseSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\n\nconst baseAudioContextConstructor = createBaseAudioContextConstructor(\n    addAudioWorkletModule,\n    analyserNodeConstructor,\n    audioBufferConstructor,\n    audioBufferSourceNodeConstructor,\n    biquadFilterNodeConstructor,\n    channelMergerNodeConstructor,\n    channelSplitterNodeConstructor,\n    constantSourceNodeConstructor,\n    convolverNodeConstructor,\n    decodeAudioData,\n    delayNodeConstructor,\n    dynamicsCompressorNodeConstructor,\n    gainNodeConstructor,\n    iIRFilterNodeConstructor,\n    minimalBaseAudioContextConstructor,\n    oscillatorNodeConstructor,\n    pannerNodeConstructor,\n    periodicWaveConstructor,\n    stereoPannerNodeConstructor,\n    waveShaperNodeConstructor\n);\nconst mediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructor = createMediaElementAudioSourceNodeConstructor(\n    audioNodeConstructor,\n    createNativeMediaElementAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst mediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructor =\n    createMediaStreamAudioDestinationNodeConstructor(\n        audioNodeConstructor,\n        createNativeMediaStreamAudioDestinationNode,\n        getNativeContext,\n        isNativeOfflineAudioContext\n    );\nconst mediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructor = createMediaStreamAudioSourceNodeConstructor(\n    audioNodeConstructor,\n    createNativeMediaStreamAudioSourceNode,\n    getNativeContext,\n    isNativeOfflineAudioContext\n);\nconst createNativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNodeFactory(\n    createInvalidStateError,\n    isNativeOfflineAudioContext\n);\nconst mediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructor =\n    createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaStreamTrackAudioSourceNode, getNativeContext);\nconst audioContextConstructor: TAudioContextConstructor = createAudioContextConstructor(\n    baseAudioContextConstructor,\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    mediaElementAudioSourceNodeConstructor,\n    mediaStreamAudioDestinationNodeConstructor,\n    mediaStreamAudioSourceNodeConstructor,\n    mediaStreamTrackAudioSourceNodeConstructor,\n    nativeAudioContextConstructor\n);\n\ntype audioContextConstructor = IAudioContext;\n\nexport { audioContextConstructor as AudioContext };\n\nconst getUnrenderedAudioWorkletNodes = createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore);\nconst addUnrenderedAudioWorkletNode = createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst connectMultipleOutputs = createConnectMultipleOutputs(createIndexSizeError);\nconst deleteUnrenderedAudioWorkletNode = createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst disconnectMultipleOutputs = createDisconnectMultipleOutputs(createIndexSizeError);\nconst activeAudioWorkletNodeInputsStore: TActiveAudioWorkletNodeInputsStore = new WeakMap();\nconst getActiveAudioWorkletNodeInputs = createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore, getValueForKey);\nconst createNativeAudioWorkletNodeFaker = createNativeAudioWorkletNodeFakerFactory(\n    connectMultipleOutputs,\n    createIndexSizeError,\n    createInvalidStateError,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getActiveAudioWorkletNodeInputs,\n    monitorConnections\n);\nconst createNativeAudioWorkletNode = createNativeAudioWorkletNodeFactory(\n    createInvalidStateError,\n    createNativeAudioWorkletNodeFaker,\n    createNativeGainNode,\n    createNotSupportedError,\n    monitorConnections\n);\nconst createAudioWorkletNodeRenderer = createAudioWorkletNodeRendererFactory(\n    connectAudioParam,\n    connectMultipleOutputs,\n    createNativeAudioBufferSourceNode,\n    createNativeChannelMergerNode,\n    createNativeChannelSplitterNode,\n    createNativeConstantSourceNode,\n    createNativeGainNode,\n    deleteUnrenderedAudioWorkletNode,\n    disconnectMultipleOutputs,\n    exposeCurrentFrameAndCurrentTime,\n    getNativeAudioNode,\n    nativeAudioWorkletNodeConstructor,\n    nativeOfflineAudioContextConstructor,\n    renderAutomation,\n    renderInputsOfAudioNode,\n    renderNativeOfflineAudioContext\n);\nconst getBackupOfflineAudioContext = createGetBackupOfflineAudioContext(backupOfflineAudioContextStore);\nconst setActiveAudioWorkletNodeInputs = createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore);\n\n// The AudioWorkletNode constructor is only available in a SecureContext.\nconst audioWorkletNodeConstructor: undefined | TAudioWorkletNodeConstructor = isSecureContext\n    ? createAudioWorkletNodeConstructor(\n          addUnrenderedAudioWorkletNode,\n          audioNodeConstructor,\n          createAudioParam,\n          createAudioWorkletNodeRenderer,\n          createNativeAudioWorkletNode,\n          getAudioNodeConnections,\n          getBackupOfflineAudioContext,\n          getNativeContext,\n          isNativeOfflineAudioContext,\n          nativeAudioWorkletNodeConstructor,\n          sanitizeAudioWorkletNodeOptions,\n          setActiveAudioWorkletNodeInputs,\n          testAudioWorkletNodeOptionsClonability,\n          wrapEventListener\n      )\n    : undefined;\n\ntype audioWorkletNodeConstructor<T extends TContext> = undefined | IAudioWorkletNode<T>;\n\nexport { audioWorkletNodeConstructor as AudioWorkletNode };\n\ntype biquadFilterNodeConstructor<T extends TContext> = IBiquadFilterNode<T>;\n\nexport { biquadFilterNodeConstructor as BiquadFilterNode };\n\ntype channelMergerNodeConstructor<T extends TContext> = IAudioNode<T>;\n\nexport { channelMergerNodeConstructor as ChannelMergerNode };\n\ntype channelSplitterNodeConstructor<T extends TContext> = IAudioNode<T>;\n\nexport { channelSplitterNodeConstructor as ChannelSplitterNode };\n\ntype constantSourceNodeConstructor<T extends TContext> = IConstantSourceNode<T>;\n\nexport { convolverNodeConstructor as ConvolverNode };\n\ntype convolverNodeConstructor<T extends TContext> = IConvolverNode<T>;\n\nexport { constantSourceNodeConstructor as ConstantSourceNode };\n\ntype delayNodeConstructor<T extends TContext> = IDelayNode<T>;\n\nexport { delayNodeConstructor as DelayNode };\n\ntype dynamicsCompressorNodeConstructor<T extends TContext> = IDynamicsCompressorNode<T>;\n\nexport { dynamicsCompressorNodeConstructor as DynamicsCompressorNode };\n\ntype gainNodeConstructor<T extends TContext> = IGainNode<T>;\n\nexport { gainNodeConstructor as GainNode };\n\ntype iIRFilterNodeConstructor<T extends TContext> = IIIRFilterNode<T>;\n\nexport { iIRFilterNodeConstructor as IIRFilterNode };\n\ntype mediaElementAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaElementAudioSourceNode<T>;\n\nexport { mediaElementAudioSourceNodeConstructor as MediaElementAudioSourceNode };\n\ntype mediaStreamAudioDestinationNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioDestinationNode<T>;\n\nexport { mediaStreamAudioDestinationNodeConstructor as MediaStreamAudioDestinationNode };\n\ntype mediaStreamAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioSourceNode<T>;\n\nexport { mediaStreamAudioSourceNodeConstructor as MediaStreamAudioSourceNode };\n\ntype mediaStreamTrackAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamTrackAudioSourceNode<T>;\n\nexport { mediaStreamTrackAudioSourceNodeConstructor as MediaStreamTrackAudioSourceNode };\n\nconst minimalAudioContextConstructor: TMinimalAudioContextConstructor = createMinimalAudioContextConstructor(\n    createInvalidStateError,\n    createNotSupportedError,\n    createUnknownError,\n    minimalBaseAudioContextConstructor,\n    nativeAudioContextConstructor\n);\n\ntype minimalAudioContextConstructor = IMinimalAudioContext;\n\nexport { minimalAudioContextConstructor as MinimalAudioContext };\n\nconst createNativeOfflineAudioContext = createCreateNativeOfflineAudioContext(\n    createNotSupportedError,\n    nativeOfflineAudioContextConstructor\n);\nconst startRendering = createStartRendering(\n    audioBufferStore,\n    cacheTestResult,\n    getAudioNodeRenderer,\n    getUnrenderedAudioWorkletNodes,\n    renderNativeOfflineAudioContext,\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\n    wrapAudioBufferCopyChannelMethods,\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\n);\nconst minimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructor = createMinimalOfflineAudioContextConstructor(\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    minimalBaseAudioContextConstructor,\n    startRendering\n);\n\ntype minimalOfflineAudioContextConstructor = IMinimalOfflineAudioContext;\n\nexport { minimalOfflineAudioContextConstructor as MinimalOfflineAudioContext };\n\nconst offlineAudioContextConstructor: IOfflineAudioContextConstructor = createOfflineAudioContextConstructor(\n    baseAudioContextConstructor,\n    cacheTestResult,\n    createInvalidStateError,\n    createNativeOfflineAudioContext,\n    startRendering\n);\n\ntype offlineAudioContextConstructor = IOfflineAudioContext;\n\nexport { offlineAudioContextConstructor as OfflineAudioContext };\n\ntype oscillatorNodeConstructor<T extends TContext> = IOscillatorNode<T>;\n\nexport { oscillatorNodeConstructor as OscillatorNode };\n\ntype pannerNodeConstructor<T extends TContext> = IPannerNode<T>;\n\nexport { pannerNodeConstructor as PannerNode };\n\ntype periodicWaveConstructor = IPeriodicWave;\n\nexport { periodicWaveConstructor as PeriodicWave };\n\ntype stereoPannerNodeConstructor<T extends TContext> = IStereoPannerNode<T>;\n\nexport { stereoPannerNodeConstructor as StereoPannerNode };\n\ntype waveShaperNodeConstructor<T extends TContext> = IWaveShaperNode<T>;\n\nexport { waveShaperNodeConstructor as WaveShaperNode };\n\nexport const isAnyAudioContext = createIsAnyAudioContext(CONTEXT_STORE, isNativeAudioContext);\n\nexport const isAnyAudioNode = createIsAnyAudioNode(AUDIO_NODE_STORE, isNativeAudioNode);\n\nexport const isAnyAudioParam = createIsAnyAudioParam(AUDIO_PARAM_STORE, isNativeAudioParam);\n\nexport const isAnyOfflineAudioContext = createIsAnyOfflineAudioContext(CONTEXT_STORE, isNativeOfflineAudioContext);\n\nexport const isSupported = () =>\n    createIsSupportedPromise(\n        cacheTestResult,\n        createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),\n        createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),\n        createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),\n        createTestAudioContextOptionsSupport(nativeAudioContextConstructor),\n        createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),\n        createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\n        createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\n        createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),\n        createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),\n        createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\n        testDomExceptionConstructorSupport,\n        createTestIsSecureContextSupport(window),\n        createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),\n        createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),\n        testTransferablesSupport\n    );\n", "import { encode, instantiate } from 'media-encoder-host';\nimport { addRecorderAudioWorkletModule, createRecorderAudioWorkletNode } from 'recorder-audio-worklet';\nimport {\n    AudioBuffer,\n    AudioBufferSourceNode,\n    AudioWorkletNode,\n    ConstantSourceNode,\n    IAudioBuffer,\n    IMinimalAudioContext,\n    MediaStreamAudioSourceNode,\n    MinimalAudioContext,\n    addAudioWorkletModule\n} from 'standardized-audio-context';\nimport { IAudioNodesAndEncoderId } from '../interfaces';\nimport { TRecordingState, TWebAudioMediaRecorderFactoryFactory } from '../types';\n\nconst ERROR_MESSAGE = 'Missing AudioWorklet support. Maybe this is not running in a secure context.';\n\n// @todo This should live in a separate file.\nconst createPromisedAudioNodesEncoderIdAndPort = async (\n    audioBuffer: IAudioBuffer,\n    audioContext: IMinimalAudioContext,\n    channelCount: number,\n    mediaStream: MediaStream,\n    mimeType: string\n) => {\n    const { encoderId, port } = await instantiate(mimeType, audioContext.sampleRate);\n\n    if (AudioWorkletNode === undefined) {\n        throw new Error(ERROR_MESSAGE);\n    }\n\n    const audioBufferSourceNode = new AudioBufferSourceNode(audioContext, { buffer: audioBuffer });\n    const mediaStreamAudioSourceNode = new MediaStreamAudioSourceNode(audioContext, { mediaStream });\n    const recorderAudioWorkletNode = createRecorderAudioWorkletNode(AudioWorkletNode, audioContext, { channelCount });\n\n    return { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode };\n};\n\nexport const createWebAudioMediaRecorderFactory: TWebAudioMediaRecorderFactoryFactory = (\n    createBlobEvent,\n    createInvalidModificationError,\n    createInvalidStateError,\n    createNotSupportedError\n) => {\n    return (eventTarget, mediaStream, mimeType) => {\n        const sampleRate = mediaStream.getAudioTracks()[0]?.getSettings().sampleRate;\n        const audioContext = new MinimalAudioContext({ latencyHint: 'playback', sampleRate });\n        const length = Math.max(1024, Math.ceil(audioContext.baseLatency * audioContext.sampleRate));\n        const audioBuffer = new AudioBuffer({ length, sampleRate: audioContext.sampleRate });\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\n        const promisedAudioWorkletModule = addRecorderAudioWorkletModule((url: string) => {\n            if (addAudioWorkletModule === undefined) {\n                throw new Error(ERROR_MESSAGE);\n            }\n\n            return addAudioWorkletModule(audioContext, url);\n        });\n\n        let abortRecording: null | (() => void) = null;\n        let intervalId: null | number = null;\n        let promisedAudioNodesAndEncoderId: null | Promise<IAudioNodesAndEncoderId> = null;\n        let promisedPartialRecording: null | Promise<void> = null;\n        let isAudioContextRunning = true;\n\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\n        };\n\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\n            const arrayBuffers = await encode(encoderId, timeslice);\n\n            if (promisedAudioNodesAndEncoderId === null) {\n                bufferedArrayBuffers.push(...arrayBuffers);\n            } else {\n                dispatchDataAvailableEvent(arrayBuffers);\n\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n            }\n        };\n\n        const resume = (): Promise<void> => {\n            isAudioContextRunning = true;\n\n            return audioContext.resume();\n        };\n\n        const stop = (): void => {\n            if (promisedAudioNodesAndEncoderId === null) {\n                return;\n            }\n\n            if (abortRecording !== null) {\n                mediaStream.removeEventListener('addtrack', abortRecording);\n                mediaStream.removeEventListener('removetrack', abortRecording);\n            }\n\n            if (intervalId !== null) {\n                clearTimeout(intervalId);\n            }\n\n            promisedAudioNodesAndEncoderId.then(\n                async ({ constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode }) => {\n                    if (promisedPartialRecording !== null) {\n                        promisedPartialRecording.catch(() => {\n                            /* @todo Only catch the errors caused by a duplicate call to encode. */\n                        });\n                        promisedPartialRecording = null;\n                    }\n\n                    await recorderAudioWorkletNode.stop();\n\n                    mediaStreamAudioSourceNode.disconnect(recorderAudioWorkletNode);\n                    constantSourceNode.stop();\n\n                    const arrayBuffers = await encode(encoderId, null);\n\n                    if (promisedAudioNodesAndEncoderId === null) {\n                        await suspend();\n                    }\n\n                    dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\n\n                    bufferedArrayBuffers.length = 0;\n\n                    eventTarget.dispatchEvent(new Event('stop'));\n                }\n            );\n\n            promisedAudioNodesAndEncoderId = null;\n        };\n\n        const suspend = (): Promise<void> => {\n            isAudioContextRunning = false;\n\n            return audioContext.suspend();\n        };\n\n        suspend();\n\n        return {\n            get mimeType(): string {\n                return mimeType;\n            },\n\n            get state(): TRecordingState {\n                return promisedAudioNodesAndEncoderId === null ? 'inactive' : isAudioContextRunning ? 'recording' : 'paused';\n            },\n\n            pause(): void {\n                if (promisedAudioNodesAndEncoderId === null) {\n                    throw createInvalidStateError();\n                }\n\n                if (isAudioContextRunning) {\n                    suspend();\n                    eventTarget.dispatchEvent(new Event('pause'));\n                }\n            },\n\n            resume(): void {\n                if (promisedAudioNodesAndEncoderId === null) {\n                    throw createInvalidStateError();\n                }\n\n                if (!isAudioContextRunning) {\n                    resume();\n                    eventTarget.dispatchEvent(new Event('resume'));\n                }\n            },\n\n            start(timeslice?: number): void {\n                if (promisedAudioNodesAndEncoderId !== null) {\n                    throw createInvalidStateError();\n                }\n\n                if (mediaStream.getVideoTracks().length > 0) {\n                    throw createNotSupportedError();\n                }\n\n                eventTarget.dispatchEvent(new Event('start'));\n\n                const audioTracks = mediaStream.getAudioTracks();\n                // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\n                const channelCount =\n                    audioTracks.length === 0\n                        ? 2\n                        : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount ?? 2;\n\n                promisedAudioNodesAndEncoderId = Promise.all([\n                    resume(),\n                    promisedAudioWorkletModule.then(() =>\n                        createPromisedAudioNodesEncoderIdAndPort(audioBuffer, audioContext, channelCount, mediaStream, mimeType)\n                    )\n                ]).then(async ([, { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode }]) => {\n                    mediaStreamAudioSourceNode.connect(recorderAudioWorkletNode);\n\n                    await new Promise((resolve) => {\n                        audioBufferSourceNode.onended = resolve;\n                        audioBufferSourceNode.connect(recorderAudioWorkletNode);\n                        audioBufferSourceNode.start(audioContext.currentTime + length / audioContext.sampleRate);\n                    });\n\n                    audioBufferSourceNode.disconnect(recorderAudioWorkletNode);\n\n                    // Bug #17: Safari does throttle the processing on hidden tabs if there is no active audio output.\n                    const constantSourceNode = new ConstantSourceNode(audioContext, { offset: 0 });\n\n                    constantSourceNode.onended = () => constantSourceNode.disconnect();\n                    constantSourceNode.connect(audioContext.destination);\n                    constantSourceNode.start();\n\n                    await recorderAudioWorkletNode.record(port);\n\n                    if (timeslice !== undefined) {\n                        promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n                    }\n\n                    return { constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode };\n                });\n\n                const tracks = mediaStream.getTracks();\n\n                abortRecording = () => {\n                    stop();\n                    eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\n                };\n\n                mediaStream.addEventListener('addtrack', abortRecording);\n                mediaStream.addEventListener('removetrack', abortRecording);\n\n                intervalId = setInterval(() => {\n                    const currentTracks = mediaStream.getTracks();\n\n                    if (\n                        (currentTracks.length !== tracks.length || currentTracks.some((track, index) => track !== tracks[index])) &&\n                        abortRecording !== null\n                    ) {\n                        abortRecording();\n                    }\n                }, 1000);\n            },\n\n            stop\n        };\n    };\n};\n", "export class MultiBufferDataView\n    implements Omit<DataView, 'buffer' | 'getBigInt64' | 'getBigUint64' | 'setBigInt64' | 'setBigUint64' | symbol>\n{\n    private _buffers: ArrayBuffer[];\n\n    private _byteLength: number;\n\n    private _byteOffset: number;\n\n    private _dataViews: DataView[];\n\n    private _internalBuffer: DataView;\n\n    constructor(buffers: ArrayBuffer[], byteOffset = 0, byteLength?: number) {\n        if (byteOffset < 0 || (byteLength !== undefined && byteLength < 0)) {\n            throw new RangeError();\n        }\n\n        const availableBytes = buffers.reduce((length, buffer) => length + buffer.byteLength, 0);\n\n        if (byteOffset > availableBytes || (byteLength !== undefined && byteOffset + byteLength > availableBytes)) {\n            throw new RangeError();\n        }\n\n        const dataViews = [];\n        const effectiveByteLength = byteLength === undefined ? availableBytes - byteOffset : byteLength;\n        const truncatedBuffers = [];\n\n        let consumedByteLength = 0;\n        let truncatedByteOffset = byteOffset;\n\n        for (const buffer of buffers) {\n            if (truncatedBuffers.length === 0) {\n                if (buffer.byteLength > truncatedByteOffset) {\n                    consumedByteLength = buffer.byteLength - truncatedByteOffset;\n\n                    const byteLengthOfDataView = consumedByteLength > effectiveByteLength ? effectiveByteLength : consumedByteLength;\n\n                    dataViews.push(new DataView(buffer, truncatedByteOffset, byteLengthOfDataView));\n                    truncatedBuffers.push(buffer);\n                } else {\n                    truncatedByteOffset -= buffer.byteLength;\n                }\n            } else if (consumedByteLength < effectiveByteLength) {\n                consumedByteLength += buffer.byteLength;\n\n                const byteLengthOfDataView =\n                    consumedByteLength > effectiveByteLength\n                        ? buffer.byteLength - consumedByteLength + effectiveByteLength\n                        : buffer.byteLength;\n\n                dataViews.push(new DataView(buffer, 0, byteLengthOfDataView));\n                truncatedBuffers.push(buffer);\n            }\n        }\n\n        this._buffers = truncatedBuffers;\n        this._byteLength = effectiveByteLength;\n        this._byteOffset = truncatedByteOffset;\n        this._dataViews = dataViews;\n        this._internalBuffer = new DataView(new ArrayBuffer(8));\n    }\n\n    get buffers(): ArrayBuffer[] {\n        return this._buffers;\n    }\n\n    get byteLength(): number {\n        return this._byteLength;\n    }\n\n    get byteOffset(): number {\n        return this._byteOffset;\n    }\n\n    public getFloat32(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n\n        return this._internalBuffer.getFloat32(0, littleEndian);\n    }\n\n    public getFloat64(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n        this._internalBuffer.setUint8(4, this.getUint8(byteOffset + 4));\n        this._internalBuffer.setUint8(5, this.getUint8(byteOffset + 5));\n        this._internalBuffer.setUint8(6, this.getUint8(byteOffset + 6));\n        this._internalBuffer.setUint8(7, this.getUint8(byteOffset + 7));\n\n        return this._internalBuffer.getFloat64(0, littleEndian);\n    }\n\n    public getInt16(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n\n        return this._internalBuffer.getInt16(0, littleEndian);\n    }\n\n    public getInt32(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n\n        return this._internalBuffer.getInt32(0, littleEndian);\n    }\n\n    public getInt8(byteOffset: number): number {\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\n\n        return dataView.getInt8(byteOffset - byteOffsetOfDataView);\n    }\n\n    public getUint16(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n\n        return this._internalBuffer.getUint16(0, littleEndian);\n    }\n\n    public getUint32(byteOffset: number, littleEndian?: boolean): number {\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\n\n        return this._internalBuffer.getUint32(0, littleEndian);\n    }\n\n    public getUint8(byteOffset: number): number {\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\n\n        return dataView.getUint8(byteOffset - byteOffsetOfDataView);\n    }\n\n    public setFloat32(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setFloat32(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n    }\n\n    public setFloat64(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setFloat64(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n        this.setUint8(byteOffset + 4, this._internalBuffer.getUint8(4));\n        this.setUint8(byteOffset + 5, this._internalBuffer.getUint8(5));\n        this.setUint8(byteOffset + 6, this._internalBuffer.getUint8(6));\n        this.setUint8(byteOffset + 7, this._internalBuffer.getUint8(7));\n    }\n\n    public setInt16(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setInt16(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n    }\n\n    public setInt32(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setInt32(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n    }\n\n    public setInt8(byteOffset: number, value: number): void {\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\n\n        dataView.setInt8(byteOffset - byteOffsetOfDataView, value);\n    }\n\n    public setUint16(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setUint16(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n    }\n\n    public setUint32(byteOffset: number, value: number, littleEndian?: boolean): void {\n        this._internalBuffer.setUint32(0, value, littleEndian);\n\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\n    }\n\n    public setUint8(byteOffset: number, value: number): void {\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\n\n        dataView.setUint8(byteOffset - byteOffsetOfDataView, value);\n    }\n\n    private _findDataViewWithOffset(byteOffset: number): [DataView, number] {\n        let byteOffsetOfDataView = 0;\n\n        for (const dataView of this._dataViews) {\n            const byteOffsetOfNextDataView = byteOffsetOfDataView + dataView.byteLength;\n\n            if (byteOffset >= byteOffsetOfDataView && byteOffset < byteOffsetOfNextDataView) {\n                return [dataView, byteOffsetOfDataView];\n            }\n\n            byteOffsetOfDataView = byteOffsetOfNextDataView;\n        }\n\n        throw new RangeError();\n    }\n}\n", "export { MultiBufferDataView } from './classes/multi-buffer-data-view';\n", "import { encode, instantiate } from 'media-encoder-host';\nimport { MultiBufferDataView } from 'multi-buffer-data-view';\nimport { on } from 'subscribable-things';\nimport { TPromisedDataViewElementTypeEncoderIdAndPort, TRecordingState, TWebmPcmMediaRecorderFactoryFactory } from '../types';\n\nexport const createWebmPcmMediaRecorderFactory: TWebmPcmMediaRecorderFactoryFactory = (\n    createBlobEvent,\n    createInvalidModificationError,\n    createNotSupportedError,\n    decodeWebMChunk,\n    readVariableSizeInteger\n) => {\n    return (eventTarget, nativeMediaRecorderConstructor, mediaStream, mimeType) => {\n        const audioTracks = mediaStream.getAudioTracks();\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\n        // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\n        const channelCount =\n            audioTracks.length === 0\n                ? undefined\n                : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount;\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(mediaStream, { mimeType: 'audio/webm;codecs=pcm' });\n        const sampleRate = audioTracks.length === 0 ? undefined : audioTracks[0].getSettings().sampleRate;\n\n        let promisedPartialRecording: null | Promise<void> = null;\n        let stopRecording = () => {}; // tslint:disable-line:no-empty\n\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\n        };\n\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\n            const arrayBuffers = await encode(encoderId, timeslice);\n\n            if (nativeMediaRecorder.state === 'inactive') {\n                bufferedArrayBuffers.push(...arrayBuffers);\n            } else {\n                dispatchDataAvailableEvent(arrayBuffers);\n\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\n            }\n        };\n\n        const stop = (): void => {\n            if (nativeMediaRecorder.state === 'inactive') {\n                return;\n            }\n\n            if (promisedPartialRecording !== null) {\n                promisedPartialRecording.catch(() => {\n                    /* @todo Only catch the errors caused by a duplicate call to encode. */\n                });\n                promisedPartialRecording = null;\n            }\n\n            stopRecording();\n            stopRecording = () => {}; // tslint:disable-line:no-empty\n\n            nativeMediaRecorder.stop();\n        };\n\n        nativeMediaRecorder.addEventListener('error', () => {\n            stop();\n            // Bug #3 & #4: Chrome throws an error event without any error.\n            eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\n        });\n        nativeMediaRecorder.addEventListener('start', () => eventTarget.dispatchEvent(new Event('start')));\n\n        return {\n            get mimeType(): string {\n                return mimeType;\n            },\n\n            get state(): TRecordingState {\n                return nativeMediaRecorder.state;\n            },\n\n            pause(): void {\n                return nativeMediaRecorder.pause();\n            },\n\n            resume(): void {\n                return nativeMediaRecorder.resume();\n            },\n\n            start(timeslice?: number): void {\n                /*\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\n                 * codec.\n                 */\n                if (mediaStream.getVideoTracks().length > 0) {\n                    throw createNotSupportedError();\n                }\n\n                if (nativeMediaRecorder.state === 'inactive') {\n                    if (sampleRate === undefined) {\n                        throw new Error('The sampleRate is not defined.');\n                    }\n\n                    let isRecording = false;\n                    let isStopped = false;\n                    // Bug #9: Chrome sometimes fires more than one dataavailable event while being inactive.\n                    let pendingInvocations = 0;\n                    let promisedDataViewElementTypeEncoderIdAndPort: TPromisedDataViewElementTypeEncoderIdAndPort = instantiate(\n                        mimeType,\n                        sampleRate\n                    );\n\n                    stopRecording = () => {\n                        isStopped = true;\n                    };\n\n                    const removeEventListener = on(\n                        nativeMediaRecorder,\n                        'dataavailable'\n                    )(({ data }) => {\n                        pendingInvocations += 1;\n\n                        promisedDataViewElementTypeEncoderIdAndPort = promisedDataViewElementTypeEncoderIdAndPort.then(\n                            async ({ dataView = null, elementType = null, encoderId, port }) => {\n                                const arrayBuffer = await data.arrayBuffer();\n\n                                pendingInvocations -= 1;\n\n                                const currentDataView =\n                                    dataView === null\n                                        ? new MultiBufferDataView([arrayBuffer])\n                                        : new MultiBufferDataView([...dataView.buffers, arrayBuffer], dataView.byteOffset);\n\n                                if (!isRecording && nativeMediaRecorder.state === 'recording' && !isStopped) {\n                                    const lengthAndValue = readVariableSizeInteger(currentDataView, 0);\n\n                                    if (lengthAndValue === null) {\n                                        return { dataView: currentDataView, elementType, encoderId, port };\n                                    }\n\n                                    const { value } = lengthAndValue;\n\n                                    if (value !== 172351395) {\n                                        return { dataView, elementType, encoderId, port };\n                                    }\n\n                                    isRecording = true;\n                                }\n\n                                const { currentElementType, offset, contents } = decodeWebMChunk(\n                                    currentDataView,\n                                    elementType,\n                                    channelCount\n                                );\n                                const remainingDataView =\n                                    offset < currentDataView.byteLength\n                                        ? new MultiBufferDataView(currentDataView.buffers, currentDataView.byteOffset + offset)\n                                        : null;\n\n                                contents.forEach((content) =>\n                                    port.postMessage(\n                                        content,\n                                        content.map(({ buffer }) => buffer)\n                                    )\n                                );\n\n                                if (pendingInvocations === 0 && (nativeMediaRecorder.state === 'inactive' || isStopped)) {\n                                    encode(encoderId, null).then((arrayBuffers) => {\n                                        dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\n\n                                        bufferedArrayBuffers.length = 0;\n\n                                        eventTarget.dispatchEvent(new Event('stop'));\n                                    });\n\n                                    port.postMessage([]);\n                                    port.close();\n\n                                    removeEventListener();\n                                }\n\n                                return { dataView: remainingDataView, elementType: currentElementType, encoderId, port };\n                            }\n                        );\n                    });\n\n                    if (timeslice !== undefined) {\n                        promisedDataViewElementTypeEncoderIdAndPort.then(\n                            ({ encoderId }) => (promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice))\n                        );\n                    }\n                }\n\n                nativeMediaRecorder.start(100);\n            },\n\n            stop\n        };\n    };\n};\n", "import { TWindow, TWindowFactory } from '../types';\n\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\n", "import { TReadVariableSizeIntegerLengthFunction } from '../types';\n\nexport const readVariableSizeIntegerLength: TReadVariableSizeIntegerLengthFunction = (dataView, offset) => {\n    if (offset >= dataView.byteLength) {\n        return null;\n    }\n\n    const byte = dataView.getUint8(offset);\n\n    if (byte > 127) {\n        return 1;\n    }\n\n    if (byte > 63) {\n        return 2;\n    }\n\n    if (byte > 31) {\n        return 3;\n    }\n\n    if (byte > 15) {\n        return 4;\n    }\n\n    if (byte > 7) {\n        return 5;\n    }\n\n    if (byte > 3) {\n        return 6;\n    }\n\n    if (byte > 1) {\n        return 7;\n    }\n\n    if (byte > 0) {\n        return 8;\n    }\n\n    const length = readVariableSizeIntegerLength(dataView, offset + 1);\n\n    return length === null ? null : length + 8;\n};\n", "import { TWrapEventListenerFunction } from '../types';\n\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\n    return (event) => {\n        const descriptor = { value: target };\n\n        Object.defineProperties(event, {\n            currentTarget: descriptor,\n            target: descriptor\n        });\n\n        if (typeof eventListener === 'function') {\n            return eventListener.call(target, event);\n        }\n\n        return eventListener.handleEvent.call(target, event);\n    };\n};\n", "export {};\n//# sourceMappingURL=audio-nodes-and-encoder-id.js.map", "export {};\n//# sourceMappingURL=blob-event.js.map", "export {};\n//# sourceMappingURL=blob-event-init.js.map", "export {};\n//# sourceMappingURL=event-target.js.map", "export {};\n//# sourceMappingURL=media-recorder.js.map", "export {};\n//# sourceMappingURL=media-recorder-constructor.js.map", "export {};\n//# sourceMappingURL=media-recorder-event-map.js.map", "export {};\n//# sourceMappingURL=media-recorder-options.js.map", "export * from './audio-nodes-and-encoder-id';\nexport * from './blob-event';\nexport * from './blob-event-init';\nexport * from './event-target';\nexport * from './media-recorder';\nexport * from './media-recorder-constructor';\nexport * from './media-recorder-event-map';\nexport * from './media-recorder-options';\n", "export {};\n//# sourceMappingURL=blob-event-constructor.js.map", "export {};\n//# sourceMappingURL=blob-event-handler.js.map", "export {};\n//# sourceMappingURL=blob-event-factory.js.map", "export {};\n//# sourceMappingURL=blob-event-factory-factory.js.map", "export {};\n//# sourceMappingURL=decode-web-m-chunk-factory.js.map", "export {};\n//# sourceMappingURL=decode-web-m-chunk-function.js.map", "export {};\n//# sourceMappingURL=element-type.js.map", "export {};\n//# sourceMappingURL=error-event-handler.js.map", "export {};\n//# sourceMappingURL=event-handler.js.map", "export {};\n//# sourceMappingURL=event-target-constructor.js.map", "export {};\n//# sourceMappingURL=event-target-constructor-factory.js.map", "export {};\n//# sourceMappingURL=event-target-factory.js.map", "export {};\n//# sourceMappingURL=event-target-factory-factory.js.map", "export {};\n//# sourceMappingURL=invalid-modification-error-factory.js.map", "export {};\n//# sourceMappingURL=invalid-state-error-factory.js.map", "export {};\n//# sourceMappingURL=is-supported-promise-factory.js.map", "export {};\n//# sourceMappingURL=media-recorder-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-blob-event-factory.js.map", "export {};\n//# sourceMappingURL=native-event-target.js.map", "export {};\n//# sourceMappingURL=native-media-recorder-constructor-factory.js.map", "export {};\n//# sourceMappingURL=native-media-recorder-factory.js.map", "export {};\n//# sourceMappingURL=native-media-recorder-factory-factory.js.map", "export {};\n//# sourceMappingURL=not-supported-error-factory.js.map", "export {};\n//# sourceMappingURL=promised-data-view-element-type-encoder-id-and-port.js.map", "export {};\n//# sourceMappingURL=read-element-content-factory.js.map", "export {};\n//# sourceMappingURL=read-element-content-function.js.map", "export {};\n//# sourceMappingURL=read-element-type-factory.js.map", "export {};\n//# sourceMappingURL=read-element-type-function.js.map", "export {};\n//# sourceMappingURL=read-variable-size-integer-factory.js.map", "export {};\n//# sourceMappingURL=read-variable-size-integer-function.js.map", "export {};\n//# sourceMappingURL=read-variable-size-integer-length-function.js.map", "export {};\n//# sourceMappingURL=recording-state.js.map", "export {};\n//# sourceMappingURL=web-audio-media-recorder-factory.js.map", "export {};\n//# sourceMappingURL=web-audio-media-recorder-factory-factory.js.map", "export {};\n//# sourceMappingURL=webm-pcm-media-recorder-factory.js.map", "export {};\n//# sourceMappingURL=webm-pcm-media-recorder-factory-factory.js.map", "export {};\n//# sourceMappingURL=window.js.map", "export {};\n//# sourceMappingURL=window-factory.js.map", "export {};\n//# sourceMappingURL=wrap-event-listener-function.js.map", "export * from './blob-event-constructor';\nexport * from './blob-event-handler';\nexport * from './blob-event-factory';\nexport * from './blob-event-factory-factory';\nexport * from './decode-web-m-chunk-factory';\nexport * from './decode-web-m-chunk-function';\nexport * from './element-type';\nexport * from './error-event-handler';\nexport * from './event-handler';\nexport * from './event-target-constructor';\nexport * from './event-target-constructor-factory';\nexport * from './event-target-factory';\nexport * from './event-target-factory-factory';\nexport * from './invalid-modification-error-factory';\nexport * from './invalid-state-error-factory';\nexport * from './is-supported-promise-factory';\nexport * from './media-recorder-constructor-factory';\nexport * from './native-blob-event-factory';\nexport * from './native-event-target';\nexport * from './native-media-recorder-constructor-factory';\nexport * from './native-media-recorder-factory';\nexport * from './native-media-recorder-factory-factory';\nexport * from './not-supported-error-factory';\nexport * from './promised-data-view-element-type-encoder-id-and-port';\nexport * from './read-element-content-factory';\nexport * from './read-element-content-function';\nexport * from './read-element-type-factory';\nexport * from './read-element-type-function';\nexport * from './read-variable-size-integer-factory';\nexport * from './read-variable-size-integer-function';\nexport * from './read-variable-size-integer-length-function';\nexport * from './recording-state';\nexport * from './web-audio-media-recorder-factory';\nexport * from './web-audio-media-recorder-factory-factory';\nexport * from './webm-pcm-media-recorder-factory';\nexport * from './webm-pcm-media-recorder-factory-factory';\nexport * from './window';\nexport * from './window-factory';\nexport * from './wrap-event-listener-function';\n", "import { register as rgstr } from 'media-encoder-host';\nimport { createBlobEventFactory } from './factories/blob-event-factory';\nimport { createDecodeWebMChunk } from './factories/decode-web-m-chunk';\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\nimport { createEventTargetFactory } from './factories/event-target-factory';\nimport { createInvalidModificationError } from './factories/invalid-modification-error';\nimport { createInvalidStateError } from './factories/invalid-state-error';\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\nimport { createMediaRecorderConstructor } from './factories/media-recorder-constructor';\nimport { createNativeBlobEventConstructor } from './factories/native-blob-event-constructor';\nimport { createNativeMediaRecorderFactory } from './factories/native-media-recorder';\nimport { createNativeMediaRecorderConstructor } from './factories/native-media-recorder-constructor';\nimport { createNotSupportedError } from './factories/not-supported-error';\nimport { createReadElementContent } from './factories/read-element-content';\nimport { createReadElementType } from './factories/read-element-type';\nimport { createReadVariableSizeInteger } from './factories/read-variable-size-integer';\nimport { createWebAudioMediaRecorderFactory } from './factories/web-audio-media-recorder';\nimport { createWebmPcmMediaRecorderFactory } from './factories/webm-pcm-media-recorder';\nimport { createWindow } from './factories/window';\nimport { readVariableSizeIntegerLength } from './functions/read-variable-size-integer-length';\nimport { wrapEventListener } from './functions/wrap-event-listener';\nimport { IMediaRecorderConstructor } from './interfaces';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nconst encoderRegexes: RegExp[] = [];\n\nconst window = createWindow();\nconst nativeBlobEventConstructor = createNativeBlobEventConstructor(window);\nconst createBlobEvent = createBlobEventFactory(nativeBlobEventConstructor);\nconst createWebAudioMediaRecorder = createWebAudioMediaRecorderFactory(\n    createBlobEvent,\n    createInvalidModificationError,\n    createInvalidStateError,\n    createNotSupportedError\n);\nconst readVariableSizeInteger = createReadVariableSizeInteger(readVariableSizeIntegerLength);\nconst readElementContent = createReadElementContent(readVariableSizeInteger);\nconst readElementType = createReadElementType(readVariableSizeInteger);\nconst decodeWebMChunk = createDecodeWebMChunk(readElementContent, readElementType);\nconst createWebmPcmMediaRecorder = createWebmPcmMediaRecorderFactory(\n    createBlobEvent,\n    createInvalidModificationError,\n    createNotSupportedError,\n    decodeWebMChunk,\n    readVariableSizeInteger\n);\nconst createEventTarget = createEventTargetFactory(window);\nconst nativeMediaRecorderConstructor = createNativeMediaRecorderConstructor(window);\n\nconst createNativeMediaRecorder = createNativeMediaRecorderFactory(createInvalidModificationError, createNotSupportedError);\nconst mediaRecorderConstructor: IMediaRecorderConstructor = createMediaRecorderConstructor(\n    createNativeMediaRecorder,\n    createNotSupportedError,\n    createWebAudioMediaRecorder,\n    createWebmPcmMediaRecorder,\n    encoderRegexes,\n    createEventTargetConstructor(createEventTarget, wrapEventListener),\n    nativeMediaRecorderConstructor\n);\n\nexport { mediaRecorderConstructor as MediaRecorder };\n\nexport const isSupported = () => createIsSupportedPromise(window);\n\nexport const register = async (port: MessagePort): Promise<void> => {\n    encoderRegexes.push(await rgstr(port));\n};\n", "export {};\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-definition.js.map", "export * from './extendable-media-recorder-wav-encoder-broker-definition';\n", "export {};\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-loader.js.map", "export {};\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-wrapper.js.map", "export {};\n//# sourceMappingURL=typed-array.js.map", "export * from './extendable-media-recorder-wav-encoder-broker-loader';\nexport * from './extendable-media-recorder-wav-encoder-broker-wrapper';\nexport * from './typed-array';\n", "import { createBroker } from 'broker-factory';\nimport { TExtendableMediaRecorderWavEncoderWorkerDefinition } from 'extendable-media-recorder-wav-encoder-worker';\nimport { IExtendableMediaRecorderWavEncoderBrokerDefinition } from './interfaces';\nimport { TExtendableMediaRecorderWavEncoderBrokerLoader, TExtendableMediaRecorderWavEncoderBrokerWrapper } from './types';\n\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\n\nexport const wrap: TExtendableMediaRecorderWavEncoderBrokerWrapper = createBroker<\n    IExtendableMediaRecorderWavEncoderBrokerDefinition,\n    TExtendableMediaRecorderWavEncoderWorkerDefinition\n>({\n    characterize: ({ call }) => {\n        return () => call('characterize');\n    },\n    encode: ({ call }) => {\n        return (recordingId, timeslice) => {\n            return call('encode', { recordingId, timeslice });\n        };\n    },\n    record: ({ call }) => {\n        return async (recordingId, sampleRate, typedArrays) => {\n            await call(\n                'record',\n                { recordingId, sampleRate, typedArrays },\n                typedArrays.map(({ buffer }) => buffer).filter((buffer) => buffer instanceof ArrayBuffer)\n            );\n        };\n    }\n});\n\nexport const load: TExtendableMediaRecorderWavEncoderBrokerLoader = (url: string) => {\n    const worker = new Worker(url);\n\n    return wrap(worker);\n};\n", "// This is the minified and stringified code of the extendable-media-recorder-wav-encoder-worker package.\nexport const worker = `(()=>{var e={455(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,a=2*s,o=function(e,t){return function(r){var o=t.get(r),i=void 0===o?r.size:o<a?o+1:0;if(!r.has(i))return e(r,i);if(r.size<s){for(;r.has(i);)i=Math.floor(Math.random()*a);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),l=o(c,i),u=t(l);e.addUniqueNumber=u,e.generateUniqueNumber=l}(t)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(()=>{\"use strict\";const e=-32603,t=-32602,n=-32601,s=(e,t)=>Object.assign(new Error(e),{status:t}),a=t=>s('The handler of the method called \"'.concat(t,'\" returned an unexpected result.'),e),o=(t,r)=>async({data:{id:o,method:i,params:c}})=>{const l=r[i];try{if(void 0===l)throw(e=>s('The requested method called \"'.concat(e,'\" is not supported.'),n))(i);const r=void 0===c?l():l(c);if(void 0===r)throw(t=>s('The handler of the method called \"'.concat(t,'\" returned no required result.'),e))(i);const u=r instanceof Promise?await r:r;if(null===o){if(void 0!==u.result)throw a(i)}else{if(void 0===u.result)throw a(i);const{result:e,transferables:r=[]}=u;t.postMessage({id:o,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:o})}};var i=r(455);const c=new Map,l=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),s=(0,i.generateUniqueNumber)(c);return c.set(s,()=>{n(),t.close(),c.delete(s)}),{result:s}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>s('The specified parameter called \"portId\" with the given value \"'.concat(e,'\" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=(e,t,r=()=>!0)=>{const n=l(u,t,r),s=o(e,n);return e.addEventListener(\"message\",s),()=>e.removeEventListener(\"message\",s)},d=e=>e.reduce((e,t)=>e+t.length,0),h=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let s=0;s<t;s+=1){const t=e[s];void 0===r[s]&&(r[s]=[]);const a=t.shift();if(void 0===a)break e;r[s].push(a),0===s&&(n+=a.length)}}if(n>t){const s=n-t;r.forEach((t,r)=>{const n=t.pop(),a=n.length-s;t.push(n.subarray(0,a)),e[r].unshift(n.subarray(a))})}return r},f=new Map,m=(e=>(t,r,n)=>{const s=e.get(t);if(void 0===s){const s={channelDataArrays:n.map(e=>[e]),isComplete:!0,sampleRate:r};return e.set(t,s),s}return s.channelDataArrays.forEach((e,t)=>e.push(n[t])),s})(f),p=((e,t)=>(r,n,s,a)=>{const o=s>>3,i=\"subsequent\"===n?0:44,c=r.length,l=e(r[0]),u=new ArrayBuffer(l*c*o+i),d=new DataView(u);return\"subsequent\"!==n&&t(d,s,c,\"complete\"===n?l:Number.POSITIVE_INFINITY,a),r.forEach((e,t)=>{let r=i+t*o;e.forEach(e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=c*o}})}),[u]})(d,(e,t,r,n,s)=>{const a=t>>3,o=Math.min(n*r*a,4294967251);e.setUint32(0,1380533830),e.setUint32(4,o+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,s,!0),e.setUint32(28,s*r*a,!0),e.setUint16(32,r*a,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,o,!0)}),v=new Map;u(self,{characterize:()=>({result:/^audio\\\\/wav$/}),encode:({recordingId:e,timeslice:t})=>{const r=v.get(e);void 0!==r&&(v.delete(e),r.reject(new Error(\"Another request was made to initiate an encoding.\")));const n=f.get(e);if(null!==t){if(void 0===n||d(n.channelDataArrays[0])*(1e3/n.sampleRate)<t)return new Promise((r,n)=>{v.set(e,{reject:n,resolve:r,timeslice:t})});const r=h(n.channelDataArrays,Math.ceil(t*(n.sampleRate/1e3))),s=p(r,n.isComplete?\"initial\":\"subsequent\",16,n.sampleRate);return n.isComplete=!1,{result:s,transferables:s}}if(void 0!==n){const t=p(n.channelDataArrays,n.isComplete?\"complete\":\"subsequent\",16,n.sampleRate);return f.delete(e),{result:t,transferables:t}}return{result:[],transferables:[]}},record:({recordingId:e,sampleRate:t,typedArrays:r})=>{const n=m(e,t,r),s=v.get(e);if(void 0!==s&&d(n.channelDataArrays[0])*(1e3/t)>=s.timeslice){const r=h(n.channelDataArrays,Math.ceil(s.timeslice*(t/1e3))),a=p(r,n.isComplete?\"initial\":\"subsequent\",16,t);n.isComplete=!1,v.delete(e),s.resolve({result:a,transferables:a})}return{result:null}}})})()})();`; // tslint:disable-line:max-line-length\n", "import { load } from 'extendable-media-recorder-wav-encoder-broker';\nimport { worker } from './worker/worker';\n\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n\nconst url: string = URL.createObjectURL(blob);\n\nconst extendableMediaRecorderWavEncoder = load(url);\n\nexport const characterize = extendableMediaRecorderWavEncoder.characterize;\n\nexport const connect = extendableMediaRecorderWavEncoder.connect;\n\nexport const disconnect = extendableMediaRecorderWavEncoder.disconnect;\n\nexport const encode = extendableMediaRecorderWavEncoder.encode;\n\nexport const isSupported = extendableMediaRecorderWavEncoder.isSupported;\n\nexport const record = extendableMediaRecorderWavEncoder.record;\n\nURL.revokeObjectURL(url);\n", "\"use strict\";var __awaiter=(this&&this.__awaiter)||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}\nreturn new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}\nfunction rejected(value){try{step(generator[\"throw\"](value));}catch(e){reject(e);}}\nfunction step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}\nstep((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=(this&&this.__generator)||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),\"throw\":verb(1),\"return\":verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}\nfunction step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_)try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}\nif(op[0]===3&&(!t||(op[1]>t[0]&&op[1]<t[3]))){_.label=op[1];break;}\nif(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}\nif(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}\nif(t[2])_.ops.pop();_.trys.pop();continue;}\nop=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}\nif(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};Object.defineProperty(exports,\"__esModule\",{value:true});exports.ReactMediaRecorder=exports.useReactMediaRecorder=exports.RecorderErrors=void 0;var extendable_media_recorder_1=require(\"extendable-media-recorder\");var react_1=require(\"react\");var extendable_media_recorder_wav_encoder_1=require(\"extendable-media-recorder-wav-encoder\");var RecorderErrors;(function(RecorderErrors){RecorderErrors[\"AbortError\"]=\"media_aborted\";RecorderErrors[\"NotAllowedError\"]=\"permission_denied\";RecorderErrors[\"NotFoundError\"]=\"no_specified_media_found\";RecorderErrors[\"NotReadableError\"]=\"media_in_use\";RecorderErrors[\"OverconstrainedError\"]=\"invalid_media_constraints\";RecorderErrors[\"TypeError\"]=\"no_constraints\";RecorderErrors[\"NONE\"]=\"\";RecorderErrors[\"NO_RECORDER\"]=\"recorder_error\";})(RecorderErrors=exports.RecorderErrors||(exports.RecorderErrors={}));function useReactMediaRecorder(_a){var _this=this;var _b=_a.audio,audio=_b===void 0?true:_b,_c=_a.video,video=_c===void 0?false:_c,_d=_a.selfBrowserSurface,selfBrowserSurface=_d===void 0?undefined:_d,_e=_a.preferCurrentTab,preferCurrentTab=_e===void 0?false:_e,_f=_a.onStop,onStop=_f===void 0?function(){return null;}:_f,_g=_a.onStart,onStart=_g===void 0?function(){return null;}:_g,blobPropertyBag=_a.blobPropertyBag,_h=_a.screen,screen=_h===void 0?false:_h,_j=_a.mediaRecorderOptions,mediaRecorderOptions=_j===void 0?undefined:_j,_k=_a.customMediaStream,customMediaStream=_k===void 0?null:_k,_l=_a.stopStreamsOnStop,stopStreamsOnStop=_l===void 0?true:_l,_m=_a.askPermissionOnMount,askPermissionOnMount=_m===void 0?false:_m;var mediaRecorder=(0,react_1.useRef)(null);var mediaChunks=(0,react_1.useRef)([]);var mediaStream=(0,react_1.useRef)(null);var _o=(0,react_1.useState)(\"idle\"),status=_o[0],setStatus=_o[1];var _p=(0,react_1.useState)(false),isAudioMuted=_p[0],setIsAudioMuted=_p[1];var _q=(0,react_1.useState)(undefined),mediaBlobUrl=_q[0],setMediaBlobUrl=_q[1];var _r=(0,react_1.useState)(\"NONE\"),error=_r[0],setError=_r[1];var _s=(0,react_1.useState)(false),init=_s[0],setInit=_s[1];(0,react_1.useEffect)(function(){if(init){return;}\nvar setup=function(){return __awaiter(_this,void 0,void 0,function(){var _a,e_1;return __generator(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,3,,4]);_a=extendable_media_recorder_1.register;return[4,(0,extendable_media_recorder_wav_encoder_1.connect)()];case 1:return[4,_a.apply(void 0,[_b.sent()])];case 2:_b.sent();return[3,4];case 3:e_1=_b.sent();return[3,4];case 4:return[2];}});});};setup();setInit(true);},[]);var getMediaStream=(0,react_1.useCallback)(function(){return __awaiter(_this,void 0,void 0,function(){var requiredMedia,stream_1,audioStream,stream,error_1;return __generator(this,function(_a){switch(_a.label){case 0:setStatus(\"acquiring_media\");requiredMedia={audio:typeof audio===\"boolean\"?!!audio:audio,video:typeof video===\"boolean\"?!!video:video,};_a.label=1;case 1:_a.trys.push([1,9,,10]);if(!customMediaStream)return[3,2];mediaStream.current=customMediaStream;return[3,8];case 2:if(!screen)return[3,6];return[4,window.navigator.mediaDevices.getDisplayMedia({video:video||true,selfBrowserSurface:selfBrowserSurface,preferCurrentTab:preferCurrentTab})];case 3:stream_1=(_a.sent());stream_1.getVideoTracks()[0].addEventListener(\"ended\",function(){stopRecording();});if(!audio)return[3,5];return[4,window.navigator.mediaDevices.getUserMedia({audio:audio,})];case 4:audioStream=_a.sent();audioStream.getAudioTracks().forEach(function(audioTrack){return stream_1.addTrack(audioTrack);});_a.label=5;case 5:mediaStream.current=stream_1;return[3,8];case 6:return[4,window.navigator.mediaDevices.getUserMedia(requiredMedia)];case 7:stream=_a.sent();mediaStream.current=stream;_a.label=8;case 8:setStatus(\"idle\");return[3,10];case 9:error_1=_a.sent();setError(error_1.name);setStatus(\"idle\");return[3,10];case 10:return[2];}});});},[audio,video,screen]);(0,react_1.useEffect)(function(){if(!window.MediaRecorder){throw new Error(\"Unsupported Browser\");}\nif(screen){if(!window.navigator.mediaDevices.getDisplayMedia){throw new Error(\"This browser doesn't support screen capturing\");}}\nvar checkConstraints=function(mediaType){var supportedMediaConstraints=navigator.mediaDevices.getSupportedConstraints();var unSupportedConstraints=Object.keys(mediaType).filter(function(constraint){return!supportedMediaConstraints[constraint];});if(unSupportedConstraints.length>0){console.error(\"The constraints \"+unSupportedConstraints.join(\",\")+\" doesn't support on this browser. Please check your ReactMediaRecorder component.\");}};if(typeof audio===\"object\"){checkConstraints(audio);}\nif(typeof video===\"object\"){checkConstraints(video);}\nif(mediaRecorderOptions&&mediaRecorderOptions.mimeType){if(!MediaRecorder.isTypeSupported(mediaRecorderOptions.mimeType)){console.error(\"The specified MIME type you supplied for MediaRecorder doesn't support this browser\");}}\nif(!mediaStream.current&&askPermissionOnMount){getMediaStream();}\nreturn function(){if(mediaStream.current){var tracks=mediaStream.current.getTracks();tracks.forEach(function(track){return track.clone().stop();});}};},[audio,screen,video,getMediaStream,mediaRecorderOptions,askPermissionOnMount,]);var startRecording=function(){return __awaiter(_this,void 0,void 0,function(){var isStreamEnded;return __generator(this,function(_a){switch(_a.label){case 0:setError(\"NONE\");if(!!mediaStream.current)return[3,2];return[4,getMediaStream()];case 1:_a.sent();_a.label=2;case 2:if(!mediaStream.current)return[3,5];isStreamEnded=mediaStream.current.getTracks().some(function(track){return track.readyState===\"ended\";});if(!isStreamEnded)return[3,4];return[4,getMediaStream()];case 3:_a.sent();_a.label=4;case 4:if(!mediaStream.current.active){return[2];}\nmediaRecorder.current=new extendable_media_recorder_1.MediaRecorder(mediaStream.current,mediaRecorderOptions||undefined);mediaRecorder.current.ondataavailable=onRecordingActive;mediaRecorder.current.onstop=onRecordingStop;mediaRecorder.current.onstart=onRecordingStart;mediaRecorder.current.onerror=function(){setError(\"NO_RECORDER\");setStatus(\"idle\");};mediaRecorder.current.start();setStatus(\"recording\");_a.label=5;case 5:return[2];}});});};var onRecordingActive=function(_a){var data=_a.data;mediaChunks.current.push(data);};var onRecordingStart=function(){onStart();};var onRecordingStop=function(){var chunk=mediaChunks.current[0];var blobProperty=Object.assign({type:chunk.type},blobPropertyBag||(video?{type:\"video/mp4\"}:{type:\"audio/wav\"}));var blob=new Blob(mediaChunks.current,blobProperty);var url=URL.createObjectURL(blob);setStatus(\"stopped\");setMediaBlobUrl(url);onStop(url,blob);};var muteAudio=function(mute){setIsAudioMuted(mute);if(mediaStream.current){mediaStream.current.getAudioTracks().forEach(function(audioTrack){return(audioTrack.enabled=!mute);});}};var pauseRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"recording\"){setStatus(\"paused\");mediaRecorder.current.pause();}};var resumeRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"paused\"){setStatus(\"recording\");mediaRecorder.current.resume();}};var stopRecording=function(){if(mediaRecorder.current){if(mediaRecorder.current.state!==\"inactive\"){setStatus(\"stopping\");mediaRecorder.current.stop();if(stopStreamsOnStop){mediaStream.current&&mediaStream.current.getTracks().forEach(function(track){return track.stop();});}\nmediaChunks.current=[];}}};return{error:RecorderErrors[error],muteAudio:function(){return muteAudio(true);},unMuteAudio:function(){return muteAudio(false);},startRecording:startRecording,pauseRecording:pauseRecording,resumeRecording:resumeRecording,stopRecording:stopRecording,mediaBlobUrl:mediaBlobUrl,status:status,isAudioMuted:isAudioMuted,previewStream:mediaStream.current?new MediaStream(mediaStream.current.getVideoTracks()):null,previewAudioStream:mediaStream.current?new MediaStream(mediaStream.current.getAudioTracks()):null,clearBlobUrl:function(){if(mediaBlobUrl){URL.revokeObjectURL(mediaBlobUrl);}\nsetMediaBlobUrl(undefined);setStatus(\"idle\");},};}\nexports.useReactMediaRecorder=useReactMediaRecorder;var ReactMediaRecorder=function(props){return props.render(useReactMediaRecorder(props));};exports.ReactMediaRecorder=ReactMediaRecorder;", "module.exports = require(\"./lib\");\n", "import type {\n  AnyEqualityComparator,\n  Cache,\n  CircularState,\n  Dictionary,\n  State,\n  TypeEqualityComparator,\n} from './internalTypes.js';\n\nconst { getOwnPropertyNames, getOwnPropertySymbols } = Object;\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Combine two comparators into a single comparators.\n */\nexport function combineComparators<Meta>(\n  comparatorA: AnyEqualityComparator<Meta>,\n  comparatorB: AnyEqualityComparator<Meta>,\n) {\n  return function isEqual<A, B>(a: A, b: B, state: State<Meta>) {\n    return comparatorA(a, b, state) && comparatorB(a, b, state);\n  };\n}\n\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nexport function createIsCircular<AreItemsEqual extends TypeEqualityComparator<any, any>>(\n  areItemsEqual: AreItemsEqual,\n): AreItemsEqual {\n  return function isCircular(a: any, b: any, state: CircularState<Cache<any, any>>) {\n    if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n      return areItemsEqual(a, b, state);\n    }\n\n    const { cache } = state;\n\n    const cachedA = cache.get(a);\n    const cachedB = cache.get(b);\n\n    if (cachedA && cachedB) {\n      return cachedA === b && cachedB === a;\n    }\n\n    cache.set(a, b);\n    cache.set(b, a);\n\n    const result = areItemsEqual(a, b, state);\n\n    cache.delete(a);\n    cache.delete(b);\n\n    return result;\n  } as AreItemsEqual;\n}\n\n/**\n * Get the `@@toStringTag` of the value, if it exists.\n */\nexport function getShortTag(value: any): string | undefined {\n  return value != null ? (value[Symbol.toStringTag] as string) : undefined;\n}\n\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nexport function getStrictProperties(object: Dictionary): Array<string | symbol> {\n  return (getOwnPropertyNames(object) as Array<string | symbol>).concat(getOwnPropertySymbols(object));\n}\n\n/**\n * Whether the object contains the property passed as an own property.\n */\nexport const hasOwn =\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  Object.hasOwn || ((object: Dictionary, property: number | string | symbol) => hasOwnProperty.call(object, property));\n\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nexport function sameValueZeroEqual(a: any, b: any): boolean {\n  return a === b || (!a && !b && a !== a && b !== b);\n}\n", "import type { Dictionary, PrimitiveWrapper, State, TypedArray } from './internalTypes.js';\nimport { getStrictProperties, hasOwn, sameValueZeroEqual } from './utils.js';\n\nconst PREACT_VNODE = '__v';\nconst PREACT_OWNER = '__o';\nconst REACT_OWNER = '_owner';\n\nconst { getOwnPropertyDescriptor, keys } = Object;\n\n/**\n * Whether the array buffers are equal in value.\n */\nexport function areArrayBuffersEqual(a: ArrayBuffer, b: ArrayBuffer): boolean {\n  return a.byteLength === b.byteLength && areTypedArraysEqual(new Uint8Array(a), new Uint8Array(b));\n}\n\n/**\n * Whether the arrays are equal in value.\n */\nexport function areArraysEqual(a: any[], b: any[], state: State<any>) {\n  let index = a.length;\n\n  if (b.length !== index) {\n    return false;\n  }\n\n  while (index-- > 0) {\n    if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the dataviews are equal in value.\n */\nexport function areDataViewsEqual(a: DataView, b: DataView): boolean {\n  return (\n    a.byteLength === b.byteLength\n    && areTypedArraysEqual(\n      new Uint8Array(a.buffer, a.byteOffset, a.byteLength),\n      new Uint8Array(b.buffer, b.byteOffset, b.byteLength),\n    )\n  );\n}\n\n/**\n * Whether the dates passed are equal in value.\n */\nexport function areDatesEqual(a: Date, b: Date): boolean {\n  return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n\n/**\n * Whether the errors passed are equal in value.\n */\nexport function areErrorsEqual(a: Error, b: Error): boolean {\n  return a.name === b.name && a.message === b.message && a.cause === b.cause && a.stack === b.stack;\n}\n\n/**\n * Whether the functions passed are equal in value.\n */\nexport function areFunctionsEqual(a: (...args: any[]) => any, b: (...args: any[]) => any): boolean {\n  return a === b;\n}\n\n/**\n * Whether the `Map`s are equal in value.\n */\nexport function areMapsEqual(a: Map<any, any>, b: Map<any, any>, state: State<any>): boolean {\n  const size = a.size;\n\n  if (size !== b.size) {\n    return false;\n  }\n\n  if (!size) {\n    return true;\n  }\n\n  const matchedIndices = new Array<true | undefined>(size);\n  const aIterable = a.entries();\n\n  let aResult: IteratorResult<[any, any]>;\n  let bResult: IteratorResult<[any, any]>;\n  let index = 0;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  while ((aResult = aIterable.next())) {\n    if (aResult.done) {\n      break;\n    }\n\n    const bIterable = b.entries();\n\n    let hasMatch = false;\n    let matchIndex = 0;\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    while ((bResult = bIterable.next())) {\n      if (bResult.done) {\n        break;\n      }\n\n      if (matchedIndices[matchIndex]) {\n        matchIndex++;\n        continue;\n      }\n\n      const aEntry = aResult.value;\n      const bEntry = bResult.value;\n\n      if (\n        state.equals(aEntry[0], bEntry[0], index, matchIndex, a, b, state)\n        && state.equals(aEntry[1], bEntry[1], aEntry[0], bEntry[0], a, b, state)\n      ) {\n        hasMatch = matchedIndices[matchIndex] = true;\n        break;\n      }\n\n      matchIndex++;\n    }\n\n    if (!hasMatch) {\n      return false;\n    }\n\n    index++;\n  }\n\n  return true;\n}\n\n/**\n * Whether the numbers are equal in value.\n */\nexport const areNumbersEqual = sameValueZeroEqual;\n\n/**\n * Whether the objects are equal in value.\n */\nexport function areObjectsEqual(a: Dictionary, b: Dictionary, state: State<any>): boolean {\n  const properties = keys(a);\n\n  let index = properties.length;\n\n  if (keys(b).length !== index) {\n    return false;\n  }\n\n  // Decrementing `while` showed faster results than either incrementing or\n  // decrementing `for` loop and than an incrementing `while` loop. Declarative\n  // methods like `some` / `every` were not used to avoid incurring the garbage\n  // cost of anonymous callbacks.\n  while (index-- > 0) {\n    if (!isPropertyEqual(a, b, state, properties[index]!)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nexport function areObjectsEqualStrict(a: Dictionary, b: Dictionary, state: State<any>): boolean {\n  const properties = getStrictProperties(a);\n\n  let index = properties.length;\n\n  if (getStrictProperties(b).length !== index) {\n    return false;\n  }\n\n  let property: string | symbol;\n  let descriptorA: ReturnType<typeof getOwnPropertyDescriptor>;\n  let descriptorB: ReturnType<typeof getOwnPropertyDescriptor>;\n\n  // Decrementing `while` showed faster results than either incrementing or\n  // decrementing `for` loop and than an incrementing `while` loop. Declarative\n  // methods like `some` / `every` were not used to avoid incurring the garbage\n  // cost of anonymous callbacks.\n  while (index-- > 0) {\n    property = properties[index]!;\n\n    if (!isPropertyEqual(a, b, state, property)) {\n      return false;\n    }\n\n    descriptorA = getOwnPropertyDescriptor(a, property);\n    descriptorB = getOwnPropertyDescriptor(b, property);\n\n    if (\n      (descriptorA || descriptorB)\n      && (!descriptorA\n        || !descriptorB\n        || descriptorA.configurable !== descriptorB.configurable\n        || descriptorA.enumerable !== descriptorB.enumerable\n        || descriptorA.writable !== descriptorB.writable)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nexport function arePrimitiveWrappersEqual(a: PrimitiveWrapper, b: PrimitiveWrapper): boolean {\n  return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n\n/**\n * Whether the regexps passed are equal in value.\n */\nexport function areRegExpsEqual(a: RegExp, b: RegExp): boolean {\n  return a.source === b.source && a.flags === b.flags;\n}\n\n/**\n * Whether the `Set`s are equal in value.\n */\nexport function areSetsEqual(a: Set<any>, b: Set<any>, state: State<any>): boolean {\n  const size = a.size;\n\n  if (size !== b.size) {\n    return false;\n  }\n\n  if (!size) {\n    return true;\n  }\n\n  const matchedIndices = new Array<true | undefined>(size);\n  const aIterable = a.values();\n\n  let aResult: IteratorResult<any>;\n  let bResult: IteratorResult<any>;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  while ((aResult = aIterable.next())) {\n    if (aResult.done) {\n      break;\n    }\n\n    const bIterable = b.values();\n\n    let hasMatch = false;\n    let matchIndex = 0;\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    while ((bResult = bIterable.next())) {\n      if (bResult.done) {\n        break;\n      }\n\n      if (\n        !matchedIndices[matchIndex]\n        && state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state)\n      ) {\n        hasMatch = matchedIndices[matchIndex] = true;\n        break;\n      }\n\n      matchIndex++;\n    }\n\n    if (!hasMatch) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the TypedArray instances are equal in value.\n */\nexport function areTypedArraysEqual(a: TypedArray, b: TypedArray) {\n  let index = a.byteLength;\n\n  if (b.byteLength !== index || a.byteOffset !== b.byteOffset) {\n    return false;\n  }\n\n  while (index-- > 0) {\n    if (a[index] !== b[index]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the URL instances are equal in value.\n */\nexport function areUrlsEqual(a: URL, b: URL): boolean {\n  return (\n    a.hostname === b.hostname\n    && a.pathname === b.pathname\n    && a.protocol === b.protocol\n    && a.port === b.port\n    && a.hash === b.hash\n    && a.username === b.username\n    && a.password === b.password\n  );\n}\n\nfunction isPropertyEqual(a: Dictionary, b: Dictionary, state: State<any>, property: string | symbol) {\n  if (\n    (property === REACT_OWNER || property === PREACT_OWNER || property === PREACT_VNODE)\n    && (a.$$typeof || b.$$typeof)\n  ) {\n    return true;\n  }\n\n  return hasOwn(b, property) && state.equals(a[property], b[property], property, property, a, b, state);\n}\n", "import {\n  areArrayBuffersEqual,\n  areArraysEqual as areArraysEqualDefault,\n  areDataViewsEqual,\n  areDatesEqual as areDatesEqualDefault,\n  areErrorsEqual as areErrorsEqualDefault,\n  areFunctionsEqual as areFunctionsEqualDefault,\n  areMapsEqual as areMapsEqualDefault,\n  areNumbersEqual as areNumbersEqualDefault,\n  areObjectsEqual as areObjectsEqualDefault,\n  areObjectsEqualStrict as areObjectsEqualStrictDefault,\n  arePrimitiveWrappersEqual as arePrimitiveWrappersEqualDefault,\n  areRegExpsEqual as areRegExpsEqualDefault,\n  areSetsEqual as areSetsEqualDefault,\n  areTypedArraysEqual as areTypedArraysEqualDefault,\n  areUrlsEqual as areUrlsEqualDefault,\n} from './equals.js';\nimport type {\n  ComparatorConfig,\n  CreateState,\n  CustomEqualCreatorOptions,\n  EqualityComparator,\n  InternalEqualityComparator,\n  State,\n} from './internalTypes.js';\nimport { combineComparators, createIsCircular, getShortTag } from './utils.js';\n\nconst ARRAY_BUFFER_TAG = '[object ArrayBuffer]';\nconst ARGUMENTS_TAG = '[object Arguments]';\nconst BOOLEAN_TAG = '[object Boolean]';\nconst DATA_VIEW_TAG = '[object DataView]';\nconst DATE_TAG = '[object Date]';\nconst ERROR_TAG = '[object Error]';\nconst MAP_TAG = '[object Map]';\nconst NUMBER_TAG = '[object Number]';\nconst OBJECT_TAG = '[object Object]';\nconst REG_EXP_TAG = '[object RegExp]';\nconst SET_TAG = '[object Set]';\nconst STRING_TAG = '[object String]';\nconst TYPED_ARRAY_TAGS: Record<string, boolean> = {\n  '[object Int8Array]': true,\n  '[object Uint8Array]': true,\n  '[object Uint8ClampedArray]': true,\n  '[object Int16Array]': true,\n  '[object Uint16Array]': true,\n  '[object Int32Array]': true,\n  '[object Uint32Array]': true,\n  '[object Float16Array]': true,\n  '[object Float32Array]': true,\n  '[object Float64Array]': true,\n  '[object BigInt64Array]': true,\n  '[object BigUint64Array]': true,\n};\nconst URL_TAG = '[object URL]';\n\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toString = Object.prototype.toString;\n\ninterface CreateIsEqualOptions<Meta> {\n  circular: boolean;\n  comparator: EqualityComparator<Meta>;\n  createState: CreateState<Meta> | undefined;\n  equals: InternalEqualityComparator<Meta>;\n  strict: boolean;\n}\n\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nexport function createEqualityComparator<Meta>({\n  areArrayBuffersEqual,\n  areArraysEqual,\n  areDataViewsEqual,\n  areDatesEqual,\n  areErrorsEqual,\n  areFunctionsEqual,\n  areMapsEqual,\n  areNumbersEqual,\n  areObjectsEqual,\n  arePrimitiveWrappersEqual,\n  areRegExpsEqual,\n  areSetsEqual,\n  areTypedArraysEqual,\n  areUrlsEqual,\n  unknownTagComparators,\n}: ComparatorConfig<Meta>): EqualityComparator<Meta> {\n  /**\n   * compare the value of the two objects and return true if they are equivalent in values\n   */\n  return function comparator(a: any, b: any, state: State<Meta>): boolean {\n    // If the items are strictly equal, no need to do a value comparison.\n    if (a === b) {\n      return true;\n    }\n\n    // If either of the items are nullish and fail the strictly equal check\n    // above, then they must be unequal.\n    if (a == null || b == null) {\n      return false;\n    }\n\n    const type = typeof a;\n\n    if (type !== typeof b) {\n      return false;\n    }\n\n    if (type !== 'object') {\n      if (type === 'number') {\n        return areNumbersEqual(a, b, state);\n      }\n\n      if (type === 'function') {\n        return areFunctionsEqual(a, b, state);\n      }\n\n      // If a primitive value that is not strictly equal, it must be unequal.\n      return false;\n    }\n\n    const constructor = a.constructor;\n\n    // Checks are listed in order of commonality of use-case:\n    //   1. Common complex object types (plain object, array)\n    //   2. Common data values (date, regexp)\n    //   3. Less-common complex object types (map, set)\n    //   4. Less-common data values (promise, primitive wrappers)\n    // Inherently this is both subjective and assumptive, however\n    // when reviewing comparable libraries in the wild this order\n    // appears to be generally consistent.\n\n    // Constructors should match, otherwise there is potential for false positives\n    // between class and subclass or custom object and POJO.\n    if (constructor !== b.constructor) {\n      return false;\n    }\n\n    // `isPlainObject` only checks against the object's own realm. Cross-realm\n    // comparisons are rare, and will be handled in the ultimate fallback, so\n    // we can avoid capturing the string tag.\n    if (constructor === Object) {\n      return areObjectsEqual(a, b, state);\n    }\n\n    // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n    // the string tag or doing an `instanceof` check.\n    if (Array.isArray(a)) {\n      return areArraysEqual(a, b, state);\n    }\n\n    // Try to fast-path equality checks for other complex object types in the\n    // same realm to avoid capturing the string tag. Strict equality is used\n    // instead of `instanceof` because it is more performant for the common\n    // use-case. If someone is subclassing a native class, it will be handled\n    // with the string tag comparison.\n\n    if (constructor === Date) {\n      return areDatesEqual(a, b, state);\n    }\n\n    if (constructor === RegExp) {\n      return areRegExpsEqual(a, b, state);\n    }\n\n    if (constructor === Map) {\n      return areMapsEqual(a, b, state);\n    }\n\n    if (constructor === Set) {\n      return areSetsEqual(a, b, state);\n    }\n\n    // Since this is a custom object, capture the string tag to determing its type.\n    // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n    const tag = toString.call(a);\n\n    if (tag === DATE_TAG) {\n      return areDatesEqual(a, b, state);\n    }\n\n    // For RegExp, the properties are not enumerable, and therefore will give false positives if\n    // tested like a standard object.\n    if (tag === REG_EXP_TAG) {\n      return areRegExpsEqual(a, b, state);\n    }\n\n    if (tag === MAP_TAG) {\n      return areMapsEqual(a, b, state);\n    }\n\n    if (tag === SET_TAG) {\n      return areSetsEqual(a, b, state);\n    }\n\n    if (tag === OBJECT_TAG) {\n      // The exception for value comparison is custom `Promise`-like class instances. These should\n      // be treated the same as standard `Promise` objects, which means strict equality, and if\n      // it reaches this point then that strict equality comparison has already failed.\n      return typeof a.then !== 'function' && typeof b.then !== 'function' && areObjectsEqual(a, b, state);\n    }\n\n    // If a URL tag, it should be tested explicitly. Like RegExp, the properties are not\n    // enumerable, and therefore will give false positives if tested like a standard object.\n    if (tag === URL_TAG) {\n      return areUrlsEqual(a, b, state);\n    }\n\n    // If an error tag, it should be tested explicitly. Like RegExp, the properties are not\n    // enumerable, and therefore will give false positives if tested like a standard object.\n    if (tag === ERROR_TAG) {\n      return areErrorsEqual(a, b, state);\n    }\n\n    // If an arguments tag, it should be treated as a standard object.\n    if (tag === ARGUMENTS_TAG) {\n      return areObjectsEqual(a, b, state);\n    }\n\n    if (TYPED_ARRAY_TAGS[tag]) {\n      return areTypedArraysEqual(a, b, state);\n    }\n\n    if (tag === ARRAY_BUFFER_TAG) {\n      return areArrayBuffersEqual(a, b, state);\n    }\n\n    if (tag === DATA_VIEW_TAG) {\n      return areDataViewsEqual(a, b, state);\n    }\n\n    // As the penultimate fallback, check if the values passed are primitive wrappers. This\n    // is very rare in modern JS, which is why it is deprioritized compared to all other object\n    // types.\n    if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n      return arePrimitiveWrappersEqual(a, b, state);\n    }\n\n    if (unknownTagComparators) {\n      let unknownTagComparator = unknownTagComparators[tag];\n\n      if (!unknownTagComparator) {\n        const shortTag = getShortTag(a);\n\n        if (shortTag) {\n          unknownTagComparator = unknownTagComparators[shortTag];\n        }\n      }\n\n      // If the custom config has an unknown tag comparator that matches the captured tag or the\n      // @@toStringTag, it is the source of truth for whether the values are equal.\n      if (unknownTagComparator) {\n        return unknownTagComparator(a, b, state);\n      }\n    }\n\n    // If not matching any tags that require a specific type of comparison, then we hard-code false because\n    // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n    //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n    //     comparison that can be made.\n    //   - For types that can be introspected, but rarely have requirements to be compared\n    //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n    //     use-cases (may be included in a future release, if requested enough).\n    //   - For types that can be introspected but do not have an objective definition of what\n    //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n    // In all cases, these decisions should be reevaluated based on changes to the language and\n    // common development practices.\n    return false;\n  };\n}\n\n/**\n * Create the configuration object used for building comparators.\n */\nexport function createEqualityComparatorConfig<Meta>({\n  circular,\n  createCustomConfig,\n  strict,\n}: CustomEqualCreatorOptions<Meta>): ComparatorConfig<Meta> {\n  let config = {\n    areArrayBuffersEqual,\n    areArraysEqual: strict ? areObjectsEqualStrictDefault : areArraysEqualDefault,\n    areDataViewsEqual,\n    areDatesEqual: areDatesEqualDefault,\n    areErrorsEqual: areErrorsEqualDefault,\n    areFunctionsEqual: areFunctionsEqualDefault,\n    areMapsEqual: strict ? combineComparators(areMapsEqualDefault, areObjectsEqualStrictDefault) : areMapsEqualDefault,\n    areNumbersEqual: areNumbersEqualDefault,\n    areObjectsEqual: strict ? areObjectsEqualStrictDefault : areObjectsEqualDefault,\n    arePrimitiveWrappersEqual: arePrimitiveWrappersEqualDefault,\n    areRegExpsEqual: areRegExpsEqualDefault,\n    areSetsEqual: strict ? combineComparators(areSetsEqualDefault, areObjectsEqualStrictDefault) : areSetsEqualDefault,\n    areTypedArraysEqual: strict\n      ? combineComparators(areTypedArraysEqualDefault, areObjectsEqualStrictDefault)\n      : areTypedArraysEqualDefault,\n    areUrlsEqual: areUrlsEqualDefault,\n    unknownTagComparators: undefined,\n  };\n\n  if (createCustomConfig) {\n    config = Object.assign({}, config, createCustomConfig(config));\n  }\n\n  if (circular) {\n    const areArraysEqual = createIsCircular(config.areArraysEqual);\n    const areMapsEqual = createIsCircular(config.areMapsEqual);\n    const areObjectsEqual = createIsCircular(config.areObjectsEqual);\n    const areSetsEqual = createIsCircular(config.areSetsEqual);\n\n    config = Object.assign({}, config, {\n      areArraysEqual,\n      areMapsEqual,\n      areObjectsEqual,\n      areSetsEqual,\n    });\n  }\n\n  return config;\n}\n\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nexport function createInternalEqualityComparator<Meta>(\n  compare: EqualityComparator<Meta>,\n): InternalEqualityComparator<Meta> {\n  return function (\n    a: any,\n    b: any,\n    _indexOrKeyA: any,\n    _indexOrKeyB: any,\n    _parentA: any,\n    _parentB: any,\n    state: State<Meta>,\n  ) {\n    return compare(a, b, state);\n  };\n}\n\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nexport function createIsEqual<Meta>({ circular, comparator, createState, equals, strict }: CreateIsEqualOptions<Meta>) {\n  if (createState) {\n    return function isEqual<A, B>(a: A, b: B): boolean {\n      const { cache = circular ? new WeakMap() : undefined, meta } = createState();\n\n      return comparator(a, b, {\n        cache,\n        equals,\n        meta,\n        strict,\n      } as State<Meta>);\n    };\n  }\n\n  if (circular) {\n    return function isEqual<A, B>(a: A, b: B): boolean {\n      return comparator(a, b, {\n        cache: new WeakMap(),\n        equals,\n        meta: undefined as Meta,\n        strict,\n      } as State<Meta>);\n    };\n  }\n\n  const state = {\n    cache: undefined,\n    equals,\n    meta: undefined,\n    strict,\n  } as State<Meta>;\n\n  return function isEqual<A, B>(a: A, b: B): boolean {\n    return comparator(a, b, state);\n  };\n}\n", "import {\n  createEqualityComparatorConfig,\n  createEqualityComparator,\n  createInternalEqualityComparator,\n  createIsEqual,\n} from './comparator.js';\nimport type { CustomEqualCreatorOptions } from './internalTypes.js';\nimport { sameValueZeroEqual } from './utils.js';\n\nexport { sameValueZeroEqual };\nexport type {\n  AnyEqualityComparator,\n  Cache,\n  CircularState,\n  ComparatorConfig,\n  CreateCustomComparatorConfig,\n  CreateState,\n  CustomEqualCreatorOptions,\n  DefaultState,\n  Dictionary,\n  EqualityComparator,\n  EqualityComparatorCreator,\n  InternalEqualityComparator,\n  PrimitiveWrapper,\n  State,\n  TypeEqualityComparator,\n  TypedArray,\n} from './internalTypes.js';\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nexport const deepEqual = createCustomEqual();\n\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nexport const strictDeepEqual = createCustomEqual({ strict: true });\n\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nexport const circularDeepEqual = createCustomEqual({ circular: true });\n\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nexport const strictCircularDeepEqual = createCustomEqual({\n  circular: true,\n  strict: true,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nexport const shallowEqual = createCustomEqual({\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nexport const strictShallowEqual = createCustomEqual({\n  strict: true,\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nexport const circularShallowEqual = createCustomEqual({\n  circular: true,\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nexport const strictCircularShallowEqual = createCustomEqual({\n  circular: true,\n  createInternalComparator: () => sameValueZeroEqual,\n  strict: true,\n});\n\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nexport function createCustomEqual<Meta = undefined>(options: CustomEqualCreatorOptions<Meta> = {}) {\n  const {\n    circular = false,\n    createInternalComparator: createCustomInternalComparator,\n    createState,\n    strict = false,\n  } = options;\n\n  const config = createEqualityComparatorConfig<Meta>(options);\n  const comparator = createEqualityComparator(config);\n  const equals = createCustomInternalComparator\n    ? createCustomInternalComparator(comparator)\n    : createInternalEqualityComparator(comparator);\n\n  return createIsEqual({ circular, comparator, createState, equals, strict });\n}\n", "\"use client\";\nimport { deepEqual } from \"fast-equals\";\nimport { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { TamboThreadMessage, useTamboClient, useTamboThread } from \"..\";\nimport { useTamboInteractable } from \"../providers/tambo-interactable-provider\";\nimport { TamboMessageContext } from \"./use-current-message\";\n\ntype StateUpdateResult<T> = [currentState: T, setState: (newState: T) => void];\n\n/**\n * A React hook that acts like useState, but also automatically updates the thread message's componentState.\n * If used within an interactable component (wrapped with withTamboInteractable), it updates the\n * interactable provider's global state (sent to Tambo on every request) instead of the remote thread message state.\n * For generated components, it updates both the local and remote thread message's componentState.\n *\n * Benefits: Passes user changes to AI, and when threads are returned, state is preserved.\n * Works in both generative and interactable component contexts.\n * @param keyName - The unique key to identify this state value within the message's componentState object\n * @param initialValue - Optional initial value for the state, used if no componentState value exists in the Tambo message containing this hook usage.\n * @param setFromProp - Optional value used to set the state value, only while no componentState value exists in the Tambo message containing this hook usage. Use this to allow streaming updates from a prop to the state value.\n * @param debounceTime - Optional debounce time in milliseconds (default: 500ms) to limit API calls.\n * @returns A tuple of [currentState, setState] similar to React's useState\n * @example\n * ```tsx\n * const [count, setCount] = useTamboComponentState(\"counter\", 0);\n * ```\n *\n * Use `setFromProp` to seed state from streamed props. During streaming,\n * state updates as new prop values arrive. Once streaming completes,\n * user edits take precedence over the original prop value.\n *\n * Pair with `useTamboStreamStatus` to disable inputs while streaming.\n * @see {@link https://docs.tambo.co/concepts/streaming/streaming-best-practices}\n */\nexport function useTamboComponentState<S = undefined>(\n  keyName: string,\n  initialValue?: S,\n  setFromProp?: S,\n  debounceTime?: number,\n): StateUpdateResult<S | undefined>;\nexport function useTamboComponentState<S>(\n  keyName: string,\n  initialValue: S,\n  setFromProp?: S,\n  debounceTime?: number,\n): StateUpdateResult<S>;\nexport function useTamboComponentState<S>(\n  keyName: string,\n  initialValue?: S,\n  setFromProp?: S,\n  debounceTime = 500,\n): StateUpdateResult<S> {\n  const message = useContext(TamboMessageContext);\n  const { updateThreadMessage } = useTamboThread();\n  const client = useTamboClient();\n  const componentId = message?.interactableMetadata?.id ?? null;\n  const { setInteractableState, getInteractableComponentState } =\n    useTamboInteractable();\n  const messageState = message?.componentState?.[keyName];\n  const interactableState = componentId\n    ? getInteractableComponentState(componentId)?.[keyName]\n    : undefined;\n  const initialState =\n    (interactableState as S) ?? (messageState as S) ?? initialValue;\n  const [localState, setLocalState] = useState<S | undefined>(initialState);\n  const [initializedFromThreadMessage, setInitializedFromThreadMessage] =\n    useState(messageState ? true : false);\n\n  // Optimistically update the local thread message's componentState\n  const updateLocalThreadMessage = useCallback(\n    async (newState: S, existingMessage: TamboThreadMessage | null) => {\n      if (!existingMessage) {\n        return;\n      }\n      const updatedMessage = {\n        threadId: existingMessage.threadId,\n        componentState: {\n          ...existingMessage.componentState,\n          [keyName]: newState,\n        },\n      };\n      await updateThreadMessage(existingMessage.id, updatedMessage, false);\n    },\n    [updateThreadMessage, keyName],\n  );\n\n  // Debounced callback to update the remote thread message's componentState\n  const updateRemoteThreadMessage = useDebouncedCallback(\n    async (newState: S, existingMessage: TamboThreadMessage | null) => {\n      if (!existingMessage) {\n        return;\n      }\n      await client.beta.threads.messages.updateComponentState(\n        existingMessage.id,\n        {\n          id: existingMessage.threadId,\n          state: { [keyName]: newState },\n        },\n      );\n    },\n    debounceTime,\n  );\n\n  const setValue = useCallback(\n    (newState: S) => {\n      setLocalState(newState);\n      if (componentId) {\n        // For interactable components, update the interactable provider's state\n        setInteractableState(componentId, keyName, newState);\n      } else if (message) {\n        // For generated components, update both local and remote thread message state\n        void updateLocalThreadMessage(newState, message);\n        void updateRemoteThreadMessage(newState, message);\n      }\n    },\n    [\n      message,\n      updateLocalThreadMessage,\n      updateRemoteThreadMessage,\n      setInteractableState,\n      componentId,\n      keyName,\n    ],\n  );\n\n  const existingInteractableState = componentId\n    ? getInteractableComponentState(componentId)?.[keyName]\n    : undefined;\n  const shouldUpdateInteractableInitial =\n    !!componentId &&\n    existingInteractableState === undefined &&\n    initialValue !== undefined;\n\n  // Set initial value in interactable state if we're in an interactable context and there's no existing state\n  useEffect(() => {\n    if (!shouldUpdateInteractableInitial) {\n      return;\n    }\n    setInteractableState(componentId, keyName, initialValue!);\n  }, [\n    shouldUpdateInteractableInitial,\n    componentId,\n    keyName,\n    initialValue,\n    setInteractableState,\n  ]);\n\n  const shouldSyncFromMessage =\n    !!message && messageState !== undefined && messageState !== null;\n\n  // Mirror the thread message's componentState value to the local state and interactable state\n  useEffect(() => {\n    if (!shouldSyncFromMessage) {\n      return;\n    }\n    setInitializedFromThreadMessage(true);\n    const stateValue = messageState as S;\n    setLocalState(stateValue);\n    if (componentId) {\n      setInteractableState(componentId, keyName, stateValue);\n    }\n  }, [\n    shouldSyncFromMessage,\n    messageState,\n    keyName,\n    setInteractableState,\n    componentId,\n  ]);\n\n  // Sync from interactable provider to local state when state changes externally (e.g., from Tambo tool call)\n  useEffect(() => {\n    if (!componentId) return;\n    // only update if different\n    setLocalState((prev) =>\n      deepEqual(prev, interactableState) ? prev : (interactableState as S),\n    );\n  }, [componentId, interactableState]);\n\n  // For editable fields that are set from a prop to allow streaming updates, don't overwrite a fetched state value set from the thread message with prop value on initial load.\n  useEffect(() => {\n    if (setFromProp !== undefined && !initializedFromThreadMessage) {\n      setLocalState(setFromProp as S);\n    }\n  }, [setFromProp, initializedFromThreadMessage]);\n\n  // Ensure pending changes are flushed on unmount (only for generated components)\n  useEffect(() => {\n    // Only flush remote updates for generated components, not interactable components\n    if (componentId) {\n      return;\n    }\n    return () => {\n      async function flushUpdates() {\n        try {\n          await updateRemoteThreadMessage.flush();\n        } catch (error) {\n          console.error(\n            \"Failed to flush pending thread message updates:\",\n            error,\n          );\n        }\n      }\n      // Fire-and-forget cleanup (errors handled inside)\n      void flushUpdates();\n    };\n  }, [updateRemoteThreadMessage, componentId]);\n\n  return [localState as S, setValue];\n}\n", "import {\n  useRef,\n  useEffect,\n  useMemo,\n  type Dispatch,\n  type SetStateAction,\n} from 'react';\n\nexport interface CallOptions {\n  /**\n   * Controls if the function should be invoked on the leading edge of the timeout.\n   */\n  leading?: boolean;\n  /**\n   * Controls if the function should be invoked on the trailing edge of the timeout.\n   */\n  trailing?: boolean;\n  /**\n   * Controls if the function should be invoked when the React component unmounts or\n   * the page is closed. This is usually desirable whenever `func` has persistent side-effects\n   * such as persists data.\n   *\n   * NOTE: If the callback calls `fetch()`, you usually also want to specify the `keepalive=true`\n   * option for `fetch()` so it can finish in the background after the page is closed.\n   *\n   * This option has no effect if `trailing == false`.\n   */\n  flushOnExit?: boolean;\n}\n\nexport interface Options extends CallOptions {\n  /**\n   * The maximum time the given function is allowed to be delayed before it's invoked.\n   */\n  maxWait?: number;\n  /**\n   * If the setting is set to true, all debouncing and timers will happen on the server side as well\n   */\n  debounceOnServer?: boolean;\n}\n\nexport interface ControlFunctions<ReturnT> {\n  /**\n   * Cancel pending function invocations\n   */\n  cancel: () => void;\n  /**\n   * Immediately invoke pending function invocations\n   */\n  flush: () => ReturnT | undefined;\n  /**\n   * Returns `true` if there are any pending function invocations\n   */\n  isPending: () => boolean;\n}\n\n/**\n * Subsequent calls to the debounced function return the result of the last func invocation.\n * Note, that if there are no previous invocations you will get undefined. You should check it in your code properly.\n */\nexport interface DebouncedState<T extends (...args: any) => ReturnType<T>>\n  extends ControlFunctions<ReturnType<T>> {\n  (...args: Parameters<T>): ReturnType<T> | undefined;\n}\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked, or until the next browser frame is drawn.\n *\n * The debounced function comes with a `cancel` method to cancel delayed `func`\n * invocations and a `flush` method to immediately invoke them.\n *\n * Provide `options` to indicate whether `func` should be invoked on the leading\n * and/or trailing edge of the `wait` timeout. The `func` is invoked with the\n * last arguments provided to the debounced function.\n *\n * Subsequent calls to the debounced function return the result of the last\n * `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `debounce` and `throttle`.\n *\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0]\n *  The number of milliseconds to delay; if omitted, `requestAnimationFrame` is\n *  used (if available, otherwise it will be setTimeout(...,0)).\n * @param {Object} [options={}] The options object.\n *  Controls if `func` should be invoked on the leading edge of the timeout.\n * @param {boolean} [options.leading=false]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {number} [options.maxWait]\n *  Controls if `func` should be invoked the trailing edge of the timeout.\n * @param {boolean} [options.trailing=true]\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * const resizeHandler = useDebouncedCallback(calculateLayout, 150);\n * window.addEventListener('resize', resizeHandler)\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * const clickHandler = useDebouncedCallback(sendMail, 300, {\n *   leading: true,\n *   trailing: false,\n * })\n * <button onClick={clickHandler}>click me</button>\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * const debounced = useDebouncedCallback(batchLog, 250, { 'maxWait': 1000 })\n * const source = new EventSource('/stream')\n * source.addEventListener('message', debounced)\n *\n * // Cancel the trailing debounced invocation.\n * window.addEventListener('popstate', debounced.cancel)\n *\n * // Check for pending invocations.\n * const status = debounced.isPending() ? \"Pending...\" : \"Ready\"\n */\nexport default function useDebouncedCallback<\n  T extends (...args: any) => ReturnType<T>,\n>(\n  func: T,\n  wait?: number,\n  options?: Options,\n  forceUpdate?: Dispatch<SetStateAction<object>>\n): DebouncedState<T> {\n  const lastCallTime = useRef(null);\n  const lastInvokeTime = useRef(0);\n  const firstInvokeTime = useRef(0);\n  const timerId = useRef(null);\n  const lastArgs = useRef<unknown[]>([]);\n  const lastThis = useRef<unknown>();\n  const result = useRef<ReturnType<T>>();\n  const funcRef = useRef(func);\n  const mounted = useRef(true);\n  const visibilityListener = useRef<VoidFunction>();\n  const debouncedRef = useRef<DebouncedState<T>>();\n  // Always keep the latest version of debounce callback, with no wait time.\n  funcRef.current = func;\n\n  const isClientSide = typeof window !== 'undefined';\n  // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n  const useRAF = !wait && wait !== 0 && isClientSide;\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n\n  wait = +wait || 0;\n  options = options || {};\n\n  const leading = !!options.leading;\n  const trailing = 'trailing' in options ? !!options.trailing : true; // `true` by default\n  const flushOnExit = !!options.flushOnExit && trailing;\n  const maxing = 'maxWait' in options;\n  const debounceOnServer =\n    'debounceOnServer' in options ? !!options.debounceOnServer : false; // `false` by default\n  const maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : null;\n\n  // You may have a question, why we have so many code under the useMemo definition.\n  //\n  // This was made as we want to escape from useCallback hell and\n  // not to initialize a number of functions each time useDebouncedCallback is called.\n  //\n  // It means that we have less garbage for our GC calls which improves performance.\n  // Also, it makes this library smaller.\n  //\n  // And the last reason, that the code without lots of useCallback with deps is easier to read.\n  // You have only one place for that.\n  const debounced = useMemo(() => {\n    const invokeFunc = (time: number) => {\n      const args = lastArgs.current;\n      const thisArg = lastThis.current;\n      lastArgs.current = lastThis.current = null;\n      lastInvokeTime.current = time;\n      firstInvokeTime.current = firstInvokeTime.current || time;\n\n      return (result.current = funcRef.current.apply(thisArg, args));\n    };\n\n    const startTimer = (pendingFunc: () => void, wait: number) => {\n      if (useRAF) cancelAnimationFrame(timerId.current);\n      timerId.current = useRAF\n        ? requestAnimationFrame(pendingFunc)\n        : setTimeout(pendingFunc, wait);\n    };\n\n    const shouldInvoke = (time: number) => {\n      if (!mounted.current) return false;\n\n      const timeSinceLastCall = time - lastCallTime.current;\n      const timeSinceLastInvoke = time - lastInvokeTime.current;\n\n      // Either this is the first call, activity has stopped and we're at the\n      // trailing edge, the system time has gone backwards and we're treating\n      // it as the trailing edge, or we've hit the `maxWait` limit.\n      return (\n        !lastCallTime.current ||\n        timeSinceLastCall >= wait ||\n        timeSinceLastCall < 0 ||\n        (maxing && timeSinceLastInvoke >= maxWait)\n      );\n    };\n\n    const trailingEdge = (time: number) => {\n      timerId.current = null;\n\n      // Only invoke if we have `lastArgs` which means `func` has been\n      // debounced at least once.\n      if (trailing && lastArgs.current) {\n        return invokeFunc(time);\n      }\n\n      lastArgs.current = lastThis.current = null;\n      return result.current;\n    };\n\n    const timerExpired = () => {\n      const time = Date.now();\n\n      if (leading && firstInvokeTime.current === lastInvokeTime.current) {\n        notifyManuallyTimerExpired();\n      }\n\n      if (shouldInvoke(time)) {\n        return trailingEdge(time);\n      }\n      // https://github.com/xnimorz/use-debounce/issues/97\n      if (!mounted.current) {\n        return;\n      }\n      // Remaining wait calculation\n      const timeSinceLastCall = time - lastCallTime.current;\n      const timeSinceLastInvoke = time - lastInvokeTime.current;\n      const timeWaiting = wait - timeSinceLastCall;\n      const remainingWait = maxing\n        ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)\n        : timeWaiting;\n\n      // Restart the timer\n      startTimer(timerExpired, remainingWait);\n    };\n\n    const notifyManuallyTimerExpired = () => {\n      if (forceUpdate) {\n        forceUpdate({});\n      }\n    };\n\n    const func: DebouncedState<T> = (...args: Parameters<T>): ReturnType<T> => {\n      if (!isClientSide && !debounceOnServer) {\n        return;\n      }\n      const time = Date.now();\n      const isInvoking = shouldInvoke(time);\n\n      lastArgs.current = args;\n      lastThis.current = this;\n      lastCallTime.current = time;\n\n      if (flushOnExit && !visibilityListener.current) {\n        visibilityListener.current = () => {\n          if (global.document?.visibilityState === 'hidden') {\n            debouncedRef.current.flush();\n          }\n        };\n        global.document?.addEventListener?.(\n          'visibilitychange',\n          visibilityListener.current\n        );\n      }\n      if (isInvoking) {\n        if (!timerId.current && mounted.current) {\n          // Reset any `maxWait` timer.\n          lastInvokeTime.current = lastCallTime.current;\n          // Start the timer for the trailing edge.\n          startTimer(timerExpired, wait);\n          // Invoke the leading edge.\n          return leading ? invokeFunc(lastCallTime.current) : result.current;\n        }\n        if (maxing) {\n          // Handle invocations in a tight loop.\n          startTimer(timerExpired, wait);\n          return invokeFunc(lastCallTime.current);\n        }\n      }\n      if (!timerId.current) {\n        startTimer(timerExpired, wait);\n      }\n      return result.current;\n    };\n\n    func.cancel = () => {\n      const hadTimer = timerId.current;\n      if (hadTimer) {\n        useRAF\n          ? cancelAnimationFrame(timerId.current)\n          : clearTimeout(timerId.current);\n      }\n      lastInvokeTime.current = 0;\n      lastArgs.current =\n        lastCallTime.current =\n        lastThis.current =\n        timerId.current =\n          null;\n\n      // Notify React to re-render when cancel is called and there was an active timer\n      if (hadTimer && forceUpdate) {\n        forceUpdate({});\n      }\n    };\n\n    func.isPending = () => {\n      return !!timerId.current;\n    };\n\n    func.flush = () => {\n      return !timerId.current ? result.current : trailingEdge(Date.now());\n    };\n\n    return func;\n  }, [\n    leading,\n    maxing,\n    wait,\n    maxWait,\n    trailing,\n    flushOnExit,\n    useRAF,\n    isClientSide,\n    debounceOnServer,\n    forceUpdate,\n  ]);\n\n  // Store reference to debounced function for cleanup\n  debouncedRef.current = debounced;\n\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      if (flushOnExit) {\n        debouncedRef.current.flush();\n      }\n      if (visibilityListener.current) {\n        global.document?.removeEventListener?.(\n          'visibilitychange',\n          visibilityListener.current\n        );\n        visibilityListener.current = null;\n      }\n      mounted.current = false;\n    };\n  }, [flushOnExit]);\n\n  return debounced;\n}\n", "import { useCallback, useRef, useState } from 'react';\nimport useDebouncedCallback, { DebouncedState } from './useDebouncedCallback';\n\nfunction valueEquality<T>(left: T, right: T): boolean {\n  return left === right;\n}\n\nexport default function useDebounce<T>(\n  value: T,\n  delay: number,\n  options?: {\n    maxWait?: number;\n    leading?: boolean;\n    trailing?: boolean;\n    equalityFn?: (left: T, right: T) => boolean;\n  }\n): [T, DebouncedState<(value: T) => void>] {\n  const eq = (options && options.equalityFn) || valueEquality;\n\n  const activeValue = useRef(value);\n  const [, forceUpdate] = useState({});\n  const debounced = useDebouncedCallback(\n    useCallback(\n      (value: T) => {\n        activeValue.current = value;\n        forceUpdate({});\n      },\n      [forceUpdate]\n    ),\n    delay,\n    options,\n    forceUpdate\n  );\n  const previousValue = useRef(value);\n\n  if (!eq(previousValue.current, value)) {\n    debounced(value);\n    previousValue.current = value;\n  }\n\n  return [activeValue.current as T, debounced];\n}\n", "import useDebouncedCallback, {\n  CallOptions,\n  DebouncedState,\n} from './useDebouncedCallback';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds (or once per browser frame).\n *\n * The throttled function comes with a `cancel` method to cancel delayed `func`\n * invocations and a `flush` method to immediately invoke them.\n *\n * Provide `options` to indicate whether `func` should be invoked on the leading\n * and/or trailing edge of the `wait` timeout. The `func` is invoked with the\n * last arguments provided to the throttled function.\n *\n * Subsequent calls to the throttled function return the result of the last\n * `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n * invocation will be deferred until the next frame is drawn (typically about\n * 16ms).\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `throttle` and `debounce`.\n *\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0]\n *  The number of milliseconds to throttle invocations to; if omitted,\n *  `requestAnimationFrame` is used (if available, otherwise it will be setTimeout(...,0)).\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * const scrollHandler = useThrottledCallback(updatePosition, 100)\n * window.addEventListener('scroll', scrollHandler)\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * const throttled = useThrottledCallback(renewToken, 300000, { 'trailing': false })\n * <button onClick={throttled}>click</button>\n *\n * // Cancel the trailing throttled invocation.\n * window.addEventListener('popstate', throttled.cancel);\n */\nexport default function useThrottledCallback<\n  T extends (...args: any) => ReturnType<T>,\n>(\n  func: T,\n  wait: number,\n  { leading = true, trailing = true, flushOnExit = false }: CallOptions = {}\n): DebouncedState<T> {\n  return useDebouncedCallback(func, wait, {\n    maxWait: wait,\n    leading,\n    trailing,\n    flushOnExit,\n  });\n}\n", "// react-sdk/src/providers/tambo-interactable-provider.tsx\n\"use client\";\nimport { deepEqual } from \"fast-equals\";\nimport { JSONSchema7 } from \"json-schema\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { z } from \"zod/v3\";\nimport { createInteractablesContextHelper } from \"../context-helpers/current-interactables-context-helper\";\nimport {\n  TamboInteractableComponent,\n  type TamboInteractableContext,\n} from \"../model/tambo-interactable\";\nimport { makeJsonSchemaPartial, schemaToJsonSchema } from \"../schema\";\nimport { assertValidName } from \"../util/validate-component-name\";\nimport { useTamboComponent } from \"./tambo-component-provider\";\nimport { useTamboContextHelpers } from \"./tambo-context-helpers-provider\";\n\nconst TamboInteractableContext = createContext<TamboInteractableContext>({\n  interactableComponents: [],\n  addInteractableComponent: () => \"\",\n  removeInteractableComponent: () => {},\n  updateInteractableComponentProps: () => \"\",\n  getInteractableComponent: () => undefined,\n  getInteractableComponentsByName: () => [],\n  clearAllInteractableComponents: () => {},\n  setInteractableState: () => {},\n  getInteractableComponentState: () => undefined,\n  setInteractableSelected: () => {},\n  clearInteractableSelections: () => {},\n});\n\n/**\n * The TamboInteractableProvider manages a list of components that are currently\n * interactable, allowing tambo to interact with them by updating their props. It also registers tools\n * for Tambo to perform CRUD operations on the components list.\n * @param props - The props for the TamboInteractableProvider\n * @param props.children - The children to wrap\n * @returns The TamboInteractableProvider component\n */\nexport const TamboInteractableProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const [interactableComponents, setInteractableComponents] = useState<\n    TamboInteractableComponent[]\n  >([]);\n  const { registerTool } = useTamboComponent();\n  const { addContextHelper, removeContextHelper } = useTamboContextHelpers();\n\n  // Create a stable context helper function for interactable components\n  const interactablesContextHelper = useMemo(\n    () => createInteractablesContextHelper(interactableComponents),\n    [interactableComponents],\n  );\n\n  // Register the interactables context helper\n  useEffect(() => {\n    addContextHelper(\"interactables\", interactablesContextHelper);\n\n    return () => {\n      removeContextHelper(\"interactables\");\n    };\n  }, [interactablesContextHelper, addContextHelper, removeContextHelper]);\n\n  useEffect(() => {\n    if (interactableComponents.length > 0) {\n      registerTool({\n        name: \"get_all_interactable_components\",\n        description:\n          \"Only use this tool if the user is asking about interactable components.Get all currently interactable components with their details including their current props. These are components that you can interact with on behalf of the user.\",\n        tool: () => {\n          return {\n            components: interactableComponents,\n          };\n        },\n        inputSchema: z.object({}),\n        outputSchema: z.object({\n          components: z.array(\n            z.object({\n              id: z.string(),\n              name: z.string(),\n              props: z.record(z.string(), z.any()),\n              propsSchema: z.record(z.string(), z.any()).optional(),\n            }),\n          ),\n        }),\n      });\n\n      registerTool({\n        name: \"get_interactable_component_by_id\",\n        description: \"Get a specific interactable component by its ID\",\n        tool: ({ componentId }) => {\n          const component = interactableComponents.find(\n            (c) => c.id === componentId,\n          );\n\n          if (!component) {\n            return {\n              success: false,\n              error: `Component with ID ${componentId} not found`,\n            } as const;\n          }\n\n          return {\n            success: true,\n            component: {\n              id: component.id,\n              componentName: component.name,\n              props: component.props,\n            },\n          } as const;\n        },\n        inputSchema: z.object({\n          componentId: z.string().describe(\"The ID of the component\"),\n        }),\n        outputSchema: z.discriminatedUnion(\"success\", [\n          z.object({\n            success: z.literal(true),\n            component: z\n              .object({\n                id: z.string(),\n                componentName: z.string(),\n                props: z.record(z.string(), z.any()),\n              })\n              .optional(),\n          }),\n          z.object({\n            success: z.literal(false),\n            error: z.string(),\n          }),\n        ]),\n      });\n\n      registerTool({\n        name: \"remove_interactable_component\",\n        description: \"Remove an interactable component from the system\",\n        tool: ({ componentId }) => {\n          const component = interactableComponents.find(\n            (c) => c.id === componentId,\n          );\n\n          if (!component) {\n            return {\n              success: false,\n              error: `Component with ID ${componentId} not found`,\n            } as const;\n          }\n\n          setInteractableComponents((prev) =>\n            prev.filter((c) => c.id !== componentId),\n          );\n\n          return {\n            success: true,\n            componentId,\n            removedComponent: {\n              id: component.id,\n              componentName: component.name,\n              props: component.props,\n            },\n          } as const;\n        },\n        inputSchema: z.object({\n          componentId: z.string().describe(\"The ID of the component\"),\n        }),\n        outputSchema: z.discriminatedUnion(\"success\", [\n          z.object({\n            success: z.literal(true),\n            componentId: z.string(),\n            removedComponent: z.object({\n              id: z.string(),\n              componentName: z.string(),\n              props: z.record(z.string(), z.any()),\n            }),\n          }),\n          z.object({\n            success: z.literal(false),\n            error: z.string(),\n          }),\n        ]),\n      });\n    }\n  }, [interactableComponents, registerTool]);\n\n  const updateInteractableComponentProps = useCallback(\n    (id: string, newProps: Record<string, any>): string => {\n      if (!newProps || Object.keys(newProps).length === 0) {\n        return `Warning: No props provided for component with ID ${id}.`;\n      }\n\n      setInteractableComponents((prev) => {\n        const component = prev.find((c) => c.id === id);\n        if (!component) {\n          return prev;\n        }\n\n        // Compare props shallowly\n        const propsChanged = Object.entries(newProps).some(([key, value]) => {\n          return component.props[key] !== value;\n        });\n\n        if (!propsChanged) {\n          return prev; // unchanged\n        }\n\n        // Apply partial update\n        const updated = {\n          ...component,\n          props: { ...component.props, ...newProps },\n        };\n\n        const updatedComponents = [...prev];\n        const idx = prev.findIndex((c) => c.id === id);\n        updatedComponents[idx] = updated;\n\n        return updatedComponents;\n      });\n\n      return \"Updated successfully\";\n    },\n    [],\n  );\n\n  const updateInteractableComponentState = useCallback(\n    (componentId: string, newState: Record<string, unknown>): string => {\n      if (!newState || Object.keys(newState).length === 0) {\n        return `Warning: No state values provided for component with ID ${componentId}.`;\n      }\n\n      setInteractableComponents((components = []) => {\n        const component = components.find((c) => c.id === componentId);\n        if (!component) return components;\n\n        const prevState = component.state ?? {};\n        const updatedState = { ...prevState, ...newState };\n        if (deepEqual(prevState, updatedState)) return components;\n\n        // TODO(lachieh): validate state against schema?\n\n        const updated = {\n          ...component,\n          state: updatedState,\n        };\n\n        return components.map((c) => (c.id === componentId ? updated : c));\n      });\n\n      return \"Updated successfully\";\n    },\n    [],\n  );\n\n  const registerInteractableComponentPropsUpdateTool = useCallback(\n    (component: TamboInteractableComponent, maxNameLength = 60) => {\n      const tamboToolNamePart = `update_component_props_`;\n      const availableLength = maxNameLength - tamboToolNamePart.length;\n      if (component.id.length > availableLength) {\n        throw new Error(\n          `Interactable component id ${component.id} is too long. It must be less than ${availableLength} characters.`,\n        );\n      }\n\n      // Build newProps schema as JSON Schema\n      let newPropsSchema: JSONSchema7;\n      if (component.propsSchema) {\n        // Convert any supported schema to JSON Schema, then make partial\n        const fullSchema = schemaToJsonSchema(component.propsSchema);\n        newPropsSchema = makeJsonSchemaPartial(fullSchema);\n      } else {\n        // No schema - allow any properties\n        newPropsSchema = { type: \"object\", additionalProperties: true };\n      }\n\n      // Build the full input schema as JSON Schema\n      const inputSchema: JSONSchema7 = {\n        type: \"object\",\n        properties: {\n          componentId: {\n            type: \"string\",\n            description: \"The ID of the interactable component to update\",\n          },\n          newProps: {\n            ...newPropsSchema,\n            description:\n              \"The props to update. Provide only the props you want to change.\",\n          },\n        },\n        required: [\"componentId\", \"newProps\"],\n      };\n\n      registerTool({\n        name: `${tamboToolNamePart}${component.id}`,\n        description: `Update the props of interactable component ${component.id} (${component.name}). Provide partial props (only props to change).`,\n        tool: ({ componentId, newProps }) => {\n          return updateInteractableComponentProps(componentId, newProps);\n        },\n        inputSchema,\n        outputSchema: z.string(),\n      });\n    },\n    [registerTool, updateInteractableComponentProps],\n  );\n\n  const registerInteractableComponentStateUpdateTool = useCallback(\n    (component: TamboInteractableComponent, maxNameLength = 60) => {\n      const tamboToolNamePart = `update_component_state_`;\n      const availableLength = maxNameLength - tamboToolNamePart.length;\n      if (component.id.length > availableLength) {\n        throw new Error(\n          `Interactable component id ${component.id} is too long. It must be less than ${availableLength} characters.`,\n        );\n      }\n\n      // Build newState schema as JSON Schema\n      let newStateSchema: JSONSchema7 = {\n        type: \"object\",\n        additionalProperties: true,\n      };\n      if (component.stateSchema) {\n        // Convert any supported schema to JSON Schema, then make partial\n        const fullSchema = schemaToJsonSchema(component.stateSchema);\n        newStateSchema = makeJsonSchemaPartial(fullSchema);\n      }\n\n      // Build the full input schema as JSON Schema\n      const inputSchema: JSONSchema7 = {\n        type: \"object\",\n        properties: {\n          componentId: {\n            type: \"string\",\n            description: \"The ID of the interactable component to update\",\n          },\n          newState: {\n            ...newStateSchema,\n            description:\n              \"The state values to update. Provide only the keys you want to change.\",\n          },\n        },\n        required: [\"componentId\", \"newState\"],\n      };\n\n      registerTool({\n        name: `${tamboToolNamePart}${component.id}`,\n        description: `Update the state of interactable component ${component.id} (${component.name}). You may provide partial state (only keys to change).`,\n        tool: ({ componentId, newState }) => {\n          return updateInteractableComponentState(componentId, newState);\n        },\n        inputSchema,\n        outputSchema: z.string(),\n      });\n    },\n    [registerTool, updateInteractableComponentState],\n  );\n\n  const addInteractableComponent = useCallback(\n    (\n      component: Omit<TamboInteractableComponent, \"id\" | \"createdAt\">,\n    ): string => {\n      // Validate component name\n      assertValidName(component.name, \"component\");\n\n      // Add a random part to the component name to make it unique when using multiple instances of the same component.\n      const tamboGeneratedNamePart = `-${Math.random().toString(36).slice(2, 5)}`;\n      const id = `${component.name}${tamboGeneratedNamePart}`;\n      const newComponent: TamboInteractableComponent = {\n        ...component,\n        id,\n        state: component.state ?? {},\n      };\n\n      registerInteractableComponentPropsUpdateTool(newComponent);\n      registerInteractableComponentStateUpdateTool(newComponent);\n\n      setInteractableComponents((prev) => {\n        return [...prev, newComponent];\n      });\n\n      return id;\n    },\n    [\n      registerInteractableComponentPropsUpdateTool,\n      registerInteractableComponentStateUpdateTool,\n    ],\n  );\n\n  const removeInteractableComponent = useCallback((id: string) => {\n    setInteractableComponents((prev) => prev.filter((c) => c.id !== id));\n  }, []);\n\n  const getInteractableComponent = useCallback(\n    <P, S>(id: string): TamboInteractableComponent<P, S> | undefined => {\n      return interactableComponents.find((c) => c.id === id) as\n        | TamboInteractableComponent<P, S>\n        | undefined;\n    },\n    [interactableComponents],\n  );\n\n  const getInteractableComponentsByName = useCallback(\n    (componentName: string) => {\n      return interactableComponents.filter((c) => c.name === componentName);\n    },\n    [interactableComponents],\n  );\n\n  const clearAllInteractableComponents = useCallback(() => {\n    setInteractableComponents([]);\n  }, []);\n\n  const setInteractableStateValue = useCallback(\n    (componentId: string, key: string, value: unknown) => {\n      setInteractableComponents((prev) => {\n        const component = prev.find((c) => c.id === componentId);\n        if (!component) {\n          console.warn(\n            `Tried to update state for component ${componentId} but it was not found.`,\n          );\n          return prev;\n        }\n\n        const updated = {\n          ...component,\n          state: {\n            ...component.state,\n            [key]: value,\n          },\n        };\n\n        const updatedComponents = prev.map((component) => {\n          if (component.id === componentId) {\n            return updated;\n          }\n          return component;\n        });\n\n        return updatedComponents;\n      });\n    },\n    [],\n  );\n\n  const getInteractableComponentState = useCallback(\n    (componentId: string) => {\n      const component = interactableComponents.find(\n        (c) => c.id === componentId,\n      );\n      return component?.state;\n    },\n    [interactableComponents],\n  );\n\n  const setInteractableSelected = useCallback(\n    (componentId: string, isSelected: boolean) => {\n      setInteractableComponents((prev) => {\n        let found = false;\n        const next = prev.map((component) => {\n          if (component.id !== componentId) return component;\n          found = true;\n          return component.isSelected === isSelected\n            ? component\n            : { ...component, isSelected: isSelected };\n        });\n        return found ? next : prev;\n      });\n    },\n    [],\n  );\n\n  const clearInteractableSelections = useCallback(() => {\n    setInteractableComponents((prev) => {\n      if (!prev.some((c) => c.isSelected)) return prev;\n      return prev.map((c) => (c.isSelected ? { ...c, isSelected: false } : c));\n    });\n  }, []);\n\n  const value: TamboInteractableContext = {\n    interactableComponents,\n    addInteractableComponent,\n    removeInteractableComponent,\n    updateInteractableComponentProps,\n    getInteractableComponent,\n    getInteractableComponentsByName,\n    clearAllInteractableComponents,\n    setInteractableState: setInteractableStateValue,\n    getInteractableComponentState,\n    setInteractableSelected,\n    clearInteractableSelections,\n  };\n\n  return (\n    <TamboInteractableContext.Provider value={value}>\n      {children}\n    </TamboInteractableContext.Provider>\n  );\n};\n\n/**\n * The useTamboInteractable hook provides access to the interactable component\n * management functions.\n * @returns The interactable component management functions\n */\nexport const useTamboInteractable = () => {\n  return useContext(TamboInteractableContext);\n};\n\n/**\n * Hook to get a cloned snapshot of the current interactables.\n * Returns a shallow copy of the array with cloned items and props to prevent\n * external mutation from affecting internal state.\n * @returns The current interactables snapshot (cloned).\n */\nexport const useCurrentInteractablesSnapshot = () => {\n  const { interactableComponents } = useTamboInteractable();\n  // Clone the array and each item/props to prevent mutation\n  const copy = interactableComponents.map((c) => ({\n    ...c,\n    props: { ...c.props },\n  }));\n\n  return copy;\n};\n", "import { ContextHelperFn } from \"./types\";\n\n/**\n * Prebuilt context helper that provides information about all interactable components currently on the page.\n * This gives the AI awareness of what components it can interact with and their current state.\n * @returns an object with description and components, or null to skip including this context.\n * To disable this helper, override it with a function that returns null:\n * @example\n * ```tsx\n * // To disable the default interactables context\n * const { addContextHelper } = useTamboContextHelpers();\n * addContextHelper(\"interactables\", () => null);\n *\n * // To customize the context\n * addContextHelper(\"interactables\", () => ({\n *   description: \"Custom description\",\n *   components: getCustomComponentsSubset()\n * }));\n * ```\n */\nexport const currentInteractablesContextHelper: ContextHelperFn = () => {\n  // This will be provided by the interactable provider when it registers this helper\n  // Since we're provider-only now, this function gets replaced at runtime\n  return null;\n};\n\n/**\n * Creates an interactables context helper with access to the current components.\n * This is used internally by TamboInteractableProvider.\n * @param components Array of interactable components\n * @returns A context helper function that returns component metadata or null if no components exist\n */\nexport const createInteractablesContextHelper = (\n  components: unknown[],\n): ContextHelperFn => {\n  return () => {\n    if (!Array.isArray(components) || components.length === 0) {\n      return null; // No interactable components on the page\n    }\n\n    return {\n      components: components.map((component) => {\n        // Type guard: ensure component is an object with the expected properties\n        if (typeof component !== \"object\" || component === null) {\n          return {\n            id: \"unknown\",\n            componentName: \"unknown\",\n            description: \"invalid component\",\n            props: undefined,\n            propsSchema: \"Not specified\",\n            state: undefined,\n            isSelectedForInteraction: false,\n            stateSchema: \"Not specified\",\n          };\n        }\n\n        const comp = component as Record<string, unknown>;\n        return {\n          id: String(comp.id ?? \"unknown\"),\n          componentName: String(comp.name ?? \"unknown\"),\n          description: String(comp.description ?? \"\"),\n          props: comp.props,\n          propsSchema: comp.propsSchema\n            ? \"Available - use component-specific update tools\"\n            : \"Not specified\",\n          state: comp.state,\n          isSelectedForInteraction:\n            (comp.isSelectedForInteraction as boolean | undefined) ?? false,\n          stateSchema: comp.stateSchema\n            ? \"Available - use component-specific update tools\"\n            : \"Not specified\",\n        };\n      }),\n    };\n  };\n};\n", "export * as core from \"../core/index.js\";\nexport * from \"./schemas.js\";\nexport * from \"./checks.js\";\nexport * from \"./errors.js\";\nexport * from \"./parse.js\";\nexport * from \"./compat.js\";\n// zod-specified\nimport { config } from \"../core/index.js\";\nimport en from \"../locales/en.js\";\nconfig(en());\nexport { globalRegistry, registry, config, function, $output, $input, $brand, clone, regexes, treeifyError, prettifyError, formatError, flattenError, toJSONSchema, TimePrecision, NEVER, } from \"../core/index.js\";\nexport * as locales from \"../locales/index.js\";\n// iso\n// must be exported from top-level\n// https://github.com/colinhacks/zod/issues/4491\nexport { ZodISODateTime, ZodISODate, ZodISOTime, ZodISODuration } from \"./iso.js\";\nexport * as iso from \"./iso.js\";\nexport * as coerce from \"./coerce.js\";\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n", "import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => inst.issues.push(issue),\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => inst.issues.push(...issues),\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n", "import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n", "import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    // inst.nonstrict = () => inst.clone({ ...inst._zod.def, catchall: api.unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType: union([keyType, never()]),\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                _issue.continue ?? (_issue.continue = true);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    const ch = check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodPipe,\n    Boolean: ZodBoolean,\n    String: ZodString,\n    Transform: ZodTransform,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n", "// Zod 3 compat layer\nimport * as core from \"../core/index.js\";\n/** @deprecated Use the raw string literal codes instead, e.g. \"invalid_type\". */\nexport const ZodIssueCode = {\n    invalid_type: \"invalid_type\",\n    too_big: \"too_big\",\n    too_small: \"too_small\",\n    invalid_format: \"invalid_format\",\n    not_multiple_of: \"not_multiple_of\",\n    unrecognized_keys: \"unrecognized_keys\",\n    invalid_union: \"invalid_union\",\n    invalid_key: \"invalid_key\",\n    invalid_element: \"invalid_element\",\n    invalid_value: \"invalid_value\",\n    custom: \"custom\",\n};\nexport { $brand, config } from \"../core/index.js\";\n/** @deprecated Use `z.config(params)` instead. */\nexport function setErrorMap(map) {\n    core.config({\n        customError: map,\n    });\n}\n/** @deprecated Use `z.config()` instead. */\nexport function getErrorMap() {\n    return core.config().customError;\n}\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport function string(params) {\n    return core._coercedString(schemas.ZodString, params);\n}\nexport function number(params) {\n    return core._coercedNumber(schemas.ZodNumber, params);\n}\nexport function boolean(params) {\n    return core._coercedBoolean(schemas.ZodBoolean, params);\n}\nexport function bigint(params) {\n    return core._coercedBigint(schemas.ZodBigInt, params);\n}\nexport function date(params) {\n    return core._coercedDate(schemas.ZodDate, params);\n}\n", "import { JSONSchema7 } from \"json-schema\";\nimport { z } from \"zod/v4\";\n\nconst jsonSchemaType = z.union([\n  z.literal(\"object\"),\n  z.literal(\"array\"),\n  z.literal(\"string\"),\n  z.literal(\"number\"),\n  z.literal(\"integer\"),\n  z.literal(\"boolean\"),\n  z.literal(\"null\"),\n  z.array(\n    z.union([\n      z.literal(\"object\"),\n      z.literal(\"array\"),\n      z.literal(\"string\"),\n      z.literal(\"number\"),\n      z.literal(\"integer\"),\n      z.literal(\"boolean\"),\n      z.literal(\"null\"),\n    ]),\n  ),\n]);\n\nconst jsonSchemaTopLevel = z\n  .looseObject({\n    type: jsonSchemaType.optional(),\n    properties: z.record(z.string(), z.unknown()).optional(),\n    items: z.union([z.array(z.unknown()), z.unknown()]).optional(),\n    required: z.array(z.string()).optional(),\n    additionalProperties: z.union([z.boolean(), z.unknown()]).optional(),\n    enum: z.array(z.unknown()).optional(),\n    const: z.unknown().optional(),\n    $ref: z.string().optional(),\n    $id: z.string().optional(),\n    $schema: z.string().optional(),\n    title: z.string().optional(),\n    description: z.string().optional(),\n  })\n  .refine((value) => {\n    return (\n      value.type !== undefined ||\n      value.properties !== undefined ||\n      value.items !== undefined ||\n      value.enum !== undefined ||\n      value.const !== undefined ||\n      value.$ref !== undefined\n    );\n  });\n\n/**\n * Basic heuristic to check if an object looks like a JSON Schema at the top level.\n *\n * This uses a Zod schema to verify only top-level keys (type, properties, items,\n * etc.). It intentionally does not perform full JSON Schema validation; a more\n * thorough check should be done server-side.\n * @param obj - The value to check\n * @returns True if the value appears to be a JSON Schema\n */\nexport function looksLikeJSONSchema(obj: unknown): obj is JSONSchema7 {\n  if (obj === null || typeof obj !== \"object\") {\n    return false;\n  }\n\n  return jsonSchemaTopLevel.safeParse(obj).success;\n}\n\n/**\n * Extended JSON Schema type that includes draft 2020-12 features like prefixItems.\n * The json-schema package types are from draft-07 and don't include prefixItems.\n */\nexport type JSONSchema7Extended = JSONSchema7 & {\n  prefixItems?: JSONSchema7[];\n};\n\n/**\n * Checks if a JSON Schema represents a tuple (array with positional items).\n * Supports both draft-07 (items as array) and draft 2020-12 (prefixItems).\n * @param schema - The JSON Schema to check\n * @returns True if the schema represents a tuple\n */\nexport function isJsonSchemaTuple(\n  schema: JSONSchema7Extended,\n): schema is JSONSchema7Extended & { type: \"array\" } {\n  if (schema.type !== \"array\") {\n    return false;\n  }\n\n  // Draft 2020-12: prefixItems array\n  if (schema.prefixItems && Array.isArray(schema.prefixItems)) {\n    return true;\n  }\n\n  // Draft-07: items as array (not object)\n  if (Array.isArray(schema.items)) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Gets the tuple items from a JSON Schema.\n * Supports both draft-07 (items as array) and draft 2020-12 (prefixItems).\n * @param schema - The JSON Schema tuple\n * @returns Array of item schemas, or undefined if not a tuple\n */\nexport function getJsonSchemaTupleItems(\n  schema: JSONSchema7Extended,\n): JSONSchema7[] | undefined {\n  if (schema.type !== \"array\") {\n    return undefined;\n  }\n\n  // Draft 2020-12: prefixItems array\n  if (schema.prefixItems && Array.isArray(schema.prefixItems)) {\n    return schema.prefixItems;\n  }\n\n  // Draft-07: items as array\n  if (Array.isArray(schema.items)) {\n    return schema.items as JSONSchema7[];\n  }\n\n  return undefined;\n}\n\n/**\n * Creates a partial version of a JSON Schema by removing required constraints.\n * This allows LLM to provide only the properties it wants to update.\n * @param schema - The JSON Schema to make partial\n * @returns A new JSON Schema with the required constraint removed\n */\nexport function makeJsonSchemaPartial(schema: JSONSchema7): JSONSchema7 {\n  const { required: _required, ...rest } = schema;\n  return rest;\n}\n", "import { StandardSchemaV1 } from \"@standard-schema/spec\";\n\n/**\n * Type guard to check if an object implements the Standard Schema interface.\n *\n * Standard Schema compliant validators have a `~standard` property containing\n * metadata about the schema including version, vendor, and validate function.\n * Uses duck typing to avoid cross-version Zod compatibility issues.\n * @param obj - The object to check\n * @returns True if the object implements StandardSchemaV1\n * @example\n * ```typescript\n * import { z } from \"zod/v4\";\n *\n * const zodSchema = z.object({ name: z.string() });\n * isStandardSchema(zodSchema); // true\n *\n * const jsonSchema = { type: \"object\", properties: { name: { type: \"string\" } } };\n * isStandardSchema(jsonSchema); // false\n * ```\n */\nexport function isStandardSchema(obj: unknown): obj is StandardSchemaV1 {\n  if (typeof obj !== \"object\" || obj === null) {\n    return false;\n  }\n\n  if (!(\"~standard\" in obj)) {\n    return false;\n  }\n\n  const standard = obj[\"~standard\"];\n  if (typeof standard !== \"object\" || standard === null) {\n    return false;\n  }\n\n  // Check required Standard Schema v1 properties\n  return (\n    \"version\" in standard &&\n    standard.version === 1 &&\n    \"vendor\" in standard &&\n    typeof standard.vendor === \"string\" &&\n    \"validate\" in standard &&\n    typeof standard.validate === \"function\"\n  );\n}\n", "/**\n * Schema utilities for working with Standard Schema and JSON Schema.\n *\n * This module provides a unified interface for handling different schema types\n * used in Tambo components and tools. It uses Standard Schema (https://standardschema.dev/)\n * as the primary interface, which is implemented by Zod 3.24+ and other validation libraries.\n *\n * JSON Schema conversion is handled by `@standard-community/standard-json`.\n * @module schema\n */\n\nimport { loadVendor, toJsonSchema } from \"@standard-community/standard-json\";\nimport type { JSONSchema7 } from \"json-schema\";\nimport { zodToJsonSchema } from \"zod-to-json-schema\";\nimport { toJSONSchema as zod4ToJSONSchema } from \"zod/v4/core\";\nimport {\n  ParameterSpec,\n  SupportedSchema,\n  TamboTool,\n} from \"../model/component-metadata\";\nimport { looksLikeJSONSchema } from \"./json-schema\";\nimport { isStandardSchema } from \"./standard-schema\";\n\n/**\n * Register the zod vendor handler for synchronous JSON Schema conversion.\n * This uses Zod 4's native toJSONSchema for Zod 4.x schemas and zod-to-json-schema for Zod 3.x.\n */\nloadVendor(\"zod\", (schema: unknown): JSONSchema7 => {\n  // Check if this is a Zod 4 schema (has _zod property)\n  if (schema && typeof schema === \"object\" && \"_zod\" in schema) {\n    // Use Zod 4's native toJSONSchema from zod/v4/core\n    // Cast through unknown since the Zod 4 internal types don't match our detection pattern\n    return zod4ToJSONSchema(\n      schema as unknown as Parameters<typeof zod4ToJSONSchema>[0],\n    ) as JSONSchema7;\n  }\n  // Fall back to zod-to-json-schema for Zod 3.x\n  return zodToJsonSchema(\n    schema as Parameters<typeof zodToJsonSchema>[0],\n  ) as JSONSchema7;\n});\n\n/**\n * Converts a schema (Standard Schema or JSON Schema) to a JSON Schema object.\n *\n * If the schema is already a JSON Schema, it is returned as-is.\n * For Standard Schema validators (Zod 3.24+, etc.), uses\n * `@standard-community/standard-json` for conversion.\n * @param schema - The schema to convert\n * @returns The JSON Schema representation\n * @example\n * ```typescript\n * import { z } from \"zod/v4\";\n *\n * // Convert a Zod schema\n * const zodSchema = z.object({ name: z.string() });\n * const jsonSchema = schemaToJsonSchema(zodSchema);\n *\n * // Pass through a JSON Schema\n * const existingJsonSchema = { type: \"object\", properties: { name: { type: \"string\" } } };\n * schemaToJsonSchema(existingJsonSchema); // returns the same object\n * ```\n */\nexport function schemaToJsonSchema(schema: SupportedSchema): JSONSchema7 {\n  // Already a JSON Schema - return as-is\n  if (!isStandardSchema(schema)) {\n    return schema;\n  }\n\n  return toJsonSchema.sync(schema) as JSONSchema7;\n}\n\n/**\n * Safely converts a schema to JSON Schema, returning undefined for invalid inputs.\n * @param schema - The schema to convert (may be undefined)\n * @param onError - Optional callback invoked on conversion error\n * @returns The JSON Schema representation, or undefined if conversion fails\n */\nexport function safeSchemaToJsonSchema(\n  schema: SupportedSchema | undefined | null,\n  onError?: (error: unknown) => void,\n): JSONSchema7 | undefined {\n  if (!schema) {\n    return undefined;\n  }\n\n  try {\n    return schemaToJsonSchema(schema);\n  } catch (error) {\n    console.error(\"Error converting schema to JSON Schema:\", error);\n    onError?.(error);\n    return undefined;\n  }\n}\n\n/**\n * Creates parameter specs from an input schema.\n * The schema represents the shape of the single object argument to the tool function.\n * @param schema - The input schema (JSON Schema)\n * @returns An array of parameter specifications\n */\nfunction createParametersFromSchema(schema: JSONSchema7): ParameterSpec[] {\n  const properties = schema.properties ?? {};\n\n  return Object.entries(properties).map(\n    ([key, propSchema]) =>\n      ({\n        name: key,\n        type:\n          propSchema && typeof propSchema === \"object\" && \"type\" in propSchema\n            ? (propSchema.type as string)\n            : \"object\",\n        description:\n          propSchema &&\n          typeof propSchema === \"object\" &&\n          \"description\" in propSchema\n            ? (propSchema.description ?? \"\")\n            : \"\",\n        isRequired: Array.isArray(schema.required)\n          ? schema.required.includes(key)\n          : false,\n        schema:\n          typeof propSchema === \"object\" && propSchema !== null\n            ? propSchema\n            : {},\n      }) satisfies ParameterSpec,\n  );\n}\n\n/**\n * Extracts parameter specifications from a tool's inputSchema.\n * @param tool - The tool containing the schema\n * @returns An array of parameter specifications\n */\nexport function getParametersFromToolSchema(tool: TamboTool): ParameterSpec[] {\n  const schema = tool.inputSchema;\n\n  // Convert to JSON Schema if needed\n  let jsonSchema: JSONSchema7;\n  if (looksLikeJSONSchema(schema)) {\n    jsonSchema = schema;\n  } else if (isStandardSchema(schema)) {\n    jsonSchema = schemaToJsonSchema(schema);\n  } else {\n    console.warn(\"Unknown inputSchema type, returning empty parameters\");\n    return [];\n  }\n\n  return createParametersFromSchema(jsonSchema);\n}\n\nexport type { SupportedSchema };\n", "import type { JSONSchema7 } from \"json-schema\";\nimport { schemaToJsonSchema } from \"./schema\";\nimport { isStandardSchema } from \"./standard-schema\";\n\n/*\n * Check if a JSON Schema represents a record type (map with dynamic keys).\n *\n * For our purposes, any `object` schema with `additionalProperties` defined\n * as a nested schema (not just `true`/`false`) is treated as a record, even\n * if it also declares some explicit `properties`.\n * @param schema - The JSON Schema to check\n * @returns True if the schema represents a record-like type\n */\nfunction isRecordJsonSchema(schema: JSONSchema7): boolean {\n  return (\n    schema.type === \"object\" &&\n    typeof schema.additionalProperties === \"object\" &&\n    schema.additionalProperties !== null\n  );\n}\n\n/**\n * Recursively walks a JSON Schema and throws when it encounters a record type.\n * Records are not supported because they use dynamic keys which don't serialize\n * well for the Tambo backend.\n * @param schema - The JSON Schema to check\n * @param path - Current path in the schema (for error messages)\n * @param contextName - Human-readable context name for error messages\n */\nfunction assertNoRecordInJsonSchema(\n  schema: JSONSchema7,\n  path: string[],\n  contextName: string,\n): void {\n  if (isRecordJsonSchema(schema)) {\n    const joined = path.length ? path.join(\".\") : \"(root)\";\n    throw new Error(\n      `Record types (objects with dynamic keys) are not supported in ${contextName}. ` +\n        `Found at path \"${joined}\". ` +\n        \"Replace it with an object using explicit keys.\",\n    );\n  }\n  if (schema.properties) {\n    for (const [key, propSchema] of Object.entries(schema.properties)) {\n      if (typeof propSchema === \"object\" && propSchema !== null) {\n        assertNoRecordInJsonSchema(propSchema, [...path, key], contextName);\n      }\n    }\n  }\n  if (\n    typeof schema.additionalProperties === \"object\" &&\n    schema.additionalProperties !== null\n  ) {\n    assertNoRecordInJsonSchema(\n      schema.additionalProperties,\n      [...path, \"[*]\"],\n      contextName,\n    );\n  }\n  if (schema.items) {\n    if (Array.isArray(schema.items)) {\n      // Tuple (JSON Schema draft-07): check each item schema\n      schema.items.forEach((itemSchema, index) => {\n        if (typeof itemSchema === \"object\" && itemSchema !== null) {\n          assertNoRecordInJsonSchema(\n            itemSchema,\n            [...path, `${index}`],\n            contextName,\n          );\n        }\n      });\n    } else if (typeof schema.items === \"object\") {\n      // Array: check the item schema\n      assertNoRecordInJsonSchema(schema.items, [...path, \"[]\"], contextName);\n    }\n  }\n  const prefixItems = (schema as Record<string, unknown>).prefixItems;\n  if (Array.isArray(prefixItems)) {\n    prefixItems.forEach((itemSchema, index) => {\n      if (typeof itemSchema === \"object\" && itemSchema !== null) {\n        assertNoRecordInJsonSchema(\n          itemSchema as JSONSchema7,\n          [...path, `${index}`],\n          contextName,\n        );\n      }\n    });\n  }\n  if (schema.allOf) {\n    schema.allOf.forEach((subSchema, index) => {\n      if (typeof subSchema === \"object\" && subSchema !== null) {\n        assertNoRecordInJsonSchema(\n          subSchema,\n          [...path, `&${index}`],\n          contextName,\n        );\n      }\n    });\n  }\n  if (schema.anyOf) {\n    schema.anyOf.forEach((subSchema, index) => {\n      if (typeof subSchema === \"object\" && subSchema !== null) {\n        assertNoRecordInJsonSchema(\n          subSchema,\n          [...path, `|${index}`],\n          contextName,\n        );\n      }\n    });\n  }\n  if (schema.oneOf) {\n    schema.oneOf.forEach((subSchema, index) => {\n      if (typeof subSchema === \"object\" && subSchema !== null) {\n        assertNoRecordInJsonSchema(\n          subSchema,\n          [...path, `|${index}`],\n          contextName,\n        );\n      }\n    });\n  }\n  if (typeof schema.not === \"object\" && schema.not !== null) {\n    assertNoRecordInJsonSchema(schema.not, [...path, \"!\"], contextName);\n  }\n  if (typeof schema.if === \"object\" && schema.if !== null) {\n    assertNoRecordInJsonSchema(schema.if, [...path, \"if\"], contextName);\n  }\n  if (typeof schema.then === \"object\" && schema.then !== null) {\n    assertNoRecordInJsonSchema(schema.then, [...path, \"then\"], contextName);\n  }\n  if (typeof schema.else === \"object\" && schema.else !== null) {\n    assertNoRecordInJsonSchema(schema.else, [...path, \"else\"], contextName);\n  }\n}\n\n/**\n * Asserts that a schema does not contain record types (objects with dynamic keys).\n * Records are not serializable to JSON Schema in a way that the Tambo backend\n * understands, so they are disallowed.\n *\n * This function accepts Standard Schema validators (Zod, Valibot, ArkType, etc.)\n * or JSON Schema objects. It converts them to JSON Schema and checks for record patterns.\n *\n * For tool schemas that are function types, this extracts and validates the input parameters.\n * @param schema - The schema to validate (Standard Schema or JSON Schema)\n * @param contextName - A human-readable label echoed in the error message\n */\nexport function assertNoRecordSchema(\n  schema: unknown,\n  contextName = \"schema\",\n): void {\n  if (!schema) {\n    return;\n  }\n\n  let jsonSchema: JSONSchema7;\n\n  try {\n    if (isStandardSchema(schema)) {\n      // Handle function schemas specially - extract input parameters\n      const converted = schemaToJsonSchema(schema);\n\n      // If it's a function schema that couldn't be converted, the input params\n      // were extracted in registry.ts, so we can skip validation here\n      if (!converted || Object.keys(converted).length === 0) {\n        return;\n      }\n\n      jsonSchema = converted;\n    } else if (\n      typeof schema === \"object\" &&\n      schema !== null &&\n      \"type\" in schema\n    ) {\n      // Already JSON Schema\n      jsonSchema = schema as JSONSchema7;\n    } else {\n      // Unknown schema type - skip validation\n      return;\n    }\n  } catch {\n    // If schema conversion fails, skip validation\n    // This can happen for function schemas or other special types\n    return;\n  }\n\n  assertNoRecordInJsonSchema(jsonSchema, [], contextName);\n}\n", "/**\n * Validates that a name matches OpenAI function name requirements\n * @param name The name to validate\n * @param contextName The context name (e.g., \"component\", \"tool\")\n */\nexport function assertValidName(name: string, contextName: string): void {\n  if (!/^[a-zA-Z0-9_-]+$/.test(name)) {\n    throw new Error(\n      `${contextName} \"${name}\" must only contain letters, numbers, underscores, and hyphens.`,\n    );\n  }\n}\n", "\"use client\";\nimport React, { createContext, PropsWithChildren, useContext } from \"react\";\nimport {\n  RegisterToolFn,\n  RegisterToolsFn,\n  TamboComponent,\n  TamboTool,\n} from \"../model/component-metadata\";\nimport { useTamboClient } from \"./tambo-client-provider\";\nimport { useTamboRegistry } from \"./tambo-registry-provider\";\n\nexport interface TamboComponentContextProps {\n  registerComponent: (options: TamboComponent) => void;\n  registerTool: RegisterToolFn;\n  registerTools: RegisterToolsFn;\n  addToolAssociation: (componentName: string, tool: TamboTool) => void;\n}\n\nconst TamboComponentContext = createContext<TamboComponentContextProps>({\n  /**\n   *\n   */\n  registerComponent: () => {},\n  /**\n   *\n   */\n  registerTool: () => {},\n  /**\n   *\n   */\n  registerTools: () => {},\n  /**\n   *\n   */\n  addToolAssociation: () => {},\n});\n\n/**\n * The TamboComponentProvider is a React provider that provides component\n * registration services to the descendants of the provider.\n * @param props - The props for the TamboComponentProvider\n * @param props.children - The children to wrap\n * @returns The TamboComponentProvider component\n */\nexport const TamboComponentProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const client = useTamboClient();\n  const { registerComponent, addToolAssociation, registerTool, registerTools } =\n    useTamboRegistry();\n\n  const value = {\n    client,\n    registerComponent,\n    registerTool,\n    registerTools,\n    addToolAssociation,\n  };\n\n  return (\n    <TamboComponentContext.Provider value={value}>\n      {children}\n    </TamboComponentContext.Provider>\n  );\n};\n\n/**\n * The useTamboComponent hook provides access to the component registration\n * services to the descendants of the TamboComponentProvider.\n * @returns The component registration services\n */\nexport const useTamboComponent = () => {\n  return useContext(TamboComponentContext);\n};\n", "function __classPrivateFieldSet(receiver, state, value, kind, f) {\n    if (kind === \"m\")\n        throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return kind === \"a\" ? f.call(receiver, value) : f ? (f.value = value) : state.set(receiver, value), value;\n}\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nexport { __classPrivateFieldSet, __classPrivateFieldGet };\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * https://stackoverflow.com/a/2117523\n */\nexport let uuid4 = function () {\n  const { crypto } = globalThis as any;\n  if (crypto?.randomUUID) {\n    uuid4 = crypto.randomUUID.bind(crypto);\n    return crypto.randomUUID();\n  }\n  const u8 = new Uint8Array(1);\n  const randomByte = crypto ? () => crypto.getRandomValues(u8)[0]! : () => (Math.random() * 0xff) & 0xff;\n  return '10000000-1000-4000-8000-100000000000'.replace(/[018]/g, (c) =>\n    (+c ^ (randomByte() & (15 >> (+c / 4)))).toString(16),\n  );\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport function isAbortError(err: unknown) {\n  return (\n    typeof err === 'object' &&\n    err !== null &&\n    // Spec-compliant fetch implementations\n    (('name' in err && (err as any).name === 'AbortError') ||\n      // Expo fetch\n      ('message' in err && String((err as any).message).includes('FetchRequestCanceledException')))\n  );\n}\n\nexport const castToError = (err: any): Error => {\n  if (err instanceof Error) return err;\n  if (typeof err === 'object' && err !== null) {\n    try {\n      if (Object.prototype.toString.call(err) === '[object Error]') {\n        // @ts-ignore - not all envs have native support for cause yet\n        const error = new Error(err.message, err.cause ? { cause: err.cause } : {});\n        if (err.stack) error.stack = err.stack;\n        // @ts-ignore - not all envs have native support for cause yet\n        if (err.cause && !error.cause) error.cause = err.cause;\n        if (err.name) error.name = err.name;\n        return error;\n      }\n    } catch {}\n    try {\n      return new Error(JSON.stringify(err));\n    } catch {}\n  }\n  return new Error(err);\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { castToError } from '../internal/errors';\n\nexport class TamboAIError extends Error {}\n\nexport class APIError<\n  TStatus extends number | undefined = number | undefined,\n  THeaders extends Headers | undefined = Headers | undefined,\n  TError extends Object | undefined = Object | undefined,\n> extends TamboAIError {\n  /** HTTP status for the response that caused the error */\n  readonly status: TStatus;\n  /** HTTP headers for the response that caused the error */\n  readonly headers: THeaders;\n  /** JSON body of the response that caused the error */\n  readonly error: TError;\n\n  constructor(status: TStatus, error: TError, message: string | undefined, headers: THeaders) {\n    super(`${APIError.makeMessage(status, error, message)}`);\n    this.status = status;\n    this.headers = headers;\n    this.error = error;\n  }\n\n  private static makeMessage(status: number | undefined, error: any, message: string | undefined) {\n    const msg =\n      error?.message ?\n        typeof error.message === 'string' ?\n          error.message\n        : JSON.stringify(error.message)\n      : error ? JSON.stringify(error)\n      : message;\n\n    if (status && msg) {\n      return `${status} ${msg}`;\n    }\n    if (status) {\n      return `${status} status code (no body)`;\n    }\n    if (msg) {\n      return msg;\n    }\n    return '(no status code or body)';\n  }\n\n  static generate(\n    status: number | undefined,\n    errorResponse: Object | undefined,\n    message: string | undefined,\n    headers: Headers | undefined,\n  ): APIError {\n    if (!status || !headers) {\n      return new APIConnectionError({ message, cause: castToError(errorResponse) });\n    }\n\n    const error = errorResponse as Record<string, any>;\n\n    if (status === 400) {\n      return new BadRequestError(status, error, message, headers);\n    }\n\n    if (status === 401) {\n      return new AuthenticationError(status, error, message, headers);\n    }\n\n    if (status === 403) {\n      return new PermissionDeniedError(status, error, message, headers);\n    }\n\n    if (status === 404) {\n      return new NotFoundError(status, error, message, headers);\n    }\n\n    if (status === 409) {\n      return new ConflictError(status, error, message, headers);\n    }\n\n    if (status === 422) {\n      return new UnprocessableEntityError(status, error, message, headers);\n    }\n\n    if (status === 429) {\n      return new RateLimitError(status, error, message, headers);\n    }\n\n    if (status >= 500) {\n      return new InternalServerError(status, error, message, headers);\n    }\n\n    return new APIError(status, error, message, headers);\n  }\n}\n\nexport class APIUserAbortError extends APIError<undefined, undefined, undefined> {\n  constructor({ message }: { message?: string } = {}) {\n    super(undefined, undefined, message || 'Request was aborted.', undefined);\n  }\n}\n\nexport class APIConnectionError extends APIError<undefined, undefined, undefined> {\n  constructor({ message, cause }: { message?: string | undefined; cause?: Error | undefined }) {\n    super(undefined, undefined, message || 'Connection error.', undefined);\n    // in some environments the 'cause' property is already declared\n    // @ts-ignore\n    if (cause) this.cause = cause;\n  }\n}\n\nexport class APIConnectionTimeoutError extends APIConnectionError {\n  constructor({ message }: { message?: string } = {}) {\n    super({ message: message ?? 'Request timed out.' });\n  }\n}\n\nexport class BadRequestError extends APIError<400, Headers> {}\n\nexport class AuthenticationError extends APIError<401, Headers> {}\n\nexport class PermissionDeniedError extends APIError<403, Headers> {}\n\nexport class NotFoundError extends APIError<404, Headers> {}\n\nexport class ConflictError extends APIError<409, Headers> {}\n\nexport class UnprocessableEntityError extends APIError<422, Headers> {}\n\nexport class RateLimitError extends APIError<429, Headers> {}\n\nexport class InternalServerError extends APIError<number, Headers> {}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { TamboAIError } from '../../core/error';\n\n// https://url.spec.whatwg.org/#url-scheme-string\nconst startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;\n\nexport const isAbsoluteURL = (url: string): boolean => {\n  return startsWithSchemeRegexp.test(url);\n};\n\nexport let isArray = (val: unknown): val is unknown[] => ((isArray = Array.isArray), isArray(val));\nexport let isReadonlyArray = isArray as (val: unknown) => val is readonly unknown[];\n\n/** Returns an object if the given value isn't an object, otherwise returns as-is */\nexport function maybeObj(x: unknown): object {\n  if (typeof x !== 'object') {\n    return {};\n  }\n\n  return x ?? {};\n}\n\n// https://stackoverflow.com/a/34491287\nexport function isEmptyObj(obj: Object | null | undefined): boolean {\n  if (!obj) return true;\n  for (const _k in obj) return false;\n  return true;\n}\n\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\nexport function hasOwn<T extends object = object>(obj: T, key: PropertyKey): key is keyof T {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function isObj(obj: unknown): obj is Record<string, unknown> {\n  return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\n\nexport const ensurePresent = <T>(value: T | null | undefined): T => {\n  if (value == null) {\n    throw new TamboAIError(`Expected a value to be given but received ${value} instead.`);\n  }\n\n  return value;\n};\n\nexport const validatePositiveInteger = (name: string, n: unknown): number => {\n  if (typeof n !== 'number' || !Number.isInteger(n)) {\n    throw new TamboAIError(`${name} must be an integer`);\n  }\n  if (n < 0) {\n    throw new TamboAIError(`${name} must be a positive integer`);\n  }\n  return n;\n};\n\nexport const coerceInteger = (value: unknown): number => {\n  if (typeof value === 'number') return Math.round(value);\n  if (typeof value === 'string') return parseInt(value, 10);\n\n  throw new TamboAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceFloat = (value: unknown): number => {\n  if (typeof value === 'number') return value;\n  if (typeof value === 'string') return parseFloat(value);\n\n  throw new TamboAIError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceBoolean = (value: unknown): boolean => {\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'string') return value === 'true';\n  return Boolean(value);\n};\n\nexport const maybeCoerceInteger = (value: unknown): number | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceInteger(value);\n};\n\nexport const maybeCoerceFloat = (value: unknown): number | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceFloat(value);\n};\n\nexport const maybeCoerceBoolean = (value: unknown): boolean | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceBoolean(value);\n};\n\nexport const safeJSON = (text: string) => {\n  try {\n    return JSON.parse(text);\n  } catch (err) {\n    return undefined;\n  }\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport const sleep = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms));\n", "export const VERSION = '0.84.0'; // x-release-please-version\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { VERSION } from '../version';\n\nexport const isRunningInBrowser = () => {\n  return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n    // @ts-ignore\n    typeof window.document !== 'undefined' &&\n    // @ts-ignore\n    typeof navigator !== 'undefined'\n  );\n};\n\ntype DetectedPlatform = 'deno' | 'node' | 'edge' | 'unknown';\n\n/**\n * Note this does not detect 'browser'; for that, use getBrowserInfo().\n */\nfunction getDetectedPlatform(): DetectedPlatform {\n  if (typeof Deno !== 'undefined' && Deno.build != null) {\n    return 'deno';\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return 'edge';\n  }\n  if (\n    Object.prototype.toString.call(\n      typeof (globalThis as any).process !== 'undefined' ? (globalThis as any).process : 0,\n    ) === '[object process]'\n  ) {\n    return 'node';\n  }\n  return 'unknown';\n}\n\ndeclare const Deno: any;\ndeclare const EdgeRuntime: any;\ntype Arch = 'x32' | 'x64' | 'arm' | 'arm64' | `other:${string}` | 'unknown';\ntype PlatformName =\n  | 'MacOS'\n  | 'Linux'\n  | 'Windows'\n  | 'FreeBSD'\n  | 'OpenBSD'\n  | 'iOS'\n  | 'Android'\n  | `Other:${string}`\n  | 'Unknown';\ntype Browser = 'ie' | 'edge' | 'chrome' | 'firefox' | 'safari';\ntype PlatformProperties = {\n  'X-Stainless-Lang': 'js';\n  'X-Stainless-Package-Version': string;\n  'X-Stainless-OS': PlatformName;\n  'X-Stainless-Arch': Arch;\n  'X-Stainless-Runtime': 'node' | 'deno' | 'edge' | `browser:${Browser}` | 'unknown';\n  'X-Stainless-Runtime-Version': string;\n};\nconst getPlatformProperties = (): PlatformProperties => {\n  const detectedPlatform = getDetectedPlatform();\n  if (detectedPlatform === 'deno') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform(Deno.build.os),\n      'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n      'X-Stainless-Runtime': 'deno',\n      'X-Stainless-Runtime-Version':\n        typeof Deno.version === 'string' ? Deno.version : Deno.version?.deno ?? 'unknown',\n    };\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': `other:${EdgeRuntime}`,\n      'X-Stainless-Runtime': 'edge',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version,\n    };\n  }\n  // Check if Node.js\n  if (detectedPlatform === 'node') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform((globalThis as any).process.platform ?? 'unknown'),\n      'X-Stainless-Arch': normalizeArch((globalThis as any).process.arch ?? 'unknown'),\n      'X-Stainless-Runtime': 'node',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version ?? 'unknown',\n    };\n  }\n\n  const browserInfo = getBrowserInfo();\n  if (browserInfo) {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': 'unknown',\n      'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\n      'X-Stainless-Runtime-Version': browserInfo.version,\n    };\n  }\n\n  // TODO add support for Cloudflare workers, etc.\n  return {\n    'X-Stainless-Lang': 'js',\n    'X-Stainless-Package-Version': VERSION,\n    'X-Stainless-OS': 'Unknown',\n    'X-Stainless-Arch': 'unknown',\n    'X-Stainless-Runtime': 'unknown',\n    'X-Stainless-Runtime-Version': 'unknown',\n  };\n};\n\ntype BrowserInfo = {\n  browser: Browser;\n  version: string;\n};\n\ndeclare const navigator: { userAgent: string } | undefined;\n\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo(): BrowserInfo | null {\n  if (typeof navigator === 'undefined' || !navigator) {\n    return null;\n  }\n\n  // NOTE: The order matters here!\n  const browserPatterns = [\n    { key: 'edge' as const, pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'chrome' as const, pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'firefox' as const, pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'safari' as const, pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\n  ];\n\n  // Find the FIRST matching browser\n  for (const { key, pattern } of browserPatterns) {\n    const match = pattern.exec(navigator.userAgent);\n    if (match) {\n      const major = match[1] || 0;\n      const minor = match[2] || 0;\n      const patch = match[3] || 0;\n\n      return { browser: key, version: `${major}.${minor}.${patch}` };\n    }\n  }\n\n  return null;\n}\n\nconst normalizeArch = (arch: string): Arch => {\n  // Node docs:\n  // - https://nodejs.org/api/process.html#processarch\n  // Deno docs:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  if (arch === 'x32') return 'x32';\n  if (arch === 'x86_64' || arch === 'x64') return 'x64';\n  if (arch === 'arm') return 'arm';\n  if (arch === 'aarch64' || arch === 'arm64') return 'arm64';\n  if (arch) return `other:${arch}`;\n  return 'unknown';\n};\n\nconst normalizePlatform = (platform: string): PlatformName => {\n  // Node platforms:\n  // - https://nodejs.org/api/process.html#processplatform\n  // Deno platforms:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  // - https://github.com/denoland/deno/issues/14799\n\n  platform = platform.toLowerCase();\n\n  // NOTE: this iOS check is untested and may not work\n  // Node does not work natively on IOS, there is a fork at\n  // https://github.com/nodejs-mobile/nodejs-mobile\n  // however it is unknown at the time of writing how to detect if it is running\n  if (platform.includes('ios')) return 'iOS';\n  if (platform === 'android') return 'Android';\n  if (platform === 'darwin') return 'MacOS';\n  if (platform === 'win32') return 'Windows';\n  if (platform === 'freebsd') return 'FreeBSD';\n  if (platform === 'openbsd') return 'OpenBSD';\n  if (platform === 'linux') return 'Linux';\n  if (platform) return `Other:${platform}`;\n  return 'Unknown';\n};\n\nlet _platformHeaders: PlatformProperties;\nexport const getPlatformHeaders = () => {\n  return (_platformHeaders ??= getPlatformProperties());\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * This module provides internal shims and utility functions for environments where certain Node.js or global types may not be available.\n *\n * These are used to ensure we can provide a consistent behaviour between different JavaScript environments and good error\n * messages in cases where an environment isn't fully supported.\n */\n\nimport type { Fetch } from './builtin-types';\nimport type { ReadableStream } from './shim-types';\n\nexport function getDefaultFetch(): Fetch {\n  if (typeof fetch !== 'undefined') {\n    return fetch as any;\n  }\n\n  throw new Error(\n    '`fetch` is not defined as a global; Either pass `fetch` to the client, `new TamboAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`',\n  );\n}\n\ntype ReadableStreamArgs = ConstructorParameters<typeof ReadableStream>;\n\nexport function makeReadableStream(...args: ReadableStreamArgs): ReadableStream {\n  const ReadableStream = (globalThis as any).ReadableStream;\n  if (typeof ReadableStream === 'undefined') {\n    // Note: All of the platforms / runtimes we officially support already define\n    // `ReadableStream` as a global, so this should only ever be hit on unsupported runtimes.\n    throw new Error(\n      '`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`',\n    );\n  }\n\n  return new ReadableStream(...args);\n}\n\nexport function ReadableStreamFrom<T>(iterable: Iterable<T> | AsyncIterable<T>): ReadableStream<T> {\n  let iter: AsyncIterator<T> | Iterator<T> =\n    Symbol.asyncIterator in iterable ? iterable[Symbol.asyncIterator]() : iterable[Symbol.iterator]();\n\n  return makeReadableStream({\n    start() {},\n    async pull(controller: any) {\n      const { done, value } = await iter.next();\n      if (done) {\n        controller.close();\n      } else {\n        controller.enqueue(value);\n      }\n    },\n    async cancel() {\n      await iter.return?.();\n    },\n  });\n}\n\n/**\n * Most browsers don't yet have async iterable support for ReadableStream,\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\n *\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */\nexport function ReadableStreamToAsyncIterable<T>(stream: any): AsyncIterableIterator<T> {\n  if (stream[Symbol.asyncIterator]) return stream;\n\n  const reader = stream.getReader();\n  return {\n    async next() {\n      try {\n        const result = await reader.read();\n        if (result?.done) reader.releaseLock(); // release lock when stream becomes closed\n        return result;\n      } catch (e) {\n        reader.releaseLock(); // release lock when stream becomes errored\n        throw e;\n      }\n    },\n    async return() {\n      const cancelPromise = reader.cancel();\n      reader.releaseLock();\n      await cancelPromise;\n      return { done: true, value: undefined };\n    },\n    [Symbol.asyncIterator]() {\n      return this;\n    },\n  };\n}\n\n/**\n * Cancels a ReadableStream we don't need to consume.\n * See https://undici.nodejs.org/#/?id=garbage-collection\n */\nexport async function CancelReadableStream(stream: any): Promise<void> {\n  if (stream === null || typeof stream !== 'object') return;\n\n  if (stream[Symbol.asyncIterator]) {\n    await stream[Symbol.asyncIterator]().return?.();\n    return;\n  }\n\n  const reader = stream.getReader();\n  const cancelPromise = reader.cancel();\n  reader.releaseLock();\n  await cancelPromise;\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { NullableHeaders } from './headers';\n\nimport type { BodyInit } from './builtin-types';\nimport { Stream } from '../core/streaming';\nimport type { HTTPMethod, MergedRequestInit } from './types';\nimport { type HeadersLike } from './headers';\n\nexport type FinalRequestOptions = RequestOptions & { method: HTTPMethod; path: string };\n\nexport type RequestOptions = {\n  /**\n   * The HTTP method for the request (e.g., 'get', 'post', 'put', 'delete').\n   */\n  method?: HTTPMethod;\n\n  /**\n   * The URL path for the request.\n   *\n   * @example \"/v1/foo\"\n   */\n  path?: string;\n\n  /**\n   * Query parameters to include in the request URL.\n   */\n  query?: object | undefined | null;\n\n  /**\n   * The request body. Can be a string, JSON object, FormData, or other supported types.\n   */\n  body?: unknown;\n\n  /**\n   * HTTP headers to include with the request. Can be a Headers object, plain object, or array of tuples.\n   */\n  headers?: HeadersLike;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 0\n   */\n  maxRetries?: number;\n\n  stream?: boolean | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number;\n\n  /**\n   * Additional `RequestInit` options to be passed to the underlying `fetch` call.\n   * These options will be merged with the client's default fetch options.\n   */\n  fetchOptions?: MergedRequestInit;\n\n  /**\n   * An AbortSignal that can be used to cancel the request.\n   */\n  signal?: AbortSignal | undefined | null;\n\n  /**\n   * A unique key for this request to enable idempotency.\n   */\n  idempotencyKey?: string;\n\n  /**\n   * Override the default base URL for this specific request.\n   */\n  defaultBaseURL?: string | undefined;\n\n  __binaryResponse?: boolean | undefined;\n  __streamClass?: typeof Stream;\n};\n\nexport type EncodedContent = { bodyHeaders: HeadersLike; body: BodyInit };\nexport type RequestEncoder = (request: { headers: NullableHeaders; body: unknown }) => EncodedContent;\n\nexport const FallbackEncoder: RequestEncoder = ({ headers, body }) => {\n  return {\n    bodyHeaders: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify(body),\n  };\n};\n", "export function concatBytes(buffers: Uint8Array[]): Uint8Array {\n  let length = 0;\n  for (const buffer of buffers) {\n    length += buffer.length;\n  }\n  const output = new Uint8Array(length);\n  let index = 0;\n  for (const buffer of buffers) {\n    output.set(buffer, index);\n    index += buffer.length;\n  }\n\n  return output;\n}\n\nlet encodeUTF8_: (str: string) => Uint8Array;\nexport function encodeUTF8(str: string) {\n  let encoder;\n  return (\n    encodeUTF8_ ??\n    ((encoder = new (globalThis as any).TextEncoder()), (encodeUTF8_ = encoder.encode.bind(encoder)))\n  )(str);\n}\n\nlet decodeUTF8_: (bytes: Uint8Array) => string;\nexport function decodeUTF8(bytes: Uint8Array) {\n  let decoder;\n  return (\n    decodeUTF8_ ??\n    ((decoder = new (globalThis as any).TextDecoder()), (decodeUTF8_ = decoder.decode.bind(decoder)))\n  )(bytes);\n}\n", "import { concatBytes, decodeUTF8, encodeUTF8 } from '../utils/bytes';\n\nexport type Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\n/**\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\n * reading lines from text.\n *\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\n */\nexport class LineDecoder {\n  // prettier-ignore\n  static NEWLINE_CHARS = new Set(['\\n', '\\r']);\n  static NEWLINE_REGEXP = /\\r\\n|[\\n\\r]/g;\n\n  #buffer: Uint8Array;\n  #carriageReturnIndex: number | null;\n\n  constructor() {\n    this.#buffer = new Uint8Array();\n    this.#carriageReturnIndex = null;\n  }\n\n  decode(chunk: Bytes): string[] {\n    if (chunk == null) {\n      return [];\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    this.#buffer = concatBytes([this.#buffer, binaryChunk]);\n\n    const lines: string[] = [];\n    let patternIndex;\n    while ((patternIndex = findNewlineIndex(this.#buffer, this.#carriageReturnIndex)) != null) {\n      if (patternIndex.carriage && this.#carriageReturnIndex == null) {\n        // skip until we either get a corresponding `\\n`, a new `\\r` or nothing\n        this.#carriageReturnIndex = patternIndex.index;\n        continue;\n      }\n\n      // we got double \\r or \\rtext\\n\n      if (\n        this.#carriageReturnIndex != null &&\n        (patternIndex.index !== this.#carriageReturnIndex + 1 || patternIndex.carriage)\n      ) {\n        lines.push(decodeUTF8(this.#buffer.subarray(0, this.#carriageReturnIndex - 1)));\n        this.#buffer = this.#buffer.subarray(this.#carriageReturnIndex);\n        this.#carriageReturnIndex = null;\n        continue;\n      }\n\n      const endIndex =\n        this.#carriageReturnIndex !== null ? patternIndex.preceding - 1 : patternIndex.preceding;\n\n      const line = decodeUTF8(this.#buffer.subarray(0, endIndex));\n      lines.push(line);\n\n      this.#buffer = this.#buffer.subarray(patternIndex.index);\n      this.#carriageReturnIndex = null;\n    }\n\n    return lines;\n  }\n\n  flush(): string[] {\n    if (!this.#buffer.length) {\n      return [];\n    }\n    return this.decode('\\n');\n  }\n}\n\n/**\n * This function searches the buffer for the end patterns, (\\r or \\n)\n * and returns an object with the index preceding the matched newline and the\n * index after the newline char. `null` is returned if no new line is found.\n *\n * ```ts\n * findNewLineIndex('abc\\ndef') -> { preceding: 2, index: 3 }\n * ```\n */\nfunction findNewlineIndex(\n  buffer: Uint8Array,\n  startIndex: number | null,\n): { preceding: number; index: number; carriage: boolean } | null {\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = startIndex ?? 0; i < buffer.length; i++) {\n    if (buffer[i] === newline) {\n      return { preceding: i, index: i + 1, carriage: false };\n    }\n\n    if (buffer[i] === carriage) {\n      return { preceding: i, index: i + 1, carriage: true };\n    }\n  }\n\n  return null;\n}\n\nexport function findDoubleNewlineIndex(buffer: Uint8Array): number {\n  // This function searches the buffer for the end patterns (\\r\\r, \\n\\n, \\r\\n\\r\\n)\n  // and returns the index right after the first occurrence of any pattern,\n  // or -1 if none of the patterns are found.\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = 0; i < buffer.length - 1; i++) {\n    if (buffer[i] === newline && buffer[i + 1] === newline) {\n      // \\n\\n\n      return i + 2;\n    }\n    if (buffer[i] === carriage && buffer[i + 1] === carriage) {\n      // \\r\\r\n      return i + 2;\n    }\n    if (\n      buffer[i] === carriage &&\n      buffer[i + 1] === newline &&\n      i + 3 < buffer.length &&\n      buffer[i + 2] === carriage &&\n      buffer[i + 3] === newline\n    ) {\n      // \\r\\n\\r\\n\n      return i + 4;\n    }\n  }\n\n  return -1;\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { hasOwn } from './values';\nimport { type TamboAI } from '../../client';\nimport { RequestOptions } from '../request-options';\n\ntype LogFn = (message: string, ...rest: unknown[]) => void;\nexport type Logger = {\n  error: LogFn;\n  warn: LogFn;\n  info: LogFn;\n  debug: LogFn;\n};\nexport type LogLevel = 'off' | 'error' | 'warn' | 'info' | 'debug';\n\nconst levelNumbers = {\n  off: 0,\n  error: 200,\n  warn: 300,\n  info: 400,\n  debug: 500,\n};\n\nexport const parseLogLevel = (\n  maybeLevel: string | undefined,\n  sourceName: string,\n  client: TamboAI,\n): LogLevel | undefined => {\n  if (!maybeLevel) {\n    return undefined;\n  }\n  if (hasOwn(levelNumbers, maybeLevel)) {\n    return maybeLevel;\n  }\n  loggerFor(client).warn(\n    `${sourceName} was set to ${JSON.stringify(maybeLevel)}, expected one of ${JSON.stringify(\n      Object.keys(levelNumbers),\n    )}`,\n  );\n  return undefined;\n};\n\nfunction noop() {}\n\nfunction makeLogFn(fnLevel: keyof Logger, logger: Logger | undefined, logLevel: LogLevel) {\n  if (!logger || levelNumbers[fnLevel] > levelNumbers[logLevel]) {\n    return noop;\n  } else {\n    // Don't wrap logger functions, we want the stacktrace intact!\n    return logger[fnLevel].bind(logger);\n  }\n}\n\nconst noopLogger = {\n  error: noop,\n  warn: noop,\n  info: noop,\n  debug: noop,\n};\n\nlet cachedLoggers = /* @__PURE__ */ new WeakMap<Logger, [LogLevel, Logger]>();\n\nexport function loggerFor(client: TamboAI): Logger {\n  const logger = client.logger;\n  const logLevel = client.logLevel ?? 'off';\n  if (!logger) {\n    return noopLogger;\n  }\n\n  const cachedLogger = cachedLoggers.get(logger);\n  if (cachedLogger && cachedLogger[0] === logLevel) {\n    return cachedLogger[1];\n  }\n\n  const levelLogger = {\n    error: makeLogFn('error', logger, logLevel),\n    warn: makeLogFn('warn', logger, logLevel),\n    info: makeLogFn('info', logger, logLevel),\n    debug: makeLogFn('debug', logger, logLevel),\n  };\n\n  cachedLoggers.set(logger, [logLevel, levelLogger]);\n\n  return levelLogger;\n}\n\nexport const formatRequestDetails = (details: {\n  options?: RequestOptions | undefined;\n  headers?: Headers | Record<string, string> | undefined;\n  retryOfRequestLogID?: string | undefined;\n  retryOf?: string | undefined;\n  url?: string | undefined;\n  status?: number | undefined;\n  method?: string | undefined;\n  durationMs?: number | undefined;\n  message?: unknown;\n  body?: unknown;\n}) => {\n  if (details.options) {\n    details.options = { ...details.options };\n    delete details.options['headers']; // redundant + leaks internals\n  }\n  if (details.headers) {\n    details.headers = Object.fromEntries(\n      (details.headers instanceof Headers ? [...details.headers] : Object.entries(details.headers)).map(\n        ([name, value]) => [\n          name,\n          (\n            name.toLowerCase() === 'x-api-key' ||\n            name.toLowerCase() === 'authorization' ||\n            name.toLowerCase() === 'cookie' ||\n            name.toLowerCase() === 'set-cookie'\n          ) ?\n            '***'\n          : value,\n        ],\n      ),\n    );\n  }\n  if ('retryOfRequestLogID' in details) {\n    if (details.retryOfRequestLogID) {\n      details.retryOf = details.retryOfRequestLogID;\n    }\n    delete details.retryOfRequestLogID;\n  }\n  return details;\n};\n", "import { TamboAIError } from './error';\nimport { type ReadableStream } from '../internal/shim-types';\nimport { makeReadableStream } from '../internal/shims';\nimport { findDoubleNewlineIndex, LineDecoder } from '../internal/decoders/line';\nimport { ReadableStreamToAsyncIterable } from '../internal/shims';\nimport { isAbortError } from '../internal/errors';\nimport { encodeUTF8 } from '../internal/utils/bytes';\nimport { loggerFor } from '../internal/utils/log';\nimport type { TamboAI } from '../client';\n\ntype Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\nexport type ServerSentEvent = {\n  event: string | null;\n  data: string;\n  raw: string[];\n};\n\nexport class Stream<Item> implements AsyncIterable<Item> {\n  controller: AbortController;\n  #client: TamboAI | undefined;\n\n  constructor(\n    private iterator: () => AsyncIterator<Item>,\n    controller: AbortController,\n    client?: TamboAI,\n  ) {\n    this.controller = controller;\n    this.#client = client;\n  }\n\n  static fromSSEResponse<Item>(\n    response: Response,\n    controller: AbortController,\n    client?: TamboAI,\n  ): Stream<Item> {\n    let consumed = false;\n    const logger = client ? loggerFor(client) : console;\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new TamboAIError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const sse of _iterSSEMessages(response, controller)) {\n          try {\n            yield JSON.parse(sse.data);\n          } catch (e) {\n            logger.error(`Could not parse message into JSON:`, sse.data);\n            logger.error(`From chunk:`, sse.raw);\n            throw e;\n          }\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  /**\n   * Generates a Stream from a newline-separated ReadableStream\n   * where each item is a JSON value.\n   */\n  static fromReadableStream<Item>(\n    readableStream: ReadableStream,\n    controller: AbortController,\n    client?: TamboAI,\n  ): Stream<Item> {\n    let consumed = false;\n\n    async function* iterLines(): AsyncGenerator<string, void, unknown> {\n      const lineDecoder = new LineDecoder();\n\n      const iter = ReadableStreamToAsyncIterable<Bytes>(readableStream);\n      for await (const chunk of iter) {\n        for (const line of lineDecoder.decode(chunk)) {\n          yield line;\n        }\n      }\n\n      for (const line of lineDecoder.flush()) {\n        yield line;\n      }\n    }\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new TamboAIError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const line of iterLines()) {\n          if (done) continue;\n          if (line) yield JSON.parse(line);\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<Item> {\n    return this.iterator();\n  }\n\n  /**\n   * Splits the stream into two streams which can be\n   * independently read from at different speeds.\n   */\n  tee(): [Stream<Item>, Stream<Item>] {\n    const left: Array<Promise<IteratorResult<Item>>> = [];\n    const right: Array<Promise<IteratorResult<Item>>> = [];\n    const iterator = this.iterator();\n\n    const teeIterator = (queue: Array<Promise<IteratorResult<Item>>>): AsyncIterator<Item> => {\n      return {\n        next: () => {\n          if (queue.length === 0) {\n            const result = iterator.next();\n            left.push(result);\n            right.push(result);\n          }\n          return queue.shift()!;\n        },\n      };\n    };\n\n    return [\n      new Stream(() => teeIterator(left), this.controller, this.#client),\n      new Stream(() => teeIterator(right), this.controller, this.#client),\n    ];\n  }\n\n  /**\n   * Converts this stream to a newline-separated ReadableStream of\n   * JSON stringified values in the stream\n   * which can be turned back into a Stream with `Stream.fromReadableStream()`.\n   */\n  toReadableStream(): ReadableStream {\n    const self = this;\n    let iter: AsyncIterator<Item>;\n\n    return makeReadableStream({\n      async start() {\n        iter = self[Symbol.asyncIterator]();\n      },\n      async pull(ctrl: any) {\n        try {\n          const { value, done } = await iter.next();\n          if (done) return ctrl.close();\n\n          const bytes = encodeUTF8(JSON.stringify(value) + '\\n');\n\n          ctrl.enqueue(bytes);\n        } catch (err) {\n          ctrl.error(err);\n        }\n      },\n      async cancel() {\n        await iter.return?.();\n      },\n    });\n  }\n}\n\nexport async function* _iterSSEMessages(\n  response: Response,\n  controller: AbortController,\n): AsyncGenerator<ServerSentEvent, void, unknown> {\n  if (!response.body) {\n    controller.abort();\n    if (\n      typeof (globalThis as any).navigator !== 'undefined' &&\n      (globalThis as any).navigator.product === 'ReactNative'\n    ) {\n      throw new TamboAIError(\n        `The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api`,\n      );\n    }\n    throw new TamboAIError(`Attempted to iterate over a response with no body`);\n  }\n\n  const sseDecoder = new SSEDecoder();\n  const lineDecoder = new LineDecoder();\n\n  const iter = ReadableStreamToAsyncIterable<Bytes>(response.body);\n  for await (const sseChunk of iterSSEChunks(iter)) {\n    for (const line of lineDecoder.decode(sseChunk)) {\n      const sse = sseDecoder.decode(line);\n      if (sse) yield sse;\n    }\n  }\n\n  for (const line of lineDecoder.flush()) {\n    const sse = sseDecoder.decode(line);\n    if (sse) yield sse;\n  }\n}\n\n/**\n * Given an async iterable iterator, iterates over it and yields full\n * SSE chunks, i.e. yields when a double new-line is encountered.\n */\nasync function* iterSSEChunks(iterator: AsyncIterableIterator<Bytes>): AsyncGenerator<Uint8Array> {\n  let data = new Uint8Array();\n\n  for await (const chunk of iterator) {\n    if (chunk == null) {\n      continue;\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    let newData = new Uint8Array(data.length + binaryChunk.length);\n    newData.set(data);\n    newData.set(binaryChunk, data.length);\n    data = newData;\n\n    let patternIndex;\n    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {\n      yield data.slice(0, patternIndex);\n      data = data.slice(patternIndex);\n    }\n  }\n\n  if (data.length > 0) {\n    yield data;\n  }\n}\n\nclass SSEDecoder {\n  private data: string[];\n  private event: string | null;\n  private chunks: string[];\n\n  constructor() {\n    this.event = null;\n    this.data = [];\n    this.chunks = [];\n  }\n\n  decode(line: string) {\n    if (line.endsWith('\\r')) {\n      line = line.substring(0, line.length - 1);\n    }\n\n    if (!line) {\n      // empty line and we didn't previously encounter any messages\n      if (!this.event && !this.data.length) return null;\n\n      const sse: ServerSentEvent = {\n        event: this.event,\n        data: this.data.join('\\n'),\n        raw: this.chunks,\n      };\n\n      this.event = null;\n      this.data = [];\n      this.chunks = [];\n\n      return sse;\n    }\n\n    this.chunks.push(line);\n\n    if (line.startsWith(':')) {\n      return null;\n    }\n\n    let [fieldname, _, value] = partition(line, ':');\n\n    if (value.startsWith(' ')) {\n      value = value.substring(1);\n    }\n\n    if (fieldname === 'event') {\n      this.event = value;\n    } else if (fieldname === 'data') {\n      this.data.push(value);\n    }\n\n    return null;\n  }\n}\n\nfunction partition(str: string, delimiter: string): [string, string, string] {\n  const index = str.indexOf(delimiter);\n  if (index !== -1) {\n    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\n  }\n\n  return [str, '', ''];\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { FinalRequestOptions } from './request-options';\nimport { Stream } from '../core/streaming';\nimport { type TamboAI } from '../client';\nimport { formatRequestDetails, loggerFor } from './utils/log';\n\nexport type APIResponseProps = {\n  response: Response;\n  options: FinalRequestOptions;\n  controller: AbortController;\n  requestLogID: string;\n  retryOfRequestLogID: string | undefined;\n  startTime: number;\n};\n\nexport async function defaultParseResponse<T>(client: TamboAI, props: APIResponseProps): Promise<T> {\n  const { response, requestLogID, retryOfRequestLogID, startTime } = props;\n  const body = await (async () => {\n    if (props.options.stream) {\n      loggerFor(client).debug('response', response.status, response.url, response.headers, response.body);\n\n      // Note: there is an invariant here that isn't represented in the type system\n      // that if you set `stream: true` the response type must also be `Stream<T>`\n\n      if (props.options.__streamClass) {\n        return props.options.__streamClass.fromSSEResponse(response, props.controller, client) as any;\n      }\n\n      return Stream.fromSSEResponse(response, props.controller, client) as any;\n    }\n\n    // fetch refuses to read the body when the status code is 204.\n    if (response.status === 204) {\n      return null as T;\n    }\n\n    if (props.options.__binaryResponse) {\n      return response as unknown as T;\n    }\n\n    const contentType = response.headers.get('content-type');\n    const mediaType = contentType?.split(';')[0]?.trim();\n    const isJSON = mediaType?.includes('application/json') || mediaType?.endsWith('+json');\n    if (isJSON) {\n      const json = await response.json();\n      return json as T;\n    }\n\n    const text = await response.text();\n    return text as unknown as T;\n  })();\n  loggerFor(client).debug(\n    `[${requestLogID}] response parsed`,\n    formatRequestDetails({\n      retryOfRequestLogID,\n      url: response.url,\n      status: response.status,\n      body,\n      durationMs: Date.now() - startTime,\n    }),\n  );\n  return body;\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { type TamboAI } from '../client';\n\nimport { type PromiseOrValue } from '../internal/types';\nimport { APIResponseProps, defaultParseResponse } from '../internal/parse';\n\n/**\n * A subclass of `Promise` providing additional helper methods\n * for interacting with the SDK.\n */\nexport class APIPromise<T> extends Promise<T> {\n  private parsedPromise: Promise<T> | undefined;\n  #client: TamboAI;\n\n  constructor(\n    client: TamboAI,\n    private responsePromise: Promise<APIResponseProps>,\n    private parseResponse: (\n      client: TamboAI,\n      props: APIResponseProps,\n    ) => PromiseOrValue<T> = defaultParseResponse,\n  ) {\n    super((resolve) => {\n      // this is maybe a bit weird but this has to be a no-op to not implicitly\n      // parse the response body; instead .then, .catch, .finally are overridden\n      // to parse the response\n      resolve(null as any);\n    });\n    this.#client = client;\n  }\n\n  _thenUnwrap<U>(transform: (data: T, props: APIResponseProps) => U): APIPromise<U> {\n    return new APIPromise(this.#client, this.responsePromise, async (client, props) =>\n      transform(await this.parseResponse(client, props), props),\n    );\n  }\n\n  /**\n   * Gets the raw `Response` instance instead of parsing the response\n   * data.\n   *\n   * If you want to parse the response body but still get the `Response`\n   * instance, you can use {@link withResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  asResponse(): Promise<Response> {\n    return this.responsePromise.then((p) => p.response);\n  }\n\n  /**\n   * Gets the parsed response data and the raw `Response` instance.\n   *\n   * If you just want to get the raw `Response` instance without parsing it,\n   * you can use {@link asResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  async withResponse(): Promise<{ data: T; response: Response }> {\n    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\n    return { data, response };\n  }\n\n  private parse(): Promise<T> {\n    if (!this.parsedPromise) {\n      this.parsedPromise = this.responsePromise.then((data) => this.parseResponse(this.#client, data));\n    }\n    return this.parsedPromise;\n  }\n\n  override then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): Promise<TResult1 | TResult2> {\n    return this.parse().then(onfulfilled, onrejected);\n  }\n\n  override catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): Promise<T | TResult> {\n    return this.parse().catch(onrejected);\n  }\n\n  override finally(onfinally?: (() => void) | undefined | null): Promise<T> {\n    return this.parse().finally(onfinally);\n  }\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { TamboAIError } from './error';\nimport { FinalRequestOptions } from '../internal/request-options';\nimport { defaultParseResponse } from '../internal/parse';\nimport { type TamboAI } from '../client';\nimport { APIPromise } from './api-promise';\nimport { type APIResponseProps } from '../internal/parse';\nimport { maybeObj } from '../internal/utils/values';\n\nexport type PageRequestOptions = Pick<FinalRequestOptions, 'query' | 'headers' | 'body' | 'path' | 'method'>;\n\nexport abstract class AbstractPage<Item> implements AsyncIterable<Item> {\n  #client: TamboAI;\n  protected options: FinalRequestOptions;\n\n  protected response: Response;\n  protected body: unknown;\n\n  constructor(client: TamboAI, response: Response, body: unknown, options: FinalRequestOptions) {\n    this.#client = client;\n    this.options = options;\n    this.response = response;\n    this.body = body;\n  }\n\n  abstract nextPageRequestOptions(): PageRequestOptions | null;\n\n  abstract getPaginatedItems(): Item[];\n\n  hasNextPage(): boolean {\n    const items = this.getPaginatedItems();\n    if (!items.length) return false;\n    return this.nextPageRequestOptions() != null;\n  }\n\n  async getNextPage(): Promise<this> {\n    const nextOptions = this.nextPageRequestOptions();\n    if (!nextOptions) {\n      throw new TamboAIError(\n        'No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.',\n      );\n    }\n\n    return await this.#client.requestAPIList(this.constructor as any, nextOptions);\n  }\n\n  async *iterPages(): AsyncGenerator<this> {\n    let page: this = this;\n    yield page;\n    while (page.hasNextPage()) {\n      page = await page.getNextPage();\n      yield page;\n    }\n  }\n\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\n    for await (const page of this.iterPages()) {\n      for (const item of page.getPaginatedItems()) {\n        yield item;\n      }\n    }\n  }\n}\n\n/**\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\n *\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\n *\n *    for await (const item of client.items.list()) {\n *      console.log(item)\n *    }\n */\nexport class PagePromise<\n    PageClass extends AbstractPage<Item>,\n    Item = ReturnType<PageClass['getPaginatedItems']>[number],\n  >\n  extends APIPromise<PageClass>\n  implements AsyncIterable<Item>\n{\n  constructor(\n    client: TamboAI,\n    request: Promise<APIResponseProps>,\n    Page: new (...args: ConstructorParameters<typeof AbstractPage>) => PageClass,\n  ) {\n    super(\n      client,\n      request,\n      async (client, props) =>\n        new Page(client, props.response, await defaultParseResponse(client, props), props.options),\n    );\n  }\n\n  /**\n   * Allow auto-paginating iteration on an unawaited list call, eg:\n   *\n   *    for await (const item of client.items.list()) {\n   *      console.log(item)\n   *    }\n   */\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\n    const page = await this;\n    for await (const item of page) {\n      yield item;\n    }\n  }\n}\n\nexport interface OffsetAndLimitResponse<Item> {\n  items: Array<Item>;\n\n  total: number;\n\n  count: number;\n}\n\nexport interface OffsetAndLimitParams {\n  offset?: number;\n\n  limit?: number;\n}\n\nexport class OffsetAndLimit<Item> extends AbstractPage<Item> implements OffsetAndLimitResponse<Item> {\n  items: Array<Item>;\n\n  total: number;\n\n  count: number;\n\n  constructor(\n    client: TamboAI,\n    response: Response,\n    body: OffsetAndLimitResponse<Item>,\n    options: FinalRequestOptions,\n  ) {\n    super(client, response, body, options);\n\n    this.items = body.items || [];\n    this.total = body.total || 0;\n    this.count = body.count || 0;\n  }\n\n  getPaginatedItems(): Item[] {\n    return this.items ?? [];\n  }\n\n  nextPageRequestOptions(): PageRequestOptions | null {\n    const offset = (this.options.query as OffsetAndLimitParams).offset ?? 0;\n    const length = this.getPaginatedItems().length;\n    const currentCount = offset + length;\n\n    const totalCount = this.total;\n    if (!totalCount) {\n      return null;\n    }\n\n    if (currentCount < totalCount) {\n      return {\n        ...this.options,\n        query: {\n          ...maybeObj(this.options.query),\n          offset: currentCount,\n        },\n      };\n    }\n\n    return null;\n  }\n}\n", "import { type RequestOptions } from './request-options';\nimport type { FilePropertyBag, Fetch } from './builtin-types';\nimport type { TamboAI } from '../client';\nimport { ReadableStreamFrom } from './shims';\n\nexport type BlobPart = string | ArrayBuffer | ArrayBufferView | Blob | DataView;\ntype FsReadStream = AsyncIterable<Uint8Array> & { path: string | { toString(): string } };\n\n// https://github.com/oven-sh/bun/issues/5980\ninterface BunFile extends Blob {\n  readonly name?: string | undefined;\n}\n\nexport const checkFileSupport = () => {\n  if (typeof File === 'undefined') {\n    const { process } = globalThis as any;\n    const isOldNode =\n      typeof process?.versions?.node === 'string' && parseInt(process.versions.node.split('.')) < 20;\n    throw new Error(\n      '`File` is not defined as a global, which is required for file uploads.' +\n        (isOldNode ?\n          \" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.\"\n        : ''),\n    );\n  }\n};\n\n/**\n * Typically, this is a native \"File\" class.\n *\n * We provide the {@link toFile} utility to convert a variety of objects\n * into the File class.\n *\n * For convenience, you can also pass a fetch Response, or in Node,\n * the result of fs.createReadStream().\n */\nexport type Uploadable = File | Response | FsReadStream | BunFile;\n\n/**\n * Construct a `File` instance. This is used to ensure a helpful error is thrown\n * for environments that don't define a global `File` yet.\n */\nexport function makeFile(\n  fileBits: BlobPart[],\n  fileName: string | undefined,\n  options?: FilePropertyBag,\n): File {\n  checkFileSupport();\n  return new File(fileBits as any, fileName ?? 'unknown_file', options);\n}\n\nexport function getName(value: any): string | undefined {\n  return (\n    (\n      (typeof value === 'object' &&\n        value !== null &&\n        (('name' in value && value.name && String(value.name)) ||\n          ('url' in value && value.url && String(value.url)) ||\n          ('filename' in value && value.filename && String(value.filename)) ||\n          ('path' in value && value.path && String(value.path)))) ||\n      ''\n    )\n      .split(/[\\\\/]/)\n      .pop() || undefined\n  );\n}\n\nexport const isAsyncIterable = (value: any): value is AsyncIterable<any> =>\n  value != null && typeof value === 'object' && typeof value[Symbol.asyncIterator] === 'function';\n\n/**\n * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.\n * Otherwise returns the request as is.\n */\nexport const maybeMultipartFormRequestOptions = async (\n  opts: RequestOptions,\n  fetch: TamboAI | Fetch,\n): Promise<RequestOptions> => {\n  if (!hasUploadableValue(opts.body)) return opts;\n\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\ntype MultipartFormRequestOptions = Omit<RequestOptions, 'body'> & { body: unknown };\n\nexport const multipartFormRequestOptions = async (\n  opts: MultipartFormRequestOptions,\n  fetch: TamboAI | Fetch,\n): Promise<RequestOptions> => {\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\nconst supportsFormDataMap = /* @__PURE__ */ new WeakMap<Fetch, Promise<boolean>>();\n\n/**\n * node-fetch doesn't support the global FormData object in recent node versions. Instead of sending\n * properly-encoded form data, it just stringifies the object, resulting in a request body of \"[object FormData]\".\n * This function detects if the fetch function provided supports the global FormData object to avoid\n * confusing error messages later on.\n */\nfunction supportsFormData(fetchObject: TamboAI | Fetch): Promise<boolean> {\n  const fetch: Fetch = typeof fetchObject === 'function' ? fetchObject : (fetchObject as any).fetch;\n  const cached = supportsFormDataMap.get(fetch);\n  if (cached) return cached;\n  const promise = (async () => {\n    try {\n      const FetchResponse = (\n        'Response' in fetch ?\n          fetch.Response\n        : (await fetch('data:,')).constructor) as typeof Response;\n      const data = new FormData();\n      if (data.toString() === (await new FetchResponse(data).text())) {\n        return false;\n      }\n      return true;\n    } catch {\n      // avoid false negatives\n      return true;\n    }\n  })();\n  supportsFormDataMap.set(fetch, promise);\n  return promise;\n}\n\nexport const createForm = async <T = Record<string, unknown>>(\n  body: T | undefined,\n  fetch: TamboAI | Fetch,\n): Promise<FormData> => {\n  if (!(await supportsFormData(fetch))) {\n    throw new TypeError(\n      'The provided fetch function does not support file uploads with the current global FormData class.',\n    );\n  }\n  const form = new FormData();\n  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));\n  return form;\n};\n\n// We check for Blob not File because Bun.File doesn't inherit from File,\n// but they both inherit from Blob and have a `name` property at runtime.\nconst isNamedBlob = (value: unknown) => value instanceof Blob && 'name' in value;\n\nconst isUploadable = (value: unknown) =>\n  typeof value === 'object' &&\n  value !== null &&\n  (value instanceof Response || isAsyncIterable(value) || isNamedBlob(value));\n\nconst hasUploadableValue = (value: unknown): boolean => {\n  if (isUploadable(value)) return true;\n  if (Array.isArray(value)) return value.some(hasUploadableValue);\n  if (value && typeof value === 'object') {\n    for (const k in value) {\n      if (hasUploadableValue((value as any)[k])) return true;\n    }\n  }\n  return false;\n};\n\nconst addFormValue = async (form: FormData, key: string, value: unknown): Promise<void> => {\n  if (value === undefined) return;\n  if (value == null) {\n    throw new TypeError(\n      `Received null for \"${key}\"; to pass null in FormData, you must use the string 'null'`,\n    );\n  }\n\n  // TODO: make nested formats configurable\n  if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n    form.append(key, String(value));\n  } else if (value instanceof Response) {\n    form.append(key, makeFile([await value.blob()], getName(value)));\n  } else if (isAsyncIterable(value)) {\n    form.append(key, makeFile([await new Response(ReadableStreamFrom(value)).blob()], getName(value)));\n  } else if (isNamedBlob(value)) {\n    form.append(key, value, getName(value));\n  } else if (Array.isArray(value)) {\n    await Promise.all(value.map((entry) => addFormValue(form, key + '[]', entry)));\n  } else if (typeof value === 'object') {\n    await Promise.all(\n      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop)),\n    );\n  } else {\n    throw new TypeError(\n      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`,\n    );\n  }\n};\n", "import { BlobPart, getName, makeFile, isAsyncIterable } from './uploads';\nimport type { FilePropertyBag } from './builtin-types';\nimport { checkFileSupport } from './uploads';\n\ntype BlobLikePart = string | ArrayBuffer | ArrayBufferView | BlobLike | DataView;\n\n/**\n * Intended to match DOM Blob, node-fetch Blob, node:buffer Blob, etc.\n * Don't add arrayBuffer here, node-fetch doesn't have it\n */\ninterface BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/size) */\n  readonly size: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/type) */\n  readonly type: string;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/text) */\n  text(): Promise<string>;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/slice) */\n  slice(start?: number, end?: number): BlobLike;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isBlobLike = (value: any): value is BlobLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.size === 'number' &&\n  typeof value.type === 'string' &&\n  typeof value.text === 'function' &&\n  typeof value.slice === 'function' &&\n  typeof value.arrayBuffer === 'function';\n\n/**\n * Intended to match DOM File, node:buffer File, undici File, etc.\n */\ninterface FileLike extends BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/lastModified) */\n  readonly lastModified: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/name) */\n  readonly name?: string | undefined;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isFileLike = (value: any): value is FileLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.name === 'string' &&\n  typeof value.lastModified === 'number' &&\n  isBlobLike(value);\n\n/**\n * Intended to match DOM Response, node-fetch Response, undici Response, etc.\n */\nexport interface ResponseLike {\n  url: string;\n  blob(): Promise<BlobLike>;\n}\n\nconst isResponseLike = (value: any): value is ResponseLike =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.url === 'string' &&\n  typeof value.blob === 'function';\n\nexport type ToFileInput =\n  | FileLike\n  | ResponseLike\n  | Exclude<BlobLikePart, string>\n  | AsyncIterable<BlobLikePart>;\n\n/**\n * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats\n * @param value the raw content of the file. Can be an {@link Uploadable}, BlobLikePart, or AsyncIterable of BlobLikeParts\n * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible\n * @param {Object=} options additional properties\n * @param {string=} options.type the MIME type of the content\n * @param {number=} options.lastModified the last modified timestamp\n * @returns a {@link File} with the given properties\n */\nexport async function toFile(\n  value: ToFileInput | PromiseLike<ToFileInput>,\n  name?: string | null | undefined,\n  options?: FilePropertyBag | undefined,\n): Promise<File> {\n  checkFileSupport();\n\n  // If it's a promise, resolve it.\n  value = await value;\n\n  // If we've been given a `File` we don't need to do anything\n  if (isFileLike(value)) {\n    if (value instanceof File) {\n      return value;\n    }\n    return makeFile([await value.arrayBuffer()], value.name);\n  }\n\n  if (isResponseLike(value)) {\n    const blob = await value.blob();\n    name ||= new URL(value.url).pathname.split(/[\\\\/]/).pop();\n\n    return makeFile(await getBytes(blob), name, options);\n  }\n\n  const parts = await getBytes(value);\n\n  name ||= getName(value);\n\n  if (!options?.type) {\n    const type = parts.find((part) => typeof part === 'object' && 'type' in part && part.type);\n    if (typeof type === 'string') {\n      options = { ...options, type };\n    }\n  }\n\n  return makeFile(parts, name, options);\n}\n\nasync function getBytes(value: BlobLikePart | AsyncIterable<BlobLikePart>): Promise<Array<BlobPart>> {\n  let parts: Array<BlobPart> = [];\n  if (\n    typeof value === 'string' ||\n    ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.\n    value instanceof ArrayBuffer\n  ) {\n    parts.push(value);\n  } else if (isBlobLike(value)) {\n    parts.push(value instanceof Blob ? value : await value.arrayBuffer());\n  } else if (\n    isAsyncIterable(value) // includes Readable, ReadableStream, etc.\n  ) {\n    for await (const chunk of value) {\n      parts.push(...(await getBytes(chunk as BlobLikePart))); // TODO, consider validating?\n    }\n  } else {\n    const constructor = value?.constructor?.name;\n    throw new Error(\n      `Unexpected data type: ${typeof value}${\n        constructor ? `; constructor: ${constructor}` : ''\n      }${propsForError(value)}`,\n    );\n  }\n\n  return parts;\n}\n\nfunction propsForError(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return '';\n  const props = Object.getOwnPropertyNames(value);\n  return `; props: [${props.map((p) => `\"${p}\"`).join(', ')}]`;\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { TamboAI } from '../client';\n\nexport abstract class APIResource {\n  protected _client: TamboAI;\n\n  constructor(client: TamboAI) {\n    this._client = client;\n  }\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { type Uploadable } from '../../core/uploads';\nimport { RequestOptions } from '../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../internal/uploads';\n\nexport class Audio extends APIResource {\n  /**\n   * Upload an audio file and get its transcription. Supports MP3, WAV, MP4, MPEG,\n   * MPGA, M4A, and WEBM formats. Maximum file size is 25 MB.\n   *\n   * @example\n   * ```ts\n   * const response = await client.beta.audio.transcribe({\n   *   file: fs.createReadStream('path/to/file'),\n   * });\n   * ```\n   */\n  transcribe(body: AudioTranscribeParams, options?: RequestOptions): APIPromise<string> {\n    return this._client.post(\n      '/audio/transcribe',\n      multipartFormRequestOptions({ body, ...options }, this._client),\n    );\n  }\n}\n\nexport type AudioTranscribeResponse = string;\n\nexport interface AudioTranscribeParams {\n  /**\n   * Audio file to transcribe (MP3, WAV, MP4, MPEG, MPGA, M4A, or WEBM)\n   */\n  file: Uploadable;\n}\n\nexport declare namespace Audio {\n  export {\n    type AudioTranscribeResponse as AudioTranscribeResponse,\n    type AudioTranscribeParams as AudioTranscribeParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { isReadonlyArray } from './utils/values';\n\ntype HeaderValue = string | undefined | null;\nexport type HeadersLike =\n  | Headers\n  | readonly HeaderValue[][]\n  | Record<string, HeaderValue | readonly HeaderValue[]>\n  | undefined\n  | null\n  | NullableHeaders;\n\nconst brand_privateNullableHeaders = /* @__PURE__ */ Symbol('brand.privateNullableHeaders');\n\n/**\n * @internal\n * Users can pass explicit nulls to unset default headers. When we parse them\n * into a standard headers type we need to preserve that information.\n */\nexport type NullableHeaders = {\n  /** Brand check, prevent users from creating a NullableHeaders. */\n  [brand_privateNullableHeaders]: true;\n  /** Parsed headers. */\n  values: Headers;\n  /** Set of lowercase header names explicitly set to null. */\n  nulls: Set<string>;\n};\n\nfunction* iterateHeaders(headers: HeadersLike): IterableIterator<readonly [string, string | null]> {\n  if (!headers) return;\n\n  if (brand_privateNullableHeaders in headers) {\n    const { values, nulls } = headers;\n    yield* values.entries();\n    for (const name of nulls) {\n      yield [name, null];\n    }\n    return;\n  }\n\n  let shouldClear = false;\n  let iter: Iterable<readonly (HeaderValue | readonly HeaderValue[])[]>;\n  if (headers instanceof Headers) {\n    iter = headers.entries();\n  } else if (isReadonlyArray(headers)) {\n    iter = headers;\n  } else {\n    shouldClear = true;\n    iter = Object.entries(headers ?? {});\n  }\n  for (let row of iter) {\n    const name = row[0];\n    if (typeof name !== 'string') throw new TypeError('expected header name to be a string');\n    const values = isReadonlyArray(row[1]) ? row[1] : [row[1]];\n    let didClear = false;\n    for (const value of values) {\n      if (value === undefined) continue;\n\n      // Objects keys always overwrite older headers, they never append.\n      // Yield a null to clear the header before adding the new values.\n      if (shouldClear && !didClear) {\n        didClear = true;\n        yield [name, null];\n      }\n      yield [name, value];\n    }\n  }\n}\n\nexport const buildHeaders = (newHeaders: HeadersLike[]): NullableHeaders => {\n  const targetHeaders = new Headers();\n  const nullHeaders = new Set<string>();\n  for (const headers of newHeaders) {\n    const seenHeaders = new Set<string>();\n    for (const [name, value] of iterateHeaders(headers)) {\n      const lowerName = name.toLowerCase();\n      if (!seenHeaders.has(lowerName)) {\n        targetHeaders.delete(name);\n        seenHeaders.add(lowerName);\n      }\n      if (value === null) {\n        targetHeaders.delete(name);\n        nullHeaders.add(lowerName);\n      } else {\n        targetHeaders.append(name, value);\n        nullHeaders.delete(lowerName);\n      }\n    }\n  }\n  return { [brand_privateNullableHeaders]: true, values: targetHeaders, nulls: nullHeaders };\n};\n\nexport const isEmptyHeaders = (headers: HeadersLike) => {\n  for (const _ of iterateHeaders(headers)) return false;\n  return true;\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\n\nexport class Auth extends APIResource {\n  /**\n   * Creates a JWT MCP access token for the project. If threadId is provided, the\n   * token will be bound to that thread. If threadId is omitted, a sessionless token\n   * will be created using the provided contextKey (or from Bearer token if not\n   * provided). Sessionless tokens can only access resources and prompts, not\n   * session-specific features. The token expires in 15 minutes and can be used as a\n   * bearer token.\n   *\n   * @example\n   * ```ts\n   * const response = await client.beta.auth.getMcpToken();\n   * ```\n   */\n  getMcpToken(body: AuthGetMcpTokenParams, options?: RequestOptions): APIPromise<AuthGetMcpTokenResponse> {\n    return this._client.post('/auth/mcp/access-token', { body, ...options });\n  }\n\n  /**\n   * Exchanges an OAuth subject token for a Tambo access token following RFC 6749 and\n   * RFC 8693 specifications. Accepts form-encoded data and validates the subject\n   * token based on project OAuth validation settings.\n   *\n   * @example\n   * ```ts\n   * const response = await client.beta.auth.getToken({\n   *   grant_type:\n   *     'urn:ietf:params:oauth:grant-type:token-exchange',\n   *   subject_token:\n   *     'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjEyMzQ1Njc4OTAifQ...',\n   *   subject_token_type:\n   *     'urn:ietf:params:oauth:token-type:id_token',\n   * });\n   * ```\n   */\n  getToken(body: AuthGetTokenParams, options?: RequestOptions): APIPromise<AuthGetTokenResponse> {\n    return this._client.post('/oauth/token', {\n      body,\n      ...options,\n      headers: buildHeaders([{ 'Content-Type': 'application/x-www-form-urlencoded' }, options?.headers]),\n    });\n  }\n}\n\n/**\n * MCP access token response\n */\nexport interface AuthGetMcpTokenResponse {\n  /**\n   * Expiration time of the token in milliseconds since epoch. Only included when\n   * mcpAccessToken is present.\n   */\n  expiresAt?: number;\n\n  /**\n   * Whether the token is bound to a specific thread session. Only included when\n   * mcpAccessToken is present.\n   */\n  hasSession?: boolean;\n\n  /**\n   * JWT MCP access token to be used as bearer token. Only included when MCP servers\n   * are configured for the project.\n   */\n  mcpAccessToken?: string;\n}\n\n/**\n * OAuth 2.0 Token Response\n */\nexport interface AuthGetTokenResponse {\n  /**\n   * JWT access token signed by Tambo with projectId as issuer\n   */\n  access_token: string;\n\n  /**\n   * Token expiration time in seconds\n   */\n  expires_in: number;\n\n  /**\n   * Type of the issued token\n   */\n  issued_token_type: string;\n\n  /**\n   * Token type - always 'Bearer'\n   */\n  token_type: string;\n}\n\nexport interface AuthGetMcpTokenParams {\n  /**\n   * Context key for sessionless MCP access tokens. If not provided, will be\n   * extracted from Bearer token.\n   */\n  contextKey?: string;\n\n  /**\n   * Thread ID for the MCP access token. If provided, the token will be bound to this\n   * thread. If omitted, a sessionless token will be created.\n   */\n  threadId?: string;\n}\n\nexport interface AuthGetTokenParams {\n  /**\n   * OAuth 2.0 grant type - must be 'urn:ietf:params:oauth:grant-type:token-exchange'\n   */\n  grant_type: string;\n\n  /**\n   * OAuth subject token from an OAuth provider (e.g., Google, Microsoft)\n   */\n  subject_token: string;\n\n  /**\n   * Type of the subject token - should be\n   * 'urn:ietf:params:oauth:token-type:access_token' or\n   * 'urn:ietf:params:oauth:token-type:id_token'\n   */\n  subject_token_type: string;\n\n  /**\n   * Optional audience for the token\n   */\n  audience?: string;\n\n  /**\n   * Optional scope for the token\n   */\n  scope?: string;\n}\n\nexport declare namespace Auth {\n  export {\n    type AuthGetMcpTokenResponse as AuthGetMcpTokenResponse,\n    type AuthGetTokenResponse as AuthGetTokenResponse,\n    type AuthGetMcpTokenParams as AuthGetMcpTokenParams,\n    type AuthGetTokenParams as AuthGetTokenParams,\n  };\n}\n", "import { TamboAIError } from '../../core/error';\n\n/**\n * Percent-encode everything that isn't safe to have in a path without encoding safe chars.\n *\n * Taken from https://datatracker.ietf.org/doc/html/rfc3986#section-3.3:\n * > unreserved  = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n * > sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\" / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n * > pchar       = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n */\nexport function encodeURIPath(str: string) {\n  return str.replace(/[^A-Za-z0-9\\-._~!$&'()*+,;=:@]+/g, encodeURIComponent);\n}\n\nconst EMPTY = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.create(null));\n\nexport const createPathTagFunction = (pathEncoder = encodeURIPath) =>\n  function path(statics: readonly string[], ...params: readonly unknown[]): string {\n    // If there are no params, no processing is needed.\n    if (statics.length === 1) return statics[0]!;\n\n    let postPath = false;\n    const invalidSegments = [];\n    const path = statics.reduce((previousValue, currentValue, index) => {\n      if (/[?#]/.test(currentValue)) {\n        postPath = true;\n      }\n      const value = params[index];\n      let encoded = (postPath ? encodeURIComponent : pathEncoder)('' + value);\n      if (\n        index !== params.length &&\n        (value == null ||\n          (typeof value === 'object' &&\n            // handle values from other realms\n            value.toString ===\n              Object.getPrototypeOf(Object.getPrototypeOf((value as any).hasOwnProperty ?? EMPTY) ?? EMPTY)\n                ?.toString))\n      ) {\n        encoded = value + '';\n        invalidSegments.push({\n          start: previousValue.length + currentValue.length,\n          length: encoded.length,\n          error: `Value of type ${Object.prototype.toString\n            .call(value)\n            .slice(8, -1)} is not a valid path parameter`,\n        });\n      }\n      return previousValue + currentValue + (index === params.length ? '' : encoded);\n    }, '');\n\n    const pathOnly = path.split(/[?#]/, 1)[0]!;\n    const invalidSegmentPattern = /(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)/gi;\n    let match;\n\n    // Find all invalid segments\n    while ((match = invalidSegmentPattern.exec(pathOnly)) !== null) {\n      invalidSegments.push({\n        start: match.index,\n        length: match[0].length,\n        error: `Value \"${match[0]}\" can\\'t be safely passed as a path parameter`,\n      });\n    }\n\n    invalidSegments.sort((a, b) => a.start - b.start);\n\n    if (invalidSegments.length > 0) {\n      let lastEnd = 0;\n      const underline = invalidSegments.reduce((acc, segment) => {\n        const spaces = ' '.repeat(segment.start - lastEnd);\n        const arrows = '^'.repeat(segment.length);\n        lastEnd = segment.start + segment.length;\n        return acc + spaces + arrows;\n      }, '');\n\n      throw new TamboAIError(\n        `Path parameters result in path with invalid segments:\\n${invalidSegments\n          .map((e) => e.error)\n          .join('\\n')}\\n${path}\\n${underline}`,\n      );\n    }\n\n    return path;\n  };\n\n/**\n * URI-encodes path params and ensures no unsafe /./ or /../ path segments are introduced.\n */\nexport const path = /* @__PURE__ */ createPathTagFunction(encodeURIPath);\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { RequestOptions } from '../../internal/request-options';\nimport { path } from '../../internal/utils/path';\n\nexport class Registry extends APIResource {\n  /**\n   * @example\n   * ```ts\n   * const registry = await client.beta.registry.retrieve(\n   *   'componentname',\n   * );\n   * ```\n   */\n  retrieve(componentname: string, options?: RequestOptions): APIPromise<unknown> {\n    return this._client.get(path`/registry/${componentname}`, options);\n  }\n}\n\nexport type RegistryRetrieveResponse = unknown;\n\nexport declare namespace Registry {\n  export { type RegistryRetrieveResponse as RegistryRetrieveResponse };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport { APIPromise } from '../../../core/api-promise';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class APIKey extends APIResource {\n  /**\n   * @example\n   * ```ts\n   * const apiKeys = await client.beta.projects.apiKey.list(\n   *   'id',\n   * );\n   * ```\n   */\n  list(id: string, options?: RequestOptions): APIPromise<APIKeyListResponse> {\n    return this._client.get(path`/projects/${id}/api-keys`, options);\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const apiKey = await client.beta.projects.apiKey.delete(\n   *   'apiKeyId',\n   *   { id: 'id' },\n   * );\n   * ```\n   */\n  delete(\n    apiKeyID: string,\n    params: APIKeyDeleteParams,\n    options?: RequestOptions,\n  ): APIPromise<APIKeyDeleteResponse> {\n    const { id } = params;\n    return this._client.delete(path`/projects/${id}/api-key/${apiKeyID}`, options);\n  }\n}\n\nexport type APIKeyListResponse = Array<APIKeyListResponse.APIKeyListResponseItem>;\n\nexport namespace APIKeyListResponse {\n  export interface APIKeyListResponseItem {\n    id?: string;\n\n    created?: string;\n\n    createdByUserId?: string;\n\n    lastUsed?: string;\n\n    name?: string;\n\n    partiallyHiddenKey?: string;\n  }\n}\n\nexport type APIKeyDeleteResponse = boolean;\n\nexport interface APIKeyDeleteParams {\n  id: string;\n}\n\nexport declare namespace APIKey {\n  export {\n    type APIKeyListResponse as APIKeyListResponse,\n    type APIKeyDeleteResponse as APIKeyDeleteResponse,\n    type APIKeyDeleteParams as APIKeyDeleteParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport { APIPromise } from '../../../core/api-promise';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class ProviderKey extends APIResource {\n  /**\n   * @example\n   * ```ts\n   * const providerKeys =\n   *   await client.beta.projects.providerKey.list('id');\n   * ```\n   */\n  list(id: string, options?: RequestOptions): APIPromise<ProviderKeyListResponse> {\n    return this._client.get(path`/projects/${id}/provider-keys`, options);\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const providerKey =\n   *   await client.beta.projects.providerKey.delete(\n   *     'providerKeyId',\n   *     { id: 'id' },\n   *   );\n   * ```\n   */\n  delete(\n    providerKeyID: string,\n    params: ProviderKeyDeleteParams,\n    options?: RequestOptions,\n  ): APIPromise<ProviderKeyDeleteResponse> {\n    const { id } = params;\n    return this._client.delete(path`/projects/${id}/provider-key/${providerKeyID}`, options);\n  }\n}\n\nexport type ProviderKeyListResponse = Array<ProviderKeyListResponse.ProviderKeyListResponseItem>;\n\nexport namespace ProviderKeyListResponse {\n  export interface ProviderKeyListResponseItem {\n    id?: string;\n\n    partiallyHiddenKey?: string;\n\n    providerKeyEncrypted?: string;\n\n    providerName?: string;\n  }\n}\n\nexport interface ProviderKeyDeleteResponse {\n  id: string;\n\n  name: string;\n}\n\nexport interface ProviderKeyDeleteParams {\n  id: string;\n}\n\nexport declare namespace ProviderKey {\n  export {\n    type ProviderKeyListResponse as ProviderKeyListResponse,\n    type ProviderKeyDeleteResponse as ProviderKeyDeleteResponse,\n    type ProviderKeyDeleteParams as ProviderKeyDeleteParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as APIKeyAPI from './api-key';\nimport { APIKey, APIKeyDeleteParams, APIKeyDeleteResponse, APIKeyListResponse } from './api-key';\nimport * as ProviderKeyAPI from './provider-key';\nimport {\n  ProviderKey,\n  ProviderKeyDeleteParams,\n  ProviderKeyDeleteResponse,\n  ProviderKeyListResponse,\n} from './provider-key';\nimport { APIPromise } from '../../../core/api-promise';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class Projects extends APIResource {\n  apiKey: APIKeyAPI.APIKey = new APIKeyAPI.APIKey(this._client);\n  providerKey: ProviderKeyAPI.ProviderKey = new ProviderKeyAPI.ProviderKey(this._client);\n\n  /**\n   * @example\n   * ```ts\n   * const project = await client.beta.projects.retrieve('id');\n   * ```\n   */\n  retrieve(id: string, options?: RequestOptions): APIPromise<ProjectRetrieveResponse> {\n    return this._client.get(path`/projects/${id}`, options);\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const project = await client.beta.projects.delete('id');\n   * ```\n   */\n  delete(id: string, options?: RequestOptions): APIPromise<ProjectDeleteResponse> {\n    return this._client.delete(path`/projects/${id}`, options);\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const response = await client.beta.projects.getCurrent();\n   * ```\n   */\n  getCurrent(options?: RequestOptions): APIPromise<ProjectGetCurrentResponse> {\n    return this._client.get('/projects', options);\n  }\n}\n\nexport interface ProjectRetrieveResponse {\n  id: string;\n\n  isTokenRequired: boolean;\n\n  name: string;\n\n  providerType: 'llm' | 'agent';\n\n  userId: string;\n\n  agentName?: string;\n\n  agentProviderType?: 'ag-ui' | 'mastra' | 'crewai' | 'llamaindex' | 'langgraph' | 'pydanticai';\n\n  agentUrl?: string;\n\n  allowSystemPromptOverride?: boolean;\n\n  customInstructions?: string;\n\n  customLlmBaseURL?: string;\n\n  customLlmModelName?: string;\n\n  customLlmParameters?: unknown;\n\n  defaultLlmModelName?: string;\n\n  defaultLlmProviderName?: string;\n\n  maxInputTokens?: number | null;\n}\n\nexport type ProjectDeleteResponse = boolean;\n\nexport interface ProjectGetCurrentResponse {\n  id: string;\n\n  isTokenRequired: boolean;\n\n  name: string;\n\n  providerType: 'llm' | 'agent';\n\n  userId: string;\n\n  agentName?: string;\n\n  agentProviderType?: 'ag-ui' | 'mastra' | 'crewai' | 'llamaindex' | 'langgraph' | 'pydanticai';\n\n  agentUrl?: string;\n\n  allowSystemPromptOverride?: boolean;\n\n  customInstructions?: string;\n\n  customLlmBaseURL?: string;\n\n  customLlmModelName?: string;\n\n  customLlmParameters?: unknown;\n\n  defaultLlmModelName?: string;\n\n  defaultLlmProviderName?: string;\n\n  maxInputTokens?: number | null;\n}\n\nProjects.APIKey = APIKey;\nProjects.ProviderKey = ProviderKey;\n\nexport declare namespace Projects {\n  export {\n    type ProjectRetrieveResponse as ProjectRetrieveResponse,\n    type ProjectDeleteResponse as ProjectDeleteResponse,\n    type ProjectGetCurrentResponse as ProjectGetCurrentResponse,\n  };\n\n  export {\n    APIKey as APIKey,\n    type APIKeyListResponse as APIKeyListResponse,\n    type APIKeyDeleteResponse as APIKeyDeleteResponse,\n    type APIKeyDeleteParams as APIKeyDeleteParams,\n  };\n\n  export {\n    ProviderKey as ProviderKey,\n    type ProviderKeyListResponse as ProviderKeyListResponse,\n    type ProviderKeyDeleteResponse as ProviderKeyDeleteResponse,\n    type ProviderKeyDeleteParams as ProviderKeyDeleteParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as Shared from '../../shared';\nimport * as ThreadsAPI from './threads';\nimport { APIPromise } from '../../../core/api-promise';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class Messages extends APIResource {\n  /**\n   * @example\n   * ```ts\n   * const message = await client.beta.threads.messages.create(\n   *   'id',\n   *   { content: [{ type: 'text' }], role: 'user' },\n   * );\n   * ```\n   */\n  create(id: string, body: MessageCreateParams, options?: RequestOptions): APIPromise<unknown> {\n    return this._client.post(path`/threads/${id}/messages`, { body, ...options });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const threadMessages =\n   *   await client.beta.threads.messages.list('thr_123.456');\n   * ```\n   */\n  list(\n    id: string,\n    query: MessageListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<MessageListResponse> {\n    return this._client.get(path`/threads/${id}/messages`, { query, ...options });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * await client.beta.threads.messages.delete('msg_123.456', {\n   *   id: 'thr_123.456',\n   * });\n   * ```\n   */\n  delete(messageID: string, params: MessageDeleteParams, options?: RequestOptions): APIPromise<void> {\n    const { id } = params;\n    return this._client.delete(path`/threads/${id}/messages/${messageID}`, {\n      ...options,\n      headers: buildHeaders([{ Accept: '*/*' }, options?.headers]),\n    });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const threadMessage =\n   *   await client.beta.threads.messages.updateComponentState(\n   *     'msg_123.456',\n   *     {\n   *       id: 'thr_123.456',\n   *       state: { foo: 'bar' },\n   *     },\n   *   );\n   * ```\n   */\n  updateComponentState(\n    messageID: string,\n    params: MessageUpdateComponentStateParams,\n    options?: RequestOptions,\n  ): APIPromise<ThreadsAPI.ThreadMessage> {\n    const { id, ...body } = params;\n    return this._client.put(path`/threads/${id}/messages/${messageID}/component-state`, { body, ...options });\n  }\n}\n\nexport type MessageCreateResponse = unknown;\n\nexport type MessageListResponse = Array<ThreadsAPI.ThreadMessage>;\n\nexport interface MessageCreateParams {\n  content: Array<ThreadsAPI.ChatCompletionContentPart>;\n\n  role: 'user' | 'assistant' | 'system' | 'tool';\n\n  /**\n   * @deprecated No longer used - instead set role and the tool call information\n   */\n  actionType?: 'tool_call' | 'tool_response';\n\n  /**\n   * Additional context to provide to the AI beyond the user query, such as the info\n   * about the current page the user is visiting.\n   */\n  additionalContext?: { [key: string]: unknown };\n\n  component?: ThreadsAPI.ComponentDecisionV2;\n\n  /**\n   * The initial state of the component\n   */\n  componentState?: { [key: string]: unknown };\n\n  error?: string;\n\n  /**\n   * Whether the message has been cancelled\n   */\n  isCancelled?: boolean;\n\n  metadata?: { [key: string]: unknown };\n\n  /**\n   * Reasoning text from the LLM, if the model supports it.\n   */\n  reasoning?: Array<string>;\n\n  /**\n   * Duration of reasoning in milliseconds\n   */\n  reasoningDurationMS?: number;\n\n  tool_call_id?: string;\n\n  toolCallRequest?: Shared.ToolCallRequest;\n\n  /**\n   * @deprecated Put the response in the content instead\n   */\n  toolResponse?: unknown;\n}\n\nexport interface MessageListParams {\n  /**\n   * Whether to include internal messages, must be `true`\n   */\n  includeInternal?: boolean;\n}\n\nexport interface MessageDeleteParams {\n  /**\n   * Id of the thread that contains the message\n   */\n  id: string;\n}\n\nexport interface MessageUpdateComponentStateParams {\n  /**\n   * Path param: Id of the thread that contains the message\n   */\n  id: string;\n\n  /**\n   * Body param\n   */\n  state: { [key: string]: unknown };\n}\n\nexport declare namespace Messages {\n  export {\n    type MessageCreateResponse as MessageCreateResponse,\n    type MessageListResponse as MessageListResponse,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageListParams as MessageListParams,\n    type MessageDeleteParams as MessageDeleteParams,\n    type MessageUpdateComponentStateParams as MessageUpdateComponentStateParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as Shared from '../../shared';\nimport { APIPromise } from '../../../core/api-promise';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class Suggestions extends APIResource {\n  /**\n   * Retrieves all suggestions generated for a specific message\n   *\n   * @example\n   * ```ts\n   * const suggestions =\n   *   await client.beta.threads.suggestions.list(\n   *     'msg_123456789',\n   *     { id: 'thread_123456789' },\n   *   );\n   * ```\n   */\n  list(\n    messageID: string,\n    params: SuggestionListParams,\n    options?: RequestOptions,\n  ): APIPromise<SuggestionListResponse> {\n    const { id } = params;\n    return this._client.get(path`/threads/${id}/messages/${messageID}/suggestions`, options);\n  }\n\n  /**\n   * Generates and stores new suggestions for a specific message\n   *\n   * @example\n   * ```ts\n   * const suggestions =\n   *   await client.beta.threads.suggestions.generate(\n   *     'msg_123456789',\n   *     { id: 'thread_123456789' },\n   *   );\n   * ```\n   */\n  generate(\n    messageID: string,\n    params: SuggestionGenerateParams,\n    options?: RequestOptions,\n  ): APIPromise<SuggestionGenerateResponse> {\n    const { id, ...body } = params;\n    return this._client.post(path`/threads/${id}/messages/${messageID}/suggestions`, { body, ...options });\n  }\n}\n\nexport interface Suggestion {\n  /**\n   * Unique identifier for the suggestion\n   */\n  id: string;\n\n  /**\n   * Detailed explanation of the suggestion\n   */\n  detailedSuggestion: string;\n\n  /**\n   * ID of the message this suggestion is for\n   */\n  messageId: string;\n\n  /**\n   * Short title or summary of the suggestion\n   */\n  title: string;\n\n  /**\n   * Additional metadata for the suggestion\n   */\n  metadata?: { [key: string]: string };\n}\n\nexport interface SuggestionsGenerate {\n  /**\n   * Available components that can be used with this suggestion\n   */\n  availableComponents?: Array<Shared.AvailableComponent>;\n\n  /**\n   * Maximum number of suggestions to generate\n   */\n  maxSuggestions?: number;\n}\n\nexport type SuggestionListResponse = Array<Suggestion>;\n\nexport type SuggestionGenerateResponse = Array<Suggestion>;\n\nexport interface SuggestionListParams {\n  /**\n   * ID of the thread to get suggestions for\n   */\n  id: string;\n}\n\nexport interface SuggestionGenerateParams {\n  /**\n   * Path param: ID of the thread to generate suggestions for\n   */\n  id: string;\n\n  /**\n   * Body param: Available components that can be used with this suggestion\n   */\n  availableComponents?: Array<Shared.AvailableComponent>;\n\n  /**\n   * Body param: Maximum number of suggestions to generate\n   */\n  maxSuggestions?: number;\n}\n\nexport declare namespace Suggestions {\n  export {\n    type Suggestion as Suggestion,\n    type SuggestionsGenerate as SuggestionsGenerate,\n    type SuggestionListResponse as SuggestionListResponse,\n    type SuggestionGenerateResponse as SuggestionGenerateResponse,\n    type SuggestionListParams as SuggestionListParams,\n    type SuggestionGenerateParams as SuggestionGenerateParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as ThreadsAPI from './threads';\nimport * as Shared from '../../shared';\nimport * as MessagesAPI from './messages';\nimport {\n  MessageCreateParams,\n  MessageCreateResponse,\n  MessageDeleteParams,\n  MessageListParams,\n  MessageListResponse,\n  MessageUpdateComponentStateParams,\n  Messages,\n} from './messages';\nimport * as SuggestionsAPI from './suggestions';\nimport {\n  Suggestion,\n  SuggestionGenerateParams,\n  SuggestionGenerateResponse,\n  SuggestionListParams,\n  SuggestionListResponse,\n  Suggestions,\n  SuggestionsGenerate,\n} from './suggestions';\nimport { APIPromise } from '../../../core/api-promise';\nimport { OffsetAndLimit, type OffsetAndLimitParams, PagePromise } from '../../../core/pagination';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { path } from '../../../internal/utils/path';\n\nexport class Threads extends APIResource {\n  messages: MessagesAPI.Messages = new MessagesAPI.Messages(this._client);\n  suggestions: SuggestionsAPI.Suggestions = new SuggestionsAPI.Suggestions(this._client);\n\n  /**\n   * @example\n   * ```ts\n   * const thread = await client.beta.threads.create({\n   *   projectId: 'projectId',\n   * });\n   * ```\n   */\n  create(body: ThreadCreateParams, options?: RequestOptions): APIPromise<Thread> {\n    return this._client.post('/threads', { body, ...options });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const thread = await client.beta.threads.retrieve('id');\n   * ```\n   */\n  retrieve(\n    id: string,\n    query: ThreadRetrieveParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<ThreadRetrieveResponse> {\n    return this._client.get(path`/threads/${id}`, { query, ...options });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * const thread = await client.beta.threads.update('id', {\n   *   projectId: 'projectId',\n   * });\n   * ```\n   */\n  update(id: string, body: ThreadUpdateParams, options?: RequestOptions): APIPromise<Thread> {\n    return this._client.put(path`/threads/${id}`, { body, ...options });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const thread of client.beta.threads.list(\n   *   'projectId',\n   * )) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    projectID: string,\n    query: ThreadListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<ThreadsOffsetAndLimit, Thread> {\n    return this._client.getAPIList(path`/threads/project/${projectID}`, OffsetAndLimit<Thread>, {\n      query,\n      ...options,\n    });\n  }\n\n  /**\n   * @example\n   * ```ts\n   * await client.beta.threads.delete('id');\n   * ```\n   */\n  delete(id: string, options?: RequestOptions): APIPromise<void> {\n    return this._client.delete(path`/threads/${id}`, {\n      ...options,\n      headers: buildHeaders([{ Accept: '*/*' }, options?.headers]),\n    });\n  }\n\n  /**\n   * This endpoint has been deprecated. Use POST /advancestream instead.\n   *\n   * @deprecated\n   */\n  advance(options?: RequestOptions): APIPromise<ThreadAdvanceResponse> {\n    return this._client.post('/threads/advance', options);\n  }\n\n  /**\n   * This endpoint has been deprecated. Use POST /:id/advancestream instead.\n   *\n   * @deprecated\n   */\n  advanceByID(\n    id: string,\n    body: ThreadAdvanceByIDParams,\n    options?: RequestOptions,\n  ): APIPromise<ThreadAdvanceByIDResponse> {\n    return this._client.post(path`/threads/${id}/advance`, { body, ...options });\n  }\n\n  /**\n   * Sets a thread's generation stage to CANCELLED\n   *\n   * @example\n   * ```ts\n   * const thread = await client.beta.threads.cancel(\n   *   'thread_123456789',\n   * );\n   * ```\n   */\n  cancel(id: string, options?: RequestOptions): APIPromise<Thread> {\n    return this._client.post(path`/threads/${id}/cancel`, options);\n  }\n\n  /**\n   * Automatically generates and sets a name for the thread as a summary based on its\n   * messages.\n   *\n   * @example\n   * ```ts\n   * const thread = await client.beta.threads.generateName(\n   *   'thread_123456789',\n   * );\n   * ```\n   */\n  generateName(\n    id: string,\n    params: ThreadGenerateNameParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<Thread> {\n    const { contextKey } = params ?? {};\n    return this._client.post(path`/threads/${id}/generate-name`, { query: { contextKey }, ...options });\n  }\n}\n\nexport type ThreadsOffsetAndLimit = OffsetAndLimit<Thread>;\n\nexport interface ChatCompletionContentPart {\n  /**\n   * The type of content part\n   */\n  type: 'text' | 'image_url' | 'input_audio' | 'resource';\n\n  /**\n   * Image URL content (when type is 'image_url')\n   */\n  image_url?: ChatCompletionContentPart.ImageURL;\n\n  /**\n   * Input audio content (when type is 'input_audio')\n   */\n  input_audio?: ChatCompletionContentPart.InputAudio;\n\n  /**\n   * Resource content (when type is 'resource'). Supports MCP Resources with URI,\n   * text, or blob data.\n   */\n  resource?: Shared.Resource;\n\n  /**\n   * Text content (when type is 'text')\n   */\n  text?: string;\n}\n\nexport namespace ChatCompletionContentPart {\n  /**\n   * Image URL content (when type is 'image_url')\n   */\n  export interface ImageURL {\n    url: string;\n\n    detail?: 'auto' | 'high' | 'low';\n  }\n\n  /**\n   * Input audio content (when type is 'input_audio')\n   */\n  export interface InputAudio {\n    data: string;\n\n    format: 'wav' | 'mp3';\n  }\n}\n\nexport interface ComponentDecisionV2 {\n  componentName: string | null;\n\n  componentState: { [key: string]: unknown } | null;\n\n  message: string;\n\n  props: { [key: string]: unknown };\n\n  completionStatusMessage?: string;\n\n  statusMessage?: string;\n\n  /**\n   * The unique id of the tool call. This is filled in whether the tool call is a\n   * server-side or client-side tool call.\n   */\n  toolCallId?: string;\n\n  /**\n   * The tool call request. This is filled in whether the tool call is a server-side\n   * or client-side tool call.\n   */\n  toolCallRequest?: Shared.ToolCallRequest;\n}\n\nexport interface Thread {\n  id: string;\n\n  createdAt: string;\n\n  projectId: string;\n\n  updatedAt: string;\n\n  generationStage?:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  metadata?: { [key: string]: unknown };\n\n  name?: string;\n\n  statusMessage?: string;\n}\n\nexport interface ThreadMessage {\n  id: string;\n\n  componentState: { [key: string]: unknown };\n\n  content: Array<ChatCompletionContentPart>;\n\n  createdAt: string;\n\n  role: 'user' | 'assistant' | 'system' | 'tool';\n\n  threadId: string;\n\n  /**\n   * @deprecated Deprecated: use the role and the presence of tool calls to determine\n   * the action type\n   */\n  actionType?: 'tool_call' | 'tool_response';\n\n  /**\n   * Additional context to provide to the AI beyond the user query, such as the info\n   * about the current page the user is visiting.\n   */\n  additionalContext?: { [key: string]: unknown };\n\n  component?: ComponentDecisionV2;\n\n  error?: string;\n\n  /**\n   * Whether the message has been cancelled\n   */\n  isCancelled?: boolean;\n\n  metadata?: { [key: string]: unknown };\n\n  /**\n   * The id of the parent message, if the message was created during the generation\n   * of another message, such as during an agent call, MCP Elicitation, or MCP Sample\n   */\n  parentMessageId?: string;\n\n  /**\n   * Reasoning text from the LLM, if the model supports it.\n   */\n  reasoning?: Array<string>;\n\n  /**\n   * Duration of reasoning in milliseconds\n   */\n  reasoningDurationMS?: number;\n\n  /**\n   * The unique id of the tool call. This is filled in only if the tool call is a\n   * client-side tool call.\n   */\n  tool_call_id?: string;\n\n  tool_calls?: Array<unknown>;\n\n  /**\n   * The tool call request. This is filled in only if the tool call is a client-side\n   * tool call.\n   */\n  toolCallRequest?: Shared.ToolCallRequest;\n}\n\nexport interface ThreadRetrieveResponse {\n  id: string;\n\n  createdAt: string;\n\n  messages: Array<ThreadMessage>;\n\n  projectId: string;\n\n  updatedAt: string;\n\n  generationStage?:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  metadata?: { [key: string]: unknown };\n\n  name?: string;\n\n  statusMessage?: string;\n}\n\nexport interface ThreadAdvanceResponse {\n  generationStage:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  /**\n   * Response message\n   */\n  responseMessageDto: ThreadMessage;\n\n  /**\n   * MCP access token to be used as bearer token when talking to the Tambo MCP\n   * server. Only included when MCP servers are configured for the project.\n   */\n  mcpAccessToken?: string;\n\n  /**\n   * Status message for the generation stage\n   */\n  statusMessage?: string;\n}\n\nexport interface ThreadAdvanceByIDResponse {\n  generationStage:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  /**\n   * Response message\n   */\n  responseMessageDto: ThreadMessage;\n\n  /**\n   * MCP access token to be used as bearer token when talking to the Tambo MCP\n   * server. Only included when MCP servers are configured for the project.\n   */\n  mcpAccessToken?: string;\n\n  /**\n   * Status message for the generation stage\n   */\n  statusMessage?: string;\n}\n\nexport interface ThreadCreateParams {\n  projectId: string;\n\n  /**\n   * Unique user identifier for the thread\n   */\n  contextKey?: string;\n\n  generationStage?:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  metadata?: { [key: string]: unknown };\n\n  name?: string;\n\n  statusMessage?: string;\n}\n\nexport interface ThreadRetrieveParams {\n  contextKey?: string;\n\n  includeInternal?: boolean;\n}\n\nexport interface ThreadUpdateParams {\n  projectId: string;\n\n  /**\n   * Unique user identifier for the thread\n   */\n  contextKey?: string;\n\n  generationStage?:\n    | 'IDLE'\n    | 'CHOOSING_COMPONENT'\n    | 'FETCHING_CONTEXT'\n    | 'HYDRATING_COMPONENT'\n    | 'STREAMING_RESPONSE'\n    | 'COMPLETE'\n    | 'ERROR'\n    | 'CANCELLED';\n\n  metadata?: { [key: string]: unknown };\n\n  name?: string;\n\n  statusMessage?: string;\n}\n\nexport interface ThreadListParams extends OffsetAndLimitParams {\n  /**\n   * Unique user identifier for the thread\n   */\n  contextKey?: string;\n}\n\nexport interface ThreadAdvanceByIDParams {\n  messageToAppend: ThreadAdvanceByIDParams.MessageToAppend;\n\n  availableComponents?: Array<Shared.AvailableComponent>;\n\n  clientTools?: Array<Shared.ComponentContextToolMetadata>;\n\n  /**\n   * Unique user identifier for the thread\n   */\n  contextKey?: string;\n\n  forceToolChoice?: string;\n\n  /**\n   * Initial messages to include when creating a new thread\n   */\n  initialMessages?: Array<ThreadAdvanceByIDParams.InitialMessage>;\n\n  /**\n   * Tool call counts\n   */\n  toolCallCounts?: { [key: string]: number };\n}\n\nexport namespace ThreadAdvanceByIDParams {\n  export interface MessageToAppend {\n    content: Array<ThreadsAPI.ChatCompletionContentPart>;\n\n    role: 'user' | 'assistant' | 'system' | 'tool';\n\n    /**\n     * @deprecated No longer used - instead set role and the tool call information\n     */\n    actionType?: 'tool_call' | 'tool_response';\n\n    /**\n     * Additional context to provide to the AI beyond the user query, such as the info\n     * about the current page the user is visiting.\n     */\n    additionalContext?: { [key: string]: unknown };\n\n    component?: ThreadsAPI.ComponentDecisionV2;\n\n    /**\n     * The initial state of the component\n     */\n    componentState?: { [key: string]: unknown };\n\n    error?: string;\n\n    /**\n     * Whether the message has been cancelled\n     */\n    isCancelled?: boolean;\n\n    metadata?: { [key: string]: unknown };\n\n    /**\n     * Reasoning text from the LLM, if the model supports it.\n     */\n    reasoning?: Array<string>;\n\n    /**\n     * Duration of reasoning in milliseconds\n     */\n    reasoningDurationMS?: number;\n\n    tool_call_id?: string;\n\n    toolCallRequest?: Shared.ToolCallRequest;\n\n    /**\n     * @deprecated Put the response in the content instead\n     */\n    toolResponse?: unknown;\n  }\n\n  export interface InitialMessage {\n    content: Array<ThreadsAPI.ChatCompletionContentPart>;\n\n    role: 'user' | 'assistant' | 'system' | 'tool';\n\n    /**\n     * @deprecated No longer used - instead set role and the tool call information\n     */\n    actionType?: 'tool_call' | 'tool_response';\n\n    /**\n     * Additional context to provide to the AI beyond the user query, such as the info\n     * about the current page the user is visiting.\n     */\n    additionalContext?: { [key: string]: unknown };\n\n    component?: ThreadsAPI.ComponentDecisionV2;\n\n    /**\n     * The initial state of the component\n     */\n    componentState?: { [key: string]: unknown };\n\n    error?: string;\n\n    /**\n     * Whether the message has been cancelled\n     */\n    isCancelled?: boolean;\n\n    metadata?: { [key: string]: unknown };\n\n    /**\n     * Reasoning text from the LLM, if the model supports it.\n     */\n    reasoning?: Array<string>;\n\n    /**\n     * Duration of reasoning in milliseconds\n     */\n    reasoningDurationMS?: number;\n\n    tool_call_id?: string;\n\n    toolCallRequest?: Shared.ToolCallRequest;\n\n    /**\n     * @deprecated Put the response in the content instead\n     */\n    toolResponse?: unknown;\n  }\n}\n\nexport interface ThreadGenerateNameParams {\n  /**\n   * Unique user identifier for the thread\n   */\n  contextKey?: string;\n}\n\nThreads.Messages = Messages;\nThreads.Suggestions = Suggestions;\n\nexport declare namespace Threads {\n  export {\n    type ChatCompletionContentPart as ChatCompletionContentPart,\n    type ComponentDecisionV2 as ComponentDecisionV2,\n    type Thread as Thread,\n    type ThreadMessage as ThreadMessage,\n    type ThreadRetrieveResponse as ThreadRetrieveResponse,\n    type ThreadAdvanceResponse as ThreadAdvanceResponse,\n    type ThreadAdvanceByIDResponse as ThreadAdvanceByIDResponse,\n    type ThreadsOffsetAndLimit as ThreadsOffsetAndLimit,\n    type ThreadCreateParams as ThreadCreateParams,\n    type ThreadRetrieveParams as ThreadRetrieveParams,\n    type ThreadUpdateParams as ThreadUpdateParams,\n    type ThreadListParams as ThreadListParams,\n    type ThreadAdvanceByIDParams as ThreadAdvanceByIDParams,\n    type ThreadGenerateNameParams as ThreadGenerateNameParams,\n  };\n\n  export {\n    Messages as Messages,\n    type MessageCreateResponse as MessageCreateResponse,\n    type MessageListResponse as MessageListResponse,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageListParams as MessageListParams,\n    type MessageDeleteParams as MessageDeleteParams,\n    type MessageUpdateComponentStateParams as MessageUpdateComponentStateParams,\n  };\n\n  export {\n    Suggestions as Suggestions,\n    type Suggestion as Suggestion,\n    type SuggestionsGenerate as SuggestionsGenerate,\n    type SuggestionListResponse as SuggestionListResponse,\n    type SuggestionGenerateResponse as SuggestionGenerateResponse,\n    type SuggestionListParams as SuggestionListParams,\n    type SuggestionGenerateParams as SuggestionGenerateParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as AudioAPI from './audio';\nimport { Audio, AudioTranscribeParams, AudioTranscribeResponse } from './audio';\nimport * as AuthAPI from './auth';\nimport {\n  Auth,\n  AuthGetMcpTokenParams,\n  AuthGetMcpTokenResponse,\n  AuthGetTokenParams,\n  AuthGetTokenResponse,\n} from './auth';\nimport * as RegistryAPI from './registry';\nimport { Registry, RegistryRetrieveResponse } from './registry';\nimport * as ProjectsAPI from './projects/projects';\nimport {\n  ProjectDeleteResponse,\n  ProjectGetCurrentResponse,\n  ProjectRetrieveResponse,\n  Projects,\n} from './projects/projects';\nimport * as ThreadsAPI from './threads/threads';\nimport {\n  ChatCompletionContentPart,\n  ComponentDecisionV2,\n  Thread,\n  ThreadAdvanceByIDParams,\n  ThreadAdvanceByIDResponse,\n  ThreadAdvanceResponse,\n  ThreadCreateParams,\n  ThreadGenerateNameParams,\n  ThreadListParams,\n  ThreadMessage,\n  ThreadRetrieveParams,\n  ThreadRetrieveResponse,\n  ThreadUpdateParams,\n  Threads,\n  ThreadsOffsetAndLimit,\n} from './threads/threads';\n\nexport class Beta extends APIResource {\n  registry: RegistryAPI.Registry = new RegistryAPI.Registry(this._client);\n  projects: ProjectsAPI.Projects = new ProjectsAPI.Projects(this._client);\n  threads: ThreadsAPI.Threads = new ThreadsAPI.Threads(this._client);\n  auth: AuthAPI.Auth = new AuthAPI.Auth(this._client);\n  audio: AudioAPI.Audio = new AudioAPI.Audio(this._client);\n}\n\nBeta.Registry = Registry;\nBeta.Projects = Projects;\nBeta.Threads = Threads;\nBeta.Auth = Auth;\nBeta.Audio = Audio;\n\nexport declare namespace Beta {\n  export { Registry as Registry, type RegistryRetrieveResponse as RegistryRetrieveResponse };\n\n  export {\n    Projects as Projects,\n    type ProjectRetrieveResponse as ProjectRetrieveResponse,\n    type ProjectDeleteResponse as ProjectDeleteResponse,\n    type ProjectGetCurrentResponse as ProjectGetCurrentResponse,\n  };\n\n  export {\n    Threads as Threads,\n    type ChatCompletionContentPart as ChatCompletionContentPart,\n    type ComponentDecisionV2 as ComponentDecisionV2,\n    type Thread as Thread,\n    type ThreadMessage as ThreadMessage,\n    type ThreadRetrieveResponse as ThreadRetrieveResponse,\n    type ThreadAdvanceResponse as ThreadAdvanceResponse,\n    type ThreadAdvanceByIDResponse as ThreadAdvanceByIDResponse,\n    type ThreadsOffsetAndLimit as ThreadsOffsetAndLimit,\n    type ThreadCreateParams as ThreadCreateParams,\n    type ThreadRetrieveParams as ThreadRetrieveParams,\n    type ThreadUpdateParams as ThreadUpdateParams,\n    type ThreadListParams as ThreadListParams,\n    type ThreadAdvanceByIDParams as ThreadAdvanceByIDParams,\n    type ThreadGenerateNameParams as ThreadGenerateNameParams,\n  };\n\n  export {\n    Auth as Auth,\n    type AuthGetMcpTokenResponse as AuthGetMcpTokenResponse,\n    type AuthGetTokenResponse as AuthGetTokenResponse,\n    type AuthGetMcpTokenParams as AuthGetMcpTokenParams,\n    type AuthGetTokenParams as AuthGetTokenParams,\n  };\n\n  export {\n    Audio as Audio,\n    type AudioTranscribeResponse as AudioTranscribeResponse,\n    type AudioTranscribeParams as AudioTranscribeParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Storage extends APIResource {\n  /**\n   * Returns a presigned URL that allows direct file upload to S3. The client should\n   * PUT the file directly to the returned uploadUrl.\n   *\n   * @example\n   * ```ts\n   * const response = await client.storage.presign({\n   *   contentType: 'application/pdf',\n   *   size: 1024000,\n   * });\n   * ```\n   */\n  presign(body: StoragePresignParams, options?: RequestOptions): APIPromise<StoragePresignResponse> {\n    return this._client.post('/storage/presign', { body, ...options });\n  }\n}\n\nexport interface StoragePresignResponse {\n  /**\n   * The attachment URI to reference this file in messages\n   */\n  attachmentUri: string;\n\n  /**\n   * Time in seconds until the presigned URL expires\n   */\n  expiresIn: number;\n\n  /**\n   * The presigned URL to PUT the file directly to S3\n   */\n  uploadUrl: string;\n}\n\nexport interface StoragePresignParams {\n  /**\n   * The MIME type of the file\n   */\n  contentType: string;\n\n  /**\n   * The file size in bytes (max 10MB)\n   */\n  size: number;\n}\n\nexport declare namespace Storage {\n  export {\n    type StoragePresignResponse as StoragePresignResponse,\n    type StoragePresignParams as StoragePresignParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as ThreadsAPI from './threads';\nimport { APIPromise } from '../../core/api-promise';\nimport { RequestOptions } from '../../internal/request-options';\nimport { path } from '../../internal/utils/path';\n\nexport class Messages extends APIResource {\n  /**\n   * List messages in a thread. Supports cursor-based pagination and ordering.\n   *\n   * @example\n   * ```ts\n   * const messages = await client.threads.messages.list(\n   *   'thr_abc123xyz',\n   * );\n   * ```\n   */\n  list(\n    threadID: string,\n    query: MessageListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<MessageListResponse> {\n    return this._client.get(path`/v1/threads/${threadID}/messages`, { query, ...options });\n  }\n\n  /**\n   * Get a specific message by ID from a thread.\n   *\n   * @example\n   * ```ts\n   * const message = await client.threads.messages.get(\n   *   'msg_xyz789abc',\n   *   { threadId: 'thr_abc123xyz' },\n   * );\n   * ```\n   */\n  get(messageID: string, params: MessageGetParams, options?: RequestOptions): APIPromise<MessageGetResponse> {\n    const { threadId } = params;\n    return this._client.get(path`/v1/threads/${threadId}/messages/${messageID}`, options);\n  }\n}\n\nexport interface MessageListResponse {\n  /**\n   * Whether there are more results\n   */\n  hasMore: boolean;\n\n  /**\n   * List of messages in the thread\n   */\n  messages: Array<MessageListResponse.Message>;\n\n  /**\n   * Cursor for the next page of results\n   */\n  nextCursor?: string;\n}\n\nexport namespace MessageListResponse {\n  export interface Message {\n    /**\n     * Unique identifier for this message\n     */\n    id: string;\n\n    /**\n     * Content blocks in this message\n     */\n    content: Array<\n      | ThreadsAPI.TextContent\n      | ThreadsAPI.ResourceContent\n      | ThreadsAPI.ToolUseContent\n      | ThreadsAPI.ToolResultContent\n      | ThreadsAPI.ComponentContent\n    >;\n\n    /**\n     * Message role\n     */\n    role: 'user' | 'assistant' | 'system';\n\n    /**\n     * When the message was created (ISO 8601)\n     */\n    createdAt?: string;\n\n    /**\n     * Additional metadata\n     */\n    metadata?: unknown;\n  }\n}\n\nexport interface MessageGetResponse {\n  /**\n   * Unique identifier for this message\n   */\n  id: string;\n\n  /**\n   * Content blocks in this message\n   */\n  content: Array<\n    | ThreadsAPI.TextContent\n    | ThreadsAPI.ResourceContent\n    | ThreadsAPI.ToolUseContent\n    | ThreadsAPI.ToolResultContent\n    | ThreadsAPI.ComponentContent\n  >;\n\n  /**\n   * Message role\n   */\n  role: 'user' | 'assistant' | 'system';\n\n  /**\n   * When the message was created (ISO 8601)\n   */\n  createdAt?: string;\n\n  /**\n   * Additional metadata\n   */\n  metadata?: unknown;\n}\n\nexport interface MessageListParams {\n  /**\n   * Cursor for pagination\n   */\n  cursor?: string;\n\n  /**\n   * Maximum number of messages to return\n   */\n  limit?: string;\n\n  /**\n   * Sort order: 'asc' for oldest first, 'desc' for newest first\n   */\n  order?: 'asc' | 'desc';\n}\n\nexport interface MessageGetParams {\n  /**\n   * Thread ID\n   */\n  threadId: string;\n}\n\nexport declare namespace Messages {\n  export {\n    type MessageListResponse as MessageListResponse,\n    type MessageGetResponse as MessageGetResponse,\n    type MessageListParams as MessageListParams,\n    type MessageGetParams as MessageGetParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as RunsAPI from './runs';\nimport * as ThreadsAPI from './threads';\nimport { APIPromise } from '../../core/api-promise';\nimport { Stream } from '../../core/streaming';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\nimport { path } from '../../internal/utils/path';\n\nexport class Runs extends APIResource {\n  /**\n   * Creates a new thread and immediately starts a streaming run. Returns an SSE\n   * stream of AG-UI events.\n   *\n   * @example\n   * ```ts\n   * const run = await client.threads.runs.create({\n   *   message: {\n   *     content: [{ text: 'Hello, world!', type: 'text' }],\n   *     role: 'user',\n   *   },\n   * });\n   * ```\n   */\n  create(body: RunCreateParams, options?: RequestOptions): APIPromise<Stream<RunCreateResponse>> {\n    return this._client.post('/v1/threads/runs', {\n      body,\n      ...options,\n      headers: buildHeaders([{ Accept: 'text/event-stream' }, options?.headers]),\n      stream: true,\n    }) as APIPromise<Stream<RunCreateResponse>>;\n  }\n\n  /**\n   * Explicitly cancel a running run. Note: closing the SSE connection also cancels\n   * the run.\n   *\n   * @example\n   * ```ts\n   * const run = await client.threads.runs.delete(\n   *   'run_xyz789abc',\n   *   { threadId: 'thr_abc123xyz' },\n   * );\n   * ```\n   */\n  delete(runID: string, params: RunDeleteParams, options?: RequestOptions): APIPromise<RunDeleteResponse> {\n    const { threadId } = params;\n    return this._client.delete(path`/v1/threads/${threadId}/runs/${runID}`, options);\n  }\n\n  /**\n   * Starts a streaming run on an existing thread. Returns an SSE stream of AG-UI\n   * events.\n   *\n   * @example\n   * ```ts\n   * const response = await client.threads.runs.run(\n   *   'thr_abc123xyz',\n   *   {\n   *     message: {\n   *       content: [{ text: 'Hello, world!', type: 'text' }],\n   *       role: 'user',\n   *     },\n   *   },\n   * );\n   * ```\n   */\n  run(threadID: string, body: RunRunParams, options?: RequestOptions): APIPromise<Stream<RunRunResponse>> {\n    return this._client.post(path`/v1/threads/${threadID}/runs`, {\n      body,\n      ...options,\n      headers: buildHeaders([{ Accept: 'text/event-stream' }, options?.headers]),\n      stream: true,\n    }) as APIPromise<Stream<RunRunResponse>>;\n  }\n}\n\nexport interface InputMessage {\n  /**\n   * Content blocks (text, resource, or tool_result)\n   */\n  content: Array<ThreadsAPI.TextContent | ThreadsAPI.ResourceContent | ThreadsAPI.ToolResultContent>;\n\n  /**\n   * Message role - must be 'user' for input messages\n   */\n  role: 'user';\n\n  /**\n   * Additional metadata to attach to the message\n   */\n  metadata?: unknown;\n}\n\nexport interface RunCreateResponse {\n  /**\n   * Event type discriminator (e.g., RUN_STARTED, TEXT_MESSAGE_CONTENT,\n   * TOOL_CALL_START)\n   */\n  type: string;\n\n  /**\n   * Unix timestamp (milliseconds) when event was generated\n   */\n  timestamp?: number;\n}\n\nexport interface RunDeleteResponse {\n  /**\n   * The run ID that was cancelled\n   */\n  runId: string;\n\n  /**\n   * New status after cancellation (always 'cancelled')\n   */\n  status: 'cancelled';\n}\n\nexport interface RunRunResponse {\n  /**\n   * Event type discriminator (e.g., RUN_STARTED, TEXT_MESSAGE_CONTENT,\n   * TOOL_CALL_START)\n   */\n  type: string;\n\n  /**\n   * Unix timestamp (milliseconds) when event was generated\n   */\n  timestamp?: number;\n}\n\nexport interface RunCreateParams {\n  /**\n   * The user's message\n   */\n  message: InputMessage;\n\n  /**\n   * Available UI components the model can render\n   */\n  availableComponents?: Array<RunCreateParams.AvailableComponent>;\n\n  /**\n   * Maximum tokens to generate\n   */\n  maxTokens?: number;\n\n  /**\n   * Override the default model\n   */\n  model?: string;\n\n  /**\n   * ID of the previous run. Required when continuing a thread that already has\n   * messages.\n   */\n  previousRunId?: string;\n\n  /**\n   * Metadata for the run\n   */\n  runMetadata?: unknown;\n\n  /**\n   * Temperature for generation (0-2)\n   */\n  temperature?: number;\n\n  /**\n   * Thread configuration\n   */\n  thread?: RunCreateParams.Thread;\n\n  /**\n   * Metadata for the thread\n   */\n  threadMetadata?: unknown;\n\n  /**\n   * How the model should use tools\n   */\n  toolChoice?: 'auto' | 'required' | 'none' | RunCreateParams.Name;\n\n  /**\n   * Client-side tools the model can call\n   */\n  tools?: Array<RunCreateParams.Tool>;\n}\n\nexport namespace RunCreateParams {\n  export interface AvailableComponent {\n    /**\n     * Description of what this component displays\n     */\n    description: string;\n\n    /**\n     * Component name (e.g., 'StockChart')\n     */\n    name: string;\n\n    /**\n     * JSON Schema for component props\n     */\n    propsSchema: unknown;\n\n    /**\n     * Optional JSON Schema for component state\n     */\n    stateSchema?: unknown;\n  }\n\n  /**\n   * Thread configuration\n   */\n  export interface Thread {\n    /**\n     * Optional context key for thread organization\n     */\n    contextKey?: string;\n\n    /**\n     * Initial messages to seed the thread with\n     */\n    initialMessages?: Array<RunsAPI.InputMessage>;\n\n    /**\n     * Additional metadata to attach to the thread\n     */\n    metadata?: unknown;\n  }\n\n  export interface Name {\n    name?: string;\n  }\n\n  export interface Tool {\n    /**\n     * Description of what the tool does\n     */\n    description: string;\n\n    /**\n     * JSON Schema for the tool's input parameters\n     */\n    inputSchema: unknown;\n\n    /**\n     * Unique tool name (a-z, A-Z, 0-9, \\_, -)\n     */\n    name: string;\n\n    /**\n     * Optional JSON Schema for structured output\n     */\n    outputSchema?: unknown;\n\n    /**\n     * Enable strict schema validation (OpenAI feature)\n     */\n    strict?: boolean;\n  }\n}\n\nexport interface RunDeleteParams {\n  /**\n   * Thread ID\n   */\n  threadId: string;\n}\n\nexport interface RunRunParams {\n  /**\n   * The user's message\n   */\n  message: InputMessage;\n\n  /**\n   * Available UI components the model can render\n   */\n  availableComponents?: Array<RunRunParams.AvailableComponent>;\n\n  /**\n   * Maximum tokens to generate\n   */\n  maxTokens?: number;\n\n  /**\n   * Override the default model\n   */\n  model?: string;\n\n  /**\n   * ID of the previous run. Required when continuing a thread that already has\n   * messages.\n   */\n  previousRunId?: string;\n\n  /**\n   * Metadata for the run\n   */\n  runMetadata?: unknown;\n\n  /**\n   * Temperature for generation (0-2)\n   */\n  temperature?: number;\n\n  /**\n   * How the model should use tools\n   */\n  toolChoice?: 'auto' | 'required' | 'none' | RunRunParams.Name;\n\n  /**\n   * Client-side tools the model can call\n   */\n  tools?: Array<RunRunParams.Tool>;\n}\n\nexport namespace RunRunParams {\n  export interface AvailableComponent {\n    /**\n     * Description of what this component displays\n     */\n    description: string;\n\n    /**\n     * Component name (e.g., 'StockChart')\n     */\n    name: string;\n\n    /**\n     * JSON Schema for component props\n     */\n    propsSchema: unknown;\n\n    /**\n     * Optional JSON Schema for component state\n     */\n    stateSchema?: unknown;\n  }\n\n  export interface Name {\n    name?: string;\n  }\n\n  export interface Tool {\n    /**\n     * Description of what the tool does\n     */\n    description: string;\n\n    /**\n     * JSON Schema for the tool's input parameters\n     */\n    inputSchema: unknown;\n\n    /**\n     * Unique tool name (a-z, A-Z, 0-9, \\_, -)\n     */\n    name: string;\n\n    /**\n     * Optional JSON Schema for structured output\n     */\n    outputSchema?: unknown;\n\n    /**\n     * Enable strict schema validation (OpenAI feature)\n     */\n    strict?: boolean;\n  }\n}\n\nexport declare namespace Runs {\n  export {\n    type InputMessage as InputMessage,\n    type RunCreateResponse as RunCreateResponse,\n    type RunDeleteResponse as RunDeleteResponse,\n    type RunRunResponse as RunRunResponse,\n    type RunCreateParams as RunCreateParams,\n    type RunDeleteParams as RunDeleteParams,\n    type RunRunParams as RunRunParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as ThreadsAPI from './threads';\nimport * as Shared from '../shared';\nimport * as MessagesAPI from './messages';\nimport {\n  MessageGetParams,\n  MessageGetResponse,\n  MessageListParams,\n  MessageListResponse,\n  Messages,\n} from './messages';\nimport * as RunsAPI from './runs';\nimport {\n  InputMessage,\n  RunCreateParams,\n  RunCreateResponse,\n  RunDeleteParams,\n  RunDeleteResponse,\n  RunRunParams,\n  RunRunResponse,\n  Runs,\n} from './runs';\nimport { APIPromise } from '../../core/api-promise';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\nimport { path } from '../../internal/utils/path';\n\nexport class Threads extends APIResource {\n  messages: MessagesAPI.Messages = new MessagesAPI.Messages(this._client);\n  runs: RunsAPI.Runs = new RunsAPI.Runs(this._client);\n\n  /**\n   * Create a new empty thread. Note: initialMessages is not supported yet; create\n   * the thread first, then add messages via runs/message endpoints.\n   *\n   * @example\n   * ```ts\n   * const thread = await client.threads.create();\n   * ```\n   */\n  create(body: ThreadCreateParams, options?: RequestOptions): APIPromise<ThreadCreateResponse> {\n    return this._client.post('/v1/threads', { body, ...options });\n  }\n\n  /**\n   * Get a thread by ID with all its messages. The thread must belong to the\n   * authenticated project.\n   *\n   * @example\n   * ```ts\n   * const thread = await client.threads.retrieve(\n   *   'thr_abc123xyz',\n   * );\n   * ```\n   */\n  retrieve(threadID: string, options?: RequestOptions): APIPromise<ThreadRetrieveResponse> {\n    return this._client.get(path`/v1/threads/${threadID}`, options);\n  }\n\n  /**\n   * List all threads for the authenticated project. Supports cursor-based pagination\n   * and filtering by context key.\n   *\n   * @example\n   * ```ts\n   * const threads = await client.threads.list();\n   * ```\n   */\n  list(\n    query: ThreadListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<ThreadListResponse> {\n    return this._client.get('/v1/threads', { query, ...options });\n  }\n\n  /**\n   * Delete a thread and all its messages. This action cannot be undone.\n   *\n   * @example\n   * ```ts\n   * await client.threads.delete('thr_abc123xyz');\n   * ```\n   */\n  delete(threadID: string, options?: RequestOptions): APIPromise<void> {\n    return this._client.delete(path`/v1/threads/${threadID}`, {\n      ...options,\n      headers: buildHeaders([{ Accept: '*/*' }, options?.headers]),\n    });\n  }\n}\n\nexport interface ComponentContent {\n  /**\n   * Unique identifier for this component instance\n   */\n  id: string;\n\n  /**\n   * Name of the component to render\n   */\n  name: string;\n\n  /**\n   * Props to pass to the component\n   */\n  props: unknown;\n\n  /**\n   * Content block type identifier\n   */\n  type: 'component';\n\n  /**\n   * Current state of the component\n   */\n  state?: unknown;\n}\n\nexport interface ResourceContent {\n  /**\n   * Resource data containing URI, text, or blob\n   */\n  resource: Shared.Resource;\n\n  /**\n   * Content block type identifier\n   */\n  type: 'resource';\n}\n\nexport interface RunError {\n  /**\n   * Error message\n   */\n  message: string;\n\n  /**\n   * Error code\n   */\n  code?: string;\n}\n\nexport interface TextContent {\n  /**\n   * The text content\n   */\n  text: string;\n\n  /**\n   * Content block type identifier\n   */\n  type: 'text';\n}\n\nexport interface ToolResultContent {\n  /**\n   * Result content (text or resource blocks)\n   */\n  content: Array<TextContent | ResourceContent>;\n\n  /**\n   * ID of the tool call this result responds to\n   */\n  toolUseId: string;\n\n  /**\n   * Content block type identifier\n   */\n  type: 'tool_result';\n\n  /**\n   * Whether the tool call resulted in an error\n   */\n  isError?: boolean;\n}\n\nexport interface ToolUseContent {\n  /**\n   * Unique identifier for this tool call\n   */\n  id: string;\n\n  /**\n   * Input arguments for the tool\n   */\n  input: unknown;\n\n  /**\n   * Name of the tool being called\n   */\n  name: string;\n\n  /**\n   * Content block type identifier\n   */\n  type: 'tool_use';\n}\n\nexport interface ThreadCreateResponse {\n  /**\n   * Unique identifier for this thread\n   */\n  id: string;\n\n  /**\n   * When the thread was created (ISO 8601)\n   */\n  createdAt: string;\n\n  /**\n   * Project this thread belongs to\n   */\n  projectId: string;\n\n  /**\n   * Current run status: idle (no run), waiting (run started, awaiting content),\n   * streaming (receiving content)\n   */\n  runStatus: 'idle' | 'waiting' | 'streaming';\n\n  /**\n   * When the thread was last updated (ISO 8601)\n   */\n  updatedAt: string;\n\n  /**\n   * Optional context key for thread organization\n   */\n  contextKey?: string;\n\n  /**\n   * ID of the currently active run (when not idle)\n   */\n  currentRunId?: string;\n\n  /**\n   * ID of the last completed run. Required as previousRunId when continuing after\n   * tool calls.\n   */\n  lastCompletedRunId?: string;\n\n  /**\n   * Whether the last run was cancelled\n   */\n  lastRunCancelled?: boolean;\n\n  /**\n   * Error information from the last run\n   */\n  lastRunError?: RunError;\n\n  /**\n   * Additional metadata\n   */\n  metadata?: unknown;\n\n  /**\n   * Tool call IDs awaiting client-side results. If non-empty, next run must provide\n   * tool_result content with previousRunId set.\n   */\n  pendingToolCallIds?: Array<string>;\n\n  /**\n   * Human-readable status message (e.g., 'Fetching weather data...')\n   */\n  statusMessage?: string;\n}\n\nexport interface ThreadRetrieveResponse {\n  /**\n   * Unique identifier for this thread\n   */\n  id: string;\n\n  /**\n   * When the thread was created (ISO 8601)\n   */\n  createdAt: string;\n\n  /**\n   * Messages in this thread\n   */\n  messages: Array<ThreadRetrieveResponse.Message>;\n\n  /**\n   * Project this thread belongs to\n   */\n  projectId: string;\n\n  /**\n   * Current run status: idle (no run), waiting (run started, awaiting content),\n   * streaming (receiving content)\n   */\n  runStatus: 'idle' | 'waiting' | 'streaming';\n\n  /**\n   * When the thread was last updated (ISO 8601)\n   */\n  updatedAt: string;\n\n  /**\n   * Optional context key for thread organization\n   */\n  contextKey?: string;\n\n  /**\n   * ID of the currently active run (when not idle)\n   */\n  currentRunId?: string;\n\n  /**\n   * ID of the last completed run. Required as previousRunId when continuing after\n   * tool calls.\n   */\n  lastCompletedRunId?: string;\n\n  /**\n   * Whether the last run was cancelled\n   */\n  lastRunCancelled?: boolean;\n\n  /**\n   * Error information from the last run\n   */\n  lastRunError?: RunError;\n\n  /**\n   * Additional metadata\n   */\n  metadata?: unknown;\n\n  /**\n   * Tool call IDs awaiting client-side results. If non-empty, next run must provide\n   * tool_result content with previousRunId set.\n   */\n  pendingToolCallIds?: Array<string>;\n\n  /**\n   * Human-readable status message (e.g., 'Fetching weather data...')\n   */\n  statusMessage?: string;\n}\n\nexport namespace ThreadRetrieveResponse {\n  export interface Message {\n    /**\n     * Unique identifier for this message\n     */\n    id: string;\n\n    /**\n     * Content blocks in this message\n     */\n    content: Array<\n      | ThreadsAPI.TextContent\n      | ThreadsAPI.ResourceContent\n      | ThreadsAPI.ToolUseContent\n      | ThreadsAPI.ToolResultContent\n      | ThreadsAPI.ComponentContent\n    >;\n\n    /**\n     * Message role\n     */\n    role: 'user' | 'assistant' | 'system';\n\n    /**\n     * When the message was created (ISO 8601)\n     */\n    createdAt?: string;\n\n    /**\n     * Additional metadata\n     */\n    metadata?: unknown;\n  }\n}\n\nexport interface ThreadListResponse {\n  /**\n   * Whether there are more results\n   */\n  hasMore: boolean;\n\n  /**\n   * List of threads\n   */\n  threads: Array<ThreadListResponse.Thread>;\n\n  /**\n   * Cursor for the next page of results\n   */\n  nextCursor?: string;\n}\n\nexport namespace ThreadListResponse {\n  export interface Thread {\n    /**\n     * Unique identifier for this thread\n     */\n    id: string;\n\n    /**\n     * When the thread was created (ISO 8601)\n     */\n    createdAt: string;\n\n    /**\n     * Project this thread belongs to\n     */\n    projectId: string;\n\n    /**\n     * Current run status: idle (no run), waiting (run started, awaiting content),\n     * streaming (receiving content)\n     */\n    runStatus: 'idle' | 'waiting' | 'streaming';\n\n    /**\n     * When the thread was last updated (ISO 8601)\n     */\n    updatedAt: string;\n\n    /**\n     * Optional context key for thread organization\n     */\n    contextKey?: string;\n\n    /**\n     * ID of the currently active run (when not idle)\n     */\n    currentRunId?: string;\n\n    /**\n     * ID of the last completed run. Required as previousRunId when continuing after\n     * tool calls.\n     */\n    lastCompletedRunId?: string;\n\n    /**\n     * Whether the last run was cancelled\n     */\n    lastRunCancelled?: boolean;\n\n    /**\n     * Error information from the last run\n     */\n    lastRunError?: ThreadsAPI.RunError;\n\n    /**\n     * Additional metadata\n     */\n    metadata?: unknown;\n\n    /**\n     * Tool call IDs awaiting client-side results. If non-empty, next run must provide\n     * tool_result content with previousRunId set.\n     */\n    pendingToolCallIds?: Array<string>;\n\n    /**\n     * Human-readable status message (e.g., 'Fetching weather data...')\n     */\n    statusMessage?: string;\n  }\n}\n\nexport interface ThreadCreateParams {\n  /**\n   * Optional context key for thread organization\n   */\n  contextKey?: string;\n\n  /**\n   * Initial messages to seed the thread with\n   */\n  initialMessages?: Array<RunsAPI.InputMessage>;\n\n  /**\n   * Additional metadata to attach to the thread\n   */\n  metadata?: unknown;\n}\n\nexport interface ThreadListParams {\n  /**\n   * Filter by context key\n   */\n  contextKey?: string;\n\n  /**\n   * Cursor for pagination\n   */\n  cursor?: string;\n\n  /**\n   * Maximum number of threads to return\n   */\n  limit?: string;\n}\n\nThreads.Messages = Messages;\nThreads.Runs = Runs;\n\nexport declare namespace Threads {\n  export {\n    type ComponentContent as ComponentContent,\n    type ResourceContent as ResourceContent,\n    type RunError as RunError,\n    type TextContent as TextContent,\n    type ToolResultContent as ToolResultContent,\n    type ToolUseContent as ToolUseContent,\n    type ThreadCreateResponse as ThreadCreateResponse,\n    type ThreadRetrieveResponse as ThreadRetrieveResponse,\n    type ThreadListResponse as ThreadListResponse,\n    type ThreadCreateParams as ThreadCreateParams,\n    type ThreadListParams as ThreadListParams,\n  };\n\n  export {\n    Messages as Messages,\n    type MessageListResponse as MessageListResponse,\n    type MessageGetResponse as MessageGetResponse,\n    type MessageListParams as MessageListParams,\n    type MessageGetParams as MessageGetParams,\n  };\n\n  export {\n    Runs as Runs,\n    type InputMessage as InputMessage,\n    type RunCreateResponse as RunCreateResponse,\n    type RunDeleteResponse as RunDeleteResponse,\n    type RunRunResponse as RunRunResponse,\n    type RunCreateParams as RunCreateParams,\n    type RunDeleteParams as RunDeleteParams,\n    type RunRunParams as RunRunParams,\n  };\n}\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * Read an environment variable.\n *\n * Trims beginning and trailing whitespace.\n *\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\n */\nexport const readEnv = (env: string): string | undefined => {\n  if (typeof (globalThis as any).process !== 'undefined') {\n    return (globalThis as any).process.env?.[env]?.trim() ?? undefined;\n  }\n  if (typeof (globalThis as any).Deno !== 'undefined') {\n    return (globalThis as any).Deno.env?.get?.(env)?.trim();\n  }\n  return undefined;\n};\n", "// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { RequestInit, RequestInfo, BodyInit } from './internal/builtin-types';\nimport type { HTTPMethod, PromiseOrValue, MergedRequestInit, FinalizedRequestInit } from './internal/types';\nimport { uuid4 } from './internal/utils/uuid';\nimport { validatePositiveInteger, isAbsoluteURL, safeJSON } from './internal/utils/values';\nimport { sleep } from './internal/utils/sleep';\nexport type { Logger, LogLevel } from './internal/utils/log';\nimport { castToError, isAbortError } from './internal/errors';\nimport type { APIResponseProps } from './internal/parse';\nimport { getPlatformHeaders } from './internal/detect-platform';\nimport * as Shims from './internal/shims';\nimport * as Opts from './internal/request-options';\nimport { VERSION } from './version';\nimport * as Errors from './core/error';\nimport * as Pagination from './core/pagination';\nimport { AbstractPage, type OffsetAndLimitParams, OffsetAndLimitResponse } from './core/pagination';\nimport * as Uploads from './core/uploads';\nimport * as API from './resources/index';\nimport { APIPromise } from './core/api-promise';\nimport { Storage, StoragePresignParams, StoragePresignResponse } from './resources/storage';\nimport { Beta } from './resources/beta/beta';\nimport {\n  ComponentContent,\n  ResourceContent,\n  RunError,\n  TextContent,\n  ThreadCreateParams,\n  ThreadCreateResponse,\n  ThreadListParams,\n  ThreadListResponse,\n  ThreadRetrieveResponse,\n  Threads,\n  ToolResultContent,\n  ToolUseContent,\n} from './resources/threads/threads';\nimport { type Fetch } from './internal/builtin-types';\nimport { HeadersLike, NullableHeaders, buildHeaders } from './internal/headers';\nimport { FinalRequestOptions, RequestOptions } from './internal/request-options';\nimport { readEnv } from './internal/utils/env';\nimport {\n  type LogLevel,\n  type Logger,\n  formatRequestDetails,\n  loggerFor,\n  parseLogLevel,\n} from './internal/utils/log';\nimport { isEmptyObj } from './internal/utils/values';\n\nconst environments = {\n  production: 'https://api.tambo.co',\n  staging: 'https://hydra-api-dev.up.railway.app',\n};\ntype Environment = keyof typeof environments;\n\nexport interface ClientOptions {\n  /**\n   * API key used for authentication\n   */\n  apiKey?: string | null | undefined;\n\n  /**\n   * Tambo Access Token from /oauth/token API\n   */\n  bearer?: string | null | undefined;\n\n  /**\n   * Specifies the environment to use for the API.\n   *\n   * Each environment maps to a different base URL:\n   * - `production` corresponds to `https://api.tambo.co`\n   * - `staging` corresponds to `https://hydra-api-dev.up.railway.app`\n   */\n  environment?: Environment | undefined;\n\n  /**\n   * Override the default base URL for the API, e.g., \"https://api.example.com/v2/\"\n   *\n   * Defaults to process.env['TAMBO_AI_BASE_URL'].\n   */\n  baseURL?: string | null | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * Note that request timeouts are retried by default, so in a worst-case scenario you may wait\n   * much longer than this timeout before the promise succeeds or fails.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number | undefined;\n  /**\n   * Additional `RequestInit` options to be passed to `fetch` calls.\n   * Properties will be overridden by per-request `fetchOptions`.\n   */\n  fetchOptions?: MergedRequestInit | undefined;\n\n  /**\n   * Specify a custom `fetch` function implementation.\n   *\n   * If not provided, we expect that `fetch` is defined globally.\n   */\n  fetch?: Fetch | undefined;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 0\n   */\n  maxRetries?: number | undefined;\n\n  /**\n   * Default headers to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * header to `null` in request options.\n   */\n  defaultHeaders?: HeadersLike | undefined;\n\n  /**\n   * Default query parameters to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * param to `undefined` in request options.\n   */\n  defaultQuery?: Record<string, string | undefined> | undefined;\n\n  /**\n   * Set the log level.\n   *\n   * Defaults to process.env['TAMBO_AI_LOG'] or 'warn' if it isn't set.\n   */\n  logLevel?: LogLevel | undefined;\n\n  /**\n   * Set the logger.\n   *\n   * Defaults to globalThis.console.\n   */\n  logger?: Logger | undefined;\n}\n\n/**\n * API Client for interfacing with the Tambo AI API.\n */\nexport class TamboAI {\n  apiKey: string | null;\n  bearer: string | null;\n\n  baseURL: string;\n  maxRetries: number;\n  timeout: number;\n  logger: Logger;\n  logLevel: LogLevel | undefined;\n  fetchOptions: MergedRequestInit | undefined;\n\n  private fetch: Fetch;\n  #encoder: Opts.RequestEncoder;\n  protected idempotencyHeader?: string;\n  private _options: ClientOptions;\n\n  /**\n   * API Client for interfacing with the Tambo AI API.\n   *\n   * @param {string | null | undefined} [opts.apiKey=process.env['TAMBO_API_KEY'] ?? null]\n   * @param {string | null | undefined} [opts.bearer]\n   * @param {Environment} [opts.environment=production] - Specifies the environment URL to use for the API.\n   * @param {string} [opts.baseURL=process.env['TAMBO_AI_BASE_URL'] ?? https://api.tambo.co] - Override the default base URL for the API.\n   * @param {number} [opts.timeout=1 minute] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.\n   * @param {MergedRequestInit} [opts.fetchOptions] - Additional `RequestInit` options to be passed to `fetch` calls.\n   * @param {Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.\n   * @param {number} [opts.maxRetries=0] - The maximum number of times the client will retry a request.\n   * @param {HeadersLike} opts.defaultHeaders - Default headers to include with every request to the API.\n   * @param {Record<string, string | undefined>} opts.defaultQuery - Default query parameters to include with every request to the API.\n   */\n  constructor({\n    baseURL = readEnv('TAMBO_AI_BASE_URL'),\n    apiKey = readEnv('TAMBO_API_KEY') ?? null,\n    bearer = null,\n    ...opts\n  }: ClientOptions = {}) {\n    const options: ClientOptions = {\n      apiKey,\n      bearer,\n      ...opts,\n      baseURL,\n      environment: opts.environment ?? 'production',\n    };\n\n    if (baseURL && opts.environment) {\n      throw new Errors.TamboAIError(\n        'Ambiguous URL; The `baseURL` option (or TAMBO_AI_BASE_URL env var) and the `environment` option are given. If you want to use the environment you must pass baseURL: null',\n      );\n    }\n\n    this.baseURL = options.baseURL || environments[options.environment || 'production'];\n    this.timeout = options.timeout ?? TamboAI.DEFAULT_TIMEOUT /* 1 minute */;\n    this.logger = options.logger ?? console;\n    const defaultLogLevel = 'warn';\n    // Set default logLevel early so that we can log a warning in parseLogLevel.\n    this.logLevel = defaultLogLevel;\n    this.logLevel =\n      parseLogLevel(options.logLevel, 'ClientOptions.logLevel', this) ??\n      parseLogLevel(readEnv('TAMBO_AI_LOG'), \"process.env['TAMBO_AI_LOG']\", this) ??\n      defaultLogLevel;\n    this.fetchOptions = options.fetchOptions;\n    this.maxRetries = options.maxRetries ?? 0;\n    this.fetch = options.fetch ?? Shims.getDefaultFetch();\n    this.#encoder = Opts.FallbackEncoder;\n\n    this._options = options;\n\n    this.apiKey = apiKey;\n    this.bearer = bearer;\n  }\n\n  /**\n   * Create a new client instance re-using the same options given to the current client with optional overriding.\n   */\n  withOptions(options: Partial<ClientOptions>): this {\n    const client = new (this.constructor as any as new (props: ClientOptions) => typeof this)({\n      ...this._options,\n      environment: options.environment ? options.environment : undefined,\n      baseURL: options.environment ? undefined : this.baseURL,\n      maxRetries: this.maxRetries,\n      timeout: this.timeout,\n      logger: this.logger,\n      logLevel: this.logLevel,\n      fetch: this.fetch,\n      fetchOptions: this.fetchOptions,\n      apiKey: this.apiKey,\n      bearer: this.bearer,\n      ...options,\n    });\n    return client;\n  }\n\n  /**\n   * Check whether the base URL is set to its default.\n   */\n  #baseURLOverridden(): boolean {\n    return this.baseURL !== environments[this._options.environment || 'production'];\n  }\n\n  protected defaultQuery(): Record<string, string | undefined> | undefined {\n    return this._options.defaultQuery;\n  }\n\n  protected validateHeaders({ values, nulls }: NullableHeaders) {\n    if (this.apiKey && values.get('x-api-key')) {\n      return;\n    }\n    if (nulls.has('x-api-key')) {\n      return;\n    }\n\n    if (this.bearer && values.get('authorization')) {\n      return;\n    }\n    if (nulls.has('authorization')) {\n      return;\n    }\n\n    throw new Error(\n      'Could not resolve authentication method. Expected either apiKey or bearer to be set. Or for one of the \"x-api-key\" or \"Authorization\" headers to be explicitly omitted',\n    );\n  }\n\n  protected async authHeaders(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    return buildHeaders([await this.apiKeyAuth(opts), await this.bearerAuth(opts)]);\n  }\n\n  protected async apiKeyAuth(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    if (this.apiKey == null) {\n      return undefined;\n    }\n    return buildHeaders([{ 'x-api-key': this.apiKey }]);\n  }\n\n  protected async bearerAuth(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    if (this.bearer == null) {\n      return undefined;\n    }\n    return buildHeaders([{ Authorization: `Bearer ${this.bearer}` }]);\n  }\n\n  /**\n   * Basic re-implementation of `qs.stringify` for primitive types.\n   */\n  protected stringifyQuery(query: Record<string, unknown>): string {\n    return Object.entries(query)\n      .filter(([_, value]) => typeof value !== 'undefined')\n      .map(([key, value]) => {\n        if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        }\n        if (value === null) {\n          return `${encodeURIComponent(key)}=`;\n        }\n        throw new Errors.TamboAIError(\n          `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`,\n        );\n      })\n      .join('&');\n  }\n\n  private getUserAgent(): string {\n    return `${this.constructor.name}/JS ${VERSION}`;\n  }\n\n  protected defaultIdempotencyKey(): string {\n    return `stainless-node-retry-${uuid4()}`;\n  }\n\n  protected makeStatusError(\n    status: number,\n    error: Object,\n    message: string | undefined,\n    headers: Headers,\n  ): Errors.APIError {\n    return Errors.APIError.generate(status, error, message, headers);\n  }\n\n  buildURL(\n    path: string,\n    query: Record<string, unknown> | null | undefined,\n    defaultBaseURL?: string | undefined,\n  ): string {\n    const baseURL = (!this.#baseURLOverridden() && defaultBaseURL) || this.baseURL;\n    const url =\n      isAbsoluteURL(path) ?\n        new URL(path)\n      : new URL(baseURL + (baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\n\n    const defaultQuery = this.defaultQuery();\n    if (!isEmptyObj(defaultQuery)) {\n      query = { ...defaultQuery, ...query };\n    }\n\n    if (typeof query === 'object' && query && !Array.isArray(query)) {\n      url.search = this.stringifyQuery(query as Record<string, unknown>);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Used as a callback for mutating the given `FinalRequestOptions` object.\n   */\n  protected async prepareOptions(options: FinalRequestOptions): Promise<void> {}\n\n  /**\n   * Used as a callback for mutating the given `RequestInit` object.\n   *\n   * This is useful for cases where you want to add certain headers based off of\n   * the request properties, e.g. `method` or `url`.\n   */\n  protected async prepareRequest(\n    request: RequestInit,\n    { url, options }: { url: string; options: FinalRequestOptions },\n  ): Promise<void> {}\n\n  get<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('get', path, opts);\n  }\n\n  post<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('post', path, opts);\n  }\n\n  patch<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('patch', path, opts);\n  }\n\n  put<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('put', path, opts);\n  }\n\n  delete<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('delete', path, opts);\n  }\n\n  private methodRequest<Rsp>(\n    method: HTTPMethod,\n    path: string,\n    opts?: PromiseOrValue<RequestOptions>,\n  ): APIPromise<Rsp> {\n    return this.request(\n      Promise.resolve(opts).then((opts) => {\n        return { method, path, ...opts };\n      }),\n    );\n  }\n\n  request<Rsp>(\n    options: PromiseOrValue<FinalRequestOptions>,\n    remainingRetries: number | null = null,\n  ): APIPromise<Rsp> {\n    return new APIPromise(this, this.makeRequest(options, remainingRetries, undefined));\n  }\n\n  private async makeRequest(\n    optionsInput: PromiseOrValue<FinalRequestOptions>,\n    retriesRemaining: number | null,\n    retryOfRequestLogID: string | undefined,\n  ): Promise<APIResponseProps> {\n    const options = await optionsInput;\n    const maxRetries = options.maxRetries ?? this.maxRetries;\n    if (retriesRemaining == null) {\n      retriesRemaining = maxRetries;\n    }\n\n    await this.prepareOptions(options);\n\n    const { req, url, timeout } = await this.buildRequest(options, {\n      retryCount: maxRetries - retriesRemaining,\n    });\n\n    await this.prepareRequest(req, { url, options });\n\n    /** Not an API request ID, just for correlating local log entries. */\n    const requestLogID = 'log_' + ((Math.random() * (1 << 24)) | 0).toString(16).padStart(6, '0');\n    const retryLogStr = retryOfRequestLogID === undefined ? '' : `, retryOf: ${retryOfRequestLogID}`;\n    const startTime = Date.now();\n\n    loggerFor(this).debug(\n      `[${requestLogID}] sending request`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        method: options.method,\n        url,\n        options,\n        headers: req.headers,\n      }),\n    );\n\n    if (options.signal?.aborted) {\n      throw new Errors.APIUserAbortError();\n    }\n\n    const controller = new AbortController();\n    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\n    const headersTime = Date.now();\n\n    if (response instanceof globalThis.Error) {\n      const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n      if (options.signal?.aborted) {\n        throw new Errors.APIUserAbortError();\n      }\n      // detect native connection timeout errors\n      // deno throws \"TypeError: error sending request for url (https://example/): client error (Connect): tcp connect error: Operation timed out (os error 60): Operation timed out (os error 60)\"\n      // undici throws \"TypeError: fetch failed\" with cause \"ConnectTimeoutError: Connect Timeout Error (attempted address: example:443, timeout: 1ms)\"\n      // others do not provide enough information to distinguish timeouts from other connection errors\n      const isTimeout =\n        isAbortError(response) ||\n        /timed? ?out/i.test(String(response) + ('cause' in response ? String(response.cause) : ''));\n      if (retriesRemaining) {\n        loggerFor(this).info(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - ${retryMessage}`,\n        );\n        loggerFor(this).debug(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url,\n            durationMs: headersTime - startTime,\n            message: response.message,\n          }),\n        );\n        return this.retryRequest(options, retriesRemaining, retryOfRequestLogID ?? requestLogID);\n      }\n      loggerFor(this).info(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - error; no more retries left`,\n      );\n      loggerFor(this).debug(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (error; no more retries left)`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url,\n          durationMs: headersTime - startTime,\n          message: response.message,\n        }),\n      );\n      if (isTimeout) {\n        throw new Errors.APIConnectionTimeoutError();\n      }\n      throw new Errors.APIConnectionError({ cause: response });\n    }\n\n    const responseInfo = `[${requestLogID}${retryLogStr}] ${req.method} ${url} ${\n      response.ok ? 'succeeded' : 'failed'\n    } with status ${response.status} in ${headersTime - startTime}ms`;\n\n    if (!response.ok) {\n      const shouldRetry = await this.shouldRetry(response);\n      if (retriesRemaining && shouldRetry) {\n        const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n\n        // We don't need the body of this response.\n        await Shims.CancelReadableStream(response.body);\n        loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n        loggerFor(this).debug(\n          `[${requestLogID}] response error (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url: response.url,\n            status: response.status,\n            headers: response.headers,\n            durationMs: headersTime - startTime,\n          }),\n        );\n        return this.retryRequest(\n          options,\n          retriesRemaining,\n          retryOfRequestLogID ?? requestLogID,\n          response.headers,\n        );\n      }\n\n      const retryMessage = shouldRetry ? `error; no more retries left` : `error; not retryable`;\n\n      loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n\n      const errText = await response.text().catch((err: any) => castToError(err).message);\n      const errJSON = safeJSON(errText);\n      const errMessage = errJSON ? undefined : errText;\n\n      loggerFor(this).debug(\n        `[${requestLogID}] response error (${retryMessage})`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url: response.url,\n          status: response.status,\n          headers: response.headers,\n          message: errMessage,\n          durationMs: Date.now() - startTime,\n        }),\n      );\n\n      const err = this.makeStatusError(response.status, errJSON, errMessage, response.headers);\n      throw err;\n    }\n\n    loggerFor(this).info(responseInfo);\n    loggerFor(this).debug(\n      `[${requestLogID}] response start`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        url: response.url,\n        status: response.status,\n        headers: response.headers,\n        durationMs: headersTime - startTime,\n      }),\n    );\n\n    return { response, options, controller, requestLogID, retryOfRequestLogID, startTime };\n  }\n\n  getAPIList<Item, PageClass extends Pagination.AbstractPage<Item> = Pagination.AbstractPage<Item>>(\n    path: string,\n    Page: new (...args: any[]) => PageClass,\n    opts?: RequestOptions,\n  ): Pagination.PagePromise<PageClass, Item> {\n    return this.requestAPIList(Page, { method: 'get', path, ...opts });\n  }\n\n  requestAPIList<\n    Item = unknown,\n    PageClass extends Pagination.AbstractPage<Item> = Pagination.AbstractPage<Item>,\n  >(\n    Page: new (...args: ConstructorParameters<typeof Pagination.AbstractPage>) => PageClass,\n    options: FinalRequestOptions,\n  ): Pagination.PagePromise<PageClass, Item> {\n    const request = this.makeRequest(options, null, undefined);\n    return new Pagination.PagePromise<PageClass, Item>(this as any as TamboAI, request, Page);\n  }\n\n  async fetchWithTimeout(\n    url: RequestInfo,\n    init: RequestInit | undefined,\n    ms: number,\n    controller: AbortController,\n  ): Promise<Response> {\n    const { signal, method, ...options } = init || {};\n    if (signal) signal.addEventListener('abort', () => controller.abort());\n\n    const timeout = setTimeout(() => controller.abort(), ms);\n\n    const isReadableBody =\n      ((globalThis as any).ReadableStream && options.body instanceof (globalThis as any).ReadableStream) ||\n      (typeof options.body === 'object' && options.body !== null && Symbol.asyncIterator in options.body);\n\n    const fetchOptions: RequestInit = {\n      signal: controller.signal as any,\n      ...(isReadableBody ? { duplex: 'half' } : {}),\n      method: 'GET',\n      ...options,\n    };\n    if (method) {\n      // Custom methods like 'patch' need to be uppercased\n      // See https://github.com/nodejs/undici/issues/2294\n      fetchOptions.method = method.toUpperCase();\n    }\n\n    try {\n      // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\n      return await this.fetch.call(undefined, url, fetchOptions);\n    } finally {\n      clearTimeout(timeout);\n    }\n  }\n\n  private async shouldRetry(response: Response): Promise<boolean> {\n    // Note this is not a standard header.\n    const shouldRetryHeader = response.headers.get('x-should-retry');\n\n    // If the server explicitly says whether or not to retry, obey.\n    if (shouldRetryHeader === 'true') return true;\n    if (shouldRetryHeader === 'false') return false;\n\n    // Retry on request timeouts.\n    if (response.status === 408) return true;\n\n    // Retry on lock timeouts.\n    if (response.status === 409) return true;\n\n    // Retry on rate limits.\n    if (response.status === 429) return true;\n\n    // Retry internal errors.\n    if (response.status >= 500) return true;\n\n    return false;\n  }\n\n  private async retryRequest(\n    options: FinalRequestOptions,\n    retriesRemaining: number,\n    requestLogID: string,\n    responseHeaders?: Headers | undefined,\n  ): Promise<APIResponseProps> {\n    let timeoutMillis: number | undefined;\n\n    // Note the `retry-after-ms` header may not be standard, but is a good idea and we'd like proactive support for it.\n    const retryAfterMillisHeader = responseHeaders?.get('retry-after-ms');\n    if (retryAfterMillisHeader) {\n      const timeoutMs = parseFloat(retryAfterMillisHeader);\n      if (!Number.isNaN(timeoutMs)) {\n        timeoutMillis = timeoutMs;\n      }\n    }\n\n    // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\n    const retryAfterHeader = responseHeaders?.get('retry-after');\n    if (retryAfterHeader && !timeoutMillis) {\n      const timeoutSeconds = parseFloat(retryAfterHeader);\n      if (!Number.isNaN(timeoutSeconds)) {\n        timeoutMillis = timeoutSeconds * 1000;\n      } else {\n        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\n      }\n    }\n\n    // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\n    // just do what it says, but otherwise calculate a default\n    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1000)) {\n      const maxRetries = options.maxRetries ?? this.maxRetries;\n      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\n    }\n    await sleep(timeoutMillis);\n\n    return this.makeRequest(options, retriesRemaining - 1, requestLogID);\n  }\n\n  private calculateDefaultRetryTimeoutMillis(retriesRemaining: number, maxRetries: number): number {\n    const initialRetryDelay = 1.0;\n    const maxRetryDelay = 5.0;\n\n    const numRetries = maxRetries - retriesRemaining;\n\n    // Apply exponential backoff, but not more than the max.\n    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\n\n    // Apply some jitter, take up to at most 25 percent of the retry time.\n    const jitter = 1 - Math.random() * 0.25;\n\n    return sleepSeconds * jitter * 1000;\n  }\n\n  async buildRequest(\n    inputOptions: FinalRequestOptions,\n    { retryCount = 0 }: { retryCount?: number } = {},\n  ): Promise<{ req: FinalizedRequestInit; url: string; timeout: number }> {\n    const options = { ...inputOptions };\n    const { method, path, query, defaultBaseURL } = options;\n\n    const url = this.buildURL(path!, query as Record<string, unknown>, defaultBaseURL);\n    if ('timeout' in options) validatePositiveInteger('timeout', options.timeout);\n    options.timeout = options.timeout ?? this.timeout;\n    const { bodyHeaders, body } = this.buildBody({ options });\n    const reqHeaders = await this.buildHeaders({ options: inputOptions, method, bodyHeaders, retryCount });\n\n    const req: FinalizedRequestInit = {\n      method,\n      headers: reqHeaders,\n      ...(options.signal && { signal: options.signal }),\n      ...((globalThis as any).ReadableStream &&\n        body instanceof (globalThis as any).ReadableStream && { duplex: 'half' }),\n      ...(body && { body }),\n      ...((this.fetchOptions as any) ?? {}),\n      ...((options.fetchOptions as any) ?? {}),\n    };\n\n    return { req, url, timeout: options.timeout };\n  }\n\n  private async buildHeaders({\n    options,\n    method,\n    bodyHeaders,\n    retryCount,\n  }: {\n    options: FinalRequestOptions;\n    method: HTTPMethod;\n    bodyHeaders: HeadersLike;\n    retryCount: number;\n  }): Promise<Headers> {\n    let idempotencyHeaders: HeadersLike = {};\n    if (this.idempotencyHeader && method !== 'get') {\n      if (!options.idempotencyKey) options.idempotencyKey = this.defaultIdempotencyKey();\n      idempotencyHeaders[this.idempotencyHeader] = options.idempotencyKey;\n    }\n\n    const headers = buildHeaders([\n      idempotencyHeaders,\n      {\n        Accept: 'application/json',\n        'User-Agent': this.getUserAgent(),\n        'X-Stainless-Retry-Count': String(retryCount),\n        ...(options.timeout ? { 'X-Stainless-Timeout': String(Math.trunc(options.timeout / 1000)) } : {}),\n        ...getPlatformHeaders(),\n      },\n      await this.authHeaders(options),\n      this._options.defaultHeaders,\n      bodyHeaders,\n      options.headers,\n    ]);\n\n    this.validateHeaders(headers);\n\n    return headers.values;\n  }\n\n  private buildBody({ options: { body, headers: rawHeaders } }: { options: FinalRequestOptions }): {\n    bodyHeaders: HeadersLike;\n    body: BodyInit | undefined;\n  } {\n    if (!body) {\n      return { bodyHeaders: undefined, body: undefined };\n    }\n    const headers = buildHeaders([rawHeaders]);\n    if (\n      // Pass raw type verbatim\n      ArrayBuffer.isView(body) ||\n      body instanceof ArrayBuffer ||\n      body instanceof DataView ||\n      (typeof body === 'string' &&\n        // Preserve legacy string encoding behavior for now\n        headers.values.has('content-type')) ||\n      // `Blob` is superset of `File`\n      ((globalThis as any).Blob && body instanceof (globalThis as any).Blob) ||\n      // `FormData` -> `multipart/form-data`\n      body instanceof FormData ||\n      // `URLSearchParams` -> `application/x-www-form-urlencoded`\n      body instanceof URLSearchParams ||\n      // Send chunked stream (each chunk has own `length`)\n      ((globalThis as any).ReadableStream && body instanceof (globalThis as any).ReadableStream)\n    ) {\n      return { bodyHeaders: undefined, body: body as BodyInit };\n    } else if (\n      typeof body === 'object' &&\n      (Symbol.asyncIterator in body ||\n        (Symbol.iterator in body && 'next' in body && typeof body.next === 'function'))\n    ) {\n      return { bodyHeaders: undefined, body: Shims.ReadableStreamFrom(body as AsyncIterable<Uint8Array>) };\n    } else {\n      return this.#encoder({ body, headers });\n    }\n  }\n\n  static TamboAI = this;\n  static DEFAULT_TIMEOUT = 60000; // 1 minute\n\n  static TamboAIError = Errors.TamboAIError;\n  static APIError = Errors.APIError;\n  static APIConnectionError = Errors.APIConnectionError;\n  static APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;\n  static APIUserAbortError = Errors.APIUserAbortError;\n  static NotFoundError = Errors.NotFoundError;\n  static ConflictError = Errors.ConflictError;\n  static RateLimitError = Errors.RateLimitError;\n  static BadRequestError = Errors.BadRequestError;\n  static AuthenticationError = Errors.AuthenticationError;\n  static InternalServerError = Errors.InternalServerError;\n  static PermissionDeniedError = Errors.PermissionDeniedError;\n  static UnprocessableEntityError = Errors.UnprocessableEntityError;\n\n  static toFile = Uploads.toFile;\n\n  beta: API.Beta = new API.Beta(this);\n  storage: API.Storage = new API.Storage(this);\n  threads: API.Threads = new API.Threads(this);\n}\n\nTamboAI.Beta = Beta;\nTamboAI.Storage = Storage;\nTamboAI.Threads = Threads;\n\nexport declare namespace TamboAI {\n  export type RequestOptions = Opts.RequestOptions;\n\n  export import OffsetAndLimit = Pagination.OffsetAndLimit;\n  export {\n    type OffsetAndLimitParams as OffsetAndLimitParams,\n    type OffsetAndLimitResponse as OffsetAndLimitResponse,\n  };\n\n  export { Beta as Beta };\n\n  export {\n    Storage as Storage,\n    type StoragePresignResponse as StoragePresignResponse,\n    type StoragePresignParams as StoragePresignParams,\n  };\n\n  export {\n    Threads as Threads,\n    type ComponentContent as ComponentContent,\n    type ResourceContent as ResourceContent,\n    type RunError as RunError,\n    type TextContent as TextContent,\n    type ToolResultContent as ToolResultContent,\n    type ToolUseContent as ToolUseContent,\n    type ThreadCreateResponse as ThreadCreateResponse,\n    type ThreadRetrieveResponse as ThreadRetrieveResponse,\n    type ThreadListResponse as ThreadListResponse,\n    type ThreadCreateParams as ThreadCreateParams,\n    type ThreadListParams as ThreadListParams,\n  };\n\n  export type AvailableComponent = API.AvailableComponent;\n  export type ComponentContextToolMetadata = API.ComponentContextToolMetadata;\n  export type Resource = API.Resource;\n  export type ResourceAnnotations = API.ResourceAnnotations;\n  export type ToolCallParameter = API.ToolCallParameter;\n  export type ToolCallRequest = API.ToolCallRequest;\n  export type ToolParameters = API.ToolParameters;\n}\n", "import { type TamboAI } from '../client';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\nimport { ThreadAdvanceByIDParams, ThreadAdvanceResponse } from '../resources/beta';\n\nexport async function advanceStream(\n  client: TamboAI,\n  body: ThreadAdvanceByIDParams,\n  threadId?: string,\n  options?: RequestOptions,\n): Promise<AsyncIterable<ThreadAdvanceResponse>> {\n  const MAX_REQUEST_RETRIES = 2;\n  let requestRetryCount = 0;\n\n  while (true) {\n    try {\n      const responsePromise: APIPromise<ThreadAdvanceResponse> = client.post(\n        `/threads${threadId ? `/${threadId}` : ''}/advancestream`,\n        {\n          body,\n          ...options,\n          headers: {\n            ...options?.headers,\n            Accept: 'text/event-stream',\n          },\n        },\n      );\n      const response = await responsePromise.asResponse();\n      return handleStreamResponse<ThreadAdvanceResponse>(response);\n    } catch (error) {\n      if (requestRetryCount < MAX_REQUEST_RETRIES) {\n        requestRetryCount++;\n        console.warn(`Request failed, attempting retry ${requestRetryCount}/${MAX_REQUEST_RETRIES}`);\n        continue;\n      }\n      throw error;\n    }\n  }\n}\n\nasync function* handleStreamResponse<T>(response: Response): AsyncIterable<T> {\n  const decoder = new TextDecoder();\n  const MAX_CHUNK_RETRIES = 5;\n  let chunkRetryCount = 0;\n  const reader = (response.body as unknown as ReadableStream).getReader();\n\n  while (true) {\n    try {\n      const { done, value: chunk } = await reader.read();\n      if (done) break;\n\n      const text = decoder.decode(chunk as Uint8Array);\n      const messages = text.split('\\n').filter((msg) => msg.trim());\n\n      for (const msg of messages) {\n        if (msg === 'data: DONE') {\n          continue;\n        }\n\n        if (msg.startsWith('error: ')) {\n          throw new Error(msg.slice(7));\n        }\n\n        const jsonStr = msg.startsWith('data: ') ? msg.slice(6) : msg;\n\n        if (!jsonStr) {\n          continue;\n        }\n\n        try {\n          yield JSON.parse(jsonStr) as T;\n          chunkRetryCount = 0;\n        } catch (e) {\n          if (chunkRetryCount < MAX_CHUNK_RETRIES) {\n            chunkRetryCount++;\n            console.warn(\n              `Failed to parse JSON chunk, skipping. Attempt ${chunkRetryCount}/${MAX_CHUNK_RETRIES}`,\n            );\n            continue;\n          }\n          throw new Error('Failed to parse JSON after multiple chunks.');\n        }\n      }\n    } catch (error) {\n      reader.releaseLock();\n      throw error;\n    }\n  }\n}\n", "export class Subscribable<TListener extends Function> {\n  protected listeners = new Set<TListener>()\n\n  constructor() {\n    this.subscribe = this.subscribe.bind(this)\n  }\n\n  subscribe(listener: TListener): () => void {\n    this.listeners.add(listener)\n\n    this.onSubscribe()\n\n    return () => {\n      this.listeners.delete(listener)\n      this.onUnsubscribe()\n    }\n  }\n\n  hasListeners(): boolean {\n    return this.listeners.size > 0\n  }\n\n  protected onSubscribe(): void {\n    // Do nothing\n  }\n\n  protected onUnsubscribe(): void {\n    // Do nothing\n  }\n}\n", "/**\n * {@link TimeoutManager} does not support passing arguments to the callback.\n *\n * `(_: void)` is the argument type inferred by TypeScript's default typings for\n * `setTimeout(cb, number)`.\n * If we don't accept a single void argument, then\n * `new Promise(resolve => timeoutManager.setTimeout(resolve, N))` is a type error.\n */\nexport type TimeoutCallback = (_: void) => void\n\n/**\n * Wrapping `setTimeout` is awkward from a typing perspective because platform\n * typings may extend the return type of `setTimeout`. For example, NodeJS\n * typings add `NodeJS.Timeout`; but a non-default `timeoutManager` may not be\n * able to return such a type.\n */\nexport type ManagedTimerId = number | { [Symbol.toPrimitive]: () => number }\n\n/**\n * Backend for timer functions.\n */\nexport type TimeoutProvider<TTimerId extends ManagedTimerId = ManagedTimerId> =\n  {\n    readonly setTimeout: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearTimeout: (timeoutId: TTimerId | undefined) => void\n\n    readonly setInterval: (callback: TimeoutCallback, delay: number) => TTimerId\n    readonly clearInterval: (intervalId: TTimerId | undefined) => void\n  }\n\nexport const defaultTimeoutProvider: TimeoutProvider<\n  ReturnType<typeof setTimeout>\n> = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId),\n}\n\n/**\n * Allows customization of how timeouts are created.\n *\n * @tanstack/query-core makes liberal use of timeouts to implement `staleTime`\n * and `gcTime`. The default TimeoutManager provider uses the platform's global\n * `setTimeout` implementation, which is known to have scalability issues with\n * thousands of timeouts on the event loop.\n *\n * If you hit this limitation, consider providing a custom TimeoutProvider that\n * coalesces timeouts.\n */\nexport class TimeoutManager implements Omit<TimeoutProvider, 'name'> {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider: TimeoutProvider<any> = defaultTimeoutProvider\n  #providerCalled = false\n\n  setTimeoutProvider<TTimerId extends ManagedTimerId>(\n    provider: TimeoutProvider<TTimerId>,\n  ): void {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.#providerCalled && provider !== this.#provider) {\n        // After changing providers, `clearTimeout` will not work as expected for\n        // timeouts from the previous provider.\n        //\n        // Since they may allocate the same timeout ID, clearTimeout may cancel an\n        // arbitrary different timeout, or unexpected no-op.\n        //\n        // We could protect against this by mixing the timeout ID bits\n        // deterministically with some per-provider bits.\n        //\n        // We could internally queue `setTimeout` calls to `TimeoutManager` until\n        // some API call to set the initial provider.\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider },\n        )\n      }\n    }\n\n    this.#provider = provider\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = false\n    }\n  }\n\n  setTimeout(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setTimeout(callback, delay)\n  }\n\n  clearTimeout(timeoutId: ManagedTimerId | undefined): void {\n    this.#provider.clearTimeout(timeoutId)\n  }\n\n  setInterval(callback: TimeoutCallback, delay: number): ManagedTimerId {\n    if (process.env.NODE_ENV !== 'production') {\n      this.#providerCalled = true\n    }\n    return this.#provider.setInterval(callback, delay)\n  }\n\n  clearInterval(intervalId: ManagedTimerId | undefined): void {\n    this.#provider.clearInterval(intervalId)\n  }\n}\n\nexport const timeoutManager = new TimeoutManager()\n\n/**\n * In many cases code wants to delay to the next event loop tick; this is not\n * mediated by {@link timeoutManager}.\n *\n * This function is provided to make auditing the `tanstack/query-core` for\n * incorrect use of system `setTimeout` easier.\n */\nexport function systemSetTimeoutZero(callback: TimeoutCallback): void {\n  setTimeout(callback, 0)\n}\n", "import { timeoutManager } from './timeoutManager'\nimport type {\n  DefaultError,\n  Enabled,\n  FetchStatus,\n  MutationKey,\n  MutationStatus,\n  QueryFunction,\n  QueryKey,\n  QueryOptions,\n  StaleTime,\n  StaleTimeFunction,\n} from './types'\nimport type { Mutation } from './mutation'\nimport type { FetchOptions, Query } from './query'\n\n// TYPES\n\ntype DropLast<T extends ReadonlyArray<unknown>> = T extends readonly [\n  ...infer R,\n  unknown,\n]\n  ? readonly [...R]\n  : never\n\ntype TuplePrefixes<T extends ReadonlyArray<unknown>> = T extends readonly []\n  ? readonly []\n  : TuplePrefixes<DropLast<T>> | T\n\nexport interface QueryFilters<TQueryKey extends QueryKey = QueryKey> {\n  /**\n   * Filter to active queries, inactive queries or all queries\n   */\n  type?: QueryTypeFilter\n  /**\n   * Match query key exactly\n   */\n  exact?: boolean\n  /**\n   * Include queries matching this predicate function\n   */\n  predicate?: (query: Query) => boolean\n  /**\n   * Include queries matching this query key\n   */\n  queryKey?: TQueryKey | TuplePrefixes<TQueryKey>\n  /**\n   * Include or exclude stale queries\n   */\n  stale?: boolean\n  /**\n   * Include queries matching their fetchStatus\n   */\n  fetchStatus?: FetchStatus\n}\n\nexport interface MutationFilters<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> {\n  /**\n   * Match mutation key exactly\n   */\n  exact?: boolean\n  /**\n   * Include mutations matching this predicate function\n   */\n  predicate?: (\n    mutation: Mutation<TData, TError, TVariables, TOnMutateResult>,\n  ) => boolean\n  /**\n   * Include mutations matching this mutation key\n   */\n  mutationKey?: TuplePrefixes<MutationKey>\n  /**\n   * Filter by mutation status\n   */\n  status?: MutationStatus\n}\n\nexport type Updater<TInput, TOutput> = TOutput | ((input: TInput) => TOutput)\n\nexport type QueryTypeFilter = 'all' | 'active' | 'inactive'\n\n// UTILS\n\nexport const isServer = typeof window === 'undefined' || 'Deno' in globalThis\n\nexport function noop(): void\nexport function noop(): undefined\nexport function noop() {}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput,\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as (_: TInput) => TOutput)(input)\n    : updater\n}\n\nexport function isValidTimeout(value: unknown): value is number {\n  return typeof value === 'number' && value >= 0 && value !== Infinity\n}\n\nexport function timeUntilStale(updatedAt: number, staleTime?: number): number {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0)\n}\n\nexport function resolveStaleTime<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  staleTime:\n    | undefined\n    | StaleTimeFunction<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): StaleTime | undefined {\n  return typeof staleTime === 'function' ? staleTime(query) : staleTime\n}\n\nexport function resolveEnabled<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  enabled: undefined | Enabled<TQueryFnData, TError, TData, TQueryKey>,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n): boolean | undefined {\n  return typeof enabled === 'function' ? enabled(query) : enabled\n}\n\nexport function matchQuery(\n  filters: QueryFilters,\n  query: Query<any, any, any, any>,\n): boolean {\n  const {\n    type = 'all',\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale,\n  } = filters\n\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false\n    }\n  }\n\n  if (type !== 'all') {\n    const isActive = query.isActive()\n    if (type === 'active' && !isActive) {\n      return false\n    }\n    if (type === 'inactive' && isActive) {\n      return false\n    }\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false\n  }\n\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false\n  }\n\n  if (predicate && !predicate(query)) {\n    return false\n  }\n\n  return true\n}\n\nexport function matchMutation(\n  filters: MutationFilters,\n  mutation: Mutation<any, any>,\n): boolean {\n  const { exact, status, predicate, mutationKey } = filters\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false\n    }\n  }\n\n  if (status && mutation.state.status !== status) {\n    return false\n  }\n\n  if (predicate && !predicate(mutation)) {\n    return false\n  }\n\n  return true\n}\n\nexport function hashQueryKeyByOptions<TQueryKey extends QueryKey = QueryKey>(\n  queryKey: TQueryKey,\n  options?: Pick<QueryOptions<any, any, any, any>, 'queryKeyHashFn'>,\n): string {\n  const hashFn = options?.queryKeyHashFn || hashKey\n  return hashFn(queryKey)\n}\n\n/**\n * Default query & mutation keys hash function.\n * Hashes the value into a stable hash.\n */\nexport function hashKey(queryKey: QueryKey | MutationKey): string {\n  return JSON.stringify(queryKey, (_, val) =>\n    isPlainObject(val)\n      ? Object.keys(val)\n          .sort()\n          .reduce((result, key) => {\n            result[key] = val[key]\n            return result\n          }, {} as any)\n      : val,\n  )\n}\n\n/**\n * Checks if key `b` partially matches with key `a`.\n */\nexport function partialMatchKey(a: QueryKey, b: QueryKey): boolean\nexport function partialMatchKey(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]))\n  }\n\n  return false\n}\n\nconst hasOwn = Object.prototype.hasOwnProperty\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceEqualDeep<T>(a: unknown, b: T, depth?: number): T\nexport function replaceEqualDeep(a: any, b: any, depth = 0): any {\n  if (a === b) {\n    return a\n  }\n\n  if (depth > 500) return b\n\n  const array = isPlainArray(a) && isPlainArray(b)\n\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b\n\n  const aItems = array ? a : Object.keys(a)\n  const aSize = aItems.length\n  const bItems = array ? b : Object.keys(b)\n  const bSize = bItems.length\n  const copy: any = array ? new Array(bSize) : {}\n\n  let equalItems = 0\n\n  for (let i = 0; i < bSize; i++) {\n    const key: any = array ? i : bItems[i]\n    const aItem = a[key]\n    const bItem = b[key]\n\n    if (aItem === bItem) {\n      copy[key] = aItem\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++\n      continue\n    }\n\n    if (\n      aItem === null ||\n      bItem === null ||\n      typeof aItem !== 'object' ||\n      typeof bItem !== 'object'\n    ) {\n      copy[key] = bItem\n      continue\n    }\n\n    const v = replaceEqualDeep(aItem, bItem, depth + 1)\n    copy[key] = v\n    if (v === aItem) equalItems++\n  }\n\n  return aSize === bSize && equalItems === aSize ? a : copy\n}\n\n/**\n * Shallow compare objects.\n */\nexport function shallowEqualObjects<T extends Record<string, any>>(\n  a: T,\n  b: T | undefined,\n): boolean {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nexport function isPlainArray(value: unknown): value is Array<unknown> {\n  return Array.isArray(value) && value.length === Object.keys(value).length\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Record<PropertyKey, unknown> {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has no constructor\n  const ctor = o.constructor\n  if (ctor === undefined) {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Handles Objects created by Object.create(<arbitrary prototype>)\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout)\n  })\n}\n\nexport function replaceData<\n  TData,\n  TOptions extends QueryOptions<any, any, any, any>,\n>(prevData: TData | undefined, data: TData, options: TOptions): TData {\n  if (typeof options.structuralSharing === 'function') {\n    return options.structuralSharing(prevData, data) as TData\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== 'production') {\n      try {\n        return replaceEqualDeep(prevData, data)\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`,\n        )\n\n        // Prevent the replaceEqualDeep from being called again down below.\n        throw error\n      }\n    }\n    // Structurally share data between prev and new data if needed\n    return replaceEqualDeep(prevData, data)\n  }\n  return data\n}\n\nexport function keepPreviousData<T>(\n  previousData: T | undefined,\n): T | undefined {\n  return previousData\n}\n\nexport function addToEnd<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [...items, item]\n  return max && newItems.length > max ? newItems.slice(1) : newItems\n}\n\nexport function addToStart<T>(items: Array<T>, item: T, max = 0): Array<T> {\n  const newItems = [item, ...items]\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems\n}\n\nexport const skipToken = Symbol()\nexport type SkipToken = typeof skipToken\n\nexport function ensureQueryFn<\n  TQueryFnData = unknown,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: {\n    queryFn?: QueryFunction<TQueryFnData, TQueryKey> | SkipToken\n    queryHash?: string\n  },\n  fetchOptions?: FetchOptions<TQueryFnData>,\n): QueryFunction<TQueryFnData, TQueryKey> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`,\n      )\n    }\n  }\n\n  // if we attempt to retry a fetch that was triggered from an initialPromise\n  // when we don't have a queryFn yet, we can't retry, so we just return the already rejected initialPromise\n  // if an observer has already mounted, we will be able to retry with that queryFn\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise!\n  }\n\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () =>\n      Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`))\n  }\n\n  return options.queryFn\n}\n\nexport function shouldThrowError<T extends (...args: Array<any>) => boolean>(\n  throwOnError: boolean | T | undefined,\n  params: Parameters<T>,\n): boolean {\n  // Allow throwOnError function to override throwing behavior on a per-error basis\n  if (typeof throwOnError === 'function') {\n    return throwOnError(...params)\n  }\n\n  return !!throwOnError\n}\n\nexport function addConsumeAwareSignal<T>(\n  object: T,\n  getSignal: () => AbortSignal,\n  onCancelled: VoidFunction,\n): T & { signal: AbortSignal } {\n  let consumed = false\n  let signal: AbortSignal | undefined\n\n  Object.defineProperty(object, 'signal', {\n    enumerable: true,\n    get: () => {\n      signal ??= getSignal()\n      if (consumed) {\n        return signal\n      }\n\n      consumed = true\n      if (signal.aborted) {\n        onCancelled()\n      } else {\n        signal.addEventListener('abort', onCancelled, { once: true })\n      }\n\n      return signal\n    },\n  })\n\n  return object as T & { signal: AbortSignal }\n}\n", "import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (focused: boolean) => void\n\ntype SetupFn = (\n  setFocused: (focused?: boolean) => void,\n) => (() => void) | undefined\n\nexport class FocusManager extends Subscribable<Listener> {\n  #focused?: boolean\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onFocus) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus()\n        // Listen to visibilitychange\n        window.addEventListener('visibilitychange', listener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', listener)\n        }\n      }\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === 'boolean') {\n        this.setFocused(focused)\n      } else {\n        this.onFocus()\n      }\n    })\n  }\n\n  setFocused(focused?: boolean): void {\n    const changed = this.#focused !== focused\n    if (changed) {\n      this.#focused = focused\n      this.onFocus()\n    }\n  }\n\n  onFocus(): void {\n    const isFocused = this.isFocused()\n    this.listeners.forEach((listener) => {\n      listener(isFocused)\n    })\n  }\n\n  isFocused(): boolean {\n    if (typeof this.#focused === 'boolean') {\n      return this.#focused\n    }\n\n    // document global can be unavailable in react native\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    return globalThis.document?.visibilityState !== 'hidden'\n  }\n}\n\nexport const focusManager = new FocusManager()\n", "/**\n * Thenable types which matches React's types for promises\n *\n * React seemingly uses `.status`, `.value` and `.reason` properties on a promises to optimistically unwrap data from promises\n *\n * @see https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L112-L138\n * @see https://github.com/facebook/react/blob/4f604941569d2e8947ce1460a0b2997e835f37b9/packages/react-debug-tools/src/ReactDebugHooks.js#L224-L227\n */\n\nimport { noop } from './utils'\n\ninterface Fulfilled<T> {\n  status: 'fulfilled'\n  value: T\n}\ninterface Rejected {\n  status: 'rejected'\n  reason: unknown\n}\ninterface Pending<T> {\n  status: 'pending'\n\n  /**\n   * Resolve the promise with a value.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  resolve: (value: T) => void\n  /**\n   * Reject the promise with a reason.\n   * Will remove the `resolve` and `reject` properties from the promise.\n   */\n  reject: (reason: unknown) => void\n}\n\nexport type FulfilledThenable<T> = Promise<T> & Fulfilled<T>\nexport type RejectedThenable<T> = Promise<T> & Rejected\nexport type PendingThenable<T> = Promise<T> & Pending<T>\n\nexport type Thenable<T> =\n  | FulfilledThenable<T>\n  | RejectedThenable<T>\n  | PendingThenable<T>\n\nexport function pendingThenable<T>(): PendingThenable<T> {\n  let resolve: Pending<T>['resolve']\n  let reject: Pending<T>['reject']\n  // this could use `Promise.withResolvers()` in the future\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve\n    reject = _reject\n  }) as PendingThenable<T>\n\n  thenable.status = 'pending'\n  thenable.catch(() => {\n    // prevent unhandled rejection errors\n  })\n\n  function finalize(data: Fulfilled<T> | Rejected) {\n    Object.assign(thenable, data)\n\n    // clear pending props props to avoid calling them twice\n    delete (thenable as Partial<PendingThenable<T>>).resolve\n    delete (thenable as Partial<PendingThenable<T>>).reject\n  }\n\n  thenable.resolve = (value) => {\n    finalize({\n      status: 'fulfilled',\n      value,\n    })\n\n    resolve(value)\n  }\n  thenable.reject = (reason) => {\n    finalize({\n      status: 'rejected',\n      reason,\n    })\n\n    reject(reason)\n  }\n\n  return thenable\n}\n\n/**\n * This function takes a Promise-like input and detects whether the data\n * is synchronously available or not.\n *\n * It does not inspect .status, .value or .reason properties of the promise,\n * as those are not always available, and the .status of React's promises\n * should not be considered part of the public API.\n */\nexport function tryResolveSync(promise: Promise<unknown> | Thenable<unknown>) {\n  let data: unknown\n\n  promise\n    .then((result) => {\n      data = result\n      return result\n    }, noop)\n    // .catch can be unavailable on certain kinds of thenable's\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    ?.catch(noop)\n\n  if (data !== undefined) {\n    return { data }\n  }\n\n  return undefined\n}\n", "// TYPES\n\nimport { systemSetTimeoutZero } from './timeoutManager'\n\ntype NotifyCallback = () => void\n\ntype NotifyFunction = (callback: () => void) => void\n\ntype BatchNotifyFunction = (callback: () => void) => void\n\ntype BatchCallsCallback<T extends Array<unknown>> = (...args: T) => void\n\ntype ScheduleFunction = (callback: () => void) => void\n\nexport const defaultScheduler: ScheduleFunction = systemSetTimeoutZero\n\nexport function createNotifyManager() {\n  let queue: Array<NotifyCallback> = []\n  let transactions = 0\n  let notifyFn: NotifyFunction = (callback) => {\n    callback()\n  }\n  let batchNotifyFn: BatchNotifyFunction = (callback: () => void) => {\n    callback()\n  }\n  let scheduleFn = defaultScheduler\n\n  const schedule = (callback: NotifyCallback): void => {\n    if (transactions) {\n      queue.push(callback)\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback)\n      })\n    }\n  }\n  const flush = (): void => {\n    const originalQueue = queue\n    queue = []\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback)\n          })\n        })\n      })\n    }\n  }\n\n  return {\n    batch: <T>(callback: () => T): T => {\n      let result\n      transactions++\n      try {\n        result = callback()\n      } finally {\n        transactions--\n        if (!transactions) {\n          flush()\n        }\n      }\n      return result\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: <T extends Array<unknown>>(\n      callback: BatchCallsCallback<T>,\n    ): BatchCallsCallback<T> => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args)\n        })\n      }\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn: NotifyFunction) => {\n      notifyFn = fn\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn: BatchNotifyFunction) => {\n      batchNotifyFn = fn\n    },\n    setScheduler: (fn: ScheduleFunction) => {\n      scheduleFn = fn\n    },\n  } as const\n}\n\n// SINGLETON\nexport const notifyManager = createNotifyManager()\n", "import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\ntype Listener = (online: boolean) => void\ntype SetupFn = (setOnline: Listener) => (() => void) | undefined\n\nexport class OnlineManager extends Subscribable<Listener> {\n  #online = true\n  #cleanup?: () => void\n\n  #setup: SetupFn\n\n  constructor() {\n    super()\n    this.#setup = (onOnline) => {\n      // addEventListener does not exist in React Native, but window does\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true)\n        const offlineListener = () => onOnline(false)\n        // Listen to online\n        window.addEventListener('online', onlineListener, false)\n        window.addEventListener('offline', offlineListener, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', onlineListener)\n          window.removeEventListener('offline', offlineListener)\n        }\n      }\n\n      return\n    }\n  }\n\n  protected onSubscribe(): void {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup)\n    }\n  }\n\n  protected onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.()\n      this.#cleanup = undefined\n    }\n  }\n\n  setEventListener(setup: SetupFn): void {\n    this.#setup = setup\n    this.#cleanup?.()\n    this.#cleanup = setup(this.setOnline.bind(this))\n  }\n\n  setOnline(online: boolean): void {\n    const changed = this.#online !== online\n\n    if (changed) {\n      this.#online = online\n      this.listeners.forEach((listener) => {\n        listener(online)\n      })\n    }\n  }\n\n  isOnline(): boolean {\n    return this.#online\n  }\n}\n\nexport const onlineManager = new OnlineManager()\n", "import { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { pendingThenable } from './thenable'\nimport { isServer, sleep } from './utils'\nimport type { Thenable } from './thenable'\nimport type { CancelOptions, DefaultError, NetworkMode } from './types'\n\n// TYPES\n\ninterface RetryerConfig<TData = unknown, TError = DefaultError> {\n  fn: () => TData | Promise<TData>\n  initialPromise?: Promise<TData>\n  onCancel?: (error: TError) => void\n  onFail?: (failureCount: number, error: TError) => void\n  onPause?: () => void\n  onContinue?: () => void\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue<TError>\n  networkMode: NetworkMode | undefined\n  canRun: () => boolean\n}\n\nexport interface Retryer<TData = unknown> {\n  promise: Promise<TData>\n  cancel: (cancelOptions?: CancelOptions) => void\n  continue: () => Promise<unknown>\n  cancelRetry: () => void\n  continueRetry: () => void\n  canStart: () => boolean\n  start: () => Promise<TData>\n  status: () => 'pending' | 'resolved' | 'rejected'\n}\n\nexport type RetryValue<TError> = boolean | number | ShouldRetryFunction<TError>\n\ntype ShouldRetryFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => boolean\n\nexport type RetryDelayValue<TError> = number | RetryDelayFunction<TError>\n\ntype RetryDelayFunction<TError = DefaultError> = (\n  failureCount: number,\n  error: TError,\n) => number\n\nfunction defaultRetryDelay(failureCount: number) {\n  return Math.min(1000 * 2 ** failureCount, 30000)\n}\n\nexport function canFetch(networkMode: NetworkMode | undefined): boolean {\n  return (networkMode ?? 'online') === 'online'\n    ? onlineManager.isOnline()\n    : true\n}\n\nexport class CancelledError extends Error {\n  revert?: boolean\n  silent?: boolean\n  constructor(options?: CancelOptions) {\n    super('CancelledError')\n    this.revert = options?.revert\n    this.silent = options?.silent\n  }\n}\n\n/**\n * @deprecated Use instanceof `CancelledError` instead.\n */\nexport function isCancelledError(value: any): value is CancelledError {\n  return value instanceof CancelledError\n}\n\nexport function createRetryer<TData = unknown, TError = DefaultError>(\n  config: RetryerConfig<TData, TError>,\n): Retryer<TData> {\n  let isRetryCancelled = false\n  let failureCount = 0\n  let continueFn: ((value?: unknown) => void) | undefined\n\n  const thenable = pendingThenable<TData>()\n\n  const isResolved = () =>\n    (thenable.status as Thenable<TData>['status']) !== 'pending'\n\n  const cancel = (cancelOptions?: CancelOptions): void => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions) as TError\n      reject(error)\n\n      config.onCancel?.(error)\n    }\n  }\n  const cancelRetry = () => {\n    isRetryCancelled = true\n  }\n\n  const continueRetry = () => {\n    isRetryCancelled = false\n  }\n\n  const canContinue = () =>\n    focusManager.isFocused() &&\n    (config.networkMode === 'always' || onlineManager.isOnline()) &&\n    config.canRun()\n\n  const canStart = () => canFetch(config.networkMode) && config.canRun()\n\n  const resolve = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.resolve(value)\n    }\n  }\n\n  const reject = (value: any) => {\n    if (!isResolved()) {\n      continueFn?.()\n      thenable.reject(value)\n    }\n  }\n\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value)\n        }\n      }\n      config.onPause?.()\n    }).then(() => {\n      continueFn = undefined\n      if (!isResolved()) {\n        config.onContinue?.()\n      }\n    })\n  }\n\n  // Create loop function\n  const run = () => {\n    // Do nothing if already resolved\n    if (isResolved()) {\n      return\n    }\n\n    let promiseOrValue: any\n\n    // we can re-use config.initialPromise on the first call of run()\n    const initialPromise =\n      failureCount === 0 ? config.initialPromise : undefined\n\n    // Execute query\n    try {\n      promiseOrValue = initialPromise ?? config.fn()\n    } catch (error) {\n      promiseOrValue = Promise.reject(error)\n    }\n\n    Promise.resolve(promiseOrValue)\n      .then(resolve)\n      .catch((error) => {\n        // Stop if the fetch is already resolved\n        if (isResolved()) {\n          return\n        }\n\n        // Do we need to retry the request?\n        const retry = config.retry ?? (isServer ? 0 : 3)\n        const retryDelay = config.retryDelay ?? defaultRetryDelay\n        const delay =\n          typeof retryDelay === 'function'\n            ? retryDelay(failureCount, error)\n            : retryDelay\n        const shouldRetry =\n          retry === true ||\n          (typeof retry === 'number' && failureCount < retry) ||\n          (typeof retry === 'function' && retry(failureCount, error))\n\n        if (isRetryCancelled || !shouldRetry) {\n          // We are done if the query does not need to be retried\n          reject(error)\n          return\n        }\n\n        failureCount++\n\n        // Notify on fail\n        config.onFail?.(failureCount, error)\n\n        // Delay\n        sleep(delay)\n          // Pause if the document is not visible or when the device is offline\n          .then(() => {\n            return canContinue() ? undefined : pause()\n          })\n          .then(() => {\n            if (isRetryCancelled) {\n              reject(error)\n            } else {\n              run()\n            }\n          })\n      })\n  }\n\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.()\n      return thenable\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      // Start loop\n      if (canStart()) {\n        run()\n      } else {\n        pause().then(run)\n      }\n      return thenable\n    },\n  }\n}\n", "import { timeoutManager } from './timeoutManager'\nimport { isServer, isValidTimeout } from './utils'\nimport type { ManagedTimerId } from './timeoutManager'\n\nexport abstract class Removable {\n  gcTime!: number\n  #gcTimeout?: ManagedTimerId\n\n  destroy(): void {\n    this.clearGcTimeout()\n  }\n\n  protected scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove()\n      }, this.gcTime)\n    }\n  }\n\n  protected updateGcTime(newGcTime: number | undefined): void {\n    // Default to 5 minutes (Infinity for server-side) if no gcTime is set\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1000),\n    )\n  }\n\n  protected clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout)\n      this.#gcTimeout = undefined\n    }\n  }\n\n  protected abstract optionalRemove(): void\n}\n", "import {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale,\n} from './utils'\nimport { notifyManager } from './notifyManager'\nimport { CancelledError, canFetch, createRetryer } from './retryer'\nimport { Removable } from './removable'\nimport type { QueryCache } from './queryCache'\nimport type { QueryClient } from './queryClient'\nimport type {\n  CancelOptions,\n  DefaultError,\n  FetchStatus,\n  InitialDataFunction,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n  QueryMeta,\n  QueryOptions,\n  QueryStatus,\n  SetDataOptions,\n  StaleTime,\n} from './types'\nimport type { QueryObserver } from './queryObserver'\nimport type { Retryer } from './retryer'\n\n// TYPES\n\ninterface QueryConfig<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  client: QueryClient\n  queryKey: TQueryKey\n  queryHash: string\n  options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state?: QueryState<TData, TError>\n}\n\nexport interface QueryState<TData = unknown, TError = DefaultError> {\n  data: TData | undefined\n  dataUpdateCount: number\n  dataUpdatedAt: number\n  error: TError | null\n  errorUpdateCount: number\n  errorUpdatedAt: number\n  fetchFailureCount: number\n  fetchFailureReason: TError | null\n  fetchMeta: FetchMeta | null\n  isInvalidated: boolean\n  status: QueryStatus\n  fetchStatus: FetchStatus\n}\n\nexport interface FetchContext<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  fetchFn: () => unknown | Promise<unknown>\n  fetchOptions?: FetchOptions\n  signal: AbortSignal\n  options: QueryOptions<TQueryFnData, TError, TData, any>\n  client: QueryClient\n  queryKey: TQueryKey\n  state: QueryState<TData, TError>\n}\n\nexport interface QueryBehavior<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> {\n  onFetch: (\n    context: FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n    query: Query,\n  ) => void\n}\n\nexport type FetchDirection = 'forward' | 'backward'\n\nexport interface FetchMeta {\n  fetchMore?: { direction: FetchDirection }\n}\n\nexport interface FetchOptions<TData = unknown> {\n  cancelRefetch?: boolean\n  meta?: FetchMeta\n  initialPromise?: Promise<TData>\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError\n}\n\ninterface FetchAction {\n  type: 'fetch'\n  meta?: FetchMeta\n}\n\ninterface SuccessAction<TData> {\n  data: TData | undefined\n  type: 'success'\n  dataUpdatedAt?: number\n  manual?: boolean\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface InvalidateAction {\n  type: 'invalidate'\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError> {\n  type: 'setState'\n  state: Partial<QueryState<TData, TError>>\n  setStateOptions?: SetStateOptions\n}\n\nexport type Action<TData, TError> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | FetchAction\n  | InvalidateAction\n  | PauseAction\n  | SetStateAction<TData, TError>\n  | SuccessAction<TData>\n\nexport interface SetStateOptions {\n  meta?: any\n}\n\n// CLASS\n\nexport class Query<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> extends Removable {\n  queryKey: TQueryKey\n  queryHash: string\n  options!: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  state: QueryState<TData, TError>\n\n  #initialState: QueryState<TData, TError>\n  #revertState?: QueryState<TData, TError>\n  #cache: QueryCache\n  #client: QueryClient\n  #retryer?: Retryer<TData>\n  observers: Array<QueryObserver<any, any, any, any, any>>\n  #defaultOptions?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>\n  #abortSignalConsumed: boolean\n\n  constructor(config: QueryConfig<TQueryFnData, TError, TData, TQueryKey>) {\n    super()\n\n    this.#abortSignalConsumed = false\n    this.#defaultOptions = config.defaultOptions\n    this.setOptions(config.options)\n    this.observers = []\n    this.#client = config.client\n    this.#cache = this.#client.getQueryCache()\n    this.queryKey = config.queryKey\n    this.queryHash = config.queryHash\n    this.#initialState = getDefaultState(this.options)\n    this.state = config.state ?? this.#initialState\n    this.scheduleGc()\n  }\n  get meta(): QueryMeta | undefined {\n    return this.options.meta\n  }\n\n  get promise(): Promise<TData> | undefined {\n    return this.#retryer?.promise\n  }\n\n  setOptions(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): void {\n    this.options = { ...this.#defaultOptions, ...options }\n\n    this.updateGcTime(this.options.gcTime)\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (this.state && this.state.data === undefined) {\n      const defaultState = getDefaultState(this.options)\n      if (defaultState.data !== undefined) {\n        this.setState(\n          successState(defaultState.data, defaultState.dataUpdatedAt),\n        )\n        this.#initialState = defaultState\n      }\n    }\n  }\n\n  protected optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === 'idle') {\n      this.#cache.remove(this)\n    }\n  }\n\n  setData(\n    newData: TData,\n    options?: SetDataOptions & { manual: boolean },\n  ): TData {\n    const data = replaceData(this.state.data, newData, this.options)\n\n    // Set data and mark it as cached\n    this.#dispatch({\n      data,\n      type: 'success',\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual,\n    })\n\n    return data\n  }\n\n  setState(\n    state: Partial<QueryState<TData, TError>>,\n    setStateOptions?: SetStateOptions,\n  ): void {\n    this.#dispatch({ type: 'setState', state, setStateOptions })\n  }\n\n  cancel(options?: CancelOptions): Promise<void> {\n    const promise = this.#retryer?.promise\n    this.#retryer?.cancel(options)\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve()\n  }\n\n  destroy(): void {\n    super.destroy()\n\n    this.cancel({ silent: true })\n  }\n\n  reset(): void {\n    this.destroy()\n    this.setState(this.#initialState)\n  }\n\n  isActive(): boolean {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false,\n    )\n  }\n\n  isDisabled(): boolean {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive()\n    }\n    // if a query has no observers, it should still be considered disabled if it never attempted a fetch\n    return (\n      this.options.queryFn === skipToken ||\n      this.state.dataUpdateCount + this.state.errorUpdateCount === 0\n    )\n  }\n\n  isStatic(): boolean {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) =>\n          resolveStaleTime(observer.options.staleTime, this) === 'static',\n      )\n    }\n\n    return false\n  }\n\n  isStale(): boolean {\n    // check observers first, their `isStale` has the source of truth\n    // calculated with `isStaleByTime` and it takes `enabled` into account\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale,\n      )\n    }\n\n    return this.state.data === undefined || this.state.isInvalidated\n  }\n\n  isStaleByTime(staleTime: StaleTime = 0): boolean {\n    // no data is always stale\n    if (this.state.data === undefined) {\n      return true\n    }\n    // static is never stale\n    if (staleTime === 'static') {\n      return false\n    }\n    // if the query is invalidated, it is stale\n    if (this.state.isInvalidated) {\n      return true\n    }\n\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime)\n  }\n\n  onFocus(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  onOnline(): void {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect())\n\n    observer?.refetch({ cancelRefetch: false })\n\n    // Continue fetch if currently paused\n    this.#retryer?.continue()\n  }\n\n  addObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer)\n\n      // Stop the query from being garbage collected\n      this.clearGcTimeout()\n\n      this.#cache.notify({ type: 'observerAdded', query: this, observer })\n    }\n  }\n\n  removeObserver(observer: QueryObserver<any, any, any, any, any>): void {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer)\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true })\n          } else {\n            this.#retryer.cancelRetry()\n          }\n        }\n\n        this.scheduleGc()\n      }\n\n      this.#cache.notify({ type: 'observerRemoved', query: this, observer })\n    }\n  }\n\n  getObserversCount(): number {\n    return this.observers.length\n  }\n\n  invalidate(): void {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: 'invalidate' })\n    }\n  }\n\n  async fetch(\n    options?: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n    fetchOptions?: FetchOptions<TQueryFnData>,\n  ): Promise<TData> {\n    if (\n      this.state.fetchStatus !== 'idle' &&\n      // If the promise in the retryer is already rejected, we have to definitely\n      // re-start the fetch; there is a chance that the query is still in a\n      // pending state when that happens\n      this.#retryer?.status() !== 'rejected'\n    ) {\n      if (this.state.data !== undefined && fetchOptions?.cancelRefetch) {\n        // Silently cancel current fetch if the user wants to cancel refetch\n        this.cancel({ silent: true })\n      } else if (this.#retryer) {\n        // make sure that retries that were potentially cancelled due to unmounts can continue\n        this.#retryer.continueRetry()\n        // Return current promise if we are already fetching\n        return this.#retryer.promise\n      }\n    }\n\n    // Update config if passed, otherwise the config from the last execution is used\n    if (options) {\n      this.setOptions(options)\n    }\n\n    // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn)\n      if (observer) {\n        this.setOptions(observer.options)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`,\n        )\n      }\n    }\n\n    const abortController = new AbortController()\n\n    // Adds an enumerable signal property to the object that\n    // which sets abortSignalConsumed to true when the signal\n    // is read.\n    const addSignalProperty = (object: unknown) => {\n      Object.defineProperty(object, 'signal', {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true\n          return abortController.signal\n        },\n      })\n    }\n\n    // Create fetch function\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions)\n\n      // Create query function context\n      const createQueryFnContext = (): QueryFunctionContext<TQueryKey> => {\n        const queryFnContext: OmitKeyof<\n          QueryFunctionContext<TQueryKey>,\n          'signal'\n        > = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta,\n        }\n        addSignalProperty(queryFnContext)\n        return queryFnContext as QueryFunctionContext<TQueryKey>\n      }\n\n      const queryFnContext = createQueryFnContext()\n\n      this.#abortSignalConsumed = false\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this as unknown as Query,\n        )\n      }\n\n      return queryFn(queryFnContext)\n    }\n\n    // Trigger behavior hook\n    const createFetchContext = (): FetchContext<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey\n    > => {\n      const context: OmitKeyof<\n        FetchContext<TQueryFnData, TError, TData, TQueryKey>,\n        'signal'\n      > = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn,\n      }\n\n      addSignalProperty(context)\n      return context as FetchContext<TQueryFnData, TError, TData, TQueryKey>\n    }\n\n    const context = createFetchContext()\n\n    this.options.behavior?.onFetch(context, this as unknown as Query)\n\n    // Store state in case the current fetch needs to be reverted\n    this.#revertState = this.state\n\n    // Set to fetching state if not already in it\n    if (\n      this.state.fetchStatus === 'idle' ||\n      this.state.fetchMeta !== context.fetchOptions?.meta\n    ) {\n      this.#dispatch({ type: 'fetch', meta: context.fetchOptions?.meta })\n    }\n\n    // Try to fetch the data\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise as\n        | Promise<TData>\n        | undefined,\n      fn: context.fetchFn as () => Promise<TData>,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: 'idle' as const,\n          })\n        }\n        abortController.abort()\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.#dispatch({ type: 'continue' })\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true,\n    })\n\n    try {\n      const data = await this.#retryer.start()\n      // this is more of a runtime guard\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (data === undefined) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`,\n          )\n        }\n        throw new Error(`${this.queryHash} data is undefined`)\n      }\n\n      this.setData(data)\n\n      // Notify cache callback\n      this.#cache.config.onSuccess?.(data, this as Query<any, any, any, any>)\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error as any,\n        this as Query<any, any, any, any>,\n      )\n      return data\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          // silent cancellation implies a new fetch is going to be started,\n          // so we piggyback onto that promise\n          return this.#retryer.promise\n        } else if (error.revert) {\n          // transform error into reverted state data\n          // if the initial fetch was cancelled, we have no data, so we have\n          // to get reject with a CancelledError\n          if (this.state.data === undefined) {\n            throw error\n          }\n          return this.state.data\n        }\n      }\n      this.#dispatch({\n        type: 'error',\n        error: error as TError,\n      })\n\n      // Notify cache callback\n      this.#cache.config.onError?.(\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error as any,\n        this as Query<any, any, any, any>,\n      )\n\n      throw error // rethrow the error for further handling\n    } finally {\n      // Schedule query gc after fetching\n      this.scheduleGc()\n    }\n  }\n\n  #dispatch(action: Action<TData, TError>): void {\n    const reducer = (\n      state: QueryState<TData, TError>,\n    ): QueryState<TData, TError> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            fetchStatus: 'paused',\n          }\n        case 'continue':\n          return {\n            ...state,\n            fetchStatus: 'fetching',\n          }\n        case 'fetch':\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null,\n          }\n        case 'success':\n          const newState = {\n            ...state,\n            ...successState(action.data, action.dataUpdatedAt),\n            dataUpdateCount: state.dataUpdateCount + 1,\n            ...(!action.manual && {\n              fetchStatus: 'idle' as const,\n              fetchFailureCount: 0,\n              fetchFailureReason: null,\n            }),\n          }\n          // If fetching ends successfully, we don't need revertState as a fallback anymore.\n          // For manual updates, capture the state to revert to it in case of a cancellation.\n          this.#revertState = action.manual ? newState : undefined\n\n          return newState\n        case 'error':\n          const error = action.error\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: 'idle',\n            status: 'error',\n            // flag existing data as invalidated if we get a background error\n            // note that \"no data\" always means stale so we can set unconditionally here\n            isInvalidated: true,\n          }\n        case 'invalidate':\n          return {\n            ...state,\n            isInvalidated: true,\n          }\n        case 'setState':\n          return {\n            ...state,\n            ...action.state,\n          }\n      }\n    }\n\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate()\n      })\n\n      this.#cache.notify({ query: this, type: 'updated', action })\n    })\n  }\n}\n\nexport function fetchState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  data: TData | undefined,\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? 'fetching' : 'paused',\n    ...(data === undefined &&\n      ({\n        error: null,\n        status: 'pending',\n      } as const)),\n  } as const\n}\n\nfunction successState<TData>(data: TData | undefined, dataUpdatedAt?: number) {\n  return {\n    data,\n    dataUpdatedAt: dataUpdatedAt ?? Date.now(),\n    error: null,\n    isInvalidated: false,\n    status: 'success' as const,\n  }\n}\n\nfunction getDefaultState<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey extends QueryKey,\n>(\n  options: QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n): QueryState<TData, TError> {\n  const data =\n    typeof options.initialData === 'function'\n      ? (options.initialData as InitialDataFunction<TData>)()\n      : options.initialData\n\n  const hasData = data !== undefined\n\n  const initialDataUpdatedAt = hasData\n    ? typeof options.initialDataUpdatedAt === 'function'\n      ? options.initialDataUpdatedAt()\n      : options.initialDataUpdatedAt\n    : 0\n\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? (initialDataUpdatedAt ?? Date.now()) : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? 'success' : 'pending',\n    fetchStatus: 'idle',\n  }\n}\n", "import { focusManager } from './focusManager'\nimport { notifyManager } from './notifyManager'\nimport { fetchState } from './query'\nimport { Subscribable } from './subscribable'\nimport { pendingThenable } from './thenable'\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale,\n} from './utils'\nimport { timeoutManager } from './timeoutManager'\nimport type { ManagedTimerId } from './timeoutManager'\nimport type { FetchOptions, Query, QueryState } from './query'\nimport type { QueryClient } from './queryClient'\nimport type { PendingThenable, Thenable } from './thenable'\nimport type {\n  DefaultError,\n  DefaultedQueryObserverOptions,\n  PlaceholderDataFunction,\n  QueryKey,\n  QueryObserverBaseResult,\n  QueryObserverOptions,\n  QueryObserverResult,\n  RefetchOptions,\n} from './types'\n\ntype QueryObserverListener<TData, TError> = (\n  result: QueryObserverResult<TData, TError>,\n) => void\n\ninterface ObserverFetchOptions extends FetchOptions {\n  throwOnError?: boolean\n}\n\nexport class QueryObserver<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> extends Subscribable<QueryObserverListener<TData, TError>> {\n  #client: QueryClient\n  #currentQuery: Query<TQueryFnData, TError, TQueryData, TQueryKey> = undefined!\n  #currentQueryInitialState: QueryState<TQueryData, TError> = undefined!\n  #currentResult: QueryObserverResult<TData, TError> = undefined!\n  #currentResultState?: QueryState<TQueryData, TError>\n  #currentResultOptions?: QueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  >\n  #currentThenable: Thenable<TData>\n  #selectError: TError | null\n  #selectFn?: (data: TQueryData) => TData\n  #selectResult?: TData\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData?: Query<TQueryFnData, TError, TQueryData, TQueryKey>\n  #staleTimeoutId?: ManagedTimerId\n  #refetchIntervalId?: ManagedTimerId\n  #currentRefetchInterval?: number | false\n  #trackedProps = new Set<keyof QueryObserverResult>()\n\n  constructor(\n    client: QueryClient,\n    public options: QueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ) {\n    super()\n\n    this.#client = client\n    this.#selectError = null\n    this.#currentThenable = pendingThenable()\n\n    this.bindMethods()\n    this.setOptions(options)\n  }\n\n  protected bindMethods(): void {\n    this.refetch = this.refetch.bind(this)\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this)\n\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch()\n      } else {\n        this.updateResult()\n      }\n\n      this.#updateTimers()\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.destroy()\n    }\n  }\n\n  shouldFetchOnReconnect(): boolean {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect,\n    )\n  }\n\n  shouldFetchOnWindowFocus(): boolean {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus,\n    )\n  }\n\n  destroy(): void {\n    this.listeners = new Set()\n    this.#clearStaleTimeout()\n    this.#clearRefetchInterval()\n    this.#currentQuery.removeObserver(this)\n  }\n\n  setOptions(\n    options: QueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): void {\n    const prevOptions = this.options\n    const prevQuery = this.#currentQuery\n\n    this.options = this.#client.defaultQueryOptions(options)\n\n    if (\n      this.options.enabled !== undefined &&\n      typeof this.options.enabled !== 'boolean' &&\n      typeof this.options.enabled !== 'function' &&\n      typeof resolveEnabled(this.options.enabled, this.#currentQuery) !==\n        'boolean'\n    ) {\n      throw new Error(\n        'Expected enabled to be a boolean or a callback that returns a boolean',\n      )\n    }\n\n    this.#updateQuery()\n    this.#currentQuery.setOptions(this.options)\n\n    if (\n      prevOptions._defaulted &&\n      !shallowEqualObjects(this.options, prevOptions)\n    ) {\n      this.#client.getQueryCache().notify({\n        type: 'observerOptionsUpdated',\n        query: this.#currentQuery,\n        observer: this,\n      })\n    }\n\n    const mounted = this.hasListeners()\n\n    // Fetch if there are subscribers\n    if (\n      mounted &&\n      shouldFetchOptionally(\n        this.#currentQuery,\n        prevQuery,\n        this.options,\n        prevOptions,\n      )\n    ) {\n      this.#executeFetch()\n    }\n\n    // Update result\n    this.updateResult()\n\n    // Update stale interval if needed\n    if (\n      mounted &&\n      (this.#currentQuery !== prevQuery ||\n        resolveEnabled(this.options.enabled, this.#currentQuery) !==\n          resolveEnabled(prevOptions.enabled, this.#currentQuery) ||\n        resolveStaleTime(this.options.staleTime, this.#currentQuery) !==\n          resolveStaleTime(prevOptions.staleTime, this.#currentQuery))\n    ) {\n      this.#updateStaleTimeout()\n    }\n\n    const nextRefetchInterval = this.#computeRefetchInterval()\n\n    // Update refetch interval if needed\n    if (\n      mounted &&\n      (this.#currentQuery !== prevQuery ||\n        resolveEnabled(this.options.enabled, this.#currentQuery) !==\n          resolveEnabled(prevOptions.enabled, this.#currentQuery) ||\n        nextRefetchInterval !== this.#currentRefetchInterval)\n    ) {\n      this.#updateRefetchInterval(nextRefetchInterval)\n    }\n  }\n\n  getOptimisticResult(\n    options: DefaultedQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): QueryObserverResult<TData, TError> {\n    const query = this.#client.getQueryCache().build(this.#client, options)\n\n    const result = this.createResult(query, options)\n\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      // this assigns the optimistic result to the current Observer\n      // because if the query function changes, useQuery will be performing\n      // an effect where it would fetch again.\n      // When the fetch finishes, we perform a deep data cloning in order\n      // to reuse objects references. This deep data clone is performed against\n      // the `observer.currentResult.data` property\n      // When QueryKey changes, we refresh the query and get new `optimistic`\n      // result, while we leave the `observer.currentResult`, so when new data\n      // arrives, it finds the old `observer.currentResult` which is related\n      // to the old QueryKey. Which means that currentResult and selectData are\n      // out of sync already.\n      // To solve this, we move the cursor of the currentResult every time\n      // an observer reads an optimistic value.\n\n      // When keeping the previous data, the result doesn't change until new\n      // data arrives.\n      this.#currentResult = result\n      this.#currentResultOptions = this.options\n      this.#currentResultState = this.#currentQuery.state\n    }\n    return result\n  }\n\n  getCurrentResult(): QueryObserverResult<TData, TError> {\n    return this.#currentResult\n  }\n\n  trackResult(\n    result: QueryObserverResult<TData, TError>,\n    onPropTracked?: (key: keyof QueryObserverResult) => void,\n  ): QueryObserverResult<TData, TError> {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key as keyof QueryObserverResult)\n        onPropTracked?.(key as keyof QueryObserverResult)\n        if (key === 'promise') {\n          this.trackProp('data')\n          if (\n            !this.options.experimental_prefetchInRender &&\n            this.#currentThenable.status === 'pending'\n          ) {\n            this.#currentThenable.reject(\n              new Error(\n                'experimental_prefetchInRender feature flag is not enabled',\n              ),\n            )\n          }\n        }\n        return Reflect.get(target, key)\n      },\n    })\n  }\n\n  trackProp(key: keyof QueryObserverResult) {\n    this.#trackedProps.add(key)\n  }\n\n  getCurrentQuery(): Query<TQueryFnData, TError, TQueryData, TQueryKey> {\n    return this.#currentQuery\n  }\n\n  refetch({ ...options }: RefetchOptions = {}): Promise<\n    QueryObserverResult<TData, TError>\n  > {\n    return this.fetch({\n      ...options,\n    })\n  }\n\n  fetchOptimistic(\n    options: QueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): Promise<QueryObserverResult<TData, TError>> {\n    const defaultedOptions = this.#client.defaultQueryOptions(options)\n\n    const query = this.#client\n      .getQueryCache()\n      .build(this.#client, defaultedOptions)\n\n    return query.fetch().then(() => this.createResult(query, defaultedOptions))\n  }\n\n  protected fetch(\n    fetchOptions: ObserverFetchOptions,\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true,\n    }).then(() => {\n      this.updateResult()\n      return this.#currentResult\n    })\n  }\n\n  #executeFetch(\n    fetchOptions?: Omit<ObserverFetchOptions, 'initialPromise'>,\n  ): Promise<TQueryData | undefined> {\n    // Make sure we reference the latest query as the current one might have been removed\n    this.#updateQuery()\n\n    // Fetch\n    let promise: Promise<TQueryData | undefined> = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions,\n    )\n\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop)\n    }\n\n    return promise\n  }\n\n  #updateStaleTimeout(): void {\n    this.#clearStaleTimeout()\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery,\n    )\n\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return\n    }\n\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime)\n\n    // The timeout is sometimes triggered 1 ms before the stale time expiration.\n    // To mitigate this issue we always add 1 ms to the timeout.\n    const timeout = time + 1\n\n    this.#staleTimeoutId = timeoutManager.setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult()\n      }\n    }, timeout)\n  }\n\n  #computeRefetchInterval() {\n    return (\n      (typeof this.options.refetchInterval === 'function'\n        ? this.options.refetchInterval(this.#currentQuery)\n        : this.options.refetchInterval) ?? false\n    )\n  }\n\n  #updateRefetchInterval(nextInterval: number | false): void {\n    this.#clearRefetchInterval()\n\n    this.#currentRefetchInterval = nextInterval\n\n    if (\n      isServer ||\n      resolveEnabled(this.options.enabled, this.#currentQuery) === false ||\n      !isValidTimeout(this.#currentRefetchInterval) ||\n      this.#currentRefetchInterval === 0\n    ) {\n      return\n    }\n\n    this.#refetchIntervalId = timeoutManager.setInterval(() => {\n      if (\n        this.options.refetchIntervalInBackground ||\n        focusManager.isFocused()\n      ) {\n        this.#executeFetch()\n      }\n    }, this.#currentRefetchInterval)\n  }\n\n  #updateTimers(): void {\n    this.#updateStaleTimeout()\n    this.#updateRefetchInterval(this.#computeRefetchInterval())\n  }\n\n  #clearStaleTimeout(): void {\n    if (this.#staleTimeoutId) {\n      timeoutManager.clearTimeout(this.#staleTimeoutId)\n      this.#staleTimeoutId = undefined\n    }\n  }\n\n  #clearRefetchInterval(): void {\n    if (this.#refetchIntervalId) {\n      timeoutManager.clearInterval(this.#refetchIntervalId)\n      this.#refetchIntervalId = undefined\n    }\n  }\n\n  protected createResult(\n    query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n    options: QueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >,\n  ): QueryObserverResult<TData, TError> {\n    const prevQuery = this.#currentQuery\n    const prevOptions = this.options\n    const prevResult = this.#currentResult as\n      | QueryObserverResult<TData, TError>\n      | undefined\n    const prevResultState = this.#currentResultState\n    const prevResultOptions = this.#currentResultOptions\n    const queryChange = query !== prevQuery\n    const queryInitialState = queryChange\n      ? query.state\n      : this.#currentQueryInitialState\n\n    const { state } = query\n    let newState = { ...state }\n    let isPlaceholderData = false\n    let data: TData | undefined\n\n    // Optimistically set result in fetching state if needed\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners()\n\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options)\n\n      const fetchOptionally =\n        mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions)\n\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options),\n        }\n      }\n      if (options._optimisticResults === 'isRestoring') {\n        newState.fetchStatus = 'idle'\n      }\n    }\n\n    let { error, errorUpdatedAt, status } = newState\n\n    // Per default, use query data\n    data = newState.data as unknown as TData\n    let skipSelect = false\n\n    // use placeholderData if needed\n    if (\n      options.placeholderData !== undefined &&\n      data === undefined &&\n      status === 'pending'\n    ) {\n      let placeholderData\n\n      // Memoize placeholder data\n      if (\n        prevResult?.isPlaceholderData &&\n        options.placeholderData === prevResultOptions?.placeholderData\n      ) {\n        placeholderData = prevResult.data\n        // we have to skip select when reading this memoization\n        // because prevResult.data is already \"selected\"\n        skipSelect = true\n      } else {\n        // compute placeholderData\n        placeholderData =\n          typeof options.placeholderData === 'function'\n            ? (\n                options.placeholderData as unknown as PlaceholderDataFunction<TQueryData>\n              )(\n                this.#lastQueryWithDefinedData?.state.data,\n                this.#lastQueryWithDefinedData as any,\n              )\n            : options.placeholderData\n      }\n\n      if (placeholderData !== undefined) {\n        status = 'success'\n        data = replaceData(\n          prevResult?.data,\n          placeholderData as unknown,\n          options,\n        ) as TData\n        isPlaceholderData = true\n      }\n    }\n\n    // Select data if needed\n    // this also runs placeholderData through the select function\n    if (options.select && data !== undefined && !skipSelect) {\n      // Memoize select result\n      if (\n        prevResult &&\n        data === prevResultState?.data &&\n        options.select === this.#selectFn\n      ) {\n        data = this.#selectResult\n      } else {\n        try {\n          this.#selectFn = options.select\n          data = options.select(data as any)\n          data = replaceData(prevResult?.data, data, options)\n          this.#selectResult = data\n          this.#selectError = null\n        } catch (selectError) {\n          this.#selectError = selectError as TError\n        }\n      }\n    }\n\n    if (this.#selectError) {\n      error = this.#selectError\n      data = this.#selectResult\n      errorUpdatedAt = Date.now()\n      status = 'error'\n    }\n\n    const isFetching = newState.fetchStatus === 'fetching'\n    const isPending = status === 'pending'\n    const isError = status === 'error'\n\n    const isLoading = isPending && isFetching\n    const hasData = data !== undefined\n\n    const result: QueryObserverBaseResult<TData, TError> = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === 'success',\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount:\n        newState.dataUpdateCount > queryInitialState.dataUpdateCount ||\n        newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === 'paused',\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false,\n    }\n\n    const nextResult = result as QueryObserverResult<TData, TError>\n\n    if (this.options.experimental_prefetchInRender) {\n      const hasResultData = nextResult.data !== undefined\n      const isErrorWithoutData = nextResult.status === 'error' && !hasResultData\n      const finalizeThenableIfPossible = (thenable: PendingThenable<TData>) => {\n        if (isErrorWithoutData) {\n          thenable.reject(nextResult.error)\n        } else if (hasResultData) {\n          thenable.resolve(nextResult.data as TData)\n        }\n      }\n\n      /**\n       * Create a new thenable and result promise when the results have changed\n       */\n      const recreateThenable = () => {\n        const pending =\n          (this.#currentThenable =\n          nextResult.promise =\n            pendingThenable())\n\n        finalizeThenableIfPossible(pending)\n      }\n\n      const prevThenable = this.#currentThenable\n      switch (prevThenable.status) {\n        case 'pending':\n          // Finalize the previous thenable if it was pending\n          // and we are still observing the same query\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable)\n          }\n          break\n        case 'fulfilled':\n          if (isErrorWithoutData || nextResult.data !== prevThenable.value) {\n            recreateThenable()\n          }\n          break\n        case 'rejected':\n          if (!isErrorWithoutData || nextResult.error !== prevThenable.reason) {\n            recreateThenable()\n          }\n          break\n      }\n    }\n\n    return nextResult\n  }\n\n  updateResult(): void {\n    const prevResult = this.#currentResult as\n      | QueryObserverResult<TData, TError>\n      | undefined\n\n    const nextResult = this.createResult(this.#currentQuery, this.options)\n\n    this.#currentResultState = this.#currentQuery.state\n    this.#currentResultOptions = this.options\n\n    if (this.#currentResultState.data !== undefined) {\n      this.#lastQueryWithDefinedData = this.#currentQuery\n    }\n\n    // Only notify and update result if something has changed\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return\n    }\n\n    this.#currentResult = nextResult\n\n    const shouldNotifyListeners = (): boolean => {\n      if (!prevResult) {\n        return true\n      }\n\n      const { notifyOnChangeProps } = this.options\n      const notifyOnChangePropsValue =\n        typeof notifyOnChangeProps === 'function'\n          ? notifyOnChangeProps()\n          : notifyOnChangeProps\n\n      if (\n        notifyOnChangePropsValue === 'all' ||\n        (!notifyOnChangePropsValue && !this.#trackedProps.size)\n      ) {\n        return true\n      }\n\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps,\n      )\n\n      if (this.options.throwOnError) {\n        includedProps.add('error')\n      }\n\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key as keyof QueryObserverResult\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey]\n\n        return changed && includedProps.has(typedKey)\n      })\n    }\n\n    this.#notify({ listeners: shouldNotifyListeners() })\n  }\n\n  #updateQuery(): void {\n    const query = this.#client.getQueryCache().build(this.#client, this.options)\n\n    if (query === this.#currentQuery) {\n      return\n    }\n\n    const prevQuery = this.#currentQuery as\n      | Query<TQueryFnData, TError, TQueryData, TQueryKey>\n      | undefined\n    this.#currentQuery = query\n    this.#currentQueryInitialState = query.state\n\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this)\n      query.addObserver(this)\n    }\n  }\n\n  onQueryUpdate(): void {\n    this.updateResult()\n\n    if (this.hasListeners()) {\n      this.#updateTimers()\n    }\n  }\n\n  #notify(notifyOptions: { listeners: boolean }): void {\n    notifyManager.batch(() => {\n      // First, trigger the listeners\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult)\n        })\n      }\n\n      // Then the cache listeners\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: 'observerResultsUpdated',\n      })\n    })\n  }\n}\n\nfunction shouldLoadOnMount(\n  query: Query<any, any, any, any>,\n  options: QueryObserverOptions<any, any, any, any>,\n): boolean {\n  return (\n    resolveEnabled(options.enabled, query) !== false &&\n    query.state.data === undefined &&\n    !(query.state.status === 'error' && options.retryOnMount === false)\n  )\n}\n\nfunction shouldFetchOnMount(\n  query: Query<any, any, any, any>,\n  options: QueryObserverOptions<any, any, any, any, any>,\n): boolean {\n  return (\n    shouldLoadOnMount(query, options) ||\n    (query.state.data !== undefined &&\n      shouldFetchOn(query, options, options.refetchOnMount))\n  )\n}\n\nfunction shouldFetchOn(\n  query: Query<any, any, any, any>,\n  options: QueryObserverOptions<any, any, any, any, any>,\n  field: (typeof options)['refetchOnMount'] &\n    (typeof options)['refetchOnWindowFocus'] &\n    (typeof options)['refetchOnReconnect'],\n) {\n  if (\n    resolveEnabled(options.enabled, query) !== false &&\n    resolveStaleTime(options.staleTime, query) !== 'static'\n  ) {\n    const value = typeof field === 'function' ? field(query) : field\n\n    return value === 'always' || (value !== false && isStale(query, options))\n  }\n  return false\n}\n\nfunction shouldFetchOptionally(\n  query: Query<any, any, any, any>,\n  prevQuery: Query<any, any, any, any>,\n  options: QueryObserverOptions<any, any, any, any, any>,\n  prevOptions: QueryObserverOptions<any, any, any, any, any>,\n): boolean {\n  return (\n    (query !== prevQuery ||\n      resolveEnabled(prevOptions.enabled, query) === false) &&\n    (!options.suspense || query.state.status !== 'error') &&\n    isStale(query, options)\n  )\n}\n\nfunction isStale(\n  query: Query<any, any, any, any>,\n  options: QueryObserverOptions<any, any, any, any, any>,\n): boolean {\n  return (\n    resolveEnabled(options.enabled, query) !== false &&\n    query.isStaleByTime(resolveStaleTime(options.staleTime, query))\n  )\n}\n\n// this function would decide if we will update the observer's 'current'\n// properties after an optimistic reading via getOptimisticResult\nfunction shouldAssignObserverCurrentProperties<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  observer: QueryObserver<TQueryFnData, TError, TData, TQueryData, TQueryKey>,\n  optimisticResult: QueryObserverResult<TData, TError>,\n) {\n  // if the newly created result isn't what the observer is holding as current,\n  // then we'll need to update the properties as well\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true\n  }\n\n  // basically, just keep previous properties if nothing changed\n  return false\n}\n", "import {\n  addConsumeAwareSignal,\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n} from './utils'\nimport type { QueryBehavior } from './query'\nimport type {\n  InfiniteData,\n  InfiniteQueryPageParamsOptions,\n  OmitKeyof,\n  QueryFunctionContext,\n  QueryKey,\n} from './types'\n\nexport function infiniteQueryBehavior<TQueryFnData, TError, TData, TPageParam>(\n  pages?: number,\n): QueryBehavior<TQueryFnData, TError, InfiniteData<TData, TPageParam>> {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options as InfiniteQueryPageParamsOptions<TData>\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction\n      const oldPages = context.state.data?.pages || []\n      const oldPageParams = context.state.data?.pageParams || []\n      let result: InfiniteData<unknown> = { pages: [], pageParams: [] }\n      let currentPage = 0\n\n      const fetchFn = async () => {\n        let cancelled = false\n        const addSignalProperty = (object: unknown) => {\n          addConsumeAwareSignal(\n            object,\n            () => context.signal,\n            () => (cancelled = true),\n          )\n        }\n\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions)\n\n        // Create function to fetch a page\n        const fetchPage = async (\n          data: InfiniteData<unknown>,\n          param: unknown,\n          previous?: boolean,\n        ): Promise<InfiniteData<unknown>> => {\n          if (cancelled) {\n            return Promise.reject()\n          }\n\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data)\n          }\n\n          const createQueryFnContext = () => {\n            const queryFnContext: OmitKeyof<\n              QueryFunctionContext<QueryKey, unknown>,\n              'signal'\n            > = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? 'backward' : 'forward',\n              meta: context.options.meta,\n            }\n            addSignalProperty(queryFnContext)\n            return queryFnContext as QueryFunctionContext<QueryKey, unknown>\n          }\n\n          const queryFnContext = createQueryFnContext()\n\n          const page = await queryFn(queryFnContext)\n\n          const { maxPages } = context.options\n          const addTo = previous ? addToStart : addToEnd\n\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages),\n          }\n        }\n\n        // fetch next / previous page?\n        if (direction && oldPages.length) {\n          const previous = direction === 'backward'\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams,\n          }\n          const param = pageParamFn(options, oldData)\n\n          result = await fetchPage(oldData, param, previous)\n        } else {\n          const remainingPages = pages ?? oldPages.length\n\n          // Fetch all pages\n          do {\n            const param =\n              currentPage === 0\n                ? (oldPageParams[0] ?? options.initialPageParam)\n                : getNextPageParam(options, result)\n            if (currentPage > 0 && param == null) {\n              break\n            }\n            result = await fetchPage(result, param)\n            currentPage++\n          } while (currentPage < remainingPages)\n        }\n\n        return result\n      }\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn as any,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal,\n            },\n            query,\n          )\n        }\n      } else {\n        context.fetchFn = fetchFn\n      }\n    },\n  }\n}\n\nfunction getNextPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  const lastIndex = pages.length - 1\n  return pages.length > 0\n    ? options.getNextPageParam(\n        pages[lastIndex],\n        pages,\n        pageParams[lastIndex],\n        pageParams,\n      )\n    : undefined\n}\n\nfunction getPreviousPageParam(\n  options: InfiniteQueryPageParamsOptions<any>,\n  { pages, pageParams }: InfiniteData<unknown>,\n): unknown | undefined {\n  return pages.length > 0\n    ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams)\n    : undefined\n}\n\n/**\n * Checks if there is a next page.\n */\nexport function hasNextPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data) return false\n  return getNextPageParam(options, data) != null\n}\n\n/**\n * Checks if there is a previous page.\n */\nexport function hasPreviousPage(\n  options: InfiniteQueryPageParamsOptions<any, any>,\n  data?: InfiniteData<unknown>,\n): boolean {\n  if (!data || !options.getPreviousPageParam) return false\n  return getPreviousPageParam(options, data) != null\n}\n", "import { notifyManager } from './notifyManager'\nimport { Removable } from './removable'\nimport { createRetryer } from './retryer'\nimport type {\n  DefaultError,\n  MutationFunctionContext,\n  MutationMeta,\n  MutationOptions,\n  MutationStatus,\n} from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport type { Retryer } from './retryer'\nimport type { QueryClient } from './queryClient'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TOnMutateResult> {\n  client: QueryClient\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  state?: MutationState<TData, TError, TVariables, TOnMutateResult>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> {\n  context: TOnMutateResult | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  failureReason: TError | null\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n  submittedAt: number\n}\n\ninterface FailedAction<TError> {\n  type: 'failed'\n  failureCount: number\n  error: TError | null\n}\n\ninterface PendingAction<TVariables, TOnMutateResult> {\n  type: 'pending'\n  isPaused: boolean\n  variables?: TVariables\n  context?: TOnMutateResult\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\nexport type Action<TData, TError, TVariables, TOnMutateResult> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction<TError>\n  | PendingAction<TVariables, TOnMutateResult>\n  | PauseAction\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = unknown,\n  TOnMutateResult = unknown,\n> extends Removable {\n  state: MutationState<TData, TError, TVariables, TOnMutateResult>\n  options!: MutationOptions<TData, TError, TVariables, TOnMutateResult>\n  readonly mutationId: number\n\n  #client: QueryClient\n  #observers: Array<\n    MutationObserver<TData, TError, TVariables, TOnMutateResult>\n  >\n  #mutationCache: MutationCache\n  #retryer?: Retryer<TData>\n\n  constructor(\n    config: MutationConfig<TData, TError, TVariables, TOnMutateResult>,\n  ) {\n    super()\n\n    this.#client = config.client\n    this.mutationId = config.mutationId\n    this.#mutationCache = config.mutationCache\n    this.#observers = []\n    this.state = config.state || getDefaultState()\n\n    this.setOptions(config.options)\n    this.scheduleGc()\n  }\n\n  setOptions(\n    options: MutationOptions<TData, TError, TVariables, TOnMutateResult>,\n  ): void {\n    this.options = options\n\n    this.updateGcTime(this.options.gcTime)\n  }\n\n  get meta(): MutationMeta | undefined {\n    return this.options.meta\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer)\n\n      // Stop the mutation from being garbage collected\n      this.clearGcTimeout()\n\n      this.#mutationCache.notify({\n        type: 'observerAdded',\n        mutation: this,\n        observer,\n      })\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.#observers = this.#observers.filter((x) => x !== observer)\n\n    this.scheduleGc()\n\n    this.#mutationCache.notify({\n      type: 'observerRemoved',\n      mutation: this,\n      observer,\n    })\n  }\n\n  protected optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === 'pending') {\n        this.scheduleGc()\n      } else {\n        this.#mutationCache.remove(this)\n      }\n    }\n  }\n\n  continue(): Promise<unknown> {\n    return (\n      this.#retryer?.continue() ??\n      // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n      this.execute(this.state.variables!)\n    )\n  }\n\n  async execute(variables: TVariables): Promise<TData> {\n    const onContinue = () => {\n      this.#dispatch({ type: 'continue' })\n    }\n\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey,\n    } satisfies MutationFunctionContext\n\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error('No mutationFn found'))\n        }\n\n        return this.options.mutationFn(variables, mutationFnContext)\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: 'failed', failureCount, error })\n      },\n      onPause: () => {\n        this.#dispatch({ type: 'pause' })\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this),\n    })\n\n    const restored = this.state.status === 'pending'\n    const isPaused = !this.#retryer.canStart()\n\n    try {\n      if (restored) {\n        // Dispatch continue action to unpause restored mutation\n        onContinue()\n      } else {\n        this.#dispatch({ type: 'pending', variables, isPaused })\n        // Notify cache callback\n        if (this.#mutationCache.config.onMutate) {\n          await this.#mutationCache.config.onMutate(\n            variables,\n            this as Mutation<unknown, unknown, unknown, unknown>,\n            mutationFnContext,\n          )\n        }\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext,\n        )\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: 'pending',\n            context,\n            variables,\n            isPaused,\n          })\n        }\n      }\n      const data = await this.#retryer.start()\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context!,\n        mutationFnContext,\n      )\n\n      // Notify cache callback\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this as Mutation<unknown, unknown, unknown, unknown>,\n        mutationFnContext,\n      )\n\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext,\n      )\n\n      this.#dispatch({ type: 'success', data })\n      return data\n    } catch (error) {\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onError?.(\n          error as any,\n          variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        await this.options.onError?.(\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        // Notify cache callback\n        await this.#mutationCache.config.onSettled?.(\n          undefined,\n          error as any,\n          this.state.variables,\n          this.state.context,\n          this as Mutation<unknown, unknown, unknown, unknown>,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      try {\n        await this.options.onSettled?.(\n          undefined,\n          error as TError,\n          variables,\n          this.state.context,\n          mutationFnContext,\n        )\n      } catch (e) {\n        void Promise.reject(e)\n      }\n\n      this.#dispatch({ type: 'error', error: error as TError })\n      throw error\n    } finally {\n      this.#mutationCache.runNext(this)\n    }\n  }\n\n  #dispatch(action: Action<TData, TError, TVariables, TOnMutateResult>): void {\n    const reducer = (\n      state: MutationState<TData, TError, TVariables, TOnMutateResult>,\n    ): MutationState<TData, TError, TVariables, TOnMutateResult> => {\n      switch (action.type) {\n        case 'failed':\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error,\n          }\n        case 'pause':\n          return {\n            ...state,\n            isPaused: true,\n          }\n        case 'continue':\n          return {\n            ...state,\n            isPaused: false,\n          }\n        case 'pending':\n          return {\n            ...state,\n            context: action.context,\n            data: undefined,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: 'pending',\n            variables: action.variables,\n            submittedAt: Date.now(),\n          }\n        case 'success':\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: 'success',\n            isPaused: false,\n          }\n        case 'error':\n          return {\n            ...state,\n            data: undefined,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: 'error',\n          }\n      }\n    }\n    this.state = reducer(this.state)\n\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action)\n      })\n      this.#mutationCache.notify({\n        mutation: this,\n        type: 'updated',\n        action,\n      })\n    })\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult,\n>(): MutationState<TData, TError, TVariables, TOnMutateResult> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n    submittedAt: 0,\n  }\n}\n", "import { notifyManager } from './notifyManager'\nimport { Mutation } from './mutation'\nimport { matchMutation, noop } from './utils'\nimport { Subscribable } from './subscribable'\nimport type { MutationObserver } from './mutationObserver'\nimport type {\n  DefaultError,\n  MutationFunctionContext,\n  MutationOptions,\n  NotifyEvent,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { Action, MutationState } from './mutation'\nimport type { MutationFilters } from './utils'\n\n// TYPES\n\ninterface MutationCacheConfig {\n  onError?: (\n    error: DefaultError,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onSuccess?: (\n    data: unknown,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onMutate?: (\n    variables: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    variables: unknown,\n    onMutateResult: unknown,\n    mutation: Mutation<unknown, unknown, unknown>,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n}\n\ninterface NotifyEventMutationAdded extends NotifyEvent {\n  type: 'added'\n  mutation: Mutation<any, any, any, any>\n}\ninterface NotifyEventMutationRemoved extends NotifyEvent {\n  type: 'removed'\n  mutation: Mutation<any, any, any, any>\n}\n\ninterface NotifyEventMutationObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  mutation: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any>\n}\n\ninterface NotifyEventMutationObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  mutation?: Mutation<any, any, any, any>\n  observer: MutationObserver<any, any, any, any>\n}\n\ninterface NotifyEventMutationUpdated extends NotifyEvent {\n  type: 'updated'\n  mutation: Mutation<any, any, any, any>\n  action: Action<any, any, any, any>\n}\n\nexport type MutationCacheNotifyEvent =\n  | NotifyEventMutationAdded\n  | NotifyEventMutationRemoved\n  | NotifyEventMutationObserverAdded\n  | NotifyEventMutationObserverRemoved\n  | NotifyEventMutationObserverOptionsUpdated\n  | NotifyEventMutationUpdated\n\ntype MutationCacheListener = (event: MutationCacheNotifyEvent) => void\n\n// CLASS\n\nexport class MutationCache extends Subscribable<MutationCacheListener> {\n  #mutations: Set<Mutation<any, any, any, any>>\n  #scopes: Map<string, Array<Mutation<any, any, any, any>>>\n  #mutationId: number\n\n  constructor(public config: MutationCacheConfig = {}) {\n    super()\n    this.#mutations = new Set()\n    this.#scopes = new Map()\n    this.#mutationId = 0\n  }\n\n  build<TData, TError, TVariables, TOnMutateResult>(\n    client: QueryClient,\n    options: MutationOptions<TData, TError, TVariables, TOnMutateResult>,\n    state?: MutationState<TData, TError, TVariables, TOnMutateResult>,\n  ): Mutation<TData, TError, TVariables, TOnMutateResult> {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state,\n    })\n\n    this.add(mutation)\n\n    return mutation\n  }\n\n  add(mutation: Mutation<any, any, any, any>): void {\n    this.#mutations.add(mutation)\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const scopedMutations = this.#scopes.get(scope)\n      if (scopedMutations) {\n        scopedMutations.push(mutation)\n      } else {\n        this.#scopes.set(scope, [mutation])\n      }\n    }\n    this.notify({ type: 'added', mutation })\n  }\n\n  remove(mutation: Mutation<any, any, any, any>): void {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation)\n      if (typeof scope === 'string') {\n        const scopedMutations = this.#scopes.get(scope)\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation)\n            if (index !== -1) {\n              scopedMutations.splice(index, 1)\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope)\n          }\n        }\n      }\n    }\n\n    // Currently we notify the removal even if the mutation was already removed.\n    // Consider making this an error or not notifying of the removal depending on the desired semantics.\n    this.notify({ type: 'removed', mutation })\n  }\n\n  canRun(mutation: Mutation<any, any, any, any>): boolean {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const mutationsWithSameScope = this.#scopes.get(scope)\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === 'pending',\n      )\n      // we can run if there is no current pending mutation (start use-case)\n      // or if WE are the first pending mutation (continue use-case)\n      return !firstPendingMutation || firstPendingMutation === mutation\n    } else {\n      // For unscoped mutations there are never any pending mutations in front of the\n      // current mutation\n      return true\n    }\n  }\n\n  runNext(mutation: Mutation<any, any, any, any>): Promise<unknown> {\n    const scope = scopeFor(mutation)\n    if (typeof scope === 'string') {\n      const foundMutation = this.#scopes\n        .get(scope)\n        ?.find((m) => m !== mutation && m.state.isPaused)\n\n      return foundMutation?.continue() ?? Promise.resolve()\n    } else {\n      return Promise.resolve()\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: 'removed', mutation })\n      })\n      this.#mutations.clear()\n      this.#scopes.clear()\n    })\n  }\n\n  getAll(): Array<Mutation> {\n    return Array.from(this.#mutations)\n  }\n\n  find<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = any,\n    TOnMutateResult = unknown,\n  >(\n    filters: MutationFilters,\n  ): Mutation<TData, TError, TVariables, TOnMutateResult> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((mutation) =>\n      matchMutation(defaultedFilters, mutation),\n    ) as Mutation<TData, TError, TVariables, TOnMutateResult> | undefined\n  }\n\n  findAll(filters: MutationFilters = {}): Array<Mutation> {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation))\n  }\n\n  notify(event: MutationCacheNotifyEvent) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused)\n\n    return notifyManager.batch(() =>\n      Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop)),\n      ),\n    )\n  }\n}\n\nfunction scopeFor(mutation: Mutation<any, any, any, any>) {\n  return mutation.options.scope?.id\n}\n", "import { getDefaultState } from './mutation'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport { hashKey, shallowEqualObjects } from './utils'\nimport type { QueryClient } from './queryClient'\nimport type {\n  DefaultError,\n  MutateOptions,\n  MutationFunctionContext,\n  MutationObserverOptions,\n  MutationObserverResult,\n} from './types'\nimport type { Action, Mutation } from './mutation'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TOnMutateResult> = (\n  result: MutationObserverResult<TData, TError, TVariables, TOnMutateResult>,\n) => void\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TOnMutateResult>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>\n\n  #client: QueryClient\n  #currentResult: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TOnMutateResult\n  > = undefined!\n  #currentMutation?: Mutation<TData, TError, TVariables, TOnMutateResult>\n  #mutateOptions?: MutateOptions<TData, TError, TVariables, TOnMutateResult>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<\n      TData,\n      TError,\n      TVariables,\n      TOnMutateResult\n    >,\n  ) {\n    super()\n\n    this.#client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.#updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options: MutationObserverOptions<\n      TData,\n      TError,\n      TVariables,\n      TOnMutateResult\n    >,\n  ) {\n    const prevOptions = this.options as\n      | MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>\n      | undefined\n    this.options = this.#client.defaultMutationOptions(options)\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: 'observerOptionsUpdated',\n        mutation: this.#currentMutation,\n        observer: this,\n      })\n    }\n\n    if (\n      prevOptions?.mutationKey &&\n      this.options.mutationKey &&\n      hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)\n    ) {\n      this.reset()\n    } else if (this.#currentMutation?.state.status === 'pending') {\n      this.#currentMutation.setOptions(this.options)\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(\n    action: Action<TData, TError, TVariables, TOnMutateResult>,\n  ): void {\n    this.#updateResult()\n\n    this.#notify(action)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TOnMutateResult\n  > {\n    return this.#currentResult\n  }\n\n  reset(): void {\n    // reset needs to remove the observer from the mutation because there is no way to \"get it back\"\n    // another mutate call will yield a new mutation!\n    this.#currentMutation?.removeObserver(this)\n    this.#currentMutation = undefined\n    this.#updateResult()\n    this.#notify()\n  }\n\n  mutate(\n    variables: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TOnMutateResult>,\n  ): Promise<TData> {\n    this.#mutateOptions = options\n\n    this.#currentMutation?.removeObserver(this)\n\n    this.#currentMutation = this.#client\n      .getMutationCache()\n      .build(this.#client, this.options)\n\n    this.#currentMutation.addObserver(this)\n\n    return this.#currentMutation.execute(variables)\n  }\n\n  #updateResult(): void {\n    const state =\n      this.#currentMutation?.state ??\n      getDefaultState<TData, TError, TVariables, TOnMutateResult>()\n\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === 'pending',\n      isSuccess: state.status === 'success',\n      isError: state.status === 'error',\n      isIdle: state.status === 'idle',\n      mutate: this.mutate,\n      reset: this.reset,\n    } as MutationObserverResult<TData, TError, TVariables, TOnMutateResult>\n  }\n\n  #notify(action?: Action<TData, TError, TVariables, TOnMutateResult>): void {\n    notifyManager.batch(() => {\n      // First trigger the mutate callbacks\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables!\n        const onMutateResult = this.#currentResult.context\n\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey,\n        } satisfies MutationFunctionContext\n\n        if (action?.type === 'success') {\n          try {\n            this.#mutateOptions.onSuccess?.(\n              action.data,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              action.data,\n              null,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n        } else if (action?.type === 'error') {\n          try {\n            this.#mutateOptions.onError?.(\n              action.error,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              undefined,\n              action.error,\n              variables,\n              onMutateResult,\n              context,\n            )\n          } catch (e) {\n            void Promise.reject(e)\n          }\n        }\n      }\n\n      // Then trigger the listeners\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult)\n      })\n    })\n  }\n}\n", "import { hashQueryKeyByOptions, matchQuery } from './utils'\nimport { Query } from './query'\nimport { notifyManager } from './notifyManager'\nimport { Subscribable } from './subscribable'\nimport type { QueryFilters } from './utils'\nimport type { Action, QueryState } from './query'\nimport type {\n  DefaultError,\n  NotifyEvent,\n  QueryKey,\n  QueryOptions,\n  WithRequired,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport type { QueryObserver } from './queryObserver'\n\n// TYPES\n\ninterface QueryCacheConfig {\n  onError?: (\n    error: DefaultError,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n  onSuccess?: (data: unknown, query: Query<unknown, unknown, unknown>) => void\n  onSettled?: (\n    data: unknown | undefined,\n    error: DefaultError | null,\n    query: Query<unknown, unknown, unknown>,\n  ) => void\n}\n\ninterface NotifyEventQueryAdded extends NotifyEvent {\n  type: 'added'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryRemoved extends NotifyEvent {\n  type: 'removed'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryUpdated extends NotifyEvent {\n  type: 'updated'\n  query: Query<any, any, any, any>\n  action: Action<any, any>\n}\n\ninterface NotifyEventQueryObserverAdded extends NotifyEvent {\n  type: 'observerAdded'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverRemoved extends NotifyEvent {\n  type: 'observerRemoved'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverResultsUpdated extends NotifyEvent {\n  type: 'observerResultsUpdated'\n  query: Query<any, any, any, any>\n}\n\ninterface NotifyEventQueryObserverOptionsUpdated extends NotifyEvent {\n  type: 'observerOptionsUpdated'\n  query: Query<any, any, any, any>\n  observer: QueryObserver<any, any, any, any, any>\n}\n\nexport type QueryCacheNotifyEvent =\n  | NotifyEventQueryAdded\n  | NotifyEventQueryRemoved\n  | NotifyEventQueryUpdated\n  | NotifyEventQueryObserverAdded\n  | NotifyEventQueryObserverRemoved\n  | NotifyEventQueryObserverResultsUpdated\n  | NotifyEventQueryObserverOptionsUpdated\n\ntype QueryCacheListener = (event: QueryCacheNotifyEvent) => void\n\nexport interface QueryStore {\n  has: (queryHash: string) => boolean\n  set: (queryHash: string, query: Query) => void\n  get: (queryHash: string) => Query | undefined\n  delete: (queryHash: string) => void\n  values: () => IterableIterator<Query>\n}\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  #queries: QueryStore\n\n  constructor(public config: QueryCacheConfig = {}) {\n    super()\n    this.#queries = new Map<string, Query>()\n  }\n\n  build<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    client: QueryClient,\n    options: WithRequired<\n      QueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n      'queryKey'\n    >,\n    state?: QueryState<TData, TError>,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> {\n    const queryKey = options.queryKey\n    const queryHash =\n      options.queryHash ?? hashQueryKeyByOptions(queryKey, options)\n    let query = this.get<TQueryFnData, TError, TData, TQueryKey>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any, any, any>): void {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query)\n\n      this.notify({\n        type: 'added',\n        query,\n      })\n    }\n  }\n\n  remove(query: Query<any, any, any, any>): void {\n    const queryInMap = this.#queries.get(query.queryHash)\n\n    if (queryInMap) {\n      query.destroy()\n\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash)\n      }\n\n      this.notify({ type: 'removed', query })\n    }\n  }\n\n  clear(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query)\n      })\n    })\n  }\n\n  get<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    queryHash: string,\n  ): Query<TQueryFnData, TError, TData, TQueryKey> | undefined {\n    return this.#queries.get(queryHash) as\n      | Query<TQueryFnData, TError, TData, TQueryKey>\n      | undefined\n  }\n\n  getAll(): Array<Query> {\n    return [...this.#queries.values()]\n  }\n\n  find<TQueryFnData = unknown, TError = DefaultError, TData = TQueryFnData>(\n    filters: WithRequired<QueryFilters, 'queryKey'>,\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    const defaultedFilters = { exact: true, ...filters }\n\n    return this.getAll().find((query) =>\n      matchQuery(defaultedFilters, query),\n    ) as Query<TQueryFnData, TError, TData> | undefined\n  }\n\n  findAll(filters: QueryFilters<any> = {}): Array<Query> {\n    const queries = this.getAll()\n    return Object.keys(filters).length > 0\n      ? queries.filter((query) => matchQuery(filters, query))\n      : queries\n  }\n\n  notify(event: QueryCacheNotifyEvent): void {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event)\n      })\n    })\n  }\n\n  onFocus(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus()\n      })\n    })\n  }\n\n  onOnline(): void {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline()\n      })\n    })\n  }\n}\n", "import {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken,\n} from './utils'\nimport { QueryCache } from './queryCache'\nimport { MutationCache } from './mutationCache'\nimport { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { notifyManager } from './notifyManager'\nimport { infiniteQueryBehavior } from './infiniteQueryBehavior'\nimport type {\n  CancelOptions,\n  DefaultError,\n  DefaultOptions,\n  DefaultedQueryObserverOptions,\n  EnsureInfiniteQueryDataOptions,\n  EnsureQueryDataOptions,\n  FetchInfiniteQueryOptions,\n  FetchQueryOptions,\n  InferDataFromTag,\n  InferErrorFromTag,\n  InfiniteData,\n  InvalidateOptions,\n  InvalidateQueryFilters,\n  MutationKey,\n  MutationObserverOptions,\n  MutationOptions,\n  NoInfer,\n  OmitKeyof,\n  QueryClientConfig,\n  QueryKey,\n  QueryObserverOptions,\n  QueryOptions,\n  RefetchOptions,\n  RefetchQueryFilters,\n  ResetOptions,\n  SetDataOptions,\n} from './types'\nimport type { QueryState } from './query'\nimport type { MutationFilters, QueryFilters, Updater } from './utils'\n\n// TYPES\n\ninterface QueryDefaults {\n  queryKey: QueryKey\n  defaultOptions: OmitKeyof<QueryOptions<any, any, any>, 'queryKey'>\n}\n\ninterface MutationDefaults {\n  mutationKey: MutationKey\n  defaultOptions: MutationOptions<any, any, any, any>\n}\n\n// CLASS\n\nexport class QueryClient {\n  #queryCache: QueryCache\n  #mutationCache: MutationCache\n  #defaultOptions: DefaultOptions\n  #queryDefaults: Map<string, QueryDefaults>\n  #mutationDefaults: Map<string, MutationDefaults>\n  #mountCount: number\n  #unsubscribeFocus?: () => void\n  #unsubscribeOnline?: () => void\n\n  constructor(config: QueryClientConfig = {}) {\n    this.#queryCache = config.queryCache || new QueryCache()\n    this.#mutationCache = config.mutationCache || new MutationCache()\n    this.#defaultOptions = config.defaultOptions || {}\n    this.#queryDefaults = new Map()\n    this.#mutationDefaults = new Map()\n    this.#mountCount = 0\n  }\n\n  mount(): void {\n    this.#mountCount++\n    if (this.#mountCount !== 1) return\n\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations()\n        this.#queryCache.onFocus()\n      }\n    })\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations()\n        this.#queryCache.onOnline()\n      }\n    })\n  }\n\n  unmount(): void {\n    this.#mountCount--\n    if (this.#mountCount !== 0) return\n\n    this.#unsubscribeFocus?.()\n    this.#unsubscribeFocus = undefined\n\n    this.#unsubscribeOnline?.()\n    this.#unsubscribeOnline = undefined\n  }\n\n  isFetching<TQueryFilters extends QueryFilters<any> = QueryFilters>(\n    filters?: TQueryFilters,\n  ): number {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: 'fetching' })\n      .length\n  }\n\n  isMutating<\n    TMutationFilters extends MutationFilters<any, any> = MutationFilters,\n  >(filters?: TMutationFilters): number {\n    return this.#mutationCache.findAll({ ...filters, status: 'pending' }).length\n  }\n\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(queryKey: TTaggedQueryKey): TInferredQueryFnData | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n\n    return this.#queryCache.get<TInferredQueryFnData>(options.queryHash)?.state\n      .data\n  }\n\n  ensureQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: EnsureQueryDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n    const query = this.#queryCache.build(this, defaultedOptions)\n    const cachedData = query.state.data\n\n    if (cachedData === undefined) {\n      return this.fetchQuery(options)\n    }\n\n    if (\n      options.revalidateIfStale &&\n      query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))\n    ) {\n      void this.prefetchQuery(defaultedOptions)\n    }\n\n    return Promise.resolve(cachedData)\n  }\n\n  getQueriesData<\n    TQueryFnData = unknown,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(filters: TQueryFilters): Array<[QueryKey, TQueryFnData | undefined]> {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data as TQueryFnData | undefined\n      return [queryKey, data]\n    })\n  }\n\n  setQueryData<\n    TQueryFnData = unknown,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n    updater: Updater<\n      NoInfer<TInferredQueryFnData> | undefined,\n      NoInfer<TInferredQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): NoInfer<TInferredQueryFnData> | undefined {\n    const defaultedOptions = this.defaultQueryOptions<\n      any,\n      any,\n      unknown,\n      any,\n      QueryKey\n    >({ queryKey })\n\n    const query = this.#queryCache.get<TInferredQueryFnData>(\n      defaultedOptions.queryHash,\n    )\n    const prevData = query?.state.data\n    const data = functionalUpdate(updater, prevData)\n\n    if (data === undefined) {\n      return undefined\n    }\n\n    return this.#queryCache\n      .build(this, defaultedOptions)\n      .setData(data, { ...options, manual: true })\n  }\n\n  setQueriesData<\n    TQueryFnData,\n    TQueryFilters extends QueryFilters<any> = QueryFilters,\n  >(\n    filters: TQueryFilters,\n    updater: Updater<\n      NoInfer<TQueryFnData> | undefined,\n      NoInfer<TQueryFnData> | undefined\n    >,\n    options?: SetDataOptions,\n  ): Array<[QueryKey, TQueryFnData | undefined]> {\n    return notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map(({ queryKey }) => [\n          queryKey,\n          this.setQueryData<TQueryFnData>(queryKey, updater, options),\n        ]),\n    )\n  }\n\n  getQueryState<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TTaggedQueryKey extends QueryKey = QueryKey,\n    TInferredQueryFnData = InferDataFromTag<TQueryFnData, TTaggedQueryKey>,\n    TInferredError = InferErrorFromTag<TError, TTaggedQueryKey>,\n  >(\n    queryKey: TTaggedQueryKey,\n  ): QueryState<TInferredQueryFnData, TInferredError> | undefined {\n    const options = this.defaultQueryOptions({ queryKey })\n    return this.#queryCache.get<TInferredQueryFnData, TInferredError>(\n      options.queryHash,\n    )?.state\n  }\n\n  removeQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n  ): void {\n    const queryCache = this.#queryCache\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query)\n      })\n    })\n  }\n\n  resetQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    options?: ResetOptions,\n  ): Promise<void> {\n    const queryCache = this.#queryCache\n\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset()\n      })\n      return this.refetchQueries(\n        {\n          type: 'active',\n          ...filters,\n        },\n        options,\n      )\n    })\n  }\n\n  cancelQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: QueryFilters<TTaggedQueryKey>,\n    cancelOptions: CancelOptions = {},\n  ): Promise<void> {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions }\n\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .map((query) => query.cancel(defaultedCancelOptions)),\n    )\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  invalidateQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: InvalidateQueryFilters<TTaggedQueryKey>,\n    options: InvalidateOptions = {},\n  ): Promise<void> {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate()\n      })\n\n      if (filters?.refetchType === 'none') {\n        return Promise.resolve()\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? 'active',\n        },\n        options,\n      )\n    })\n  }\n\n  refetchQueries<TTaggedQueryKey extends QueryKey = QueryKey>(\n    filters?: RefetchQueryFilters<TTaggedQueryKey>,\n    options: RefetchOptions = {},\n  ): Promise<void> {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true,\n    }\n    const promises = notifyManager.batch(() =>\n      this.#queryCache\n        .findAll(filters)\n        .filter((query) => !query.isDisabled() && !query.isStatic())\n        .map((query) => {\n          let promise = query.fetch(undefined, fetchOptions)\n          if (!fetchOptions.throwOnError) {\n            promise = promise.catch(noop)\n          }\n          return query.state.fetchStatus === 'paused'\n            ? Promise.resolve()\n            : promise\n        }),\n    )\n\n    return Promise.all(promises).then(noop)\n  }\n\n  fetchQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options: FetchQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<TData> {\n    const defaultedOptions = this.defaultQueryOptions(options)\n\n    // https://github.com/tannerlinsley/react-query/issues/652\n    if (defaultedOptions.retry === undefined) {\n      defaultedOptions.retry = false\n    }\n\n    const query = this.#queryCache.build(this, defaultedOptions)\n\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query),\n    )\n      ? query.fetch(defaultedOptions)\n      : Promise.resolve(query.state.data as TData)\n  }\n\n  prefetchQuery<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n  >(\n    options: FetchQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  ): Promise<void> {\n    return this.fetchQuery(options).then(noop).catch(noop)\n  }\n\n  fetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n    return this.fetchQuery(options as any)\n  }\n\n  prefetchInfiniteQuery<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: FetchInfiniteQueryOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<void> {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop)\n  }\n\n  ensureInfiniteQueryData<\n    TQueryFnData,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = unknown,\n  >(\n    options: EnsureInfiniteQueryDataOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryKey,\n      TPageParam\n    >,\n  ): Promise<InfiniteData<TData, TPageParam>> {\n    options.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData,\n      TPageParam\n    >(options.pages)\n\n    return this.ensureQueryData(options as any)\n  }\n\n  resumePausedMutations(): Promise<unknown> {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations()\n    }\n    return Promise.resolve()\n  }\n\n  getQueryCache(): QueryCache {\n    return this.#queryCache\n  }\n\n  getMutationCache(): MutationCache {\n    return this.#mutationCache\n  }\n\n  getDefaultOptions(): DefaultOptions {\n    return this.#defaultOptions\n  }\n\n  setDefaultOptions(options: DefaultOptions): void {\n    this.#defaultOptions = options\n  }\n\n  setQueryDefaults<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n  >(\n    queryKey: QueryKey,\n    options: Partial<\n      OmitKeyof<\n        QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>,\n        'queryKey'\n      >\n    >,\n  ): void {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options,\n    })\n  }\n\n  getQueryDefaults(\n    queryKey: QueryKey,\n  ): OmitKeyof<QueryObserverOptions<any, any, any, any, any>, 'queryKey'> {\n    const defaults = [...this.#queryDefaults.values()]\n\n    const result: OmitKeyof<\n      QueryObserverOptions<any, any, any, any, any>,\n      'queryKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n    return result\n  }\n\n  setMutationDefaults<\n    TData = unknown,\n    TError = DefaultError,\n    TVariables = void,\n    TOnMutateResult = unknown,\n  >(\n    mutationKey: MutationKey,\n    options: OmitKeyof<\n      MutationObserverOptions<TData, TError, TVariables, TOnMutateResult>,\n      'mutationKey'\n    >,\n  ): void {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options,\n    })\n  }\n\n  getMutationDefaults(\n    mutationKey: MutationKey,\n  ): OmitKeyof<MutationObserverOptions<any, any, any, any>, 'mutationKey'> {\n    const defaults = [...this.#mutationDefaults.values()]\n\n    const result: OmitKeyof<\n      MutationObserverOptions<any, any, any, any>,\n      'mutationKey'\n    > = {}\n\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions)\n      }\n    })\n\n    return result\n  }\n\n  defaultQueryOptions<\n    TQueryFnData = unknown,\n    TError = DefaultError,\n    TData = TQueryFnData,\n    TQueryData = TQueryFnData,\n    TQueryKey extends QueryKey = QueryKey,\n    TPageParam = never,\n  >(\n    options:\n      | QueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey,\n          TPageParam\n        >\n      | DefaultedQueryObserverOptions<\n          TQueryFnData,\n          TError,\n          TData,\n          TQueryData,\n          TQueryKey\n        >,\n  ): DefaultedQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  > {\n    if (options._defaulted) {\n      return options as DefaultedQueryObserverOptions<\n        TQueryFnData,\n        TError,\n        TData,\n        TQueryData,\n        TQueryKey\n      >\n    }\n\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true,\n    }\n\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions,\n      )\n    }\n\n    // dependent default values\n    if (defaultedOptions.refetchOnReconnect === undefined) {\n      defaultedOptions.refetchOnReconnect =\n        defaultedOptions.networkMode !== 'always'\n    }\n    if (defaultedOptions.throwOnError === undefined) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense\n    }\n\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = 'offlineFirst'\n    }\n\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false\n    }\n\n    return defaultedOptions as DefaultedQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData,\n      TQueryKey\n    >\n  }\n\n  defaultMutationOptions<T extends MutationOptions<any, any, any, any>>(\n    options?: T,\n  ): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...(options?.mutationKey &&\n        this.getMutationDefaults(options.mutationKey)),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  clear(): void {\n    this.#queryCache.clear()\n    this.#mutationCache.clear()\n  }\n}\n", "/* istanbul ignore file */\n\nimport type { QueryClient } from './queryClient'\nimport type { DehydrateOptions, HydrateOptions } from './hydration'\nimport type { MutationState } from './mutation'\nimport type { FetchDirection, Query, QueryBehavior } from './query'\nimport type { RetryDelayValue, RetryValue } from './retryer'\nimport type { QueryFilters, QueryTypeFilter, SkipToken } from './utils'\nimport type { QueryCache } from './queryCache'\nimport type { MutationCache } from './mutationCache'\n\nexport type NonUndefinedGuard<T> = T extends undefined ? never : T\n\nexport type DistributiveOmit<\n  TObject,\n  TKey extends keyof TObject,\n> = TObject extends any ? Omit<TObject, TKey> : never\n\nexport type OmitKeyof<\n  TObject,\n  TKey extends TStrictly extends 'safely'\n    ?\n        | keyof TObject\n        | (string & Record<never, never>)\n        | (number & Record<never, never>)\n        | (symbol & Record<never, never>)\n    : keyof TObject,\n  TStrictly extends 'strictly' | 'safely' = 'strictly',\n> = Omit<TObject, TKey>\n\nexport type Override<TTargetA, TTargetB> = {\n  [AKey in keyof TTargetA]: AKey extends keyof TTargetB\n    ? TTargetB[AKey]\n    : TTargetA[AKey]\n}\n\nexport type NoInfer<T> = [T][T extends any ? 0 : never]\n\nexport interface Register {\n  // defaultError: Error\n  // queryMeta: Record<string, unknown>\n  // mutationMeta: Record<string, unknown>\n  // queryKey: ReadonlyArray<unknown>\n  // mutationKey: ReadonlyArray<unknown>\n}\n\nexport type DefaultError = Register extends {\n  defaultError: infer TError\n}\n  ? TError\n  : Error\n\nexport type QueryKey = Register extends {\n  queryKey: infer TQueryKey\n}\n  ? TQueryKey extends ReadonlyArray<unknown>\n    ? TQueryKey\n    : TQueryKey extends Array<unknown>\n      ? TQueryKey\n      : ReadonlyArray<unknown>\n  : ReadonlyArray<unknown>\n\nexport const dataTagSymbol = Symbol('dataTagSymbol')\nexport type dataTagSymbol = typeof dataTagSymbol\nexport const dataTagErrorSymbol = Symbol('dataTagErrorSymbol')\nexport type dataTagErrorSymbol = typeof dataTagErrorSymbol\nexport const unsetMarker = Symbol('unsetMarker')\nexport type UnsetMarker = typeof unsetMarker\nexport type AnyDataTag = {\n  [dataTagSymbol]: any\n  [dataTagErrorSymbol]: any\n}\nexport type DataTag<\n  TType,\n  TValue,\n  TError = UnsetMarker,\n> = TType extends AnyDataTag\n  ? TType\n  : TType & {\n      [dataTagSymbol]: TValue\n      [dataTagErrorSymbol]: TError\n    }\n\nexport type InferDataFromTag<TQueryFnData, TTaggedQueryKey extends QueryKey> =\n  TTaggedQueryKey extends DataTag<unknown, infer TaggedValue, unknown>\n    ? TaggedValue\n    : TQueryFnData\n\nexport type InferErrorFromTag<TError, TTaggedQueryKey extends QueryKey> =\n  TTaggedQueryKey extends DataTag<unknown, unknown, infer TaggedError>\n    ? TaggedError extends UnsetMarker\n      ? TError\n      : TaggedError\n    : TError\n\nexport type QueryFunction<\n  T = unknown,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> = (context: QueryFunctionContext<TQueryKey, TPageParam>) => T | Promise<T>\n\nexport type StaleTime = number | 'static'\n\nexport type StaleTimeFunction<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> =\n  | StaleTime\n  | ((query: Query<TQueryFnData, TError, TData, TQueryKey>) => StaleTime)\n\nexport type Enabled<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> =\n  | boolean\n  | ((query: Query<TQueryFnData, TError, TData, TQueryKey>) => boolean)\n\nexport type QueryPersister<\n  T = unknown,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> = [TPageParam] extends [never]\n  ? (\n      queryFn: QueryFunction<T, TQueryKey, never>,\n      context: QueryFunctionContext<TQueryKey>,\n      query: Query,\n    ) => T | Promise<T>\n  : (\n      queryFn: QueryFunction<T, TQueryKey, TPageParam>,\n      context: QueryFunctionContext<TQueryKey>,\n      query: Query,\n    ) => T | Promise<T>\n\nexport type QueryFunctionContext<\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> = [TPageParam] extends [never]\n  ? {\n      client: QueryClient\n      queryKey: TQueryKey\n      signal: AbortSignal\n      meta: QueryMeta | undefined\n      pageParam?: unknown\n      /**\n       * @deprecated\n       * if you want access to the direction, you can add it to the pageParam\n       */\n      direction?: unknown\n    }\n  : {\n      client: QueryClient\n      queryKey: TQueryKey\n      signal: AbortSignal\n      pageParam: TPageParam\n      /**\n       * @deprecated\n       * if you want access to the direction, you can add it to the pageParam\n       */\n      direction: FetchDirection\n      meta: QueryMeta | undefined\n    }\n\nexport type InitialDataFunction<T> = () => T | undefined\n\ntype NonFunctionGuard<T> = T extends Function ? never : T\n\nexport type PlaceholderDataFunction<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> = (\n  previousData: TQueryData | undefined,\n  previousQuery: Query<TQueryFnData, TError, TQueryData, TQueryKey> | undefined,\n) => TQueryData | undefined\n\nexport type QueriesPlaceholderDataFunction<TQueryData> = (\n  previousData: undefined,\n  previousQuery: undefined,\n) => TQueryData | undefined\n\nexport type QueryKeyHashFunction<TQueryKey extends QueryKey> = (\n  queryKey: TQueryKey,\n) => string\n\nexport type GetPreviousPageParamFunction<TPageParam, TQueryFnData = unknown> = (\n  firstPage: TQueryFnData,\n  allPages: Array<TQueryFnData>,\n  firstPageParam: TPageParam,\n  allPageParams: Array<TPageParam>,\n) => TPageParam | undefined | null\n\nexport type GetNextPageParamFunction<TPageParam, TQueryFnData = unknown> = (\n  lastPage: TQueryFnData,\n  allPages: Array<TQueryFnData>,\n  lastPageParam: TPageParam,\n  allPageParams: Array<TPageParam>,\n) => TPageParam | undefined | null\n\nexport interface InfiniteData<TData, TPageParam = unknown> {\n  pages: Array<TData>\n  pageParams: Array<TPageParam>\n}\n\nexport type QueryMeta = Register extends {\n  queryMeta: infer TQueryMeta\n}\n  ? TQueryMeta extends Record<string, unknown>\n    ? TQueryMeta\n    : Record<string, unknown>\n  : Record<string, unknown>\n\nexport type NetworkMode = 'online' | 'always' | 'offlineFirst'\n\nexport type NotifyOnChangeProps =\n  | Array<keyof InfiniteQueryObserverResult>\n  | 'all'\n  | undefined\n  | (() => Array<keyof InfiniteQueryObserverResult> | 'all' | undefined)\n\nexport interface QueryOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> {\n  /**\n   * If `false`, failed queries will not retry by default.\n   * If `true`, failed queries will retry infinitely., failureCount: num\n   * If set to an integer number, e.g. 3, failed queries will retry until the failed query count meets that number.\n   * If set to a function `(failureCount, error) => boolean` failed queries will retry until the function returns false.\n   */\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue<TError>\n  networkMode?: NetworkMode\n  /**\n   * The time in milliseconds that unused/inactive cache data remains in memory.\n   * When a query's cache becomes unused or inactive, that cache data will be garbage collected after this duration.\n   * When different garbage collection times are specified, the longest one will be used.\n   * Setting it to `Infinity` will disable garbage collection.\n   */\n  gcTime?: number\n  queryFn?: QueryFunction<TQueryFnData, TQueryKey, TPageParam> | SkipToken\n  persister?: QueryPersister<\n    NoInfer<TQueryFnData>,\n    NoInfer<TQueryKey>,\n    NoInfer<TPageParam>\n  >\n  queryHash?: string\n  queryKey?: TQueryKey\n  queryKeyHashFn?: QueryKeyHashFunction<TQueryKey>\n  initialData?: TData | InitialDataFunction<TData>\n  initialDataUpdatedAt?: number | (() => number | undefined)\n  behavior?: QueryBehavior<TQueryFnData, TError, TData, TQueryKey>\n  /**\n   * Set this to `false` to disable structural sharing between query results.\n   * Set this to a function which accepts the old and new data and returns resolved data of the same type to implement custom structural sharing logic.\n   * Defaults to `true`.\n   */\n  structuralSharing?:\n    | boolean\n    | ((oldData: unknown | undefined, newData: unknown) => unknown)\n  _defaulted?: boolean\n  /**\n   * Additional payload to be stored on each query.\n   * Use this property to pass information that can be used in other places.\n   */\n  meta?: QueryMeta\n  /**\n   * Maximum number of pages to store in the data of an infinite query.\n   */\n  maxPages?: number\n}\n\nexport interface InitialPageParam<TPageParam = unknown> {\n  initialPageParam: TPageParam\n}\n\nexport interface InfiniteQueryPageParamsOptions<\n  TQueryFnData = unknown,\n  TPageParam = unknown,\n> extends InitialPageParam<TPageParam> {\n  /**\n   * This function can be set to automatically get the previous cursor for infinite queries.\n   * The result will also be used to determine the value of `hasPreviousPage`.\n   */\n  getPreviousPageParam?: GetPreviousPageParamFunction<TPageParam, TQueryFnData>\n  /**\n   * This function can be set to automatically get the next cursor for infinite queries.\n   * The result will also be used to determine the value of `hasNextPage`.\n   */\n  getNextPageParam: GetNextPageParamFunction<TPageParam, TQueryFnData>\n}\n\nexport type ThrowOnError<\n  TQueryFnData,\n  TError,\n  TQueryData,\n  TQueryKey extends QueryKey,\n> =\n  | boolean\n  | ((\n      error: TError,\n      query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n    ) => boolean)\n\nexport interface QueryObserverOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> extends WithRequired<\n  QueryOptions<TQueryFnData, TError, TQueryData, TQueryKey, TPageParam>,\n  'queryKey'\n> {\n  /**\n   * Set this to `false` or a function that returns `false` to disable automatic refetching when the query mounts or changes query keys.\n   * To refetch the query, use the `refetch` method returned from the `useQuery` instance.\n   * Accepts a boolean or function that returns a boolean.\n   * Defaults to `true`.\n   */\n  enabled?: Enabled<TQueryFnData, TError, TQueryData, TQueryKey>\n  /**\n   * The time in milliseconds after data is considered stale.\n   * If set to `Infinity`, the data will never be considered stale.\n   * If set to a function, the function will be executed with the query to compute a `staleTime`.\n   * Defaults to `0`.\n   */\n  staleTime?: StaleTimeFunction<TQueryFnData, TError, TQueryData, TQueryKey>\n  /**\n   * If set to a number, the query will continuously refetch at this frequency in milliseconds.\n   * If set to a function, the function will be executed with the latest data and query to compute a frequency\n   * Defaults to `false`.\n   */\n  refetchInterval?:\n    | number\n    | false\n    | ((\n        query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n      ) => number | false | undefined)\n  /**\n   * If set to `true`, the query will continue to refetch while their tab/window is in the background.\n   * Defaults to `false`.\n   */\n  refetchIntervalInBackground?: boolean\n  /**\n   * If set to `true`, the query will refetch on window focus if the data is stale.\n   * If set to `false`, the query will not refetch on window focus.\n   * If set to `'always'`, the query will always refetch on window focus.\n   * If set to a function, the function will be executed with the latest data and query to compute the value.\n   * Defaults to `true`.\n   */\n  refetchOnWindowFocus?:\n    | boolean\n    | 'always'\n    | ((\n        query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n      ) => boolean | 'always')\n  /**\n   * If set to `true`, the query will refetch on reconnect if the data is stale.\n   * If set to `false`, the query will not refetch on reconnect.\n   * If set to `'always'`, the query will always refetch on reconnect.\n   * If set to a function, the function will be executed with the latest data and query to compute the value.\n   * Defaults to the value of `networkOnline` (`true`)\n   */\n  refetchOnReconnect?:\n    | boolean\n    | 'always'\n    | ((\n        query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n      ) => boolean | 'always')\n  /**\n   * If set to `true`, the query will refetch on mount if the data is stale.\n   * If set to `false`, will disable additional instances of a query to trigger background refetch.\n   * If set to `'always'`, the query will always refetch on mount.\n   * If set to a function, the function will be executed with the latest data and query to compute the value\n   * Defaults to `true`.\n   */\n  refetchOnMount?:\n    | boolean\n    | 'always'\n    | ((\n        query: Query<TQueryFnData, TError, TQueryData, TQueryKey>,\n      ) => boolean | 'always')\n  /**\n   * If set to `false`, the query will not be retried on mount if it contains an error.\n   * Defaults to `true`.\n   */\n  retryOnMount?: boolean\n  /**\n   * If set, the component will only re-render if any of the listed properties change.\n   * When set to `['data', 'error']`, the component will only re-render when the `data` or `error` properties change.\n   * When set to `'all'`, the component will re-render whenever a query is updated.\n   * When set to a function, the function will be executed to compute the list of properties.\n   * By default, access to properties will be tracked, and the component will only re-render when one of the tracked properties change.\n   */\n  notifyOnChangeProps?: NotifyOnChangeProps\n  /**\n   * Whether errors should be thrown instead of setting the `error` property.\n   * If set to `true` or `suspense` is `true`, all errors will be thrown to the error boundary.\n   * If set to `false` and `suspense` is `false`, errors are returned as state.\n   * If set to a function, it will be passed the error and the query, and it should return a boolean indicating whether to show the error in an error boundary (`true`) or return the error as state (`false`).\n   * Defaults to `false`.\n   */\n  throwOnError?: ThrowOnError<TQueryFnData, TError, TQueryData, TQueryKey>\n  /**\n   * This option can be used to transform or select a part of the data returned by the query function.\n   */\n  select?: (data: TQueryData) => TData\n  /**\n   * If set to `true`, the query will suspend when `status === 'pending'`\n   * and throw errors when `status === 'error'`.\n   * Defaults to `false`.\n   */\n  suspense?: boolean\n  /**\n   * If set, this value will be used as the placeholder data for this particular query observer while the query is still in the `loading` data and no initialData has been provided.\n   */\n  placeholderData?:\n    | NonFunctionGuard<TQueryData>\n    | PlaceholderDataFunction<\n        NonFunctionGuard<TQueryData>,\n        TError,\n        NonFunctionGuard<TQueryData>,\n        TQueryKey\n      >\n\n  _optimisticResults?: 'optimistic' | 'isRestoring'\n\n  /**\n   * Enable prefetching during rendering\n   */\n  experimental_prefetchInRender?: boolean\n}\n\nexport type WithRequired<TTarget, TKey extends keyof TTarget> = TTarget & {\n  [_ in TKey]: {}\n}\n\nexport type DefaultedQueryObserverOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> = WithRequired<\n  QueryObserverOptions<TQueryFnData, TError, TData, TQueryData, TQueryKey>,\n  'throwOnError' | 'refetchOnReconnect' | 'queryHash'\n>\n\nexport interface InfiniteQueryObserverOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = unknown,\n>\n  extends\n    QueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      InfiniteData<TQueryFnData, TPageParam>,\n      TQueryKey,\n      TPageParam\n    >,\n    InfiniteQueryPageParamsOptions<TQueryFnData, TPageParam> {}\n\nexport type DefaultedInfiniteQueryObserverOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = unknown,\n> = WithRequired<\n  InfiniteQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryKey,\n    TPageParam\n  >,\n  'throwOnError' | 'refetchOnReconnect' | 'queryHash'\n>\n\nexport interface FetchQueryOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> extends WithRequired<\n  QueryOptions<TQueryFnData, TError, TData, TQueryKey, TPageParam>,\n  'queryKey'\n> {\n  initialPageParam?: never\n  /**\n   * The time in milliseconds after data is considered stale.\n   * If the data is fresh it will be returned from the cache.\n   */\n  staleTime?: StaleTimeFunction<TQueryFnData, TError, TData, TQueryKey>\n}\n\nexport interface EnsureQueryDataOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = never,\n> extends FetchQueryOptions<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey,\n  TPageParam\n> {\n  revalidateIfStale?: boolean\n}\n\nexport type EnsureInfiniteQueryDataOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = unknown,\n> = FetchInfiniteQueryOptions<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryKey,\n  TPageParam\n> & {\n  revalidateIfStale?: boolean\n}\n\ntype FetchInfiniteQueryPages<TQueryFnData = unknown, TPageParam = unknown> =\n  | { pages?: never }\n  | {\n      pages: number\n      getNextPageParam: GetNextPageParamFunction<TPageParam, TQueryFnData>\n    }\n\nexport type FetchInfiniteQueryOptions<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n  TPageParam = unknown,\n> = Omit<\n  FetchQueryOptions<\n    TQueryFnData,\n    TError,\n    InfiniteData<TData, TPageParam>,\n    TQueryKey,\n    TPageParam\n  >,\n  'initialPageParam'\n> &\n  InitialPageParam<TPageParam> &\n  FetchInfiniteQueryPages<TQueryFnData, TPageParam>\n\nexport interface ResultOptions {\n  throwOnError?: boolean\n}\n\nexport interface RefetchOptions extends ResultOptions {\n  /**\n   * If set to `true`, a currently running request will be cancelled before a new request is made\n   *\n   * If set to `false`, no refetch will be made if there is already a request running.\n   *\n   * Defaults to `true`.\n   */\n  cancelRefetch?: boolean\n}\n\nexport interface InvalidateQueryFilters<\n  TQueryKey extends QueryKey = QueryKey,\n> extends QueryFilters<TQueryKey> {\n  refetchType?: QueryTypeFilter | 'none'\n}\n\nexport interface RefetchQueryFilters<\n  TQueryKey extends QueryKey = QueryKey,\n> extends QueryFilters<TQueryKey> {}\n\nexport interface InvalidateOptions extends RefetchOptions {}\nexport interface ResetOptions extends RefetchOptions {}\n\nexport interface FetchNextPageOptions extends ResultOptions {\n  /**\n   * If set to `true`, calling `fetchNextPage` repeatedly will invoke `queryFn` every time,\n   * whether the previous invocation has resolved or not. Also, the result from previous invocations will be ignored.\n   *\n   * If set to `false`, calling `fetchNextPage` repeatedly won't have any effect until the first invocation has resolved.\n   *\n   * Defaults to `true`.\n   */\n  cancelRefetch?: boolean\n}\n\nexport interface FetchPreviousPageOptions extends ResultOptions {\n  /**\n   * If set to `true`, calling `fetchPreviousPage` repeatedly will invoke `queryFn` every time,\n   * whether the previous invocation has resolved or not. Also, the result from previous invocations will be ignored.\n   *\n   * If set to `false`, calling `fetchPreviousPage` repeatedly won't have any effect until the first invocation has resolved.\n   *\n   * Defaults to `true`.\n   */\n  cancelRefetch?: boolean\n}\n\nexport type QueryStatus = 'pending' | 'error' | 'success'\nexport type FetchStatus = 'fetching' | 'paused' | 'idle'\n\nexport interface QueryObserverBaseResult<\n  TData = unknown,\n  TError = DefaultError,\n> {\n  /**\n   * The last successfully resolved data for the query.\n   */\n  data: TData | undefined\n  /**\n   * The timestamp for when the query most recently returned the `status` as `\"success\"`.\n   */\n  dataUpdatedAt: number\n  /**\n   * The error object for the query, if an error was thrown.\n   * - Defaults to `null`.\n   */\n  error: TError | null\n  /**\n   * The timestamp for when the query most recently returned the `status` as `\"error\"`.\n   */\n  errorUpdatedAt: number\n  /**\n   * The failure count for the query.\n   * - Incremented every time the query fails.\n   * - Reset to `0` when the query succeeds.\n   */\n  failureCount: number\n  /**\n   * The failure reason for the query retry.\n   * - Reset to `null` when the query succeeds.\n   */\n  failureReason: TError | null\n  /**\n   * The sum of all errors.\n   */\n  errorUpdateCount: number\n  /**\n   * A derived boolean from the `status` variable, provided for convenience.\n   * - `true` if the query attempt resulted in an error.\n   */\n  isError: boolean\n  /**\n   * Will be `true` if the query has been fetched.\n   */\n  isFetched: boolean\n  /**\n   * Will be `true` if the query has been fetched after the component mounted.\n   * - This property can be used to not show any previously cached data.\n   */\n  isFetchedAfterMount: boolean\n  /**\n   * A derived boolean from the `fetchStatus` variable, provided for convenience.\n   * - `true` whenever the `queryFn` is executing, which includes initial `pending` as well as background refetch.\n   */\n  isFetching: boolean\n  /**\n   * Is `true` whenever the first fetch for a query is in-flight.\n   * - Is the same as `isFetching && isPending`.\n   */\n  isLoading: boolean\n  /**\n   * Will be `pending` if there's no cached data and no query attempt was finished yet.\n   */\n  isPending: boolean\n  /**\n   * Will be `true` if the query failed while fetching for the first time.\n   */\n  isLoadingError: boolean\n  /**\n   * @deprecated `isInitialLoading` is being deprecated in favor of `isLoading`\n   * and will be removed in the next major version.\n   */\n  isInitialLoading: boolean\n  /**\n   * A derived boolean from the `fetchStatus` variable, provided for convenience.\n   * - The query wanted to fetch, but has been `paused`.\n   */\n  isPaused: boolean\n  /**\n   * Will be `true` if the data shown is the placeholder data.\n   */\n  isPlaceholderData: boolean\n  /**\n   * Will be `true` if the query failed while refetching.\n   */\n  isRefetchError: boolean\n  /**\n   * Is `true` whenever a background refetch is in-flight, which _does not_ include initial `pending`.\n   * - Is the same as `isFetching && !isPending`.\n   */\n  isRefetching: boolean\n  /**\n   * Will be `true` if the data in the cache is invalidated or if the data is older than the given `staleTime`.\n   */\n  isStale: boolean\n  /**\n   * A derived boolean from the `status` variable, provided for convenience.\n   * - `true` if the query has received a response with no errors and is ready to display its data.\n   */\n  isSuccess: boolean\n  /**\n   * `true` if this observer is enabled, `false` otherwise.\n   */\n  isEnabled: boolean\n  /**\n   * A function to manually refetch the query.\n   */\n  refetch: (\n    options?: RefetchOptions,\n  ) => Promise<QueryObserverResult<TData, TError>>\n  /**\n   * The status of the query.\n   * - Will be:\n   *   - `pending` if there's no cached data and no query attempt was finished yet.\n   *   - `error` if the query attempt resulted in an error.\n   *   - `success` if the query has received a response with no errors and is ready to display its data.\n   */\n  status: QueryStatus\n  /**\n   * The fetch status of the query.\n   * - `fetching`: Is `true` whenever the queryFn is executing, which includes initial `pending` as well as background refetch.\n   * - `paused`: The query wanted to fetch, but has been `paused`.\n   * - `idle`: The query is not fetching.\n   * - See [Network Mode](https://tanstack.com/query/latest/docs/framework/react/guides/network-mode) for more information.\n   */\n  fetchStatus: FetchStatus\n  /**\n   * A stable promise that will be resolved with the data of the query.\n   * Requires the `experimental_prefetchInRender` feature flag to be enabled.\n   * @example\n   *\n   * ### Enabling the feature flag\n   * ```ts\n   * const client = new QueryClient({\n   *   defaultOptions: {\n   *     queries: {\n   *       experimental_prefetchInRender: true,\n   *     },\n   *   },\n   * })\n   * ```\n   *\n   * ### Usage\n   * ```tsx\n   * import { useQuery } from '@tanstack/react-query'\n   * import React from 'react'\n   * import { fetchTodos, type Todo } from './api'\n   *\n   * function TodoList({ query }: { query: UseQueryResult<Todo[], Error> }) {\n   *   const data = React.use(query.promise)\n   *\n   *   return (\n   *     <ul>\n   *       {data.map(todo => (\n   *         <li key={todo.id}>{todo.title}</li>\n   *       ))}\n   *     </ul>\n   *   )\n   * }\n   *\n   * export function App() {\n   *   const query = useQuery({ queryKey: ['todos'], queryFn: fetchTodos })\n   *\n   *   return (\n   *     <>\n   *       <h1>Todos</h1>\n   *       <React.Suspense fallback={<div>Loading...</div>}>\n   *         <TodoList query={query} />\n   *       </React.Suspense>\n   *     </>\n   *   )\n   * }\n   * ```\n   */\n  promise: Promise<TData>\n}\n\nexport interface QueryObserverPendingResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: null\n  isError: false\n  isPending: true\n  isLoadingError: false\n  isRefetchError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'pending'\n}\n\nexport interface QueryObserverLoadingResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: null\n  isError: false\n  isPending: true\n  isLoading: true\n  isLoadingError: false\n  isRefetchError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'pending'\n}\n\nexport interface QueryObserverLoadingErrorResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: TError\n  isError: true\n  isPending: false\n  isLoading: false\n  isLoadingError: true\n  isRefetchError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'error'\n}\n\nexport interface QueryObserverRefetchErrorResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: TData\n  error: TError\n  isError: true\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: true\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'error'\n}\n\nexport interface QueryObserverSuccessResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: TData\n  error: null\n  isError: false\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: false\n  isSuccess: true\n  isPlaceholderData: false\n  status: 'success'\n}\n\nexport interface QueryObserverPlaceholderResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  data: TData\n  isError: false\n  error: null\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: false\n  isSuccess: true\n  isPlaceholderData: true\n  status: 'success'\n}\n\nexport type DefinedQueryObserverResult<\n  TData = unknown,\n  TError = DefaultError,\n> =\n  | QueryObserverRefetchErrorResult<TData, TError>\n  | QueryObserverSuccessResult<TData, TError>\n\nexport type QueryObserverResult<TData = unknown, TError = DefaultError> =\n  | DefinedQueryObserverResult<TData, TError>\n  | QueryObserverLoadingErrorResult<TData, TError>\n  | QueryObserverLoadingResult<TData, TError>\n  | QueryObserverPendingResult<TData, TError>\n  | QueryObserverPlaceholderResult<TData, TError>\n\nexport interface InfiniteQueryObserverBaseResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends QueryObserverBaseResult<TData, TError> {\n  /**\n   * This function allows you to fetch the next \"page\" of results.\n   */\n  fetchNextPage: (\n    options?: FetchNextPageOptions,\n  ) => Promise<InfiniteQueryObserverResult<TData, TError>>\n  /**\n   * This function allows you to fetch the previous \"page\" of results.\n   */\n  fetchPreviousPage: (\n    options?: FetchPreviousPageOptions,\n  ) => Promise<InfiniteQueryObserverResult<TData, TError>>\n  /**\n   * Will be `true` if there is a next page to be fetched (known via the `getNextPageParam` option).\n   */\n  hasNextPage: boolean\n  /**\n   * Will be `true` if there is a previous page to be fetched (known via the `getPreviousPageParam` option).\n   */\n  hasPreviousPage: boolean\n  /**\n   * Will be `true` if the query failed while fetching the next page.\n   */\n  isFetchNextPageError: boolean\n  /**\n   * Will be `true` while fetching the next page with `fetchNextPage`.\n   */\n  isFetchingNextPage: boolean\n  /**\n   * Will be `true` if the query failed while fetching the previous page.\n   */\n  isFetchPreviousPageError: boolean\n  /**\n   * Will be `true` while fetching the previous page with `fetchPreviousPage`.\n   */\n  isFetchingPreviousPage: boolean\n}\n\nexport interface InfiniteQueryObserverPendingResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: null\n  isError: false\n  isPending: true\n  isLoadingError: false\n  isRefetchError: false\n  isFetchNextPageError: false\n  isFetchPreviousPageError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'pending'\n}\n\nexport interface InfiniteQueryObserverLoadingResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: null\n  isError: false\n  isPending: true\n  isLoading: true\n  isLoadingError: false\n  isRefetchError: false\n  isFetchNextPageError: false\n  isFetchPreviousPageError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'pending'\n}\n\nexport interface InfiniteQueryObserverLoadingErrorResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: undefined\n  error: TError\n  isError: true\n  isPending: false\n  isLoading: false\n  isLoadingError: true\n  isRefetchError: false\n  isFetchNextPageError: false\n  isFetchPreviousPageError: false\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'error'\n}\n\nexport interface InfiniteQueryObserverRefetchErrorResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: TData\n  error: TError\n  isError: true\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: true\n  isSuccess: false\n  isPlaceholderData: false\n  status: 'error'\n}\n\nexport interface InfiniteQueryObserverSuccessResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: TData\n  error: null\n  isError: false\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: false\n  isFetchNextPageError: false\n  isFetchPreviousPageError: false\n  isSuccess: true\n  isPlaceholderData: false\n  status: 'success'\n}\n\nexport interface InfiniteQueryObserverPlaceholderResult<\n  TData = unknown,\n  TError = DefaultError,\n> extends InfiniteQueryObserverBaseResult<TData, TError> {\n  data: TData\n  isError: false\n  error: null\n  isPending: false\n  isLoading: false\n  isLoadingError: false\n  isRefetchError: false\n  isSuccess: true\n  isPlaceholderData: true\n  isFetchNextPageError: false\n  isFetchPreviousPageError: false\n  status: 'success'\n}\n\nexport type DefinedInfiniteQueryObserverResult<\n  TData = unknown,\n  TError = DefaultError,\n> =\n  | InfiniteQueryObserverRefetchErrorResult<TData, TError>\n  | InfiniteQueryObserverSuccessResult<TData, TError>\n\nexport type InfiniteQueryObserverResult<\n  TData = unknown,\n  TError = DefaultError,\n> =\n  | DefinedInfiniteQueryObserverResult<TData, TError>\n  | InfiniteQueryObserverLoadingErrorResult<TData, TError>\n  | InfiniteQueryObserverLoadingResult<TData, TError>\n  | InfiniteQueryObserverPendingResult<TData, TError>\n  | InfiniteQueryObserverPlaceholderResult<TData, TError>\n\nexport type MutationKey = Register extends {\n  mutationKey: infer TMutationKey\n}\n  ? TMutationKey extends ReadonlyArray<unknown>\n    ? TMutationKey\n    : TMutationKey extends Array<unknown>\n      ? TMutationKey\n      : ReadonlyArray<unknown>\n  : ReadonlyArray<unknown>\n\nexport type MutationStatus = 'idle' | 'pending' | 'success' | 'error'\n\nexport type MutationScope = {\n  id: string\n}\n\nexport type MutationMeta = Register extends {\n  mutationMeta: infer TMutationMeta\n}\n  ? TMutationMeta extends Record<string, unknown>\n    ? TMutationMeta\n    : Record<string, unknown>\n  : Record<string, unknown>\n\nexport type MutationFunctionContext = {\n  client: QueryClient\n  meta: MutationMeta | undefined\n  mutationKey?: MutationKey\n}\n\nexport type MutationFunction<TData = unknown, TVariables = unknown> = (\n  variables: TVariables,\n  context: MutationFunctionContext,\n) => Promise<TData>\n\nexport interface MutationOptions<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> {\n  mutationFn?: MutationFunction<TData, TVariables>\n  mutationKey?: MutationKey\n  onMutate?: (\n    variables: TVariables,\n    context: MutationFunctionContext,\n  ) => Promise<TOnMutateResult> | TOnMutateResult\n  onSuccess?: (\n    data: TData,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onError?: (\n    error: TError,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult | undefined,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  onSettled?: (\n    data: TData | undefined,\n    error: TError | null,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult | undefined,\n    context: MutationFunctionContext,\n  ) => Promise<unknown> | unknown\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue<TError>\n  networkMode?: NetworkMode\n  gcTime?: number\n  _defaulted?: boolean\n  meta?: MutationMeta\n  scope?: MutationScope\n}\n\nexport interface MutationObserverOptions<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationOptions<TData, TError, TVariables, TOnMutateResult> {\n  throwOnError?: boolean | ((error: TError) => boolean)\n}\n\nexport interface MutateOptions<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> {\n  onSuccess?: (\n    data: TData,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult | undefined,\n    context: MutationFunctionContext,\n  ) => void\n  onError?: (\n    error: TError,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult | undefined,\n    context: MutationFunctionContext,\n  ) => void\n  onSettled?: (\n    data: TData | undefined,\n    error: TError | null,\n    variables: TVariables,\n    onMutateResult: TOnMutateResult | undefined,\n    context: MutationFunctionContext,\n  ) => void\n}\n\nexport type MutateFunction<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> = (\n  variables: TVariables,\n  options?: MutateOptions<TData, TError, TVariables, TOnMutateResult>,\n) => Promise<TData>\n\nexport interface MutationObserverBaseResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationState<TData, TError, TVariables, TOnMutateResult> {\n  /**\n   * The last successfully resolved data for the mutation.\n   */\n  data: TData | undefined\n  /**\n   * The variables object passed to the `mutationFn`.\n   */\n  variables: TVariables | undefined\n  /**\n   * The error object for the mutation, if an error was encountered.\n   * - Defaults to `null`.\n   */\n  error: TError | null\n  /**\n   * A boolean variable derived from `status`.\n   * - `true` if the last mutation attempt resulted in an error.\n   */\n  isError: boolean\n  /**\n   * A boolean variable derived from `status`.\n   * - `true` if the mutation is in its initial state prior to executing.\n   */\n  isIdle: boolean\n  /**\n   * A boolean variable derived from `status`.\n   * - `true` if the mutation is currently executing.\n   */\n  isPending: boolean\n  /**\n   * A boolean variable derived from `status`.\n   * - `true` if the last mutation attempt was successful.\n   */\n  isSuccess: boolean\n  /**\n   * The status of the mutation.\n   * - Will be:\n   *   - `idle` initial status prior to the mutation function executing.\n   *   - `pending` if the mutation is currently executing.\n   *   - `error` if the last mutation attempt resulted in an error.\n   *   - `success` if the last mutation attempt was successful.\n   */\n  status: MutationStatus\n  /**\n   * The mutation function you can call with variables to trigger the mutation and optionally hooks on additional callback options.\n   * @param variables - The variables object to pass to the `mutationFn`.\n   * @param options.onSuccess - This function will fire when the mutation is successful and will be passed the mutation's result.\n   * @param options.onError - This function will fire if the mutation encounters an error and will be passed the error.\n   * @param options.onSettled - This function will fire when the mutation is either successfully fetched or encounters an error and be passed either the data or error.\n   * @remarks\n   * - If you make multiple requests, `onSuccess` will fire only after the latest call you've made.\n   * - All the callback functions (`onSuccess`, `onError`, `onSettled`) are void functions, and the returned value will be ignored.\n   */\n  mutate: MutateFunction<TData, TError, TVariables, TOnMutateResult>\n  /**\n   * A function to clean the mutation internal state (i.e., it resets the mutation to its initial state).\n   */\n  reset: () => void\n}\n\nexport interface MutationObserverIdleResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationObserverBaseResult<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult\n> {\n  data: undefined\n  variables: undefined\n  error: null\n  isError: false\n  isIdle: true\n  isPending: false\n  isSuccess: false\n  status: 'idle'\n}\n\nexport interface MutationObserverLoadingResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationObserverBaseResult<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult\n> {\n  data: undefined\n  variables: TVariables\n  error: null\n  isError: false\n  isIdle: false\n  isPending: true\n  isSuccess: false\n  status: 'pending'\n}\n\nexport interface MutationObserverErrorResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationObserverBaseResult<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult\n> {\n  data: undefined\n  error: TError\n  variables: TVariables\n  isError: true\n  isIdle: false\n  isPending: false\n  isSuccess: false\n  status: 'error'\n}\n\nexport interface MutationObserverSuccessResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> extends MutationObserverBaseResult<\n  TData,\n  TError,\n  TVariables,\n  TOnMutateResult\n> {\n  data: TData\n  error: null\n  variables: TVariables\n  isError: false\n  isIdle: false\n  isPending: false\n  isSuccess: true\n  status: 'success'\n}\n\nexport type MutationObserverResult<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n> =\n  | MutationObserverIdleResult<TData, TError, TVariables, TOnMutateResult>\n  | MutationObserverLoadingResult<TData, TError, TVariables, TOnMutateResult>\n  | MutationObserverErrorResult<TData, TError, TVariables, TOnMutateResult>\n  | MutationObserverSuccessResult<TData, TError, TVariables, TOnMutateResult>\n\nexport interface QueryClientConfig {\n  queryCache?: QueryCache\n  mutationCache?: MutationCache\n  defaultOptions?: DefaultOptions\n}\n\nexport interface DefaultOptions<TError = DefaultError> {\n  queries?: OmitKeyof<\n    QueryObserverOptions<unknown, TError>,\n    'suspense' | 'queryKey'\n  >\n  mutations?: MutationObserverOptions<unknown, TError, unknown, unknown>\n  hydrate?: HydrateOptions['defaultOptions']\n  dehydrate?: DehydrateOptions\n}\n\nexport interface CancelOptions {\n  revert?: boolean\n  silent?: boolean\n}\n\nexport interface SetDataOptions {\n  updatedAt?: number\n}\n\nexport type NotifyEventType =\n  | 'added'\n  | 'removed'\n  | 'updated'\n  | 'observerAdded'\n  | 'observerRemoved'\n  | 'observerResultsUpdated'\n  | 'observerOptionsUpdated'\n\nexport interface NotifyEvent {\n  type: NotifyEventType\n}\n", "'use client'\nimport * as React from 'react'\n\nimport {\n  QueriesObserver,\n  QueryObserver,\n  noop,\n  notifyManager,\n} from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport { useIsRestoring } from './IsRestoringProvider'\nimport { useQueryErrorResetBoundary } from './QueryErrorResetBoundary'\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary,\n} from './errorBoundaryUtils'\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch,\n} from './suspense'\nimport type {\n  DefinedUseQueryResult,\n  UseQueryOptions,\n  UseQueryResult,\n} from './types'\nimport type {\n  DefaultError,\n  OmitKeyof,\n  QueriesObserverOptions,\n  QueriesPlaceholderDataFunction,\n  QueryClient,\n  QueryFunction,\n  QueryKey,\n  QueryObserverOptions,\n  ThrowOnError,\n} from '@tanstack/query-core'\n\n// This defines the `UseQueryOptions` that are accepted in `QueriesOptions` & `GetOptions`.\n// `placeholderData` function always gets undefined passed\ntype UseQueryOptionsForUseQueries<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n> = OmitKeyof<\n  UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  'placeholderData' | 'subscribed'\n> & {\n  placeholderData?: TQueryFnData | QueriesPlaceholderDataFunction<TQueryFnData>\n}\n\n// Avoid TS depth-limit error in case of large array literal\ntype MAXIMUM_DEPTH = 20\n\n// Widen the type of the symbol to enable type inference even if skipToken is not immutable.\ntype SkipTokenForUseQueries = symbol\n\ntype GetUseQueryOptionsForUseQueries<T> =\n  // Part 1: responsible for applying explicit type parameter to function arguments, if object { queryFnData: TQueryFnData, error: TError, data: TData }\n  T extends {\n    queryFnData: infer TQueryFnData\n    error?: infer TError\n    data: infer TData\n  }\n    ? UseQueryOptionsForUseQueries<TQueryFnData, TError, TData>\n    : T extends { queryFnData: infer TQueryFnData; error?: infer TError }\n      ? UseQueryOptionsForUseQueries<TQueryFnData, TError>\n      : T extends { data: infer TData; error?: infer TError }\n        ? UseQueryOptionsForUseQueries<unknown, TError, TData>\n        : // Part 2: responsible for applying explicit type parameter to function arguments, if tuple [TQueryFnData, TError, TData]\n          T extends [infer TQueryFnData, infer TError, infer TData]\n          ? UseQueryOptionsForUseQueries<TQueryFnData, TError, TData>\n          : T extends [infer TQueryFnData, infer TError]\n            ? UseQueryOptionsForUseQueries<TQueryFnData, TError>\n            : T extends [infer TQueryFnData]\n              ? UseQueryOptionsForUseQueries<TQueryFnData>\n              : // Part 3: responsible for inferring and enforcing type if no explicit parameter was provided\n                T extends {\n                    queryFn?:\n                      | QueryFunction<infer TQueryFnData, infer TQueryKey>\n                      | SkipTokenForUseQueries\n                    select?: (data: any) => infer TData\n                    throwOnError?: ThrowOnError<any, infer TError, any, any>\n                  }\n                ? UseQueryOptionsForUseQueries<\n                    TQueryFnData,\n                    unknown extends TError ? DefaultError : TError,\n                    unknown extends TData ? TQueryFnData : TData,\n                    TQueryKey\n                  >\n                : // Fallback\n                  UseQueryOptionsForUseQueries\n\n// A defined initialData setting should return a DefinedUseQueryResult rather than UseQueryResult\ntype GetDefinedOrUndefinedQueryResult<T, TData, TError = unknown> = T extends {\n  initialData?: infer TInitialData\n}\n  ? unknown extends TInitialData\n    ? UseQueryResult<TData, TError>\n    : TInitialData extends TData\n      ? DefinedUseQueryResult<TData, TError>\n      : TInitialData extends () => infer TInitialDataResult\n        ? unknown extends TInitialDataResult\n          ? UseQueryResult<TData, TError>\n          : TInitialDataResult extends TData\n            ? DefinedUseQueryResult<TData, TError>\n            : UseQueryResult<TData, TError>\n        : UseQueryResult<TData, TError>\n  : UseQueryResult<TData, TError>\n\ntype GetUseQueryResult<T> =\n  // Part 1: responsible for mapping explicit type parameter to function result, if object\n  T extends { queryFnData: any; error?: infer TError; data: infer TData }\n    ? GetDefinedOrUndefinedQueryResult<T, TData, TError>\n    : T extends { queryFnData: infer TQueryFnData; error?: infer TError }\n      ? GetDefinedOrUndefinedQueryResult<T, TQueryFnData, TError>\n      : T extends { data: infer TData; error?: infer TError }\n        ? GetDefinedOrUndefinedQueryResult<T, TData, TError>\n        : // Part 2: responsible for mapping explicit type parameter to function result, if tuple\n          T extends [any, infer TError, infer TData]\n          ? GetDefinedOrUndefinedQueryResult<T, TData, TError>\n          : T extends [infer TQueryFnData, infer TError]\n            ? GetDefinedOrUndefinedQueryResult<T, TQueryFnData, TError>\n            : T extends [infer TQueryFnData]\n              ? GetDefinedOrUndefinedQueryResult<T, TQueryFnData>\n              : // Part 3: responsible for mapping inferred type to results, if no explicit parameter was provided\n                T extends {\n                    queryFn?:\n                      | QueryFunction<infer TQueryFnData, any>\n                      | SkipTokenForUseQueries\n                    select?: (data: any) => infer TData\n                    throwOnError?: ThrowOnError<any, infer TError, any, any>\n                  }\n                ? GetDefinedOrUndefinedQueryResult<\n                    T,\n                    unknown extends TData ? TQueryFnData : TData,\n                    unknown extends TError ? DefaultError : TError\n                  >\n                : // Fallback\n                  UseQueryResult\n\n/**\n * QueriesOptions reducer recursively unwraps function arguments to infer/enforce type param\n */\nexport type QueriesOptions<\n  T extends Array<any>,\n  TResults extends Array<any> = [],\n  TDepth extends ReadonlyArray<number> = [],\n> = TDepth['length'] extends MAXIMUM_DEPTH\n  ? Array<UseQueryOptionsForUseQueries>\n  : T extends []\n    ? []\n    : T extends [infer Head]\n      ? [...TResults, GetUseQueryOptionsForUseQueries<Head>]\n      : T extends [infer Head, ...infer Tails]\n        ? QueriesOptions<\n            [...Tails],\n            [...TResults, GetUseQueryOptionsForUseQueries<Head>],\n            [...TDepth, 1]\n          >\n        : ReadonlyArray<unknown> extends T\n          ? T\n          : // If T is *some* array but we couldn't assign unknown[] to it, then it must hold some known/homogenous type!\n            // use this to infer the param types in the case of Array.map() argument\n            T extends Array<\n                UseQueryOptionsForUseQueries<\n                  infer TQueryFnData,\n                  infer TError,\n                  infer TData,\n                  infer TQueryKey\n                >\n              >\n            ? Array<\n                UseQueryOptionsForUseQueries<\n                  TQueryFnData,\n                  TError,\n                  TData,\n                  TQueryKey\n                >\n              >\n            : // Fallback\n              Array<UseQueryOptionsForUseQueries>\n\n/**\n * QueriesResults reducer recursively maps type param to results\n */\nexport type QueriesResults<\n  T extends Array<any>,\n  TResults extends Array<any> = [],\n  TDepth extends ReadonlyArray<number> = [],\n> = TDepth['length'] extends MAXIMUM_DEPTH\n  ? Array<UseQueryResult>\n  : T extends []\n    ? []\n    : T extends [infer Head]\n      ? [...TResults, GetUseQueryResult<Head>]\n      : T extends [infer Head, ...infer Tails]\n        ? QueriesResults<\n            [...Tails],\n            [...TResults, GetUseQueryResult<Head>],\n            [...TDepth, 1]\n          >\n        : { [K in keyof T]: GetUseQueryResult<T[K]> }\n\nexport function useQueries<\n  T extends Array<any>,\n  TCombinedResult = QueriesResults<T>,\n>(\n  {\n    queries,\n    ...options\n  }: {\n    queries:\n      | readonly [...QueriesOptions<T>]\n      | readonly [...{ [K in keyof T]: GetUseQueryOptionsForUseQueries<T[K]> }]\n    combine?: (result: QueriesResults<T>) => TCombinedResult\n    subscribed?: boolean\n  },\n  queryClient?: QueryClient,\n): TCombinedResult {\n  const client = useQueryClient(queryClient)\n  const isRestoring = useIsRestoring()\n  const errorResetBoundary = useQueryErrorResetBoundary()\n\n  const defaultedQueries = React.useMemo(\n    () =>\n      queries.map((opts) => {\n        const defaultedOptions = client.defaultQueryOptions(\n          opts as QueryObserverOptions,\n        )\n\n        // Make sure the results are already in fetching state before subscribing or updating options\n        defaultedOptions._optimisticResults = isRestoring\n          ? 'isRestoring'\n          : 'optimistic'\n\n        return defaultedOptions\n      }),\n    [queries, client, isRestoring],\n  )\n\n  defaultedQueries.forEach((queryOptions) => {\n    ensureSuspenseTimers(queryOptions)\n    const query = client.getQueryCache().get(queryOptions.queryHash)\n    ensurePreventErrorBoundaryRetry(queryOptions, errorResetBoundary, query)\n  })\n\n  useClearResetErrorBoundary(errorResetBoundary)\n\n  const [observer] = React.useState(\n    () =>\n      new QueriesObserver<TCombinedResult>(\n        client,\n        defaultedQueries,\n        options as QueriesObserverOptions<TCombinedResult>,\n      ),\n  )\n\n  // note: this must be called before useSyncExternalStore\n  const [optimisticResult, getCombinedResult, trackResult] =\n    observer.getOptimisticResult(\n      defaultedQueries,\n      (options as QueriesObserverOptions<TCombinedResult>).combine,\n    )\n\n  const shouldSubscribe = !isRestoring && options.subscribed !== false\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        shouldSubscribe\n          ? observer.subscribe(notifyManager.batchCalls(onStoreChange))\n          : noop,\n      [observer, shouldSubscribe],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  React.useEffect(() => {\n    observer.setQueries(\n      defaultedQueries,\n      options as QueriesObserverOptions<TCombinedResult>,\n    )\n  }, [defaultedQueries, options, observer])\n\n  const shouldAtLeastOneSuspend = optimisticResult.some((result, index) =>\n    shouldSuspend(defaultedQueries[index], result),\n  )\n\n  const suspensePromises = shouldAtLeastOneSuspend\n    ? optimisticResult.flatMap((result, index) => {\n        const opts = defaultedQueries[index]\n\n        if (opts) {\n          const queryObserver = new QueryObserver(client, opts)\n          if (shouldSuspend(opts, result)) {\n            return fetchOptimistic(opts, queryObserver, errorResetBoundary)\n          } else if (willFetch(result, isRestoring)) {\n            void fetchOptimistic(opts, queryObserver, errorResetBoundary)\n          }\n        }\n        return []\n      })\n    : []\n\n  if (suspensePromises.length > 0) {\n    throw Promise.all(suspensePromises)\n  }\n  const firstSingleResultWhichShouldThrow = optimisticResult.find(\n    (result, index) => {\n      const query = defaultedQueries[index]\n      return (\n        query &&\n        getHasError({\n          result,\n          errorResetBoundary,\n          throwOnError: query.throwOnError,\n          query: client.getQueryCache().get(query.queryHash),\n          suspense: query.suspense,\n        })\n      )\n    },\n  )\n\n  if (firstSingleResultWhichShouldThrow?.error) {\n    throw firstSingleResultWhichShouldThrow.error\n  }\n\n  return getCombinedResult(trackResult())\n}\n", "'use client'\nimport * as React from 'react'\n\nimport type { QueryClient } from '@tanstack/query-core'\n\nexport const QueryClientContext = React.createContext<QueryClient | undefined>(\n  undefined,\n)\n\nexport const useQueryClient = (queryClient?: QueryClient) => {\n  const client = React.useContext(QueryClientContext)\n\n  if (queryClient) {\n    return queryClient\n  }\n\n  if (!client) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one')\n  }\n\n  return client\n}\n\nexport type QueryClientProviderProps = {\n  client: QueryClient\n  children?: React.ReactNode\n}\n\nexport const QueryClientProvider = ({\n  client,\n  children,\n}: QueryClientProviderProps): React.JSX.Element => {\n  React.useEffect(() => {\n    client.mount()\n    return () => {\n      client.unmount()\n    }\n  }, [client])\n\n  return (\n    <QueryClientContext.Provider value={client}>\n      {children}\n    </QueryClientContext.Provider>\n  )\n}\n", "'use client'\nimport * as React from 'react'\n\nconst IsRestoringContext = React.createContext(false)\n\nexport const useIsRestoring = () => React.useContext(IsRestoringContext)\nexport const IsRestoringProvider = IsRestoringContext.Provider\n", "'use client'\nimport * as React from 'react'\n\n// CONTEXT\nexport type QueryErrorResetFunction = () => void\nexport type QueryErrorIsResetFunction = () => boolean\nexport type QueryErrorClearResetFunction = () => void\n\nexport interface QueryErrorResetBoundaryValue {\n  clearReset: QueryErrorClearResetFunction\n  isReset: QueryErrorIsResetFunction\n  reset: QueryErrorResetFunction\n}\n\nfunction createValue(): QueryErrorResetBoundaryValue {\n  let isReset = false\n  return {\n    clearReset: () => {\n      isReset = false\n    },\n    reset: () => {\n      isReset = true\n    },\n    isReset: () => {\n      return isReset\n    },\n  }\n}\n\nconst QueryErrorResetBoundaryContext = React.createContext(createValue())\n\n// HOOK\n\nexport const useQueryErrorResetBoundary = () =>\n  React.useContext(QueryErrorResetBoundaryContext)\n\n// COMPONENT\n\nexport type QueryErrorResetBoundaryFunction = (\n  value: QueryErrorResetBoundaryValue,\n) => React.ReactNode\n\nexport interface QueryErrorResetBoundaryProps {\n  children: QueryErrorResetBoundaryFunction | React.ReactNode\n}\n\nexport const QueryErrorResetBoundary = ({\n  children,\n}: QueryErrorResetBoundaryProps) => {\n  const [value] = React.useState(() => createValue())\n  return (\n    <QueryErrorResetBoundaryContext.Provider value={value}>\n      {typeof children === 'function' ? children(value) : children}\n    </QueryErrorResetBoundaryContext.Provider>\n  )\n}\n", "'use client'\nimport * as React from 'react'\nimport { shouldThrowError } from '@tanstack/query-core'\nimport type {\n  DefaultedQueryObserverOptions,\n  Query,\n  QueryKey,\n  QueryObserverResult,\n  ThrowOnError,\n} from '@tanstack/query-core'\nimport type { QueryErrorResetBoundaryValue } from './QueryErrorResetBoundary'\n\nexport const ensurePreventErrorBoundaryRetry = <\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryData,\n  TQueryKey extends QueryKey,\n>(\n  options: DefaultedQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  >,\n  errorResetBoundary: QueryErrorResetBoundaryValue,\n  query: Query<TQueryFnData, TError, TQueryData, TQueryKey> | undefined,\n) => {\n  const throwOnError =\n    query?.state.error && typeof options.throwOnError === 'function'\n      ? shouldThrowError(options.throwOnError, [query.state.error, query])\n      : options.throwOnError\n\n  if (\n    options.suspense ||\n    options.experimental_prefetchInRender ||\n    throwOnError\n  ) {\n    // Prevent retrying failed query if the error boundary has not been reset yet\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false\n    }\n  }\n}\n\nexport const useClearResetErrorBoundary = (\n  errorResetBoundary: QueryErrorResetBoundaryValue,\n) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset()\n  }, [errorResetBoundary])\n}\n\nexport const getHasError = <\n  TData,\n  TError,\n  TQueryFnData,\n  TQueryData,\n  TQueryKey extends QueryKey,\n>({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense,\n}: {\n  result: QueryObserverResult<TData, TError>\n  errorResetBoundary: QueryErrorResetBoundaryValue\n  throwOnError: ThrowOnError<TQueryFnData, TError, TQueryData, TQueryKey>\n  query: Query<TQueryFnData, TError, TQueryData, TQueryKey> | undefined\n  suspense: boolean | undefined\n}) => {\n  return (\n    result.isError &&\n    !errorResetBoundary.isReset() &&\n    !result.isFetching &&\n    query &&\n    ((suspense && result.data === undefined) ||\n      shouldThrowError(throwOnError, [result.error, query]))\n  )\n}\n", "import type {\n  DefaultError,\n  DefaultedQueryObserverOptions,\n  Query,\n  QueryKey,\n  QueryObserver,\n  QueryObserverResult,\n} from '@tanstack/query-core'\nimport type { QueryErrorResetBoundaryValue } from './QueryErrorResetBoundary'\n\nexport const defaultThrowOnError = <\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  _error: TError,\n  query: Query<TQueryFnData, TError, TData, TQueryKey>,\n) => query.state.data === undefined\n\nexport const ensureSuspenseTimers = (\n  defaultedOptions: DefaultedQueryObserverOptions<any, any, any, any, any>,\n) => {\n  if (defaultedOptions.suspense) {\n    // Handle staleTime to ensure minimum 1000ms in Suspense mode\n    // This prevents unnecessary refetching when components remount after suspending\n    const MIN_SUSPENSE_TIME_MS = 1000\n\n    const clamp = (value: number | 'static' | undefined) =>\n      value === 'static'\n        ? value\n        : Math.max(value ?? MIN_SUSPENSE_TIME_MS, MIN_SUSPENSE_TIME_MS)\n\n    const originalStaleTime = defaultedOptions.staleTime\n    defaultedOptions.staleTime =\n      typeof originalStaleTime === 'function'\n        ? (...args) => clamp(originalStaleTime(...args))\n        : clamp(originalStaleTime)\n\n    if (typeof defaultedOptions.gcTime === 'number') {\n      defaultedOptions.gcTime = Math.max(\n        defaultedOptions.gcTime,\n        MIN_SUSPENSE_TIME_MS,\n      )\n    }\n  }\n}\n\nexport const willFetch = (\n  result: QueryObserverResult<any, any>,\n  isRestoring: boolean,\n) => result.isLoading && result.isFetching && !isRestoring\n\nexport const shouldSuspend = (\n  defaultedOptions:\n    | DefaultedQueryObserverOptions<any, any, any, any, any>\n    | undefined,\n  result: QueryObserverResult<any, any>,\n) => defaultedOptions?.suspense && result.isPending\n\nexport const fetchOptimistic = <\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryData,\n  TQueryKey extends QueryKey,\n>(\n  defaultedOptions: DefaultedQueryObserverOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  >,\n  observer: QueryObserver<TQueryFnData, TError, TData, TQueryData, TQueryKey>,\n  errorResetBoundary: QueryErrorResetBoundaryValue,\n) =>\n  observer.fetchOptimistic(defaultedOptions).catch(() => {\n    errorResetBoundary.clearReset()\n  })\n", "'use client'\nimport * as React from 'react'\n\nimport { isServer, noop, notifyManager } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport { useQueryErrorResetBoundary } from './QueryErrorResetBoundary'\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary,\n} from './errorBoundaryUtils'\nimport { useIsRestoring } from './IsRestoringProvider'\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch,\n} from './suspense'\nimport type {\n  QueryClient,\n  QueryKey,\n  QueryObserver,\n  QueryObserverResult,\n} from '@tanstack/query-core'\nimport type { UseBaseQueryOptions } from './types'\n\nexport function useBaseQuery<\n  TQueryFnData,\n  TError,\n  TData,\n  TQueryData,\n  TQueryKey extends QueryKey,\n>(\n  options: UseBaseQueryOptions<\n    TQueryFnData,\n    TError,\n    TData,\n    TQueryData,\n    TQueryKey\n  >,\n  Observer: typeof QueryObserver,\n  queryClient?: QueryClient,\n): QueryObserverResult<TData, TError> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof options !== 'object' || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object',\n      )\n    }\n  }\n\n  const isRestoring = useIsRestoring()\n  const errorResetBoundary = useQueryErrorResetBoundary()\n  const client = useQueryClient(queryClient)\n  const defaultedOptions = client.defaultQueryOptions(options)\n  ;(client.getDefaultOptions().queries as any)?._experimental_beforeQuery?.(\n    defaultedOptions,\n  )\n\n  const query = client\n    .getQueryCache()\n    .get<\n      TQueryFnData,\n      TError,\n      TQueryData,\n      TQueryKey\n    >(defaultedOptions.queryHash)\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`,\n      )\n    }\n  }\n\n  // Make sure results are optimistically set in fetching state before subscribing or updating options\n  defaultedOptions._optimisticResults = isRestoring\n    ? 'isRestoring'\n    : 'optimistic'\n\n  ensureSuspenseTimers(defaultedOptions)\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary, query)\n  useClearResetErrorBoundary(errorResetBoundary)\n\n  // this needs to be invoked before creating the Observer because that can create a cache entry\n  const isNewCacheEntry = !client\n    .getQueryCache()\n    .get(defaultedOptions.queryHash)\n\n  const [observer] = React.useState(\n    () =>\n      new Observer<TQueryFnData, TError, TData, TQueryData, TQueryKey>(\n        client,\n        defaultedOptions,\n      ),\n  )\n\n  // note: this must be called before useSyncExternalStore\n  const result = observer.getOptimisticResult(defaultedOptions)\n\n  const shouldSubscribe = !isRestoring && options.subscribed !== false\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe\n          ? observer.subscribe(notifyManager.batchCalls(onStoreChange))\n          : noop\n\n        // Update result to make sure we did not miss any query updates\n        // between creating the observer and subscribing to it.\n        observer.updateResult()\n\n        return unsubscribe\n      },\n      [observer, shouldSubscribe],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions)\n  }, [defaultedOptions, observer])\n\n  // Handle suspense\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n  }\n\n  // Handle error boundary\n  if (\n    getHasError({\n      result,\n      errorResetBoundary,\n      throwOnError: defaultedOptions.throwOnError,\n      query,\n      suspense: defaultedOptions.suspense,\n    })\n  ) {\n    throw result.error\n  }\n\n  ;(client.getDefaultOptions().queries as any)?._experimental_afterQuery?.(\n    defaultedOptions,\n    result,\n  )\n\n  if (\n    defaultedOptions.experimental_prefetchInRender &&\n    !isServer &&\n    willFetch(result, isRestoring)\n  ) {\n    const promise = isNewCacheEntry\n      ? // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n        fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n      : // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n        query?.promise\n\n    promise?.catch(noop).finally(() => {\n      // `.updateResult()` will trigger `.#currentThenable` to finalize\n      observer.updateResult()\n    })\n  }\n\n  // Handle result property usage tracking\n  return !defaultedOptions.notifyOnChangeProps\n    ? observer.trackResult(result)\n    : result\n}\n", "'use client'\nimport { QueryObserver } from '@tanstack/query-core'\nimport { useBaseQuery } from './useBaseQuery'\nimport type {\n  DefaultError,\n  NoInfer,\n  QueryClient,\n  QueryKey,\n} from '@tanstack/query-core'\nimport type {\n  DefinedUseQueryResult,\n  UseQueryOptions,\n  UseQueryResult,\n} from './types'\nimport type {\n  DefinedInitialDataOptions,\n  UndefinedInitialDataOptions,\n} from './queryOptions'\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: DefinedInitialDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): DefinedUseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: UndefinedInitialDataOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): UseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = DefaultError,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(\n  options: UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>,\n  queryClient?: QueryClient,\n): UseQueryResult<NoInfer<TData>, TError>\n\nexport function useQuery(options: UseQueryOptions, queryClient?: QueryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient)\n}\n", "'use client'\nimport * as React from 'react'\n\nimport { hydrate } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  DehydratedState,\n  HydrateOptions,\n  OmitKeyof,\n  QueryClient,\n} from '@tanstack/query-core'\n\nexport interface HydrationBoundaryProps {\n  state: DehydratedState | null | undefined\n  options?: OmitKeyof<HydrateOptions, 'defaultOptions'> & {\n    defaultOptions?: OmitKeyof<\n      Exclude<HydrateOptions['defaultOptions'], undefined>,\n      'mutations'\n    >\n  }\n  children?: React.ReactNode\n  queryClient?: QueryClient\n}\n\nexport const HydrationBoundary = ({\n  children,\n  options = {},\n  state,\n  queryClient,\n}: HydrationBoundaryProps) => {\n  const client = useQueryClient(queryClient)\n\n  const optionsRef = React.useRef(options)\n  React.useEffect(() => {\n    optionsRef.current = options\n  })\n\n  // This useMemo is for performance reasons only, everything inside it must\n  // be safe to run in every render and code here should be read as \"in render\".\n  //\n  // This code needs to happen during the render phase, because after initial\n  // SSR, hydration needs to happen _before_ children render. Also, if hydrating\n  // during a transition, we want to hydrate as much as is safe in render so\n  // we can prerender as much as possible.\n  //\n  // For any queries that already exist in the cache, we want to hold back on\n  // hydrating until _after_ the render phase. The reason for this is that during\n  // transitions, we don't want the existing queries and observers to update to\n  // the new data on the current page, only _after_ the transition is committed.\n  // If the transition is aborted, we will have hydrated any _new_ queries, but\n  // we throw away the fresh data for any existing ones to avoid unexpectedly\n  // updating the UI.\n  const hydrationQueue: DehydratedState['queries'] | undefined =\n    React.useMemo(() => {\n      if (state) {\n        if (typeof state !== 'object') {\n          return\n        }\n\n        const queryCache = client.getQueryCache()\n        // State is supplied from the outside and we might as well fail\n        // gracefully if it has the wrong shape, so while we type `queries`\n        // as required, we still provide a fallback.\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const queries = state.queries || []\n\n        const newQueries: DehydratedState['queries'] = []\n        const existingQueries: DehydratedState['queries'] = []\n        for (const dehydratedQuery of queries) {\n          const existingQuery = queryCache.get(dehydratedQuery.queryHash)\n\n          if (!existingQuery) {\n            newQueries.push(dehydratedQuery)\n          } else {\n            const hydrationIsNewer =\n              dehydratedQuery.state.dataUpdatedAt >\n                existingQuery.state.dataUpdatedAt ||\n              (dehydratedQuery.promise &&\n                existingQuery.state.status !== 'pending' &&\n                existingQuery.state.fetchStatus !== 'fetching' &&\n                dehydratedQuery.dehydratedAt !== undefined &&\n                dehydratedQuery.dehydratedAt >\n                  existingQuery.state.dataUpdatedAt)\n\n            if (hydrationIsNewer) {\n              existingQueries.push(dehydratedQuery)\n            }\n          }\n        }\n\n        if (newQueries.length > 0) {\n          // It's actually fine to call this with queries/state that already exists\n          // in the cache, or is older. hydrate() is idempotent for queries.\n          // eslint-disable-next-line react-hooks/refs\n          hydrate(client, { queries: newQueries }, optionsRef.current)\n        }\n        if (existingQueries.length > 0) {\n          return existingQueries\n        }\n      }\n      return undefined\n    }, [client, state])\n\n  React.useEffect(() => {\n    if (hydrationQueue) {\n      hydrate(client, { queries: hydrationQueue }, optionsRef.current)\n    }\n  }, [client, hydrationQueue])\n\n  return children as React.ReactElement\n}\n", "'use client'\nimport * as React from 'react'\nimport { notifyManager } from '@tanstack/query-core'\n\nimport { useQueryClient } from './QueryClientProvider'\nimport type { QueryClient, QueryFilters } from '@tanstack/query-core'\n\nexport function useIsFetching(\n  filters?: QueryFilters,\n  queryClient?: QueryClient,\n): number {\n  const client = useQueryClient(queryClient)\n  const queryCache = client.getQueryCache()\n\n  return React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        queryCache.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [queryCache],\n    ),\n    () => client.isFetching(filters),\n    () => client.isFetching(filters),\n  )\n}\n", "'use client'\nimport * as React from 'react'\n\nimport { notifyManager, replaceEqualDeep } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  Mutation,\n  MutationCache,\n  MutationFilters,\n  MutationState,\n  QueryClient,\n} from '@tanstack/query-core'\n\nexport function useIsMutating(\n  filters?: MutationFilters,\n  queryClient?: QueryClient,\n): number {\n  const client = useQueryClient(queryClient)\n  return useMutationState(\n    { filters: { ...filters, status: 'pending' } },\n    client,\n  ).length\n}\n\ntype MutationStateOptions<TResult = MutationState> = {\n  filters?: MutationFilters\n  select?: (mutation: Mutation) => TResult\n}\n\nfunction getResult<TResult = MutationState>(\n  mutationCache: MutationCache,\n  options: MutationStateOptions<TResult>,\n): Array<TResult> {\n  return mutationCache\n    .findAll(options.filters)\n    .map(\n      (mutation): TResult =>\n        (options.select ? options.select(mutation) : mutation.state) as TResult,\n    )\n}\n\nexport function useMutationState<TResult = MutationState>(\n  options: MutationStateOptions<TResult> = {},\n  queryClient?: QueryClient,\n): Array<TResult> {\n  const mutationCache = useQueryClient(queryClient).getMutationCache()\n  const optionsRef = React.useRef(options)\n  const result = React.useRef<Array<TResult>>(null)\n  if (result.current === null) {\n    result.current = getResult(mutationCache, options)\n  }\n\n  React.useEffect(() => {\n    optionsRef.current = options\n  })\n\n  return React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        mutationCache.subscribe(() => {\n          const nextResult = replaceEqualDeep(\n            result.current,\n            getResult(mutationCache, optionsRef.current),\n          )\n          if (result.current !== nextResult) {\n            result.current = nextResult\n            notifyManager.schedule(onStoreChange)\n          }\n        }),\n      [mutationCache],\n    ),\n    () => result.current,\n    () => result.current,\n  )!\n}\n", "'use client'\nimport * as React from 'react'\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError,\n} from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport type { DefaultError, QueryClient } from '@tanstack/query-core'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = DefaultError,\n  TVariables = void,\n  TOnMutateResult = unknown,\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TOnMutateResult>,\n  queryClient?: QueryClient,\n): UseMutationResult<TData, TError, TVariables, TOnMutateResult> {\n  const client = useQueryClient(queryClient)\n\n  const [observer] = React.useState(\n    () =>\n      new MutationObserver<TData, TError, TVariables, TOnMutateResult>(\n        client,\n        options,\n      ),\n  )\n\n  React.useEffect(() => {\n    observer.setOptions(options)\n  }, [observer, options])\n\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer],\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult(),\n  )\n\n  const mutate = React.useCallback<\n    UseMutateFunction<TData, TError, TVariables, TOnMutateResult>\n  >(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop)\n    },\n    [observer],\n  )\n\n  if (\n    result.error &&\n    shouldThrowError(observer.options.throwOnError, [result.error])\n  ) {\n    throw result.error\n  }\n\n  return { ...result, mutate, mutateAsync: result.mutate }\n}\n", "\"use client\";\nimport TamboAI, { ClientOptions } from \"@tambo-ai/typescript-sdk\";\nimport { QueryClient } from \"@tanstack/react-query\";\nimport React, { createContext, PropsWithChildren, useMemo } from \"react\";\nimport packageJson from \"../../package.json\";\nimport { useTamboSessionToken } from \"./hooks/use-tambo-session-token\";\n\nexport interface TamboClientProviderProps {\n  /**\n   * The URL of the Tambo API (only used for local development and debugging)\n   */\n  tamboUrl?: string;\n  /**\n   * The API key for the Tambo API. This typically comes from a variable like\n   * `process.env.NEXT_PUBLIC_TAMBO_API_KEY`\n   */\n  apiKey: string;\n  /**\n   * The environment to use for the Tambo API\n   */\n  environment?: \"production\" | \"staging\";\n\n  /**\n   * The user token to use to identify the user in the Tambo API. This token is\n   * a 3rd party token like a Google or GitHub access token, exchanged with the\n   * Tambo API to get a session token. This is used to securely identify the\n   * user when calling the Tambo API.\n   */\n  userToken?: string;\n\n  /**\n   * Additional headers to include in all requests to the Tambo API.\n   * These will be merged with the default headers.\n   */\n  additionalHeaders?: Record<string, string>;\n}\n\nexport interface TamboClientContextProps {\n  /** The TamboAI client */\n  client: TamboAI;\n  /** The tambo-specific query client */\n  queryClient: QueryClient;\n  /** Whether the session token is currently being updated */\n  isUpdatingToken: boolean;\n  /** Additional headers to include in all requests */\n  additionalHeaders?: Record<string, string>;\n}\n\nexport const TamboClientContext = createContext<\n  TamboClientContextProps | undefined\n>(undefined);\n\n/**\n * The TamboClientProvider is a React provider that provides a TamboAI client\n * and a query client to the descendants of the provider.\n * @param props - The props for the TamboClientProvider\n * @param props.children - The children to wrap\n * @param props.tamboUrl - The URL of the Tambo API\n * @param props.apiKey - The API key for the Tambo API\n * @param props.environment - The environment to use for the Tambo API\n * @param props.userToken - The oauth access token to use to identify the user in the Tambo API\n * @param props.additionalHeaders - Additional headers to include in all requests\n * @returns The TamboClientProvider component\n */\nexport const TamboClientProvider: React.FC<\n  PropsWithChildren<TamboClientProviderProps>\n> = ({\n  children,\n  tamboUrl,\n  apiKey,\n  environment,\n  userToken,\n  additionalHeaders,\n}) => {\n  const tamboConfig = useMemo(\n    () =>\n      ({\n        apiKey,\n        defaultHeaders: {\n          \"X-Tambo-React-Version\": packageJson.version,\n          ...additionalHeaders,\n        },\n        baseURL: tamboUrl ?? undefined,\n        environment: environment ?? undefined,\n      }) satisfies ClientOptions,\n    [additionalHeaders, apiKey, tamboUrl, environment],\n  );\n\n  const client = useMemo(() => new TamboAI(tamboConfig), [tamboConfig]);\n  const queryClient = useMemo(() => new QueryClient(), []);\n\n  // Keep the session token updated and get the updating state\n  const { isFetching: isUpdatingToken } = useTamboSessionToken(\n    client,\n    queryClient,\n    userToken,\n  );\n\n  return (\n    <TamboClientContext.Provider\n      value={{\n        client,\n        queryClient,\n        isUpdatingToken,\n        additionalHeaders: tamboConfig.defaultHeaders,\n      }}\n    >\n      {children}\n    </TamboClientContext.Provider>\n  );\n};\n\n/**\n * The useTamboClient hook provides access to the TamboAI client\n * to the descendants of the TamboClientProvider.\n * @returns The TamboAI client\n */\nexport const useTamboClient = () => {\n  const context = React.useContext(TamboClientContext);\n  if (context === undefined) {\n    throw new Error(\"useTamboClient must be used within a TamboClientProvider\");\n  }\n  return context.client;\n};\n\n/**\n * The useTamboQueryClient hook provides access to the tambo-specific query client\n * to the descendants of the TamboClientProvider.\n * @returns The tambo-specific query client\n * @private\n */\nexport const useTamboQueryClient = () => {\n  const context = React.useContext(TamboClientContext);\n  if (context === undefined) {\n    throw new Error(\n      \"useTamboQueryClient must be used within a TamboClientProvider\",\n    );\n  }\n  return context.queryClient;\n};\n\n/**\n * Hook to check if the session token is currently being updated\n * @returns true if the token is being refreshed, false otherwise\n */\nexport const useIsTamboTokenUpdating = () => {\n  const context = React.useContext(TamboClientContext);\n  if (context === undefined) {\n    throw new Error(\n      \"useIsTamboTokenUpdating must be used within a TamboClientProvider\",\n    );\n  }\n  return context.isUpdatingToken;\n};\n", "{\n  \"name\": \"@tambo-ai/react\",\n  \"version\": \"0.70.0\",\n  \"description\": \"React client package for Tambo AI\",\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/tambo-ai/tambo.git\",\n    \"directory\": \"react-sdk\"\n  },\n  \"homepage\": \"https://tambo.co\",\n  \"main\": \"./dist/index.js\",\n  \"module\": \"./esm/index.js\",\n  \"types\": \"./dist/index.d.ts\",\n  \"exports\": {\n    \".\": {\n      \"import\": \"./esm/index.js\",\n      \"require\": \"./dist/index.js\",\n      \"types\": \"./dist/index.d.ts\"\n    },\n    \"./mcp\": {\n      \"import\": \"./esm/mcp/index.js\",\n      \"require\": \"./dist/mcp/index.js\",\n      \"types\": \"./dist/mcp/index.d.ts\"\n    },\n    \"./v1\": {\n      \"import\": \"./esm/v1/index.js\",\n      \"require\": \"./dist/v1/index.js\",\n      \"types\": \"./dist/v1/index.d.ts\"\n    }\n  },\n  \"files\": [\n    \"dist\",\n    \"esm\",\n    \"LICENSE\"\n  ],\n  \"volta\": {\n    \"extends\": \"../package.json\"\n  },\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"npm run build:cjs && npm run build:esm\",\n    \"build:cjs\": \"tsc -p tsconfig.cjs.json\",\n    \"build:esm\": \"tsc -p tsconfig.esm.json\",\n    \"check-types\": \"tsc --noEmit\",\n    \"dev\": \"concurrently \\\"npm run dev:cjs\\\" \\\"npm run dev:esm\\\"\",\n    \"dev:cjs\": \"tsc -p tsconfig.cjs.json --watch\",\n    \"dev:esm\": \"tsc -p tsconfig.esm.json --watch\",\n    \"test\": \"jest --config jest.config.ts\",\n    \"format\": \"prettier --write .\",\n    \"lint\": \"eslint\",\n    \"lint:fix\": \"eslint --fix\",\n    \"format:lint\": \"npm run format && npm run lint:fix\",\n    \"prepare\": \"husky\",\n    \"clean\": \"rimraf dist esm coverage\"\n  },\n  \"lint-staged\": {\n    \"*.{js,jsx,ts,tsx}\": [\n      \"prettier --write\",\n      \"eslint --fix\"\n    ],\n    \"*.{json,md,yml,yaml}\": [\n      \"prettier --write\"\n    ]\n  },\n  \"peerDependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.25.1\",\n    \"@types/react\": \"^18.0.0 || ^19.0.0\",\n    \"@types/react-dom\": \"^18.0.0 || ^19.0.0\",\n    \"react\": \"^18.0.0 || ^19.0.0\",\n    \"react-dom\": \"^18.0.0 || ^19.0.0\",\n    \"zod\": \"^3.25.76 || ^4\",\n    \"zod-to-json-schema\": \"^3.25.1\"\n  },\n  \"peerDependenciesMeta\": {\n    \"@modelcontextprotocol/sdk\": {\n      \"optional\": true\n    },\n    \"zod-to-json-schema\": {\n      \"optional\": true\n    }\n  },\n  \"dependencies\": {\n    \"@ag-ui/core\": \"^0.0.42\",\n    \"@modelcontextprotocol/sdk\": \"^1.25.1\",\n    \"@standard-community/standard-json\": \"^0.3.5\",\n    \"@standard-schema/spec\": \"^1.1.0\",\n    \"@tambo-ai/typescript-sdk\": \"^0.84.0\",\n    \"@tanstack/react-query\": \"^5.90.16\",\n    \"fast-equals\": \"^5.3.3\",\n    \"partial-json\": \"^0.1.7\",\n    \"react-fast-compare\": \"^3.2.2\",\n    \"react-media-recorder\": \"^1.7.2\",\n    \"ts-node\": \"^10.9.2\",\n    \"type-fest\": \"^5.4.1\",\n    \"use-debounce\": \"^10.0.6\"\n  },\n  \"devDependencies\": {\n    \"@eslint/js\": \"^9.39.2\",\n    \"@modelcontextprotocol/sdk\": \"^1.25.1\",\n    \"@tambo-ai/eslint-config\": \"*\",\n    \"@tambo-ai/typescript-config\": \"*\",\n    \"@testing-library/jest-dom\": \"^6.9.1\",\n    \"@testing-library/react\": \"^16.3.1\",\n    \"@types/jest\": \"^30.0.0\",\n    \"@types/json-schema\": \"^7.0.15\",\n    \"@types/node\": \"^22.19.5\",\n    \"@types/react\": \"^18.3.23\",\n    \"@types/react-dom\": \"^18.3.7\",\n    \"@valibot/to-json-schema\": \"^1.5.0\",\n    \"concurrently\": \"^9.2.1\",\n    \"eslint\": \"^9.39.2\",\n    \"eslint-plugin-jsdoc\": \"^62.0.0\",\n    \"eslint-plugin-react\": \"^7.37.5\",\n    \"eslint-plugin-react-hooks\": \"^6.1.1\",\n    \"jest\": \"^30.2.0\",\n    \"jest-environment-jsdom\": \"^30.2.0\",\n    \"lint-staged\": \"^16.2.7\",\n    \"prettier\": \"^3.8.0\",\n    \"prettier-2\": \"npm:prettier@^2\",\n    \"react\": \"^18.3.1\",\n    \"react-dom\": \"^18.3.1\",\n    \"ts-jest\": \"^29.4.6\",\n    \"typescript\": \"^5.9.3\",\n    \"typescript-eslint\": \"^8.53.0\",\n    \"zod\": \"^3.25.76 || ^4\",\n    \"zod-to-json-schema\": \"^3.25.1\"\n  }\n}\n", "\"use client\";\nimport TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { QueryClient, useQuery } from \"@tanstack/react-query\";\nimport { useEffect } from \"react\";\n\n/**\n * This internal hook is used to get the Tambo session token and keep it\n * refreshed.\n *\n * It will refresh the token when it expires.\n * It will also set the bearer token on the client.\n *\n * This hook is used by the TamboClientProvider.\n * @param client - The Tambo client.\n * @param queryClient - The query client.\n * @param userToken - The third-party OAuth token to exchange for a Tambo session.\n * @returns React Query result for the session token (token data, fetching state, errors).\n */\nexport function useTamboSessionToken(\n  client: TamboAI,\n  queryClient: QueryClient,\n  userToken: string | undefined,\n) {\n  const result = useQuery(\n    {\n      queryKey: [\"tambo-session-token\", userToken],\n      queryFn: async () => {\n        const tokenRequest = {\n          grant_type: \"urn:ietf:params:oauth:grant-type:token-exchange\",\n          // will only be undefined if the userToken is not provided, in which case the query will be disabled.\n          subject_token: userToken!,\n          subject_token_type: \"urn:ietf:params:oauth:token-type:access_token\",\n        };\n        const tokenRequestFormEncoded = new URLSearchParams(\n          tokenRequest,\n        ).toString();\n        const tokenAsArrayBuffer = new TextEncoder().encode(\n          tokenRequestFormEncoded,\n        );\n        return await client.beta.auth.getToken(tokenAsArrayBuffer as any);\n      },\n      enabled: !!userToken,\n      refetchInterval: (result) => {\n        if (result.state.data?.expires_in) {\n          return result.state.data.expires_in * 1000;\n        }\n        return false;\n      },\n    },\n    queryClient,\n  );\n  const accessToken = result.data?.access_token ?? null;\n  useEffect(() => {\n    client.bearer = accessToken;\n  }, [accessToken, client]);\n  return result;\n}\n", "\"use client\";\nimport type TamboAI from \"@tambo-ai/typescript-sdk\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport type {\n  ComponentRegistry,\n  RegisterToolFn,\n  RegisterToolsFn,\n  TamboComponent,\n  TamboTool,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport type {\n  McpServerInfo,\n  NormalizedMcpServerInfo,\n} from \"../model/mcp-server-info\";\nimport type { ListResourceItem, ResourceSource } from \"../model/resource-info\";\nimport {\n  deduplicateMcpServers,\n  normalizeServerInfo,\n} from \"../util/mcp-server-utils\";\nimport {\n  validateAndPrepareComponent,\n  validateTool,\n  validateToolAssociation,\n} from \"../util/registry-validators\";\nimport {\n  validateResource,\n  validateResourceSource,\n} from \"../util/resource-validators\";\n\nexport interface TamboRegistryContext {\n  componentList: ComponentRegistry;\n  toolRegistry: TamboToolRegistry;\n  componentToolAssociations: Record<string, string[]>;\n  mcpServerInfos: NormalizedMcpServerInfo[];\n  resources: ListResourceItem[];\n  resourceSource: ResourceSource | null;\n  registerComponent: (\n    options: TamboComponent,\n    warnOnOverwrite?: boolean,\n  ) => void;\n  registerTool: RegisterToolFn;\n  registerTools: RegisterToolsFn;\n  addToolAssociation: (componentName: string, tool: TamboTool) => void;\n  registerMcpServer: (info: McpServerInfo) => void;\n  registerMcpServers: (infos: McpServerInfo[]) => void;\n  registerResource: (resource: ListResourceItem) => void;\n  registerResources: (resources: ListResourceItem[]) => void;\n  registerResourceSource: (source: ResourceSource) => void;\n  onCallUnregisteredTool?: (\n    toolName: string,\n    args: TamboAI.ToolCallParameter[],\n  ) => Promise<string>;\n}\n\nexport const TamboRegistryContext = createContext<TamboRegistryContext>({\n  componentList: {},\n  toolRegistry: {},\n  componentToolAssociations: {},\n  mcpServerInfos: [],\n  resources: [],\n  resourceSource: null,\n  /**\n   *\n   */\n  registerComponent: () => {},\n  /**\n   *\n   */\n  registerTool: () => {},\n  /**\n   *\n   */\n  registerTools: () => {},\n  /**\n   *\n   */\n  addToolAssociation: () => {},\n  /**\n   *\n   */\n  registerMcpServer: () => {},\n  /**\n   *\n   */\n  registerMcpServers: () => {},\n  /**\n   *\n   */\n  registerResource: () => {},\n  /**\n   *\n   */\n  registerResources: () => {},\n  /**\n   *\n   */\n  registerResourceSource: () => {},\n});\n\nexport interface TamboRegistryProviderProps {\n  /** The components to register */\n  components?: TamboComponent[];\n  /** The tools to register */\n  tools?: TamboTool[];\n  /** The MCP servers to register */\n  mcpServers?: (McpServerInfo | string)[];\n  /** The static resources to register */\n  resources?: ListResourceItem[];\n\n  /**\n   * Dynamic resource search function. Must be paired with getResource.\n   * Called when useTamboMcpResourceList() is used to fetch resources.\n   */\n  listResources?: ResourceSource[\"listResources\"];\n\n  /**\n   * Dynamic resource fetch function. Must be paired with listResources.\n   * Called when useTamboMcpResource() is used to fetch a specific resource.\n   */\n  getResource?: ResourceSource[\"getResource\"];\n\n  /**\n   * A function to call when an unknown tool is called. If this function is not\n   * provided, an error will be thrown when a tool call is requested by the\n   * server.\n   *\n   * Note that this is generally only for agents, where the agent code may\n   * request tool calls that are not registered in the tool registry.\n   */\n  onCallUnregisteredTool?: (\n    toolName: string,\n    args: TamboAI.ToolCallParameter[],\n  ) => Promise<string>;\n}\n\n/**\n * The TamboRegistryProvider is a React provider that provides a component\n * registry to the descendants of the provider.\n * @param props - The props for the TamboRegistryProvider\n * @param props.children - The children to wrap\n * @param props.components - The components to register\n * @param props.tools - The tools to register\n * @param props.mcpServers - The MCP servers to register\n * @param props.resources - The static resources to register\n * @param props.listResources - The dynamic resource search function (must be paired with getResource)\n * @param props.getResource - The dynamic resource fetch function (must be paired with listResources)\n * @param props.onCallUnregisteredTool - The function to call when an unknown tool is called (optional)\n * @returns The TamboRegistryProvider component\n */\nexport const TamboRegistryProvider: React.FC<\n  PropsWithChildren<TamboRegistryProviderProps>\n> = ({\n  children,\n  components: userComponents,\n  tools: userTools,\n  mcpServers: userMcpServers,\n  resources: userResources,\n  listResources: userListResources,\n  getResource: userGetResource,\n  onCallUnregisteredTool,\n}) => {\n  const [componentList, setComponentList] = useState<ComponentRegistry>({});\n  const [toolRegistry, setToolRegistry] = useState<TamboToolRegistry>({});\n  const [componentToolAssociations, setComponentToolAssociations] = useState<\n    Record<string, string[]>\n  >({});\n  const [staticMcpServerInfos, setStaticMcpServerInfos] = useState<\n    NormalizedMcpServerInfo[]\n  >([]);\n  const [dynamicMcpServerInfos, setDynamicMcpServerInfos] = useState<\n    NormalizedMcpServerInfo[]\n  >([]);\n  const [staticResources, setStaticResources] = useState<ListResourceItem[]>(\n    [],\n  );\n  const [resourceSource, setResourceSource] = useState<ResourceSource | null>(\n    null,\n  );\n\n  const registryWithTool = useCallback((warnOnOverwrite: boolean) => {\n    return (registry: TamboToolRegistry, tool: unknown): TamboToolRegistry => {\n      validateTool(tool);\n\n      if (registry[tool.name] && warnOnOverwrite) {\n        console.warn(`Overwriting tool ${tool.name}`);\n      }\n\n      return {\n        ...registry,\n        [tool.name]: tool,\n      };\n    };\n  }, []);\n\n  const registerTool = useCallback<RegisterToolFn>(\n    (tool: unknown, warnOnOverwrite = true) => {\n      setToolRegistry((registry) =>\n        registryWithTool(warnOnOverwrite)(registry, tool),\n      );\n    },\n    [registryWithTool],\n  );\n\n  const registerTools = useCallback<RegisterToolsFn>(\n    (tools, warnOnOverwrite = true) => {\n      setToolRegistry((existingRegistry) =>\n        tools.reduce(registryWithTool(warnOnOverwrite), existingRegistry),\n      );\n    },\n    [registryWithTool],\n  );\n\n  const registerMcpServer = useCallback((info: McpServerInfo | string) => {\n    const normalized = normalizeServerInfo(info);\n    setDynamicMcpServerInfos((prev) => [...prev, normalized]);\n  }, []);\n\n  const registerMcpServers = useCallback(\n    (infos: (McpServerInfo | string)[]) => {\n      const normalized = infos.map(normalizeServerInfo);\n      setDynamicMcpServerInfos((prev) => [...prev, ...normalized]);\n    },\n    [],\n  );\n\n  const addToolAssociation = useCallback(\n    (componentName: string, tool: TamboTool) => {\n      validateToolAssociation(\n        componentName,\n        tool.name,\n        !!componentList[componentName],\n        !!toolRegistry[tool.name],\n      );\n\n      setComponentToolAssociations((prev) => ({\n        ...prev,\n        [componentName]: [...(prev[componentName] || []), tool.name],\n      }));\n    },\n    [componentList, toolRegistry],\n  );\n\n  const registerComponent = useCallback(\n    (options: TamboComponent, warnOnOverwrite = true) => {\n      const {\n        name,\n        description,\n        component,\n        loadingComponent,\n        associatedTools,\n      } = options;\n\n      const { props } = validateAndPrepareComponent(options);\n\n      setComponentList((prev) => {\n        if (prev[name] && warnOnOverwrite) {\n          console.warn(`overwriting component ${name}`);\n        }\n        return {\n          ...prev,\n          [name]: {\n            component,\n            loadingComponent,\n            name,\n            description,\n            props,\n            contextTools: [],\n          },\n        };\n      });\n      if (associatedTools) {\n        registerTools(associatedTools);\n        setComponentToolAssociations((prev) => ({\n          ...prev,\n          [name]: associatedTools.map((tool) => tool.name),\n        }));\n      }\n    },\n    [registerTools],\n  );\n  useEffect(() => {\n    if (userComponents) {\n      userComponents.forEach((component) => {\n        registerComponent(component, false);\n      });\n    }\n  }, [registerComponent, userComponents]);\n\n  useEffect(() => {\n    if (userTools) {\n      registerTools(userTools, false);\n    }\n  }, [registerTools, userTools]);\n\n  useEffect(() => {\n    if (!userMcpServers || userMcpServers.length === 0) {\n      setStaticMcpServerInfos([]);\n      return;\n    }\n\n    // Normalize servers from props and ensure all have serverKey and transport\n    const normalized = userMcpServers.map(normalizeServerInfo);\n    setStaticMcpServerInfos(normalized);\n  }, [userMcpServers]);\n\n  useEffect(() => {\n    // Validate that listResources and getResource are both provided or both omitted\n    validateResourceSource(userListResources, userGetResource);\n\n    // Set static resources from props\n    if (userResources) {\n      userResources.forEach((resource) => validateResource(resource));\n      setStaticResources(userResources);\n    } else {\n      setStaticResources([]);\n    }\n\n    // Set resource source from props\n    if (userListResources && userGetResource) {\n      setResourceSource({\n        listResources: userListResources,\n        getResource: userGetResource,\n      });\n    } else {\n      setResourceSource(null);\n    }\n  }, [userResources, userListResources, userGetResource]);\n\n  const registerResource = useCallback((resource: ListResourceItem) => {\n    validateResource(resource);\n    setStaticResources((prev) => [...prev, resource]);\n  }, []);\n\n  const registerResources = useCallback((resources: ListResourceItem[]) => {\n    resources.forEach((resource) => validateResource(resource));\n    setStaticResources((prev) => [...prev, ...resources]);\n  }, []);\n\n  const registerResourceSource = useCallback((source: ResourceSource) => {\n    validateResourceSource(source.listResources, source.getResource);\n    setResourceSource(source);\n  }, []);\n\n  const mcpServerInfos: NormalizedMcpServerInfo[] = useMemo(() => {\n    const allServers = [...staticMcpServerInfos, ...dynamicMcpServerInfos];\n    return deduplicateMcpServers(allServers);\n  }, [staticMcpServerInfos, dynamicMcpServerInfos]);\n\n  const value = {\n    componentList,\n    toolRegistry,\n    componentToolAssociations,\n    mcpServerInfos,\n    resources: staticResources,\n    resourceSource,\n    registerComponent,\n    registerTool,\n    registerTools,\n    addToolAssociation,\n    registerMcpServer,\n    registerMcpServers,\n    registerResource,\n    registerResources,\n    registerResourceSource,\n    onCallUnregisteredTool,\n  };\n\n  return (\n    <TamboRegistryContext.Provider value={value}>\n      {children}\n    </TamboRegistryContext.Provider>\n  );\n};\n\n/**\n * The useTamboRegistry hook provides access to the component registry\n * to the descendants of the TamboRegistryProvider.\n * @returns The component registry\n */\nexport const useTamboRegistry = () => {\n  return useContext(TamboRegistryContext);\n};\n\n/**\n * Hook to access the MCP server metadata from TamboRegistryProvider.\n * This provides access to the registered MCP server configurations (metadata only, not connections).\n *\n * This hook can be used anywhere within the TamboProvider hierarchy to access\n * the list of configured MCP servers without needing to be inside TamboMcpProvider.\n * @returns Array of MCP server metadata\n * @example\n * ```tsx\n * function MyComponent() {\n *   const mcpServers = useTamboMcpServerInfos();\n *\n *   return (\n *     <div>\n *       <h3>Configured MCP Servers:</h3>\n *       {mcpServers.map((server) => (\n *         <div key={server.url}>\n *           {server.name || server.url}\n *         </div>\n *       ))}\n *     </div>\n *   );\n * }\n * ```\n *\n * The returned objects are `NormalizedMcpServerInfo` instances, meaning both\n * `serverKey` and `transport` are always populated (with `transport`\n * defaulting to HTTP when not explicitly specified).\n */\nexport const useTamboMcpServerInfos = (): NormalizedMcpServerInfo[] => {\n  return useContext(TamboRegistryContext).mcpServerInfos;\n};\n", "/**\n * The transport protocol to use for MCP connections.\n */\nexport enum MCPTransport {\n  SSE = \"sse\",\n  HTTP = \"http\",\n}\n\n/**\n * User-provided configuration for an MCP server.\n *\n * This is the type accepted by `TamboProvider` / `TamboRegistryProvider` in\n * the `mcpServers` prop.\n *\n * The `handlers` field is intentionally typed as `unknown` here so the core\n * SDK does not depend on the MCP subpackage. In the `@tambo-ai/react/mcp`\n * subpackage this is treated as `Partial<MCPHandlers>` (with\n * `elicitation` / `sampling` callbacks). The `@modelcontextprotocol/sdk` is\n * included automatically with `@tambo-ai/react`. See the React SDK README for\n * any additional optional peer dependencies needed for MCP features.\n */\nexport interface McpServerInfo {\n  /** Optional name for the MCP server */\n  name?: string;\n  /** The URL of the MCP server to connect to */\n  url: string;\n  /** Optional description of the MCP server */\n  description?: string;\n  /** The transport type to use (SSE or HTTP). Defaults to HTTP for string URLs */\n  transport?: MCPTransport;\n  /** Optional custom headers to include in requests */\n  customHeaders?: Record<string, string>;\n  /**\n   * Optional short name for namespacing MCP resources, prompts, and tools.\n   * When multiple MCP servers are configured, this key is used to prefix:\n   * - prompts: `<serverKey>:<promptName>`\n   * - resources: `<serverKey>:<resourceUrl>`\n   * - tools: `<serverKey>__<toolName>`\n   *\n   * If not provided, a key will be derived from the URL hostname.\n   * For example, \"https://mcp.linear.app/mcp\" becomes \"linear\".\n   */\n  serverKey?: string;\n  /**\n   * Optional handlers for elicitation and sampling requests from the server.\n   *\n   * In the MCP subpackage this is interpreted as `Partial<MCPHandlers>`,\n   * i.e. `{ elicitation?: MCPElicitationHandler; sampling?: MCPSamplingHandler }`.\n   *\n   * Note: These callbacks should be stable (e.g., wrapped in useCallback or\n   * defined outside the component) to avoid constant re-registration of the\n   * MCP server on every render.\n   */\n  handlers?: unknown;\n}\n\n/**\n * Normalized MCP server metadata used internally by the registry and MCP\n * provider.\n *\n * This is equivalent to `McpServerInfo` except that:\n * - `serverKey` is guaranteed to be present\n * - `transport` is resolved to a concrete value (defaults to HTTP)\n */\nexport interface NormalizedMcpServerInfo extends McpServerInfo {\n  transport: MCPTransport;\n  serverKey: string;\n}\n\n/**\n * Creates a stable identifier for an MCP server based on its connection properties.\n * Two servers with the same URL, transport, and headers will have the same key.\n *\n * This is used by both the registry and MCP provider to deduplicate servers,\n * so it lives alongside the shared server metadata type.\n * @returns A stable string key identifying the server\n */\nexport function getMcpServerUniqueKey(\n  serverInfo: Pick<McpServerInfo, \"url\" | \"transport\" | \"customHeaders\">,\n): string {\n  const headerStr = serverInfo.customHeaders\n    ? JSON.stringify(\n        Object.entries(serverInfo.customHeaders)\n          .map(([k, v]) => [k.toLowerCase(), v] as const)\n          .sort(([a], [b]) => a.localeCompare(b)),\n      )\n    : \"\";\n\n  return `${serverInfo.url}|${serverInfo.transport ?? MCPTransport.HTTP}|${headerStr}`;\n}\n", "import type {\n  McpServerInfo,\n  NormalizedMcpServerInfo,\n} from \"../model/mcp-server-info\";\nimport { getMcpServerUniqueKey, MCPTransport } from \"../model/mcp-server-info\";\n\n/**\n * Derives a short, meaningful key from a server URL.\n * Strips TLDs and common prefixes to get a human-readable identifier.\n * For example, \"https://mcp.linear.app/mcp\" becomes \"linear\".\n * @returns A lowercased, human-readable key derived from the URL\n */\nexport function deriveServerKey(url: string): string {\n  try {\n    const parsed = new URL(url);\n    const hostname = parsed.hostname;\n\n    // Split hostname into parts\n    const parts = hostname.split(\".\");\n\n    // Remove common TLD patterns\n    // Handle cases like: .com, .org, .co.uk, .com.au, etc.\n    let relevantParts = [...parts];\n\n    // If we have 3+ parts and the last two are short (likely TLD like .co.uk)\n    if (\n      relevantParts.length >= 3 &&\n      relevantParts[relevantParts.length - 1].length <= 3 &&\n      relevantParts[relevantParts.length - 2].length <= 3\n    ) {\n      relevantParts = relevantParts.slice(0, -2);\n    }\n    // Otherwise just remove the last part (TLD like .com)\n    else if (relevantParts.length >= 2) {\n      relevantParts = relevantParts.slice(0, -1);\n    }\n\n    // From what's left, prefer the rightmost part that's not a common prefix\n    // Common prefixes: www, api, mcp, app, etc.\n    const commonPrefixes = new Set([\n      \"www\",\n      \"api\",\n      \"mcp\",\n      \"app\",\n      \"staging\",\n      \"dev\",\n      \"prod\",\n    ]);\n\n    // Work backwards through the parts to find a meaningful name\n    for (let i = relevantParts.length - 1; i >= 0; i--) {\n      const part = relevantParts[i];\n      if (part && !commonPrefixes.has(part.toLowerCase())) {\n        return part.toLowerCase();\n      }\n    }\n\n    // Fallback: use the last relevant part even if it's a common prefix\n    return relevantParts[relevantParts.length - 1]?.toLowerCase() || hostname;\n  } catch {\n    // If URL parsing fails, just return a sanitized version of the input\n    return url.replace(/[^a-zA-Z0-9]/g, \"_\").toLowerCase();\n  }\n}\n\n/**\n * Normalizes an MCP server info object, ensuring it has a serverKey.\n * If serverKey is not provided, derives it from the URL.\n * @returns The normalized MCP server info object\n */\nexport function normalizeServerInfo(\n  server: McpServerInfo | string,\n): NormalizedMcpServerInfo {\n  const base: McpServerInfo =\n    typeof server === \"string\"\n      ? {\n          url: server,\n          transport: MCPTransport.HTTP,\n        }\n      : server;\n\n  const serverKey = base.serverKey ?? deriveServerKey(base.url);\n  const transport = base.transport ?? MCPTransport.HTTP;\n\n  return { ...base, transport, serverKey };\n}\n\n/**\n * Deduplicates MCP servers by connection identity and ensures serverKey uniqueness.\n * First deduplicates by connection (url + transport), then ensures serverKey uniqueness\n * by appending -2, -3, etc. to duplicate serverKeys.\n * @param servers - Array of normalized MCP server info objects\n * @returns Array of deduplicated servers with unique serverKeys\n */\nexport function deduplicateMcpServers(\n  servers: NormalizedMcpServerInfo[],\n): NormalizedMcpServerInfo[] {\n  if (servers.length === 0) {\n    return servers;\n  }\n\n  // 1. Deduplicate by connection identity using a stable key\n  const byKey = new Map<string, NormalizedMcpServerInfo>();\n  for (const server of servers) {\n    const key = getMcpServerUniqueKey(server);\n    byKey.set(key, server);\n  }\n\n  const deduped = Array.from(byKey.values());\n\n  // 2. Ensure serverKey uniqueness for readable, unambiguous prefixes\n  const seen = new Map<string, number>();\n  return deduped.map((server) => {\n    const baseKey = server.serverKey;\n    const count = (seen.get(baseKey) ?? 0) + 1;\n    seen.set(baseKey, count);\n\n    if (count === 1) {\n      return server;\n    }\n\n    return {\n      ...server,\n      serverKey: `${baseKey}-${count}`,\n    };\n  });\n}\n", "import type { JSONSchema7 } from \"json-schema\";\nimport type { TamboComponent, TamboTool } from \"../model/component-metadata\";\nimport {\n  assertNoRecordSchema,\n  isStandardSchema,\n  looksLikeJSONSchema,\n  schemaToJsonSchema,\n} from \"../schema\";\nimport { assertValidName } from \"./validate-component-name\";\n\n/**\n * Checks if a JSON Schema represents an object type.\n * @param schema - The JSON Schema to check\n * @returns True if the schema is an object type\n */\nfunction isObjectSchema(schema: JSONSchema7): boolean {\n  return schema.type === \"object\" || schema.properties !== undefined;\n}\n\n/**\n * Validates that a schema is an object type.\n * Throws an error if it's not.\n * @param schema - The schema to validate (Standard Schema or JSON Schema)\n * @param context - Description of where the schema is used (for error messages)\n */\nfunction assertObjectSchema(schema: unknown, context: string): void {\n  let jsonSchema: JSONSchema7;\n\n  if (isStandardSchema(schema)) {\n    try {\n      jsonSchema = schemaToJsonSchema(schema);\n    } catch {\n      // If conversion fails, we can't validate - let it fail later\n      return;\n    }\n  } else if (looksLikeJSONSchema(schema)) {\n    jsonSchema = schema;\n  } else {\n    // Unknown schema type, can't validate\n    return;\n  }\n\n  if (!isObjectSchema(jsonSchema)) {\n    throw new Error(\n      `${context} must be an object schema (e.g., z.object({...})). ` +\n        `Received type: \"${jsonSchema.type ?? \"unknown\"}\". ` +\n        `Tool parameters are passed as a single object argument.`,\n    );\n  }\n}\n\n/**\n * Validates a tool before registration.\n * Throws an error if the tool is invalid.\n * @param tool - The tool to validate\n */\nexport function validateTool(tool: unknown): asserts tool is TamboTool {\n  // Basic runtime type checks before narrowing\n  if (!tool || typeof tool !== \"object\") {\n    throw new Error(\"Tool must be an object\");\n  }\n\n  // Extract name for error messages (before we know it's valid)\n  const toolName =\n    \"name\" in tool && typeof tool.name === \"string\" ? tool.name : \"<unknown>\";\n\n  // Check for deprecated toolSchema - throw error with migration instructions\n  if (\"toolSchema\" in tool) {\n    throw new Error(\n      `Tool \"${toolName}\" uses deprecated \"toolSchema\" property. ` +\n        `Migrate to \"inputSchema\" and \"outputSchema\" properties. ` +\n        `See migration guide: https://tambo.ai/docs/migration/toolschema`,\n    );\n  }\n\n  // Validate required properties exist\n  if (!(\"name\" in tool) || typeof tool.name !== \"string\") {\n    throw new Error(\"Tool must have a 'name' property of type string\");\n  }\n\n  if (!(\"description\" in tool) || typeof tool.description !== \"string\") {\n    throw new Error(\n      `Tool \"${tool.name}\" must have a 'description' property of type string`,\n    );\n  }\n\n  if (!(\"tool\" in tool) || typeof tool.tool !== \"function\") {\n    throw new Error(\n      `Tool \"${tool.name}\" must have a 'tool' property of type function`,\n    );\n  }\n\n  if (!(\"inputSchema\" in tool)) {\n    throw new Error(`Tool \"${tool.name}\" must have an 'inputSchema' property`);\n  }\n\n  if (!(\"outputSchema\" in tool)) {\n    throw new Error(`Tool \"${tool.name}\" must have an 'outputSchema' property`);\n  }\n\n  // Validate tool name format\n  assertValidName(tool.name, \"tool\");\n\n  // Validate tool schemas - inputSchema must be an object schema\n  if (tool.inputSchema) {\n    assertObjectSchema(tool.inputSchema, `inputSchema of tool \"${tool.name}\"`);\n    assertNoRecordSchema(\n      tool.inputSchema,\n      `inputSchema of tool \"${tool.name}\"`,\n    );\n  }\n\n  // Validate maxCalls if provided - must be a positive integer\n  if (\n    \"maxCalls\" in tool &&\n    tool.maxCalls !== undefined &&\n    tool.maxCalls !== null\n  ) {\n    const maxCalls = tool.maxCalls;\n    if (\n      typeof maxCalls !== \"number\" ||\n      !Number.isInteger(maxCalls) ||\n      maxCalls < 0\n    ) {\n      throw new Error(\n        `maxCalls for tool \"${tool.name}\" must be a positive integer`,\n      );\n    }\n  }\n}\n\n/**\n * Converts a props schema to a serialized JSON Schema format.\n * @param propsDefinition - Deprecated: legacy props definition (will log warning)\n * @param propsSchema - The props schema (Standard Schema or JSON Schema)\n * @param name - Component/tool name for error messages\n * @returns Serialized JSON Schema object\n */\nfunction getSerializedProps(\n  propsDefinition: unknown,\n  propsSchema: unknown,\n  name: string,\n): Record<string, unknown> {\n  if (propsDefinition) {\n    console.warn(`propsDefinition is deprecated. Use propsSchema instead.`);\n    return propsDefinition as Record<string, unknown>;\n  }\n\n  // Check for Standard Schema (Zod, Valibot, ArkType, etc.)\n  if (isStandardSchema(propsSchema)) {\n    try {\n      return schemaToJsonSchema(propsSchema) as Record<string, unknown>;\n    } catch (error) {\n      console.error(\n        `Error converting ${name} props schema to JSON Schema:`,\n        error,\n      );\n      throw new Error(\n        `Error converting ${name} props schema to JSON Schema: ${error}`,\n      );\n    }\n  }\n\n  // Check for JSON Schema\n  if (looksLikeJSONSchema(propsSchema)) {\n    return propsSchema as Record<string, unknown>;\n  }\n\n  throw new Error(`Invalid props schema for ${name}`);\n}\n\n/**\n * Validates a component and prepares its props for registration.\n * Throws an error if the component is invalid.\n * @param component - The component to validate and prepare\n * @returns Object containing the serialized props\n */\nexport function validateAndPrepareComponent(component: TamboComponent): {\n  props: Record<string, unknown>;\n} {\n  const { name, propsSchema, propsDefinition } = component;\n\n  // Validate component name\n  assertValidName(name, \"component\");\n\n  // Validate that at least one props definition is provided\n  if (!propsSchema && !propsDefinition) {\n    throw new Error(\n      `Component ${name} must have either propsSchema (recommended) or propsDefinition defined`,\n    );\n  }\n\n  // Validate that only one props definition is provided\n  if (propsSchema && propsDefinition) {\n    throw new Error(\n      `Component ${name} cannot have both propsSchema and propsDefinition defined. Use only one. We recommend using propsSchema.`,\n    );\n  }\n\n  // Validate that the propsSchema does not include record types\n  if (propsSchema) {\n    assertNoRecordSchema(propsSchema, `propsSchema of component \"${name}\"`);\n  }\n\n  // Convert propsSchema to JSON Schema if it exists\n  const props = getSerializedProps(propsDefinition, propsSchema, name);\n\n  return { props };\n}\n\n/**\n * Validates a tool association between a component and tool.\n * Throws an error if the association is invalid.\n * @param componentName - The component name\n * @param toolName - The tool name\n * @param componentExists - Whether the component exists in the registry\n * @param toolExists - Whether the tool exists in the registry\n */\nexport function validateToolAssociation(\n  componentName: string,\n  toolName: string,\n  componentExists: boolean,\n  toolExists: boolean,\n): void {\n  // Validate component and tool names\n  assertValidName(componentName, \"component\");\n  assertValidName(toolName, \"tool\");\n\n  if (!componentExists) {\n    throw new Error(`Component ${componentName} not found in registry`);\n  }\n  if (!toolExists) {\n    throw new Error(`Tool ${toolName} not found in registry`);\n  }\n}\n", "import type { ListResourceItem, ResourceSource } from \"../model/resource-info\";\n\n/**\n * Validates that a ResourceSource has both listResources and getResource defined,\n * or neither defined. You cannot provide one without the other.\n * @param listResources - The listResources function (or undefined)\n * @param getResource - The getResource function (or undefined)\n * @throws {Error} if only one of the functions is provided\n */\nexport function validateResourceSource(\n  listResources: ResourceSource[\"listResources\"] | undefined,\n  getResource: ResourceSource[\"getResource\"] | undefined,\n): void {\n  const hasListResources = listResources != null;\n  const hasGetResource = getResource != null;\n\n  if (hasListResources !== hasGetResource) {\n    throw new Error(\n      \"Both listResources and getResource must be provided together, or neither should be provided. \" +\n        `Got: listResources=${hasListResources ? \"defined\" : \"undefined\"}, ` +\n        `getResource=${hasGetResource ? \"defined\" : \"undefined\"}`,\n    );\n  }\n}\n\n/**\n * Validates that a resource has the required fields.\n * @param resource - The resource to validate\n * @throws {Error} if the resource is missing required fields\n */\nexport function validateResource(resource: ListResourceItem): void {\n  if (!resource.uri) {\n    throw new Error(\"Resource must have a 'uri' field\");\n  }\n\n  if (!resource.name) {\n    throw new Error(\n      `Resource with URI '${resource.uri}' must have a 'name' field`,\n    );\n  }\n}\n", "\"use client\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport {\n  AdditionalContext,\n  ContextHelperFn,\n  ContextHelpers,\n} from \"../context-helpers\";\nimport { resolveAdditionalContext } from \"../context-helpers/registry\";\n\nexport interface TamboContextHelpersProviderProps {\n  /**\n   * A dictionary of context helper functions.\n   * The key becomes the AdditionalContext.name and the function returns the value.\n   * Return null/undefined to skip including that context.\n   */\n  contextHelpers?: ContextHelpers;\n}\n\nexport interface TamboContextHelpersContextProps {\n  /** Get all additional context by running all helper functions */\n  getAdditionalContext: () => Promise<AdditionalContext[]>;\n  /** Get the current context helpers map */\n  getContextHelpers: () => ContextHelpers;\n  /** Add or update a context helper by name */\n  addContextHelper: (name: string, helper: ContextHelperFn) => void;\n  /** Remove a context helper by name */\n  removeContextHelper: (name: string) => void;\n}\n\nconst TamboContextHelpersContext =\n  createContext<TamboContextHelpersContextProps | null>(null);\n\n/**\n * Provider for managing additional context helpers.\n * Accepts a map of { key: () => any | null | undefined | Promise<any | null | undefined> }.\n * Returning null/undefined skips inclusion; returned values are wrapped as { name: key, context: value }.\n * @param props - The props for the TamboContextHelpersProvider.\n * @param props.contextHelpers - A dictionary of context helper functions keyed by context name.\n * @param props.children - The children to render.\n * @returns The provider that exposes context helper APIs via useTamboContextHelpers.\n */\nexport const TamboContextHelpersProvider: React.FC<\n  PropsWithChildren<TamboContextHelpersProviderProps>\n> = ({ children, contextHelpers }) => {\n  const [helpers, setHelpers] = useState<Record<string, ContextHelperFn>>({});\n  const addContextHelper = useCallback((name: string, fn: ContextHelperFn) => {\n    setHelpers((prev) => ({ ...prev, [name]: fn }));\n  }, []);\n  const removeContextHelper = useCallback(\n    (name: string, fn?: ContextHelperFn) => {\n      setHelpers((prev) => {\n        const { [name]: registeredFn, ...rest } = prev;\n        if (fn === undefined || registeredFn === fn) {\n          return rest;\n        }\n        return prev;\n      });\n    },\n    [],\n  );\n  // Hydrate the global registry with initial helpers (runs on prop changes)\n  useEffect(() => {\n    const addedEntries: [string, ContextHelperFn][] = [];\n\n    if (contextHelpers) {\n      for (const [name, fn] of Object.entries(contextHelpers)) {\n        addContextHelper(name, fn);\n        addedEntries.push([name, fn]);\n      }\n    }\n\n    return () => {\n      for (const [name, fn] of addedEntries) {\n        // Only remove if the registry still points to the same function\n        removeContextHelper(name, fn);\n      }\n    };\n  }, [addContextHelper, contextHelpers, removeContextHelper]);\n\n  const getAdditionalContext = useCallback(async () => {\n    const contexts = await resolveAdditionalContext(helpers);\n    return contexts as AdditionalContext[];\n  }, [helpers]);\n\n  const getContextHelpers = useCallback(() => {\n    return helpers as ContextHelpers;\n  }, [helpers]);\n\n  const value = useMemo(\n    () => ({\n      getAdditionalContext,\n      getContextHelpers,\n      addContextHelper,\n      removeContextHelper,\n    }),\n    [\n      getAdditionalContext,\n      getContextHelpers,\n      addContextHelper,\n      removeContextHelper,\n    ],\n  );\n\n  return (\n    <TamboContextHelpersContext.Provider value={value}>\n      {children}\n    </TamboContextHelpersContext.Provider>\n  );\n};\n\n/**\n * Hook to access context helpers functionality.\n *\n * Behavior without a provider: this hook does NOT throw immediately. If it is\n * called outside of a `TamboContextHelpersProvider`, it returns a fallback\n * object whose methods will throw when invoked. This \"lazy-throw\" pattern is\n * intentional so the error surfaces at the actual point of use.\n * @returns The context helpers API when a provider is present; otherwise, a\n * fallback object whose methods throw if called.\n */\nexport const useTamboContextHelpers = () => {\n  const context = useContext(TamboContextHelpersContext);\n  if (context) return context;\n\n  // No provider present: return methods that throw with a helpful error when used\n  return {\n    getAdditionalContext: async () => {\n      throw new Error(\n        \"useTamboContextHelpers must be used within a TamboContextHelpersProvider\",\n      );\n    },\n    getContextHelpers: () => {\n      throw new Error(\n        \"useTamboContextHelpers must be used within a TamboContextHelpersProvider\",\n      );\n    },\n    addContextHelper: (_name: string, _helper: ContextHelperFn) => {\n      throw new Error(\n        \"useTamboContextHelpers must be used within a TamboContextHelpersProvider\",\n      );\n    },\n    removeContextHelper: (_name: string) => {\n      throw new Error(\n        \"useTamboContextHelpers must be used within a TamboContextHelpersProvider\",\n      );\n    },\n  } as TamboContextHelpersContextProps;\n};\n", "/**\n * Global context helpers registry.\n * Consumers can add/remove helpers and resolve additional context anywhere.\n */\n\nexport type HelperFn = () =>\n  | unknown\n  | null\n  | undefined\n  | Promise<unknown | null | undefined>;\n\n/**\n * Resolve all helpers to AdditionalContext entries, skipping null/undefined and errors.\n * @returns The resolved additional context.\n */\nexport async function resolveAdditionalContext(\n  helpers: Record<string, HelperFn>,\n): Promise<{ name: string; context: unknown }[]> {\n  const entries = Object.entries(helpers);\n  if (entries.length === 0) return [];\n\n  const results = await Promise.all(\n    entries.map(async ([name, fn]) => {\n      try {\n        const value = await fn();\n        if (value == null) return null;\n        return { name, context: value };\n      } catch (error) {\n        console.error(`Error running context helper ${name}:`, error);\n        return null;\n      }\n    }),\n  );\n\n  return results.filter(Boolean) as { name: string; context: unknown }[];\n}\n", "\"use client\";\nimport React, { createContext, useContext } from \"react\";\nimport {\n  InteractableMetadata,\n  TamboThreadMessage,\n} from \"../model/generate-component-response\";\n\nexport const TamboMessageContext = createContext<TamboThreadMessage | null>(\n  null,\n);\n\nexport interface TamboMessageProviderProps {\n  children: React.ReactNode;\n  message: TamboThreadMessage;\n  /** Optional interactable metadata for components wrapped with withInteractable */\n  interactableMetadata?: InteractableMetadata;\n}\n\n/**\n * Wraps all components, so that they can find what message they are in.\n * Also supports optional interactable metadata for components wrapped with withInteractable.\n * @param props - props for the TamboMessageProvider\n * @param props.children - The children to wrap\n * @param props.message - The message object\n * @param props.interactableMetadata - Optional interactable component metadata\n * @returns The wrapped component\n */\nexport const TamboMessageProvider: React.FC<TamboMessageProviderProps> = ({\n  children,\n  message,\n  interactableMetadata,\n}) => {\n  // Merge interactable metadata into message if provided\n  const enhancedMessage: TamboThreadMessage = interactableMetadata\n    ? { ...message, interactableMetadata }\n    : message;\n\n  // Use a unique key={...} to force a re-render when the message changes - this\n  // make sure that if the rendered component is swapped into a tree (like if\n  // you always show the last rendered component) then the state/etc is correct\n  return (\n    <TamboMessageContext.Provider value={enhancedMessage} key={message.id}>\n      {children}\n    </TamboMessageContext.Provider>\n  );\n};\n\n/**\n * Wraps a component with a TamboMessageProvider - this allows the provider\n * to be used outside of a TSX file\n * @param children - The children to wrap\n * @param message - The message object\n * @param interactableMetadata - Optional interactable metadata\n * @returns The wrapped component\n */\nexport function wrapWithTamboMessageProvider(\n  children: React.ReactNode,\n  message: TamboThreadMessage,\n  interactableMetadata?: InteractableMetadata,\n) {\n  return (\n    <TamboMessageProvider\n      message={message}\n      interactableMetadata={interactableMetadata}\n    >\n      {children}\n    </TamboMessageProvider>\n  );\n}\n\n/**\n * Hook used inside a component wrapped with TamboMessageProvider, to get\n * the current message.\n * @returns The current message that is used to render the component\n */\nexport const useTamboCurrentMessage = () => {\n  const message = useContext(TamboMessageContext);\n  if (!message) {\n    throw new Error(\n      \"useTamboCurrentMessage must be used within a TamboMessageProvider\",\n    );\n  }\n  return message;\n};\n\n/**\n * Component info extracted from the current message and interactable context.\n * Provides a unified interface for accessing component metadata.\n */\nexport interface TamboCurrentComponent {\n  /** Component name from the message */\n  componentName?: string;\n  /** Component props from the message */\n  props?: Record<string, any>;\n  /** Interactable ID (only present for components wrapped with withInteractable) */\n  interactableId?: string;\n  /** Description (only present for components wrapped with withInteractable) */\n  description?: string;\n  /** Thread ID from the message (only present when the component is part of a thread) */\n  threadId?: string;\n}\n\n/**\n * Hook to access the current component information from the message context.\n * Provides a unified interface for both AI-generated and interactable components.\n *\n * **Use this hook when you need component metadata regardless of the context.**\n * @returns Component info including name, props, and interactable metadata if available, or null if used outside TamboMessageProvider\n * @example\n * ```tsx\n * function MyInlineEditor() {\n *   const component = useTamboCurrentComponent();\n *\n *   if (!component) return null; // Not inside a component\n *\n *   return (\n *     <div>\n *       Editing: {component.componentName}\n *       {component.interactableId && <span>ID: {component.interactableId}</span>}\n *     </div>\n *   );\n * }\n * ```\n */\nexport const useTamboCurrentComponent = (): TamboCurrentComponent | null => {\n  const message = useContext(TamboMessageContext);\n\n  if (!message) {\n    return null;\n  }\n\n  return {\n    componentName:\n      message.interactableMetadata?.componentName ??\n      message.component?.componentName ??\n      undefined,\n    props: message.component?.props as Record<string, any> | undefined,\n    interactableId: message.interactableMetadata?.id ?? undefined,\n    description: message.interactableMetadata?.description ?? undefined,\n    threadId: message.threadId,\n  };\n};\n", "import { useCallback, useState } from \"react\";\n\n/**\n * Represents an image staged for upload\n */\nexport interface StagedImage {\n  id: string;\n  name: string;\n  dataUrl: string;\n  file: File;\n  size: number;\n  type: string;\n}\n\ninterface UseMessageImagesReturn {\n  images: StagedImage[];\n  addImage: (file: File) => Promise<void>;\n  addImages: (files: File[]) => Promise<void>;\n  removeImage: (id: string) => void;\n  clearImages: () => void;\n}\n\n/**\n * Hook for managing images in message input\n * @returns Object with images array and management functions\n */\nexport function useMessageImages(): UseMessageImagesReturn {\n  const [images, setImages] = useState<StagedImage[]>([]);\n\n  const fileToDataUrl = async (file: File): Promise<string> => {\n    return await new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = reject;\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const addImage = useCallback(async (file: File) => {\n    if (!file.type.startsWith(\"image/\")) {\n      throw new Error(\"Only image files are allowed\");\n    }\n\n    const dataUrl = await fileToDataUrl(file);\n    const newImage: StagedImage = {\n      id: crypto.randomUUID(),\n      name: file.name,\n      dataUrl,\n      file,\n      size: file.size,\n      type: file.type,\n    };\n\n    setImages((prev) => [...prev, newImage]);\n  }, []);\n\n  const addImages = useCallback(async (files: File[]) => {\n    const imageFiles = files.filter((file) => file.type.startsWith(\"image/\"));\n\n    if (imageFiles.length === 0) {\n      throw new Error(\"No valid image files provided\");\n    }\n\n    const newImages = await Promise.all(\n      imageFiles.map(async (file) => {\n        const dataUrl = await fileToDataUrl(file);\n        return {\n          id: crypto.randomUUID(),\n          name: file.name,\n          dataUrl,\n          file,\n          size: file.size,\n          type: file.type,\n        };\n      }),\n    );\n\n    setImages((prev) => [...prev, ...newImages]);\n  }, []);\n\n  const removeImage = useCallback((id: string) => {\n    setImages((prev) => prev.filter((img) => img.id !== id));\n  }, []);\n\n  const clearImages = useCallback(() => {\n    setImages([]);\n  }, []);\n\n  return {\n    images,\n    addImage,\n    addImages,\n    removeImage,\n    clearImages,\n  };\n}\n", "\"use client\";\n\nimport { useEffect } from \"react\";\n\n/**\n * Low-level helper that merges streamed props into state.\n * @deprecated Use `useTamboComponentState` with `setFromProp` instead.\n * This hook will be removed in 1.0.0.\n * @see {@link https://docs.tambo.co/concepts/streaming/streaming-props}\n * @param currentState - Current state object\n * @param setState - State setter function\n * @param streamingProps - Props to merge into state when they change\n */\nexport function useTamboStreamingProps<T extends Record<string, any>>(\n  currentState: T | undefined,\n  setState: (state: T) => void,\n  streamingProps: Partial<T>,\n) {\n  useEffect(() => {\n    if (currentState) {\n      let shouldUpdate = false;\n      const updates: Partial<T> = {};\n\n      Object.entries(streamingProps).forEach(([key, value]) => {\n        if (value !== undefined && value !== currentState[key]) {\n          shouldUpdate = true;\n          updates[key as keyof T] = value as T[keyof T];\n        }\n      });\n\n      if (shouldUpdate) {\n        setState({\n          ...currentState,\n          ...updates,\n        });\n      }\n    }\n    // Only run when streamingProps change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [...Object.values(streamingProps)]);\n}\n", "\"use client\";\nimport TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { useEffect, useState } from \"react\";\nimport { isIdleStage } from \"../model/generate-component-response\";\nimport { validateInput } from \"../model/validate-input\";\nimport { useTamboClient } from \"../providers/tambo-client-provider\";\nimport { useTambo } from \"../providers/tambo-provider\";\nimport { useTamboRegistry } from \"../providers/tambo-registry-provider\";\nimport {\n  INPUT_ERROR_MESSAGES,\n  useTamboThreadInput,\n} from \"../providers/tambo-thread-input-provider\";\nimport { useTamboThread } from \"../providers/tambo-thread-provider\";\nimport {\n  CombinedMutationResult,\n  combineMutationResults,\n} from \"../util/query-utils\";\nimport { getAvailableComponents } from \"../util/registry\";\nimport {\n  UseTamboMutationResult,\n  UseTamboQueryResult,\n  useTamboMutation,\n  useTamboQuery,\n} from \"./react-query-hooks\";\n\n/**\n * Configuration options for the useTamboSuggestions hook\n */\nexport interface useTamboSuggestionsOptions {\n  /** Maximum number of suggestions to generate (1-10, default 3) */\n  maxSuggestions?: number;\n}\n\n/**\n * Return value interface for useTamboSuggestions hook\n */\nexport interface useTamboSuggestionsResultInternal {\n  /** List of available suggestions (also available in generateResult.data) */\n  suggestions: TamboAI.Beta.Threads.Suggestion[];\n  /** ID of the currently selected suggestion */\n  selectedSuggestionId: string | null;\n  /**\n   * Accept and apply a suggestion (also available in acceptResult.mutateAsync)\n   * @param suggestion - The suggestion to accept\n   * @param shouldSubmit - Whether to automatically submit after accepting (default: false)\n   */\n  accept: (acceptOptions: {\n    suggestion: TamboAI.Beta.Threads.Suggestion;\n    shouldSubmit?: boolean;\n  }) => Promise<void>;\n\n  /** Result and network state for accepting a suggestion */\n  acceptResult: UseTamboMutationResult<\n    void,\n    Error,\n    { suggestion: TamboAI.Beta.Threads.Suggestion; shouldSubmit?: boolean }\n  >;\n\n  /** Result and network state for generating suggestions */\n  generateResult: UseTamboMutationResult<\n    TamboAI.Beta.Threads.Suggestions.SuggestionGenerateResponse | undefined,\n    Error,\n    AbortController\n  >;\n\n  /** The full suggestions query object from React Query */\n  suggestionsResult: UseTamboQueryResult<\n    TamboAI.Beta.Threads.Suggestions.SuggestionGenerateResponse | undefined\n  >;\n}\n\ntype useTamboSuggestionsResult = CombinedMutationResult<any, Error> &\n  useTamboSuggestionsResultInternal;\n\n/**\n * Hook for managing Tambo AI suggestions in a thread\n * @param options - Configuration options for suggestion generation\n * @returns Object containing suggestions state and control functions\n */\nexport function useTamboSuggestions(\n  options: useTamboSuggestionsOptions = {},\n): useTamboSuggestionsResult {\n  const { maxSuggestions = 3 } = options;\n  const { thread, generationStage } = useTamboThread();\n  const { sendThreadMessage } = useTambo();\n  const tamboClient = useTamboClient();\n  const { componentList, toolRegistry, componentToolAssociations } =\n    useTamboRegistry();\n\n  const [selectedSuggestionId, setSelectedSuggestionId] = useState<\n    string | null\n  >(null);\n  const { setValue: setInputValue } = useTamboThreadInput();\n\n  const latestMessage = thread.messages[thread.messages.length - 1];\n  const isLatestFromTambo = latestMessage?.role === \"assistant\";\n  const latestMessageId = latestMessage?.id;\n\n  // Reset selected suggestion when the message changes\n  useEffect(() => {\n    setSelectedSuggestionId(null);\n  }, [latestMessageId]);\n\n  const shouldGenerateSuggestions =\n    latestMessageId && isLatestFromTambo && isIdleStage(generationStage);\n  // Use React Query to fetch suggestions when a new hydra message is received\n  const suggestionsResult = useTamboQuery({\n    // Make sure the query key changes when the message changes, so that we are\n    // always generating suggestions when there is a new message\n    queryKey: [\n      \"suggestions\",\n      shouldGenerateSuggestions ? latestMessageId : null,\n    ],\n    queryFn: async () => {\n      if (!shouldGenerateSuggestions) {\n        return [];\n      }\n\n      // Get registered components from the registry\n      const components = getAvailableComponents(\n        componentList,\n        toolRegistry,\n        componentToolAssociations,\n      );\n\n      return await tamboClient.beta.threads.suggestions.generate(\n        latestMessageId,\n        {\n          id: thread.id,\n          maxSuggestions,\n          availableComponents: components,\n        },\n      );\n    },\n    // Only run the query if we have a valid message from hydra\n    enabled: Boolean(latestMessageId && isLatestFromTambo),\n    // Don't refetch on window focus or reconnect\n    refetchOnWindowFocus: false,\n    refetchOnReconnect: false,\n    // Don't retry on failure\n    retry: false,\n  });\n\n  // Accept suggestion mutation\n  const acceptMutationState = useTamboMutation<\n    void,\n    Error,\n    { suggestion: TamboAI.Beta.Threads.Suggestion; shouldSubmit?: boolean }\n  >({\n    mutationFn: async ({ suggestion, shouldSubmit = false }) => {\n      const validation = validateInput(suggestion.detailedSuggestion);\n      if (!validation.isValid) {\n        if (validation.error) {\n          throw validation.error;\n        }\n        throw new Error(INPUT_ERROR_MESSAGES.VALIDATION);\n      }\n\n      if (shouldSubmit) {\n        await sendThreadMessage(validation.sanitizedInput, {\n          threadId: thread.id,\n        });\n      } else {\n        setInputValue(validation.sanitizedInput);\n      }\n      setSelectedSuggestionId(suggestion.id);\n    },\n  });\n\n  // Generate suggestions mutation\n  const generateMutationState = useTamboMutation<\n    TamboAI.Beta.Threads.Suggestions.SuggestionGenerateResponse | undefined,\n    Error,\n    AbortController\n  >({\n    mutationFn: async (abortController: AbortController) => {\n      if (!shouldGenerateSuggestions) {\n        return undefined;\n      }\n\n      // Get registered components from the registry\n      const components = getAvailableComponents(\n        componentList,\n        toolRegistry,\n        componentToolAssociations,\n      );\n      return await tamboClient.beta.threads.suggestions.generate(\n        latestMessageId,\n        {\n          id: thread.id,\n          maxSuggestions,\n          availableComponents: components,\n        },\n        { signal: abortController.signal },\n      );\n    },\n    // Don't retry on failure\n    retry: false,\n  });\n\n  // Use the query data if available, otherwise use the mutation data\n  // Only return suggestions if the latest message is from hydra\n  const suggestions = isLatestFromTambo\n    ? (suggestionsResult.data ?? generateMutationState.data ?? [])\n    : [];\n\n  return {\n    suggestions,\n    accept: acceptMutationState.mutateAsync,\n    selectedSuggestionId,\n    acceptResult: acceptMutationState,\n    generateResult: generateMutationState,\n    suggestionsResult,\n    ...combineMutationResults(acceptMutationState, generateMutationState),\n  };\n}\n", "import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { ReactElement } from \"react\";\nimport type { InteractableConfig } from \"../hoc/with-tambo-interactable\";\n\n/**\n * Metadata for interactable components.\n * Used when a component is wrapped with withInteractable.\n */\nexport interface InteractableMetadata extends InteractableConfig {\n  /** Unique identifier for this interactable instance */\n  id: string;\n}\n\n/**\n * An extension of the TamboAI.Beta.Threads.ThreadMessage type that includes a\n * renderedComponent and optional interactable metadata\n */\nexport interface TamboThreadMessage extends TamboAI.Beta.Threads.ThreadMessage {\n  renderedComponent?: ReactElement | null;\n  /** Optional metadata for interactable components */\n  interactableMetadata?: InteractableMetadata;\n}\n\nexport enum GenerationStage {\n  IDLE = \"IDLE\",\n  CHOOSING_COMPONENT = \"CHOOSING_COMPONENT\",\n  FETCHING_CONTEXT = \"FETCHING_CONTEXT\",\n  HYDRATING_COMPONENT = \"HYDRATING_COMPONENT\",\n  STREAMING_RESPONSE = \"STREAMING_RESPONSE\",\n  COMPLETE = \"COMPLETE\",\n  ERROR = \"ERROR\",\n  CANCELLED = \"CANCELLED\",\n}\n/**\n * Checks if the generation stage is in a state where it can accept user input.\n * @param generationStage - The generation stage to check\n * @returns True if the generation stage is idle, false otherwise\n */\nexport function isIdleStage(generationStage: GenerationStage) {\n  return [\n    GenerationStage.IDLE,\n    GenerationStage.COMPLETE,\n    GenerationStage.ERROR,\n    GenerationStage.CANCELLED,\n  ].includes(generationStage);\n}\n", "export interface ValidationResult {\n  isValid: boolean;\n  error?: Error;\n  sanitizedInput: string;\n}\n\n/**\n * Validates the input of a message. Makes sure the message is not empty and is not too long.\n * @param input - The input to validate\n * @returns The validation result\n */\nexport function validateInput(input: string): ValidationResult {\n  const trimmed = input.trim();\n\n  if (trimmed.length === 0) {\n    return {\n      isValid: false,\n      error: new Error(\"Message cannot be empty\"),\n      sanitizedInput: trimmed,\n    };\n  }\n\n  // TODO(perf): Make this configurable if needed\n  if (trimmed.length > 10000) {\n    return {\n      isValid: false,\n      error: new Error(\"Message is too long (max 10000 characters)\"),\n      sanitizedInput: trimmed,\n    };\n  }\n\n  return {\n    isValid: true,\n    sanitizedInput: trimmed,\n  };\n}\n", "\"use client\";\nimport React, { PropsWithChildren, createContext, useContext } from \"react\";\nimport { TamboMcpProvider } from \"../mcp/tambo-mcp-provider\";\nimport { TamboInteractableContext } from \"../model/tambo-interactable\";\nimport {\n  TamboClientContext,\n  TamboClientContextProps,\n  TamboClientProvider,\n  TamboClientProviderProps,\n} from \"./tambo-client-provider\";\nimport {\n  TamboComponentContextProps,\n  TamboComponentProvider,\n  useTamboComponent,\n} from \"./tambo-component-provider\";\nimport {\n  ContextAttachmentState,\n  TamboContextAttachmentProvider,\n  useTamboContextAttachment,\n} from \"./tambo-context-attachment-provider\";\nimport {\n  TamboContextHelpersContextProps,\n  TamboContextHelpersProvider,\n  TamboContextHelpersProviderProps,\n  useTamboContextHelpers,\n} from \"./tambo-context-helpers-provider\";\nimport {\n  TamboInteractableProvider,\n  useTamboInteractable,\n} from \"./tambo-interactable-provider\";\nimport { TamboMcpTokenProvider } from \"./tambo-mcp-token-provider\";\nimport {\n  TamboRegistryProvider,\n  TamboRegistryProviderProps,\n} from \"./tambo-registry-provider\";\nimport { TamboThreadInputProvider } from \"./tambo-thread-input-provider\";\nimport {\n  TamboGenerationStageContextProps,\n  TamboThreadContextProps,\n  TamboThreadProvider,\n  TamboThreadProviderProps,\n  useTamboThread,\n} from \"./tambo-thread-provider\";\n\n/**\n * The TamboProvider gives full access to the whole Tambo API. This includes the\n * TamboAI client, the component registry, the current thread context, and interactable components.\n * @param props - The props for the TamboProvider\n * @param props.children - The children to wrap\n * @param props.tamboUrl - The URL of the Tambo API\n * @param props.apiKey - The API key for the Tambo API\n * @param props.components - The components to register\n * @param props.environment - The environment to use for the Tambo API\n * @param props.tools - The tools to register\n * @param props.mcpServers - The MCP servers to register (metadata only - use TamboMcpProvider for connections)\n * @param props.streaming - Whether to stream the response by default. Defaults to true.\n * @param props.autoGenerateThreadName - Whether to automatically generate thread names. Defaults to true.\n * @param props.autoGenerateNameThreshold - The message count threshold at which the thread name will be auto-generated. Defaults to 3.\n * @param props.contextHelpers - Configuration for which context helpers are enabled/disabled\n * @param props.userToken - The user's OAuth token (access or ID) used to identify the user and exchange for a Tambo session token\n * @param props.contextKey - Optional context key passed to thread input provider for scoping threads\n * @param props.onCallUnregisteredTool - Callback function called when an unregistered tool is called\n * @param props.initialMessages - Initial messages to be included in new threads\n * @returns The TamboProvider component\n */\nexport const TamboProvider: React.FC<\n  PropsWithChildren<\n    TamboClientProviderProps &\n      TamboRegistryProviderProps &\n      TamboThreadProviderProps &\n      TamboContextHelpersProviderProps\n  >\n> = ({\n  children,\n  tamboUrl,\n  apiKey,\n  userToken,\n  components,\n  environment,\n  tools,\n  mcpServers,\n  streaming,\n  autoGenerateThreadName,\n  autoGenerateNameThreshold,\n  contextHelpers,\n  contextKey,\n  initialMessages,\n  onCallUnregisteredTool,\n  getResource,\n  listResources,\n  resources,\n}) => {\n  return (\n    <TamboClientProvider\n      tamboUrl={tamboUrl}\n      apiKey={apiKey}\n      environment={environment}\n      userToken={userToken}\n    >\n      <TamboRegistryProvider\n        components={components}\n        tools={tools}\n        mcpServers={mcpServers}\n        onCallUnregisteredTool={onCallUnregisteredTool}\n        getResource={getResource}\n        listResources={listResources}\n        resources={resources}\n      >\n        <TamboContextHelpersProvider contextHelpers={contextHelpers}>\n          <TamboThreadProvider\n            contextKey={contextKey}\n            streaming={streaming}\n            autoGenerateThreadName={autoGenerateThreadName}\n            autoGenerateNameThreshold={autoGenerateNameThreshold}\n            initialMessages={initialMessages}\n          >\n            <TamboMcpTokenProvider>\n              <TamboMcpProvider contextKey={contextKey}>\n                <TamboContextAttachmentProvider>\n                  <TamboComponentProvider>\n                    <TamboInteractableProvider>\n                      <TamboThreadInputProvider>\n                        <TamboCompositeProvider>\n                          {children}\n                        </TamboCompositeProvider>\n                      </TamboThreadInputProvider>\n                    </TamboInteractableProvider>\n                  </TamboComponentProvider>\n                </TamboContextAttachmentProvider>\n              </TamboMcpProvider>\n            </TamboMcpTokenProvider>\n          </TamboThreadProvider>\n        </TamboContextHelpersProvider>\n      </TamboRegistryProvider>\n    </TamboClientProvider>\n  );\n};\n\nexport type TamboContextProps = TamboClientContextProps &\n  TamboThreadContextProps &\n  TamboGenerationStageContextProps &\n  TamboComponentContextProps &\n  TamboInteractableContext &\n  TamboContextHelpersContextProps &\n  ContextAttachmentState;\n\nexport const TamboContext = createContext<TamboContextProps>(\n  {} as TamboContextProps,\n);\n\n/**\n * TamboCompositeProvider is a provider that combines the TamboClient,\n * TamboThread, TamboComponent, and TamboInteractable providers\n * @param props - The props for the TamboCompositeProvider\n * @param props.children - The children to wrap\n * @returns The wrapped component\n */\nexport const TamboCompositeProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const threads = useTamboThread();\n  const clientContext = useContext(TamboClientContext);\n  if (!clientContext) {\n    throw new Error(\n      \"TamboCompositeProvider must be used within a TamboClientProvider\",\n    );\n  }\n  const { client, queryClient, isUpdatingToken } = clientContext;\n  const componentRegistry = useTamboComponent();\n  const interactableComponents = useTamboInteractable();\n  const contextHelpers = useTamboContextHelpers();\n  const contextAttachment = useTamboContextAttachment();\n\n  return (\n    <TamboContext.Provider\n      value={{\n        client,\n        queryClient,\n        isUpdatingToken,\n        ...componentRegistry,\n        ...threads,\n        ...interactableComponents,\n        ...contextHelpers,\n        ...contextAttachment,\n      }}\n    >\n      {children}\n    </TamboContext.Provider>\n  );\n};\n\n/**\n * The useTambo hook provides access to the Tambo API. This is the primary entrypoint\n * for the Tambo React SDK.\n *\n * This includes the TamboAI client, the component registry, the current thread context,\n * and interactable component management.\n * @returns The Tambo API\n */\nexport const useTambo = () => {\n  return useContext(TamboContext);\n};\n", "import React, {\n  createContext,\n  FC,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { ServerType } from \"./mcp-constants\";\nimport {\n  getMcpServerUniqueKey,\n  type NormalizedMcpServerInfo,\n} from \"../model/mcp-server-info\";\nimport { useTamboMcpToken } from \"../providers/tambo-mcp-token-provider\";\nimport {\n  useTamboMcpServerInfos,\n  useTamboRegistry,\n} from \"../providers/tambo-registry-provider\";\nimport { isContentPartArray, toText } from \"../util/content-parts\";\nimport { type ElicitationContextState, useElicitation } from \"./elicitation\";\nimport {\n  MCPClient,\n  MCPElicitationHandler,\n  MCPHandlers,\n  MCPSamplingHandler,\n  MCPTransport,\n} from \"./mcp-client\";\n\n/**\n * Extracts error message from MCP tool result content.\n * Handles both array and string content formats.\n * Always returns a string, even for invalid/null inputs.\n * @returns The extracted error message as a string\n */\nexport function extractErrorMessage(content: unknown): string {\n  if (content === undefined || content === null) {\n    return \"Unknown error occurred\";\n  }\n\n  if (Array.isArray(content)) {\n    const textItems = content\n      .filter((item) => item?.type === \"text\" && typeof item.text === \"string\")\n      .map((item) => item.text);\n\n    return textItems.length > 0\n      ? textItems.join(\" \")\n      : \"Error occurred but no details provided\";\n  }\n\n  if (typeof content === \"object\") {\n    return JSON.stringify(content);\n  }\n\n  return `${content}`;\n}\n\n/**\n * Normalized MCP server information as consumed by the provider.\n *\n * Extends `NormalizedMcpServerInfo` from the core model by:\n * - narrowing `handlers` to `Partial<MCPHandlers>`\n * - adding a stable `key` derived from URL/transport/headers\n * - adding `serverType` to distinguish internal vs browser-side servers\n *\n * The registry is responsible for producing `NormalizedMcpServerInfo`\n * instances; this type adds the MCP-specific wiring needed to connect and\n * track clients.\n */\ninterface McpServerConfig extends NormalizedMcpServerInfo {\n  /**\n   * Optional handlers for elicitation and sampling requests from the server.\n   * Interpreted as a partial set of MCP handlers.\n   */\n  handlers?: Partial<MCPHandlers>;\n  /**\n   * Stable identity for this server derived from its URL/transport/headers.\n   * Present for all server states (connected or failed).\n   */\n  key: string;\n  /**\n   * Type of server - determines how resources are resolved.\n   * Internal servers are resolved server-side, browser-side servers are resolved client-side.\n   */\n  serverType: ServerType;\n}\n\n/**\n * Connected MCP server with an active client.\n */\nexport interface ConnectedMcpServer extends McpServerConfig {\n  client: MCPClient;\n}\n\n/**\n * Failed MCP server with a connection error.\n */\nexport interface FailedMcpServer extends McpServerConfig {\n  client?: never;\n  connectionError: Error;\n}\n\n/**\n * An active or failed MCP server, with access to the MCP client.\n */\nexport type McpServer = ConnectedMcpServer | FailedMcpServer;\n\n/**\n * Provider-level MCP handlers that receive the McpServerInfo as context in addition to the request.\n * These handlers are applied to all MCP servers unless overridden by per-server handlers.\n *\n * Handlers receive three parameters:\n * 1. request - The MCP request\n * 2. extra - RequestHandlerExtra containing AbortSignal and other metadata\n * 3. serverInfo - Configuration of the MCP server that triggered this request\n */\nexport interface ProviderMCPHandlers {\n  elicitation?: (\n    request: Parameters<MCPElicitationHandler>[0],\n    extra: Parameters<MCPElicitationHandler>[1],\n    serverInfo: McpServerConfig,\n  ) => ReturnType<MCPElicitationHandler>;\n  sampling?: (\n    request: Parameters<MCPSamplingHandler>[0],\n    extra: Parameters<MCPSamplingHandler>[1],\n    serverInfo: McpServerConfig,\n  ) => ReturnType<MCPSamplingHandler>;\n}\n\n/**\n * Context value for MCP provider including server list and elicitation state\n */\ninterface McpProviderContextValue extends ElicitationContextState {\n  servers: McpServer[];\n}\n\nconst McpProviderContext = createContext<McpProviderContextValue>({\n  servers: [],\n  elicitation: null,\n  resolveElicitation: null,\n});\n\n// Constant for the internal Tambo MCP server name\nconst TAMBO_INTERNAL_MCP_SERVER_NAME = \"__tambo_internal_mcp_server__\";\n\n/**\n * Creates a stable hash of a string for use as a cache key.\n * Uses Java-style string hashing (DJB2-like) for deterministic results.\n *\n * Note: We use a synchronous hash instead of crypto.subtle.digest because:\n * - crypto.subtle.digest is async, which adds complexity in React hooks (useMemo, useEffect)\n * - This is not for security, just for creating a stable identifier to detect token changes\n * - Synchronous hashing avoids race conditions and simplifies component lifecycle\n * @param input - The string to hash\n * @returns A compact base36 hash string\n */\nfunction hashString(input: string): string {\n  let hash = 0;\n  for (let i = 0; i < input.length; i++) {\n    hash = (Math.imul(31, hash) + input.charCodeAt(i)) | 0;\n  }\n  return (hash >>> 0).toString(36);\n}\n\n/**\n * Safely closes an MCP client, handling both sync and async close methods.\n * Logs errors but doesn't throw.\n */\nfunction closeClientSafely(server: McpServer): void {\n  if (!server?.client?.close) return;\n\n  try {\n    const closeResult = server.client.close();\n    // If it returns a promise, handle errors but don't wait\n    if (closeResult && typeof closeResult.catch === \"function\") {\n      void closeResult.catch((error) => {\n        const url = server.url ?? \"(unknown url)\";\n        console.error(`Error closing MCP client for ${url}:`, error);\n      });\n    }\n  } catch (error) {\n    const url = server.url ?? \"(unknown url)\";\n    console.error(`Error closing MCP client for ${url}:`, error);\n  }\n}\n\n/**\n * Builds effective handlers for a server, with per-server overrides taking\n * precedence over provider-level handlers.\n * @returns The effective handlers with per-server overrides applied\n */\nfunction buildEffectiveHandlers(\n  serverInfo: McpServerConfig,\n  providerElicitationHandler: ProviderMCPHandlers[\"elicitation\"] | undefined,\n  providerSamplingHandler: ProviderMCPHandlers[\"sampling\"] | undefined,\n): Partial<MCPHandlers> {\n  const effectiveHandlers: Partial<MCPHandlers> = {};\n\n  if (serverInfo.handlers?.elicitation) {\n    effectiveHandlers.elicitation = serverInfo.handlers.elicitation;\n  } else if (providerElicitationHandler) {\n    effectiveHandlers.elicitation = async (\n      request: Parameters<MCPElicitationHandler>[0],\n      extra: Parameters<MCPElicitationHandler>[1],\n    ) => await providerElicitationHandler(request, extra, serverInfo);\n  }\n\n  if (serverInfo.handlers?.sampling) {\n    effectiveHandlers.sampling = serverInfo.handlers.sampling;\n  } else if (providerSamplingHandler) {\n    effectiveHandlers.sampling = async (\n      request: Parameters<MCPSamplingHandler>[0],\n      extra: Parameters<MCPSamplingHandler>[1],\n    ) => await providerSamplingHandler(request, extra, serverInfo);\n  }\n\n  return effectiveHandlers;\n}\n\n/**\n * Hook to compute the stable map of server configurations from registry servers\n * and the internal Tambo MCP server (when token is available).\n * @returns A map of server key to server configuration\n */\nfunction useServerConfigs(\n  mcpServers: NormalizedMcpServerInfo[],\n  mcpAccessToken: string | null | undefined,\n  tamboBaseUrl: string | null | undefined,\n): Map<string, McpServerConfig> {\n  return useMemo(() => {\n    const serverMap = new Map<string, McpServerConfig>();\n\n    // Add user-provided MCP servers (browser-side)\n    mcpServers.forEach((server) => {\n      const serverInfo = normalizeServerInfo(server, ServerType.BROWSER_SIDE);\n      serverMap.set(serverInfo.key, serverInfo);\n    });\n\n    // Add internal Tambo MCP server if we have an access token and a base URL\n    if (mcpAccessToken && tamboBaseUrl) {\n      const base = new URL(tamboBaseUrl);\n      base.pathname = `${base.pathname.replace(/\\/+$/, \"\")}/mcp`;\n      const tamboMcpUrl = base.toString();\n      const tokenHash = hashString(mcpAccessToken);\n      const internalServer: NormalizedMcpServerInfo = {\n        name: TAMBO_INTERNAL_MCP_SERVER_NAME,\n        url: tamboMcpUrl,\n        transport: MCPTransport.HTTP,\n        serverKey: `tambo-${tokenHash}`,\n        customHeaders: {\n          Authorization: `Bearer ${mcpAccessToken}`,\n        },\n      };\n      const serverInfo = normalizeServerInfo(\n        internalServer,\n        ServerType.TAMBO_INTERNAL,\n      );\n      serverMap.set(serverInfo.key, serverInfo);\n    }\n\n    return serverMap;\n  }, [mcpServers, mcpAccessToken, tamboBaseUrl]);\n}\n\ninterface ToolOwnershipRefs {\n  toolOwnerRef: React.MutableRefObject<Map<string, string>>;\n  keyToToolsRef: React.MutableRefObject<Map<string, Set<string>>>;\n}\n\n/**\n * Registers tools from a connected MCP server with deduplication.\n */\nasync function registerServerTools(\n  client: MCPClient,\n  serverInfo: McpServerConfig,\n  key: string,\n  shouldPrefix: boolean,\n  clientMap: Map<string, McpServer>,\n  ownershipRefs: ToolOwnershipRefs,\n  registerTool: ReturnType<typeof useTamboRegistry>[\"registerTool\"],\n): Promise<void> {\n  const { toolOwnerRef, keyToToolsRef } = ownershipRefs;\n\n  try {\n    const tools = await client.listTools();\n\n    tools.forEach((tool) => {\n      const toolName = shouldPrefix\n        ? `${serverInfo.serverKey}__${tool.name}`\n        : tool.name;\n\n      // Skip if another server already owns this tool\n      const currentOwner = toolOwnerRef.current.get(toolName);\n      if (currentOwner && currentOwner !== key) {\n        return;\n      }\n\n      // Record ownership\n      if (!currentOwner) {\n        toolOwnerRef.current.set(toolName, key);\n        if (!keyToToolsRef.current.has(key)) {\n          keyToToolsRef.current.set(key, new Set());\n        }\n        keyToToolsRef.current.get(key)!.add(toolName);\n      }\n\n      registerTool({\n        description: tool.description ?? \"\",\n        name: toolName,\n        tool: async (args: Record<string, unknown> = {}) => {\n          const server = clientMap.get(key);\n          if (!server?.client) {\n            throw new Error(\n              `MCP server for tool ${tool.name} is not connected`,\n            );\n          }\n          const result = await server.client.callTool(tool.name, args);\n          if (result.isError) {\n            const errorMessage = extractErrorMessage(result.content);\n            throw new Error(errorMessage);\n          }\n          return result.content;\n        },\n        inputSchema: tool.inputSchema ?? {},\n        outputSchema: {},\n        transformToContent: (content: unknown) => {\n          if (isContentPartArray(content)) {\n            return content;\n          }\n          return [{ type: \"text\", text: toText(content) }];\n        },\n        ...(\"maxCalls\" in tool && tool.maxCalls !== undefined\n          ? { maxCalls: tool.maxCalls }\n          : {}),\n      });\n    });\n  } catch (error) {\n    console.error(\n      `Failed to register tools from MCP server ${serverInfo.url}:`,\n      error,\n    );\n  }\n}\n\n/**\n * Releases tool ownership for a server being removed.\n */\nfunction releaseToolOwnership(\n  key: string,\n  ownershipRefs: ToolOwnershipRefs,\n): void {\n  const { toolOwnerRef, keyToToolsRef } = ownershipRefs;\n  const owned = keyToToolsRef.current.get(key);\n  if (owned) {\n    for (const name of owned) {\n      toolOwnerRef.current.delete(name);\n    }\n    keyToToolsRef.current.delete(key);\n  }\n}\n\n/**\n * This provider is used to register tools from MCP servers.\n * It automatically includes an internal Tambo MCP server when an MCP access token is available.\n *\n * **BREAKING CHANGE**: This provider no longer accepts `mcpServers` as a prop.\n * Instead, pass `mcpServers` to `TamboProvider` or `TamboRegistryProvider`.\n * This provider must be wrapped inside `TamboProvider` to access the MCP server registry.\n * @param props - The provider props\n * @param props.handlers - Optional handlers applied to all MCP servers unless overridden per-server\n * @param props.contextKey - Optional context key for fetching threadless MCP tokens when not in a thread\n * @param props.children - The children to wrap\n * @returns The TamboMcpProvider component\n */\nexport const TamboMcpProvider: FC<{\n  handlers?: ProviderMCPHandlers;\n  contextKey?: string;\n  children: React.ReactNode;\n}> = ({ handlers, contextKey, children }) => {\n  const { registerTool } = useTamboRegistry();\n  const { mcpAccessToken, tamboBaseUrl } = useTamboMcpToken(contextKey);\n  const mcpServers = useTamboMcpServerInfos();\n  const providerSamplingHandler = handlers?.sampling;\n\n  // Elicitation state and default handler\n  const { elicitation, resolveElicitation, defaultElicitationHandler } =\n    useElicitation();\n\n  // Use provided handler or fall back to default\n  const providerElicitationHandler =\n    handlers?.elicitation ?? defaultElicitationHandler;\n\n  // Stable reference to track active clients by server key\n  const clientMapRef = useRef<Map<string, McpServer>>(new Map());\n  // Track tool ownership to prevent duplicate registrations across servers\n  const toolOwnerRef = useRef<Map<string, string>>(new Map());\n  const keyToToolsRef = useRef<Map<string, Set<string>>>(new Map());\n  const ownershipRefs: ToolOwnershipRefs = { toolOwnerRef, keyToToolsRef };\n\n  // State for exposing connected servers to consumers\n  const [connectedMcpServers, setConnectedMcpServers] = useState<McpServer[]>(\n    [],\n  );\n\n  // Compute server configurations from registry and internal server\n  const currentServersMap = useServerConfigs(\n    mcpServers,\n    mcpAccessToken,\n    tamboBaseUrl,\n  );\n\n  // Main effect: manage client lifecycle (create/remove)\n  useClientLifecycle(\n    currentServersMap,\n    clientMapRef,\n    ownershipRefs,\n    providerElicitationHandler,\n    providerSamplingHandler,\n    registerTool,\n    setConnectedMcpServers,\n  );\n\n  // Update handlers when they change (without recreating clients)\n  useHandlerUpdates(\n    currentServersMap,\n    clientMapRef,\n    providerElicitationHandler,\n    providerSamplingHandler,\n  );\n\n  // Cleanup on unmount: close all clients\n  useCleanupOnUnmount(clientMapRef, ownershipRefs);\n\n  const contextValue = useMemo(\n    () => ({\n      servers: connectedMcpServers,\n      elicitation,\n      resolveElicitation,\n    }),\n    [connectedMcpServers, elicitation, resolveElicitation],\n  );\n\n  return (\n    <McpProviderContext.Provider value={contextValue}>\n      {children}\n    </McpProviderContext.Provider>\n  );\n};\n\n/**\n * Hook to manage client lifecycle: creating clients for new servers,\n * removing clients for servers that are no longer in the list.\n */\nfunction useClientLifecycle(\n  currentServersMap: Map<string, McpServerConfig>,\n  clientMapRef: React.MutableRefObject<Map<string, McpServer>>,\n  ownershipRefs: ToolOwnershipRefs,\n  providerElicitationHandler: ProviderMCPHandlers[\"elicitation\"] | undefined,\n  providerSamplingHandler: ProviderMCPHandlers[\"sampling\"] | undefined,\n  registerTool: ReturnType<typeof useTamboRegistry>[\"registerTool\"],\n  setConnectedMcpServers: React.Dispatch<React.SetStateAction<McpServer[]>>,\n): void {\n  useEffect(() => {\n    const clientMap = clientMapRef.current;\n    const currentKeys = new Set(currentServersMap.keys());\n    const existingKeys = new Set(clientMap.keys());\n\n    // 1. Remove clients that are no longer in the current server list\n    const keysToRemove = Array.from(existingKeys).filter(\n      (key) => !currentKeys.has(key),\n    );\n    keysToRemove.forEach((key) => {\n      const server = clientMap.get(key);\n      if (server) {\n        closeClientSafely(server);\n      }\n      releaseToolOwnership(key, ownershipRefs);\n      clientMap.delete(key);\n    });\n\n    // 2. Add new clients for servers that don't exist yet\n    const keysToAdd = Array.from(currentKeys).filter(\n      (key) => !existingKeys.has(key),\n    );\n\n    async function addClients(keys: string[]) {\n      await Promise.allSettled(\n        keys.map(async (key) => {\n          const serverInfo = currentServersMap.get(key)!;\n\n          try {\n            const effectiveHandlers = buildEffectiveHandlers(\n              serverInfo,\n              providerElicitationHandler,\n              providerSamplingHandler,\n            );\n\n            const client = await MCPClient.create(\n              serverInfo.url,\n              serverInfo.transport,\n              serverInfo.customHeaders,\n              undefined,\n              undefined,\n              effectiveHandlers,\n            );\n\n            const connectedServer: ConnectedMcpServer = {\n              ...serverInfo,\n              client,\n            };\n\n            clientMap.set(key, connectedServer);\n            setConnectedMcpServers(Array.from(clientMap.values()));\n\n            // Register tools from this server\n            const shouldPrefix = currentServersMap.size > 1;\n            await registerServerTools(\n              client,\n              serverInfo,\n              key,\n              shouldPrefix,\n              clientMap,\n              ownershipRefs,\n              registerTool,\n            );\n          } catch (error) {\n            const failedServer: FailedMcpServer = {\n              ...serverInfo,\n              connectionError: error as Error,\n            };\n            clientMap.set(key, failedServer);\n            setConnectedMcpServers(Array.from(clientMap.values()));\n            console.error(\n              `Failed to connect to MCP server ${serverInfo.url}:`,\n              error,\n            );\n          }\n        }),\n      );\n    }\n\n    if (keysToAdd.length > 0) {\n      addClients(keysToAdd).catch((err) => {\n        console.error(\"Unexpected error in addClients:\", err);\n      });\n    }\n\n    // Update state after removals\n    if (keysToRemove.length > 0) {\n      setConnectedMcpServers(Array.from(clientMap.values()));\n    }\n    // Note: refs (clientMapRef, ownershipRefs) and setters (setConnectedMcpServers)\n    // are intentionally excluded from deps as they are stable references\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    currentServersMap,\n    providerElicitationHandler,\n    providerSamplingHandler,\n    registerTool,\n  ]);\n}\n\n/**\n * Hook to update handlers on connected clients when provider handlers change.\n */\nfunction useHandlerUpdates(\n  currentServersMap: Map<string, McpServerConfig>,\n  clientMapRef: React.MutableRefObject<Map<string, McpServer>>,\n  providerElicitationHandler: ProviderMCPHandlers[\"elicitation\"] | undefined,\n  providerSamplingHandler: ProviderMCPHandlers[\"sampling\"] | undefined,\n): void {\n  useEffect(() => {\n    const clientMap = clientMapRef.current;\n\n    clientMap.forEach((server, key) => {\n      if (!server.client) {\n        return; // Skip failed servers\n      }\n\n      const serverInfo = currentServersMap.get(key);\n      if (!serverInfo) {\n        return; // Server was removed, handled by lifecycle effect\n      }\n\n      // Build effective handlers and update the client\n      const effectiveElicitationHandler =\n        serverInfo.handlers?.elicitation ??\n        (providerElicitationHandler\n          ? async (\n              request: Parameters<MCPElicitationHandler>[0],\n              extra: Parameters<MCPElicitationHandler>[1],\n            ) => await providerElicitationHandler(request, extra, serverInfo)\n          : undefined);\n\n      const effectiveSamplingHandler =\n        serverInfo.handlers?.sampling ??\n        (providerSamplingHandler\n          ? async (\n              request: Parameters<MCPSamplingHandler>[0],\n              extra: Parameters<MCPSamplingHandler>[1],\n            ) => await providerSamplingHandler(request, extra, serverInfo)\n          : undefined);\n\n      server.client.updateElicitationHandler?.(effectiveElicitationHandler);\n      server.client.updateSamplingHandler?.(effectiveSamplingHandler);\n    });\n    // Note: clientMapRef is intentionally excluded from deps as it's a stable ref\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentServersMap, providerElicitationHandler, providerSamplingHandler]);\n}\n\n/**\n * Hook to cleanup all clients and tool ownership on component unmount.\n */\nfunction useCleanupOnUnmount(\n  clientMapRef: React.MutableRefObject<Map<string, McpServer>>,\n  ownershipRefs: ToolOwnershipRefs,\n): void {\n  useEffect(() => {\n    const clientMap = clientMapRef.current;\n    const { toolOwnerRef, keyToToolsRef } = ownershipRefs;\n    return () => {\n      clientMap.forEach((server) => {\n        closeClientSafely(server);\n      });\n      clientMap.clear();\n      toolOwnerRef.current.clear();\n      keyToToolsRef.current.clear();\n    };\n    // Only run cleanup on unmount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n}\n\n/**\n * Hook to access the actual MCP servers, as they are connected (or fail to\n * connect).\n *\n * You can call methods on the MCP client that is included in the MCP server\n * object.\n *\n * If the server fails to connect, the `client` property will be `undefined` and\n * the `connectionError` property will be set.\n *\n * For example, to forcibly disconnect and reconnect all MCP servers:\n *\n * ```tsx\n * const mcpServers = useTamboMcpServers();\n * mcpServers.forEach((mcpServer) => {\n *   mcpServer.client?.reconnect();\n * });\n * ```\n *\n * Note that the MCP servers are not guaranteed to be in the same order as the\n * input array, because they are added as they are connected.\n * @returns The MCP servers\n */\nexport const useTamboMcpServers = () => {\n  return useContext(McpProviderContext).servers;\n};\n\n/**\n * Hook to access MCP elicitation state from TamboMcpProvider.\n * This provides access to the current elicitation request and methods to respond to it.\n *\n * The elicitation state is automatically managed by TamboMcpProvider when MCP servers\n * request user input through the elicitation protocol.\n * @returns The elicitation state with current request and response handler\n * @example\n * ```tsx\n * function ElicitationUI() {\n *   const { elicitation, resolveElicitation } = useTamboMcpElicitation();\n *\n *   if (!elicitation) return null;\n *\n *   return (\n *     <div>\n *       <p>{elicitation.message}</p>\n *       <button onClick={() => resolveElicitation?.({ action: \"accept\", content: {} })}>\n *         Accept\n *       </button>\n *     </div>\n *   );\n * }\n * ```\n */\nexport const useTamboMcpElicitation = (): ElicitationContextState => {\n  const context = useContext(McpProviderContext);\n  return {\n    elicitation: context.elicitation,\n    resolveElicitation: context.resolveElicitation,\n  };\n};\n\n/**\n * @deprecated Use `useTamboMcpElicitation` instead.\n * This hook will be removed in a future version.\n */\nexport const useTamboElicitationContext = useTamboMcpElicitation;\n\n/**\n * Normalizes registry server metadata into a `McpServerConfig`.\n *\n * Accepts a `NormalizedMcpServerInfo`, which already guarantees a concrete\n * `transport` and a `serverKey` derived by the registry, and narrows the\n * opaque `handlers` field to `Partial<MCPHandlers>`.\n * @param server - The normalized MCP server info from the registry\n * @param serverType - The type of server (internal vs browser-side)\n * @returns The server config with typed handlers, unique key, and server type\n */\nfunction normalizeServerInfo(\n  server: NormalizedMcpServerInfo,\n  serverType: ServerType,\n): McpServerConfig {\n  // Always use getMcpServerUniqueKey for connection identity to ensure\n  // that changes to URL, transport, or customHeaders trigger client recreation.\n  // The serverKey is kept for namespacing purposes (readable short name),\n  // but the connection identity key must include all connection properties.\n  const key = getMcpServerUniqueKey(server);\n  // Cast handlers to proper type if present\n  const handlers = server.handlers as Partial<MCPHandlers> | undefined;\n  return {\n    ...server,\n    handlers,\n    key,\n    serverType,\n  };\n}\n", "/**\n * Server type enum for distinguishing different kinds of MCP servers.\n * Used to determine how resources should be resolved.\n */\nexport const ServerType = {\n  /** Client-side MCP server passed via mcpServers prop */\n  BROWSER_SIDE: \"browser-side\",\n  /** Internal Tambo MCP server at /mcp endpoint (server-side MCP) */\n  TAMBO_INTERNAL: \"tambo-internal\",\n  /** Virtual server representing browser-only registry resources */\n  TAMBO_REGISTRY: \"tambo-registry\",\n} as const;\n\nexport type ServerType = (typeof ServerType)[keyof typeof ServerType];\n\n/**\n * Synthetic server key for local registry resources.\n * Used to give registry resources the same `@serverKey:uri` format as MCP resources.\n */\nexport const REGISTRY_SERVER_KEY = \"registry\";\n", "\"use client\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { TamboThread } from \"../model/tambo-thread\";\nimport { TamboClientContext } from \"./tambo-client-provider\";\nimport {\n  PLACEHOLDER_THREAD,\n  TamboThreadContext,\n} from \"./tambo-thread-provider\";\n\nexport interface TamboMcpTokenContextProps {\n  /**\n   * The current MCP access token for the internal Tambo MCP server.\n   * Prefers thread-specific token over threadless token.\n   */\n  mcpAccessToken: string | null;\n  /**\n   * The base URL for the Tambo API (used to construct the MCP server URL)\n   * Returns undefined if the client is not yet initialized\n   */\n  tamboBaseUrl: string | undefined;\n}\n\nconst TamboMcpTokenContext = createContext<\n  TamboMcpTokenContextProps | undefined\n>(undefined);\n\n/**\n * Provider for managing the MCP access token that is returned by the Tambo API.\n * This token is used to authenticate with the internal Tambo MCP server.\n *\n * Token selection logic:\n * - Returns the current thread's mcpAccessToken if available\n * - Returns null if no thread or thread has no token\n *\n * Token fetching:\n * - Thread-specific token: always fetched when switching to thread without token\n * - Tokens are fetched regardless of client-side MCP server configuration\n *   to support server-side MCP servers that are not visible to the provider\n * - Threadless tokens must be fetched by individual hooks/callbacks using contextKey\n * @internal\n * @param props - The provider props\n * @param props.children - The children to wrap\n * @returns The TamboMcpTokenProvider component\n */\nexport const TamboMcpTokenProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const clientContext = useContext(TamboClientContext);\n  if (!clientContext) {\n    throw new Error(\n      \"TamboMcpTokenProvider must be used within a TamboClientProvider\",\n    );\n  }\n  const { client } = clientContext;\n  const tamboBaseUrl = client.baseURL;\n\n  // Optional thread context - may not be available in all contexts\n  const threadContext = useContext(TamboThreadContext);\n  const currentThread = threadContext?.currentThread ?? null;\n  const currentThreadId = threadContext?.currentThreadId ?? null;\n  const setThreadMap = useMemo(\n    () => threadContext?.setThreadMap ?? (() => {}),\n    [threadContext?.setThreadMap],\n  );\n\n  // Track previous thread ID to detect thread switches\n  const previousThreadId = useRef<string | null>(null);\n\n  // Return the current thread's token or null\n  const selectedToken = useMemo(() => {\n    return currentThread?.mcpAccessToken ?? null;\n  }, [currentThread]);\n\n  // Fetch thread-specific token when switching to a thread without one\n  // Always fetch to support server-side MCP servers (not just client-side)\n  // Skip PLACEHOLDER_THREAD - never send it to the server\n  useEffect(() => {\n    const hasThreadChanged = previousThreadId.current !== currentThreadId;\n    previousThreadId.current = currentThreadId;\n\n    const isPlaceholderThread = currentThreadId === PLACEHOLDER_THREAD.id;\n    const shouldFetchThreadToken =\n      hasThreadChanged &&\n      currentThreadId &&\n      !isPlaceholderThread &&\n      currentThread &&\n      !currentThread.mcpAccessToken;\n\n    if (shouldFetchThreadToken) {\n      const fetchThreadToken = async () => {\n        try {\n          const response = await client.beta.auth.getMcpToken({\n            threadId: currentThreadId,\n          });\n          if (response.mcpAccessToken) {\n            // Update thread in threadMap with new token\n            setThreadMap((prev: Record<string, TamboThread>) => {\n              const thread = prev[currentThreadId];\n              if (thread) {\n                return {\n                  ...prev,\n                  [currentThreadId]: {\n                    ...thread,\n                    mcpAccessToken: response.mcpAccessToken,\n                  },\n                };\n              }\n              return prev;\n            });\n          }\n        } catch (error) {\n          console.error(\n            `Failed to fetch MCP token for thread ${currentThreadId}:`,\n            error,\n          );\n        }\n      };\n      void fetchThreadToken();\n    }\n  }, [currentThreadId, currentThread, client, setThreadMap]);\n\n  const value = useMemo(\n    () => ({ mcpAccessToken: selectedToken, tamboBaseUrl }),\n    [selectedToken, tamboBaseUrl],\n  );\n\n  return (\n    <TamboMcpTokenContext.Provider value={value}>\n      {children}\n    </TamboMcpTokenContext.Provider>\n  );\n};\n\n/**\n * Hook to access the current MCP access token with optional threadless token fetching.\n *\n * Token selection logic:\n * 1. If current thread has mcpAccessToken  use thread-specific token\n * 2. Else if contextKey provided and no thread (or placeholder thread)  fetch and use threadless token\n * 3. Else  null\n * @param contextKey - Optional context key for fetching threadless tokens when not in a thread\n * @returns The current MCP access token and base URL\n */\nexport const useTamboMcpToken = (\n  contextKey?: string,\n): TamboMcpTokenContextProps => {\n  const context = useContext(TamboMcpTokenContext);\n  if (context === undefined) {\n    throw new Error(\n      \"useTamboMcpToken must be used within a TamboMcpTokenProvider\",\n    );\n  }\n\n  const clientContext = useContext(TamboClientContext);\n  if (!clientContext) {\n    throw new Error(\n      \"useTamboMcpToken must be used within a TamboClientProvider\",\n    );\n  }\n  const { client } = clientContext;\n\n  const threadContext = useContext(TamboThreadContext);\n  const currentThreadId = threadContext?.currentThreadId ?? null;\n\n  // State for threadless token\n  const [threadlessToken, setThreadlessToken] = useState<string | null>(null);\n  const hasAttemptedFetch = useRef(false);\n\n  // Determine if we should fetch a threadless token\n  const isPlaceholderThread = currentThreadId === PLACEHOLDER_THREAD.id;\n  const shouldFetchThreadless =\n    contextKey &&\n    (!currentThreadId || isPlaceholderThread) &&\n    !context.mcpAccessToken &&\n    !threadlessToken &&\n    !hasAttemptedFetch.current;\n\n  // Fetch threadless token when needed\n  useEffect(() => {\n    if (shouldFetchThreadless) {\n      hasAttemptedFetch.current = true;\n      const fetchThreadlessToken = async () => {\n        try {\n          const response = await client.beta.auth.getMcpToken({ contextKey });\n          if (response.mcpAccessToken) {\n            setThreadlessToken(response.mcpAccessToken);\n          }\n        } catch (error) {\n          console.error(\"Failed to fetch threadless MCP token:\", error);\n        }\n      };\n      void fetchThreadlessToken();\n    }\n  }, [shouldFetchThreadless, client, contextKey]);\n\n  // Reset threadless token when switching to a real thread\n  useEffect(() => {\n    if (currentThreadId && currentThreadId !== PLACEHOLDER_THREAD.id) {\n      setThreadlessToken(null);\n      hasAttemptedFetch.current = false;\n    }\n  }, [currentThreadId]);\n\n  // Return thread token if available, otherwise threadless token\n  const selectedToken = context.mcpAccessToken ?? threadlessToken;\n\n  return {\n    mcpAccessToken: selectedToken,\n    tamboBaseUrl: context.tamboBaseUrl,\n  };\n};\n", "\"use client\";\nimport TamboAI, { advanceStream } from \"@tambo-ai/typescript-sdk\";\nimport { Thread } from \"@tambo-ai/typescript-sdk/resources/beta/threads/threads\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { TamboTool } from \"../model/component-metadata\";\nimport {\n  GenerationStage,\n  isIdleStage,\n  TamboThreadMessage,\n} from \"../model/generate-component-response\";\nimport { TamboThread } from \"../model/tambo-thread\";\nimport { toText } from \"../util/content-parts\";\nimport { renderComponentIntoMessage } from \"../util/generate-component\";\nimport {\n  getAvailableComponents,\n  getUnassociatedTools,\n  mapTamboToolToContextTool,\n} from \"../util/registry\";\nimport { handleToolCall } from \"../util/tool-caller\";\nimport { useTamboClient, useTamboQueryClient } from \"./tambo-client-provider\";\nimport { useTamboContextHelpers } from \"./tambo-context-helpers-provider\";\nimport { useTamboRegistry } from \"./tambo-registry-provider\";\n\n// Generation Stage Context - separate from thread context to prevent re-renders\nexport interface TamboGenerationStageContextProps {\n  generationStage: GenerationStage;\n  generationStatusMessage: string;\n  isIdle: boolean;\n}\n\nconst TamboGenerationStageContext = createContext<\n  TamboGenerationStageContextProps | undefined\n>(undefined);\n\ninterface TamboGenerationStageProviderProps {\n  generationStage: GenerationStage;\n  statusMessage: string;\n}\n\n/**\n *\n * This provider is used to provide the generation stage context to the descendants of the provider.\n * @param props - The props for the GenerationStageProvider\n * @param props.children - The children to wrap\n * @param props.generationStage - The generation stage to provide\n * @param props.statusMessage - The status message to provide\n * @returns The GenerationStageProvider component\n */\nexport const TamboGenerationStageProvider: React.FC<\n  PropsWithChildren<TamboGenerationStageProviderProps>\n> = ({ children, generationStage, statusMessage }) => {\n  const isIdle = isIdleStage(generationStage);\n\n  const contextValue = useMemo(() => {\n    return {\n      generationStage,\n      generationStatusMessage: statusMessage,\n      isIdle,\n    };\n  }, [generationStage, statusMessage, isIdle]);\n\n  return (\n    <TamboGenerationStageContext.Provider value={contextValue}>\n      {children}\n    </TamboGenerationStageContext.Provider>\n  );\n};\n\n// Type for partial message updates that requires threadId\ntype PartialTamboThreadMessageWithThreadId = Partial<TamboThreadMessage> & {\n  threadId: string;\n};\n\nexport interface TamboThreadContextProps {\n  /** The current thread */\n  thread: TamboThread;\n  /** The current thread ID */\n  currentThreadId: string | null;\n  /** The current thread (alias for thread, may be null) */\n  currentThread: TamboThread | null;\n  /** Map of all threads by ID */\n  threadMap: Record<string, TamboThread>;\n  /** Update the thread map (internal use only) */\n  setThreadMap: React.Dispatch<\n    React.SetStateAction<Record<string, TamboThread>>\n  >;\n  /** Switch to a different thread */\n  switchCurrentThread: (threadId: string, fetch?: boolean) => void;\n  /** Start a new thread */\n  startNewThread: () => void;\n  /** Update a thread's name */\n  updateThreadName: (name: string, threadId?: string) => void;\n  /** Let Tambo generate and set a thread's name based on the thread's messages */\n  generateThreadName: (threadId?: string) => Promise<Thread>;\n  /** Add a message to the current thread */\n  addThreadMessage: (\n    message: TamboThreadMessage,\n    sendToServer: boolean,\n  ) => Promise<TamboAI.Beta.Threads.ThreadMessage[]>;\n  /** Update a message in the current thread */\n  updateThreadMessage: (\n    id: string,\n    message: PartialTamboThreadMessageWithThreadId,\n    sendToServer: boolean,\n  ) => Promise<void>;\n  /** Cancel a thread */\n  cancel: (threadId?: string) => Promise<void>;\n  /** Whether the thread is streaming */\n  streaming: boolean;\n  /** Send a message to the current thread */\n  sendThreadMessage: (\n    message: string,\n    options?: {\n      threadId?: string;\n      streamResponse?: boolean;\n      contextKey?: string;\n      forceToolChoice?: string;\n      additionalContext?: Record<string, any>;\n      content?: TamboAI.Beta.Threads.ChatCompletionContentPart[];\n    },\n  ) => Promise<TamboThreadMessage>;\n  /** The context key to use for the thread */\n  contextKey?: string;\n}\n\n// Combined context interface that includes generation stage fields\nexport interface CombinedTamboThreadContextProps\n  extends TamboThreadContextProps, TamboGenerationStageContextProps {}\n\n/**\n * This is a stub entry for when the thread is not yet created, the first time\n * the user sends a message\n *\n * Note that the consumer needs to be careful never to send `PLACEHOLDER_THREAD.id` to the server,\n * as this doesn't really exist on the server side.\n */\nexport const PLACEHOLDER_THREAD: TamboThread = {\n  id: \"placeholder\",\n  messages: [],\n  createdAt: \"\",\n  projectId: \"\",\n  updatedAt: \"\",\n  metadata: {},\n};\n\nexport const TamboThreadContext = createContext<TamboThreadContextProps>({\n  thread: PLACEHOLDER_THREAD,\n  currentThreadId: PLACEHOLDER_THREAD.id,\n  currentThread: PLACEHOLDER_THREAD,\n  threadMap: { [PLACEHOLDER_THREAD.id]: PLACEHOLDER_THREAD },\n  setThreadMap: () => {\n    throw new Error(\"setThreadMap not implemented\");\n  },\n  /**\n   *\n   */\n  switchCurrentThread: () => {\n    throw new Error(\"switchCurrentThread not implemented\");\n  },\n  /**\n   *\n   */\n  startNewThread: () => {\n    throw new Error(\"startNewThread not implemented\");\n  },\n  /**\n   *\n   */\n  updateThreadName: () => {\n    throw new Error(\"updateThreadName not implemented\");\n  },\n  /**\n   *\n   */\n  generateThreadName: () => {\n    throw new Error(\"generateThreadName not implemented\");\n  },\n  /**\n   *\n   */\n  addThreadMessage: () => {\n    throw new Error(\"updateThreadMessageHistory not implemented\");\n  },\n  streaming: true,\n  /**\n   *\n   */\n  updateThreadMessage: () => {\n    throw new Error(\"updateThreadMessage not implemented\");\n  },\n  /**\n   *\n   */\n  sendThreadMessage: () => {\n    throw new Error(\"sendThreadMessage not implemented\");\n  },\n  /**\n   *\n   */\n  cancel: () => {\n    throw new Error(\"cancel not implemented\");\n  },\n});\n\nexport type InitialTamboThreadMessage = Pick<\n  TamboThreadMessage,\n  \"role\" | \"content\"\n> & {\n  /** Optional ID - will be auto-generated if not provided */\n  id?: string;\n  /** Optional creation timestamp - will be auto-generated if not provided */\n  createdAt?: string;\n  /** Optional additional context to include with the message */\n  additionalContext?: Record<string, any>;\n  /** Optional component state - will default to empty object if not provided */\n  componentState?: Record<string, any>;\n};\n\nexport interface TamboThreadProviderProps {\n  /** Whether to stream the response */\n  streaming?: boolean;\n  /** Initial messages to be included in new threads */\n  initialMessages?: InitialTamboThreadMessage[];\n  /** Whether to automatically generate thread names. Defaults to true. */\n  autoGenerateThreadName?: boolean;\n  /** The message count threshold at which the thread name will be auto-generated. Defaults to 3. */\n  autoGenerateNameThreshold?: number;\n  /** The context key to use for the thread */\n  contextKey?: string;\n}\n\n/**\n * The TamboThreadProvider is a React provider that provides a thread context\n * to the descendants of the provider.\n * @param props - The props for the TamboThreadProvider\n * @param props.children - The children to wrap\n * @param props.streaming - Whether to stream the response by default. Defaults to true.\n * @param props.initialMessages - Initial messages to be included in new threads\n * @param props.autoGenerateThreadName - Whether to automatically generate thread names. Defaults to true.\n * @param props.autoGenerateNameThreshold - The message count threshold at which the thread name will be auto-generated. Defaults to 3.\n * @param props.contextKey - The context key to use for thread isolation\n * @returns The TamboThreadProvider component\n */\nexport const TamboThreadProvider: React.FC<\n  PropsWithChildren<TamboThreadProviderProps>\n> = ({\n  children,\n  streaming = true,\n  initialMessages = [],\n  autoGenerateThreadName = true,\n  autoGenerateNameThreshold = 3,\n  contextKey,\n}) => {\n  // Create placeholder thread with initial messages\n  const placeholderThread: TamboThread = useMemo(\n    () => ({\n      id: \"placeholder\",\n      messages: initialMessages.map((msg) => ({\n        ...msg,\n        id: msg.id ?? crypto.randomUUID(),\n        threadId: \"placeholder\",\n        createdAt: msg.createdAt ?? new Date().toISOString(),\n        componentState: msg.componentState ?? {},\n      })),\n      createdAt: \"\",\n      projectId: \"\",\n      updatedAt: \"\",\n      metadata: {},\n      contextKey,\n    }),\n    [contextKey, initialMessages],\n  );\n\n  const [threadMap, setThreadMap] = useState<Record<string, TamboThread>>({\n    [placeholderThread.id]: placeholderThread,\n  });\n  const client = useTamboClient();\n  const queryClient = useTamboQueryClient();\n  const {\n    componentList,\n    toolRegistry,\n    componentToolAssociations,\n    onCallUnregisteredTool,\n  } = useTamboRegistry();\n  const { getAdditionalContext } = useTamboContextHelpers();\n  const [ignoreResponse, setIgnoreResponse] = useState(false);\n  const ignoreResponseRef = useRef(ignoreResponse);\n  const [currentThreadId, setCurrentThreadId] = useState<string>(\n    placeholderThread.id,\n  );\n  const currentThread: TamboThread | undefined = threadMap[currentThreadId];\n\n  // Generation stage props for GenerationStageProvider\n  const currentGenerationStage =\n    (currentThread?.generationStage as GenerationStage) ?? GenerationStage.IDLE;\n  const currentStatusMessage = currentThread?.statusMessage ?? \"\";\n\n  // Use existing messages from the current thread to avoid re-generating any components\n  const currentMessageCache = useMemo(() => {\n    const messageCache = new Map<string, TamboThreadMessage>();\n    if (currentThread) {\n      for (const message of currentThread.messages) {\n        messageCache.set(message.id, message);\n      }\n    }\n    return messageCache;\n  }, [currentThread]);\n\n  useEffect(() => {\n    ignoreResponseRef.current = ignoreResponse;\n  }, [ignoreResponse]);\n\n  const updateThreadsCache = useCallback(\n    async (\n      updateFn: (\n        old: TamboAI.Beta.Threads.ThreadsOffsetAndLimit | undefined,\n      ) => TamboAI.Beta.Threads.ThreadsOffsetAndLimit | undefined,\n      contextKey?: string,\n    ) => {\n      try {\n        const currentProject = await client.beta.projects.getCurrent();\n\n        queryClient.setQueryData(\n          [\"threads\", currentProject.id, contextKey],\n          updateFn,\n        );\n\n        await queryClient.invalidateQueries({\n          queryKey: [\"threads\"],\n        });\n      } catch (error) {\n        console.warn(\"Failed to update threads cache:\", error);\n      }\n    },\n    [client.beta.projects, queryClient],\n  );\n\n  const addThreadToCache = useCallback(\n    async (threadId: string, contextKey: string | undefined) => {\n      const optimisticThread = {\n        ...PLACEHOLDER_THREAD,\n        id: threadId,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n\n      await updateThreadsCache((old) => {\n        if (!old) return old;\n        return {\n          ...old,\n          items: [optimisticThread, ...(old.items ?? [])],\n          total: (old.total ?? 0) + 1,\n          count: (old.count ?? 0) + 1,\n        } as TamboAI.Beta.Threads.ThreadsOffsetAndLimit;\n      }, contextKey);\n    },\n    [updateThreadsCache],\n  );\n\n  const updateThreadInCache = useCallback(\n    async (\n      threadId: string,\n      updateFn: (\n        thread: TamboAI.Beta.Threads.Thread,\n      ) => TamboAI.Beta.Threads.Thread,\n      contextKey?: string,\n    ) => {\n      await updateThreadsCache((old) => {\n        if (!old?.items) return old;\n        return {\n          ...old,\n          items: old.items.map((thread) =>\n            thread.id === threadId ? updateFn(thread) : thread,\n          ),\n          total: old.total,\n          count: old.count,\n        } as TamboAI.Beta.Threads.ThreadsOffsetAndLimit;\n      }, contextKey);\n    },\n    [updateThreadsCache],\n  );\n\n  const fetchThread = useCallback(\n    async (threadId: string) => {\n      const thread = await client.beta.threads.retrieve(threadId);\n      const threadWithRenderedComponents = {\n        ...thread,\n        messages: thread.messages.map((message) => {\n          if (currentMessageCache.has(message.id)) {\n            const renderedMessage = currentMessageCache.get(message.id);\n            return {\n              ...renderedMessage,\n              ...message,\n            };\n          }\n          if (message.component?.componentName) {\n            const messageWithComponent = renderComponentIntoMessage(\n              message,\n              componentList,\n            );\n            return messageWithComponent;\n          }\n          return message;\n        }),\n      };\n\n      setThreadMap((prevMap) => {\n        const updatedThreadMap = {\n          ...prevMap,\n          [threadId]: threadWithRenderedComponents,\n        };\n        return updatedThreadMap;\n      });\n    },\n    [client.beta.threads, componentList, currentMessageCache],\n  );\n\n  useEffect(() => {\n    async function loadThread() {\n      try {\n        await fetchThread(currentThreadId);\n      } catch (error) {\n        console.error(\"Failed to fetch thread:\", error);\n      }\n    }\n\n    if (\n      currentThreadId &&\n      currentThreadId !== placeholderThread.id &&\n      !threadMap[currentThreadId]\n    ) {\n      loadThread().catch((err) => {\n        console.error(\"Unexpected error in loadThread:\", err);\n      });\n    }\n  }, [currentThreadId, fetchThread, threadMap, placeholderThread.id]);\n\n  const addThreadMessage = useCallback(\n    async (\n      message: TamboThreadMessage,\n      sendToServer = true,\n      createdAt: string = new Date().toISOString(),\n    ) => {\n      if (!currentThread) {\n        console.warn(\"Cannot add messages if we do not have a current thread\");\n        return [];\n      }\n\n      const chatMessage: TamboThreadMessage = {\n        ...message,\n        createdAt,\n      };\n      const threadId = message.threadId;\n      const messageId = chatMessage.id;\n      // optimistically update the thread in the local state\n      setThreadMap((prevMap) => {\n        if (!threadId) {\n          return prevMap;\n        }\n        const prevMessages = prevMap[threadId]?.messages || [];\n        const haveMessage = prevMessages.find((msg) => msg.id === messageId);\n        // Update in place if the message already exists\n        const updatedMessages = haveMessage\n          ? prevMessages.map((msg) => {\n              if (msg.id === messageId) {\n                return chatMessage;\n              }\n              return msg;\n            })\n          : [...prevMessages, chatMessage];\n\n        const updatedThreadMap = {\n          ...prevMap,\n          [threadId]: {\n            ...prevMap[threadId],\n            messages: updatedMessages,\n          },\n        };\n        return updatedThreadMap;\n      });\n\n      if (sendToServer) {\n        try {\n          await client.beta.threads.messages.create(message.threadId, {\n            content: message.content,\n            role: message.role,\n            additionalContext: chatMessage.additionalContext,\n          });\n        } catch (error) {\n          console.error(\"Failed to add message to server\", error);\n\n          // Revert optimistic local state update\n          setThreadMap((prev) => {\n            const prevMessages = prev[threadId]?.messages || [];\n\n            // addThreadMessage -> for new messages or simple updates\n            // On Fail -> remove the added/updated message (no prev state)\n            const updatedMessages = prevMessages.filter(\n              (msg) => msg.id !== messageId,\n            );\n            return {\n              ...prev,\n              [threadId]: {\n                ...prev[threadId],\n                messages: updatedMessages,\n              },\n            };\n          });\n          throw error;\n        }\n      }\n      return threadMap[threadId]?.messages || [];\n    },\n    [client.beta.threads.messages, currentThread, threadMap],\n  );\n\n  const updateThreadMessage = useCallback(\n    async (\n      id: string,\n      message: PartialTamboThreadMessageWithThreadId,\n      sendToServer = true,\n      createdAt: string = new Date().toISOString(),\n    ) => {\n      setThreadMap((prevMap) => {\n        const prevMessages = prevMap[message.threadId]?.messages || [];\n        const updatedMessages = prevMessages.map((msg) => {\n          if (msg.id === id) {\n            // Merge the partial update with the existing message\n            const updatedMessage: TamboThreadMessage = {\n              ...msg,\n              ...message,\n              id: msg.id,\n              createdAt: message.createdAt ?? msg.createdAt ?? createdAt,\n            };\n            return updatedMessage;\n          }\n          return msg;\n        });\n        return {\n          ...prevMap,\n          [message.threadId]: {\n            ...prevMap[message.threadId],\n            messages: updatedMessages,\n          },\n        };\n      });\n\n      if (sendToServer && message.content && message.role) {\n        try {\n          await client.beta.threads.messages.create(message.threadId, {\n            content: message.content,\n            role: message.role,\n            additionalContext: message.additionalContext,\n          });\n        } catch (error) {\n          console.error(\"Failed to update message on server\", error);\n\n          // Revert local state update by removing the optimistic message\n          setThreadMap((prev) => {\n            const updatedMessages = prev[message.threadId]?.messages?.filter(\n              (msg) => msg.id !== id,\n            );\n            return {\n              ...prev,\n              [message.threadId]: {\n                ...prev[message.threadId],\n                messages: updatedMessages,\n              },\n            };\n          });\n          throw error;\n        }\n      }\n    },\n    [client.beta.threads.messages],\n  );\n\n  const generateThreadName = useCallback(\n    async (threadId?: string, contextKey?: string) => {\n      threadId ??= currentThreadId;\n      if (threadId === placeholderThread.id) {\n        console.warn(\"Cannot generate name for empty thread\");\n        return threadMap[threadId];\n      }\n\n      const threadWithGeneratedName =\n        await client.beta.threads.generateName(threadId);\n\n      // Update local thread state\n      setThreadMap((prevMap) => {\n        if (!prevMap[threadId]) {\n          return prevMap;\n        }\n        return {\n          ...prevMap,\n          [threadId]: {\n            ...prevMap[threadId],\n            name: threadWithGeneratedName.name,\n          },\n        };\n      });\n\n      // Update threads cache to reflect the new name in the UI\n      await updateThreadInCache(\n        threadId,\n        (thread) => ({\n          ...thread,\n          name: threadWithGeneratedName.name,\n        }),\n        contextKey,\n      );\n\n      return threadWithGeneratedName;\n    },\n    [\n      client.beta.threads,\n      currentThreadId,\n      threadMap,\n      placeholderThread.id,\n      updateThreadInCache,\n    ],\n  );\n\n  const maybeAutoGenerateThreadName = useCallback(\n    (threadId: string, contextKey?: string) => {\n      // Use setThreadMap to access the latest state\n      setThreadMap((map) => {\n        const thread = map[threadId];\n\n        if (!thread || !autoGenerateThreadName) {\n          return map;\n        }\n\n        if (\n          autoGenerateNameThreshold == null ||\n          thread.id === placeholderThread.id\n        ) {\n          return map;\n        }\n\n        const messageCount = thread.messages.length;\n\n        // Only auto-generate if thread has no name and threshold is met\n        if (!thread.name && messageCount >= autoGenerateNameThreshold) {\n          // Generating a thread name is not critical, so we can fire-and-forget\n          void generateThreadName(threadId, contextKey).catch((error) => {\n            console.error(\"Failed to generate thread name:\", error);\n          });\n        }\n\n        return map;\n      });\n    },\n    [\n      autoGenerateThreadName,\n      autoGenerateNameThreshold,\n      placeholderThread.id,\n      generateThreadName,\n    ],\n  );\n\n  const startNewThread = useCallback(() => {\n    setCurrentThreadId(placeholderThread.id);\n    setThreadMap((prevMap) => {\n      return {\n        ...prevMap,\n        [placeholderThread.id]: placeholderThread,\n      };\n    });\n  }, [placeholderThread]);\n\n  const updateThreadName = useCallback(\n    async (name: string, threadId?: string) => {\n      threadId ??= currentThreadId;\n      const previousName = threadMap[threadId]?.name;\n\n      setThreadMap((prevMap) => {\n        if (!prevMap[threadId]) {\n          return prevMap;\n        }\n        return { ...prevMap, [threadId]: { ...prevMap[threadId], name } };\n      });\n\n      if (threadId !== placeholderThread.id) {\n        try {\n          const currentProject = await client.beta.projects.getCurrent();\n          await client.beta.threads.update(threadId, {\n            name,\n            projectId: currentProject.id,\n          });\n        } catch (error) {\n          console.error(\"Failed to update thread name on server\", error);\n          // Revert local state update\n          setThreadMap((prevMap) => {\n            if (!prevMap[threadId]) {\n              return prevMap;\n            }\n            return {\n              ...prevMap,\n              [threadId]: { ...prevMap[threadId], name: previousName },\n            };\n          });\n          throw error;\n        }\n      }\n    },\n    [\n      currentThreadId,\n      client.beta.projects,\n      client.beta.threads,\n      placeholderThread.id,\n      threadMap,\n    ],\n  );\n\n  const switchCurrentThread = useCallback(\n    async (threadId: string, fetch = true) => {\n      if (threadId === placeholderThread.id) {\n        console.warn(\"Switching to placeholder thread, may be a bug.\");\n        return;\n      }\n\n      setCurrentThreadId(threadId);\n      setThreadMap((prevMap) => {\n        if (prevMap[threadId]) {\n          return prevMap;\n        }\n        // If this is a new thread, add placeholder thread messages to the thread\n        const updatedThreadMap = {\n          ...prevMap,\n          [threadId]: {\n            ...prevMap[placeholderThread.id],\n            id: threadId,\n          },\n        };\n        return updatedThreadMap;\n      });\n\n      if (fetch) {\n        await fetchThread(threadId);\n      }\n    },\n    [fetchThread, placeholderThread],\n  );\n\n  const updateThreadStatus = useCallback(\n    (threadId: string, stage: GenerationStage, statusMessage?: string) => {\n      setThreadMap((prevMap) => {\n        const updatedThreadMap = {\n          ...prevMap,\n          [threadId]: {\n            ...prevMap[threadId],\n            generationStage: stage,\n            statusMessage: statusMessage,\n          },\n        };\n        return updatedThreadMap;\n      });\n    },\n    [],\n  );\n\n  const cancel = useCallback(\n    async (threadId?: string) => {\n      threadId ??= currentThreadId;\n      const currentGenerationStage =\n        currentThread?.generationStage ?? GenerationStage.IDLE;\n      if (isIdleStage(currentGenerationStage as GenerationStage)) {\n        return;\n      }\n      setIgnoreResponse(true);\n      setThreadMap((prevMap) => {\n        if (!prevMap[threadId]) {\n          return prevMap;\n        }\n\n        return {\n          ...prevMap,\n          [threadId]: {\n            ...prevMap[threadId],\n            generationStage: GenerationStage.CANCELLED,\n            messages: prevMap[threadId].messages.map((message) => {\n              if (\n                message.id ===\n                prevMap[threadId].messages[\n                  prevMap[threadId].messages.length - 1\n                ].id\n              ) {\n                return {\n                  ...message,\n                  isCancelled: true,\n                };\n              }\n              return message;\n            }),\n          },\n        };\n      });\n\n      await client.beta.threads.cancel(threadId);\n    },\n    [client.beta.threads, currentThreadId, currentThread?.generationStage],\n  );\n\n  const handleAdvanceStream = useCallback(\n    async (\n      stream: AsyncIterable<TamboAI.Beta.Threads.ThreadAdvanceResponse>,\n      params: TamboAI.Beta.Threads.ThreadAdvanceByIDParams,\n      threadId: string,\n      contextKey?: string,\n    ): Promise<TamboThreadMessage> => {\n      if (ignoreResponseRef.current) {\n        setIgnoreResponse(false);\n        return createEmptyMessage(threadId);\n      }\n      let finalMessage: Readonly<TamboThreadMessage> | undefined;\n      let hasSetThreadId = false;\n      updateThreadStatus(threadId, GenerationStage.STREAMING_RESPONSE);\n\n      for await (const chunk of stream) {\n        // Store MCP access token in thread data\n        if (chunk.mcpAccessToken) {\n          // note that we're only setting it positively during streaming, because it might\n          // not have been set yet in the chunk (i.e. we're not unsetting it in the chunk)\n          setThreadMap((prev) => {\n            const thread = prev[threadId];\n            if (thread) {\n              return {\n                ...prev,\n                [threadId]: {\n                  ...thread,\n                  mcpAccessToken: chunk.mcpAccessToken,\n                },\n              };\n            }\n            return prev;\n          });\n        }\n\n        if (chunk.responseMessageDto.toolCallRequest) {\n          const toolName = chunk.responseMessageDto.toolCallRequest.toolName;\n          updateThreadStatus(\n            chunk.responseMessageDto.threadId,\n            GenerationStage.FETCHING_CONTEXT,\n          );\n\n          await updateThreadMessage(\n            chunk.responseMessageDto.id,\n            {\n              ...chunk.responseMessageDto,\n            },\n            false,\n          );\n\n          const toolCallResponse = await handleToolCall(\n            chunk.responseMessageDto.toolCallRequest,\n            toolRegistry,\n            onCallUnregisteredTool,\n          );\n          if (ignoreResponseRef.current) {\n            setIgnoreResponse(false);\n            return createEmptyMessage(threadId);\n          }\n\n          const contentParts = await convertToolResponse(toolCallResponse);\n\n          const toolCallResponseParams: TamboAI.Beta.Threads.ThreadAdvanceByIDParams =\n            {\n              ...params,\n              // Exclude initialMessages from tool response since thread already exists\n              initialMessages: undefined,\n              ...(toolName\n                ? {\n                    toolCallCounts: {\n                      ...(params.toolCallCounts ?? {}),\n                      [toolName]: (params.toolCallCounts?.[toolName] ?? 0) + 1,\n                    },\n                  }\n                : {}),\n              messageToAppend: {\n                content: contentParts,\n                role: \"tool\",\n                actionType: \"tool_response\",\n                component: chunk.responseMessageDto.component,\n                tool_call_id: chunk.responseMessageDto.tool_call_id,\n                error: toolCallResponse.error,\n              },\n            };\n\n          await updateThreadMessage(\n            chunk.responseMessageDto.id,\n            {\n              ...chunk.responseMessageDto,\n              error: toolCallResponse.error,\n            },\n            false,\n          );\n\n          await addThreadMessage(\n            {\n              threadId: chunk.responseMessageDto.threadId,\n              content: contentParts,\n              role: \"tool\",\n              id: crypto.randomUUID(),\n              createdAt: new Date().toISOString(),\n              componentState: {},\n              actionType: \"tool_response\",\n              tool_call_id: chunk.responseMessageDto.tool_call_id,\n              error: toolCallResponse.error,\n            },\n            false,\n          );\n\n          updateThreadStatus(\n            chunk.responseMessageDto.threadId,\n            GenerationStage.STREAMING_RESPONSE,\n          );\n          const toolCallResponseStream = await advanceStream(\n            client,\n            toolCallResponseParams,\n            chunk.responseMessageDto.threadId,\n          );\n\n          return await handleAdvanceStream(\n            toolCallResponseStream,\n            toolCallResponseParams,\n            chunk.responseMessageDto.threadId,\n            contextKey,\n          );\n        } else {\n          if (ignoreResponseRef.current) {\n            setIgnoreResponse(false);\n            return finalMessage ?? createEmptyMessage(threadId);\n          }\n          if (\n            !hasSetThreadId &&\n            chunk.responseMessageDto.threadId &&\n            chunk.responseMessageDto.threadId !== currentThread?.id\n          ) {\n            hasSetThreadId = true;\n            const wasPlaceholderThread =\n              currentThreadId === PLACEHOLDER_THREAD.id;\n            await switchCurrentThread(chunk.responseMessageDto.threadId, false);\n\n            // If we're switching from placeholder to a real thread\n            // this means a new thread was created, so add it to cache\n            if (wasPlaceholderThread) {\n              await addThreadToCache(\n                chunk.responseMessageDto.threadId,\n                contextKey,\n              );\n              // Check if we should auto-generate name for the newly created thread\n              maybeAutoGenerateThreadName(\n                chunk.responseMessageDto.threadId,\n                contextKey,\n              );\n            }\n          }\n\n          if (!finalMessage) {\n            finalMessage = chunk.responseMessageDto.component?.componentName\n              ? renderComponentIntoMessage(\n                  chunk.responseMessageDto,\n                  componentList,\n                )\n              : chunk.responseMessageDto;\n            await addThreadMessage(finalMessage, false);\n          } else {\n            // Handle streaming tool calls\n            if (chunk.responseMessageDto.component?.toolCallRequest) {\n              const { toolName } =\n                chunk.responseMessageDto.component.toolCallRequest;\n              const tool = toolName ? toolRegistry[toolName] : undefined;\n\n              // if there is a tool call request on a component in a streaming chunk, and the tool\n              // is marked as streamable by the correct annotation, handle it\n              const isStreamable =\n                tool?.annotations?.tamboStreamableHint ?? false;\n\n              if (isStreamable) {\n                // We're not paying attention to the tool call response here - we only want the\n                // final tool call which is handled by the presence of a toolCallRequest on the\n                // top-level responseMessageDto\n                // see above: `if (chunk.responseMessageDto.toolCallRequest) { ... }`\n                void (await handleToolCall(\n                  chunk.responseMessageDto.component.toolCallRequest,\n                  toolRegistry,\n                  onCallUnregisteredTool,\n                ));\n              }\n            }\n\n            // Capture previous message ID before updating finalMessage\n            const previousMessageId = finalMessage.id;\n\n            if (chunk.responseMessageDto.component?.componentName) {\n              finalMessage = renderComponentIntoMessage(\n                chunk.responseMessageDto,\n                componentList,\n              );\n            } else {\n              finalMessage = chunk.responseMessageDto;\n            }\n\n            // if we start getting a new message mid-stream, put the previous one on screen\n            const isNewMessage =\n              chunk.responseMessageDto.id !== previousMessageId;\n            if (isNewMessage) {\n              await addThreadMessage(finalMessage, false);\n            } else {\n              await updateThreadMessage(finalMessage.id, finalMessage, false);\n            }\n          }\n        }\n      }\n\n      const completedThreadId = finalMessage?.threadId ?? threadId;\n\n      updateThreadStatus(completedThreadId, GenerationStage.COMPLETE);\n      maybeAutoGenerateThreadName(completedThreadId, contextKey);\n\n      return (\n        finalMessage ?? {\n          ...createEmptyMessage(completedThreadId),\n          content: [{ type: \"text\", text: \"Error processing stream\" }],\n        }\n      );\n    },\n    [\n      addThreadMessage,\n      addThreadToCache,\n      maybeAutoGenerateThreadName,\n      client,\n      componentList,\n      currentThread?.id,\n      currentThreadId,\n      onCallUnregisteredTool,\n      switchCurrentThread,\n      toolRegistry,\n      updateThreadMessage,\n      updateThreadStatus,\n    ],\n  );\n\n  const sendThreadMessage = useCallback(\n    async (\n      message: string,\n      options: {\n        threadId?: string;\n        streamResponse?: boolean;\n        forceToolChoice?: string;\n        contextKey?: string;\n        additionalContext?: Record<string, any>;\n        content?: TamboAI.Beta.Threads.ChatCompletionContentPart[];\n      } = {},\n    ): Promise<TamboThreadMessage> => {\n      setIgnoreResponse(false);\n      const {\n        threadId = currentThreadId ?? placeholderThread.id,\n        streamResponse = streaming,\n        forceToolChoice,\n        contextKey,\n        additionalContext,\n        content,\n      } = options;\n      if (!streamResponse) {\n        throw new Error(\n          \"Non-streaming mode is deprecated. Use streaming mode instead.\",\n        );\n      }\n      updateThreadStatus(threadId, GenerationStage.FETCHING_CONTEXT);\n\n      // Get additional context from enabled helpers\n      const helperContexts = await getAdditionalContext();\n\n      // Combine all contexts\n      const combinedContext: Record<string, any> = {\n        ...(additionalContext ?? {}),\n      };\n\n      // Add helper contexts to combinedContext\n      for (const helperContext of helperContexts) {\n        combinedContext[helperContext.name] = helperContext.context;\n      }\n\n      // Build and optimistically add user message (for revert on fail)\n      const optimiticMessageId = crypto.randomUUID();\n      const messageContent = content ?? [\n        { type: \"text\" as const, text: message },\n      ];\n\n      await addThreadMessage(\n        {\n          content: messageContent as any,\n          renderedComponent: null,\n          role: \"user\",\n          threadId: threadId,\n          id: optimiticMessageId,\n          createdAt: new Date().toISOString(),\n          componentState: {},\n          additionalContext: combinedContext,\n        },\n        false,\n      );\n\n      maybeAutoGenerateThreadName(threadId, contextKey);\n\n      const availableComponents = getAvailableComponents(\n        componentList,\n        toolRegistry,\n        componentToolAssociations,\n      );\n      const unassociatedTools = getUnassociatedTools(\n        toolRegistry,\n        componentToolAssociations,\n      );\n\n      // Track tool call counts for this message processing\n      const toolCallCounts: Record<string, number> = {};\n\n      const params: TamboAI.Beta.Threads.ThreadAdvanceByIDParams = {\n        messageToAppend: {\n          content: messageContent as any,\n          role: \"user\",\n          additionalContext: combinedContext,\n        },\n        contextKey,\n        availableComponents: availableComponents,\n        clientTools: unassociatedTools.map((tool) =>\n          mapTamboToolToContextTool(tool),\n        ),\n        forceToolChoice: forceToolChoice,\n        toolCallCounts,\n        ...(threadId === placeholderThread.id &&\n          initialMessages.length > 0 && {\n            initialMessages: initialMessages.map((msg) => ({\n              content: msg.content,\n              role: msg.role,\n              additionalContext: msg.additionalContext,\n            })),\n          }),\n      };\n\n      let advanceStreamResponse: AsyncIterable<TamboAI.Beta.Threads.ThreadAdvanceResponse>;\n      try {\n        advanceStreamResponse = await advanceStream(\n          client,\n          params,\n          threadId === placeholderThread.id ? undefined : threadId,\n        );\n      } catch (error) {\n        updateThreadStatus(threadId, GenerationStage.ERROR);\n        // Rollback the optimistic user message\n        setThreadMap((prev) => {\n          const thread = prev[threadId];\n          if (!thread) return prev;\n          return {\n            ...prev,\n            [threadId]: {\n              ...thread,\n              messages: thread.messages.filter(\n                (msg) => msg.id !== optimiticMessageId,\n              ),\n            },\n          };\n        });\n        throw error;\n      }\n      try {\n        const result = await handleAdvanceStream(\n          advanceStreamResponse,\n          params,\n          threadId,\n          contextKey,\n        );\n\n        return result;\n      } catch (error) {\n        updateThreadStatus(threadId, GenerationStage.ERROR);\n        // Rollback the optimistic user message\n        setThreadMap((prev) => {\n          const thread = prev[threadId];\n          if (!thread) return prev;\n          return {\n            ...prev,\n            [threadId]: {\n              ...thread,\n              messages: thread.messages.filter(\n                (msg) => msg.id !== optimiticMessageId,\n              ),\n            },\n          };\n        });\n        throw error;\n      }\n    },\n    [\n      componentList,\n      toolRegistry,\n      componentToolAssociations,\n      currentThreadId,\n      addThreadMessage,\n      client,\n      updateThreadStatus,\n      handleAdvanceStream,\n      streaming,\n      getAdditionalContext,\n      placeholderThread.id,\n      initialMessages,\n      maybeAutoGenerateThreadName,\n    ],\n  );\n\n  return (\n    <TamboThreadContext.Provider\n      value={{\n        thread: currentThread,\n        currentThreadId,\n        currentThread,\n        threadMap,\n        setThreadMap,\n        switchCurrentThread,\n        startNewThread,\n        updateThreadName,\n        generateThreadName,\n        addThreadMessage,\n        updateThreadMessage,\n        streaming,\n        cancel,\n        sendThreadMessage,\n        contextKey,\n      }}\n    >\n      <TamboGenerationStageProvider\n        generationStage={currentGenerationStage}\n        statusMessage={currentStatusMessage}\n      >\n        {children}\n      </TamboGenerationStageProvider>\n    </TamboThreadContext.Provider>\n  );\n};\n\n/**\n * The useTamboGenerationStage hook provides access to the generation stage context\n * to the descendants of the TamboThreadProvider.\n * @returns The generation stage context\n */\nexport const useTamboGenerationStage = (): TamboGenerationStageContextProps => {\n  const generationStageContext = useContext(TamboGenerationStageContext);\n\n  if (generationStageContext === undefined) {\n    throw new Error(\n      \"useTamboGenerationStage must be used within a TamboThreadProvider\",\n    );\n  }\n\n  return generationStageContext;\n};\n\n/**\n * The useTamboThread hook provides access to the current thread context\n * to the descendants of the TamboThreadProvider.\n * @returns All state and actions for the current thread\n */\nexport const useTamboThread = (): CombinedTamboThreadContextProps => {\n  const threadContext = useContext(TamboThreadContext);\n  const generationStageContext = useContext(TamboGenerationStageContext);\n\n  if (threadContext === undefined) {\n    throw new Error(\"useTamboThread must be used within a TamboThreadProvider\");\n  }\n\n  if (generationStageContext === undefined) {\n    throw new Error(\"useTamboThread must be used within a TamboThreadProvider\");\n  }\n\n  return {\n    ...threadContext,\n    ...generationStageContext,\n  };\n};\n\nasync function convertToolResponse(toolCallResponse: {\n  result: unknown;\n  error?: string;\n  tamboTool?: TamboTool;\n}): Promise<TamboAI.Beta.Threads.ChatCompletionContentPart[]> {\n  // If the tool call errored, surface that as text so the model reliably sees the error\n  if (toolCallResponse.error) {\n    return [{ type: \"text\", text: toText(toolCallResponse.result) }];\n  }\n\n  // Use custom transform when available\n  if (toolCallResponse.tamboTool?.transformToContent) {\n    return await toolCallResponse.tamboTool.transformToContent(\n      // result shape is user-defined; let the transform decide how to handle it\n      toolCallResponse.result as any,\n    );\n  }\n\n  // Default fallback to stringified text\n  return [{ type: \"text\", text: toText(toolCallResponse.result) }];\n}\n\n/**\n * Create a placeholder/cancelled message with default values\n * @param threadId - ID of the thread the message belongs to\n * @returns An empty TamboThreadMessage\n */\nfunction createEmptyMessage(threadId: string): TamboThreadMessage {\n  return {\n    threadId,\n    content: [{ type: \"text\", text: \"\" }],\n    role: \"assistant\",\n    createdAt: new Date().toISOString(),\n    id: crypto.randomUUID(),\n    componentState: {},\n  };\n}\n", "import type TamboAI from \"@tambo-ai/typescript-sdk\";\n\n/**\n * Narrow a value to a ChatCompletionContentPart by checking for an object with string `type`.\n * We purposefully keep this guard permissive to support future part types.\n * @returns true if the value looks like a content part\n */\nexport function isContentPart(\n  val: unknown,\n): val is TamboAI.Beta.Threads.ChatCompletionContentPart {\n  return (\n    !!val &&\n    typeof val === \"object\" &&\n    \"type\" in (val as any) &&\n    typeof (val as any).type === \"string\"\n  );\n}\n\n/**\n * Type guard for arrays of content parts.\n * @returns true if the value is an array of content parts\n */\nexport function isContentPartArray(\n  val: unknown,\n): val is TamboAI.Beta.Threads.ChatCompletionContentPart[] {\n  return Array.isArray(val) && val.every((item) => isContentPart(item));\n}\n\n/**\n * Safely convert an unknown value to a string suitable for a `{ type: \"text\" }` content part.\n * Guarantees a string and avoids throwing on circular structures.\n * @returns The string representation of the value\n */\nexport function toText(val: unknown): string {\n  if (typeof val === \"string\") return val;\n  try {\n    const json = JSON.stringify(val);\n    return json ?? String(val);\n  } catch {\n    return String(val);\n  }\n}\n", "import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { parse } from \"partial-json\";\nimport React from \"react\";\nimport { wrapWithTamboMessageProvider } from \"../hooks/use-current-message\";\nimport { ComponentRegistry } from \"../model/component-metadata\";\nimport { TamboThreadMessage } from \"../model/generate-component-response\";\nimport { isStandardSchema } from \"../schema\";\nimport { isPromise } from \"../util/is-promise\";\nimport { getComponentFromRegistry } from \"../util/registry\";\n\n/**\n * Generate a message that has a component rendered into it, if the message\n * came with one.\n * @param message - The message that may contain a component\n * @param componentList - the list of available components\n * @returns The updated message with the component rendered into it\n */\nexport function renderComponentIntoMessage(\n  message: TamboAI.Beta.Threads.ThreadMessage,\n  componentList: ComponentRegistry,\n): TamboThreadMessage {\n  if (!message.component?.componentName) {\n    throw new Error(\"Component not found\");\n  }\n  const parsedProps = parse(JSON.stringify(message.component.props));\n  const registeredComponent = getComponentFromRegistry(\n    message.component.componentName,\n    componentList,\n  );\n\n  let validatedProps: Record<string, unknown> = parsedProps as Record<\n    string,\n    unknown\n  >;\n  if (isStandardSchema(registeredComponent.props)) {\n    const result = registeredComponent.props[\"~standard\"].validate(parsedProps);\n    // Standard Schema validate() returns { value: T } on success or { issues: [...] } on failure\n    // Async validation is not supported for component rendering\n    if (isPromise(result)) {\n      throw new Error(\n        \"Async schema validation is not supported for component props\",\n      );\n    }\n    if (\"value\" in result) {\n      validatedProps = result.value as Record<string, unknown>;\n    } else {\n      // Validation failed - throw with first issue message\n      const issueMessage =\n        result.issues?.[0]?.message ?? \"Schema validation failed\";\n      throw new Error(`Component props validation failed: ${issueMessage}`);\n    }\n  }\n\n  const renderedComponent = React.createElement(\n    registeredComponent.component,\n    validatedProps,\n  );\n\n  // Create the full message object first so we can pass it to the provider\n  const fullMessage: TamboThreadMessage = {\n    ...message,\n    component: {\n      ...message.component,\n      props: validatedProps,\n    },\n  };\n\n  const wrappedComponent = wrapWithTamboMessageProvider(\n    renderedComponent,\n    fullMessage,\n  );\n\n  return {\n    ...fullMessage,\n    renderedComponent: wrappedComponent,\n  };\n}\n", "/**\n *\n */\n/**\n * Checks whether a value is a Promise/thenable.\n * @returns True if the value has a callable `then()` function.\n */\nexport function isPromise(value: unknown): value is Promise<unknown> {\n  if (value === null) {\n    return false;\n  }\n\n  if (typeof value !== \"object\" && typeof value !== \"function\") {\n    return false;\n  }\n\n  return typeof (value as { readonly then?: unknown }).then === \"function\";\n}\n", "import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport {\n  ComponentContextToolMetadata,\n  ComponentRegistry,\n  DefineToolFn,\n  RegisteredComponent,\n  TamboTool,\n  TamboToolAssociations,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport {\n  getParametersFromToolSchema,\n  isStandardSchema,\n  schemaToJsonSchema,\n} from \"../schema\";\n\n/**\n * Get all the available components from the component registry\n * @param componentRegistry - The component registry\n * @param toolRegistry - The tool registry\n * @param toolAssociations - The tool associations\n * @returns The available components\n */\nexport const getAvailableComponents = (\n  componentRegistry: ComponentRegistry,\n  toolRegistry: TamboToolRegistry,\n  toolAssociations: TamboToolAssociations,\n): TamboAI.AvailableComponent[] => {\n  const availableComponents: TamboAI.AvailableComponent[] = [];\n\n  for (const [name, componentEntry] of Object.entries(componentRegistry)) {\n    const associatedToolNames = toolAssociations[name] || [];\n\n    const contextTools = associatedToolNames\n      .map((toolName) => {\n        const tool = toolRegistry[toolName];\n        if (!tool) return null;\n        return mapTamboToolToContextTool(tool);\n      })\n      .filter((tool): tool is ComponentContextToolMetadata => tool !== null);\n\n    availableComponents.push({\n      name: componentEntry.name,\n      description: componentEntry.description,\n      props: componentEntry.props,\n      contextTools,\n    });\n  }\n\n  return availableComponents;\n};\n\n/**\n * Get tools from tool registry that are not associated with any component\n * @param toolRegistry - The tool registry\n * @param toolAssociations - The tool associations\n * @returns The tools that are not associated with any component\n */\nexport const getUnassociatedTools = (\n  toolRegistry: TamboToolRegistry,\n  toolAssociations: TamboToolAssociations,\n): TamboTool[] => {\n  return Object.values(toolRegistry).filter((tool) => {\n    // Check if the tool's name appears in any of the tool association arrays\n    return !Object.values(toolAssociations).flat().includes(tool.name);\n  });\n};\n\n/**\n * Helper function to convert component props from Standard Schema or JSON Schema\n * @param component - The component to convert\n * @returns The converted props as JSON Schema\n */\nexport const convertPropsToJsonSchema = (\n  component: RegisteredComponent,\n): unknown => {\n  if (!component.props) {\n    return component.props;\n  }\n\n  // Check if props is a Standard Schema (Zod, Valibot, ArkType, etc.)\n  if (isStandardSchema(component.props)) {\n    return schemaToJsonSchema(component.props);\n  }\n\n  // Already JSON Schema or unknown format - return as-is\n  return component.props;\n};\n\n/**\n * Get a component by name from the component registry\n * @param componentName - The name of the component to get\n * @param componentRegistry - The component registry\n * @returns The component registration information\n */\nexport const getComponentFromRegistry = (\n  componentName: string,\n  componentRegistry: ComponentRegistry,\n): RegisteredComponent => {\n  const componentEntry = componentRegistry[componentName];\n\n  if (!componentEntry) {\n    throw new Error(\n      `Tambo tried to use Component ${componentName}, but it was not found.`,\n    );\n  }\n\n  return componentEntry;\n};\n\n/**\n * Map a Tambo tool to a context tool\n * @param tool - The tool to map\n * @returns The context tool\n */\nexport const mapTamboToolToContextTool = (\n  tool: TamboTool,\n): ComponentContextToolMetadata => {\n  const parameters = getParametersFromToolSchema(tool);\n\n  return {\n    name: tool.name,\n    description: tool.description,\n    parameters,\n    ...(\"maxCalls\" in tool && tool.maxCalls !== undefined\n      ? { maxCalls: tool.maxCalls }\n      : {}),\n    ...(\"annotations\" in tool && tool.annotations !== undefined\n      ? { annotations: tool.annotations }\n      : {}),\n  };\n};\n\n/**\n * Provides type safety for defining a Tambo Tool.\n *\n * Tambo uses the [standard-schema.dev](https://standard-schema.dev) spec which means you can use any Standard Schema\n * compliant validator (Zod, Valibot, ArkType, etc.). This ensures the tool function args and output types are correctly\n * inferred from the provided schemas.\n * @example\n * ```typescript\n * import { z } from \"zod/v4\";\n *\n * const myTool = defineTamboTool({\n *   // ...\n * });\n * ```\n * @param tool The tool definition to register\n * @returns The registered tool definition\n */\nexport const defineTool: DefineToolFn = (tool: any) => {\n  if (\"toolSchema\" in tool) {\n    return tool;\n  }\n  tool.inputSchema ??= { type: \"object\", properties: {}, required: [] };\n  tool.outputSchema ??= { type: \"object\", properties: {}, required: [] };\n  return tool;\n};\n", "import TamboAI from \"@tambo-ai/typescript-sdk\";\nimport {\n  ComponentContextTool,\n  TamboTool,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport { mapTamboToolToContextTool } from \"./registry\";\n\n/**\n * Process a message from the thread, invoking the appropriate tool and returning the result.\n * @param toolCallRequest - The message to handle\n * @param toolRegistry - The tool registry\n * @returns The result of the tool call along with the tool definition\n */\nexport const handleToolCall = async (\n  toolCallRequest: TamboAI.ToolCallRequest,\n  toolRegistry: TamboToolRegistry,\n  onCallUnregisteredTool?: (\n    toolName: string,\n    args: TamboAI.ToolCallParameter[],\n  ) => Promise<string>,\n): Promise<{\n  result: unknown;\n  error?: string;\n  tamboTool?: TamboTool;\n}> => {\n  if (!toolCallRequest?.toolName) {\n    throw new Error(\"Tool name is required\");\n  }\n\n  try {\n    const { tool, tamboTool } = findTool(\n      toolCallRequest.toolName,\n      toolRegistry,\n    );\n    if (!tool) {\n      if (onCallUnregisteredTool) {\n        const result = await onCallUnregisteredTool(\n          toolCallRequest.toolName,\n          toolCallRequest.parameters,\n        );\n        return {\n          result,\n        };\n      }\n      throw new Error(`Tool ${toolCallRequest.toolName} not found in registry`);\n    }\n    return {\n      result: await runToolChoice(toolCallRequest, tool),\n      tamboTool,\n    };\n  } catch (error) {\n    console.error(\"Error in calling tool: \", error);\n    return {\n      result: `When attempting to call tool ${toolCallRequest.toolName} the following error occurred: ${error}. Explain to the user that the tool call failed and try again if needed.`,\n      error: error instanceof Error ? error.message : \"Unknown error\",\n    };\n  }\n};\n\nconst findTool = (\n  toolName: string,\n  toolRegistry: TamboToolRegistry,\n):\n  | {\n      tool: ComponentContextTool;\n      tamboTool: TamboTool;\n    }\n  | { tool: null; tamboTool: null } => {\n  const registryTool = toolRegistry[toolName];\n\n  if (!registryTool) {\n    return { tool: null, tamboTool: null };\n  }\n\n  const contextTool = mapTamboToolToContextTool(registryTool);\n  return {\n    tool: {\n      getComponentContext: registryTool.tool,\n      definition: contextTool,\n    },\n    tamboTool: registryTool,\n  };\n};\n\nconst runToolChoice = async (\n  toolCallRequest: TamboAI.ToolCallRequest,\n  tool: ComponentContextTool,\n): Promise<unknown> => {\n  const parameters = toolCallRequest.parameters ?? [];\n\n  // Reconstruct the object from parameter name-value pairs\n  const inputObject = Object.fromEntries(\n    parameters.map((param) => [param.parameterName, param.parameterValue]),\n  );\n  return await tool.getComponentContext(inputObject);\n};\n", "import type { RequestHandlerExtra } from \"@modelcontextprotocol/sdk/shared/protocol.js\";\nimport type {\n  ElicitRequestFormParams,\n  PrimitiveSchemaDefinition,\n} from \"@modelcontextprotocol/sdk/spec.types.js\";\nimport type {\n  ClientNotification,\n  ClientRequest,\n  ElicitRequest,\n  ElicitResult,\n} from \"@modelcontextprotocol/sdk/types.js\";\nimport { useCallback, useState } from \"react\";\nimport { MCPElicitationHandler } from \"./mcp-client\";\n\n/**\n * Schema type for elicitation request fields\n */\nexport type ElicitationRequestedSchema =\n  ElicitRequestFormParams[\"requestedSchema\"];\n\n/**\n * Elicitation request from MCP server\n */\nexport interface TamboElicitationRequest {\n  message: string;\n  requestedSchema: ElicitationRequestedSchema;\n  /** AbortSignal that fires when the server cancels the request (e.g., timeout) */\n  signal?: AbortSignal;\n}\n\n/**\n * Re-export PrimitiveSchemaDefinition for consumers that need to work with schema fields\n */\nexport type { PrimitiveSchemaDefinition };\n\ntype ElicitRequestParamsWithRequestedSchema = Extract<\n  ElicitRequest[\"params\"],\n  { requestedSchema: unknown }\n>;\n\n/**\n * Elicitation response to be sent back\n */\nexport interface TamboElicitationResponse {\n  action: \"accept\" | \"decline\" | \"cancel\";\n  content?: Record<string, unknown>;\n  [x: string]: unknown;\n}\n\n/**\n * Elicitation context state - read-only interface for consumers.\n * State management is handled internally by useElicitation hook.\n */\nexport interface ElicitationContextState {\n  /** Current elicitation request, or null if none active */\n  elicitation: TamboElicitationRequest | null;\n  /** Function to call when user responds to elicitation (clears state automatically) */\n  resolveElicitation: ((response: TamboElicitationResponse) => void) | null;\n}\n\n/**\n * Narrow the runtime ElicitRequest requestedSchema into the public\n * ElicitationRequestedSchema type.\n *\n * The MCP SDK guarantees that the runtime\n * `ElicitRequest[\"params\"][\"requestedSchema\"]` shape stays aligned with the\n * spec-defined `ElicitRequestFormParams[\"requestedSchema\"]`. This helper\n * centralizes the cast based on that contract so that if a future SDK version\n * ever diverges, we have a single place to tighten the implementation (for\n * example with structural validation or normalization).\n * @returns requestedSchema as ElicitationRequestedSchema\n */\nfunction toElicitationRequestedSchema(\n  value: ElicitRequestParamsWithRequestedSchema[\"requestedSchema\"],\n): ElicitationRequestedSchema {\n  return value as ElicitationRequestedSchema;\n}\n\n/**\n * Type guard for the elicitation form params shape.\n * @returns true when params include requestedSchema\n */\nfunction hasRequestedSchema(\n  params: ElicitRequest[\"params\"],\n): params is ElicitRequestParamsWithRequestedSchema {\n  return \"requestedSchema\" in params;\n}\n\n/**\n * Internal hook that manages elicitation state and creates a default handler.\n * This bundles all the state management and handler creation for elicitation.\n *\n * Do not export this hook from this package. It is only intended to be used internally by the TamboMcpProvider.\n * @returns Elicitation state and default handler\n */\nexport function useElicitation() {\n  const [elicitation, setElicitation] =\n    useState<TamboElicitationRequest | null>(null);\n  const [resolveElicitation, setResolveElicitation] = useState<\n    ((response: TamboElicitationResponse) => void) | null\n  >(null);\n\n  const defaultElicitationHandler: MCPElicitationHandler = useCallback(\n    async (\n      request: ElicitRequest,\n      extra: RequestHandlerExtra<ClientRequest, ClientNotification>,\n    ): Promise<ElicitResult> => {\n      return await new Promise<ElicitResult>((resolve, reject) => {\n        if (!hasRequestedSchema(request.params)) {\n          const mode =\n            \"mode\" in request.params ? String(request.params.mode) : \"unknown\";\n\n          reject(\n            new Error(\n              `Unsupported MCP elicitation params: expected requestedSchema (form mode), got mode=${mode}`,\n            ),\n          );\n          return;\n        }\n\n        // Set the elicitation request to show the UI\n        // Cast is needed because ElicitRequest uses Zod-inferred types (from the\n        // user's installed zod version), while we use pure TypeScript spec types\n        // for cross-version compatibility\n        setElicitation({\n          message: request.params.message,\n          requestedSchema: toElicitationRequestedSchema(\n            request.params.requestedSchema,\n          ),\n          signal: extra.signal,\n        });\n\n        // If the signal is already aborted, reject immediately\n        if (extra.signal.aborted) {\n          setElicitation(null);\n          reject(new Error(\"Request aborted\"));\n          return;\n        }\n\n        // Listen for abort signal to clean up\n        const handleAbort = () => {\n          setElicitation(null);\n          setResolveElicitation(null);\n          reject(new Error(\"Request aborted\"));\n        };\n\n        extra.signal.addEventListener(\"abort\", handleAbort, { once: true });\n\n        // Store the resolve function so we can call it when the user responds\n        setResolveElicitation(() => (response: ElicitResult) => {\n          // Remove abort listener since we're resolving normally\n          extra.signal.removeEventListener(\"abort\", handleAbort);\n          // Clear state now that user has responded\n          setElicitation(null);\n          setResolveElicitation(null);\n          resolve(response);\n        });\n      });\n    },\n    [],\n  );\n\n  return {\n    elicitation,\n    setElicitation,\n    resolveElicitation,\n    setResolveElicitation,\n    defaultElicitationHandler,\n  };\n}\n", "import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodMiniType = /*@__PURE__*/ core.$constructor(\"ZodMiniType\", (inst, def) => {\n    if (!inst._zod)\n        throw new Error(\"Uninitialized schema in ZodMiniType.\");\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (_def, params) => core.clone(inst, _def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n});\nexport const ZodMiniString = /*@__PURE__*/ core.$constructor(\"ZodMiniString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function string(params) {\n    return core._string(ZodMiniString, params);\n}\nexport const ZodMiniStringFormat = /*@__PURE__*/ core.$constructor(\"ZodMiniStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    ZodMiniString.init(inst, def);\n});\nexport const ZodMiniEmail = /*@__PURE__*/ core.$constructor(\"ZodMiniEmail\", (inst, def) => {\n    core.$ZodEmail.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodMiniEmail, params);\n}\nexport const ZodMiniGUID = /*@__PURE__*/ core.$constructor(\"ZodMiniGUID\", (inst, def) => {\n    core.$ZodGUID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodMiniGUID, params);\n}\nexport const ZodMiniUUID = /*@__PURE__*/ core.$constructor(\"ZodMiniUUID\", (inst, def) => {\n    core.$ZodUUID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodMiniUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodMiniUUID, params);\n}\n// ZodMiniUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodMiniUUID, params);\n}\n// ZodMiniUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodMiniUUID, params);\n}\nexport const ZodMiniURL = /*@__PURE__*/ core.$constructor(\"ZodMiniURL\", (inst, def) => {\n    core.$ZodURL.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodMiniURL, params);\n}\nexport const ZodMiniEmoji = /*@__PURE__*/ core.$constructor(\"ZodMiniEmoji\", (inst, def) => {\n    core.$ZodEmoji.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodMiniEmoji, params);\n}\nexport const ZodMiniNanoID = /*@__PURE__*/ core.$constructor(\"ZodMiniNanoID\", (inst, def) => {\n    core.$ZodNanoID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodMiniNanoID, params);\n}\nexport const ZodMiniCUID = /*@__PURE__*/ core.$constructor(\"ZodMiniCUID\", (inst, def) => {\n    core.$ZodCUID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodMiniCUID, params);\n}\nexport const ZodMiniCUID2 = /*@__PURE__*/ core.$constructor(\"ZodMiniCUID2\", (inst, def) => {\n    core.$ZodCUID2.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodMiniCUID2, params);\n}\nexport const ZodMiniULID = /*@__PURE__*/ core.$constructor(\"ZodMiniULID\", (inst, def) => {\n    core.$ZodULID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodMiniULID, params);\n}\nexport const ZodMiniXID = /*@__PURE__*/ core.$constructor(\"ZodMiniXID\", (inst, def) => {\n    core.$ZodXID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodMiniXID, params);\n}\nexport const ZodMiniKSUID = /*@__PURE__*/ core.$constructor(\"ZodMiniKSUID\", (inst, def) => {\n    core.$ZodKSUID.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodMiniKSUID, params);\n}\nexport const ZodMiniIPv4 = /*@__PURE__*/ core.$constructor(\"ZodMiniIPv4\", (inst, def) => {\n    core.$ZodIPv4.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodMiniIPv4, params);\n}\nexport const ZodMiniIPv6 = /*@__PURE__*/ core.$constructor(\"ZodMiniIPv6\", (inst, def) => {\n    core.$ZodIPv6.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodMiniIPv6, params);\n}\nexport const ZodMiniCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodMiniCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodMiniCIDRv4, params);\n}\nexport const ZodMiniCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodMiniCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodMiniCIDRv6, params);\n}\nexport const ZodMiniBase64 = /*@__PURE__*/ core.$constructor(\"ZodMiniBase64\", (inst, def) => {\n    core.$ZodBase64.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodMiniBase64, params);\n}\nexport const ZodMiniBase64URL = /*@__PURE__*/ core.$constructor(\"ZodMiniBase64URL\", (inst, def) => {\n    core.$ZodBase64URL.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodMiniBase64URL, params);\n}\nexport const ZodMiniE164 = /*@__PURE__*/ core.$constructor(\"ZodMiniE164\", (inst, def) => {\n    core.$ZodE164.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodMiniE164, params);\n}\nexport const ZodMiniJWT = /*@__PURE__*/ core.$constructor(\"ZodMiniJWT\", (inst, def) => {\n    core.$ZodJWT.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodMiniJWT, params);\n}\nexport const ZodMiniCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodMiniCustomStringFormat\", (inst, def) => {\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodMiniStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodMiniCustomStringFormat, format, fnOrRegex, _params);\n}\nexport const ZodMiniNumber = /*@__PURE__*/ core.$constructor(\"ZodMiniNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function number(params) {\n    return core._number(ZodMiniNumber, params);\n}\nexport const ZodMiniNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodMiniNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodMiniNumber.init(inst, def);\n});\n// int\nexport function int(params) {\n    return core._int(ZodMiniNumberFormat, params);\n}\n// float32\nexport function float32(params) {\n    return core._float32(ZodMiniNumberFormat, params);\n}\n// float64\nexport function float64(params) {\n    return core._float64(ZodMiniNumberFormat, params);\n}\n// int32\nexport function int32(params) {\n    return core._int32(ZodMiniNumberFormat, params);\n}\n// uint32\nexport function uint32(params) {\n    return core._uint32(ZodMiniNumberFormat, params);\n}\nexport const ZodMiniBoolean = /*@__PURE__*/ core.$constructor(\"ZodMiniBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodMiniBoolean, params);\n}\nexport const ZodMiniBigInt = /*@__PURE__*/ core.$constructor(\"ZodMiniBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function bigint(params) {\n    return core._bigint(ZodMiniBigInt, params);\n}\nexport const ZodMiniBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodMiniBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodMiniBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodMiniBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodMiniBigIntFormat, params);\n}\nexport const ZodMiniSymbol = /*@__PURE__*/ core.$constructor(\"ZodMiniSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodMiniSymbol, params);\n}\nexport const ZodMiniUndefined = /*@__PURE__*/ core.$constructor(\"ZodMiniUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodMiniUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodMiniNull = /*@__PURE__*/ core.$constructor(\"ZodMiniNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodMiniNull, params);\n}\nexport { _null as null };\nexport const ZodMiniAny = /*@__PURE__*/ core.$constructor(\"ZodMiniAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodMiniAny);\n}\nexport const ZodMiniUnknown = /*@__PURE__*/ core.$constructor(\"ZodMiniUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodMiniUnknown);\n}\nexport const ZodMiniNever = /*@__PURE__*/ core.$constructor(\"ZodMiniNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodMiniNever, params);\n}\nexport const ZodMiniVoid = /*@__PURE__*/ core.$constructor(\"ZodMiniVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodMiniVoid, params);\n}\nexport { _void as void };\nexport const ZodMiniDate = /*@__PURE__*/ core.$constructor(\"ZodMiniDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function date(params) {\n    return core._date(ZodMiniDate, params);\n}\nexport const ZodMiniArray = /*@__PURE__*/ core.$constructor(\"ZodMiniArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function array(element, params) {\n    return new ZodMiniArray({\n        type: \"array\",\n        element: element,\n        ...util.normalizeParams(params),\n    });\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodMiniObject = /*@__PURE__*/ core.$constructor(\"ZodMiniObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodMiniType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodMiniObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodMiniObject({\n        type: \"object\",\n        // shape: shape as core.$ZodLooseShape,\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodMiniObject({\n        type: \"object\",\n        // shape: shape as core.$ZodLooseShape,\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        // get optional() {\n        //   return util.optionalKeys(shape);\n        // },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\n// object methods\nexport function extend(schema, shape) {\n    return util.extend(schema, shape);\n}\nexport function merge(schema, shape) {\n    return util.extend(schema, shape);\n}\nexport function pick(schema, mask) {\n    return util.pick(schema, mask);\n}\n// .omit\nexport function omit(schema, mask) {\n    return util.omit(schema, mask);\n}\nexport function partial(schema, mask) {\n    return util.partial(ZodMiniOptional, schema, mask);\n}\nexport function required(schema, mask) {\n    return util.required(ZodMiniNonOptional, schema, mask);\n}\nexport function catchall(inst, catchall) {\n    return inst.clone({ ...inst._zod.def, catchall: catchall });\n}\nexport const ZodMiniUnion = /*@__PURE__*/ core.$constructor(\"ZodMiniUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function union(options, params) {\n    return new ZodMiniUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodMiniDiscriminatedUnion\", (inst, def) => {\n    core.$ZodDiscriminatedUnion.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    return new ZodMiniDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniIntersection = /*@__PURE__*/ core.$constructor(\"ZodMiniIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodMiniIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodMiniTuple = /*@__PURE__*/ core.$constructor(\"ZodMiniTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodMiniTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniRecord = /*@__PURE__*/ core.$constructor(\"ZodMiniRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function record(keyType, valueType, params) {\n    return new ZodMiniRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function partialRecord(keyType, valueType, params) {\n    return new ZodMiniRecord({\n        type: \"record\",\n        keyType: union([keyType, never()]),\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniMap = /*@__PURE__*/ core.$constructor(\"ZodMiniMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMiniMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniSet = /*@__PURE__*/ core.$constructor(\"ZodMiniSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function set(valueType, params) {\n    return new ZodMiniSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniEnum = /*@__PURE__*/ core.$constructor(\"ZodMiniEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodMiniEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodMiniEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniLiteral = /*@__PURE__*/ core.$constructor(\"ZodMiniLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function literal(value, params) {\n    return new ZodMiniLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniFile = /*@__PURE__*/ core.$constructor(\"ZodMiniFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function file(params) {\n    return core._file(ZodMiniFile, params);\n}\nexport const ZodMiniTransform = /*@__PURE__*/ core.$constructor(\"ZodMiniTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function transform(fn) {\n    return new ZodMiniTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodMiniOptional = /*@__PURE__*/ core.$constructor(\"ZodMiniOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function optional(innerType) {\n    return new ZodMiniOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodMiniNullable = /*@__PURE__*/ core.$constructor(\"ZodMiniNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function nullable(innerType) {\n    return new ZodMiniNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodMiniDefault = /*@__PURE__*/ core.$constructor(\"ZodMiniDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodMiniDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodMiniPrefault = /*@__PURE__*/ core.$constructor(\"ZodMiniPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodMiniPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodMiniNonOptional = /*@__PURE__*/ core.$constructor(\"ZodMiniNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function nonoptional(innerType, params) {\n    return new ZodMiniNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniSuccess = /*@__PURE__*/ core.$constructor(\"ZodMiniSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function success(innerType) {\n    return new ZodMiniSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodMiniCatch = /*@__PURE__*/ core.$constructor(\"ZodMiniCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodMiniCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodMiniNaN = /*@__PURE__*/ core.$constructor(\"ZodMiniNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodMiniNaN, params);\n}\nexport const ZodMiniPipe = /*@__PURE__*/ core.$constructor(\"ZodMiniPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function pipe(in_, out) {\n    return new ZodMiniPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n    });\n}\nexport const ZodMiniReadonly = /*@__PURE__*/ core.$constructor(\"ZodMiniReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function readonly(innerType) {\n    return new ZodMiniReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodMiniTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodMiniTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodMiniTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMiniLazy = /*@__PURE__*/ core.$constructor(\"ZodMiniLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\n// export function lazy<T extends object>(getter: () => T): T {\n//   return util.createTransparentProxy<T>(getter);\n// }\nfunction _lazy(getter) {\n    return new ZodMiniLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport { _lazy as lazy };\nexport const ZodMiniPromise = /*@__PURE__*/ core.$constructor(\"ZodMiniPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\nexport function promise(innerType) {\n    return new ZodMiniPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodMiniCustom = /*@__PURE__*/ core.$constructor(\"ZodMiniCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodMiniType.init(inst, def);\n});\n// custom checks\nexport function check(fn, params) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\n// ZodCustom\n// custom schema\nexport function custom(fn, _params) {\n    return core._custom(ZodMiniCustom, fn ?? (() => true), _params);\n}\n// refine\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodMiniCustom, fn, _params);\n}\n// instanceof\nclass Class {\n    constructor(..._args) { }\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = custom((data) => data instanceof cls, params);\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodMiniPipe,\n    Boolean: ZodMiniBoolean,\n    String: ZodMiniString,\n    Transform: ZodMiniTransform,\n}, ...args);\nexport function json() {\n    const jsonSchema = _lazy(() => {\n        return union([string(), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodMiniISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodMiniStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodMiniISODateTime, params);\n}\nexport const ZodMiniISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodMiniStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodMiniISODate, params);\n}\nexport const ZodMiniISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodMiniStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodMiniISOTime, params);\n}\nexport const ZodMiniISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodMiniStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodMiniISODuration, params);\n}\n", "import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport function string(params) {\n    return core._coercedString(schemas.ZodMiniString, params);\n}\nexport function number(params) {\n    return core._coercedNumber(schemas.ZodMiniNumber, params);\n}\nexport function boolean(params) {\n    return core._coercedBoolean(schemas.ZodMiniBoolean, params);\n}\nexport function bigint(params) {\n    return core._coercedBigint(schemas.ZodMiniBigInt, params);\n}\nexport function date(params) {\n    return core._coercedDate(schemas.ZodMiniDate, params);\n}\n", null, null, null, null, null, null, null, null, null, "/**\n * The type of error that occurred.\n * @public\n */\nexport type ErrorType = 'invalid-retry' | 'unknown-field'\n\n/**\n * Error thrown when encountering an issue during parsing.\n *\n * @public\n */\nexport class ParseError extends Error {\n  /**\n   * The type of error that occurred.\n   */\n  type: ErrorType\n\n  /**\n   * In the case of an unknown field encountered in the stream, this will be the field name.\n   */\n  field?: string | undefined\n\n  /**\n   * In the case of an unknown field encountered in the stream, this will be the value of the field.\n   */\n  value?: string | undefined\n\n  /**\n   * The line that caused the error, if available.\n   */\n  line?: string | undefined\n\n  constructor(\n    message: string,\n    options: {type: ErrorType; field?: string; value?: string; line?: string},\n  ) {\n    super(message)\n    this.name = 'ParseError'\n    this.type = options.type\n    this.field = options.field\n    this.value = options.value\n    this.line = options.line\n  }\n}\n", "/**\n * EventSource/Server-Sent Events parser\n * @see https://html.spec.whatwg.org/multipage/server-sent-events.html\n */\nimport {ParseError} from './errors.ts'\nimport type {EventSourceParser, ParserCallbacks} from './types.ts'\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction noop(_arg: unknown) {\n  // intentional noop\n}\n\n/**\n * Creates a new EventSource parser.\n *\n * @param callbacks - Callbacks to invoke on different parsing events:\n *   - `onEvent` when a new event is parsed\n *   - `onError` when an error occurs\n *   - `onRetry` when a new reconnection interval has been sent from the server\n *   - `onComment` when a comment is encountered in the stream\n *\n * @returns A new EventSource parser, with `parse` and `reset` methods.\n * @public\n */\nexport function createParser(callbacks: ParserCallbacks): EventSourceParser {\n  if (typeof callbacks === 'function') {\n    throw new TypeError(\n      '`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?',\n    )\n  }\n\n  const {onEvent = noop, onError = noop, onRetry = noop, onComment} = callbacks\n\n  let incompleteLine = ''\n\n  let isFirstChunk = true\n  let id: string | undefined\n  let data = ''\n  let eventType = ''\n\n  function feed(newChunk: string) {\n    // Strip any UTF8 byte order mark (BOM) at the start of the stream\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, '') : newChunk\n\n    // If there was a previous incomplete line, append it to the new chunk,\n    // so we may process it together as a new (hopefully complete) chunk.\n    const [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`)\n\n    for (const line of complete) {\n      parseLine(line)\n    }\n\n    incompleteLine = incomplete\n    isFirstChunk = false\n  }\n\n  function parseLine(line: string) {\n    // If the line is empty (a blank line), dispatch the event\n    if (line === '') {\n      dispatchEvent()\n      return\n    }\n\n    // If the line starts with a U+003A COLON character (:), ignore the line.\n    if (line.startsWith(':')) {\n      if (onComment) {\n        onComment(line.slice(line.startsWith(': ') ? 2 : 1))\n      }\n      return\n    }\n\n    // If the line contains a U+003A COLON character (:)\n    const fieldSeparatorIndex = line.indexOf(':')\n    if (fieldSeparatorIndex !== -1) {\n      // Collect the characters on the line before the first U+003A COLON character (:),\n      // and let `field` be that string.\n      const field = line.slice(0, fieldSeparatorIndex)\n\n      // Collect the characters on the line after the first U+003A COLON character (:),\n      // and let `value` be that string. If value starts with a U+0020 SPACE character,\n      // remove it from value.\n      const offset = line[fieldSeparatorIndex + 1] === ' ' ? 2 : 1\n      const value = line.slice(fieldSeparatorIndex + offset)\n\n      processField(field, value, line)\n      return\n    }\n\n    // Otherwise, the string is not empty but does not contain a U+003A COLON character (:)\n    // Process the field using the whole line as the field name, and an empty string as the field value.\n    //  This is according to spec. That means that a line that has the value `data` will result in\n    // a newline being added to the current `data` buffer, for instance.\n    processField(line, '', line)\n  }\n\n  function processField(field: string, value: string, line: string) {\n    // Field names must be compared literally, with no case folding performed.\n    switch (field) {\n      case 'event':\n        // Set the `event type` buffer to field value\n        eventType = value\n        break\n      case 'data':\n        // Append the field value to the `data` buffer, then append a single U+000A LINE FEED(LF)\n        // character to the `data` buffer.\n        data = `${data}${value}\\n`\n        break\n      case 'id':\n        // If the field value does not contain U+0000 NULL, then set the `ID` buffer to\n        // the field value. Otherwise, ignore the field.\n        id = value.includes('\\0') ? undefined : value\n        break\n      case 'retry':\n        // If the field value consists of only ASCII digits, then interpret the field value as an\n        // integer in base ten, and set the event stream's reconnection time to that integer.\n        // Otherwise, ignore the field.\n        if (/^\\d+$/.test(value)) {\n          onRetry(parseInt(value, 10))\n        } else {\n          onError(\n            new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n              type: 'invalid-retry',\n              value,\n              line,\n            }),\n          )\n        }\n        break\n      default:\n        // Otherwise, the field is ignored.\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}` : field}\"`,\n            {type: 'unknown-field', field, value, line},\n          ),\n        )\n        break\n    }\n  }\n\n  function dispatchEvent() {\n    const shouldDispatch = data.length > 0\n    if (shouldDispatch) {\n      onEvent({\n        id,\n        event: eventType || undefined,\n        // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n        // then remove the last character from the data buffer.\n        data: data.endsWith('\\n') ? data.slice(0, -1) : data,\n      })\n    }\n\n    // Reset for the next event\n    id = undefined\n    data = ''\n    eventType = ''\n  }\n\n  function reset(options: {consume?: boolean} = {}) {\n    if (incompleteLine && options.consume) {\n      parseLine(incompleteLine)\n    }\n\n    isFirstChunk = true\n    id = undefined\n    data = ''\n    eventType = ''\n    incompleteLine = ''\n  }\n\n  return {feed, reset}\n}\n\n/**\n * For the given `chunk`, split it into lines according to spec, and return any remaining incomplete line.\n *\n * @param chunk - The chunk to split into lines\n * @returns A tuple containing an array of complete lines, and any remaining incomplete line\n * @internal\n */\nfunction splitLines(chunk: string): [complete: Array<string>, incomplete: string] {\n  /**\n   * According to the spec, a line is terminated by either:\n   * - U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pair\n   * - a single U+000A LINE FEED(LF) character not preceded by a U+000D CARRIAGE RETURN(CR) character\n   * - a single U+000D CARRIAGE RETURN(CR) character not followed by a U+000A LINE FEED(LF) character\n   */\n  const lines: Array<string> = []\n  let incompleteLine = ''\n  let searchIndex = 0\n\n  while (searchIndex < chunk.length) {\n    // Find next line terminator\n    const crIndex = chunk.indexOf('\\r', searchIndex)\n    const lfIndex = chunk.indexOf('\\n', searchIndex)\n\n    // Determine line end\n    let lineEnd = -1\n    if (crIndex !== -1 && lfIndex !== -1) {\n      // CRLF case\n      lineEnd = Math.min(crIndex, lfIndex)\n    } else if (crIndex !== -1) {\n      // CR at the end of a chunk might be part of a CRLF sequence that spans chunks,\n      // so we shouldn't treat it as a line terminator (yet)\n      if (crIndex === chunk.length - 1) {\n        lineEnd = -1\n      } else {\n        lineEnd = crIndex\n      }\n    } else if (lfIndex !== -1) {\n      lineEnd = lfIndex\n    }\n\n    // Extract line if terminator found\n    if (lineEnd === -1) {\n      // No terminator found, rest is incomplete\n      incompleteLine = chunk.slice(searchIndex)\n      break\n    } else {\n      const line = chunk.slice(searchIndex, lineEnd)\n      lines.push(line)\n\n      // Move past line terminator\n      searchIndex = lineEnd + 1\n      if (chunk[searchIndex - 1] === '\\r' && chunk[searchIndex] === '\\n') {\n        searchIndex++\n      }\n    }\n  }\n\n  return [lines, incompleteLine]\n}\n", "/**\n * An extended version of the `Event` emitted by the `EventSource` object when an error occurs.\n * While the spec does not include any additional properties, we intentionally go beyond the spec\n * and provide some (minimal) additional information to aid in debugging.\n *\n * @public\n */\nexport class ErrorEvent extends Event {\n  /**\n   * HTTP status code, if this was triggered by an HTTP error\n   * Note: this is not part of the spec, but is included for better error handling.\n   *\n   * @public\n   */\n  public code?: number | undefined\n\n  /**\n   * Optional message attached to the error.\n   * Note: this is not part of the spec, but is included for better error handling.\n   *\n   * @public\n   */\n  public message?: string | undefined\n\n  /**\n   * Constructs a new `ErrorEvent` instance. This is typically not called directly,\n   * but rather emitted by the `EventSource` object when an error occurs.\n   *\n   * @param type - The type of the event (should be \"error\")\n   * @param errorEventInitDict - Optional properties to include in the error event\n   */\n  constructor(\n    type: string,\n    errorEventInitDict?: {message?: string | undefined; code?: number | undefined},\n  ) {\n    super(type)\n    this.code = errorEventInitDict?.code ?? undefined\n    this.message = errorEventInitDict?.message ?? undefined\n  }\n\n  /**\n   * Node.js \"hides\" the `message` and `code` properties of the `ErrorEvent` instance,\n   * when it is `console.log`'ed. This makes it harder to debug errors. To ease debugging,\n   * we explicitly include the properties in the `inspect` method.\n   *\n   * This is automatically called by Node.js when you `console.log` an instance of this class.\n   *\n   * @param _depth - The current depth\n   * @param options - The options passed to `util.inspect`\n   * @param inspect - The inspect function to use (prevents having to import it from `util`)\n   * @returns A string representation of the error\n   */\n  [Symbol.for('nodejs.util.inspect.custom')](\n    _depth: number,\n    options: {colors: boolean},\n    inspect: (obj: unknown, inspectOptions: {colors: boolean}) => string,\n  ): string {\n    return inspect(inspectableError(this), options)\n  }\n\n  /**\n   * Deno \"hides\" the `message` and `code` properties of the `ErrorEvent` instance,\n   * when it is `console.log`'ed. This makes it harder to debug errors. To ease debugging,\n   * we explicitly include the properties in the `inspect` method.\n   *\n   * This is automatically called by Deno when you `console.log` an instance of this class.\n   *\n   * @param inspect - The inspect function to use (prevents having to import it from `util`)\n   * @param options - The options passed to `Deno.inspect`\n   * @returns A string representation of the error\n   */\n  [Symbol.for('Deno.customInspect')](\n    inspect: (obj: unknown, inspectOptions: {colors: boolean}) => string,\n    options: {colors: boolean},\n  ): string {\n    return inspect(inspectableError(this), options)\n  }\n}\n\n/**\n * For environments where DOMException may not exist, we will use a SyntaxError instead.\n * While this isn't strictly according to spec, it is very close.\n *\n * @param message - The message to include in the error\n * @returns A `DOMException` or `SyntaxError` instance\n * @internal\n */\nexport function syntaxError(message: string): SyntaxError {\n  // If someone can figure out a way to make this work without depending on DOM/Node.js typings,\n  // and without casting to `any`, please send a PR \n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const DomException = (globalThis as any).DOMException\n  if (typeof DomException === 'function') {\n    return new DomException(message, 'SyntaxError')\n  }\n\n  return new SyntaxError(message)\n}\n\n/**\n * Flatten an error into a single error message string.\n * Unwraps nested errors and joins them with a comma.\n *\n * @param err - The error to flatten\n * @returns A string representation of the error\n * @internal\n */\nexport function flattenError(err: unknown): string {\n  if (!(err instanceof Error)) {\n    return `${err}`\n  }\n\n  if ('errors' in err && Array.isArray(err.errors)) {\n    return err.errors.map(flattenError).join(', ')\n  }\n\n  if ('cause' in err && err.cause instanceof Error) {\n    return `${err}: ${flattenError(err.cause)}`\n  }\n\n  return err.message\n}\n\n/**\n * Convert an `ErrorEvent` instance into a plain object for inspection.\n *\n * @param err - The `ErrorEvent` instance to inspect\n * @returns A plain object representation of the error\n * @internal\n */\nfunction inspectableError(err: ErrorEvent) {\n  return {\n    type: err.type,\n    message: err.message,\n    code: err.code,\n    defaultPrevented: err.defaultPrevented,\n    cancelable: err.cancelable,\n    timeStamp: err.timeStamp,\n  }\n}\n", "import {createParser, type EventSourceMessage, type EventSourceParser} from 'eventsource-parser'\n\nimport {ErrorEvent, flattenError, syntaxError} from './errors.js'\nimport type {\n  AddEventListenerOptions,\n  EventListenerOptions,\n  EventListenerOrEventListenerObject,\n  EventSourceEventMap,\n  EventSourceFetchInit,\n  EventSourceInit,\n  FetchLike,\n  FetchLikeResponse,\n} from './types.js'\n\n/**\n * An `EventSource` instance opens a persistent connection to an HTTP server, which sends events\n * in `text/event-stream` format. The connection remains open until closed by calling `.close()`.\n *\n * @public\n * @example\n * ```js\n * const eventSource = new EventSource('https://example.com/stream')\n * eventSource.addEventListener('error', (error) => {\n *   console.error(error)\n * })\n * eventSource.addEventListener('message', (event) => {\n *  console.log('Received message:', event.data)\n * })\n * ```\n */\nexport class EventSource extends EventTarget {\n  /**\n   * ReadyState representing an EventSource currently trying to connect\n   *\n   * @public\n   */\n  static CONNECTING = 0 as const\n\n  /**\n   * ReadyState representing an EventSource connection that is open (eg connected)\n   *\n   * @public\n   */\n  static OPEN = 1 as const\n\n  /**\n   * ReadyState representing an EventSource connection that is closed (eg disconnected)\n   *\n   * @public\n   */\n  static CLOSED = 2 as const\n\n  /**\n   * ReadyState representing an EventSource currently trying to connect\n   *\n   * @public\n   */\n  readonly CONNECTING = 0 as const\n\n  /**\n   * ReadyState representing an EventSource connection that is open (eg connected)\n   *\n   * @public\n   */\n  readonly OPEN = 1 as const\n\n  /**\n   * ReadyState representing an EventSource connection that is closed (eg disconnected)\n   *\n   * @public\n   */\n  readonly CLOSED = 2 as const\n\n  /**\n   * Returns the state of this EventSource object's connection. It can have the values described below.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/readyState)\n   *\n   * Note: typed as `number` instead of `0 | 1 | 2` for compatibility with the `EventSource` interface,\n   * defined in the TypeScript `dom` library.\n   *\n   * @public\n   */\n  public get readyState(): number {\n    return this.#readyState\n  }\n\n  /**\n   * Returns the URL providing the event stream.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/url)\n   *\n   * @public\n   */\n  public get url(): string {\n    return this.#url.href\n  }\n\n  /**\n   * Returns true if the credentials mode for connection requests to the URL providing the event stream is set to \"include\", and false otherwise.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/withCredentials)\n   */\n  public get withCredentials(): boolean {\n    return this.#withCredentials\n  }\n\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/error_event) */\n  public get onerror(): ((ev: ErrorEvent) => unknown) | null {\n    return this.#onError\n  }\n  public set onerror(value: ((ev: ErrorEvent) => unknown) | null) {\n    this.#onError = value\n  }\n\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/message_event) */\n  public get onmessage(): ((ev: MessageEvent) => unknown) | null {\n    return this.#onMessage\n  }\n  public set onmessage(value: ((ev: MessageEvent) => unknown) | null) {\n    this.#onMessage = value\n  }\n\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/open_event) */\n  public get onopen(): ((ev: Event) => unknown) | null {\n    return this.#onOpen\n  }\n  public set onopen(value: ((ev: Event) => unknown) | null) {\n    this.#onOpen = value\n  }\n\n  override addEventListener<K extends keyof EventSourceEventMap>(\n    type: K,\n    listener: (this: EventSource, ev: EventSourceEventMap[K]) => unknown,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  override addEventListener(\n    type: string,\n    listener: (this: EventSource, event: MessageEvent) => unknown,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  override addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  override addEventListener(\n    type: string,\n    listener:\n      | ((this: EventSource, event: MessageEvent) => unknown)\n      | EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void {\n    const listen = listener as (this: EventSource, event: Event) => unknown\n    super.addEventListener(type, listen, options)\n  }\n\n  override removeEventListener<K extends keyof EventSourceEventMap>(\n    type: K,\n    listener: (this: EventSource, ev: EventSourceEventMap[K]) => unknown,\n    options?: boolean | EventListenerOptions,\n  ): void\n  override removeEventListener(\n    type: string,\n    listener: (this: EventSource, event: MessageEvent) => unknown,\n    options?: boolean | EventListenerOptions,\n  ): void\n  override removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void\n  override removeEventListener(\n    type: string,\n    listener:\n      | ((this: EventSource, event: MessageEvent) => unknown)\n      | EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void {\n    const listen = listener as (this: EventSource, event: Event) => unknown\n    super.removeEventListener(type, listen, options)\n  }\n\n  constructor(url: string | URL, eventSourceInitDict?: EventSourceInit) {\n    super()\n\n    try {\n      if (url instanceof URL) {\n        this.#url = url\n      } else if (typeof url === 'string') {\n        this.#url = new URL(url, getBaseURL())\n      } else {\n        throw new Error('Invalid URL')\n      }\n    } catch (err) {\n      throw syntaxError('An invalid or illegal string was specified')\n    }\n\n    this.#parser = createParser({\n      onEvent: this.#onEvent,\n      onRetry: this.#onRetryChange,\n    })\n\n    this.#readyState = this.CONNECTING\n    this.#reconnectInterval = 3000\n    this.#fetch = eventSourceInitDict?.fetch ?? globalThis.fetch\n    this.#withCredentials = eventSourceInitDict?.withCredentials ?? false\n\n    this.#connect()\n  }\n\n  /**\n   * Aborts any instances of the fetch algorithm started for this EventSource object, and sets the readyState attribute to CLOSED.\n   *\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/EventSource/close)\n   *\n   * @public\n   */\n  close(): void {\n    if (this.#reconnectTimer) clearTimeout(this.#reconnectTimer)\n    if (this.#readyState === this.CLOSED) return\n    if (this.#controller) this.#controller.abort()\n    this.#readyState = this.CLOSED\n    this.#controller = undefined\n  }\n\n  // PRIVATES FOLLOW\n\n  /**\n   * Current connection state\n   *\n   * @internal\n   */\n  #readyState: number\n\n  /**\n   * Original URL used to connect.\n   *\n   * Note that this will stay the same even after a redirect.\n   *\n   * @internal\n   */\n  #url: URL\n\n  /**\n   * The destination URL after a redirect. Is reset on reconnection.\n   *\n   * @internal\n   */\n  #redirectUrl: URL | undefined\n\n  /**\n   * Whether to include credentials in the request\n   *\n   * @internal\n   */\n  #withCredentials: boolean\n\n  /**\n   * The fetch implementation to use\n   *\n   * @internal\n   */\n  #fetch: FetchLike\n\n  /**\n   * The reconnection time in milliseconds\n   *\n   * @internal\n   */\n  #reconnectInterval: number\n\n  /**\n   * Reference to an ongoing reconnect attempt, if any\n   *\n   * @internal\n   */\n  #reconnectTimer: ReturnType<typeof setTimeout> | undefined\n\n  /**\n   * The last event ID seen by the EventSource, which will be sent as `Last-Event-ID` in the\n   * request headers on a reconnection attempt.\n   *\n   * @internal\n   */\n  #lastEventId: string | null = null\n\n  /**\n   * The AbortController instance used to abort the fetch request\n   *\n   * @internal\n   */\n  #controller: AbortController | undefined\n\n  /**\n   * Instance of an EventSource parser (`eventsource-parser` npm module)\n   *\n   * @internal\n   */\n  #parser: EventSourceParser\n\n  /**\n   * Holds the current error handler, attached through `onerror` property directly.\n   * Note that `addEventListener('error', )` will not be stored here.\n   *\n   * @internal\n   */\n  #onError: ((ev: ErrorEvent) => unknown) | null = null\n\n  /**\n   * Holds the current message handler, attached through `onmessage` property directly.\n   * Note that `addEventListener('message', )` will not be stored here.\n   *\n   * @internal\n   */\n  #onMessage: ((ev: MessageEvent) => unknown) | null = null\n\n  /**\n   * Holds the current open handler, attached through `onopen` property directly.\n   * Note that `addEventListener('open', )` will not be stored here.\n   *\n   * @internal\n   */\n  #onOpen: ((ev: Event) => unknown) | null = null\n\n  /**\n   * Connect to the given URL and start receiving events\n   *\n   * @internal\n   */\n  #connect() {\n    this.#readyState = this.CONNECTING\n    this.#controller = new AbortController()\n\n    // Browser tests are failing if we directly call `this.#fetch()`, thus the indirection.\n    const fetch = this.#fetch\n    fetch(this.#url, this.#getRequestOptions())\n      .then(this.#onFetchResponse)\n      .catch(this.#onFetchError)\n  }\n\n  /**\n   * Handles the fetch response\n   *\n   * @param response - The Fetch(ish) response\n   * @internal\n   */\n  #onFetchResponse = async (response: FetchLikeResponse) => {\n    this.#parser.reset()\n\n    const {body, redirected, status, headers} = response\n\n    // [spec] a client can be told to stop reconnecting using the HTTP 204 No Content response code.\n    if (status === 204) {\n      // We still need to emit an error event - this mirrors the browser behavior,\n      // and without it there is no way to tell the user that the connection was closed.\n      this.#failConnection('Server sent HTTP 204, not reconnecting', 204)\n      this.close()\n      return\n    }\n\n    // [spec] Event stream requests can be redirected using HTTP 301 and 307 redirects as with\n    // [spec] normal HTTP requests.\n    // Spec does not say anything about other redirect codes (302, 308), but this seems an\n    // unintended omission, rather than a feature. Browsers will happily redirect on other 3xxs's.\n    if (redirected) {\n      this.#redirectUrl = new URL(response.url)\n    } else {\n      this.#redirectUrl = undefined\n    }\n\n    // [spec] if res's status is not 200, , then fail the connection.\n    if (status !== 200) {\n      this.#failConnection(`Non-200 status code (${status})`, status)\n      return\n    }\n\n    // [spec] or if res's `Content-Type` is not `text/event-stream`, then fail the connection.\n    const contentType = headers.get('content-type') || ''\n    if (!contentType.startsWith('text/event-stream')) {\n      this.#failConnection('Invalid content type, expected \"text/event-stream\"', status)\n      return\n    }\n\n    // [spec] if the readyState attribute is set to a value other than CLOSED\n    if (this.#readyState === this.CLOSED) {\n      return\n    }\n\n    // [spec] sets the readyState attribute to OPEN and fires an event\n    // [spec] named open at the EventSource object.\n    this.#readyState = this.OPEN\n\n    const openEvent = new Event('open')\n    this.#onOpen?.(openEvent)\n    this.dispatchEvent(openEvent)\n\n    // Ensure that the response stream is a web stream\n    if (typeof body !== 'object' || !body || !('getReader' in body)) {\n      this.#failConnection('Invalid response body, expected a web ReadableStream', status)\n      this.close() // This should only happen if `fetch` provided is \"faulty\" - don't reconnect\n      return\n    }\n\n    const decoder = new TextDecoder()\n\n    const reader = body.getReader()\n    let open = true\n\n    do {\n      const {done, value} = await reader.read()\n      if (value) {\n        this.#parser.feed(decoder.decode(value, {stream: !done}))\n      }\n\n      if (!done) {\n        continue\n      }\n\n      open = false\n      this.#parser.reset()\n\n      this.#scheduleReconnect()\n    } while (open)\n  }\n\n  /**\n   * Handles rejected requests for the EventSource endpoint\n   *\n   * @param err - The error from `fetch()`\n   * @internal\n   */\n  #onFetchError = (err: Error & {type?: string}) => {\n    this.#controller = undefined\n\n    // We expect abort errors when the user manually calls `close()` - ignore those\n    if (err.name === 'AbortError' || err.type === 'aborted') {\n      return\n    }\n\n    this.#scheduleReconnect(flattenError(err))\n  }\n\n  /**\n   * Get request options for the `fetch()` request\n   *\n   * @returns The request options\n   * @internal\n   */\n  #getRequestOptions(): EventSourceFetchInit {\n    const lastEvent = this.#lastEventId ? {'Last-Event-ID': this.#lastEventId} : undefined\n\n    const init: EventSourceFetchInit = {\n      // [spec] Let `corsAttributeState` be `Anonymous`\n      // [spec] will have their mode set to \"cors\"\n      mode: 'cors',\n      redirect: 'follow',\n      headers: {Accept: 'text/event-stream', ...lastEvent},\n      cache: 'no-store',\n      signal: this.#controller?.signal,\n    }\n\n    // Some environments crash if attempting to set `credentials` where it is not supported,\n    // eg on Cloudflare Workers. To avoid this, we only set it in browser-like environments.\n    if ('window' in globalThis) {\n      // [spec] and their credentials mode set to \"same-origin\"\n      // [spec] if the `withCredentials` attribute is `true`, set the credentials mode to \"include\"\n      init.credentials = this.withCredentials ? 'include' : 'same-origin'\n    }\n\n    return init\n  }\n\n  /**\n   * Called by EventSourceParser instance when an event has successfully been parsed\n   * and is ready to be processed.\n   *\n   * @param event - The parsed event\n   * @internal\n   */\n  #onEvent = (event: EventSourceMessage) => {\n    if (typeof event.id === 'string') {\n      this.#lastEventId = event.id\n    }\n\n    const messageEvent = new MessageEvent(event.event || 'message', {\n      data: event.data,\n      origin: this.#redirectUrl ? this.#redirectUrl.origin : this.#url.origin,\n      lastEventId: event.id || '',\n    })\n\n    // The `onmessage` property of the EventSource instance only triggers on messages without an\n    // `event` field, or ones that explicitly set `message`.\n    if (this.#onMessage && (!event.event || event.event === 'message')) {\n      this.#onMessage(messageEvent)\n    }\n\n    this.dispatchEvent(messageEvent)\n  }\n\n  /**\n   * Called by EventSourceParser instance when a new reconnection interval is received\n   * from the EventSource endpoint.\n   *\n   * @param value - The new reconnection interval in milliseconds\n   * @internal\n   */\n  #onRetryChange = (value: number) => {\n    this.#reconnectInterval = value\n  }\n\n  /**\n   * Handles the process referred to in the EventSource specification as \"failing a connection\".\n   *\n   * @param error - The error causing the connection to fail\n   * @param code - The HTTP status code, if available\n   * @internal\n   */\n  #failConnection(message?: string, code?: number) {\n    // [spec] if the readyState attribute is set to a value other than CLOSED,\n    // [spec] sets the readyState attribute to CLOSED\n    if (this.#readyState !== this.CLOSED) {\n      this.#readyState = this.CLOSED\n    }\n\n    // [spec] and fires an event named `error` at the `EventSource` object.\n    // [spec] Once the user agent has failed the connection, it does not attempt to reconnect.\n    // [spec] > Implementations are especially encouraged to report detailed information\n    // [spec] > to their development consoles whenever an error event is fired, since little\n    // [spec] > to no information can be made available in the events themselves.\n    // Printing to console is not very programatically helpful, though, so we emit a custom event.\n    const errorEvent = new ErrorEvent('error', {code, message})\n\n    this.#onError?.(errorEvent)\n    this.dispatchEvent(errorEvent)\n  }\n\n  /**\n   * Schedules a reconnection attempt against the EventSource endpoint.\n   *\n   * @param message - The error causing the connection to fail\n   * @param code - The HTTP status code, if available\n   * @internal\n   */\n  #scheduleReconnect(message?: string, code?: number) {\n    // [spec] If the readyState attribute is set to CLOSED, abort the task.\n    if (this.#readyState === this.CLOSED) {\n      return\n    }\n\n    // [spec] Set the readyState attribute to CONNECTING.\n    this.#readyState = this.CONNECTING\n\n    // [spec] Fire an event named `error` at the EventSource object.\n    const errorEvent = new ErrorEvent('error', {code, message})\n    this.#onError?.(errorEvent)\n    this.dispatchEvent(errorEvent)\n\n    // [spec] Wait a delay equal to the reconnection time of the event source.\n    this.#reconnectTimer = setTimeout(this.#reconnect, this.#reconnectInterval)\n  }\n\n  /**\n   * Reconnects to the EventSource endpoint after a disconnect/failure\n   *\n   * @internal\n   */\n  #reconnect = () => {\n    this.#reconnectTimer = undefined\n\n    // [spec] If the EventSource's readyState attribute is not set to CONNECTING, then return.\n    if (this.#readyState !== this.CONNECTING) {\n      return\n    }\n\n    this.#connect()\n  }\n}\n\n/**\n * According to spec, when constructing a URL:\n * > 1. Let baseURL be environment's base URL, if environment is a Document object\n * > 2. Return the result of applying the URL parser to url, with baseURL.\n *\n * Thus we should use `document.baseURI` if available, since it can be set through a base tag.\n *\n * @returns The base URL, if available - otherwise `undefined`\n * @internal\n */\nfunction getBaseURL(): string | undefined {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const doc = 'document' in globalThis ? (globalThis as any).document : undefined\n  return doc && typeof doc === 'object' && 'baseURI' in doc && typeof doc.baseURI === 'string'\n    ? doc.baseURI\n    : undefined\n}\n", null, "let crypto;\ncrypto = globalThis.crypto; // web browsers\n/**\n * Creates an array of length `size` of random bytes\n * @param size\n * @returns Array of random ints (0 to 255)\n */\nasync function getRandomValues(size) {\n    return (await crypto).getRandomValues(new Uint8Array(size));\n}\n/** Generate cryptographically strong random string\n * @param size The desired length of the string\n * @returns The random string\n */\nasync function random(size) {\n    const mask = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~\";\n    const evenDistCutoff = Math.pow(2, 8) - Math.pow(2, 8) % mask.length;\n    let result = \"\";\n    while (result.length < size) {\n        const randomBytes = await getRandomValues(size - result.length);\n        for (const randomByte of randomBytes) {\n            if (randomByte < evenDistCutoff) {\n                result += mask[randomByte % mask.length];\n            }\n        }\n    }\n    return result;\n}\n/** Generate a PKCE challenge verifier\n * @param length Length of the verifier\n * @returns A random verifier `length` characters long\n */\nasync function generateVerifier(length) {\n    return await random(length);\n}\n/** Generate a PKCE code challenge from a code verifier\n * @param code_verifier\n * @returns The base64 url encoded code challenge\n */\nexport async function generateChallenge(code_verifier) {\n    const buffer = await (await crypto).subtle.digest(\"SHA-256\", new TextEncoder().encode(code_verifier));\n    // Generate base64url string\n    // btoa is deprecated in Node.js but is used here for web browser compatibility\n    // (which has no good replacement yet, see also https://github.com/whatwg/html/issues/6811)\n    return btoa(String.fromCharCode(...new Uint8Array(buffer)))\n        .replace(/\\//g, '_')\n        .replace(/\\+/g, '-')\n        .replace(/=/g, '');\n}\n/** Generate a PKCE challenge pair\n * @param length Length of the verifer (between 43-128). Defaults to 43.\n * @returns PKCE challenge pair\n */\nexport default async function pkceChallenge(length) {\n    if (!length)\n        length = 43;\n    if (length < 43 || length > 128) {\n        throw `Expected a length between 43 and 128. Received ${length}.`;\n    }\n    const verifier = await generateVerifier(length);\n    const challenge = await generateChallenge(verifier);\n    return {\n        code_verifier: verifier,\n        code_challenge: challenge,\n    };\n}\n/** Verify that a code_verifier produces the expected code challenge\n * @param code_verifier\n * @param expectedChallenge The code challenge to verify\n * @returns True if challenges are equal. False otherwise.\n */\nexport async function verifyChallenge(code_verifier, expectedChallenge) {\n    const actualChallenge = await generateChallenge(code_verifier);\n    return actualChallenge === expectedChallenge;\n}\n", null, null, null, null, null, "import {createParser} from './parse.ts'\nimport type {EventSourceMessage, EventSourceParser} from './types.ts'\n\n/**\n * Options for the EventSourceParserStream.\n *\n * @public\n */\nexport interface StreamOptions {\n  /**\n   * Behavior when a parsing error occurs.\n   *\n   * - A custom function can be provided to handle the error.\n   * - `'terminate'` will error the stream and stop parsing.\n   * - Any other value will ignore the error and continue parsing.\n   *\n   * @defaultValue `undefined`\n   */\n  onError?: ('terminate' | ((error: Error) => void)) | undefined\n\n  /**\n   * Callback for when a reconnection interval is sent from the server.\n   *\n   * @param retry - The number of milliseconds to wait before reconnecting.\n   */\n  onRetry?: ((retry: number) => void) | undefined\n\n  /**\n   * Callback for when a comment is encountered in the stream.\n   *\n   * @param comment - The comment encountered in the stream.\n   */\n  onComment?: ((comment: string) => void) | undefined\n}\n\n/**\n * A TransformStream that ingests a stream of strings and produces a stream of `EventSourceMessage`.\n *\n * @example Basic usage\n * ```\n * const eventStream =\n *   response.body\n *     .pipeThrough(new TextDecoderStream())\n *     .pipeThrough(new EventSourceParserStream())\n * ```\n *\n * @example Terminate stream on parsing errors\n * ```\n * const eventStream =\n *  response.body\n *   .pipeThrough(new TextDecoderStream())\n *   .pipeThrough(new EventSourceParserStream({terminateOnError: true}))\n * ```\n *\n * @public\n */\nexport class EventSourceParserStream extends TransformStream<string, EventSourceMessage> {\n  constructor({onError, onRetry, onComment}: StreamOptions = {}) {\n    let parser!: EventSourceParser\n\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event)\n          },\n          onError(error) {\n            if (onError === 'terminate') {\n              controller.error(error)\n            } else if (typeof onError === 'function') {\n              onError(error)\n            }\n\n            // Ignore by default\n          },\n          onRetry,\n          onComment,\n        })\n      },\n      transform(chunk) {\n        parser.feed(chunk)\n      },\n    })\n  }\n}\n\nexport {type ErrorType, ParseError} from './errors.ts'\nexport type {EventSourceMessage} from './types.ts'\n", null, "import { type OAuthClientProvider } from \"@modelcontextprotocol/sdk/client/auth.js\";\nimport { Client } from \"@modelcontextprotocol/sdk/client/index.js\";\nimport { SSEClientTransport } from \"@modelcontextprotocol/sdk/client/sse.js\";\nimport { StreamableHTTPClientTransport } from \"@modelcontextprotocol/sdk/client/streamableHttp.js\";\nimport type { RequestHandlerExtra } from \"@modelcontextprotocol/sdk/shared/protocol.js\";\nimport {\n  ClientNotification,\n  ClientRequest,\n  CreateMessageRequest,\n  CreateMessageRequestSchema,\n  CreateMessageResult,\n  ElicitRequest,\n  ElicitRequestSchema,\n  ElicitResult,\n} from \"@modelcontextprotocol/sdk/types.js\";\nimport { JSONSchema7 } from \"json-schema\";\nimport { MCPTransport } from \"../model/mcp-server-info\";\n\n// Re-export for backwards compatibility\nexport { MCPTransport };\n\n/**\n * Handler for MCP elicitation requests.\n * Receives the elicit request and a RequestHandlerExtra containing an AbortSignal that fires when the request is cancelled.\n * @param request - The elicitation request from the server\n * @param extra - Additional context including AbortSignal for cancellation\n * @returns Promise resolving to the elicitation result\n * @example\n * ```typescript\n * const handler: MCPElicitationHandler = async (request, extra) => {\n *   // Listen for cancellation\n *   extra.signal.addEventListener('abort', () => {\n *     console.log('Request cancelled');\n *   });\n *\n *   // Return user's response\n *   return {\n *     action: 'accept',\n *     content: { name: 'John' }\n *   };\n * };\n * ```\n */\nexport type MCPElicitationHandler = (\n  e: ElicitRequest,\n  extra: RequestHandlerExtra<ClientRequest, ClientNotification>,\n) => Promise<ElicitResult>;\n\n/**\n * Handler for MCP sampling requests (create_message).\n * Receives the sampling request and a RequestHandlerExtra containing an AbortSignal that fires when the request is cancelled.\n * @param request - The sampling/create_message request from the server\n * @param extra - Additional context including AbortSignal for cancellation\n * @returns Promise resolving to the sampling result\n */\nexport type MCPSamplingHandler = (\n  e: CreateMessageRequest,\n  extra: RequestHandlerExtra<ClientRequest, ClientNotification>,\n) => Promise<CreateMessageResult>;\n\n/**\n * Handlers for MCP requests - these are only used if the server supports the corresponding capabilities\n * @param elicitation - Handler for elicitation requests (receives request and RequestHandlerExtra with AbortSignal)\n * @param sampling - Handler for sampling requests (receives request and RequestHandlerExtra with AbortSignal)\n * @example\n * ```typescript\n * const mcp = await MCPClient.create(\n *     'https://api.example.com/mcp',\n *     MCPTransport.HTTP,\n *     {},\n *     undefined,\n *     undefined,\n *     {\n *       elicitation: (e, extra) => Promise.resolve({...}),\n *     },\n * );\n * ```\n */\nexport interface MCPHandlers {\n  elicitation: MCPElicitationHandler;\n  sampling: MCPSamplingHandler;\n}\n\n/**\n * A client for interacting with MCP (Model Context Protocol) servers.\n * Provides a simple interface for listing and calling tools exposed by the server.\n * @example\n * ```typescript\n * const mcp = await MCPClient.create('https://api.example.com/mcp');\n * const tools = await mcp.listTools();\n * const result = await mcp.callTool('toolName', { arg1: 'value1' });\n * ```\n */\nexport class MCPClient {\n  /**\n   * The underlying MCP client\n   *\n   * Be careful not to mutate the client directly, use the methods provided instead.\n   */\n  client: Client;\n  private transport: SSEClientTransport | StreamableHTTPClientTransport;\n  private transportType: MCPTransport;\n  public sessionId?: string;\n  private endpoint: string;\n  private headers: Record<string, string>;\n  private authProvider?: OAuthClientProvider;\n  private handlers: Partial<MCPHandlers>;\n\n  /**\n   * Private constructor to enforce using the static create method.\n   * @param endpoint - The URL of the MCP server to connect to\n   * @param transportType - The transport to use for the MCP client\n   * @param headers - Optional custom headers to include in requests\n   */\n  private constructor(\n    endpoint: string,\n    transportType: MCPTransport,\n    headers?: Record<string, string>,\n    authProvider?: OAuthClientProvider,\n    sessionId?: string,\n    handlers: Partial<MCPHandlers> = {},\n  ) {\n    this.endpoint = endpoint;\n    this.headers = headers ?? {};\n    this.authProvider = authProvider;\n    this.transportType = transportType;\n    this.handlers = handlers;\n    this.transport = this.initializeTransport(sessionId);\n    this.client = this.initializeClient();\n  }\n\n  /**\n   * Creates and initializes a new MCPClient instance. This is the recommended\n   * way to create an MCPClient as it handles both instantiation and connection\n   * setup.\n   * @param endpoint - The URL of the MCP server to connect to\n   * @param transportType - The transport type to use for the MCP client. Defaults to HTTP.\n   * @param headers - Optional custom headers to include in requests\n   * @param authProvider - Optional auth provider to use for authentication\n   * @param sessionId - Optional session id to use for the MCP client - if not\n   *   provided, a new session will be created\n   * @returns A connected MCPClient instance ready for use\n   * @throws {Error} Will throw an error if connection fails\n   */\n  static async create(\n    endpoint: string,\n    transportType: MCPTransport = MCPTransport.HTTP,\n    headers: Record<string, string> | undefined,\n    authProvider: OAuthClientProvider | undefined,\n    sessionId: string | undefined,\n    handlers: Partial<MCPHandlers> = {},\n  ): Promise<MCPClient> {\n    const mcpClient = new MCPClient(\n      endpoint,\n      transportType,\n      headers,\n      authProvider,\n      sessionId,\n      handlers,\n    );\n    await mcpClient.client.connect(mcpClient.transport);\n    if (\"sessionId\" in mcpClient.transport) {\n      mcpClient.sessionId = mcpClient.transport.sessionId;\n    }\n    return mcpClient;\n  }\n\n  private initializeTransport(sessionId: string | undefined) {\n    if (this.transportType === MCPTransport.SSE) {\n      return new SSEClientTransport(new URL(this.endpoint), {\n        authProvider: this.authProvider,\n        requestInit: { headers: this.headers },\n      });\n    } else {\n      return new StreamableHTTPClientTransport(new URL(this.endpoint), {\n        authProvider: this.authProvider,\n        requestInit: { headers: this.headers },\n        sessionId,\n      });\n    }\n  }\n\n  /**\n   * Initializes the MCP client with the appropriate capabilities and handlers\n   * @returns The initialized MCP client\n   */\n  private initializeClient() {\n    const elicitationCapability = this.handlers.elicitation\n      ? { elicitation: {} }\n      : {};\n    const samplingCapability = this.handlers.sampling ? { sampling: {} } : {};\n    const client = new Client(\n      {\n        name: \"tambo-mcp-client\",\n        version: \"1.0.0\",\n      },\n      {\n        capabilities: {\n          ...elicitationCapability,\n          ...samplingCapability,\n        },\n      },\n    );\n\n    if (this.handlers.elicitation) {\n      client.setRequestHandler(ElicitRequestSchema, this.handlers.elicitation);\n    }\n    if (this.handlers.sampling) {\n      client.setRequestHandler(\n        CreateMessageRequestSchema,\n        this.handlers.sampling,\n      );\n    }\n    return client;\n  }\n\n  /**\n   * Retrieves a complete list of all available tools from the MCP server.\n   * Handles pagination automatically by following cursors until all tools are fetched.\n   * @returns A complete list of all available tools and their descriptions\n   * @throws {Error} Will throw an error if any server request fails during pagination\n   */\n  async listTools(): Promise<MCPToolSpec[]> {\n    const allTools: MCPToolSpec[] = [];\n    let hasMore = true;\n    let cursor: string | undefined = undefined;\n\n    while (hasMore) {\n      const response = await this.client.listTools({ cursor }, {});\n      allTools.push(\n        ...response.tools.map((tool): MCPToolSpec => {\n          // make sure the right type is used\n          const inputSchemaType: string = tool.inputSchema.type;\n          if (inputSchemaType !== \"object\") {\n            throw new Error(\n              `Input schema for tool ${tool.name} is not an object`,\n            );\n          }\n\n          return {\n            name: tool.name,\n            description: tool.description,\n            inputSchema: tool.inputSchema as JSONSchema7,\n          };\n        }),\n      );\n\n      if (response.nextCursor) {\n        cursor = response.nextCursor;\n      } else {\n        hasMore = false;\n      }\n    }\n\n    return allTools;\n  }\n\n  getServerCapabilities() {\n    return this.client.getServerCapabilities();\n  }\n\n  getServerVersion() {\n    return this.client.getServerVersion();\n  }\n\n  getInstructions() {\n    return this.client.getInstructions();\n  }\n\n  /**\n   * Calls a specific tool on the MCP server with the provided arguments.\n   * @param name - The name of the tool to call\n   * @param args - Arguments to pass to the tool, must match the tool's expected schema\n   * @returns The result from the tool execution\n   * @throws {Error} Will throw an error if the tool call fails or if arguments are invalid\n   */\n  async callTool(\n    name: string,\n    args: Record<string, unknown>,\n    _meta?: Record<string, unknown>,\n  ): Promise<MCPToolCallResult> {\n    const result = await this.client.callTool({\n      name,\n      arguments: args,\n      _meta,\n    });\n    return result;\n  }\n\n  updateElicitationHandler(handler: MCPElicitationHandler | undefined) {\n    // Skip if handler hasn't changed\n    if (handler === this.handlers.elicitation) {\n      return;\n    }\n\n    // Because we advertise the elicitation capability on initial connection, we can only update\n    // an existing handler, not add it if we haven't set it yet.\n    if (handler && !this.handlers.elicitation) {\n      throw new Error(\"Elicitation handler must be set on create\");\n    }\n    this.handlers = {\n      ...this.handlers,\n      elicitation: handler,\n    };\n    if (!handler) {\n      const method = ElicitRequestSchema.shape.method.value;\n      this.client.removeRequestHandler(method);\n      return;\n    }\n    this.client.setRequestHandler(ElicitRequestSchema, handler);\n  }\n\n  updateSamplingHandler(handler: MCPSamplingHandler | undefined) {\n    // Skip if handler hasn't changed\n    if (handler === this.handlers.sampling) {\n      return;\n    }\n\n    // Because we advertise the sampling capability on initial connection, we can only update\n    // an existing handler, not add it if we haven't set it yet.\n    if (handler && !this.handlers.sampling) {\n      throw new Error(\"Sampling handler must be set on create\");\n    }\n    this.handlers = {\n      ...this.handlers,\n      sampling: handler,\n    };\n    if (!handler) {\n      const method = CreateMessageRequestSchema.shape.method.value;\n      this.client.removeRequestHandler(method);\n      return;\n    }\n    this.client.setRequestHandler(CreateMessageRequestSchema, handler);\n  }\n\n  async close() {\n    // Not really sure which one of these to close first, but we'll close the\n    // transport first so that no requests can come in and hit closing/closed\n    // clients\n    await this.transport.close();\n    await this.client.close();\n  }\n}\n\n/**\n * The result of a tool call.\n * This is the same as the result of a tool call in the OpenAI SDK, but is reified here\n */\nexport type MCPToolCallResult = Awaited<\n  ReturnType<typeof Client.prototype.callTool>\n>;\n\n// Example usage:\n/*\nconst mcp = await MCPClient.create('https://api.example.com/mcp', MCPTransport.HTTP);\nconst tools = await mcp.listTools();\nconst result = await mcp.callTool('toolName', { arg1: 'value1' });\n*/\n\nexport interface MCPToolSpec {\n  name: string;\n  description?: string;\n  inputSchema?: JSONSchema7;\n  maxCalls?: number;\n}\n", "\"use client\";\n\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { useTamboContextHelpers } from \"./tambo-context-helpers-provider\";\n\n/**\n * Represents a context attachment that will be sent with the next user message.\n * These are automatically registered as context helpers and will be included in\n * the additionalContext when the next message is sent.\n * @property {string} id - Unique identifier for this context attachment\n * @property {string} [displayName] - Optional display name for UI rendering\n * @property {string} context - The context value that will be used in additionalContext\n * @property {string} [type] - Optional type identifier for grouping/rendering multiple contexts of the same type\n */\nexport interface ContextAttachment {\n  id: string;\n  displayName?: string;\n  context: string;\n  type?: string;\n}\n\n/**\n * Context state interface for managing context attachments.\n * @property {ContextAttachment[]} attachments - Array of active context attachments\n * @property {(contextAttachment: Omit<ContextAttachment, \"id\">) => ContextAttachment} addContextAttachment - Add a new context attachment, returns the attachment\n * @property {(id: string) => void} removeContextAttachment - Remove a context attachment by ID\n * @property {() => void} clearContextAttachments - Remove all context attachments\n */\nexport interface ContextAttachmentState {\n  attachments: ContextAttachment[];\n  addContextAttachment: (\n    contextAttachment: Omit<ContextAttachment, \"id\">,\n  ) => ContextAttachment;\n  removeContextAttachment: (id: string) => void;\n  clearContextAttachments: () => void;\n}\n\nconst ContextAttachmentContext = createContext<ContextAttachmentState | null>(\n  null,\n);\n\nexport interface TamboContextAttachmentProviderProps {\n  children?: React.ReactNode;\n}\n\nconst CONTEXT_ATTACHMENTS_HELPER_KEY = \"contextAttachments\";\n\n/**\n * Provider that manages context attachments for the next user message.\n * - **Included by default** in TamboProvider - no need to wrap separately\n * - Use `useTamboContextAttachment()` hook to manage context attachments\n * **What it does:**\n * - Stores context attachments that will be sent with the next message\n * - Automatically registers/deregisters context helpers for each attachment\n * - Context helpers are automatically collected during message submission\n * - Context attachments are cleared after message submission (one-time use)\n *\n * **Note:** Context attachments are automatically included in additionalContext when\n * the next message is sent. They are cleared after submission.\n * @param props - The props for the TamboContextAttachmentProvider\n * @param props.children - The children to wrap\n * @returns The TamboContextAttachmentProvider component\n */\nexport function TamboContextAttachmentProvider({\n  children,\n}: TamboContextAttachmentProviderProps) {\n  const { addContextHelper, removeContextHelper } = useTamboContextHelpers();\n  const [attachments, setAttachments] = useState<ContextAttachment[]>([]);\n\n  useEffect(() => {\n    addContextHelper(CONTEXT_ATTACHMENTS_HELPER_KEY, () => {\n      if (attachments.length === 0) {\n        return null;\n      }\n\n      return attachments.map((attachment) => ({\n        id: attachment.id,\n        displayName: attachment.displayName,\n        context: attachment.context,\n        type: attachment.type,\n      }));\n    });\n\n    return () => {\n      removeContextHelper(CONTEXT_ATTACHMENTS_HELPER_KEY);\n    };\n  }, [attachments, addContextHelper, removeContextHelper]);\n\n  /**\n   * Adds a new context attachment that will be included with the next user message.\n   * The attachment is automatically registered as part of the merged context helper.\n   * @param contextAttachment - The context attachment input (context, optional displayName, optional type)\n   * @returns The created ContextAttachment object with a unique ID\n   * @example\n   * ```tsx\n   * const attachment = addContextAttachment({\n   *   context: \"The contents of File.txt\",\n   *   displayName: \"File.txt\",\n   *   type: \"file\"\n   * });\n   * ```\n   */\n  const addContextAttachment = useCallback(\n    (contextAttachment: Omit<ContextAttachment, \"id\">): ContextAttachment => {\n      const id = crypto.randomUUID();\n      const attachment: ContextAttachment = {\n        id,\n        displayName: contextAttachment.displayName,\n        context: contextAttachment.context,\n        type: contextAttachment.type,\n      };\n      setAttachments((prev) => [...prev, attachment]);\n\n      return attachment;\n    },\n    [],\n  );\n\n  /**\n   * Removes a context attachment by its ID.\n   */\n  const removeContextAttachment = useCallback((id: string) => {\n    setAttachments((prev) => prev.filter((c) => c.id !== id));\n  }, []);\n\n  /**\n   * Removes all context attachments at once.\n   */\n  const clearContextAttachments = useCallback(() => {\n    setAttachments([]);\n  }, []);\n\n  const value = useMemo(\n    () => ({\n      attachments,\n      addContextAttachment,\n      removeContextAttachment,\n      clearContextAttachments,\n    }),\n    [\n      attachments,\n      addContextAttachment,\n      removeContextAttachment,\n      clearContextAttachments,\n    ],\n  );\n\n  return (\n    <ContextAttachmentContext.Provider value={value}>\n      {children}\n    </ContextAttachmentContext.Provider>\n  );\n}\n\n/**\n * Hook to access context attachment state and methods.\n * **Must be used within a `TamboProvider`** - throws an error otherwise.\n * @throws {Error} If used outside of TamboProvider\n * @returns The context attachment state and methods\n * @example\n * ```tsx\n * const { addContextAttachment, attachments, clearContextAttachments } = useTamboContextAttachment();\n *\n * // Add a context attachment for the next message\n * const attachment = addContextAttachment({\n *   context: \"The contents of File.txt\",\n *   displayName: \"File.txt\", // optional\n *   type: \"file\" // optional\n * });\n *\n * // Remove a context attachment\n * removeContextAttachment(attachment.id);\n *\n * // Clear all context attachments\n * clearContextAttachments();\n * ```\n */\nexport function useTamboContextAttachment() {\n  const context = useContext(ContextAttachmentContext);\n  if (!context) {\n    throw new Error(\n      \"useTamboContextAttachment must be used within a TamboContextAttachmentProvider\",\n    );\n  }\n  return context;\n}\n", "\"use client\";\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useState,\n} from \"react\";\nimport {\n  useTamboMutation,\n  UseTamboMutationResult,\n} from \"../hooks/react-query-hooks\";\nimport { StagedImage, useMessageImages } from \"../hooks/use-message-images\";\nimport { useTamboMcpServers } from \"../mcp/tambo-mcp-provider\";\nimport { ThreadInputError } from \"../model/thread-input-error\";\nimport { validateInput } from \"../model/validate-input\";\nimport { buildMessageContent } from \"../util/message-builder\";\nimport {\n  extractResourceUris,\n  resolveResourceContents,\n} from \"../util/resource-content-resolver\";\nimport { useTamboInteractable } from \"./tambo-interactable-provider\";\nimport { useTamboRegistry } from \"./tambo-registry-provider\";\nimport { useTamboThread } from \"./tambo-thread-provider\";\n\n/**\n * Error messages for various input-related error scenarios\n * These messages are used to provide user-friendly error feedback\n * @readonly\n */\nexport const INPUT_ERROR_MESSAGES = {\n  EMPTY: \"Message cannot be empty\",\n  NETWORK: \"Network error. Please check your connection\",\n  SERVER: \"Server error. Please try again\",\n  VALIDATION: \"Invalid message format\",\n} as const;\n\nexport interface TamboThreadInputContextProps extends Omit<\n  UseTamboMutationResult<\n    void,\n    Error,\n    | {\n        contextKey?: string;\n        streamResponse?: boolean;\n        forceToolChoice?: string;\n        additionalContext?: Record<string, any>;\n      }\n    | undefined\n  >,\n  \"mutate\" | \"mutateAsync\"\n> {\n  /** Current value of the input field */\n  value: string;\n  /**\n   * Function to update the input value\n   * @param value - New value for the input field\n   */\n  setValue: (value: React.SetStateAction<string>) => void;\n  /**\n   * Function to submit the current input value\n   * @param options - Submission options\n   */\n  submit: (options?: {\n    streamResponse?: boolean;\n    forceToolChoice?: string;\n    additionalContext?: Record<string, any>;\n    resourceNames?: Record<string, string>;\n  }) => Promise<void>;\n  /** Currently staged images */\n  images: StagedImage[];\n  /** Add a single image */\n  addImage: (file: File) => Promise<void>;\n  /** Add multiple images */\n  addImages: (files: File[]) => Promise<void>;\n  /** Remove an image by id */\n  removeImage: (id: string) => void;\n  /** Clear all staged images */\n  clearImages: () => void;\n}\n\nexport const TamboThreadInputContext = createContext<\n  TamboThreadInputContextProps | undefined\n>(undefined);\n\n/**\n * Provider that manages shared thread input state across all components\n * This ensures that useTamboThreadInput, useTamboSuggestions, and components\n * all share the same input state\n * @param props - The props for the TamboThreadInputProvider\n * @param props.children - The children to render.\n * @returns The thread input context\n */\nexport const TamboThreadInputProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const { thread, sendThreadMessage, contextKey } = useTamboThread();\n  const [inputValue, setInputValue] = useState(\"\");\n  const imageState = useMessageImages();\n  const mcpServers = useTamboMcpServers();\n  const { resourceSource } = useTamboRegistry();\n  const { clearInteractableSelections } = useTamboInteractable();\n  const submit = useCallback(\n    async ({\n      streamResponse,\n      forceToolChoice,\n      additionalContext,\n      resourceNames = {},\n    }: {\n      streamResponse?: boolean;\n      forceToolChoice?: string;\n      additionalContext?: Record<string, any>;\n      resourceNames?: Record<string, string>;\n    } = {}) => {\n      // Validate text input if present\n      if (inputValue?.trim()) {\n        const validation = validateInput(inputValue);\n        if (!validation.isValid) {\n          throw new ThreadInputError(\n            `Cannot submit message: ${validation.error ?? INPUT_ERROR_MESSAGES.VALIDATION}`,\n            { cause: validation.error },\n          );\n        }\n      }\n\n      // Check if we have content to send\n      if (!inputValue.trim() && imageState.images.length === 0) {\n        throw new ThreadInputError(INPUT_ERROR_MESSAGES.EMPTY, {\n          cause: \"No text or images to send\",\n        });\n      }\n\n      // Extract resource URIs from the input text and resolve content for client-side resources\n      // (registry and client-side MCP servers). Internal Tambo server resources are skipped\n      // since the backend can resolve them.\n      const resourceUris = extractResourceUris(inputValue);\n      const resolvedContent = await resolveResourceContents(\n        resourceUris,\n        mcpServers,\n        resourceSource ?? undefined,\n      );\n\n      // Build message content with text, images, resource names, and resolved content\n      const messageContent = buildMessageContent(\n        inputValue,\n        imageState.images,\n        resourceNames,\n        resolvedContent,\n      );\n\n      try {\n        await sendThreadMessage(inputValue || \"Image message\", {\n          threadId: thread.id,\n          contextKey,\n          streamResponse: streamResponse,\n          forceToolChoice: forceToolChoice,\n          additionalContext: additionalContext,\n          content: messageContent,\n        });\n        clearInteractableSelections();\n      } catch (error: unknown) {\n        // Handle image-related errors with friendly messages\n        if (imageState.images.length > 0) {\n          const errorMessage =\n            error instanceof Error ? error.message.toLowerCase() : \"\";\n\n          // Backend not yet supporting image content type\n          if (errorMessage.includes(\"unknown content part type: image\")) {\n            throw new ThreadInputError(\n              \"Image attachments are not yet supported by the backend. This feature is coming soon.\",\n              { cause: error },\n            );\n          }\n\n          // Handle specific model vision support errors\n          // OpenAI errors\n          if (\n            errorMessage.includes(\n              \"does not support image message content types\",\n            ) ||\n            (errorMessage.includes(\"invalid model\") &&\n              errorMessage.includes(\n                \"image_url is only supported by certain models\",\n              ))\n          ) {\n            throw new ThreadInputError(\n              \"This model doesn't support images. Please use GPT-4o, GPT-4 Turbo, or other vision-capable models.\",\n              { cause: error },\n            );\n          }\n\n          // Anthropic Claude errors\n          if (\n            errorMessage.includes(\"does not support image\") ||\n            errorMessage.includes(\"vision not supported\")\n          ) {\n            throw new ThreadInputError(\n              \"This Claude model doesn't support images. Please use Claude 3.5 Sonnet, Claude 3 Opus, or other vision-capable models.\",\n              { cause: error },\n            );\n          }\n\n          // Generic image/vision errors\n          if (\n            errorMessage.includes(\"image\") ||\n            errorMessage.includes(\"vision\")\n          ) {\n            throw new ThreadInputError(\n              \"This model doesn't support image attachments. Please use a vision-capable model.\",\n              { cause: error },\n            );\n          }\n        }\n\n        throw error;\n      }\n\n      // Clear text after successful submission\n      setInputValue(\"\");\n    },\n    [\n      inputValue,\n      sendThreadMessage,\n      thread.id,\n      contextKey,\n      imageState,\n      mcpServers,\n      resourceSource,\n      clearInteractableSelections,\n    ],\n  );\n\n  const {\n    mutateAsync: submitAsync,\n    mutate: _unusedSubmit,\n    ...mutationState\n  } = useTamboMutation({\n    mutationFn: submit,\n  });\n\n  const value = {\n    ...mutationState,\n    value: inputValue,\n    setValue: setInputValue,\n    submit: submitAsync,\n    images: imageState.images,\n    addImage: imageState.addImage,\n    addImages: imageState.addImages,\n    removeImage: imageState.removeImage,\n    clearImages: imageState.clearImages,\n  };\n\n  return (\n    <TamboThreadInputContext.Provider value={value}>\n      {children}\n    </TamboThreadInputContext.Provider>\n  );\n};\n\n/**\n * Hook to access the shared thread input state\n * contextKey parameter is not passed here anymore. Instead, use the contextKey prop in the TamboProvider.\n * @returns The thread input context\n */\nexport const useTamboThreadInput = () => {\n  const context = useContext(TamboThreadInputContext);\n  if (!context) {\n    throw new Error(\n      \"useTamboThreadInput must be used within a TamboThreadInputProvider\",\n    );\n  }\n\n  return context;\n};\n", "// tamboHooks.ts\nimport {\n  QueriesOptions,\n  QueriesResults,\n  QueryKey,\n  useMutation,\n  UseMutationOptions,\n  UseMutationResult,\n  useQueries,\n  useQuery,\n  UseQueryOptions,\n  UseQueryResult,\n} from \"@tanstack/react-query\";\nimport { useTamboQueryClient } from \"../providers/tambo-client-provider\";\n\n/**\n * Wrapper around useQuery that uses the internal tambo query client.\n *\n * Use this instead of useQuery from `@tanstack/react-query`\n * @param options - The options for the query, same as useQuery from `@tanstack/react-query`\n * @returns The query result\n */\nexport function useTamboQuery<\n  TQueryFnData = unknown,\n  TError = Error,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey,\n>(options: UseQueryOptions<TQueryFnData, TError, TData, TQueryKey>) {\n  const queryClient = useTamboQueryClient();\n  return useQuery(options, queryClient);\n}\n\n/**\n * Wrapper around useMutation that uses the internal tambo query client.\n *\n * Use this instead of useMutation from `@tanstack/react-query`\n * @param options - The options for the mutation, same as useMutation from `@tanstack/react-query`\n * @returns The mutation result\n */\nexport function useTamboMutation<\n  TData = unknown,\n  TError = Error,\n  TVariables = void,\n  TContext = unknown,\n>(options: UseMutationOptions<TData, TError, TVariables, TContext>) {\n  const queryClient = useTamboQueryClient();\n  return useMutation(options, queryClient);\n}\n\n/**\n * Type alias for the result of a mutation.\n */\nexport type UseTamboMutationResult<\n  TData = unknown,\n  TError = Error,\n  TVariables = void,\n  TContext = unknown,\n> = UseMutationResult<TData, TError, TVariables, TContext>;\n\n/**\n * Type alias for the result of a query.\n */\nexport type UseTamboQueryResult<\n  TData = unknown,\n  TError = Error,\n> = UseQueryResult<TData, TError>;\n\n/**\n * Wrapper around useQueries that uses the internal tambo query client.\n * @param options - The options for the queries, same as useQueries from `@tanstack/react-query`\n * @param options.queries - The queries to run, same as queries from useQueries from `@tanstack/react-query`\n * @param options.combine - The function to combine the results of the queries, same as combine from useQueries from `@tanstack/react-query`\n * @param options.subscribed - Whether to subscribe to the queries, same as subscribed from useQueries from `@tanstack/react-query`\n * @returns The queries result\n */\nexport function useTamboQueries<\n  T extends any[],\n  TCombinedResult = QueriesResults<T>,\n>({\n  queries,\n  ...options\n}: {\n  queries: readonly [...QueriesOptions<T>];\n  combine?: (result: QueriesResults<T>) => TCombinedResult;\n  subscribed?: boolean;\n}) {\n  const queryClient = useTamboQueryClient();\n  return useQueries({ ...options, queries }, queryClient);\n}\n", "import { TamboAIError } from \"@tambo-ai/typescript-sdk\";\n\nexport class ThreadInputError extends TamboAIError {}\n", "import type { ReadResourceResult } from \"@modelcontextprotocol/sdk/types.js\";\nimport type TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { StagedImage } from \"../hooks/use-message-images\";\n\n/**\n * Regular expression to match MCP resource references in the format: \\@serverKey:uri\n *\n * Examples:\n * - \\@tambo-1hfs429:tambo:test://static/resource/1\n * - \\@linear:file://path/to/file\n *\n * Pattern breakdown:\n * - \\@              - Literal \\@ symbol\n * - ([a-zA-Z0-9-]+) - Server key (alphanumeric + hyphens, client-side routing key)\n * - :               - Literal colon separator\n * - (\\S+)           - URI (non-whitespace characters, actual resource URI)\n */\nconst RESOURCE_REFERENCE_PATTERN = /@([a-zA-Z0-9-]+):(\\S+)/g;\n\n/**\n * Parses text with resource references and returns interleaved content parts.\n * Resource references have the format: \\@serverKey:uri\n *\n * The serverKey prefix is stripped before sending to the backend because:\n * - It's a client-side routing key (e.g., \"tambo-1hfs429\") used by React SDK to route to the correct MCP connection\n * - The backend only needs the actual resource URI (e.g., \"tambo:test://static/resource/1\")\n * - The backend routes resources based on the thread's MCP server configuration, not client-side keys\n * @param text - Text potentially containing resource references\n * @param resourceNames - Map of full resource IDs (serverKey:uri) to their display names\n * @param resourceContent - Optional map of prefixed URIs to resolved content (for client-side resources)\n * @returns Array of content parts in order (text and resource parts interleaved)\n */\nfunction parseResourceReferences(\n  text: string,\n  resourceNames: Record<string, string>,\n  resourceContent?: Map<string, ReadResourceResult>,\n): TamboAI.Beta.Threads.ChatCompletionContentPart[] {\n  const parts: TamboAI.Beta.Threads.ChatCompletionContentPart[] = [];\n\n  // Use matchAll to avoid global regex state issues\n  const matches = Array.from(text.matchAll(RESOURCE_REFERENCE_PATTERN));\n  let lastIndex = 0;\n\n  // Find all resource references and interleave with text\n  for (const match of matches) {\n    const [fullMatch, serverKey, uri] = match;\n    const fullId = `${serverKey}:${uri}`;\n\n    // Add text before this resource reference (preserve whitespace)\n    if (match.index !== undefined && match.index > lastIndex) {\n      const textBefore = text.slice(lastIndex, match.index);\n      if (textBefore.length > 0) {\n        parts.push({\n          type: \"text\",\n          text: textBefore,\n        });\n      }\n    }\n\n    const resource: TamboAI.Resource = { uri };\n    const name = resourceNames[fullId];\n    if (name) {\n      resource.name = name;\n    }\n\n    // Include resolved content for client-side resources (MCP and registry)\n    // Server-side resources won't be in the map - backend resolves them by URI\n    const resolvedContent = resourceContent?.get(fullId);\n    if (resolvedContent?.contents?.[0]) {\n      const content = resolvedContent.contents[0];\n      if (\"text\" in content && content.text) {\n        resource.text = content.text;\n      } else if (\"blob\" in content && content.blob) {\n        resource.blob = content.blob;\n      }\n      if (\"mimeType\" in content && content.mimeType) {\n        resource.mimeType = content.mimeType;\n      }\n    }\n\n    parts.push({ type: \"resource\", resource });\n\n    if (match.index !== undefined) {\n      lastIndex = match.index + fullMatch.length;\n    }\n  }\n\n  // Add remaining text after the last resource reference (preserve whitespace)\n  if (lastIndex < text.length) {\n    const textAfter = text.slice(lastIndex);\n    if (textAfter.length > 0) {\n      parts.push({\n        type: \"text\",\n        text: textAfter,\n      });\n    }\n  }\n\n  // If no resource references were found, return the whole text as a single text part\n  if (parts.length === 0 && text.trim()) {\n    parts.push({ type: \"text\", text });\n  }\n\n  return parts;\n}\n\n/**\n * Builds message content with text, MCP resource references, and images\n * @param text - The text content, may include \\@serverKey:uri resource references\n * @param images - Array of staged images\n * @param resourceNames - Map of resource IDs (serverKey:uri) to their display names\n * @param resourceContent - Optional map of prefixed URIs to resolved content (for client-side resources)\n * @returns Array of message content parts\n */\nexport function buildMessageContent(\n  text: string,\n  images: StagedImage[],\n  resourceNames: Record<string, string> = {},\n  resourceContent?: Map<string, ReadResourceResult>,\n): TamboAI.Beta.Threads.ChatCompletionContentPart[] {\n  const content: TamboAI.Beta.Threads.ChatCompletionContentPart[] = [];\n\n  const hasNonWhitespaceText = text.trim().length > 0;\n\n  if (hasNonWhitespaceText) {\n    // Parse resource references from the original text so that all\n    // user-visible whitespace (including leading/trailing spaces and\n    // internal spacing) is preserved in the resulting content parts.\n    const parts = parseResourceReferences(text, resourceNames, resourceContent);\n    content.push(...parts);\n  }\n\n  // Add images at the end\n  for (const image of images) {\n    content.push({\n      type: \"image_url\",\n      image_url: {\n        url: image.dataUrl,\n      },\n    });\n  }\n\n  if (content.length === 0) {\n    throw new Error(\"Message must contain text or images\");\n  }\n\n  return content;\n}\n", "import type { ReadResourceResult } from \"@modelcontextprotocol/sdk/types.js\";\nimport { REGISTRY_SERVER_KEY, ServerType } from \"../mcp/mcp-constants\";\nimport type { ConnectedMcpServer, McpServer } from \"../mcp/tambo-mcp-provider\";\nimport type { ResourceSource } from \"../model/resource-info\";\n\n/**\n * Type guard for narrowing McpServer to a connected server.\n * A connected server has a non-null client.\n */\nfunction isConnectedMcpServer(server: McpServer): server is ConnectedMcpServer {\n  return \"client\" in server && server.client != null;\n}\n\n/**\n * Resolves content for client-side resources (MCP and registry).\n * Server-side (internal Tambo) resources are skipped - the backend can resolve them.\n * @param resourceUris - Prefixed URIs (e.g., \"linear:file://foo\", \"registry:file://bar\", \"tambo-abc:test://resource\")\n * @param mcpServers - Active MCP servers including virtual registry server\n * @param resourceSource - Registry resource source (listResources/getResource)\n * @returns Map of prefixedUri -> ReadResourceResult for resolved resources.\n *          Resources that failed to fetch or are internal server resources won't be in the map.\n */\nexport async function resolveResourceContents(\n  resourceUris: string[],\n  mcpServers: McpServer[],\n  resourceSource: ResourceSource | undefined,\n): Promise<Map<string, ReadResourceResult>> {\n  const results = new Map<string, ReadResourceResult>();\n\n  const fetchPromises = resourceUris.map(async (prefixedUri) => {\n    // Parse serverKey and original URI\n    // Format: serverKey:originalUri (e.g., \"linear:file://foo\", \"registry:docs://readme\")\n    const colonIndex = prefixedUri.indexOf(\":\");\n    if (colonIndex === -1) return;\n\n    const serverKey = prefixedUri.slice(0, colonIndex);\n    const originalUri = prefixedUri.slice(colonIndex + 1);\n\n    try {\n      // Handle registry resources directly - no server lookup needed\n      // Registry resources are local to the browser and resolved via resourceSource\n      if (serverKey === REGISTRY_SERVER_KEY) {\n        if (!resourceSource) {\n          console.warn(\n            `No resource source available to resolve registry resource: ${prefixedUri}`,\n          );\n          return;\n        }\n        const registryContent = await resourceSource.getResource(originalUri);\n        if (registryContent) {\n          results.set(prefixedUri, registryContent);\n        }\n        return;\n      }\n\n      // For non-registry resources, find the server by serverKey\n      const server = mcpServers.find((s) => s.serverKey === serverKey);\n      if (!server) {\n        console.warn(`No server found for resource: ${prefixedUri}`);\n        return;\n      }\n\n      switch (server.serverType) {\n        case ServerType.TAMBO_INTERNAL:\n          // Skip internal server resources - backend can resolve these\n          return;\n\n        case ServerType.TAMBO_REGISTRY:\n          // Should not reach here since we handle registry above, but keep for safety\n          return;\n\n        case ServerType.BROWSER_SIDE: {\n          // Client-side MCP resource\n          if (!isConnectedMcpServer(server)) {\n            console.warn(\n              `MCP server not connected for resource: ${prefixedUri}`,\n            );\n            return;\n          }\n          const mcpContent = (await server.client.client.readResource({\n            uri: originalUri,\n          })) as ReadResourceResult | null;\n          if (mcpContent) {\n            results.set(prefixedUri, mcpContent);\n          }\n          return;\n        }\n      }\n    } catch (error) {\n      // Graceful fallback - log warning and continue without content\n      console.warn(\n        `Failed to fetch resource content for ${prefixedUri}:`,\n        error,\n      );\n    }\n  });\n\n  await Promise.all(fetchPromises);\n  return results;\n}\n\n/**\n * Extracts resource URIs from text using the `@serverKey:uri` pattern.\n * @param text - Text potentially containing resource references\n * @returns Array of prefixed resource URIs (e.g., [\"linear:file://foo\", \"registry:file://bar\"])\n */\nexport function extractResourceUris(text: string): string[] {\n  const pattern = /@([a-zA-Z0-9-]+):(\\S+)/g;\n  const matches = Array.from(text.matchAll(pattern));\n  return matches.map(([, serverKey, uri]) => `${serverKey}:${uri}`);\n}\n", "import { UseMutationResult, UseQueryResult } from \"@tanstack/react-query\";\n\nexport type CombinedMutationResult<\n  TData = unknown,\n  TError = unknown,\n  TVariables = unknown,\n  TContext = unknown,\n> = Omit<\n  UseMutationResult<TData, TError, TVariables, TContext>,\n  \"mutate\" | \"mutateAsync\" | \"reset\" | \"data\" | \"variables\" | \"context\"\n>;\n\n/**\n * Combines two mutation results, showing the \"loading state\" of the two\n * mutations. For instance, if either mutation is pending, the combined\n * mutation result will be pending.\n * @param resultA - The first mutation result\n * @param resultB - The second mutation result\n * @returns The combined mutation result\n */\nexport function combineMutationResults<TData1, TData2, TError1, TError2>(\n  resultA: UseMutationResult<TData1, TError1, any, any>,\n  resultB: UseMutationResult<TData2, TError2, any, any>,\n): CombinedMutationResult<TData1 | TData2, TError1 | TError2> {\n  let status: \"pending\" | \"error\" | \"success\" | \"idle\";\n  if (resultA.isPending || resultB.isPending) {\n    status = \"pending\";\n  } else if (resultA.isError || resultB.isError) {\n    status = \"error\";\n  } else if (resultA.isSuccess && resultB.isSuccess) {\n    status = \"success\";\n  } else {\n    status = \"idle\";\n  }\n\n  return {\n    isPending: resultA.isPending || resultB.isPending,\n    isSuccess: resultA.isSuccess && resultB.isSuccess,\n    isError: resultA.isError || resultB.isError,\n    isIdle: resultA.isIdle && resultB.isIdle,\n    isPaused: resultA.isPaused || resultB.isPaused,\n    submittedAt: resultA.submittedAt || resultB.submittedAt,\n    status,\n    error: resultA.error ?? resultB.error,\n    failureCount: resultA.failureCount + resultB.failureCount,\n    failureReason: resultA.failureReason ?? resultB.failureReason,\n  };\n}\n\nexport type CombinedQueryResult<TData1, TData2, TError1, TError2> = Omit<\n  UseQueryResult<TData1 | TData2, TError1 | TError2>,\n  \"data\" | \"refetch\" | \"promise\"\n>;\n/**\n * Combines two query results, showing the \"loading state\" of the two queries.\n * For instance, if either query is loading, the combined query result will be\n * loading.\n * @param resultA - The first query result\n * @param resultB - The second query result\n * @returns The combined query result\n */\nexport function combineQueryResults<TData1, TData2, TError1, TError2>(\n  resultA: UseQueryResult<TData1, TError1>,\n  resultB: UseQueryResult<TData2, TError2>,\n): CombinedQueryResult<void, void, TError1, TError2> {\n  let status: \"pending\" | \"error\" | \"success\";\n  if (resultA.isPending || resultB.isPending) {\n    status = \"pending\";\n  } else if (resultA.isError || resultB.isError) {\n    status = \"error\";\n  } else if (resultA.isSuccess && resultB.isSuccess) {\n    status = \"success\";\n  } else {\n    status = \"pending\";\n  }\n\n  let fetchStatus: \"fetching\" | \"paused\" | \"idle\";\n  if (resultA.isFetching || resultB.isFetching) {\n    fetchStatus = \"fetching\";\n  } else if (resultA.isPaused || resultB.isPaused) {\n    fetchStatus = \"paused\";\n  } else {\n    fetchStatus = \"idle\";\n  }\n\n  return {\n    isPending: resultA.isPending || resultB.isPending,\n    isSuccess: resultA.isSuccess && resultB.isSuccess,\n    isError: resultA.isError || resultB.isError,\n    isEnabled: resultA.isEnabled && resultB.isEnabled,\n    isLoading: resultA.isLoading || resultB.isLoading,\n    isFetched: resultA.isFetched && resultB.isFetched,\n    isFetchedAfterMount:\n      resultA.isFetchedAfterMount && resultB.isFetchedAfterMount,\n    isInitialLoading: resultA.isInitialLoading || resultB.isInitialLoading,\n    isPaused: resultA.isPaused || resultB.isPaused,\n    isLoadingError: resultA.isLoadingError || resultB.isLoadingError,\n    isRefetchError: resultA.isRefetchError || resultB.isRefetchError,\n    isPlaceholderData: resultA.isPlaceholderData || resultB.isPlaceholderData,\n    isStale: resultA.isStale || resultB.isStale,\n    isRefetching: resultA.isRefetching || resultB.isRefetching,\n    isFetching: resultA.isFetching || resultB.isFetching,\n    status,\n    error: resultA.error ?? resultB.error,\n    failureCount: resultA.failureCount + resultB.failureCount,\n    failureReason: resultA.failureReason ?? resultB.failureReason,\n    errorUpdateCount: resultA.errorUpdateCount + resultB.errorUpdateCount,\n    fetchStatus,\n    dataUpdatedAt: Math.max(resultA.dataUpdatedAt, resultB.dataUpdatedAt),\n    errorUpdatedAt: Math.max(resultA.errorUpdatedAt, resultB.errorUpdatedAt),\n  };\n}\n", "\"use client\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { GenerationStage } from \"../model/generate-component-response\";\nimport { useTamboGenerationStage } from \"../providers/tambo-thread-provider\";\nimport { useTamboCurrentMessage } from \"./use-current-message\";\n\n/**\n * Global stream status flags for a specific component in a message.\n * Represents the aggregate state across all props for this component only.\n * Once a component completes, its status remains stable regardless of other generations.\n */\nexport interface StreamStatus {\n  /**\n   * Indicates no tokens have been received for any prop and generation is not active.\n   * Useful for showing initial loading states before any data arrives.\n   */\n  isPending: boolean;\n\n  /**\n   * Indicates active streaming - either generation is streaming OR at least one prop is still streaming.\n   * Use this to show loading animations or skeleton states during data transmission.\n   */\n  isStreaming: boolean;\n\n  /**\n   * Indicates successful completion - generation is complete AND every prop finished without error.\n   * Safe to render the final component when this is true.\n   */\n  isSuccess: boolean;\n\n  /**\n   * Indicates a fatal error occurred in any prop or the stream itself.\n   * Check streamError for details about what went wrong.\n   */\n  isError: boolean;\n\n  /**\n   * The first fatal error encountered during streaming (if any).\n   * Will be undefined if no errors occurred.\n   */\n  streamError?: Error;\n}\n\n/**\n * Streaming status flags for individual component props.\n * Tracks the state of each prop as it streams from the LLM.\n */\nexport interface PropStatus {\n  /**\n   * Indicates no tokens have been received for this specific prop yet.\n   * The prop value is still undefined, null, or empty string.\n   */\n  isPending: boolean;\n\n  /**\n   * Indicates at least one token has been received but streaming is not complete.\n   * The prop has partial content that may still be updating.\n   */\n  isStreaming: boolean;\n\n  /**\n   * Indicates this prop has finished streaming successfully.\n   * The prop value is complete and stable.\n   */\n  isSuccess: boolean;\n\n  /**\n   * The error that occurred during streaming (if any).\n   * Will be undefined if no error occurred for this prop.\n   */\n  error?: Error;\n}\n\n/**\n * SSR Guard - throws during server-side rendering.\n * Ensures the hook is only used in browser contexts.\n * @throws {Error} When called during server-side rendering\n */\nfunction assertClientSide() {\n  if (typeof window === \"undefined\") {\n    throw new Error(\n      \"useTamboStreamStatus can only be used in browser contexts. \" +\n        \"This hook is not compatible with SSR/SSG. \" +\n        \"Consider wrapping it in useEffect or using dynamic imports.\",\n    );\n  }\n}\n\n/**\n * Track streaming status for individual props by monitoring their values.\n * Monitors when props receive their first token and when they complete streaming.\n * Maintains stable state per message - once props complete for a message, they stay complete.\n * @template Props - The type of the component props being tracked\n * @param props - The current component props object\n * @param generationStage - The current generation stage from the LLM\n * @param messageId - The ID of the current message to track component-specific state\n * @returns A record mapping each prop key to its PropStatus\n */\nfunction usePropsStreamingStatus<Props extends Record<string, any>>(\n  props: Props | undefined,\n  generationStage: GenerationStage,\n  messageId: string,\n): Record<keyof Props, PropStatus> {\n  const [propTracking, setPropTracking] = useState<\n    Record<\n      string,\n      {\n        hasStarted: boolean;\n        isComplete: boolean;\n        error?: Error;\n        messageId: string;\n      }\n    >\n  >({});\n\n  /** Reset tracking only when the message changes */\n  useEffect(() => {\n    setPropTracking((prev) => {\n      // If we have tracking data for a different message, reset\n      const hasOldMessageData = Object.values(prev).some(\n        (track) => track.messageId && track.messageId !== messageId,\n      );\n      return hasOldMessageData ? {} : prev;\n    });\n  }, [messageId]);\n\n  /** Track when props start streaming (receive first token) and when they complete */\n  useEffect(() => {\n    if (!props) return;\n\n    setPropTracking((prev) => {\n      const updated = { ...prev };\n      let hasChanges = false;\n\n      // First pass: identify which props are starting now\n      const propsStartingNow: string[] = [];\n      Object.entries(props).forEach(([key, value]) => {\n        const current = prev[key] || {\n          hasStarted: false,\n          isComplete: false,\n        };\n\n        /** A prop starts streaming when it has a non-empty value for the first time */\n        const hasContent =\n          value !== undefined && value !== null && value !== \"\";\n        const justStarted = hasContent && !current.hasStarted;\n\n        if (justStarted) {\n          propsStartingNow.push(key);\n        }\n      });\n\n      // Second pass: update tracking and mark previous props as complete\n      Object.entries(props).forEach(([key, value]) => {\n        const current = prev[key] || {\n          hasStarted: false,\n          isComplete: false,\n        };\n\n        /** A prop starts streaming when it has a non-empty value for the first time */\n        const hasContent =\n          value !== undefined && value !== null && value !== \"\";\n        const justStarted = hasContent && !current.hasStarted;\n\n        /**\n         * A prop is complete when it has started and either:\n         * 1. A following prop has started, OR\n         * 2. Generation is complete (for the final prop)\n         */\n        const hasFollowingPropStarted = propsStartingNow.some(\n          (startingKey) => startingKey !== key,\n        );\n        const isGenerationComplete =\n          generationStage === GenerationStage.COMPLETE;\n        const isComplete =\n          current.hasStarted &&\n          (hasFollowingPropStarted || isGenerationComplete) &&\n          !current.isComplete;\n\n        // Once a prop is complete for this message, it stays complete\n        if (current.isComplete && current.messageId === messageId) {\n          // Skip - already complete for this message\n          return;\n        }\n\n        if (justStarted || isComplete) {\n          updated[key] = {\n            ...current,\n            hasStarted: justStarted ? true : current.hasStarted,\n            isComplete: isComplete ? true : current.isComplete,\n            messageId,\n          };\n          hasChanges = true;\n        }\n      });\n\n      return hasChanges ? updated : prev;\n    });\n  }, [props, generationStage, messageId]);\n\n  /** Convert tracking state to PropStatus objects */\n  return useMemo(() => {\n    if (!props) return {} as Record<keyof Props, PropStatus>;\n\n    const result = {} as Record<keyof Props, PropStatus>;\n\n    Object.keys(props).forEach((key) => {\n      const tracking = propTracking[key] || {\n        hasStarted: false,\n        isComplete: false,\n        messageId: \"\",\n      };\n\n      // If this prop is complete for this message, it stays complete\n      const isCompleteForThisMessage =\n        tracking.isComplete && tracking.messageId === messageId;\n\n      // Only consider generation stage if this prop isn't already complete for this message\n      const isGenerationStreaming =\n        !isCompleteForThisMessage &&\n        generationStage === GenerationStage.STREAMING_RESPONSE;\n\n      result[key as keyof Props] = {\n        isPending: !tracking.hasStarted && !isCompleteForThisMessage,\n        isStreaming:\n          tracking.hasStarted &&\n          !isCompleteForThisMessage &&\n          isGenerationStreaming,\n        isSuccess: isCompleteForThisMessage,\n        error: tracking.error,\n      };\n    });\n\n    return result;\n  }, [props, propTracking, generationStage, messageId]);\n}\n\n/**\n * Derives global StreamStatus from generation stage and individual prop statuses.\n * Aggregates individual prop states into a unified stream status.\n * @template Props - The type of the component props\n * @param generationStage - The current generation stage from the LLM\n * @param propStatus - Status record for each individual prop\n * @param hasComponent - Whether a component exists in the current message\n * @param generationError - Any error from the generation process itself\n * @returns The aggregated StreamStatus for the entire component\n */\nfunction deriveGlobalStreamStatus<Props extends Record<string, any>>(\n  generationStage: GenerationStage,\n  propStatus: Record<keyof Props, PropStatus>,\n  hasComponent: boolean,\n  generationError?: Error,\n): StreamStatus {\n  const propStatuses = Object.values(propStatus);\n\n  // If all props are already successful, the component is complete regardless of generation stage\n  const allPropsSuccessful =\n    propStatuses.length > 0 && propStatuses.every((p) => p.isSuccess);\n\n  // Only consider generation stage if not all props are complete\n  const isGenerationStreaming =\n    !allPropsSuccessful &&\n    generationStage === GenerationStage.STREAMING_RESPONSE;\n  const isGenerationError = generationStage === GenerationStage.ERROR;\n\n  /** Find first error from generation or any prop */\n  const firstError =\n    generationError ?? propStatuses.find((p) => p.error)?.error;\n\n  return {\n    /** isPending: no component yet OR (has component but no props have started) */\n    isPending:\n      !hasComponent ||\n      (!isGenerationStreaming &&\n        !allPropsSuccessful &&\n        propStatuses.every((p) => p.isPending)),\n\n    /** isStreaming: any prop is streaming (generation stage doesn't matter if props are complete) */\n    isStreaming: propStatuses.some((p) => p.isStreaming),\n\n    /** isSuccess: all props successful (component is stable once all props complete) */\n    isSuccess: allPropsSuccessful,\n\n    /** isError: generation error OR any prop error */\n    isError:\n      isGenerationError ||\n      propStatuses.some((p) => p.error) ||\n      !!generationError,\n\n    streamError: firstError,\n  };\n}\n\n/**\n * Track streaming status for Tambo component props.\n *\n * **Important**: Props update repeatedly during streaming and may be partial.\n * Use `propStatus.<field>?.isSuccess` before treating a prop as complete.\n *\n * Pair with `useTamboComponentState` to disable inputs while streaming.\n * @see {@link https://docs.tambo.co/concepts/streaming/streaming-best-practices}\n * @template Props - Component props type\n * @returns `streamStatus` (overall) and `propStatus` (per-prop) flags\n * @throws {Error} When used during SSR/SSG\n * @example\n * ```tsx\n * // Wait for entire stream\n * const { streamStatus } = useTamboStreamStatus();\n * if (!streamStatus.isSuccess) return <Spinner />;\n * return <Card {...props} />;\n * ```\n * @example\n * ```tsx\n * // Highlight in-flight props\n * const { propStatus } = useTamboStreamStatus<Props>();\n * <h2 className={propStatus.title.isStreaming ? \"animate-pulse\" : \"\"}>\n *   {title}\n * </h2>\n * ```\n */\nexport function useTamboStreamStatus<\n  Props extends Record<string, any> = Record<string, any>,\n>(): {\n  streamStatus: StreamStatus;\n  propStatus: Record<keyof Props, PropStatus>;\n} {\n  /** SSR Guard - ensure client-side only execution */\n  assertClientSide();\n\n  const { generationStage } = useTamboGenerationStage();\n  const message = useTamboCurrentMessage();\n\n  /** Get the current component props from the message */\n  const componentProps = (message?.component?.props as Props) || ({} as Props);\n\n  /** Track per-prop streaming status */\n  const propStatus = usePropsStreamingStatus(\n    componentProps,\n    generationStage,\n    message?.id ?? \"\",\n  );\n\n  /** Derive global stream status from prop statuses and generation stage */\n  const streamStatus = useMemo(() => {\n    const generationError = message?.error\n      ? new Error(message.error)\n      : undefined;\n    const hasComponent = !!message?.component;\n    return deriveGlobalStreamStatus(\n      generationStage,\n      propStatus,\n      hasComponent,\n      generationError,\n    );\n  }, [generationStage, propStatus, message]);\n\n  return {\n    streamStatus,\n    propStatus,\n  };\n}\n", "import { useCallback, useEffect, useState } from \"react\";\nimport { useReactMediaRecorder } from \"react-media-recorder\";\nimport { useTamboClient } from \"../providers/tambo-client-provider\";\nimport { useTamboMutation } from \"./react-query-hooks\";\n\n/**\n * Exposes functionality to record speech and transcribe it using the Tambo API.\n * @returns An object with:\n * - startRecording: A function to start recording audio and reset the current transcript.\n * - stopRecording: A function to stop recording audio and automatically kick off transcription.\n * - isRecording: A boolean indicating if the user is recording audio.\n * - isTranscribing: A boolean indicating if the audio is being transcribed.\n * - transcript: The transcript of the recorded audio.\n * - transcriptionError: An error message if the transcription fails.\n * - mediaAccessError: An error message if microphone access fails.\n */\nexport function useTamboVoice() {\n  const [transcript, setTranscript] = useState<string | null>(null);\n  const client = useTamboClient();\n  const {\n    status,\n    startRecording: startMediaRecording,\n    stopRecording: stopMediaRecording,\n    mediaBlobUrl,\n    error: mediaAccessError,\n  } = useReactMediaRecorder({\n    audio: true,\n    video: false,\n    blobPropertyBag: { type: \"audio/webm\" },\n  });\n\n  const isRecording = status === \"recording\";\n\n  const transcriptionMutation = useTamboMutation<\n    string,\n    Error,\n    string // blobUrl parameter\n  >({\n    mutationFn: async (blobUrl: string) => {\n      const response = await fetch(blobUrl);\n      const audioBlob = await response.blob();\n      const file = new File([audioBlob], \"recording.webm\", {\n        type: \"audio/webm\",\n      });\n\n      return await client.beta.audio.transcribe({ file });\n    },\n    onSuccess: (transcription: string) => {\n      setTranscript(transcription);\n    },\n  });\n\n  // Trigger transcription when recording stops and we have a blob URL\n  const shouldTranscribe =\n    status === \"stopped\" &&\n    mediaBlobUrl &&\n    !transcriptionMutation.isPending &&\n    !transcriptionMutation.isSuccess;\n\n  useEffect(() => {\n    if (shouldTranscribe) {\n      transcriptionMutation.mutate(mediaBlobUrl);\n    }\n  }, [shouldTranscribe, mediaBlobUrl, transcriptionMutation]);\n\n  const startRecording = useCallback(() => {\n    if (isRecording) return;\n\n    // Reset state when starting new recording\n    setTranscript(null);\n    transcriptionMutation.reset(); // Clear any previous mutation state\n    startMediaRecording();\n  }, [isRecording, startMediaRecording, transcriptionMutation]);\n\n  const stopRecording = useCallback(() => {\n    if (isRecording) {\n      stopMediaRecording();\n    }\n  }, [isRecording, stopMediaRecording]);\n\n  return {\n    startRecording,\n    stopRecording,\n    isRecording,\n    mediaAccessError: mediaAccessError === \"\" ? null : mediaAccessError,\n    isTranscribing: transcriptionMutation.isPending,\n    transcript,\n    transcriptionError: transcriptionMutation.error?.message ?? null,\n  };\n}\n", "import React from \"react\";\nimport { useTamboStream } from \"./provider\";\nimport { DEFAULT_STREAM_KEY, StreamStateComponentProps } from \"./types\";\n\n/**\n * Pending component that renders children when the stream has no data\n * @param props - The props for the Pending component\n * @param props.streamKey - The key to identify this pending state\n * @param props.children - The children to render when pending\n * @param props.className - Optional className for styling\n * @returns The Pending component\n */\nexport const Pending: React.FC<StreamStateComponentProps> = ({\n  streamKey = DEFAULT_STREAM_KEY,\n  children,\n  className,\n}) => {\n  const { getStatusForKey } = useTamboStream();\n  const status = getStatusForKey(streamKey);\n\n  // Show pending state when no active status (prop doesn't exist or is pending)\n  const hasActiveStatus =\n    status.isStreaming || status.isSuccess || status.isError;\n  const shouldShowPending = !hasActiveStatus;\n\n  if (!shouldShowPending) {\n    return null;\n  }\n\n  return (\n    <div\n      className={className}\n      data-stream-key={streamKey}\n      data-stream-state=\"pending\"\n    >\n      {children}\n    </div>\n  );\n};\n\nPending.displayName = \"TamboPropStreamProvider.Pending\";\n", "\"use client\";\n\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useCallback,\n  useContext,\n  useMemo,\n} from \"react\";\nimport { useTamboStreamStatus } from \"../../hooks/use-tambo-stream-status\";\nimport {\n  DEFAULT_STREAM_KEY,\n  StreamStatus,\n  TamboPropStreamContextValue,\n} from \"./types\";\n\nconst TamboPropStreamContext =\n  createContext<TamboPropStreamContextValue | null>(null);\n\n/**\n * Hook to use the TamboStream context\n * @returns The TamboStream context\n */\nexport const useTamboStream = (): TamboPropStreamContextValue => {\n  const context = useContext(TamboPropStreamContext);\n  if (!context) {\n    throw new Error(\n      \"useTamboStream must be used within a TamboPropStreamProvider\",\n    );\n  }\n  return context;\n};\n\n/**\n * The TamboStreamProvider provides a context for managing stream states\n * with compound components for Pending, Streaming, and Success states.\n * @param props - The props object\n * @param props.children - The children to wrap\n * @returns The TamboStreamProvider component\n */\nconst TamboPropStreamProviderComponent: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const { propStatus, streamStatus } = useTamboStreamStatus();\n\n  const keyStatusMap = useMemo(() => {\n    const map = new Map<string, StreamStatus>();\n\n    if (propStatus) {\n      Object.entries(propStatus).forEach(([key, status]) => {\n        map.set(key, {\n          isPending: status.isPending,\n          isStreaming: status.isStreaming,\n          isSuccess: status.isSuccess,\n          isError: !!status.error,\n          error: status.error,\n        });\n      });\n    }\n\n    // Always set default status for fallback\n    map.set(DEFAULT_STREAM_KEY, {\n      isPending: streamStatus.isPending,\n      isStreaming: streamStatus.isStreaming,\n      isSuccess: streamStatus.isSuccess,\n      isError: streamStatus.isError,\n      error: streamStatus.streamError,\n    });\n\n    return map;\n  }, [streamStatus, propStatus]);\n\n  const getStatusForKey = useCallback(\n    (key: string): StreamStatus => {\n      // If the key exists in propStatus, return its status\n      const propStatus = keyStatusMap.get(key);\n      if (propStatus) {\n        return propStatus;\n      }\n\n      // If key doesn't exist in propStatus, assume it's pending\n      return {\n        isPending: true,\n        isStreaming: false,\n        isSuccess: false,\n        isError: false,\n      };\n    },\n    [keyStatusMap],\n  );\n\n  const contextValue = useMemo(\n    (): TamboPropStreamContextValue => ({\n      streamStatus,\n      getStatusForKey,\n    }),\n    [streamStatus, getStatusForKey],\n  );\n\n  return (\n    <TamboPropStreamContext.Provider value={contextValue}>\n      {children}\n    </TamboPropStreamContext.Provider>\n  );\n};\n\nexport { TamboPropStreamProviderComponent };\n", "import React from \"react\";\nimport { StreamStatus as HookStreamStatus } from \"../../hooks/use-tambo-stream-status\";\n\n// Constants\nexport const DEFAULT_STREAM_KEY = \"default\";\n\nexport interface StreamStateComponentProps {\n  /** The key to identify this stream state */\n  streamKey?: string;\n  /** The children to render */\n  children: React.ReactNode;\n  /** Optional className for styling */\n  className?: string;\n}\n\nexport interface StreamStatus {\n  isPending: boolean;\n  isStreaming: boolean;\n  isSuccess: boolean;\n  isError: boolean;\n  error?: Error;\n}\n\nexport interface TamboPropStreamContextValue {\n  /** The stream status */\n  streamStatus: HookStreamStatus;\n  /** Get the status for a specific key */\n  getStatusForKey: (key: string) => StreamStatus;\n}\n", "import React from \"react\";\nimport { useTamboStream } from \"./provider\";\nimport { DEFAULT_STREAM_KEY, StreamStateComponentProps } from \"./types\";\n\n/**\n * Streaming component that renders children when the stream is in a streaming state\n * @param props - The props for the Streaming component\n * @param props.streamKey - The key to identify this streaming state\n * @param props.children - The children to render when streaming\n * @param props.className - Optional className for styling\n * @returns The Streaming component\n */\nexport const Streaming: React.FC<StreamStateComponentProps> = ({\n  streamKey = DEFAULT_STREAM_KEY,\n  children,\n  className,\n}) => {\n  const { getStatusForKey } = useTamboStream();\n  const status = getStatusForKey(streamKey);\n\n  if (!status.isPending && !status.isStreaming) {\n    return null;\n  }\n\n  return (\n    <div\n      className={className}\n      data-stream-key={streamKey}\n      data-stream-state=\"streaming\"\n    >\n      {children}\n    </div>\n  );\n};\n\nStreaming.displayName = \"TamboPropStreamProvider.Streaming\";\n", "import React from \"react\";\nimport { useTamboStream } from \"./provider\";\nimport { DEFAULT_STREAM_KEY, StreamStateComponentProps } from \"./types\";\n\n/**\n * Success component that renders children when the stream has data\n * @param props - The props for the Success component\n * @param props.streamKey - The key to identify this success state\n * @param props.children - The children to render when success\n * @param props.className - Optional className for styling\n * @returns The Success component\n */\nexport const Success: React.FC<StreamStateComponentProps> = ({\n  streamKey = DEFAULT_STREAM_KEY,\n  children,\n  className,\n}) => {\n  const { getStatusForKey } = useTamboStream();\n  const status = getStatusForKey(streamKey);\n\n  if (!status.isSuccess) {\n    return null;\n  }\n\n  return (\n    <div\n      className={className}\n      data-stream-key={streamKey}\n      data-stream-state=\"success\"\n    >\n      {children}\n    </div>\n  );\n};\n\nSuccess.displayName = \"TamboPropStreamProvider.Success\";\n", "import { Pending } from \"./pending\";\nimport { TamboPropStreamProviderComponent } from \"./provider\";\nimport { Streaming } from \"./streaming\";\nimport { Success } from \"./success\";\n\n/**\n * The TamboPropStreamProvider provides a context for managing stream states\n * with compound components for Pending, Streaming, and Success states.\n * @param children - The children to wrap\n * @returns The TamboPropStreamProvider component\n */\nexport const TamboPropStreamProvider = Object.assign(\n  TamboPropStreamProviderComponent,\n  {\n    Streaming,\n    Pending,\n    Success,\n  },\n);\n\n// Re-export components for individual use\nexport { Pending } from \"./pending\";\nexport { useTamboStream } from \"./provider\";\nexport { Streaming } from \"./streaming\";\nexport { Success } from \"./success\";\nexport * from \"./types\";\n", "\"use client\";\nimport TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { QueryClient } from \"@tanstack/react-query\";\nimport React, { PropsWithChildren, useEffect } from \"react\";\nimport {\n  TamboComponent,\n  TamboTool,\n  TamboToolRegistry,\n} from \"../model/component-metadata\";\nimport { GenerationStage } from \"../model/generate-component-response\";\nimport { TamboThread } from \"../model/tambo-thread\";\nimport { TamboClientContext } from \"./tambo-client-provider\";\nimport {\n  TamboComponentContextProps,\n  TamboComponentProvider,\n} from \"./tambo-component-provider\";\nimport { TamboContextAttachmentProvider } from \"./tambo-context-attachment-provider\";\nimport {\n  TamboContextHelpersProvider,\n  TamboContextHelpersProviderProps,\n} from \"./tambo-context-helpers-provider\";\nimport { TamboInteractableProvider } from \"./tambo-interactable-provider\";\nimport {\n  TamboCompositeProvider,\n  type TamboContextProps,\n} from \"./tambo-provider\";\nimport { TamboRegistryContext } from \"./tambo-registry-provider\";\nimport {\n  TamboGenerationStageProvider,\n  TamboThreadContext,\n  TamboThreadContextProps,\n} from \"./tambo-thread-provider\";\n\n/**\n * TamboStubProvider props - includes all the data that would normally be inferred\n */\nexport interface TamboStubProviderProps extends Partial<TamboContextProps> {\n  /** Required: The thread data to display */\n  thread: TamboThread;\n  /** Optional: Components registry - defaults to empty */\n  components?: TamboComponent[];\n  /** Optional: Tools registry - defaults to empty */\n  tools?: TamboTool[];\n  /** Optional: Threads data to populate thread list - overrides useTamboThreadList() */\n  threads?: Partial<TamboAI.Beta.Threads.ThreadsOffsetAndLimit>;\n  /** Optional: Project ID to use for query cache - defaults to thread.projectId */\n  projectId?: string;\n  /** Optional: Context key for thread list queries */\n  contextKey?: string;\n  /** Optional: Configuration for which context helpers are enabled/disabled */\n  contextHelpers?: TamboContextHelpersProviderProps[\"contextHelpers\"];\n}\n\n/**\n * Stub client provider that accepts a client and queryClient as props\n * @returns The TamboStubClientProvider component\n */\nconst TamboStubClientProvider: React.FC<\n  PropsWithChildren<{\n    client: TamboAI;\n    queryClient: QueryClient;\n    isUpdatingToken: boolean;\n    threads?: Partial<TamboAI.Beta.Threads.ThreadsOffsetAndLimit>;\n    projectId?: string;\n    contextKey?: string;\n  }>\n> = ({\n  children,\n  client,\n  queryClient,\n  threads,\n  projectId,\n  contextKey,\n  isUpdatingToken,\n}) => {\n  // Prepopulate the query cache with threads data if provided\n  useEffect(() => {\n    if (threads) {\n      // Set the project ID in the cache\n      queryClient.setQueryData([\"projectId\"], projectId);\n\n      // Set the threads data in the cache using the same query key pattern as useTamboThreadList\n      queryClient.setQueryData([\"threads\", projectId, contextKey], threads);\n    }\n  }, [threads, projectId, contextKey, queryClient]);\n\n  return (\n    <TamboClientContext.Provider\n      value={{\n        client,\n        queryClient,\n        isUpdatingToken,\n      }}\n    >\n      {children}\n    </TamboClientContext.Provider>\n  );\n};\n\n/**\n * Stub registry provider that accepts componentList, toolRegistry, and componentToolAssociations as props\n * @returns The TamboStubRegistryProvider component\n */\nconst TamboStubRegistryProvider: React.FC<\n  PropsWithChildren<\n    Pick<\n      TamboRegistryContext,\n      | \"componentList\"\n      | \"toolRegistry\"\n      | \"componentToolAssociations\"\n      | \"registerComponent\"\n      | \"registerTool\"\n      | \"registerTools\"\n      | \"addToolAssociation\"\n    >\n  >\n> = ({\n  children,\n  componentList,\n  toolRegistry,\n  componentToolAssociations,\n  registerComponent,\n  registerTool,\n  registerTools,\n  addToolAssociation,\n}) => {\n  return (\n    <TamboRegistryContext.Provider\n      value={{\n        componentList,\n        toolRegistry,\n        componentToolAssociations,\n        mcpServerInfos: [],\n        resources: [],\n        resourceSource: null,\n        registerComponent,\n        registerTool,\n        registerTools,\n        addToolAssociation,\n        registerMcpServer: () => {},\n        registerMcpServers: () => {},\n        registerResource: () => {},\n        registerResources: () => {},\n        registerResourceSource: () => {},\n      }}\n    >\n      {children}\n    </TamboRegistryContext.Provider>\n  );\n};\n\n/**\n * Stub thread provider that accepts all thread context props\n * @returns The TamboStubThreadProvider component\n */\nconst TamboStubThreadProvider: React.FC<\n  PropsWithChildren<TamboThreadContextProps>\n> = ({ children, ...threadContextProps }) => {\n  // Extract generation stage info from the thread\n  const generationStage =\n    (threadContextProps.thread?.generationStage as GenerationStage) ??\n    GenerationStage.IDLE;\n  const statusMessage = threadContextProps.thread?.statusMessage ?? \"\";\n\n  return (\n    <TamboThreadContext.Provider value={threadContextProps}>\n      <TamboGenerationStageProvider\n        generationStage={generationStage}\n        statusMessage={statusMessage}\n      >\n        {children}\n      </TamboGenerationStageProvider>\n    </TamboThreadContext.Provider>\n  );\n};\n\n/**\n * Default no-op functions that throw errors - used when callbacks are not provided\n * @returns The default callbacks\n */\nconst createDefaultCallbacks = () => ({\n  switchCurrentThread: () => {\n    throw new Error(\"switchCurrentThread not implemented in stub\");\n  },\n  startNewThread: () => {\n    throw new Error(\"startNewThread not implemented in stub\");\n  },\n  updateThreadName: () => {\n    throw new Error(\"updateThreadName not implemented in stub\");\n  },\n  generateThreadName: () => {\n    throw new Error(\"generateThreadName not implemented in stub\");\n  },\n  addThreadMessage: () => {\n    throw new Error(\"addThreadMessage not implemented in stub\");\n  },\n  updateThreadMessage: () => {\n    throw new Error(\"updateThreadMessage not implemented in stub\");\n  },\n  setInputValue: () => {\n    throw new Error(\"setInputValue not implemented in stub\");\n  },\n  sendThreadMessage: () => {\n    throw new Error(\"sendThreadMessage not implemented in stub\");\n  },\n  registerComponent: () => {\n    throw new Error(\"registerComponent not implemented in stub\");\n  },\n  registerTool: () => {\n    throw new Error(\"registerTool not implemented in stub\");\n  },\n  registerTools: () => {\n    throw new Error(\"registerTools not implemented in stub\");\n  },\n  addToolAssociation: () => {\n    throw new Error(\"addToolAssociation not implemented in stub\");\n  },\n  cancel: () => {\n    throw new Error(\"cancel not implemented in stub\");\n  },\n});\n\n/**\n * The TamboStubProvider provides a way to use the Tambo API with static/stub data.\n * This is useful for testing, samples, and static UI development.\n *\n * Unlike TamboProvider, all data must be provided as props rather than being inferred.\n * @example\n * ```tsx\n * import { TamboStubProvider } from '@tambo-ai/react-sdk';\n *\n * const exampleThread = {\n *   id: \"example-thread\",\n *   messages: [\n *     {\n *       id: \"msg-1\",\n *       role: \"user\",\n *       content: [{ type: \"text\", text: \"Hello!\" }],\n *       createdAt: new Date().toISOString(),\n *       threadId: \"example-thread\",\n *       componentState: {},\n *     },\n *     {\n *       id: \"msg-2\",\n *       role: \"assistant\",\n *       content: [{ type: \"text\", text: \"Hi there!\" }],\n *       createdAt: new Date().toISOString(),\n *       threadId: \"example-thread\",\n *       componentState: {},\n *     }\n *   ],\n *   createdAt: new Date().toISOString(),\n *   projectId: \"example-project\",\n *   updatedAt: new Date().toISOString(),\n *   metadata: {},\n * };\n *\n * const exampleThreadList = [exampleThread];\n *\n * function MyComponent() {\n *   return (\n *     <TamboStubProvider\n *       thread={exampleThread}\n *       components={[]}\n *       tools={[]}\n *       threads={exampleThreadList}\n *       projectId=\"example-project\"\n *     >\n *       <MessageThreadFull />\n *     </TamboStubProvider>\n *   );\n * }\n * ```\n * @param props - The props for the TamboStubProvider\n * @param props.children - The children to wrap\n * @param props.thread - The thread data to display\n * @param props.components - Optional components registry\n * @param props.tools - Optional tools registry\n * @param props.threads - Optional threads data to populate thread list (overrides useTamboThreadList)\n * @param props.projectId - Optional project ID for query cache (defaults to thread.projectId)\n * @param props.contextKey - Optional context key for thread list queries\n * @param props.contextHelpers - Optional configuration for which context helpers are enabled/disabled\n * @returns The TamboStubProvider component\n */\nexport const TamboStubProvider: React.FC<\n  PropsWithChildren<TamboStubProviderProps>\n> = ({\n  children,\n  thread,\n  components = [],\n  tools = [],\n  threads,\n  projectId,\n  contextKey,\n  contextHelpers,\n  ...overrides\n}) => {\n  const defaults = createDefaultCallbacks();\n\n  // Create stub client and queryClient\n  const stubClient = {} as TamboAI;\n  const stubQueryClient = new QueryClient();\n\n  // Use provided projectId or fall back to thread's projectId\n  const resolvedProjectId = projectId ?? thread.projectId;\n\n  // Build component registry from components prop\n  const componentList = components.reduce(\n    (acc, component) => {\n      acc[component.name] = {\n        component: component.component,\n        loadingComponent: component.loadingComponent,\n        name: component.name,\n        description: component.description,\n        props: component.propsDefinition ?? {},\n        contextTools: [],\n      };\n      return acc;\n    },\n    {} as Record<string, any>,\n  );\n\n  // Build tool registry from tools prop\n  const toolRegistry = tools.reduce((acc, tool) => {\n    acc[tool.name] = tool;\n    return acc;\n  }, {} as TamboToolRegistry);\n\n  // Build tool associations from components\n  const componentToolAssociations = components.reduce(\n    (acc, component) => {\n      if (component.associatedTools) {\n        acc[component.name] = component.associatedTools.map(\n          (tool) => tool.name,\n        );\n      }\n      return acc;\n    },\n    {} as Record<string, string[]>,\n  );\n\n  // Merge defaults with provided overrides\n  const threadContextProps: TamboThreadContextProps = {\n    thread,\n    currentThreadId: thread.id,\n    currentThread: thread,\n    threadMap: { [thread.id]: thread },\n    setThreadMap: () => {},\n    switchCurrentThread:\n      overrides.switchCurrentThread ?? defaults.switchCurrentThread,\n    startNewThread: overrides.startNewThread ?? defaults.startNewThread,\n    updateThreadName: overrides.updateThreadName ?? defaults.updateThreadName,\n    generateThreadName:\n      overrides.generateThreadName ?? defaults.generateThreadName,\n    addThreadMessage: overrides.addThreadMessage ?? defaults.addThreadMessage,\n    updateThreadMessage:\n      overrides.updateThreadMessage ?? defaults.updateThreadMessage,\n    streaming: overrides.streaming ?? true,\n    sendThreadMessage:\n      overrides.sendThreadMessage ?? defaults.sendThreadMessage,\n    cancel: overrides.cancel ?? defaults.cancel,\n    contextKey,\n  };\n\n  const componentContextProps: TamboComponentContextProps = {\n    registerComponent:\n      overrides.registerComponent ?? defaults.registerComponent,\n    registerTool: overrides.registerTool ?? defaults.registerTool,\n    registerTools: overrides.registerTools ?? defaults.registerTools,\n    addToolAssociation:\n      overrides.addToolAssociation ?? defaults.addToolAssociation,\n  };\n\n  return (\n    <TamboStubClientProvider\n      client={stubClient}\n      queryClient={stubQueryClient}\n      threads={threads}\n      projectId={resolvedProjectId}\n      contextKey={contextKey}\n      isUpdatingToken={false}\n    >\n      <TamboStubRegistryProvider\n        componentList={componentList}\n        toolRegistry={toolRegistry}\n        componentToolAssociations={componentToolAssociations}\n        registerComponent={componentContextProps.registerComponent}\n        registerTool={componentContextProps.registerTool}\n        registerTools={componentContextProps.registerTools}\n        addToolAssociation={componentContextProps.addToolAssociation}\n      >\n        <TamboStubThreadProvider {...threadContextProps}>\n          <TamboContextHelpersProvider contextHelpers={contextHelpers}>\n            <TamboContextAttachmentProvider>\n              <TamboComponentProvider>\n                <TamboInteractableProvider>\n                  <TamboCompositeProvider>{children}</TamboCompositeProvider>\n                </TamboInteractableProvider>\n              </TamboComponentProvider>\n            </TamboContextAttachmentProvider>\n          </TamboContextHelpersProvider>\n        </TamboStubThreadProvider>\n      </TamboStubRegistryProvider>\n    </TamboStubClientProvider>\n  );\n};\n", "\"use client\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { TamboMessageProvider } from \"../hooks/use-current-message\";\nimport { TamboThreadMessage } from \"../model/generate-component-response\";\nimport { useTamboInteractable } from \"../providers/tambo-interactable-provider\";\nimport { SupportedSchema } from \"../schema\";\n\nexport interface InteractableConfig<\n  Props = Record<string, unknown>,\n  State = Record<string, unknown>,\n> {\n  /**\n   * The name of the component, used for identification in Tambo.\n   */\n  componentName: string;\n  /**\n   * A brief description of the component's purpose and functionality. LLM will\n   * use this to understand how to interact with it.\n   */\n  description: string;\n  /**\n   * Optional schema for component props. If provided, prop updates will be\n   * validated against this schema.\n   */\n  propsSchema?: SupportedSchema<Props>;\n  /**\n   * Optional schema for component state. If provided, state updates will be\n   * validated against this schema.\n   */\n  stateSchema?: SupportedSchema<State>;\n}\n\n/**\n * Props injected by withTamboInteractable HOC. These can be passed to the wrapped\n * component to customize interactable behavior.\n */\nexport interface WithTamboInteractableProps {\n  /**\n   * Optional ID to use for this interactable component instance.\n   * If not provided, a unique ID will be generated automatically.\n   */\n  interactableId?: string;\n  /**\n   * Callback fired when the component has been registered as interactable.\n   * @param id - The assigned interactable component ID\n   */\n  onInteractableReady?: (id: string) => void;\n  /**\n   * Callback fired when the component's serializable props are updated by Tambo\n   * through a tool call. Note: Only serializable props are tracked.\n   * @param newProps - The updated serializable props\n   */\n  onPropsUpdate?: (newProps: Record<string, unknown>) => void;\n}\n\n/**\n * Higher-Order Component that makes any component interactable by tambo.\n * @param WrappedComponent - The component to make interactable\n * @param config - Configuration for the interactable component\n * @returns A new component that is automatically registered as interactable\n * @example\n * ```tsx\n * const MyNote: React.FC<{ title: string; content: string }> = ({ title, content }) => {\n *   const [isPinned, setIsPinned] = useTamboComponentState(\"isPinned\", false);\n *   return (\n *     <div style={{ border: isPinned ? \"2px solid gold\" : \"1px solid gray\", order: isPinned ? -1 : 0 }}>\n *       <h2>{title}</h2>\n *       <p>{content}</p>\n *     </div>\n *   );\n * };\n *\n * const MyInteractableNote = withTamboInteractable(MyNote, {\n *   componentName: \"MyNote\",\n *   description: \"A note component\",\n *   propsSchema: z.object({\n *     title: z.string(),\n *     content: z.string(),\n *   }),\n *  stateSchema: z.object({\n *    isPinned: z.boolean(),\n *  }),\n * });\n *\n * // Usage\n * <MyInteractableNote title=\"My Note\" content=\"This is my note\" />\n * ```\n */\nexport function withTamboInteractable<ComponentProps extends object>(\n  WrappedComponent: React.ComponentType<ComponentProps>,\n  config: InteractableConfig,\n) {\n  const displayName =\n    WrappedComponent.displayName ?? WrappedComponent.name ?? \"Component\";\n\n  const TamboInteractableWrapper: React.FC<\n    ComponentProps & WithTamboInteractableProps\n  > = (props) => {\n    const {\n      addInteractableComponent,\n      updateInteractableComponentProps,\n      getInteractableComponent,\n    } = useTamboInteractable();\n\n    const [interactableId, setInteractableId] = useState<string | null>(null);\n    const isInitialized = useRef(false);\n    const lastSerializedProps = useRef<Record<string, unknown>>({});\n\n    // Extract interactable-specific props from component props\n    const {\n      interactableId: _providedId, // Reserved for future use\n      onInteractableReady,\n      onPropsUpdate,\n      ...componentProps\n    } = props;\n\n    // Get the current interactable component to track prop updates\n    const currentInteractable = interactableId\n      ? getInteractableComponent(interactableId)\n      : null;\n\n    // Use the props from the interactable component if available, otherwise use the passed props\n    // We need to be careful not to create a loop, so we only use stored props if they're different from passed props\n    const effectiveProps = currentInteractable?.props ?? componentProps;\n\n    // Memoize the registration function\n    const registerComponent = useCallback(() => {\n      if (!isInitialized.current) {\n        const id = addInteractableComponent({\n          name: config.componentName,\n          description: config.description,\n          component: WrappedComponent,\n          props: componentProps,\n          propsSchema: config.propsSchema,\n          stateSchema: config.stateSchema,\n        });\n\n        setInteractableId(id);\n        onInteractableReady?.(id);\n        isInitialized.current = true;\n      }\n    }, [addInteractableComponent, componentProps, onInteractableReady]);\n\n    // Register the component as interactable on mount (only once)\n    useEffect(() => {\n      registerComponent();\n    }, [registerComponent]);\n\n    // Update the interactable component when props change from parent\n    useEffect(() => {\n      if (interactableId && isInitialized.current) {\n        // Only update if the props are different from what we last sent\n        const lastPropsString = JSON.stringify(lastSerializedProps.current);\n        const currentPropsString = JSON.stringify(componentProps);\n\n        if (lastPropsString !== currentPropsString) {\n          updateInteractableComponentProps(interactableId, componentProps);\n          onPropsUpdate?.(componentProps);\n          lastSerializedProps.current = componentProps;\n        }\n      }\n    }, [\n      interactableId,\n      componentProps,\n      updateInteractableComponentProps,\n      onPropsUpdate,\n    ]);\n\n    // If the interactable ID is not yet set, render the component without provider\n    if (!interactableId) {\n      return <WrappedComponent {...(effectiveProps as ComponentProps)} />;\n    }\n\n    // Create a minimal message with interactable metadata\n    // This allows useTamboCurrentComponent to work with standalone interactable components\n    const minimalMessage: TamboThreadMessage = {\n      id: interactableId,\n      role: \"assistant\" as const,\n      content: [],\n      threadId: \"\",\n      createdAt: new Date().toISOString(),\n      component: {\n        componentName: config.componentName,\n        componentState: {},\n        message: \"\",\n        props: effectiveProps,\n      },\n      componentState: {},\n    };\n\n    // Wrap with TamboMessageProvider including interactable metadata\n    return (\n      <TamboMessageProvider\n        message={minimalMessage}\n        interactableMetadata={{\n          id: interactableId,\n          componentName: config.componentName,\n          description: config.description,\n        }}\n      >\n        <WrappedComponent {...(effectiveProps as ComponentProps)} />\n      </TamboMessageProvider>\n    );\n  };\n\n  TamboInteractableWrapper.displayName = `withTamboInteractable(${displayName})`;\n\n  return TamboInteractableWrapper;\n}\n", "import type TamboAI from \"@tambo-ai/typescript-sdk\";\nimport { UseQueryOptions } from \"@tanstack/react-query\";\nimport { useTamboThread } from \"../providers\";\nimport { useTamboClient } from \"../providers/tambo-client-provider\";\nimport { useTamboQuery } from \"./react-query-hooks\";\n\ninterface UseTamboThreadListConfig {\n  /**\n   * The projectId to get the threads for. If not provided, the current project\n   * will be used.\n   */\n  projectId?: string;\n}\n\n/**\n * Get all the threads for the specified project.\n *\n * If contextKey is empty, then all threads for the project will be returned.\n * If contextKey is not empty, then only the threads for the specified context\n * key will be returned. The contextKey is obtained from the TamboThreadProvider\n * via useTamboThread().\n * @param config - The config for the useTamboThreadList hook\n * @param config.projectId - The projectId to get the threads for\n * @returns The threads for the specified project and optional context key\n */\nexport function useTamboThreadList(\n  { projectId }: UseTamboThreadListConfig = {},\n  options: Partial<\n    UseQueryOptions<TamboAI.Beta.Threads.ThreadsOffsetAndLimit | null>\n  > = {},\n) {\n  const client = useTamboClient();\n  const { contextKey } = useTamboThread();\n  const { data: queriedProjectId, ...projectIdState } = useTamboQuery({\n    ...(options as unknown as UseQueryOptions<string>),\n    queryKey: [\"projectId\"],\n    queryFn: async () => {\n      return (await client.beta.projects.getCurrent()).id;\n    },\n  });\n  const currentProjectId = projectId ?? queriedProjectId;\n\n  const threadState = useTamboQuery({\n    ...options,\n    enabled: !!currentProjectId,\n    queryKey: [\"threads\", currentProjectId, contextKey],\n    queryFn: async () => {\n      if (!currentProjectId) {\n        return null;\n      }\n      const threadIter = await client.beta.threads.list(currentProjectId, {\n        contextKey,\n      });\n      return threadIter;\n    },\n  });\n\n  return currentProjectId ? threadState : { data: null, ...projectIdState };\n}\n", "import { ContextHelperFn } from \"./types\";\n\n/**\n * Prebuilt context helper that provides information about the user's current page.\n * @returns a value to include it, or null/undefined to skip.\n */\nexport const currentPageContextHelper: ContextHelperFn = () => {\n  try {\n    if (typeof window === \"undefined\") {\n      return null;\n    }\n    return {\n      url: window.location.href,\n      title: document.title,\n    };\n  } catch (e) {\n    console.error(\"prebuiltUserPage failed:\", e);\n    return null;\n  }\n};\n", "import { ContextHelperFn } from \"./types\";\n\n/**\n * Prebuilt context helper that provides information about the user's current time.\n * @returns a value to include it, or null/undefined to skip.\n */\nexport const currentTimeContextHelper: ContextHelperFn = () => {\n  try {\n    const now = new Date();\n    return {\n      timestamp: now.toString(),\n    };\n  } catch (e) {\n    console.error(\"prebuiltUserTime failed:\", e);\n    return null;\n  }\n};\n"],
  "mappings": "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AA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,cAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;;;;;ACtDA,IAgCMC,SACA,uBAEO,gBAEA,WAEP,sBACA,0BAEO,WAEA,aAEA,eAEA,cAEA,iBAEA,SAEA,YAEA,aAEA,IAEA,QAEA,iBAEA,SAEA,SAEA,oBAEA,YAEA;AAxEb,IAAAC,eAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,IAAAC;AACA,IAAAC;AAEA,IAAMH,UAAS,aAAY;AAC3B,IAAM,wBAAwB,4BAA4B,OAAO,UAAU;AAEpE,IAAM,iBAAiB,qBAAqB,uBAAuBA,SAAQ,qBAAqB;AAEhG,IAAM,YAAY,gBAAgB,uBAAuBA,SAAQ,qBAAqB;AAE7F,IAAM,uBAAuB,2BAA2B,qBAAqB;AAC7E,IAAM,2BAA2B,+BAA+B,qBAAqB;AAE9E,IAAM,YAAY,gBAAgB,sBAAsB,WAAW,wBAAwB;AAE3F,IAAM,cAAc,kBAAkB,uBAAuBA,SAAQ,qBAAqB;AAE1F,IAAM,gBAAgB,oBAAoB,uBAAuBA,SAAQ,qBAAqB;AAE9F,IAAM,eAAe,mBAAmB,uBAAuBA,SAAQ,qBAAqB;AAE5F,IAAM,kBAAkB,sBAAsB,uBAAuBA,SAAQ,qBAAqB;AAElG,IAAM,UAAU,cAAc,uBAAuBA,SAAQ,qBAAqB;AAElF,IAAM,aAAa,iBAAiB,qBAAqB;AAEzD,IAAM,cAAc,kBAAkB,qBAAqB;AAE3D,IAAM,KAAK,SAAS,qBAAqB;AAEzC,IAAM,SAAS,aAAa,uBAAuBA,SAAQ,qBAAqB;AAEhF,IAAM,kBAAkB,sBAAsB,uBAAuBA,SAAQ,qBAAqB;AAElG,IAAM,UAAU,cAAc,uBAAuBA,SAAQ,qBAAqB;AAElF,IAAM,UAAU,cAAc,uBAAuBA,SAAQ,qBAAqB;AAElF,IAAM,qBAAqB,yBAAyB,uBAAuBA,SAAQ,qBAAqB;AAExG,IAAM,aAAa,iBAAiB,uBAAuB,qBAAqB;AAEhF,IAAM,WAAW,eAAe,uBAAuBA,SAAQ,qBAAqB;;;;;ACxE3F;AAAA;AAAA;AASA,WAAO,UAAU,CAAC,KAAK,YAAY;AACjC,UAAI,OAAO,QAAQ,SAAU,OAAM,IAAI,UAAU,mBAAmB;AACpE,aAAO,IAAI,KAAK,EACb,QAAQ,mBAAmB,OAAO,EAClC,QAAQ,OAAO,OAAK,QAAQ,KAAK,CAAC,IAAI,IAAI,GAAG,EAC7C,QAAQ,YAAY,EAAE,EACtB,QAAQ,UAAU,OAAK,WAAW,QAAQ,WAAW,MAAM,CAAC,EAC5D,YAAY;AAAA,IACjB;AAAA;AAAA;;;ACjBA;AAAA;AA0BA,QAAII,qBAAoB,SAAS,QAAQ;AACrC,UAAI,GAAG;AAGP,UAAI,QAAQ,MAAM,KAAK,MAAM;AAC7B,UAAI;AACA,eAAO,MAAM,CAAC;AAAA;AAEd,eAAO;AAEX,UAAI,SAAS,KAAK,YAAY;AAE9B,UAAI,YAAY,CAAC,UAAU,QAAQ,MAAM;AACzC,WAAK,KAAK,WAAW;AACjB,YAAI,OAAO,QAAQ,UAAU,CAAC,CAAC,KAAK;AAChC,iBAAO;AAAA,MACf;AAGA,UAAI,OAAO,UAAU,GAAG;AACpB,YAAI,eAAe,QAAQ,MAAM,KAAK;AAClC,iBAAO;AAAA;AAEP,iBAAO;AAAA,MACf;AAGA,UAAI,KAAK,MAAM,kGAAkG,GAAG;AAChH,eAAO;AAAA,MACX;AAGA,UAAI,UAAU,CAAC,UAAU,YAAY,mBAAmB,uBAAuB;AAC/E,WAAK,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACjC,YAAI,OAAO,MAAM,QAAQ,CAAC,CAAC;AACvB,iBAAO;AAAA,MACf;AAGA,UAAI,KAAK,MAAM,cAAc,GAAG;AAC5B,eAAO;AAAA,MACX,WACS,QAAQ,KAAK,YAAY,GAAG;AACjC,YAAI,eAAe,QAAQ,OAAO,CAAC,CAAC,KAAK;AACrC,iBAAO;AAAA;AAEP,iBAAO;AAAA,MACf;AAGA,UAAI,QAAQ,QAAQ,OAAO,CAAC,CAAC,KAAK;AAC9B,eAAO;AAGX,UAAI,OAAO,MAAM,yCAAyC;AACtD,eAAO;AAEX,aAAO;AAAA,IACX;AAEA,QAAK,OAAO,WAAW,eAAiB,OAAO,OAAO,YAAY,aAAc;AAC5E,aAAO,UAAUA;AAAA,IACrB,OAAO;AACH,aAAO,oBAAoBA;AAAA,IAC/B;AAAA;AAAA;;;AC1FA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;;;AACA;AACA;AACA;AACA;;;;;ACJA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,cAAA;;;;;;;ACAA,oBACA,2BAWM,gBAyBA,YAMA,iBAkEO;AA7Gb,IAAAC,eAAA;;qBAAoB;AACpB,gCAA8B;AAQ9B,IAAAC;AACA,IAAAC;AAEA,IAAM,iBAAiB,CAAC,MAAc,cAAuB;AACzD,UAAI,cAAc,QAAW;AACzB,eAAO;;AAGX,aAAO,UAAU,OAAO,CAAC,cAAc,aAAY;AAC/C,YAAI,aAAa,cAAc;AAC3B,gBAAM,OAAO,aAAa,OAAO,CAAC,EAAE,YAAW;AAC/C,gBAAM,OAAO,aAAa,MAAM,CAAC;AAEjC,iBAAO,GAAG,IAAI,GAAG,IAAI;;AAGzB,YAAI,aAAa,WAAW;AACxB,qBAAO,eAAAC,SAAQ,YAAY;;AAG/B,YAAI,aAAa,4BAA4B;AACzC,iBAAO,OAAG,0BAAAC,SAAkB,YAAY,CAAC,IAAI,YAAY;;AAG7D,eAAO;MACX,GAAG,IAAI;IACX;AAEA,IAAM,aAAa,CAAC,aAAuB;AACvC,YAAM,aAAa,SAAS,OAAO,SAAS,UAAU,IAAI,CAAC,aAAa,MAAM,QAAQ,QAAQ,EAAE,KAAK,EAAE;AAEvG,aAAO,IAAI,OAAO,SAAS,UAAU,KAAK,GAAG;IACjD;AAEA,IAAM,kBAAkB,CAACC,SAAgB,eAAgC;AACrE,YAAM,kBAAkB;AAExB,YAAM,YAAyB,CAAA;AAE/B,UAAI,mBAAmB,gBAAgB,KAAKA,OAAM;AAElD,aAAO,qBAAqB,MAAM;AAC9B,cAAM,WAAsB;UACxB,WAAW,CAAA;UACX,MAAM,iBAAiB,CAAC;;AAG5B,YAAI,iBAAiB,CAAC,MAAM,QAAW;AACnC,gBAAM,iBAAiB;AAEvB,cAAI,uBAAuB,eAAe,KAAK,iBAAiB,CAAC,CAAC;AAElE,iBAAO,yBAAyB,MAAM;AAClC,qBAAS,UAAU,KAAK,qBAAqB,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC;AAE5D,mCAAuB,eAAe,KAAK,iBAAiB,CAAC,CAAC;;;AAItE,kBAAU,KAAK,QAAQ;AAEvB,2BAAmB,gBAAgB,KAAKA,OAAM;;AAGlD,YAAM,mBAAmB,UAAU,OAC/B,CAAC,OAAqC,aAClC,MACK,IAAI,CAAC,SAAQ;AACV,YAAI,OAAO,SAAS,UAAU;AAC1B,iBAAO,KAAK,MAAM,WAAW,QAAQ,CAAC,EAAE,OAAO,CAAC,MAAoC,KAAa,UAAiB;AAC9G,gBAAI,UAAU,GAAG;AACb,qBAAO,CAAC,GAAG;;AAGf,gBAAI,SAAS,QAAQ,YAAY;AAC7B,qBAAO,CAAC,GAAG,MAAM,eAAe,WAAW,SAAS,IAAI,GAAG,SAAS,SAAS,GAAG,GAAG;;AAGvF,mBAAO,CAAC,GAAG,MAAM,CAAC,WAA6B,eAAe,OAAO,SAAS,IAAI,GAAG,SAAS,SAAS,GAAG,GAAG;UACjH,GAAG,CAAA,CAAE;;AAGT,eAAO,CAAC,IAAI;MAChB,CAAC,EACA,OAAO,CAAC,MAAoC,SAAuC,CAAC,GAAG,MAAM,GAAG,IAAI,GAAG,CAAA,CAAE,GAClH,CAACA,OAAM,CAAC;AAGZ,aAAO,CAAC,sBACJ,iBACK,OAAO,CAAC,eAAyB,oBAA6C;AAC3E,YAAI,OAAO,oBAAoB,UAAU;AACrC,iBAAO,CAAC,GAAG,eAAe,eAAe;;AAG7C,eAAO,CAAC,GAAG,eAAe,gBAAgB,iBAAiB,CAAC;MAChE,GAAG,CAAA,CAAE,EACJ,KAAK,EAAE;IACpB;AAEO,IAAM,UAAU,CAAC,UAA0B,kBAAoC,CAAA,MAAM;AACxF,YAAM,aAAa,SAAS,SAAS,SAAY,SAAY,gBAAgB,SAAS,MAAM,eAAe;AAC3G,YAAM,gBAAgB,SAAS,YAAY,SAAY,SAAY,gBAAgB,SAAS,SAAS,eAAe;AAIpH,eAAS,OACL,2BAAiE,CAAA,GACjE,eAAiC;AAEjC,cAAM,qBACF,kBAAkB,WACjB,oCAAoC,SACpB,yBAA0B,SAAS,UAChC,yBAA0B,KAAK,MAAM,EAAE,MAAM;AACrE,cAAM,EAAE,OAAO,kBAAiB,IAAK,qBAC/B;UACI,OAA0B;UAC1B,mBAAmB,CAAA;YAEvB;UACI,OAA0B;UAC1B,mBAAqC;;AAG/C,cAAM,MACD,kBAAkB,SAAY,IAAI,MAAK,IAAK,IAAI,MAAM,cAAgC,iBAAiB,CAAC;AAG7G,YAAI,UAAU,MAAM;AAChB,cAAI,QAAQ;;AAGhB,YAAI,eAAe,QAAW;AAC1B,cAAI,OAAO,WAAW,iBAAiB;;AAG3C,YAAI,SAAS,WAAW,QAAW;AAC/B,cAAI,SAAS,SAAS;;AAG1B,eAAO;MACX;AAEA,aAAO;IACX;;;;;AC1JA,IAEM,sBAEO,2BAKA,4BAKA,6BAKA;AAnBb;;IAAAC;AAEA,IAAM,uBAAuB,EAAE,gBAAgB,QAAQ,gBAAgB,QAAQ,kBAAkB,OAAM;AAEhG,IAAM,4BAAsF,QAAQ;MACvG,SAAS;MACT,QAAQ,qBAAqB;KAChC;AAEM,IAAM,6BAAuF,QAAQ;MACxG,SAAS;MACT,QAAQ,qBAAqB;KAChC;AAEM,IAAM,8BAAwF,QAAQ;MACzG,SAAS;MACT,QAAQ,qBAAqB;KAChC;AAEM,IAAM,2BAAqF,QAAQ;MACtG,SAAS;MACT,QAAQ,qBAAqB;KAChC;;;;;ACnBD;;;;;;;ACHA;;;;;;ACAA;;IAAAC;AAGA;AACA;;;;;ACJA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACbA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kBAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,cAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;;;;;ACVA,IAAAC,eAAA;;;AACA;AACA;AAQA,IAAAC;AACA,IAAAC;;;;;ACXA,IAAa;AAAb;;AAAO,IAAM,sCAAsC,CAAC,iBAA8B,gBAA4BC,aAAmB;AAC7H,aAAO,OAAOC,2BAAyD;AACnE,cAAMC,QAAO,IAAI,gBAAgB,CAACF,QAAO,GAAG,EAAE,MAAM,wCAAuC,CAAE;AAC7F,cAAMG,OAAM,eAAe,gBAAgBD,KAAI;AAE/C,YAAI;AACA,gBAAMD,uBAAsBE,IAAG;;AAE/B,yBAAe,gBAAgBA,IAAG;;MAE1C;IACJ;;;;;ACRA,IAAa;AAAb;;AAAO,IAAM,iBAAiB,CAAC,oBAAyE;AACpG,aAAO,CAAC,EAAE,MAAM,QAAO,MAAoB;AACvC,cAAM,EAAE,GAAE,IAAK;AAEf,YAAI,OAAO,MAAM;AACb,gBAAM,iBAAiB,gBAAgB,IAAI,EAAE;AAE7C,cAAI,mBAAmB,QAAW;AAC9B,kBAAM,EAAE,QAAQ,QAAO,IAAK;AAE5B,4BAAgB,OAAO,EAAE;AAEzB,gBAA0B,QAAS,UAAU,QAAW;AACpD,sBAA+B,QAAS,MAAM;mBAC3C;AACH,qBAAO,IAAI,MAA4B,QAAS,MAAM,OAAO,CAAC;;;;MAI9E;IACJ;;;;;ACrBA,IAAa;AAAb;;AAAO,IAAM,2BAA2B,CAACC,0BAA6D;AAClG,aAAO,CAAC,iBAAuE,SAAqB;AAChG,eAAO,CAAC,SAA8C,gBAAgC,CAAA,MAAqB;AACvG,iBAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACnC,kBAAM,KAAKA,sBAAqB,eAAe;AAE/C,4BAAgB,IAAI,IAAI,EAAE,QAAQ,QAAO,CAAE;AAE3C,iBAAK,YAAY,EAAE,IAAI,GAAG,QAAO,GAAI,aAAa;UACtD,CAAC;QACL;MACJ;IACJ;;;;;ACCA,IAAa;AAAb;;AAAO,IAAM,wCAAwC,CACjDC,iBACA,mBACAC,KACAC,mBACA;AACA,aAAO,CACHC,8BACA,SACA,UAA2D,CAAA,MAC0B;AAIrF,cAAM,mBAAyC,IAAUA,6BAA6B,SAAS,oCAAoC;UAC/H,GAAG;UACH,kBAAkB;UAClB,gBAAgB;UAChB,iBAAiB;SACpB;AACD,cAAM,kBAAwE,oBAAI,IAAG;AACrF,cAAM,cAAc,kBAAkB,iBAAiB,iBAAiB,IAAI;AAC5E,cAAM,cAAcF,IAAG,iBAAiB,MAAM,SAAS,EAAED,gBAAe,eAAe,CAAC;AAExF,yBAAiB,KAAK,MAAK;AAE3B,YAAI,QAAgB;AAEpB,eAAO,iBAAiB,kBAAkB;UACtC,OAAO;YACH,MAAG;AACC,qBAAO,YAAW;AACd,gBAAAE,eAAc,CAAC,WAAW,GAAG,KAAK;AAElC,wBAAQ;AAER,uBAAO,YAAY;kBACf,QAAQ;iBACX;cACL;YACJ;;UAEJ,MAAM;YACF,MAAG;AACC,oBAAM,IAAI,MAAM,2DAA2D;YAC/E;;UAEJ,QAAQ;YACJ,MAAG;AACC,qBAAO,OAAO,gBAA4B;AACtC,gBAAAA,eAAc,CAAC,UAAU,GAAG,KAAK;AAEjC,wBAAQ;AAER,uBAAO,YACH;kBACI,QAAQ;kBACR,QAAQ,EAAE,YAAW;mBAEzB,CAAC,WAAW,CAAC;cAErB;YACJ;;UAEJ,QAAQ;YACJ,MAAG;AACC,qBAAO,YAAW;AACd,gBAAAA,eAAc,CAAC,QAAQ,GAAG,KAAK;AAE/B,wBAAQ;AAER,uBAAO,YAAY;kBACf,QAAQ;iBACX;cACL;YACJ;;UAEJ,MAAM;YACF,MAAG;AACC,qBAAO,YAAW;AACd,gBAAAA,eAAc,CAAC,UAAU,WAAW,GAAG,KAAK;AAE5C,wBAAQ;AAER,oBAAI;AACA,wBAAM,YAAY,EAAE,QAAQ,OAAM,CAAE;;AAEpC,8BAAW;;cAEnB;YACJ;;SAEP;AAED,eAAqC;MACzC;IACJ;;;;;AC7GA,IAAa;AAAb;;AAAO,IAAM,gBAAgB,CAAC,gBAA0B,iBAA8B;AAClF,UAAI,CAAC,eAAe,SAAS,YAAY,GAAG;AACxC,cAAM,IAAI,MACN,4BAA4B,eACvB,IAAI,CAAC,kBAAkB,IAAI,aAAa,GAAG,EAC3C,KAAK,MAAM,CAAC,gBAAgB,YAAY,IAAI;;IAG7D;;;;;ACVA,IACa;AADb;;AACO,IAAM,UAAU;;;;;ACDvB;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAE,mBAAA;;;AACA;;;;;ACDA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,cAAA;;;AACA;AACA;AACA;;;;;ACHA,IAiBa,+BAEA;AAnBb,IAAAC,eAAA;;IAAAA;AACA,IAAAA;AACA,IAAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,IAAAC;AACA,IAAAC;AAEO,IAAM,gCAAgC,oCAAoC,MAAM,KAAK,OAAO;AAE5F,IAAM,iCAAiC,sCAC1C,gBACA,yBAAyBC,qBAAoB,GAC7C,IACA,aAAa;;;;;ACrBjB,IAAa;AAAb;;AAAO,IAAM,sDAAsD,CAC/D,OACA,SACA,eACgD;AAChD,aAAO,EAAE,SAAS,YAAY,MAAM,0BAA0B,MAAK;IACvE;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,iDAAiD,CAC1D,OACA,SACA,eAC2C;AAC3C,aAAO,EAAE,SAAS,YAAY,MAAM,qBAAqB,MAAK;IAClE;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,gCAAgC,CAAC,OAAe,cAA+C;AACxG,aAAO,EAAE,WAAW,MAAM,YAAY,MAAK;IAC/C;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,qCAAqC,CAC9C,QACA,WACAC,cAC+B;AAC/B,aAAO,EAAE,UAAAA,WAAU,WAAW,MAAM,iBAAiB,OAAM;IAC/D;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,uBAAuB,CAChCC,OACA,kBACA,EAAE,WAAW,QAAQ,aAAY,MACzB;AACR,aAAO,UAAU,mBAAmB,UAAU,KAAK,KAAK,YAAYA,SAAQ,YAAY;IAC5F;;;;;ACLA,IAAa;AAAb;;AAAO,IAAM,0CAA0C,CACnD,oBAC2D;AAC3D,aAAO,gBAAgB,SAAS;IACpC;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,qCAAqC,CAC9C,oBACsD;AACtD,aAAO,gBAAgB,SAAS;IACpC;;;;;ACLA,IAGa;AAHb;;;AACA;AAEO,IAAM,kCAAkC,CAC3C,oBAC+F;AAC/F,aAAO,wCAAwC,eAAe,KAAK,mCAAmC,eAAe;IACzH;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,4BAA4B,CAAC,oBAAkF;AACxH,aAAO,gBAAgB,SAAS;IACpC;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,iCAAiC,CAAC,oBAAuF;AAClI,aAAO,gBAAgB,SAAS;IACpC;;;;;ACLA,IAMa;AANb;;;AACA;AACA;AACA;AAGO,IAAM,yCAAyC,CAClD,kBACA,OACAC,OACA,iBACQ;AACR,YAAM,kBAAkB,iBAAiB,KAAK;AAE9C,aAAO,oBAAoB,SACrB,eACA,gCAAgC,eAAe,KAAK,0BAA0B,eAAe,IAC7F,gBAAgB,QAChB,+BAA+B,eAAe,IAC9C,gBAAgB,OAAO,gBAAgB,OAAO,SAAS,CAAC,IACxD,qBACIA,OACA,uCAAuC,kBAAkB,QAAQ,GAAG,gBAAgB,WAAW,YAAY,GAC3G,eAAe;IAE7B;;;;;ACzBA,IAOa;AAPb;;;AACA;AACA;AACA;AAIO,IAAM,8CAA8C,CACvD,kBACA,OACA,wBACA,qBACA,iBACkB;AAClB,aAAO,2BAA2B,SAC5B,CAAC,oBAAoB,YAAY,YAAY,IAC7C,gCAAgC,sBAAsB,IACtD,CAAC,uBAAuB,SAAS,uBAAuB,KAAK,IAC7D,0BAA0B,sBAAsB,IAChD,CAAC,uBAAuB,WAAW,uBAAuB,KAAK,IAC/D,+BAA+B,sBAAsB,IACrD;QACI,uBAAuB,YAAY,uBAAuB;QAC1D,uBAAuB,OAAO,uBAAuB,OAAO,SAAS,CAAC;UAE1E;QACI,uBAAuB;QACvB,uCAAuC,kBAAkB,QAAQ,GAAG,uBAAuB,WAAW,YAAY;;IAEhI;;;;;AC1BA,IAAa;AAAb;;AAAO,IAAM,iCAAiC,CAAC,oBAAuF;AAClI,aAAO,gBAAgB,SAAS;IACpC;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,yCAAyC,CAClD,oBAC0D;AAC1D,aAAO,gBAAgB,SAAS;IACpC;;;;;ACPA,IAMa;AANb;;;AACA;AACA;AACA;AAGO,IAAM,eAAe,CAAC,oBAA6C;AACtE,UAAI,+BAA+B,eAAe,KAAK,uCAAuC,eAAe,GAAG;AAC5G,eAAO,gBAAgB;MAC3B;AAEA,UAAI,wCAAwC,eAAe,KAAK,mCAAmC,eAAe,GAAG;AACjH,eAAO,gBAAgB;MAC3B;AAEA,aAAO,gBAAgB;IAC3B;;;;;ACdA,IAAa;AAAb;;AAAO,IAAM,gCAAgC,CACzCC,OACA,WACA,kBACA,EAAE,SAAS,MAAK,MAChB;AACA,UAAI,qBAAqB,OAAO;AAC5B,eAAO;MACX;AAEA,UAAK,IAAI,oBAAoB,IAAI,SAAW,mBAAmB,KAAK,QAAQ,GAAI;AAC5E,eAAO,oBAAoB,QAAQ,uBAAuBA,QAAO,cAAc,UAAU;MAC7F;AAEA,aAAO;IACX;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,2BAA2B,CACpCC,OACA,WACA,kBACA,EAAE,SAAS,MAAK,MAChB;AACA,aAAO,oBAAqBA,QAAO,cAAc,UAAU,cAAe,QAAQ;IACtF;;;;;ACTA,IAAa;AAAb;;AAAO,IAAM,mBAAmB,CAAC,QAAiC,mBAA0B;AACxF,YAAM,aAAa,KAAK,MAAM,cAAc;AAC5C,YAAM,aAAa,KAAK,KAAK,cAAc;AAE3C,UAAI,eAAe,YAAY;AAC3B,eAAO,OAAO,UAAU;MAC5B;AAEA,cAAQ,KAAK,iBAAiB,eAAe,OAAO,UAAU,KAAK,KAAK,aAAa,mBAAmB,OAAO,UAAU;IAC7H;;;;;ACRA,IAEa;AAFb;;;AAEO,IAAM,2BAA2B,CAACC,OAAc,EAAE,UAAAC,WAAU,WAAW,OAAM,MAA6C;AAC7H,YAAM,kBAAmBD,QAAO,aAAaC,aAAa,OAAO,SAAS;AAE1E,aAAO,iBAAiB,QAAQ,cAAc;IAClD;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,6BAA6B,CAAC,oBAAmF;AAC1H,aAAO,gBAAgB,SAAS;IACpC;;;;;ACLA,IAqBa;AArBb;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGM,IAAO,sBAAP,MAA0B;MAO5B,YAAY,cAAoB;AAC5B,aAAK,oBAAoB,CAAA;AACzB,aAAK,cAAc;AACnB,aAAK,gBAAgB;MACzB;MAEO,CAAC,OAAO,QAAQ,IAAC;AACpB,eAAO,KAAK,kBAAkB,OAAO,QAAQ,EAAC;MAClD;MAEO,IAAI,iBAAiC;AACxC,cAAM,YAAY,aAAa,eAAe;AAE9C,YAAI,+BAA+B,eAAe,KAAK,uCAAuC,eAAe,GAAG;AAC5G,gBAAM,QAAQ,KAAK,kBAAkB,UAAU,CAAC,2BAA0B;AACtE,gBAAI,uCAAuC,eAAe,KAAK,+BAA+B,sBAAsB,GAAG;AACnH,qBAAO,uBAAuB,YAAY,uBAAuB,YAAY;YACjF;AAEA,mBAAO,aAAa,sBAAsB,KAAK;UACnD,CAAC;AACD,gBAAM,yBAAyB,KAAK,kBAAkB,KAAK;AAE3D,cAAI,UAAU,IAAI;AACd,iBAAK,oBAAoB,KAAK,kBAAkB,MAAM,GAAG,KAAK;UAClE;AAEA,cAAI,+BAA+B,eAAe,GAAG;AACjD,kBAAM,sBAAsB,KAAK,kBAAkB,KAAK,kBAAkB,SAAS,CAAC;AAEpF,gBAAI,2BAA2B,UAAa,gCAAgC,sBAAsB,GAAG;AACjG,kBAAI,wBAAwB,UAAa,2BAA2B,mBAAmB,GAAG;AACtF,sBAAM,IAAI,MAAM,iCAAiC;cACrD;AAEA,oBAAM,YACF,wBAAwB,SAClB,uBAAuB,aACvB,+BAA+B,mBAAmB,IAClD,oBAAoB,YAAY,oBAAoB,WACpD,aAAa,mBAAmB;AAC1C,oBAAM,aACF,wBAAwB,SAClB,KAAK,gBACL,+BAA+B,mBAAmB,IAClD,oBAAoB,OAAO,oBAAoB,OAAO,SAAS,CAAC,IAChE,oBAAoB;AAC9B,oBAAM,QAAQ,wCAAwC,sBAAsB,IACtE,8BAA8B,WAAW,WAAW,YAAY,sBAAsB,IACtF,yBAAyB,WAAW,WAAW,YAAY,sBAAsB;AACvF,oBAAM,2BAA2B,wCAAwC,sBAAsB,IACzF,oDAAoD,OAAO,WAAW,KAAK,WAAW,IACtF,+CAA+C,OAAO,WAAW,KAAK,WAAW;AAEvF,mBAAK,kBAAkB,KAAK,wBAAwB;YACxD;AAEA,gBAAI,wBAAwB,UAAa,2BAA2B,mBAAmB,GAAG;AACtF,mBAAK,kBAAkB,KAAK,8BAA8B,KAAK,SAAS,SAAS,GAAG,SAAS,CAAC;YAClG;AAEA,gBACI,wBAAwB,UACxB,+BAA+B,mBAAmB,KAClD,oBAAoB,YAAY,oBAAoB,WAAW,WACjE;AACE,oBAAMC,YAAW,YAAY,oBAAoB;AACjD,oBAAM,SAAS,oBAAoB,OAAO,SAAS,KAAK,oBAAoB;AAC5E,oBAAM,SAAS,KAAK,IAAI,GAAG,IAAI,KAAK,KAAKA,YAAW,KAAK,CAAC;AAC1D,oBAAM,WAAYA,aAAY,SAAS,KAAM;AAC7C,oBAAM,SAAS,oBAAoB,OAAO,MAAM,GAAG,MAAM;AAEzD,kBAAI,WAAW,GAAG;AACd,yBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,wBAAM,SAAU,WAAW,IAAK;AAEhC,yBAAO,CAAC,IAAI,oBAAoB,OAAO,IAAI,CAAC,KAAK,IAAI,UAAU,oBAAoB,OAAO,CAAC,IAAI;gBACnG;cACJ;AAEA,mBAAK,kBAAkB,KAAK,kBAAkB,SAAS,CAAC,IAAI,mCACxD,QACA,oBAAoB,WACpBA,SAAQ;YAEhB;UACJ;QACJ,OAAO;AACH,gBAAM,QAAQ,KAAK,kBAAkB,UAAU,CAAC,2BAA2B,aAAa,sBAAsB,IAAI,SAAS;AAE3H,gBAAM,0BACF,UAAU,KAAK,KAAK,kBAAkB,KAAK,kBAAkB,SAAS,CAAC,IAAI,KAAK,kBAAkB,QAAQ,CAAC;AAE/G,cACI,4BAA4B,UAC5B,+BAA+B,uBAAuB,KACtD,aAAa,uBAAuB,IAAI,wBAAwB,WAAW,WAC7E;AACE,mBAAO;UACX;AAEA,gBAAM,4BAA4B,wCAAwC,eAAe,IACnF,oDAAoD,gBAAgB,OAAO,gBAAgB,SAAS,KAAK,WAAW,IACpH,mCAAmC,eAAe,IAClD,+CAA+C,gBAAgB,OAAO,WAAW,KAAK,WAAW,IACjG;AAEN,cAAI,UAAU,IAAI;AACd,iBAAK,kBAAkB,KAAK,yBAAyB;UACzD,OAAO;AACH,gBACI,+BAA+B,eAAe,KAC9C,YAAY,gBAAgB,WAAW,aAAa,KAAK,kBAAkB,KAAK,CAAC,GACnF;AACE,qBAAO;YACX;AAEA,iBAAK,kBAAkB,OAAO,OAAO,GAAG,yBAAyB;UACrE;QACJ;AAEA,eAAO;MACX;MAEO,MAAMC,OAAY;AACrB,cAAM,QAAQ,KAAK,kBAAkB,UAAU,CAAC,2BAA2B,aAAa,sBAAsB,IAAIA,KAAI;AAEtH,YAAI,QAAQ,GAAG;AACX,gBAAM,4BAA4B,KAAK,kBAAkB,MAAM,QAAQ,CAAC;AACxE,gBAAM,gCAAgC,0BAA0B,CAAC;AAEjE,cAAI,2BAA2B,6BAA6B,GAAG;AAC3D,sCAA0B,QACtB,8BACI,uCACI,KAAK,mBACL,QAAQ,GACR,8BAA8B,WAC9B,KAAK,aAAa,GAEtB,8BAA8B,SAAS,CAC1C;UAET;AAEA,eAAK,oBAAoB;QAC7B;MACJ;MAEO,SAASA,OAAY;AACxB,YAAI,KAAK,kBAAkB,WAAW,GAAG;AACrC,iBAAO,KAAK;QAChB;AAEA,cAAM,mBAAmB,KAAK,kBAAkB,UAAU,CAAC,oBAAoB,aAAa,eAAe,IAAIA,KAAI;AACnH,cAAM,sBAAsB,KAAK,kBAAkB,gBAAgB;AACnE,cAAM,uBAAuB,qBAAqB,KAAK,KAAK,kBAAkB,SAAS,oBAAoB;AAC3G,cAAM,yBAAyB,KAAK,kBAAkB,mBAAmB;AAEzE,YACI,2BAA2B,UAC3B,2BAA2B,sBAAsB,MAChD,wBAAwB,UACrB,CAAC,gCAAgC,mBAAmB,KACpD,oBAAoB,aAAaA,QACvC;AACE,iBAAO,qBACHA,OACA,uCACI,KAAK,mBACL,sBAAsB,GACtB,uBAAuB,WACvB,KAAK,aAAa,GAEtB,sBAAsB;QAE9B;AAEA,YACI,2BAA2B,UAC3B,0BAA0B,sBAAsB,MAC/C,wBAAwB,UAAa,CAAC,gCAAgC,mBAAmB,IAC5F;AACE,iBAAO,uBAAuB;QAClC;AAEA,YACI,2BAA2B,UAC3B,+BAA+B,sBAAsB,MACpD,wBAAwB,UACrB,CAAC,gCAAgC,mBAAmB,KACpD,uBAAuB,YAAY,uBAAuB,WAAWA,QAC3E;AACE,cAAIA,QAAO,uBAAuB,YAAY,uBAAuB,UAAU;AAC3E,mBAAO,yBAAyBA,OAAM,sBAAsB;UAChE;AAEA,iBAAO,uBAAuB,OAAO,uBAAuB,OAAO,SAAS,CAAC;QACjF;AAEA,YACI,2BAA2B,UAC3B,gCAAgC,sBAAsB,MACrD,wBAAwB,UAAa,CAAC,gCAAgC,mBAAmB,IAC5F;AACE,iBAAO,uBAAuB;QAClC;AAEA,YAAI,wBAAwB,UAAa,wCAAwC,mBAAmB,GAAG;AACnG,gBAAM,CAAC,WAAW,KAAK,IAAI,4CACvB,KAAK,mBACL,qBACA,wBACA,qBACA,KAAK,aAAa;AAGtB,iBAAO,8BAA8BA,OAAM,WAAW,OAAO,mBAAmB;QACpF;AAEA,YAAI,wBAAwB,UAAa,mCAAmC,mBAAmB,GAAG;AAC9F,gBAAM,CAAC,WAAW,KAAK,IAAI,4CACvB,KAAK,mBACL,qBACA,wBACA,qBACA,KAAK,aAAa;AAGtB,iBAAO,yBAAyBA,OAAM,WAAW,OAAO,mBAAmB;QAC/E;AAEA,eAAO,KAAK;MAChB;;;;;;ACnQJ,IAAa;AAAb;;AAAO,IAAM,qCAAqC,CAAC,eAAqD;AACpG,aAAO,EAAE,YAAY,MAAM,gBAAe;IAC9C;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,6CAA6C,CAAC,eAA6D;AACpH,aAAO,EAAE,YAAY,MAAM,wBAAuB;IACtD;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,8CAA8C,CAAC,OAAe,YAA2D;AAClI,aAAO,EAAE,SAAS,MAAM,0BAA0B,MAAK;IAC3D;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,yCAAyC,CAAC,OAAe,YAAsD;AACxH,aAAO,EAAE,SAAS,MAAM,qBAAqB,MAAK;IACtD;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,iCAAiC,CAAC,QAAgB,WAAmB,iBAAmD;AACjI,aAAO,EAAE,WAAW,QAAQ,cAAc,MAAM,YAAW;IAC/D;;;;;ACJA,IAAAC,yCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,iDAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mDAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,8CAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,oCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,yCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;;IAAAC;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA,IAAAC;AACA,IAAAC;;;;;ACRA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,cAAA;;;AACA;;;;;ACDA,IAAAC,gBAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,IAAAC;AACA,IAAAC;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,mBAAuC,MAAM,IAAI,aAAa,IAAI,YAAY;;;;;ACA3F,IAAa;AAAb;;AAAO,IAAM,4CAAyF,CAACC,wBAAsB;AACzH,aAAO,CAAC,cAAc,QAAQ,CAAC,QAAQ,OAAO,aAAa,GAAG,qBAAoB;AAC9E,QAAAA,oBACI,aAAa,KAAK,GAClB,CAAC,QAAQ,QAAQ,aAAa,GAC9B,CAAC,0BAA0B,sBAAsB,CAAC,MAAM,UAAU,sBAAsB,CAAC,MAAM,QAC/F,gBAAgB;MAExB;IACJ;;;;;ACRA,IAAa;AAAb;;AAAO,IAAM,gCAAiE,CAAC,8BAA6B;AACxG,aAAO,CACH,WACA,mBACA,oBACA;AACA,cAAM,eAAe,CAAA;AAErB,iBAAS,IAAI,GAAG,IAAI,gBAAgB,gBAAgB,KAAK,GAAG;AACxD,uBAAa,KAAK,oBAAI,IAAG,CAA6B;QAC1D;AAEA,kCAA0B,IAAI,WAAW;UACrC;UACA,SAAS,oBAAI,IAAG;UAChB,eAAe,oBAAI,QAAO;UAC1B,UAAU;SACb;MACL;IACJ;;;;;ACnBA,IAAa;AAAb;;AAAO,IAAM,iCAAmE,CAAC,+BAA8B;AAC3G,aAAO,CACH,YACA,uBACA;AACA,mCAA2B,IAAI,YAAY,EAAE,cAAc,oBAAI,IAAG,GAAI,eAAe,oBAAI,QAAO,GAAI,UAAU,mBAAkB,CAAE;MACtI;IACJ;;;;;ACIA,IAAa,yBAEA,8BAEA,kBAEA,+BAEA,mBAEA,eAEA,iBAEA,gBAGA,yCAKA;AAtBb;;AAAO,IAAM,0BAAyD,oBAAI,QAAO;AAE1E,IAAM,+BAA2D,oBAAI,QAAO;AAE5E,IAAM,mBAAoC,oBAAI,QAAO;AAErD,IAAM,gCAA6D,oBAAI,QAAO;AAE9E,IAAM,oBAAsC,oBAAI,QAAO;AAEvD,IAAM,gBAA+B,oBAAI,QAAO;AAEhD,IAAM,kBAAmF,oBAAI,QAAO;AAEpG,IAAM,iBAAiC,oBAAI,QAAO;AAGlD,IAAM,0CAGT,oBAAI,QAAO;AAER,IAAM,yBAGT,oBAAI,QAAO;;;;;ACrCf,IAAM,SAMO;AANb;;IAAM,UAAU;MACZ,YAAS;AACL,eAAO;MACX;;AAGG,IAAM,kBAAkB,CAAC,kBAAwC;AACpE,UAAI;AACA,cAAM,QAAQ,IAAI,MAAM,eAAe,OAAO;AAE9C,YAAI,MAAK;MACb,QAAQ;AACJ,eAAO;MACX;AAEA,aAAO;IACX;;;;;AClBA,IAYM,wBAEO;AAdb;;AAYA,IAAM,yBAAyB;AAExB,IAAM,wBAAwB,CAAC,QAAgBC,SAAiC;AACnF,YAAM,mBAAmB,CAAA;AAEzB,UAAI,gCAAgC,OAAO,QAAQ,UAAU,EAAE;AAC/D,UAAI,SAAS,8BAA8B,MAAM,sBAAsB;AAEvE,aAAO,WAAW,MAAM;AACpB,cAAM,gBAAgB,OAAO,CAAC,EAAE,MAAM,GAAG,EAAE;AAE3C,cAAM,iCAAiC,OAAO,CAAC,EAC1C,QAAQ,eAAe,EAAE,EACzB,QAAQ,eAAe,IAAI,IAAI,eAAeA,IAAG,EAAE,SAAQ,CAAE;AAClE,yBAAiB,KAAK,8BAA8B;AAEpD,wCAAgC,8BAA8B,MAAM,OAAO,CAAC,EAAE,MAAM,EAAE,QAAQ,UAAU,EAAE;AAC1G,iBAAS,8BAA8B,MAAM,sBAAsB;MACvE;AAEA,aAAO,CAAC,iBAAiB,KAAK,GAAG,GAAG,6BAA6B;IACrE;;;;;ACjCA,IAMM,4BAMA,qBAUO;AAtBb;;;AACA;AACA;AAIA,IAAM,6BAA6B,CAAC,yBAAmF;AACnH,UAAI,yBAAyB,UAAa,CAAC,MAAM,QAAQ,oBAAoB,GAAG;AAC5E,cAAM,IAAI,UAAU,qFAAqF;MAC7G;IACJ;AAEA,IAAM,sBAAsB,CAA8C,kBAAoB;AAC1F,UAAI,CAAC,gBAAgB,aAAa,GAAG;AACjC,cAAM,IAAI,UAAU,4DAA4D;MACpF;AAEA,UAAI,cAAc,cAAc,QAAQ,OAAO,cAAc,cAAc,UAAU;AACjF,cAAM,IAAI,UAAU,4DAA4D;MACpF;IACJ;AAEO,IAAM,8BAA6D,CACtEC,kBACAC,0BACA,gBACAC,mCACA,aACAC,mBACAC,uCACAC,8BACAC,oCACA,iBACA,kBACA,6CACAC,YACA;AACA,UAAI,QAAQ;AAEZ,aAAO,CAAC,SAAS,WAAW,UAAU,EAAE,aAAa,OAAM,MAAM;AAC7D,cAAM,4BAA4B,iBAAiB,IAAI,OAAO;AAE9D,YAAI,8BAA8B,UAAa,0BAA0B,IAAI,SAAS,GAAG;AACrF,iBAAO,QAAQ,QAAO;QAC1B;AAEA,cAAM,2BAA2B,gBAAgB,IAAI,OAAO;AAE5D,YAAI,6BAA6B,QAAW;AACxC,gBAAM,0BAA0B,yBAAyB,IAAI,SAAS;AAEtE,cAAI,4BAA4B,QAAW;AACvC,mBAAO;UACX;QACJ;AAEA,cAAM,gBAAgBJ,kBAAiB,OAAO;AAG9C,cAAMK,WACF,cAAc,iBAAiB,SACzB,YAAY,SAAS,EAChB,KAAK,CAAC,CAAC,QAAQ,WAAW,MAAK;AAC5B,gBAAM,CAAC,kBAAkB,6BAA6B,IAAI,sBAAsB,QAAQ,WAAW;AAiBnG,gBAAM,gBAAgB,GAAG,gBAAgB,4GAA4G,6BAA6B;;AAIlL,iBAAO,eAAe,aAAa;QACvC,CAAC,EACA,KAAK,MAAK;AACP,gBAAM,kCAAqFD,QAAQ,MAAO,IAAG;AAE7G,cAAI,oCAAoC,QAAW;AAE/C,kBAAM,IAAI,YAAW;UACzB;AAEA,UAAAL,kCAAiC,cAAc,aAAa,cAAc,YAAY,MAClF,gCACI,MAAM,sBAAqB;aAC3B,QACA,CAAC,MAAM,kBAAiB;AACpB,gBAAI,KAAK,KAAI,MAAO,IAAI;AACpB,oBAAMD,yBAAuB;YACjC;AAEA,kBAAM,oCAAoC,wCAAwC,IAAI,aAAa;AAEnG,gBAAI,sCAAsC,QAAW;AACjD,kBAAI,kCAAkC,IAAI,IAAI,GAAG;AAC7C,sBAAMA,yBAAuB;cACjC;AAEA,kCAAoB,aAAa;AACjC,yCAA2B,cAAc,oBAAoB;AAE7D,gDAAkC,IAAI,MAAM,aAAa;YAC7D,OAAO;AACH,kCAAoB,aAAa;AACjC,yCAA2B,cAAc,oBAAoB;AAE7D,sDAAwC,IAAI,eAAe,oBAAI,IAAI,CAAC,CAAC,MAAM,aAAa,CAAC,CAAC,CAAC;YAC/F;UACJ,GACA,cAAc,YACd,QACA,MAAS,CACZ;QAET,CAAC,IACL,QAAQ,IAAI;UACR,YAAY,SAAS;UACrB,QAAQ,QACJD,iBAAgB,6CAA6C,2CAA2C,CAAC;SAEhH,EAAE,KAAK,CAAC,CAAC,CAAC,QAAQ,WAAW,GAAG,uBAAuB,MAAK;AACzD,gBAAM,eAAe,QAAQ;AAE7B,kBAAQ;AAER,gBAAM,CAAC,kBAAkB,6BAA6B,IAAI,sBAAsB,QAAQ,WAAW;AA2BnG,gBAAM,+BAA+B,0BAC/B,0BACA;AA6CN,gBAAM,mBAAmB,0BAA0B,KAAK;AACxD,gBAAM,qBAAqB,0BACrB,KACA;AACN,gBAAM,gBAAgB,GAAG,gBAAgB,iDAAiD,6BAA6B;KACxI,4BAA4B,+CAA+C,gBAAgB,kBAAkB,kBAAkB,gGAAgG,YAAY;AAC1N,gBAAMS,QAAO,IAAI,KAAK,CAAC,aAAa,GAAG,EAAE,MAAM,wCAAuC,CAAE;AACxF,gBAAMC,OAAM,IAAI,gBAAgBD,KAAI;AAEpC,iBAAO,cAAc,aAChB,UAAUC,MAAK,OAAO,EACtB,KAAK,MAAK;AACP,gBAAIL,6BAA4B,aAAa,GAAG;AAC5C,qBAAO;YACX;AAGA,kBAAM,4BAA4BD,sCAAqC,aAAa;AAEpF,mBAAO,0BAA0B,aAAa,UAAUM,MAAK,OAAO,EAAE,KAAK,MAAM,yBAAyB;UAC9G,CAAC,EACA,KAAK,CAAC,6CAA4C;AAC/C,gBAAIJ,uCAAsC,MAAM;AAC5C,oBAAM,IAAI,YAAW;YACzB;AAEA,gBAAI;AAEA,kBAAIA,mCAAkC,0CAA0C,QAAQ,YAAY,EAAE;YAC1G,QAAQ;AACJ,oBAAM,IAAI,YAAW;YACzB;UACJ,CAAC,EACA,QAAQ,MAAM,IAAI,gBAAgBI,IAAG,CAAC;QAC/C,CAAC;AAEX,YAAI,6BAA6B,QAAW;AACxC,0BAAgB,IAAI,SAAS,oBAAI,IAAI,CAAC,CAAC,WAAWF,QAAO,CAAC,CAAC,CAAC;QAChE,OAAO;AACH,mCAAyB,IAAI,WAAWA,QAAO;QACnD;AAEA,QAAAA,SACK,KAAK,MAAK;AACP,gBAAM,mCAAmC,iBAAiB,IAAI,OAAO;AAErE,cAAI,qCAAqC,QAAW;AAChD,6BAAiB,IAAI,SAAS,oBAAI,IAAI,CAAC,SAAS,CAAC,CAAC;UACtD,OAAO;AACH,6CAAiC,IAAI,SAAS;UAClD;QACJ,CAAC,EACA,QAAQ,MAAK;AACV,gBAAM,kCAAkC,gBAAgB,IAAI,OAAO;AAEnE,cAAI,oCAAoC,QAAW;AAC/C,4CAAgC,OAAO,SAAS;UACpD;QACJ,CAAC;AAEL,eAAOA;MACX;IACJ;;;;;AC/QA,IAAa;AAAb;;AAAO,IAAM,iBAA0C,CAACG,MAAK,QAAO;AAChE,YAAM,QAAQA,KAAI,IAAI,GAAG;AAEzB,UAAI,UAAU,QAAW;AACrB,cAAM,IAAI,MAAM,gDAAgD;MACpE;AAEA,aAAO;IACX;;;;;ACRA,IAAa;AAAb;;AAAO,IAAM,qBAAkD,CAACC,MAAK,cAAa;AAC9E,YAAM,mBAAmB,MAAM,KAAKA,IAAG,EAAE,OAAO,SAAS;AAEzD,UAAI,iBAAiB,SAAS,GAAG;AAC7B,cAAM,MAAM,kCAAkC;MAClD;AAEA,UAAI,iBAAiB,WAAW,GAAG;AAC/B,cAAM,MAAM,uBAAuB;MACvC;AAEA,YAAM,CAAC,eAAe,IAAI;AAE1B,MAAAA,KAAI,OAAO,eAAe;AAE1B,aAAO;IACX;;;;;AChBA,IAGa;AAHb;;;AACA;AAEO,IAAM,0CAA0C,CACnD,eACA,QACA,QACA,UACA;AACA,YAAM,0BAA0B,eAAe,eAAe,MAAM;AACpE,YAAM,qBAAqB,mBACvB,yBACA,CAAC,2BAA2B,uBAAuB,CAAC,MAAM,UAAU,uBAAuB,CAAC,MAAM,KAAK;AAG3G,UAAI,wBAAwB,SAAS,GAAG;AACpC,sBAAc,OAAO,MAAM;MAC/B;AAEA,aAAO;IACX;;;;;ACtBA,IAIa;AAJb;;;AAEA;AAEO,IAAM,+BAAsE,CAAC,cAAa;AAC7F,aAAO,eAAe,iBAAiB,SAAS;IACpD;;;;;ACNA,IAKa;AALb;;;AAGA;AAEO,IAAM,2BAA2B,CAAqB,cAA4B;AACrF,UAAI,wBAAwB,IAAI,SAAS,GAAG;AACxC,cAAM,IAAI,MAAM,kCAAkC;MACtD;AAEA,8BAAwB,IAAI,SAAS;AAErC,mCAA6B,SAAS,EAAE,QAAQ,CAAC,kBAAkB,cAAc,IAAI,CAAC;IAC1F;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAqB,cAA+D;AAClH,aAAO,UAAU;IACrB;;;;;ACLA,IAKa;AALb;;;AAGA;AAEO,IAAM,4BAA4B,CAAqB,cAA4B;AACtF,UAAI,CAAC,wBAAwB,IAAI,SAAS,GAAG;AACzC,cAAM,IAAI,MAAM,8BAA8B;MAClD;AAEA,8BAAwB,OAAO,SAAS;AAExC,mCAA6B,SAAS,EAAE,QAAQ,CAAC,kBAAkB,cAAc,KAAK,CAAC;IAC3F;;;;;ACbA,IAMa;AANb;;;AAGA;AAGO,IAAM,yCAAyC,CAClD,WACA,iBACA;AACA,UAAI,CAAC,mBAAmB,SAAS,KAAK,aAAa,MAAM,CAAC,gBAAgB,YAAY,SAAS,CAAC,GAAG;AAC/F,kCAA0B,SAAS;MACvC;IACJ;;;;;ACbA,IAMa;AANb;;;AACA;AACA;AAIO,IAAM,iCAAmE,CAC5EC,sCACAC,uCACAC,0CACAC,yCACAC,+CACAC,0BACAC,uBACAC,+BACAC,qBACAC,qBACAC,oBACAC,iBACAC,wBACA;AACA,YAAM,qBAAqB,oBAAI,QAAO;AAEtC,aAAO,CAAC,QAAQ,aAAa,QAAQ,OAAO,cAAa;AACrD,cAAM,EAAE,cAAc,cAAa,IAAKP,yBAAwB,WAAW;AAC3E,cAAM,EAAE,QAAO,IAAKA,yBAAwB,MAAM;AAClD,cAAM,iBAAiBE,8BAA6B,MAAM;AAE1D,cAAM,gBAA6C,CAAC,aAAY;AAC5D,gBAAM,6BAA6BC,oBAAmB,WAAW;AACjE,gBAAM,wBAAwBA,oBAAmB,MAAM;AAEvD,cAAI,UAAU;AACV,kBAAM,oBAAoB,wCAAwC,eAAe,QAAQ,QAAQ,KAAK;AAEtG,YAAAR,qCAAoC,cAAc,QAAQ,mBAAmB,KAAK;AAElF,gBAAI,CAAC,aAAa,CAACW,gBAAe,MAAM,GAAG;AACvC,cAAAT,yCAAwC,uBAAuB,4BAA4B,QAAQ,KAAK;YAC5G;AAEA,gBAAIU,oBAAmB,WAAW,GAAG;AACjC,uCAAyB,WAAW;YACxC;UACJ,OAAO;AACH,kBAAM,oBAAoBT,wCAAuC,cAAc,QAAQ,QAAQ,KAAK;AAEpG,YAAAF,sCAAqC,eAAe,OAAO,mBAAmB,KAAK;AAEnF,gBAAI,CAAC,aAAa,CAACU,gBAAe,MAAM,GAAG;AACvC,cAAAP,8CAA6C,uBAAuB,4BAA4B,QAAQ,KAAK;YACjH;AAEA,kBAAM,WAAWE,sBAAqB,WAAW;AAEjD,gBAAI,aAAa,GAAG;AAChB,kBAAII,mBAAkB,WAAW,GAAG;AAChC,uDAAuC,aAAa,YAAY;cACpE;YACJ,OAAO;AACH,oBAAM,oBAAoB,mBAAmB,IAAI,WAAW;AAE5D,kBAAI,sBAAsB,QAAW;AACjC,6BAAa,iBAAiB;cAClC;AAEA,iCAAmB,IACf,aACA,WAAW,MAAK;AACZ,oBAAIA,mBAAkB,WAAW,GAAG;AAChC,yDAAuC,aAAa,YAAY;gBACpE;cACJ,GAAG,WAAW,GAAI,CAAC;YAE3B;UACJ;QACJ;AAEA,YACID,oBACI,SACA,CAAC,aAAa,QAAQ,KAAK,GAC3B,CAAC,qBACG,iBAAiB,CAAC,MAAM,eAAe,iBAAiB,CAAC,MAAM,UAAU,iBAAiB,CAAC,MAAM,OACrG,IAAI,GAEV;AACE,yBAAe,IAAI,aAAa;AAEhC,cAAIC,mBAAkB,MAAM,GAAG;AAC3B,YAAAV,qCAAoC,cAAc,QAAQ,CAAC,QAAQ,OAAO,aAAa,GAAG,IAAI;UAClG,OAAO;AACH,YAAAC,sCAAqC,eAAe,OAAO,CAAC,QAAQ,QAAQ,aAAa,GAAG,IAAI;UACpG;AAEA,iBAAO;QACX;AAEA,eAAO;MACX;IACJ;;;;;AClGA,IAAa;AAAb;;AAAO,IAAM,6CAA2F,CAACY,wBAAsB;AAC3H,aAAO,CAAC,eAAe,OAAO,CAAC,QAAQ,QAAQ,aAAa,GAAG,qBAAoB;AAC/E,cAAM,0BAA0B,cAAc,IAAI,MAAM;AAExD,YAAI,4BAA4B,QAAW;AACvC,wBAAc,IAAI,QAAQ,oBAAI,IAAI,CAAC,CAAC,QAAQ,OAAO,aAAa,CAAC,CAAC,CAAC;QACvE,OAAO;AACH,UAAAA,oBACI,yBACA,CAAC,QAAQ,OAAO,aAAa,GAC7B,CAAC,2BAA2B,uBAAuB,CAAC,MAAM,UAAU,uBAAuB,CAAC,MAAM,OAClG,gBAAgB;QAExB;MACJ;IACJ;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,4BAAyD,CAACC,0BAAwB;AAC3F,aAAO,CAAC,eAAe,mCAAkC;AACrD,cAAM,iBAAiBA,sBAAqB,eAAe;UACvD,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;SACT;AAED,uCAA+B,QAAQ,cAAc,EAAE,QAAQ,cAAc,WAAW;AAExF,cAAMC,cAAa,MAAK;AACpB,yCAA+B,oBAAoB,SAASA,WAAU;AACtE,yCAA+B,WAAW,cAAc;AACxD,yBAAe,WAAU;QAC7B;AAEA,uCAA+B,iBAAiB,SAASA,WAAU;MACvE;IACJ;;;;;ACnBA,IAAa;AAAb;;AAAO,IAAM,sCAA6E,CAACC,oCAAkC;AACzH,aAAO,CAAC,eAAe,qBAAoB;AACvC,QAAAA,gCAA+B,aAAa,EAAE,IAAI,gBAAgB;MACtE;IACJ;;;;;ACHA,IAAM,iBAUO;AAVb;;IAAM,kBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,SAAS;MACT,aAAa;MACb,aAAa;MACb,uBAAuB;;AAGpB,IAAM,gCAAiE,CAC1E,uBACAC,6BACAC,uBACAC,2BACAC,mBACAC,iCACA;AACA,aAAO,MAAM,qBAAyC,sBAAwB;QAG1E,YAAY,SAAY,SAAmC;AACvD,gBAAM,gBAAgBD,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAG,iBAAiB,GAAG,QAAO;AACtD,gBAAM,qBAAqBD,0BAAyB,eAAe,aAAa;AAChF,gBAAM,uBACDE,6BAA4B,aAAa,IAAIJ,4BAA0B,IAAK;AAGjF,gBAAM,SAAS,OAAO,oBAAoB,oBAAoB;AAE9D,eAAK,sBAAsB;QAC/B;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK,oBAAoB;QACpC;QAEA,IAAI,QAAQ,OAAK;AACb,eAAK,oBAAoB,UAAU;QACvC;QAEA,IAAI,oBAAiB;AACjB,iBAAO,KAAK,oBAAoB;QACpC;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,oBAAoB;QACpC;QAEA,IAAI,YAAY,OAAK;AAEjB,gBAAM,cAAc,KAAK,oBAAoB;AAE7C,eAAK,oBAAoB,cAAc;AAEvC,cAAI,EAAE,QAAQ,KAAK,oBAAoB,cAAc;AACjD,iBAAK,oBAAoB,cAAc;AAEvC,kBAAMC,sBAAoB;UAC9B;QACJ;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,oBAAoB;QACpC;QAEA,IAAI,YAAY,OAAK;AAEjB,gBAAM,cAAc,KAAK,oBAAoB;AAE7C,eAAK,oBAAoB,cAAc;AAEvC,cAAI,EAAE,KAAK,oBAAoB,cAAc,QAAQ;AACjD,iBAAK,oBAAoB,cAAc;AAEvC,kBAAMA,sBAAoB;UAC9B;QACJ;QAEA,IAAI,wBAAqB;AACrB,iBAAO,KAAK,oBAAoB;QACpC;QAEA,IAAI,sBAAsB,OAAK;AAC3B,eAAK,oBAAoB,wBAAwB;QACrD;QAEO,qBAAqBI,QAAiB;AACzC,eAAK,oBAAoB,qBAAqBA,MAAK;QACvD;QAEO,sBAAsBA,QAAiB;AAC1C,eAAK,oBAAoB,sBAAsBA,MAAK;QACxD;QAEO,sBAAsBA,QAAmB;AAC5C,eAAK,oBAAoB,sBAAsBA,MAAK;QACxD;QAEO,uBAAuBA,QAAmB;AAC7C,eAAK,oBAAoB,uBAAuBA,MAAK;QACzD;;IAER;;;;;ACzGA,IAAa;AAAb;;AAAO,IAAM,mBAAmB,CAAC,iBAAmC,kBAA0C;AAC1G,aAAO,gBAAgB,YAAY;IACvC;;;;;ACJA,IAIa;AAJb;;;AAIO,IAAM,oCAAyE,CAClFC,2BACAC,qBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,8BAA8B,oBAAI,QAAO;AAE/C,cAAM,qBAAqB,OAAO,OAAyB,8BAAyD;AAChH,cAAI,qBAAqBD,oBAA2C,KAAK;AAGzE,gBAAM,qCAAqC,iBAAiB,oBAAoB,yBAAyB;AAEzG,cAAI,CAAC,oCAAoC;AACrC,kBAAM,UAAU;cACZ,cAAc,mBAAmB;cACjC,kBAAkB,mBAAmB;cACrC,uBAAuB,mBAAmB;cAC1C,SAAS,mBAAmB;cAC5B,aAAa,mBAAmB;cAChC,aAAa,mBAAmB;cAChC,uBAAuB,mBAAmB;;AAG9C,iCAAqBD,0BAAyB,2BAA2B,OAAO;UACpF;AAEA,sCAA4B,IAAI,2BAA2B,kBAAkB;AAE7E,gBAAME,yBAAwB,OAAO,2BAA2B,kBAAkB;AAElF,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAAyB,2BAAqD;AACjF,kBAAM,6BAA6B,4BAA4B,IAAI,yBAAyB;AAE5F,gBAAI,+BAA+B,QAAW;AAC1C,qBAAO,QAAQ,QAAQ,0BAA0B;YACrD;AAEA,mBAAO,mBAAmB,OAAO,yBAAyB;UAC9D;;MAER;IACJ;;;;;ACjDA,IAAa;AAAb;;AAAO,IAAM,sDAAsD,CAAC,sBAAkD;AAClH,UAAI;AACA,0BAAkB,cAAc,IAAI,aAAa,CAAC,GAAG,GAAG,EAAE;MAC9D,QAAQ;AACJ,eAAO;MACX;AAEA,aAAO;IACX;;;;;ACRA,IAAa;AAAb;;AAAO,IAAM,uBAA+C,MAAM,IAAI,aAAa,IAAI,gBAAgB;;;;;ACFvG,IAGa;AAHb;;;AAGO,IAAM,sCAAsC,CAAC,gBAAyC;AACzF,kBAAY,iBAAkB,kBAAC,mBAAkB;AAC7C,eAAO,CAAC,YAAmB;AACvB,cAAI;AACA,mBAAO,eAAe,KAAK,aAAa,OAAO;UACnD,SAAS,KAAK;AACV,gBAAI,IAAI,SAAS,IAAI;AACjB,oBAAM,qBAAoB;YAC9B;AAEA,kBAAM;UACV;QACJ;MACJ,GAAG,YAAY,cAAc;IACjC;;;;;ACjBA,IAKMC,kBAIO;AATb;;;AACA;AAIA,IAAMA,mBAAkB;MACpB,kBAAkB;;AAGf,IAAM,+BAA+D,CACxEC,mBACAC,kBACAC,0BACAC,+BACAC,uCACA,yCACAC,oCACAC,kDACA;AACA,UAAI,4BAA+D;AAEnE,aAAO,MAAM,YAAW;QAsBpB,YAAY,SAA4B;AACpC,cAAIF,0CAAyC,MAAM;AAC/C,kBAAM,IAAI,MAAM,qDAAqD;UACzE;AAEA,gBAAM,EAAE,QAAQ,kBAAkB,WAAU,IAAK,EAAE,GAAGL,kBAAiB,GAAG,QAAO;AAEjF,cAAI,8BAA8B,MAAM;AACpC,wCAA4B,IAAIK,sCAAqC,GAAG,GAAG,KAAK;UACpF;AAMA,gBAAM,cACFD,kCAAiC,QACjCF,iBAAgB,yCAAyC,uCAAuC,IAC1F,IAAIE,8BAA6B,EAAE,QAAQ,kBAAkB,WAAU,CAAE,IACzE,0BAA0B,aAAa,kBAAkB,QAAQ,UAAU;AAGrF,cAAI,YAAY,qBAAqB,GAAG;AACpC,kBAAMD,yBAAuB;UACjC;AAIA,cAAI,OAAO,YAAY,oBAAoB,YAAY;AACnD,YAAAG,mCAAkC,WAAW;AAC7C,gDAAoC,WAAW;UAEnD,WACI,CAACJ,iBAAgB,qDAAqD,MAClE,oDAAoD,WAAW,CAAC,GAEtE;AACE,YAAAK,8CAA6C,WAAW;UAC5D;AAEA,UAAAN,kBAAiB,IAAI,WAAW;AAMhC,iBAAO;QACX;QAEO,QAAQ,OAAO,WAAW,EAAE,UAAiB;AAChD,iBACK,aAAa,QAAQ,OAAO,aAAa,YAAY,OAAO,eAAe,QAAQ,MAAM,YAAY,aACtGA,kBAAiB,IAAS,QAAQ;QAE1C;;IAER;;;;;ACnGA,IAAa,4BAEA;AAFb;;AAAO,IAAM,6BAA6B;AAEnC,IAAM,6BAA6B,CAAC;;;;;ACF3C,IAGa;AAHb;;;AAGO,IAAM,oBAAgD,CAAC,cAAc,wBAAwB,IAAI,SAAS;;;;;ACHjH,IAcMO,kBAYO;AA1Bb;;;AACA;AACA;AACA;AAWA,IAAMA,mBAAkB;MACpB,QAAQ;MACR,cAAc;MACd,kBAAkB;MAClB,uBAAuB;;MAEvB,MAAM;MACN,SAAS;MACT,WAAW;MACX,cAAc;;AAGX,IAAM,yCAAmF,CAC5FC,uBACAC,sCACAC,mBACAC,0BACAC,oCACAC,mBACAC,8BACAC,uBACA;AACA,aAAO,MAAM,8BACDP,sBAA0D;QAelE,YAAY,SAAY,SAA4C;AAChE,gBAAM,gBAAgBK,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGN,kBAAiB,GAAG,QAAO;AACtD,gBAAM,8BAA8BK,mCAAkC,eAAe,aAAa;AAClG,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,gCACD,YAAYL,qCAAmC,IAAK;AAGzD,gBAAM,SAAS,OAAO,6BAA6B,6BAA6B;AAEhF,eAAK,iCAAiC;AACtC,eAAK,qBAAqB;AAC1B,eAAK,eAAe,cAAc,WAAW;AAC7C,eAAK,+BAA+B;AACpC,eAAK,WAAW;AAEhB,eAAK,gBAAgBC,kBACjB,MACA,WACA,4BAA4B,cAC5B,4BACA,0BAA0B;QAElC;QAEA,IAAI,SAAM;AACN,cAAI,KAAK,oBAAoB;AACzB,mBAAO;UACX;AAEA,iBAAO,KAAK,6BAA6B;QAC7C;QAEA,IAAI,OAAO,OAAK;AACZ,eAAK,6BAA6B,SAAS;AAG3C,cAAI,UAAU,MAAM;AAChB,gBAAI,KAAK,cAAc;AACnB,oBAAMC,yBAAuB;YACjC;AAEA,iBAAK,eAAe;UACxB;QACJ;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK,6BAA6B;QAC7C;QAEA,IAAI,KAAK,OAAK;AACV,eAAK,6BAA6B,OAAO;QAC7C;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK,6BAA6B;QAC7C;QAEA,IAAI,QAAQ,OAAK;AACb,eAAK,6BAA6B,UAAU;QAChD;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK,6BAA6B;QAC7C;QAEA,IAAI,UAAU,OAAK;AACf,eAAK,6BAA6B,YAAY;QAClD;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAQ,OAAK;AACb,gBAAM,kBAAkB,OAAO,UAAU,aAAaI,mBAAkB,MAAM,KAAK,IAAI;AAEvF,eAAK,6BAA6B,UAAU;AAE5C,gBAAM,gBAAgB,KAAK,6BAA6B;AAExD,eAAK,WAAW,kBAAkB,QAAQ,kBAAkB,kBAAkB,QAAQ;QAC1F;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK;QAChB;QAEO,MAAM,OAAO,GAAG,SAAS,GAAGC,WAAiB;AAChD,eAAK,6BAA6B,MAAM,MAAM,QAAQA,SAAQ;AAE9D,cAAI,KAAK,mCAAmC,MAAM;AAC9C,iBAAK,+BAA+B,QAAQA,cAAa,SAAY,CAAC,MAAM,MAAM,IAAI,CAAC,MAAM,QAAQA,SAAQ;UACjH;AAEA,cAAI,KAAK,QAAQ,UAAU,UAAU;AACjC,qCAAyB,IAAI;AAE7B,kBAAM,8BAA8B,MAAK;AACrC,mBAAK,6BAA6B,oBAAoB,SAAS,2BAA2B;AAE1F,kBAAI,kBAAkB,IAAI,GAAG;AACzB,0CAA0B,IAAI;cAClC;YACJ;AAEA,iBAAK,6BAA6B,iBAAiB,SAAS,2BAA2B;UAC3F;QACJ;QAEO,KAAK,OAAO,GAAC;AAChB,eAAK,6BAA6B,KAAK,IAAI;AAE3C,cAAI,KAAK,mCAAmC,MAAM;AAC9C,iBAAK,+BAA+B,OAAO;UAC/C;QACJ;;IAER;;;;;AC3KA,IAIa;AAJb;;;AAIO,IAAM,6CAA2F,CACpGC,oBACAC,oCACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,uCAAuC,oBAAI,QAAO;AAExD,YAAI,QAA4D;AAChE,YAAI,OAAsB;AAE1B,cAAM,8BAA8B,OAChC,OACA,8BACA;AACA,cAAI,8BAA8BF,oBAAoD,KAAK;AAM3F,gBAAM,8CAA8C,iBAAiB,6BAA6B,yBAAyB;AAE3H,cAAI,CAAC,6CAA6C;AAC9C,kBAAM,UAAU;cACZ,QAAQ,4BAA4B;cACpC,cAAc,4BAA4B;cAC1C,kBAAkB,4BAA4B;cAC9C,uBAAuB,4BAA4B;;cAEnD,MAAM,4BAA4B;cAClC,SAAS,4BAA4B;cACrC,WAAW,4BAA4B;cACvC,cAAc,4BAA4B,aAAa;;AAG3D,0CAA8BD,mCAAkC,2BAA2B,OAAO;AAElG,gBAAI,UAAU,MAAM;AAChB,0CAA4B,MAAM,GAAG,KAAK;YAC9C;AAEA,gBAAI,SAAS,MAAM;AACf,0CAA4B,KAAK,IAAI;YACzC;UACJ;AAEA,+CAAqC,IAAI,2BAA2B,2BAA2B;AAE/F,cAAI,CAAC,6CAA6C;AAE9C,kBAAME,kBAAiB,2BAA2B,MAAM,cAAc,4BAA4B,YAAY;UAClH,OAAO;AAEH,kBAAMH,mBAAkB,2BAA2B,MAAM,cAAc,4BAA4B,YAAY;UACnH;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,2BAA2B;AAE3F,iBAAO;QACX;AAEA,eAAO;UACH,IAAI,MAAM,OAAkD;AACxD,oBAAQ;UACZ;UACA,IAAI,KAAK,OAAa;AAClB,mBAAO;UACX;UACA,OACI,OACA,2BAAqD;AAErD,kBAAM,sCAAsC,qCAAqC,IAAI,yBAAyB;AAE9G,gBAAI,wCAAwC,QAAW;AACnD,qBAAO,QAAQ,QAAQ,mCAAmC;YAC9D;AAEA,mBAAO,4BAA4B,OAAO,yBAAyB;UACvE;;MAER;IACJ;;;;;ACtFA,IAAa;AAAb;;AAAO,IAAM,0BAA0B,CAAqB,cAAoE;AAC5H,aAAO,kBAAkB;IAC7B;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAqB,cAA+D;AAClH,aAAO,eAAe,aAAa,UAAU;IACjD;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,uBAAuB,CAAqB,cAAiE;AACtH,aAAO,YAAY;IACvB;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,aAAa,CAAqB,cAAuD;AAClG,aAAO,EAAE,eAAe,cAAc,UAAU;IACpD;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,mBAAmB,CAAqB,cAA6D;AAC9G,aAAO,YAAY,aAAa,eAAe,aAAa,EAAE,UAAU;IAC5E;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAqB,cAA+D;AAClH,aAAO,SAAS;IACpB;;;;;ACLA,IAKa;AALb;;;AAGA;AAEO,IAAM,0BAA4D,CACrE,cAC0B;AAC1B,aAAiC,eAAe,8BAA8B,SAAS;IAC3F;;;;;ACTA,IAKa;AALb;;;AAGA;AAEO,IAAM,2BAA8D,CACvE,eAC2B;AAC3B,aAAkC,eAAe,+BAA+B,UAAU;IAC9F;;;;;ACTA,IAca;AAdb;;;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEO,IAAM,4CAA4C,CACrD,WACA,UACA;AACA,YAAM,EAAE,aAAY,IAAK,wBAAwB,SAAS;AAE1D,mBAAa,QAAQ,CAAC,gBAClB,YAAY,QAAQ,CAAC,CAAC,MAAM,MAAK;AAC7B,YAAI,CAAC,MAAM,SAAS,SAAS,GAAG;AAC5B,oDAA0C,QAAQ,CAAC,GAAG,OAAO,SAAS,CAAC;QAC3E;MACJ,CAAC,CAAC;AAGN,YAAM,cAAc,wBAAwB,SAAS,IAC/C;;QAEI,UAAU;UAEd,mBAAmB,SAAS,IAC5B,MAAM,KAAK,UAAU,WAAW,OAAM,CAAE,IACxC,mBAAmB,SAAS,IAC5B,CAAC,UAAU,GAAG,UAAU,QAAQ,UAAU,WAAW,UAAU,IAAI,IACnE,qBAAqB,SAAS,IAC9B,CAAC,UAAU,MAAM,IACjB,WAAW,SAAS,IACpB,CAAC,UAAU,IAAI,IACf,iBAAiB,SAAS,IAC1B,CAAC,UAAU,QAAQ,UAAU,SAAS,IACtC,mBAAmB,SAAS,IAC5B,CAAC,UAAU,GAAG,IACd,CAAA;AAEN,iBAAW,cAAc,aAAa;AAClC,cAAM,wBAAwB,yBAA4B,UAAU;AAEpE,YAAI,0BAA0B,QAAW;AACrC,gCAAsB,aAAa,QAAQ,CAAC,CAAC,MAAM,MAAM,0CAA0C,QAAQ,KAAK,CAAC;QACrH;MACJ;AAEA,UAAI,kBAAkB,SAAS,GAAG;AAC9B,kCAA0B,SAAS;MACvC;IACJ;;;;;ACxDA,IAEa;AAFb;;;AAEO,IAAM,uBAAuB,CAAqB,YAAoB;AACzE,gDAAoE,QAAQ,aAAa,CAAA,CAAE;IAC/F;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAC,gBAAoD;AACnF,aACI,gBAAgB,UAChB,OAAO,gBAAgB,YACtB,OAAO,gBAAgB,aAAa,gBAAgB,cAAc,gBAAgB,iBAAiB,gBAAgB;IAE5H;;;;;ACRA,IAYa;AAZb;;;AACA;AAWO,IAAM,gCAAiE,CAC1EC,8BACAC,0BACAC,0BACAC,qBACAC,yCACAC,6CACAC,wCACAC,6CACAC,mCACA;AACA,aAAO,MAAM,qBAAqBR,6BAA0C;QAWxE,YAAY,UAAgC,CAAA,GAAE;AAC1C,cAAIQ,mCAAkC,MAAM;AACxC,kBAAM,IAAI,MAAM,8CAA8C;UAClE;AAEA,cAAI;AAEJ,cAAI;AACA,iCAAqB,IAAIA,+BAA8B,OAAO;UAClE,SAAS,KAAK;AAEV,gBAAI,IAAI,SAAS,MAAM,IAAI,YAAY,8BAA8B;AACjE,oBAAMN,yBAAuB;YACjC;AAEA,kBAAM;UACV;AAGA,cAAI,uBAAuB,MAAM;AAC7B,kBAAMC,oBAAkB;UAC5B;AAGA,cAAI,CAAC,mBAAmB,QAAQ,WAAW,GAAG;AAC1C,kBAAM,IAAI,UACN,uBAAuB,QAAQ,WAAW,kEAAkE;UAEpH;AAGA,cAAI,QAAQ,eAAe,UAAa,mBAAmB,eAAe,QAAQ,YAAY;AAC1F,kBAAMD,yBAAuB;UACjC;AAEA,gBAAM,oBAAoB,CAAC;AAE3B,gBAAM,EAAE,YAAW,IAAK;AACxB,gBAAM,EAAE,WAAU,IAAK;AAGvB,eAAK,eACD,OAAO,mBAAmB,gBAAgB,WACpC,mBAAmB,cACnB,gBAAgB,aAChB,MAAM,aACN,gBAAgB,iBAAiB,gBAAgB,SACjD,MAAM,aACN,gBAAgB,aAChB,OAAO;;;;;YAKN,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,MAAO,cAAc,aAAc,GAAG,CAAC,CAAC,IAAI,MAAO;;AAC7F,eAAK,sBAAsB;AAG3B,cAAIM,+BAA8B,SAAS,sBAAsB;AAC7D,iBAAK,kBAAkB,mBAAmB,WAAU;AACpD,iBAAK,wBAAwB,mBAAmB,iBAAgB;AAEhE,iBAAK,gBAAgB,KAAK,QAAQ;AAElC,iBAAK,sBAAsB,QAAQ,KAAK,eAAe,EAAE,QAAQ,mBAAmB,WAAW;AAC/F,iBAAK,sBAAsB,MAAK;UACpC,OAAO;AACH,iBAAK,kBAAkB;AACvB,iBAAK,wBAAwB;UACjC;AAEA,eAAK,SAAS;AAMd,cAAI,mBAAmB,UAAU,WAAW;AACxC,iBAAK,SAAS;AAEd,kBAAM,cAAc,MAAK;AACrB,kBAAI,KAAK,WAAW,aAAa;AAC7B,qBAAK,SAAS;cAClB;AAEA,iCAAmB,oBAAoB,eAAe,WAAW;YACrE;AAEA,+BAAmB,iBAAiB,eAAe,WAAW;UAClE;QACJ;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK,WAAW,OAAO,KAAK,SAAS,KAAK,oBAAoB;QACzE;QAEO,QAAK;AAER,cAAI,KAAK,UAAU,UAAU;AACzB,mBAAO,KAAK,oBAAoB,MAAK,EAAG,KAAK,MAAK;AAC9C,oBAAMP,yBAAuB;YACjC,CAAC;UACL;AAGA,cAAI,KAAK,WAAW,aAAa;AAC7B,iBAAK,SAAS;UAClB;AAEA,iBAAO,KAAK,oBAAoB,MAAK,EAAG,KAAK,MAAK;AAC9C,gBAAI,KAAK,oBAAoB,QAAQ,KAAK,0BAA0B,MAAM;AACtE,mBAAK,sBAAsB,KAAI;AAE/B,mBAAK,gBAAgB,WAAU;AAC/B,mBAAK,sBAAsB,WAAU;YACzC;AAEA,iCAAqB,IAAI;UAC7B,CAAC;QACL;QAEO,yBAAyB,cAA8B;AAC1D,iBAAO,IAAIG,wCAAuC,MAAM,EAAE,aAAY,CAAE;QAC5E;QAEO,+BAA4B;AAC/B,iBAAO,IAAIC,4CAA2C,IAAI;QAC9D;QAEO,wBAAwB,aAAwB;AACnD,iBAAO,IAAIC,uCAAsC,MAAM,EAAE,YAAW,CAAE;QAC1E;QAEO,6BAA6B,kBAAkC;AAClE,iBAAO,IAAIC,4CAA2C,MAAM,EAAE,iBAAgB,CAAE;QACpF;QAEO,SAAM;AACT,cAAI,KAAK,WAAW,aAAa;AAC7B,mBAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACnC,oBAAM,iBAAiB,MAAK;AACxB,qBAAK,oBAAoB,oBAAoB,eAAe,cAAc;AAE1E,oBAAI,KAAK,oBAAoB,UAAU,WAAW;AAC9C,0BAAO;gBACX,OAAO;AACH,uBAAK,OAAM,EAAG,KAAK,SAAS,MAAM;gBACtC;cACJ;AAEA,mBAAK,oBAAoB,iBAAiB,eAAe,cAAc;YAC3E,CAAC;UACL;AAEA,iBAAO,KAAK,oBAAoB,OAAM,EAAG,MAAM,CAAC,QAAO;AAGnD,gBAAI,QAAQ,UAAa,IAAI,SAAS,IAAI;AACtC,oBAAMN,yBAAuB;YACjC;AAEA,kBAAM;UACV,CAAC;QACL;QAEO,UAAO;AACV,iBAAO,KAAK,oBAAoB,QAAO,EAAG,MAAM,CAAC,QAAO;AAEpD,gBAAI,QAAQ,QAAW;AACnB,oBAAMA,yBAAuB;YACjC;AAEA,kBAAM;UACV,CAAC;QACL;;IAER;;;;;AC7MA,IAAa;AAAb;;AAAO,IAAM,wCAAiF,CAC1FQ,uBACAC,qCACAC,uBACAC,0BACA,kCACAC,mBACAC,8BACAC,6BACA;AACA,aAAO,MAAM,6BAAiDN,sBAAuB;QAKjF,YAAY,SAAY,cAAoB;AACxC,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,YAAYC,6BAA4B,aAAa;AAC3D,gBAAM,6BAA6B,iCAAiC,eAAe,cAAc,SAAS;AAC1G,gBAAM,+BACD,YAAYJ,oCAAmCK,wBAAuB,IAAI;AAG/E,gBAAM,SAAS,OAAO,4BAA4B,4BAA4B;AAE9E,eAAK,qCAAqC;AAC1C,eAAK,8BAA8B;QACvC;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK,4BAA4B;QAC5C;QAEA,IAAI,aAAa,OAAK;AAGlB,cAAI,KAAK,oCAAoC;AACzC,kBAAMH,yBAAuB;UACjC;AAGA,cAAI,QAAQ,KAAK,4BAA4B,iBAAiB;AAC1D,kBAAMD,sBAAoB;UAC9B;AAEA,eAAK,4BAA4B,eAAe;QACpD;QAEA,IAAI,mBAAgB;AAChB,iBAAO,KAAK,4BAA4B;QAC5C;QAEA,IAAI,iBAAiB,OAAK;AAEtB,cAAI,KAAK,oCAAoC;AACzC,kBAAMC,yBAAuB;UACjC;AAEA,eAAK,4BAA4B,mBAAmB;QACxD;QAEA,IAAI,kBAAe;AACf,iBAAO,KAAK,4BAA4B;QAC5C;;IAER;;;;;AClEA,IAAa;AAAb;;AAAO,IAAM,qCAA2E,CAGpFI,6BACA;AACA,YAAM,sCAAsC,oBAAI,QAAO;AAEvD,YAAM,6BAA6B,OAAO,OAAiC,8BAAyD;AAChI,cAAM,6BAA6B,0BAA0B;AAE7D,4CAAoC,IAAI,2BAA2B,0BAA0B;AAE7F,cAAMA,yBAAwB,OAAO,2BAA2B,0BAA0B;AAE1F,eAAO;MACX;AAEA,aAAO;QACH,OACI,OACA,2BAAqD;AAErD,gBAAM,qCAAqC,oCAAoC,IAAI,yBAAyB;AAE5G,cAAI,uCAAuC,QAAW;AAClD,mBAAO,QAAQ,QAAQ,kCAAkC;UAC7D;AAEA,iBAAO,2BAA2B,OAAO,yBAAyB;QACtE;;IAER;;;;;ACvCA,IAIa;AAJb;;;AAIO,IAAM,6BAA2D,CACpEC,mBACAC,gCACAC,iCACAC,kCACAC,0BACAC,iBACAC,8BACAC,wBACA;AACA,aAAO,CAAC,SAAS,kBAAiB;AAC9B,cAAM,iBAAiB,cAAc;AAGrC,cAAM,wBAAwB,MAAK;AAC/B,gBAAM,SAAS,IAAI,aAAa,CAAC;AACjC,gBAAM,oBAAoBN,+BAA8B,eAAe;YACnE,cAAc;YACd,kBAAkB;YAClB,uBAAuB;YACvB,gBAAgB;WACnB;AACD,gBAAM,YAAYK,6BAA4B,aAAa;AAE3D,cAAI,+BAA+B;AACnC,cAAI,kBAAoE,CAAC,GAAG,GAAG,IAAI,GAAG,GAAG,CAAC;AAC1F,cAAI,eAAyC,CAAC,GAAG,GAAG,CAAC;AAErD,gBAAM,4BAA4B,MAAK;AACnC,gBAAI,8BAA8B;AAC9B;YACJ;AAEA,2CAA+B;AAE/B,kBAAM,sBAAsBH,iCAAgC,eAAe,KAAK,GAAG,CAAC;AAGpF,gCAAoB,iBAAiB,CAAC,EAAE,YAAW,MAAM;AACrD,oBAAM,cAAgE;gBAClEE,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;;AAGzC,kBAAI,YAAY,KAAK,CAAC,OAAO,UAAU,UAAU,gBAAgB,KAAK,CAAC,GAAG;AACtE,+BAAe,eAAe,GAAG,WAAW;AAE5C,kCAAkB;cACtB;AAEA,oBAAM,UAAoC;gBACtCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;gBACrCA,gBAAe,aAAa,QAAQ,CAAC;;AAGzC,kBAAI,QAAQ,KAAK,CAAC,OAAO,UAAU,UAAU,aAAa,KAAK,CAAC,GAAG;AAC/D,+BAAe,YAAY,GAAG,OAAO;AAErC,+BAAe;cACnB;YACJ;AAEA,8BAAkB,QAAQ,mBAAmB;UACjD;AACA,gBAAM,uBAAuB,CAAC,UAAkB,CAAC,UAAiB;AAC9D,gBAAI,UAAU,gBAAgB,KAAK,GAAG;AAClC,8BAAgB,KAAK,IAAI;AAEzB,6BAAe,eAAe,GAAG,eAAe;YACpD;UACJ;AACA,gBAAM,oBAAoB,CAAC,UAAkB,CAAC,UAAiB;AAC3D,gBAAI,UAAU,aAAa,KAAK,GAAG;AAC/B,2BAAa,KAAK,IAAI;AAEtB,6BAAe,YAAY,GAAG,YAAY;YAC9C;UACJ;AACA,gBAAM,uBAAuB,CAAC,OAAe,cAAsB,aAAqC;AACpG,kBAAM,qBAAqBH,gCAA+B,eAAe;cACrE,cAAc;cACd,kBAAkB;cAClB,uBAAuB;cACvB,QAAQ;aACX;AAED,+BAAmB,QAAQ,mBAAmB,GAAG,KAAK;AAGtD,+BAAmB,MAAK;AAExB,mBAAO,eAAe,mBAAmB,QAAQ,gBAAgB;cAC7D,MAAG;AACC,uBAAO;cACX;aACH;AAMD,kBAAM,aAAaF,kBACV,EAAE,QAAO,GACd,WACA,mBAAmB,QACnB,4BACA,0BAA0B;AAG9B,YAAAO,oBACI,YACA,SACA,CAAC,QAAQ,MAAM,IAAI,KAAK,UAAU,GAClC,CAACC,SAAQ,CAAC,UAAS;AACf,kBAAI;AACA,gBAAAA,KAAI,KAAK,YAAY,KAAK;cAC9B,SAAS,KAAK;AACV,oBAAI,IAAI,SAAS,GAAG;AAChB,wBAAM;gBACV;cACJ;AAEA,wCAAyB;AAEzB,kBAAI,WAAW;AAEX,yBAAS,KAAK;cAClB;YACJ,CAAC;AAGL,uBAAW,uBAAuB,CAAC,wBAAuB;AACtD,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMJ,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAAwD;AAC/D,sBAAM,QAAQ,oBAAoB,MAAM,YAAY,IAAI;AAExD,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,mBAAmB;AACjC,uBAAW,yBAAyB,CAAC,0BAAyB;AAC1D,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAA0D;AACjE,sBAAM,QAAQ,sBAAsB,MAAM,YAAY,IAAI;AAE1D,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,qBAAqB;AACnC,uBAAW,gCAAgC,CAAC,iCAAgC;AACxE,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAAiE;AACxE,sBAAM,QAAQ,6BAA6B,MAAM,YAAY,IAAI;AAEjE,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,4BAA4B;AAC1C,uBAAW,2BAA2B,CAAC,4BAA2B;AAC9D,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAA4D;AACnE,sBAAM,QAAQ,wBAAwB,MAAM,YAAY,IAAI;AAE5D,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,uBAAuB;AACrC,uBAAW,mBAAmB,CAAC,oBAAmB;AAC9C,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAAoD;AAC3D,sBAAM,QAAQ,gBAAgB,MAAM,YAAY,IAAI;AAEpD,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,eAAe;AAC7B,uBAAW,kBAAkB,CAAC,mBAAkB;AAC5C,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAAmD;AAC1D,sBAAM,QAAQ,eAAe,MAAM,YAAY,IAAI;AAEnD,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,cAAc;AAC5B,uBAAW,uBAAuB,CAAC,wBAAuB;AACtD,kBAAI,WAAW;AACX,uBAAO,MAAK;AACR,wBAAMA,yBAAuB;gBACjC;cACJ;AAEA,qBAAO,IAAI,SAAwD;AAC/D,sBAAM,QAAQ,oBAAoB,MAAM,YAAY,IAAI;AAExD,0CAAyB;AAEzB,uBAAO;cACX;YACJ,GAAG,WAAW,mBAAmB;AAEjC,mBAAO;UACX;AAEA,iBAAO;YACH,UAAU,qBAAqB,GAAG,GAAG,qBAAqB,CAAC,CAAC;YAC5D,UAAU,qBAAqB,GAAG,GAAG,qBAAqB,CAAC,CAAC;YAC5D,UAAU,qBAAqB,GAAG,IAAI,qBAAqB,CAAC,CAAC;YAC7D,WAAW,qBAAqB,GAAG,GAAG,kBAAkB,CAAC,CAAC;YAC1D,WAAW,qBAAqB,GAAG,GAAG,kBAAkB,CAAC,CAAC;YAC1D,WAAW,qBAAqB,GAAG,GAAG,kBAAkB,CAAC,CAAC;YAC1D,KAAK,qBAAqB,GAAG,GAAG,qBAAqB,CAAC,CAAC;YACvD,KAAK,qBAAqB,GAAG,GAAG,qBAAqB,CAAC,CAAC;YACvD,KAAK,qBAAqB,GAAG,GAAG,qBAAqB,CAAC,CAAC;;QAE/D;AAEA,cAAM,EAAE,UAAU,UAAU,UAAU,WAAW,WAAW,WAAW,KAAK,KAAK,IAAG,IAChF,eAAe,aAAa,SAAY,sBAAqB,IAAK;AAEtE,eAAO;UACH,IAAI,WAAQ;AACR,mBAAO;UACX;UACA,IAAI,WAAQ;AACR,mBAAO;UACX;UACA,IAAI,WAAQ;AACR,mBAAO;UACX;UACA,IAAI,YAAS;AACT,mBAAO;UACX;UACA,IAAI,YAAS;AACT,mBAAO;UACX;UACA,IAAI,YAAS;AACT,mBAAO;UACX;UACA,IAAI,MAAG;AACH,mBAAO;UACX;UACA,IAAI,MAAG;AACH,mBAAO;UACX;UACA,IAAI,MAAG;AACH,mBAAO;UACX;;MAER;IACJ;;;;;ACpSA,IAAa;AAAb;;AAAO,IAAM,cAAc,CACvB,0BACwC;AACxC,aAAO,aAAa;IACxB;;;;;ACNA,IAEa;AAFb;;;AAEO,IAAM,8BAA8B,CACvC,qBACmD;AACnD,aAAO,YAAY,iBAAiB,CAAC,CAAC;IAC1C;;;;;ACLA,IAAa;AAAb;;AAAO,IAAM,qBAAkD,CAACK,MAAK,SAAS,WAAW,qBAAoB;AACzG,iBAAW,QAAQA,MAAK;AACpB,YAAI,UAAU,IAAI,GAAG;AACjB,cAAI,kBAAkB;AAClB,mBAAO;UACX;AAEA,gBAAM,MAAM,gDAAgD;QAChE;MACJ;AAEA,MAAAA,KAAI,IAAI,OAAO;AAEf,aAAO;IACX;;;;;ACdA,IAEa;AAFb;;;AAEO,IAAM,uCAAuC,CAChD,cACA,QACA,CAAC,QAAQ,aAAa,GACtB,qBACA;AACA,yBACI,cACA,CAAC,QAAQ,QAAQ,aAAa,GAC9B,CAAC,0BAA0B,sBAAsB,CAAC,MAAM,UAAU,sBAAsB,CAAC,MAAM,QAC/F,gBAAgB;IAExB;;;;;ACdA,IAEa;AAFb;;;AAEO,IAAM,wCAAwC,CACjD,eACA,CAAC,QAAQ,QAAQ,aAAa,GAC9B,qBACA;AACA,YAAM,0BAA0B,cAAc,IAAI,MAAM;AAExD,UAAI,4BAA4B,QAAW;AACvC,sBAAc,IAAI,QAAQ,oBAAI,IAAI,CAAC,CAAC,QAAQ,aAAa,CAAC,CAAC,CAAC;MAChE,OAAO;AACH,2BACI,yBACA,CAAC,QAAQ,aAAa,GACtB,CAAC,2BAA2B,uBAAuB,CAAC,MAAM,QAC1D,gBAAgB;MAExB;IACJ;;;;;AClBA,IAAa;AAAb;;AAAO,IAAM,yBAAyB,CAClC,0CACgE;AAChE,aAAO,YAAY;IACvB;;;;;ACPA,IAIa;AAJb;;;AAIO,IAAM,0CAA4F,CACrG,uBACA,4BACA,QACA,UACoC;AACpC,UAAI,uBAAuB,0BAA0B,GAAG;AACpD,cAAM,iCAAiC,2BAA2B,OAAO,KAAK;AAE9E,8BAAsB,QAAQ,gCAAgC,QAAQ,CAAC;AAEvE,eAAO,CAAC,gCAAgC,QAAQ,CAAC;MACrD;AAEA,4BAAsB,QAAQ,4BAA4B,QAAQ,KAAK;AAEvE,aAAO,CAAC,4BAA4B,QAAQ,KAAK;IACrD;;;;;AClBA,IAAa;AAAb;;AAAO,IAAM,8BAA8B,CACvC,wBACA,QACA,WACkC;AAClC,iBAAW,yBAAyB,wBAAwB;AACxD,YAAI,sBAAsB,CAAC,MAAM,UAAU,sBAAsB,CAAC,MAAM,QAAQ;AAC5E,iCAAuB,OAAO,qBAAqB;AAEnD,iBAAO;QACX;MACJ;AAEA,aAAO;IACX;;;;;ACfA,IAEa;AAFb;;;AAEO,IAAM,0CAA0C,CACnD,cACA,QACA,WACA;AACA,aAAO,mBACH,cACA,CAAC,0BAA0B,sBAAsB,CAAC,MAAM,UAAU,sBAAsB,CAAC,MAAM,MAAM;IAE7G;;;;;ACXA,IAEa;AAFb;;;AAEO,IAAM,iCAAiC,CAC1C,WACA,kBACA;AACA,YAAM,iBAAiB,6BAA6B,SAAS;AAE7D,UAAI,CAAC,eAAe,OAAO,aAAa,GAAG;AACvC,cAAM,IAAI,MAAM,sCAAsC;MAC1D;IACJ;;;;;ACXA,IAGa;AAHb;;;AACA;AAEO,IAAM,2CAA2C,CACpD,eACA,QACA,WACA;AACA,YAAM,0BAA0B,eAAe,eAAe,MAAM;AACpE,YAAM,qBAAqB,mBACvB,yBACA,CAAC,2BAA2B,uBAAuB,CAAC,MAAM,MAAM;AAGpE,UAAI,wBAAwB,SAAS,GAAG;AACpC,sBAAc,OAAO,MAAM;MAC/B;AAEA,aAAO;IACX;;;;;ACrBA,IAGa;AAHb;;;AAGO,IAAM,+CAAsG,CAC/G,uBACA,4BACA,QACA,UACA;AACA,UAAI,uBAAuB,0BAA0B,GAAG;AACpD,8BAAsB,WAAW,2BAA2B,OAAO,KAAK,GAAG,QAAQ,CAAC;MACxF,OAAO;AACH,8BAAsB,WAAW,4BAA4B,QAAQ,KAAK;MAC9E;IACJ;;;;;ACdA,IAKa;AALb;;;AAGA;AAEO,IAAM,qBAAkD,CAC3D,cACG;AACH,aAAU,eAAe,kBAAkB,SAAS;IACxD;;;;;ACTA,IAKa;AALb;;;AAGA;AAEO,IAAM,sBAAsB,CAAC,eAA8C;AAC9E,aAAO,eAAe,mBAAmB,UAAU;IACvD;;;;;ACPA,IAGa;AAHb;;;AAGO,IAAM,iBAA0C,CAAC,cAAa;AACjE,aAAO,eAAe,IAAI,SAAS;IACvC;;;;;ACLA,IAGa;AAHb;;;AAGO,IAAM,qBAAkD,CAAC,cAAa;AACzE,aAAO,CAAC,wBAAwB,IAAI,SAAS;IACjD;;;;;ACHA,IAAa;AAAb;;AAAO,IAAM,uCAAuC,CAChD,oBACAC,uCACkB;AAClB,aAAO,IAAI,QAAQ,CAAC,YAAW;AAK3B,YAAIA,uCAAsC,MAAM;AAC5C,kBAAQ,IAAI;QAChB,OAAO;AACH,gBAAM,WAAW,mBAAmB,sBAAsB,KAAK,GAAG,CAAC;AACnE,gBAAM,QAAQ,mBAAmB,WAAU;AAE3C,gBAAM,OAAO,mBAAmB,aAAa,GAAG,GAAG,KAAK;AACxD,gBAAM,cAAc,KAAK,eAAe,CAAC;AAEzC,sBAAY,CAAC,IAAI;AACjB,sBAAY,CAAC,IAAI;AAEjB,gBAAM,SAAS,mBAAmB,mBAAkB;AAEpD,iBAAO,SAAS;AAChB,iBAAO,OAAO;AAEd,iBAAO,QAAQ,QAAQ,EAAE,QAAQ,mBAAmB,WAAW;AAC/D,iBAAO,QAAQ,KAAK;AACpB,iBAAO,WAAW,KAAK;AAGvB,mBAAS,iBAAiB,CAAC,UAAS;AAChC,kBAAM,UAAU,MAAM,YAAY,eAAe,CAAC;AAElD,gBAAI,MAAM,UAAU,KAAK,KAAK,SAAS,CAAC,WAAmB,WAAW,CAAC,GAAG;AACtE,sBAAQ,IAAI;YAChB,OAAO;AACH,sBAAQ,KAAK;YACjB;AAEA,mBAAO,KAAI;AAEX,qBAAS,iBAAiB;AAE1B,mBAAO,WAAW,QAAQ;AAC1B,qBAAS,WAAW,mBAAmB,WAAW;UACtD;AAEA,iBAAO,MAAK;QAChB;MACJ,CAAC;IACL;;;;;AClDA,IAAa;AAAb;;AAAO,IAAM,yBAAyB,CAClC,QACA,YACM;AACN,YAAM,SAAS,oBAAI,IAAG;AAEtB,iBAAW,SAAS,QAAQ;AACxB,mBAAW,aAAa,OAAO;AAC3B,gBAAM,QAAQ,OAAO,IAAI,SAAS;AAElC,iBAAO,IAAI,WAAW,UAAU,SAAY,IAAI,QAAQ,CAAC;QAC7D;MACJ;AAEA,aAAO,QAAQ,CAAC,OAAO,cAAc,QAAQ,WAAW,KAAK,CAAC;IAClE;;;;;AChBA,IAAa;AAAb;;AAAO,IAAM,oBAAoB,CAC7B,gCACiD;AACjD,aAAO,aAAa;IACxB;;;;;ACNA,IAGa;AAHb;;;AAGO,IAAM,gCAAgC,CAAC,oBAA2C;AACrF,YAAM,cAAc,oBAAI,IAAG;AAE3B,sBAAgB,UAAwC,kBAACC,aAAW;AAEhE,eAAO,CAAC,aAAmD,SAAS,GAAG,QAAgB,MAA8B;AACjH,gBAAM,cAAc,kBAAkB,WAAW,IAAIA,SAAQ,aAAa,QAAQ,KAAK,IAAIA,SAAQ,aAAa,MAAM;AAGtH,gBAAM,2BAA2B,YAAY,IAAI,WAAW;AAE5D,cAAI,6BAA6B,QAAW;AACxC,wBAAY,IAAI,aAAa,CAAC,EAAE,OAAO,OAAM,CAAE,CAAC;UACpD,OAAO;AACH,gBAAI,yBAAyB,MAAM,CAAC,eAAe,WAAW,UAAU,SAAS,WAAW,WAAW,MAAM,GAAG;AAC5G,uCAAyB,KAAK,EAAE,OAAO,OAAM,CAAE;YACnD;UACJ;AAEA,iBAAO;QACX;MACJ,GAAG,gBAAgB,QAAQ,KAAK,eAAe,CAAC;AAEhD,sBAAgB,aAAc,kBAACC,gBAAc;AACzC,eAAO,CAAC,qBAAqE,QAAiB,UAAwB;AAClH,UAAAA,YAAW,MAAM,eAAe;AAEhC,cAAI,wBAAwB,QAAW;AACnC,wBAAY,MAAK;UACrB,WAAW,OAAO,wBAAwB,UAAU;AAChD,uBAAW,CAAC,aAAa,wBAAwB,KAAK,aAAa;AAC/D,oBAAM,sBAAsB,yBAAyB,OAAO,CAAC,eAAe,WAAW,WAAW,mBAAmB;AAErH,kBAAI,oBAAoB,WAAW,GAAG;AAClC,4BAAY,OAAO,WAAW;cAClC,OAAO;AACH,4BAAY,IAAI,aAAa,mBAAmB;cACpD;YACJ;UACJ,WAAW,YAAY,IAAI,mBAAmB,GAAG;AAC7C,gBAAI,WAAW,QAAW;AACtB,0BAAY,OAAO,mBAAmB;YAC1C,OAAO;AACH,oBAAM,2BAA2B,YAAY,IAAI,mBAAmB;AAEpE,kBAAI,6BAA6B,QAAW;AACxC,sBAAM,sBAAsB,yBAAyB,OACjD,CAAC,eAAe,WAAW,WAAW,WAAW,WAAW,UAAU,SAAS,UAAU,OAAU;AAGvG,oBAAI,oBAAoB,WAAW,GAAG;AAClC,8BAAY,OAAO,mBAAmB;gBAC1C,OAAO;AACH,8BAAY,IAAI,qBAAqB,mBAAmB;gBAC5D;cACJ;YACJ;UACJ;AAEA,qBAAW,CAAC,aAAa,wBAAwB,KAAK,aAAa;AAC/D,qCAAyB,QAAQ,CAAC,eAAc;AAC5C,kBAAI,kBAAkB,WAAW,GAAG;AAChC,gCAAgB,QAAQ,aAAa,WAAW,QAAQ,WAAW,KAAK;cAC5E,OAAO;AACH,gCAAgB,QAAQ,aAAa,WAAW,MAAM;cAC1D;YACJ,CAAC;UACL;QACJ;MACJ,GAAG,gBAAgB,UAAU;IACjC;;;;;ACzEA,IA4CM,yCAuDA,kCAmBA,mCAkBA,yBAwBA,0BAiBA,qBAmBA,0BAwBA,+BA6BO;AAzPb;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAmBA,IAAM,0CAA0C,CAC5C,QACA,aACA,QACA,cACS;AACT,YAAM,EAAE,cAAc,cAAa,IAAK,yBAA4B,WAAW;AAC/E,YAAM,EAAE,QAAO,IAAK,wBAAwB,MAAM;AAClD,YAAM,iBAAiB,6BAA6B,MAAM;AAE1D,YAAM,gBAA6C,CAAC,aAAY;AAC5D,cAAM,kBAAkB,mBAAmB,MAAM;AACjD,cAAM,mBAAmB,oBAAoB,WAAW;AAExD,YAAI,UAAU;AACV,gBAAM,oBAAoB,yCAAyC,eAAe,QAAQ,MAAM;AAEhG,+CAAqC,cAAc,QAAQ,mBAAmB,KAAK;AAEnF,cAAI,CAAC,aAAa,CAAC,eAAe,MAAM,GAAG;AACvC,4BAAgB,QAAQ,kBAAkB,MAAM;UACpD;QACJ,OAAO;AACH,gBAAM,oBAAoB,wCAAwC,cAAc,QAAQ,MAAM;AAE9F,gDAAsC,eAAe,mBAAmB,KAAK;AAE7E,cAAI,CAAC,aAAa,CAAC,eAAe,MAAM,GAAG;AACvC,4BAAgB,WAAW,kBAAkB,MAAM;UACvD;QACJ;MACJ;AAEA,UACI,mBACI,SACA,CAAC,aAAa,MAAM,GACpB,CAAC,qBAAqB,iBAAiB,CAAC,MAAM,eAAe,iBAAiB,CAAC,MAAM,QACrF,IAAI,GAEV;AACE,uBAAe,IAAI,aAAa;AAEhC,YAAI,kBAAkB,MAAM,GAAG;AAC3B,+CAAqC,cAAc,QAAQ,CAAC,QAAQ,aAAa,GAAG,IAAI;QAC5F,OAAO;AACH,gDAAsC,eAAe,CAAC,QAAQ,QAAQ,aAAa,GAAG,IAAI;QAC9F;AAEA,eAAO;MACX;AAEA,aAAO;IACX;AAEA,IAAM,mCAAmC,CACrC,QACA,aACA,QACA,UAC+C;AAC/C,YAAM,EAAE,cAAc,cAAa,IAAK,wBAAwB,WAAW;AAE3E,YAAM,wBAAwB,4BAA4B,aAAa,KAAK,GAAG,QAAQ,MAAM;AAE7F,UAAI,0BAA0B,MAAM;AAChC,cAAM,yBAAyB,wCAAwC,eAAe,QAAQ,QAAQ,KAAK;AAE3G,eAAO,CAAC,uBAAuB,CAAC,GAAG,KAAK;MAC5C;AAEA,aAAO,CAAC,sBAAsB,CAAC,GAAG,IAAI;IAC1C;AAEA,IAAM,oCAAoC,CACtC,QACA,aACA,WAC+C;AAC/C,YAAM,EAAE,cAAc,cAAa,IAAK,yBAA4B,WAAW;AAE/E,YAAM,wBAAwB,4BAA4B,cAAc,QAAQ,MAAM;AAEtF,UAAI,0BAA0B,MAAM;AAChC,cAAM,yBAAyB,yCAAyC,eAAe,QAAQ,MAAM;AAErG,eAAO,CAAC,uBAAuB,CAAC,GAAG,KAAK;MAC5C;AAEA,aAAO,CAAC,sBAAsB,CAAC,GAAG,IAAI;IAC1C;AAEA,IAAM,0BAA0B,CAC5B,QACA,WACA,aACA,QACA,UACA;AACA,YAAM,CAAC,UAAU,QAAQ,IAAI,iCAAiC,QAAQ,aAAa,QAAQ,KAAK;AAEhG,UAAI,aAAa,MAAM;AACnB,uCAA+B,QAAQ,QAAQ;AAE/C,YAAI,YAAY,CAAC,aAAa,CAAC,eAAe,MAAM,GAAG;AACnD,uDAA6C,mBAAmB,MAAM,GAAG,mBAAmB,WAAW,GAAG,QAAQ,KAAK;QAC3H;MACJ;AAEA,UAAI,kBAAkB,WAAW,GAAG;AAChC,cAAM,EAAE,aAAY,IAAK,wBAAwB,WAAW;AAE5D,+CAAuC,aAAa,YAAY;MACpE;IACJ;AAEA,IAAM,2BAA2B,CAC7B,QACA,WACA,aACA,WACA;AACA,YAAM,CAAC,UAAU,QAAQ,IAAI,kCAAkC,QAAQ,aAAa,MAAM;AAE1F,UAAI,aAAa,MAAM;AACnB,uCAA+B,QAAQ,QAAQ;AAE/C,YAAI,YAAY,CAAC,aAAa,CAAC,eAAe,MAAM,GAAG;AACnD,6BAAmB,MAAM,EAAE,WAAW,oBAAoB,WAAW,GAAG,MAAM;QAClF;MACJ;IACJ;AAEA,IAAM,sBAAsB,CAAqB,QAAuB,cAAuD;AAC3H,YAAM,+BAA+B,wBAAwB,MAAM;AACnE,YAAM,eAAe,CAAA;AAErB,iBAAW,oBAAoB,6BAA6B,SAAS;AACjE,YAAI,4BAA4B,gBAAgB,GAAG;AAC/C,kCAAwB,QAAQ,WAAW,GAAG,gBAAgB;QAClE,OAAO;AACH,mCAAyB,QAAQ,WAAW,GAAG,gBAAgB;QACnE;AAEA,qBAAa,KAAK,iBAAiB,CAAC,CAAC;MACzC;AAEA,mCAA6B,QAAQ,MAAK;AAE1C,aAAO;IACX;AAEA,IAAM,2BAA2B,CAC7B,QACA,WACA,WACiC;AACjC,YAAM,+BAA+B,wBAAwB,MAAM;AACnE,YAAM,eAAe,CAAA;AAErB,iBAAW,oBAAoB,6BAA6B,SAAS;AACjE,YAAI,iBAAiB,CAAC,MAAM,QAAQ;AAChC,cAAI,4BAA4B,gBAAgB,GAAG;AAC/C,oCAAwB,QAAQ,WAAW,GAAG,gBAAgB;UAClE,OAAO;AACH,qCAAyB,QAAQ,WAAW,GAAG,gBAAgB;UACnE;AAEA,uBAAa,KAAK,iBAAiB,CAAC,CAAC;AACrC,uCAA6B,QAAQ,OAAO,gBAAgB;QAChE;MACJ;AAEA,aAAO;IACX;AAEA,IAAM,gCAAgC,CAClC,QACA,WACA,aACA,QACA,UACiC;AACjC,YAAM,+BAA+B,wBAAwB,MAAM;AAEnE,aAAO,MAAM,KAAK,6BAA6B,OAAO,EACjD,OACG,CAAC,qBACG,iBAAiB,CAAC,MAAM,gBACvB,WAAW,UAAa,iBAAiB,CAAC,MAAM,YAChD,UAAU,UAAa,iBAAiB,CAAC,MAAM,MAAM,EAE7D,IAAI,CAAC,qBAAoB;AACtB,YAAI,4BAA4B,gBAAgB,GAAG;AAC/C,kCAAwB,QAAQ,WAAW,GAAG,gBAAgB;QAClE,OAAO;AACH,mCAAyB,QAAQ,WAAW,GAAG,gBAAgB;QACnE;AAEA,qCAA6B,QAAQ,OAAO,gBAAgB;AAE5D,eAAO,iBAAiB,CAAC;MAC7B,CAAC;IACT;AAEO,IAAM,6BAA2D,CACpE,yBACA,0BACAC,kBACA,6BACAC,uBACAC,2BACAC,0BACA,uBACA,cACAC,yBACAC,mBACAC,uBACAC,oBACAC,qBACAC,8BACAC,uCACA;AACA,aAAO,MAAM,kBACDN,wBAAgC;QAOxC,YACI,SACA,UACA,iBACA,mBAA6H;AAE7H,gBAAM,eAAe;AAErB,eAAK,WAAW;AAChB,eAAK,mBAAmB;AAExB,gBAAM,gBAAgBC,kBAAiB,OAAO;AAG9C,cACIC,sBAAqB,aAAa,KAClC,SACIN,iBAAgB,sCAAsC,MAAK;AACvD,mBAAO,qCAAqC,eAAeU,kCAAiC;UAChG,CAAC,GACP;AACE,0CAA8B,eAAe;UACjD;AAEA,2BAAiB,IAAI,MAAM,eAAe;AAC1C,0BAAgB,IAAI,MAAM,oBAAI,IAAG,CAAE;AAEnC,cAAI,QAAQ,UAAU,YAAY,UAAU;AACxC,qCAAyB,IAAI;UACjC;AAEA,kCAAwB,MAAM,mBAAmB,eAAe;QACpE;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK,iBAAiB;QACjC;QAEA,IAAI,aAAa,OAAK;AAClB,eAAK,iBAAiB,eAAe;QACzC;QAEA,IAAI,mBAAgB;AAChB,iBAAO,KAAK,iBAAiB;QACjC;QAEA,IAAI,iBAAiB,OAAK;AACtB,eAAK,iBAAiB,mBAAmB;QAC7C;QAEA,IAAI,wBAAqB;AACrB,iBAAO,KAAK,iBAAiB;QACjC;QAEA,IAAI,sBAAsB,OAAK;AAC3B,eAAK,iBAAiB,wBAAwB;QAClD;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK;QAChB;QAEA,IAAI,iBAAc;AACd,iBAAO,KAAK,iBAAiB;QACjC;QAEA,IAAI,kBAAe;AACf,iBAAO,KAAK,iBAAiB;QACjC;;QAKO,QAAqD,aAA8B,SAAS,GAAG,QAAQ,GAAC;AAE3G,cAAI,SAAS,KAAK,UAAU,KAAK,iBAAiB,iBAAiB;AAC/D,kBAAMT,sBAAoB;UAC9B;AAEA,gBAAM,gBAAgBI,kBAAiB,KAAK,QAAQ;AACpD,gBAAM,YAAYI,6BAA4B,aAAa;AAE3D,cAAIF,mBAAkB,WAAW,KAAKC,oBAAmB,WAAW,GAAG;AACnE,kBAAMN,0BAAwB;UAClC;AAEA,cAAI,YAAY,WAAW,GAAG;AAC1B,kBAAM,6BAA6B,mBAAmB,WAAW;AAEjE,gBAAI;AACA,oBAAM,aAAa,wCACf,KAAK,kBACL,4BACA,QACA,KAAK;AAGT,oBAAM,YAAY,mBAAmB,IAAI;AAEzC,kBAAI,aAAa,WAAW;AACxB,qBAAK,iBAAiB,WAAW,GAAG,UAAU;cAClD;AAEA,kBAAI,KAAK,QAAQ,UAAU,YAAY,CAAC,aAAa,mBAAmB,WAAW,GAAG;AAClF,yCAAyB,WAAW;cACxC;YACJ,SAAS,KAAK;AAEV,kBAAI,IAAI,SAAS,IAAI;AACjB,sBAAMA,0BAAwB;cAClC;AAEA,oBAAM;YACV;AAEA,kBAAM,6BAA6B,yBAC/B,MACsB,aACtB,QACA,OACA,SAAS;AAIb,gBAAI,4BAA4B;AAC5B,oBAAM,SAAS,aAAa,CAAC,IAAI,GAA4B,WAAY;AAEzE,qCAAuB,QAAQ,4BAA4B,SAAS,CAAC;YACzE;AAEA,mBAAO;UACX;AAEA,gBAAM,mBAAmB,oBAAoB,WAAW;AAOxD,cAA2C,iBAAkB,SAAS,kBAAkB,iBAAiB,aAAa,MAAM;AACxH,kBAAMC,yBAAuB;UACjC;AAEA,cAAI;AACA,iBAAK,iBAAiB,QAAQ,kBAAkB,MAAM;AAEtD,gBAAI,aAAa,mBAAmB,IAAI,GAAG;AACvC,mBAAK,iBAAiB,WAAW,kBAAkB,MAAM;YAC7D;UACJ,SAAS,KAAK;AAEV,gBAAI,IAAI,SAAS,IAAI;AACjB,oBAAMD,0BAAwB;YAClC;AAEA,kBAAM;UACV;AAEA,gBAAM,8BAA8B,wCAAwC,MAAM,aAAa,QAAQ,SAAS;AAGhH,cAAI,6BAA6B;AAC7B,kBAAM,SAAS,aAAa,CAAC,IAAI,GAAG,WAAW;AAE/C,mCAAuB,QAAQ,4BAA4B,SAAS,CAAC;UACzE;QACJ;QAKO,WACH,qBACA,QACA,OAAc;AAEd,cAAI;AAEJ,gBAAM,gBAAgBG,kBAAiB,KAAK,QAAQ;AACpD,gBAAM,YAAYI,6BAA4B,aAAa;AAE3D,cAAI,wBAAwB,QAAW;AACnC,2BAAe,oBAAoB,MAAM,SAAS;UACtD,WAAW,OAAO,wBAAwB,UAAU;AAChD,gBAAI,sBAAsB,KAAK,uBAAuB,KAAK,iBAAiB;AACxE,oBAAMR,sBAAoB;YAC9B;AAEA,2BAAe,yBAAyB,MAAM,WAAW,mBAAmB;UAChF,OAAO;AACH,gBAAI,WAAW,WAAc,SAAS,KAAK,UAAU,KAAK,kBAAkB;AACxE,oBAAMA,sBAAoB;YAC9B;AAEA,gBAAI,YAAY,mBAAmB,KAAK,UAAU,WAAc,QAAQ,KAAK,SAAS,oBAAoB,iBAAiB;AACvH,oBAAMA,sBAAoB;YAC9B;AAEA,2BAAe,8BAA8B,MAAM,WAAW,qBAAqB,QAAQ,KAAK;AAEhG,gBAAI,aAAa,WAAW,GAAG;AAC3B,oBAAMC,0BAAwB;YAClC;UACJ;AAGA,qBAAW,eAAe,cAAc;AACpC,kBAAM,SAAS,aAAa,CAAC,IAAI,GAAG,WAAW;AAE/C,mCAAuB,QAAQ,qBAAqB;UACxD;QACJ;;IAER;;;;;ACzeA,IAIa;AAJb;;IAAAS;AAIO,IAAM,0BAAqD,CAC9D,0BACAC,2BACA,iBACAC,2BACAC,qCACAC,6CACAC,8CACAC,yCACAC,iCACAC,gCACAC,qCACAC,gCACAC,iCACA;AACA,aAAO,CACH,WACA,mCACA,kBACA,WAA0B,MAC1B,WAA0B,SACb;AAEb,cAAM,eAAe,iBAAiB;AACtC,cAAM,sBAAsB,IAAI,oBAAoB,YAAY;AAChE,cAAM,qBAAqB,oCAAoCT,0BAAyB,mBAAmB,IAAI;AAC/G,cAAM,aAAa;UACf,IAAI,eAAY;AACZ,mBAAO;UACX;UACA,IAAI,WAAQ;AACR,mBAAO,aAAa,OAAO,iBAAiB,WAAW;UAC3D;UACA,IAAI,WAAQ;AACR,mBAAO,aAAa,OAAO,iBAAiB,WAAW;UAC3D;UACA,IAAI,QAAK;AACL,mBAAO,iBAAiB;UAC5B;UACA,IAAI,MAAM,OAAK;AACX,6BAAiB,QAAQ;AAGzB,uBAAW,eAAe,OAAO,UAAU,QAAQ,WAAW;UAClE;UACA,oBAAoB,YAAkB;AAElC,gBAAI,OAAO,iBAAiB,wBAAwB,YAAY;AAC5D,kBAAI,uBAAuB,MAAM;AAC7B,oCAAoB,MAAM,UAAU,QAAQ,WAAW;cAC3D;AAEA,kCAAoB,IAAIC,oCAAmC,UAAU,CAAC;AACtE,+BAAiB,oBAAoB,UAAU;YACnD,OAAO;AACH,oBAAM,oBAAoB,MAAM,KAAK,mBAAmB,EAAE,IAAG;AAE7D,kBAAI,uBAAuB,MAAM;AAC7B,oCAAoB,MAAM,UAAU,QAAQ,WAAW;cAC3D;AAEA,kCAAoB,IAAIA,oCAAmC,UAAU,CAAC;AAEtE,oBAAM,mBAAmB,MAAM,KAAK,mBAAmB,EAAE,IAAG;AAE5D,+BAAiB,sBAAsB,UAAU;AAEjD,kBAAI,sBAAsB,oBAAoB,qBAAqB,QAAW;AAC1E,oBAAI,iBAAiB,SAAS,0BAA0B;AACpD,mCAAiB,6BAA6B,iBAAiB,OAAO,iBAAiB,OAAO;gBAClG,WAAW,iBAAiB,SAAS,qBAAqB;AACtD,mCAAiB,wBAAwB,iBAAiB,OAAO,iBAAiB,OAAO;gBAC7F,WAAW,iBAAiB,SAAS,YAAY;AAC7C,mCAAiB,eAAe,iBAAiB,OAAO,iBAAiB,SAAS;gBACtF,WAAW,iBAAiB,SAAS,iBAAiB;AAClD,mCAAiB,oBACb,iBAAiB,QACjB,iBAAiB,WACjB,iBAAiB,QAAQ;gBAEjC;cACJ;YACJ;AAEA,mBAAO;UACX;UACA,sBAAsB,YAAkB;AACpC,gBAAI,uBAAuB,MAAM;AAC7B,kCAAoB,MAAM,UAAU,QAAQ,WAAW;YAC3D;AAEA,gCAAoB,IAAIC,4CAA2C,UAAU,CAAC;AAC9E,6BAAiB,sBAAsB,UAAU;AAEjD,mBAAO;UACX;UACA,6BAA6B,OAAe,SAAe;AAEvD,gBAAI,UAAU,GAAG;AACb,oBAAM,IAAI,WAAU;YACxB;AAGA,gBAAI,CAAC,OAAO,SAAS,OAAO,KAAK,UAAU,GAAG;AAC1C,oBAAM,IAAI,WAAU;YACxB;AAEA,kBAAM,cAAc,UAAU,QAAQ;AAEtC,gBAAI,uBAAuB,MAAM;AAC7B,kCAAoB,MAAM,WAAW;YACzC;AAGA,gBAAI,MAAM,KAAK,mBAAmB,EAAE,WAAW,GAAG;AAC9C,kCAAoB,IAAII,+BAA8B,cAAc,WAAW,CAAC;AAChF,+BAAiB,eAAe,cAAc,WAAW;YAC7D;AAEA,gCAAoB,IAAIH,6CAA4C,OAAO,OAAO,CAAC;AACnF,6BAAiB,6BAA6B,OAAO,OAAO;AAE5D,mBAAO;UACX;UACA,wBAAwB,OAAe,SAAe;AAClD,kBAAM,cAAc,UAAU,QAAQ;AAEtC,gBAAI,uBAAuB,MAAM;AAC7B,kCAAoB,MAAM,WAAW;YACzC;AAGA,gBAAI,MAAM,KAAK,mBAAmB,EAAE,WAAW,GAAG;AAC9C,kCAAoB,IAAIG,+BAA8B,cAAc,WAAW,CAAC;AAChF,+BAAiB,eAAe,cAAc,WAAW;YAC7D;AAEA,gCAAoB,IAAIF,wCAAuC,OAAO,OAAO,CAAC;AAC9E,6BAAiB,wBAAwB,OAAO,OAAO;AAEvD,mBAAO;UACX;UACA,gBAAgB,QAAgB,WAAmB,cAAoB;AACnE,gBAAI,uBAAuB,MAAM;AAC7B,kCAAoB,MAAM,UAAU,QAAQ,WAAW;YAC3D;AAEA,gCAAoB,IAAIC,gCAA+B,QAAQ,WAAW,YAAY,CAAC;AACvF,6BAAiB,gBAAgB,QAAQ,WAAW,YAAY;AAEhE,mBAAO;UACX;UACA,eAAe,OAAe,WAAiB;AAC3C,gBAAI,uBAAuB,MAAM;AAC7B,kCAAoB,MAAM,UAAU,QAAQ,WAAW;YAC3D;AAEA,gCAAoB,IAAIC,+BAA8B,OAAO,SAAS,CAAC;AACvE,6BAAiB,eAAe,OAAO,SAAS;AAEhD,mBAAO;UACX;UACA,oBAAoB,QAA0B,WAAmBI,WAAgB;AAE7E,kBAAM,kBAAkB,kBAAkB,eAAe,SAAS,IAAI,aAAa,MAAM;AAMzF,gBAAIF,mCAAkC,QAAQA,+BAA8B,SAAS,sBAAsB;AACvG,oBAAM,UAAU,YAAYE;AAC5B,oBAAM,aAAa,UAAU,QAAQ;AACrC,oBAAM,cAAc,KAAK,KAAK,YAAY,UAAU;AACpD,oBAAM,aAAa,KAAK,MAAM,UAAU,UAAU;AAClD,oBAAM,6BAA6B,aAAa;AAChD,oBAAM,qBAAqB,IAAI,aAAa,0BAA0B;AAEtE,uBAAS,IAAI,GAAG,IAAI,4BAA4B,KAAK,GAAG;AACpD,sBAAM,kBAAmB,gBAAgB,SAAS,KAAKA,cAAc,cAAc,KAAK,aAAa;AACrG,sBAAM,aAAa,KAAK,MAAM,cAAc;AAC5C,sBAAM,aAAa,KAAK,KAAK,cAAc;AAE3C,mCAAmB,CAAC,IAChB,eAAe,aACT,gBAAgB,UAAU,KACzB,KAAK,iBAAiB,eAAe,gBAAgB,UAAU,KAC/D,KAAK,aAAa,mBAAmB,gBAAgB,UAAU;cAC9E;AAEA,kBAAI,uBAAuB,MAAM;AAC7B,oCAAoB,MAAM,UAAU,QAAQ,WAAW;cAC3D;AAEA,kCAAoB,IAAIH,oCAAmC,oBAAoB,WAAWG,SAAQ,CAAC;AACnG,+BAAiB,oBAAoB,oBAAoB,WAAWA,SAAQ;AAE5E,oBAAM,mBAAmB,aAAa;AAEtC,kBAAI,mBAAmB,SAAS;AAC5B,gBAAAD,6BAA4B,YAAY,mBAAmB,mBAAmB,SAAS,CAAC,GAAG,gBAAgB;cAC/G;AAEA,cAAAA,6BAA4B,YAAY,gBAAgB,gBAAgB,SAAS,CAAC,GAAG,OAAO;YAChG,OAAO;AACH,kBAAI,uBAAuB,MAAM;AAC7B,oCAAoB,MAAM,UAAU,QAAQ,WAAW;cAC3D;AAEA,kCAAoB,IAAIF,oCAAmC,iBAAiB,WAAWG,SAAQ,CAAC;AAChG,+BAAiB,oBAAoB,iBAAiB,WAAWA,SAAQ;YAC7E;AAEA,mBAAO;UACX;;AAGJ,wBAAgB,IAAI,YAAY,gBAAgB;AAChD,QAAAX,0BAAyB,IAAI,YAAY,SAAS;AAElD,iCACI,YAC2F,kBAAkB;AAGjH,eAAO;MACX;IACJ;;;;;ACrOA,IAAa;AAAb;;AAAO,IAAM,2BAAuD,CAAC,wBAAuB;AACxF,aAAO;QACH,OAAO,YAA6B;AAChC,qBAAW,mBAAmB,qBAAqB;AAC/C,gBAAI,gBAAgB,SAAS,0BAA0B;AACnD,oBAAM,EAAE,SAAS,MAAK,IAAK;AAE3B,yBAAW,6BAA6B,OAAO,OAAO;YAC1D,WAAW,gBAAgB,SAAS,qBAAqB;AACrD,oBAAM,EAAE,SAAS,MAAK,IAAK;AAE3B,yBAAW,wBAAwB,OAAO,OAAO;YACrD,WAAW,gBAAgB,SAAS,aAAa;AAC7C,oBAAM,EAAE,WAAW,QAAQ,aAAY,IAAK;AAE5C,yBAAW,gBAAgB,QAAQ,WAAW,YAAY;YAC9D,WAAW,gBAAgB,SAAS,YAAY;AAC5C,oBAAM,EAAE,WAAW,MAAK,IAAK;AAE7B,yBAAW,eAAe,OAAO,SAAS;YAC9C,WAAW,gBAAgB,SAAS,iBAAiB;AACjD,oBAAM,EAAE,UAAAY,WAAU,WAAW,OAAM,IAAK;AAExC,yBAAW,oBAAoB,QAAQ,WAAWA,SAAQ;YAC9D,OAAO;AACH,oBAAM,IAAI,MAAM,oCAAoC;YACxD;UACJ;QACJ;;IAER;;;;;AC9BA,IAAa;AAAb;;AAAM,IAAO,cAAP,MAAkB;MAGpB,YAAY,YAAoB;AAC5B,aAAK,OAAO,IAAI,IAAI,UAAU;MAClC;MAEA,IAAI,OAAI;AACJ,eAAO,KAAK,KAAK;MACrB;MAEO,UAAO;AACV,eAAO,KAAK,KAAK,QAAO;MAC5B;MAEO,QAAQ,UAAoE,UAAe,MAAI;AAClG,eAAO,KAAK,KAAK,QAAQ,CAAC,OAAU,QAAW,SAAS,KAAK,SAAS,OAAO,KAAK,IAAI,CAAC;MAC3F;MAEO,IAAI,MAAO;AACd,eAAO,KAAK,KAAK,IAAI,IAAI;MAC7B;MAEO,IAAI,MAAO;AACd,eAAO,KAAK,KAAK,IAAI,IAAI;MAC7B;MAEO,OAAI;AACP,eAAO,KAAK,KAAK,KAAI;MACzB;MAEO,SAAM;AACT,eAAO,KAAK,KAAK,OAAM;MAC3B;;;;;;ACnCJ,IAuBMC,kBAWO;AAlCb;;;AAWA;AAYA,IAAMA,mBAAkB;MACpB,cAAc;;MAEd,kBAAkB;MAClB,uBAAuB;MACvB,gBAAgB;MAChB,iBAAiB;MACjB,eAAe,CAAA;MACf,kBAAkB,CAAA;;AAGf,IAAM,oCAAyE,CAClFC,gCACAC,uBACAC,mBACAC,iCACAC,+BACAC,0BACAC,+BACAC,mBACAC,8BACAC,oCACAC,kCACAC,kCACAC,yCACAC,uBACA;AACA,aAAO,MAAM,yBACDZ,sBAAkD;QAS1D,YAAY,SAAY,MAAc,SAA2C;;AAC7E,gBAAM,gBAAgBM,kBAAiB,OAAO;AAC9C,gBAAM,YAAYC,6BAA4B,aAAa;AAC3D,gBAAM,gBAAgBE,iCAAgC,EAAE,GAAGX,kBAAiB,GAAG,QAAO,CAAE;AAGxF,UAAAa,wCAAuC,aAAa;AAEpD,gBAAM,oCAAoC,wCAAwC,IAAI,aAAa;AACnG,gBAAM,uBAAuB,sCAAiC,QAAjC,sCAAiC,SAAA,SAAjC,kCAAmC,IAAI,IAAI;AAExE,gBAAM,2CACF,aAAa,cAAc,UAAU,WAC/B,iBACAE,OAAAR,8BAAkD,aAAa,OAAC,QAAAQ,SAAA,SAAAA,OAAI;AAC9E,gBAAM,yBAAyBV,8BAC3B,0CACA,YAAY,OAAoC,QAAU,aAC1DK,oCACA,MACA,sBACA,aAAa;AAEjB,gBAAM,2BACD,YAAYN,gCAA+B,MAAM,eAAe,oBAAoB,IAAI;AAO7F,gBAAM,SAAS,MAAM,wBAAwB,wBAAwB;AAErE,gBAAM,aAAsC,CAAA;AAE5C,iCAAuB,WAAW,QAAQ,CAAC,kBAAkB,OAAM;AAC/D,kBAAM,aAAaD,kBAAiB,MAAM,WAAW,gBAAgB;AAErE,uBAAW,KAAK,CAAC,IAAI,UAAU,CAAC;UACpC,CAAC;AAED,eAAK,0BAA0B;AAC/B,eAAK,oBAAoB;AACzB,eAAK,cAAc,IAAI,YAAY,UAAU;AAM7C,cAAI,WAAW;AACX,YAAAF,+BAA8B,eAAsF,IAAI;UAC5H;AAEA,gBAAM,EAAE,aAAY,IAAKK,yBAAwB,IAAI;AAErD,UAAAM,iCAAgC,wBAAwB,YAAY;QACxE;QAEA,IAAI,mBAAgB;AAChB,iBAAO,KAAK;QAChB;QAEA,IAAI,iBAAiB,OAAK;AACtB,gBAAM,kBAAkB,OAAO,UAAU,aAAaE,mBAAkB,MAA0C,KAAK,IAAI;AAE3H,eAAK,wBAAwB,mBAAmB;AAEhD,gBAAM,yBAAyB,KAAK,wBAAwB;AAE5D,eAAK,oBACD,2BAA2B,QAAQ,2BAA2B,kBACxD,QACiC;QAC/C;QAEA,IAAI,aAAU;AACV,cAAI,KAAK,gBAAgB,MAAM;AAE3B,mBAAgD,KAAK,wBAAwB;UACjF;AAEA,iBAAO,KAAK;QAChB;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK,wBAAwB;QACxC;;IAER;;;;;ACpIM,SAAU,gBACZ,aAEA,QACA,KACA,eACA,cAAoB;AAEpB,MAAI,OAAO,YAAY,oBAAoB,YAAY;AAEnD,QAAI,OAAO,GAAG,EAAE,eAAe,GAAG;AAC9B,aAAO,GAAG,IAAI,IAAI,aAAa,GAAG;IACtC;AAEA,gBAAY,gBAAgB,OAAO,GAAG,GAAG,eAAe,YAAY;EAGxE,OAAO;AACH,UAAM,cAAc,YAAY,eAAe,aAAa;AAG5D,QAAI,OAAO,GAAG,EAAE,eAAe,GAAG;AAC9B,aAAO,GAAG,IAAI,YAAY,MAAM,cAAc,eAAe,GAAG;IACpE,OAAO;AACH,YAAM,cAAc,IAAI,aAAa,YAAY,QAAQ,eAAe,aAAa,mBAAmB,GAAG;AAE3G,aAAO,GAAG,EAAE,IAAI,WAAW;IAC/B;EACJ;AACJ;AA7BA;;;;;;ACdA,IAAa;AAAb;;AAAO,IAAM,gBAAgB,CACzB,aACA,QACA,KACA,eACA,iBACM;AACN,UAAI,OAAO,YAAY,kBAAkB,YAAY;AAEjD,YAAI,OAAO,GAAG,EAAE,eAAe,GAAG;AAC9B,sBAAY,cAAc,OAAO,GAAG,GAAG,eAAe,YAAY;QACtE;MAGJ,OAAO;AAEH,YAAI,OAAO,GAAG,EAAE,eAAe,GAAG;AAC9B,sBAAY,eAAe,aAAa,EAAE,IAAI,OAAO,GAAG,GAAG,YAAY;QAC3E;MACJ;IACJ;;;;;ACtBA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAC,GAAW,MAA0C;AACpF,YAAM,SAA2B,CAAA;AAEjC,eAAS,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAC3B,cAAME,SAAQ,CAAA;AAEd,cAAM,SAAS,OAAO,MAAM,WAAW,IAAI,EAAE,CAAC;AAE9C,iBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,UAAAA,OAAM,KAAK,IAAI,aAAa,GAAG,CAAC;QACpC;AAEA,eAAO,KAAKA,MAAK;MACrB;AAEA,aAAO;IACX;;;;;AChBA,IAMa;AANb;;;AAGA;AACA;AAEO,IAAM,2BAA2B,CACpC,2BACA,UACiC;AACjC,YAAM,qBAAqB,eAAe,wBAAwB,yBAAyB;AAC3F,YAAM,yBAAyB,mBAA+C,KAAK;AAEnF,aAAO,eAAe,oBAAoB,sBAAsB;IACpE;;;;;ACdA,IA2BM,eAoGO;AA/Hb;;;AACA;AACA;AACA;AACA;AACA;AAsBA,IAAM,gBAAgB,OAClB,OACA,gBACA,2BACA,SACA,oBACA,sBACAC,sCACoC;AAGpC,YAAM,SAAS,mBAAmB,OAAO,KAAK,KAAK,MAAM,QAAQ,SAAS,GAAG,IAAI,MAAM,eAAe;AACtG,YAAM,wBAAwB,QAAQ,eAAe,QAAQ;AAC7D,YAAM,yBAAyB,mBAAmB,OAAO,CAAC,KAAK,UAAU,MAAM,OAAO,CAAC;AACvF,YAAM,kBACF,2BAA2B,IACrB,OACA,0BAA0B,aAAa,wBAAwB,QAAQ,0BAA0B,UAAU;AAErH,UAAI,yBAAyB,QAAW;AACpC,cAAM,IAAI,MAAM,oCAAoC;MACxD;AAEA,YAAM,uBAAuB,wBAAwB,KAAK;AAC1D,YAAM,wBAAwB,MAAM,yBAAyB,2BAA2B,KAAK;AAC7F,YAAM,SAAS,mBAAmB,QAAQ,gBAAgB,QAAQ,YAAY;AAC9E,YAAM,UAAU,mBAAmB,QAAQ,iBAAiB,kBAAkB;AAC9E,YAAM,aAA+C,MAAM,KAAK,MAAM,WAAW,KAAI,CAAE,EAAE,OACrF,CAAC,QAAQ,UAAU,EAAE,GAAG,QAAQ,CAAC,IAAI,GAAG,IAAI,aAAa,GAAG,EAAC,IAC7D,CAAA,CAAE;AAGN,eAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,KAAK;AAClC,YAAI,QAAQ,iBAAiB,KAAK,mBAAmB,MAAM;AACvD,mBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,qBAAS,IAAI,GAAG,IAAI,QAAQ,cAAc,KAAK,GAAG;AAC9C,8BAAgB,gBAAgB,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;YACtD;UACJ;QACJ;AAEA,YAAI,qBAAqB,yBAAyB,UAAa,mBAAmB,MAAM;AACpF,+BAAqB,qBAAqB,QAAQ,CAAC,EAAE,KAAI,GAAI,UAAS;AAClE,4BAAgB,gBAAgB,YAAY,MAAM,wBAAwB,OAAO,CAAC;UACtF,CAAC;QACL;AAEA,iBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,mBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAE/C,gBAAI,QAAQ,CAAC,EAAE,CAAC,EAAE,eAAe,GAAG;AAChC,sBAAQ,CAAC,EAAE,CAAC,IAAI,IAAI,aAAa,GAAG;YACxC;UACJ;QACJ;AAEA,YAAI;AACA,gBAAM,yBAAyB,OAAO,IAAI,CAAC,OAAO,UAAS;AACvD,gBAAI,qBAAqB,aAAa,KAAK,EAAE,SAAS,GAAG;AACrD,qBAAO,CAAA;YACX;AAEA,mBAAO;UACX,CAAC;AACD,gBAAM,mBAAmBA,kCACrB,IAAI,0BAA0B,YAC9B,0BAA0B,YAC1B,MAAM,sBAAsB,QAAQ,wBAAwB,SAAS,UAAU,CAAC;AAGpF,cAAI,oBAAoB,MAAM;AAC1B,qBAAS,IAAI,GAAG,kCAAkC,GAAG,IAAI,QAAQ,iBAAiB,KAAK,GAAG;AACtF,uBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAC/C,8BAAc,iBAAiB,QAAQ,CAAC,GAAG,GAAG,kCAAkC,GAAG,CAAC;cACxF;AAEA,iDAAmC,mBAAmB,CAAC;YAC3D;UACJ;AAEA,cAAI,CAAC,kBAAkB;AACnB;UACJ;QACJ,SAAS,OAAO;AACZ,gBAAM,cACF,IAAI,WAAW,kBAAkB;YAC7B,OAAO,MAAM;YACb,UAAU,MAAM;YAChB,QAAQ,MAAM;YACd,SAAS,MAAM;WAClB,CAAC;AAGN;QACJ;MACJ;AAEA,aAAO;IACX;AAEO,IAAM,wCAAiF,CAC1FC,oBACAC,yBACAC,oCACAC,gCACAC,kCACAC,iCACAC,uBACAC,mCACAC,4BACAT,mCACAU,qBACAC,oCACAC,uCACAC,mBACAC,0BACAC,qCACA;AACA,aAAO,CACH,MACA,SACA,yBACA;AACA,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,YAAI,yBAAoE;AAExE,cAAM,kBAAkB,OAAO,OAA6B,8BAAyD;AACjH,cAAI,yBAAyBL,oBAA+C,KAAK;AACjF,cAAI,oBAAsG;AAE1G,gBAAM,yCAAyC,iBAAiB,wBAAwB,yBAAyB;AACjH,gBAAM,qBAAqB,MAAM,QAAQ,QAAQ,kBAAkB,IAC7D,QAAQ,qBACR,MAAM,KAAK,QAAQ,kBAAkB;AAG3C,cAAIC,uCAAsC,MAAM;AAC5C,kBAAM,yBAAyB,mBAAmB,OAAO,CAAC,KAAK,UAAU,MAAM,OAAO,CAAC;AACvF,kBAAM,4BAA4BN,iCAAgC,2BAA2B;cACzF,cAAc,KAAK,IAAI,GAAG,sBAAsB;cAChD,kBAAkB;cAClB,uBAAuB;cACvB,iBAAiB,KAAK,IAAI,GAAG,sBAAsB;aACtD;AACD,kBAAM,2BAAuD,CAAA;AAE7D,qBAAS,IAAI,GAAG,IAAI,MAAM,iBAAiB,KAAK,GAAG;AAC/C,uCAAyB,KACrBD,+BAA8B,2BAA2B;gBACrD,cAAc;gBACd,kBAAkB;gBAClB,uBAAuB;gBACvB,gBAAgB,mBAAmB,CAAC;eACvC,CAAC;YAEV;AAEA,kBAAM,iBAAiBG,sBAAqB,2BAA2B;cACnE,cAAc,QAAQ;cACtB,kBAAkB,QAAQ;cAC1B,uBAAuB,QAAQ;cAC/B,MAAM;aACT;AAED,2BAAe,UAAuCL,wBAAuB,KAAK,MAAM,wBAAwB;AAChH,2BAAe,aAA6CO,2BAA0B,KAAK,MAAM,wBAAwB;AAEzH,gCAAoB,CAAC,2BAA2B,0BAA0B,cAAc;UAC5F,WAAW,CAAC,wCAAwC;AAChD,qCAAyB,IAAIE,mCAAkC,2BAA2B,IAAI;UAClG;AAEA,mCAAyB,IACrB,2BACA,sBAAsB,OAAO,yBAAyB,kBAAkB,CAAC,CAAC;AAG9E,cAAI,sBAAsB,MAAM;AAC5B,gBAAI,2BAA2B,MAAM;AACjC,kBAAI,yBAAyB,QAAW;AACpC,sBAAM,IAAI,MAAM,oCAAoC;cACxD;AAEA,kBAAIC,0CAAyC,MAAM;AAC/C,sBAAM,IAAI,MAAM,qDAAqD;cACzE;AAGA,oBAAM,wBAAwB,MAAM,eAAe,MAAM;AACzD,oBAAM,qBACF,qBAAqB,yBAAyB,SAAY,IAAI,qBAAqB,qBAAqB;AAC5G,oBAAM,mBAAmB,wBAAwB;AAEjD,oBAAM,eAAe,YAAW;AAC5B,sBAAM,6BAA6B,IAAIA;kBACnC;;;kBAGA,KAAK,KAAK,MAAM,QAAQ,SAAS,GAAG,IAAI;kBACxC,0BAA0B;gBAAU;AAExC,sBAAM,YAA+B,CAAA;AACrC,sBAAM,4BAA4B,CAAA;AAElC,yBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,4BAAU,KACNL,sBAAqB,4BAA4B;oBAC7C,cAAc,QAAQ;oBACtB,kBAAkB,QAAQ;oBAC1B,uBAAuB,QAAQ;oBAC/B,MAAM;mBACT,CAAC;AAEN,4CAA0B,KACtBF,iCAAgC,4BAA4B;oBACxD,cAAc,QAAQ;oBACtB,kBAAkB;oBAClB,uBAAuB;oBACvB,iBAAiB,QAAQ;mBAC5B,CAAC;gBAEV;AAEA,sBAAM,sBAAsB,MAAM,QAAQ,IACtC,MAAM,KAAK,MAAM,WAAW,OAAM,CAAE,EAAE,IAAI,OAAO,eAAc;AAC3D,wBAAM,qBAAqBC,gCAA+B,4BAA4B;oBAClF,cAAc;oBACd,kBAAkB;oBAClB,uBAAuB;oBACvB,QAAQ,WAAW;mBACtB;AAED,wBAAMO,kBAAiB,4BAA4B,YAAY,mBAAmB,MAAM;AAExF,yBAAO;gBACX,CAAC,CAAC;AAGN,sBAAM,yBAAyBT,+BAA8B,4BAA4B;kBACrF,cAAc;kBACd,kBAAkB;kBAClB,uBAAuB;kBACvB,gBAAgB,KAAK,IAAI,GAAG,wBAAwB,kBAAkB;iBACzE;AAED,yBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,4BAAU,CAAC,EAAE,QAAQ,0BAA0B,CAAC,CAAC;AAEjD,2BAAS,IAAI,GAAG,IAAI,QAAQ,cAAc,KAAK,GAAG;AAC9C,8CAA0B,CAAC,EAAE,QAAQ,wBAAwB,GAAG,IAAI,QAAQ,eAAe,CAAC;kBAChG;gBACJ;AAEA,2BAAW,CAAC,OAAO,kBAAkB,KAAK,oBAAoB,QAAO,GAAI;AACrE,qCAAmB,QAAQ,wBAAwB,GAAG,wBAAwB,KAAK;AACnF,qCAAmB,MAAM,CAAC;gBAC9B;AAEA,uCAAuB,QAAQ,2BAA2B,WAAW;AAErE,sBAAM,QAAQ,IACV,UAAU,IAAI,CAAC,aAAaU,yBAAwB,OAAO,4BAA4B,QAAQ,CAAC,CAAC;AAGrG,uBAAOC,iCAAgC,0BAA0B;cACrE;AAEA,uCAAyB,cACrB,OACA,qBAAqB,IAAI,OAAO,MAAM,aAAY,GAClD,2BACA,SACA,oBACA,sBACAf,iCAAgC;YAExC;AAEA,kBAAM,kBAAkB,MAAM;AAC9B,kBAAM,wBAAwBG,mCAAkC,2BAA2B;cACvF,QAAQ;cACR,cAAc;cACd,kBAAkB;cAClB,uBAAuB;cACvB,MAAM;cACN,SAAS;cACT,WAAW;cACX,cAAc;aACjB;AACD,kBAAM,CAAC,2BAA2B,0BAA0B,cAAc,IAAI;AAE9E,gBAAI,oBAAoB,MAAM;AAC1B,oCAAsB,SAAS;AAC/B,oCAAsB,MAAM,CAAC;YACjC;AAEA,kCAAsB,QAAQ,yBAAyB;AAEvD,qBAAS,IAAI,GAAG,kCAAkC,GAAG,IAAI,MAAM,iBAAiB,KAAK,GAAG;AACpF,oBAAM,0BAA0B,yBAAyB,CAAC;AAE1D,uBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAC/C,0CAA0B,QAAQ,yBAAyB,kCAAkC,GAAG,CAAC;cACrG;AAEA,iDAAmC,mBAAmB,CAAC;YAC3D;AAEA,mBAAO;UACX;AAEA,cAAI,CAAC,wCAAwC;AACzC,uBAAW,CAAC,IAAI,UAAU,KAAK,MAAM,WAAW,QAAO,GAAI;AACvD,oBAAMU;gBACF;gBACA;;gBAE6D,uBAAuB,WAAY,IAAI,EAAE;cAAC;YAE/G;UACJ,OAAO;AACH,uBAAW,CAAC,IAAI,UAAU,KAAK,MAAM,WAAW,QAAO,GAAI;AACvD,oBAAMZ;gBACF;gBACA;;gBAE6D,uBAAuB,WAAY,IAAI,EAAE;cAAC;YAE/G;UACJ;AAEA,gBAAMa,yBAAwB,OAAO,2BAA2B,sBAAsB;AAEtF,iBAAO;QACX;AAEA,eAAO;UACH,OACI,OACA,2BAAqD;AAErD,YAAAN,kCAAiC,2BAA2B,KAAK;AAEjE,kBAAM,2CAA2C,yBAAyB,IAAI,yBAAyB;AAEvG,gBAAI,6CAA6C,QAAW;AACxD,qBAAO,QAAQ,QAAQ,wCAAwC;YACnE;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;ACrWA,IAAa;AAAb;;AAAO,IAAM,oCAAyE,CAClFQ,wBACAC,0BACAC,yBACAC,mCACAC,8BACAC,+BACAC,iCACAC,gCACAC,2BACAC,kBACAC,uBACAC,oCACAC,sBACAC,2BACAC,qCACAC,4BACAC,wBACAC,0BACAC,8BACAC,+BACA;AACA,aAAO,MAAM,yBAA6CL,oCAAqC;QAG3F,YAAoB,gBAAgC,kBAAwB;AACxE,gBAAM,gBAAgB,gBAAgB;AADtB,eAAA,iBAAA;AAGhB,eAAK,gBACDd,2BAA0B,SACpB,SACA;YACI,WAAW,CAAC,WAAmB,YAA6B;AACxD,qBAAOA,uBAAmC,MAAO,WAAW,OAAO;YACvE;;QAElB;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK;QAChB;QAEO,iBAAc;AACjB,iBAAO,IAAIC,yBAAqC,IAAK;QACzD;QAEO,qBAAkB;AACrB,iBAAO,IAAIG,6BAAyC,IAAK;QAC7D;QAEO,aAAa,kBAA0B,QAAgB,YAAkB;AAC5E,iBAAO,IAAIF,wBAAuB,EAAE,QAAQ,kBAAkB,WAAU,CAAE;QAC9E;QAEO,qBAAkB;AACrB,iBAAO,IAAIC,kCAA8C,IAAK;QAClE;QAEO,oBAAoB,iBAAiB,GAAC;AACzC,iBAAO,IAAIE,8BAA0C,MAAO,EAAE,eAAc,CAAE;QAClF;QAEO,sBAAsB,kBAAkB,GAAC;AAC5C,iBAAO,IAAIC,gCAA4C,MAAO,EAAE,gBAAe,CAAE;QACrF;QAEO,uBAAoB;AACvB,iBAAO,IAAIC,+BAA2C,IAAK;QAC/D;QAEO,kBAAe;AAClB,iBAAO,IAAIC,0BAAsC,IAAK;QAC1D;QAEO,YAAY,eAAe,GAAC;AAC/B,iBAAO,IAAIE,sBAAkC,MAAO,EAAE,aAAY,CAAE;QACxE;QAEO,2BAAwB;AAC3B,iBAAO,IAAIC,mCAA+C,IAAK;QACnE;QAEO,aAAU;AACb,iBAAO,IAAIC,qBAAiC,IAAK;QACrD;QAEO,gBAAgB,aAA+B,UAA0B;AAC5E,iBAAO,IAAIC,0BAAsC,MAAO,EAAE,UAAU,YAAW,CAAE;QACrF;QAEO,mBAAgB;AACnB,iBAAO,IAAIE,2BAAuC,IAAK;QAC3D;QAEO,eAAY;AACf,iBAAO,IAAIC,uBAAmC,IAAK;QACvD;QAEO,mBACH,MACA,MACA,cAAiD,EAAE,sBAAsB,MAAK,GAAE;AAEhF,iBAAO,IAAIC,yBAAqC,MAAO,EAAE,GAAG,aAAa,MAAM,KAAI,CAAE;QACzF;QAEO,qBAAkB;AACrB,iBAAO,IAAIC,6BAAyC,IAAK;QAC7D;QAEO,mBAAgB;AACnB,iBAAO,IAAIC,2BAAuC,IAAK;QAC3D;QAEO,gBACH,WACA,iBACA,eAAoC;AAEpC,iBAAOV,iBAAgB,KAAK,gBAAgB,SAAS,EAAE,KACnD,CAAC,gBAAe;AACZ,gBAAI,OAAO,oBAAoB,YAAY;AACvC,8BAAgB,WAAW;YAC/B;AAEA,mBAAO;UACX,GACA,CAAC,QAAO;AACJ,gBAAI,OAAO,kBAAkB,YAAY;AACrC,4BAAc,GAAG;YACrB;AAEA,kBAAM;UACV,CAAC;QAET;;IAER;;;;;ACjKA,IAIMW,kBAWO;AAfb;;;AAIA,IAAMA,mBAAkB;MACpB,GAAG;MACH,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,QAAQ;MACR,WAAW;MACX,MAAM;MACN,MAAM;;AAGH,IAAM,oCAAyE,CAClFC,uBACAC,mBACAC,iCACAC,2BACAC,+BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,yBAA6CP,sBAAuB;QAW7E,YAAY,SAAY,SAAuC;AAC3D,gBAAM,gBAAgBK,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGN,kBAAiB,GAAG,QAAO;AACtD,gBAAM,yBAAyBK,8BAA6B,eAAe,aAAa;AACxF,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,2BAAyD,YAAYJ,gCAA8B,IAAK;AAE9G,gBAAM,SAAS,OAAO,wBAAwB,wBAAwB;AAGtE,eAAK,KAAKD,kBAAiB,MAAM,WAAW,uBAAuB,GAAG,4BAA4B,0BAA0B;AAE5H,eAAK,UAAUA,kBACX,MACA,WACA,uBAAuB,QACvB,OAAO,KAAK,KAAK,0BAA0B,GAC3C,QAAQ,KAAK,KAAK,0BAA0B,CAAC;AAGjD,eAAK,aAAaA,kBAAiB,MAAM,WAAW,uBAAuB,WAAW,QAAQ,aAAa,GAAG,CAAC;AAE/G,eAAK,QAAQA,kBACT,MACA,WACA,uBAAuB,MACvB,KAAK,KAAK,MAAM,0BAA0B,GAC1C,0BAA0B;AAE9B,eAAK,0BAA0B;AAG/B,UAAAM,sBAAqB,MAAM,CAAC;QAChC;QAEA,IAAI,SAAM;AACN,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK;QAChB;QAEA,IAAI,IAAC;AACD,iBAAO,KAAK;QAChB;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK,wBAAwB;QACxC;QAEA,IAAI,KAAK,OAAK;AACV,eAAK,wBAAwB,OAAO;QACxC;QAEO,qBAAqB,aAA2B,aAA2B,eAA2B;AAEzG,cAAI;AACA,iBAAK,wBAAwB,qBAAqB,aAAa,aAAa,aAAa;UAC7F,SAAS,KAAK;AACV,gBAAI,IAAI,SAAS,IAAI;AACjB,oBAAMJ,0BAAwB;YAClC;AAEA,kBAAM;UACV;AAGA,cAAI,YAAY,WAAW,YAAY,UAAU,YAAY,WAAW,cAAc,QAAQ;AAC1F,kBAAMA,0BAAwB;UAClC;QACJ;;IAER;;;;;ACjHA,IAIa;AAJb;;;AAIO,IAAM,wCAAiF,CAC1FK,oBACAC,+BACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,kCAAkC,oBAAI,QAAO;AAEnD,cAAM,yBAAyB,OAAO,OAA6B,8BAAyD;AACxH,cAAI,yBAAyBF,oBAA+C,KAAK;AAMjF,gBAAM,yCAAyC,iBAAiB,wBAAwB,yBAAyB;AAEjH,cAAI,CAAC,wCAAwC;AACzC,kBAAM,UAAU;cACZ,GAAG,uBAAuB,EAAE;cAC5B,cAAc,uBAAuB;cACrC,kBAAkB,uBAAuB;cACzC,uBAAuB,uBAAuB;cAC9C,QAAQ,uBAAuB,OAAO;cACtC,WAAW,uBAAuB,UAAU;cAC5C,MAAM,uBAAuB,KAAK;cAClC,MAAM,uBAAuB;;AAGjC,qCAAyBD,8BAA6B,2BAA2B,OAAO;UAC5F;AAEA,0CAAgC,IAAI,2BAA2B,sBAAsB;AAErF,cAAI,CAAC,wCAAwC;AACzC,kBAAME,kBAAiB,2BAA2B,MAAM,GAAG,uBAAuB,CAAC;AACnF,kBAAMA,kBAAiB,2BAA2B,MAAM,QAAQ,uBAAuB,MAAM;AAC7F,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,uBAAuB,SAAS;AACnG,kBAAMA,kBAAiB,2BAA2B,MAAM,MAAM,uBAAuB,IAAI;UAC7F,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,GAAG,uBAAuB,CAAC;AACpF,kBAAMA,mBAAkB,2BAA2B,MAAM,QAAQ,uBAAuB,MAAM;AAC9F,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,uBAAuB,SAAS;AACpG,kBAAMA,mBAAkB,2BAA2B,MAAM,MAAM,uBAAuB,IAAI;UAC9F;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,sBAAsB;AAEtF,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAA6B,2BAAqD;AACrF,kBAAM,iCAAiC,gCAAgC,IAAI,yBAAyB;AAEpG,gBAAI,mCAAmC,QAAW;AAC9C,qBAAO,QAAQ,QAAQ,8BAA8B;YACzD;AAEA,mBAAO,uBAAuB,OAAO,yBAAyB;UAClE;;MAER;IACJ;;;;;ACnEA,IAAa;AAAb;;AAAO,IAAM,wBAAiD,CAAC,cAAc,gBAAe;AACxF,aAAO,CAAC,QAAQ,SAAQ;AACpB,cAAM,mBAAmB,YAAY,IAAI,MAAM;AAE/C,YAAI,qBAAqB,QAAW;AAChC,iBAAO;QACX;AAEA,cAAM,cAAc,aAAa,IAAI,MAAM;AAE3C,YAAI,gBAAgB,QAAW;AAC3B,iBAAO;QACX;AAEA,YAAI;AACA,gBAAM,wBAAwB,KAAI;AAElC,cAAI,iCAAiC,SAAS;AAC1C,yBAAa,IAAI,QAAQ,qBAAqB;AAE9C,mBAAO,sBACF,MAAM,MAAM,KAAK,EACjB,KAAK,CAAC,oBAAmB;AACtB,2BAAa,OAAO,MAAM;AAC1B,0BAAY,IAAI,QAAQ,eAAe;AAEvC,qBAAO;YACX,CAAC;UACT;AAEA,sBAAY,IAAI,QAAQ,qBAAqB;AAE7C,iBAAO;QACX,QAAQ;AACJ,sBAAY,IAAI,QAAQ,KAAK;AAE7B,iBAAO;QACX;MACJ;IACJ;;;;;ACtCA,IAAMC,kBAOO;AAPb;;IAAMA,mBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,gBAAgB;;AAGb,IAAM,qCAA2E,CACpFC,uBACAC,kCACAC,gCACAC,mBACAC,iCACA;AACA,aAAO,MAAM,0BAA8CJ,sBAAuB;QAC9E,YAAY,SAAY,SAAwC;AAC5D,gBAAM,gBAAgBG,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGJ,kBAAiB,GAAG,QAAO;AACtD,gBAAM,0BAA0BG,+BAA8B,eAAe,aAAa;AAC1F,gBAAM,4BACDE,6BAA4B,aAAa,IAAIH,iCAA+B,IAAK;AAGtF,gBAAM,SAAS,OAAO,yBAAyB,yBAAyB;QAC5E;;IAER;;;;;AC7BA,IAIa;AAJb;;;AAIO,IAAM,yCAAmF,CAC5FI,gCACAC,qBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,cAAM,kBAAkB,OAAO,OAAsB,8BAAyD;AAC1G,cAAI,kBAAkBD,oBAAwC,KAAK;AAGnE,gBAAM,kCAAkC,iBAAiB,iBAAiB,yBAAyB;AAEnG,cAAI,CAAC,iCAAiC;AAClC,kBAAM,UAAU;cACZ,cAAc,gBAAgB;cAC9B,kBAAkB,gBAAgB;cAClC,uBAAuB,gBAAgB;cACvC,gBAAgB,gBAAgB;;AAGpC,8BAAkBD,+BAA8B,2BAA2B,OAAO;UACtF;AAEA,mCAAyB,IAAI,2BAA2B,eAAe;AAEvE,gBAAME,yBAAwB,OAAO,2BAA2B,eAAe;AAE/E,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAAsB,2BAAqD;AAC9E,kBAAM,0BAA0B,yBAAyB,IAAI,yBAAyB;AAEtF,gBAAI,4BAA4B,QAAW;AACvC,qBAAO,QAAQ,QAAQ,uBAAuB;YAClD;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;AC7CA,IAAMC,kBAOO;AAPb;;IAAMA,mBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,iBAAiB;;AAGd,IAAM,uCAA+E,CACxFC,uBACAC,oCACAC,kCACAC,mBACAC,8BACAC,oCACA;AACA,aAAO,MAAM,4BAAgDL,sBAAuB;QAChF,YAAY,SAAY,SAA0C;AAC9D,gBAAM,gBAAgBG,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgBE,gCAA+B,EAAE,GAAGN,kBAAiB,GAAG,QAAO,CAAE;AACvF,gBAAM,4BAA4BG,iCAAgC,eAAe,aAAa;AAC9F,gBAAM,8BACDE,6BAA4B,aAAa,IAAIH,mCAAiC,IAAK;AAGxF,gBAAM,SAAS,OAAO,2BAA2B,2BAA2B;QAChF;;IAER;;;;;AC9BA,IAIa;AAJb;;;AAIO,IAAM,2CAAuF,CAChGK,kCACAC,qBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,cAAM,kBAAkB,OAAO,OAAsB,8BAAyD;AAC1G,cAAI,kBAAkBD,oBAAwC,KAAK;AAGnE,gBAAM,kCAAkC,iBAAiB,iBAAiB,yBAAyB;AAEnG,cAAI,CAAC,iCAAiC;AAClC,kBAAM,UAAU;cACZ,cAAc,gBAAgB;cAC9B,kBAAkB,gBAAgB;cAClC,uBAAuB,gBAAgB;cACvC,iBAAiB,gBAAgB;;AAGrC,8BAAkBD,iCAAgC,2BAA2B,OAAO;UACxF;AAEA,mCAAyB,IAAI,2BAA2B,eAAe;AAEvE,gBAAME,yBAAwB,OAAO,2BAA2B,eAAe;AAE/E,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAAsB,2BAAqD;AAC9E,kBAAM,0BAA0B,yBAAyB,IAAI,yBAAyB;AAEtF,gBAAI,4BAA4B,QAAW;AACvC,qBAAO,QAAQ,QAAQ,uBAAuB;YAClD;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;AC9CA,IAAa;AAAb;;AAAO,IAAM,0BAAqD,CAACC,8BAA4B;AAC3F,aAAO,CAAC,2BAA2B,YAAY,qBAAoB;AAC/D,eAAOA,0BAAyB,YAAY,2BAA2B,gBAAgB;MAC3F;IACJ;;;;;ACNA,IAGa;AAHb;;;AAGO,IAAM,+BAA+D,CAACC,0BAAwB;AACjG,aAAO,CAAC,kBAAkB,aAAa,SAAS,GAAG,QAAQ,MAAK;AAC5D,cAAM,kBAAkB,iBAAiB,MAAM;AAE/C,YAAI,oBAAoB,QAAW;AAC/B,gBAAMA,sBAAoB;QAC9B;AAEA,YAAI,kBAAkB,WAAW,GAAG;AAChC,iBAAO,gBAAgB,QAAQ,aAAa,GAAG,KAAK;QACxD;AAEA,eAAO,gBAAgB,QAAQ,aAAa,CAAC;MACjD;IACJ;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,oDAAyG,CAClHC,uCACA;AACA,aAAO,CAAC,eAAe,oBAAmB;AACtC,cAAM,8BAA8BA,mCAAkC,eAAe;UACjF,QAAQ;UACR,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;UACN,SAAS;UACT,WAAW;UACX,cAAc;SACjB;AACD,cAAM,oBAAoB,cAAc,aAAa,GAAG,GAAG,KAAK;AAEhE,oCAA4B,SAAS;AACrC,oCAA4B,OAAO;AAEnC,oCAA4B,QAAQ,eAAe;AACnD,oCAA4B,MAAK;AAEjC,eAAO,MAAK;AACR,sCAA4B,KAAI;AAChC,sCAA4B,WAAW,eAAe;QAC1D;MACJ;IACJ;;;;;AC7BA,IAaMC,kBAOO;AApBb;;;AACA;AACA;AACA;AAUA,IAAMA,mBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,QAAQ;;AAGL,IAAM,sCAA6E,CACtFC,uBACAC,mBACAC,0CACAC,iCACAC,mBACAC,8BACAC,uBACA;AACA,aAAO,MAAM,2BACDN,sBAA0D;QAWlE,YAAY,SAAY,SAAyC;AAC7D,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,kBAAiB,GAAG,QAAO;AACtD,gBAAM,2BAA2BI,gCAA+B,eAAe,aAAa;AAC5F,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,6BACD,YAAYH,yCAAuC,IAAK;AAG7D,gBAAM,SAAS,OAAO,0BAA0B,0BAA0B;AAE1E,eAAK,8BAA8B;AACnC,eAAK,4BAA4B;AAKjC,eAAK,UAAUD,kBACX,MACA,WACA,yBAAyB,QACzB,4BACA,0BAA0B;AAE9B,eAAK,WAAW;QACpB;QAEA,IAAI,SAAM;AACN,iBAAO,KAAK;QAChB;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAQ,OAAK;AACb,gBAAM,kBAAkB,OAAO,UAAU,aAAaK,mBAAkB,MAAM,KAAK,IAAI;AAEvF,eAAK,0BAA0B,UAAU;AAEzC,gBAAM,gBAAgB,KAAK,0BAA0B;AAErD,eAAK,WAAW,kBAAkB,QAAQ,kBAAkB,kBAAkB,QAAQ;QAC1F;QAEO,MAAM,OAAO,GAAC;AACjB,eAAK,0BAA0B,MAAM,IAAI;AAEzC,cAAI,KAAK,gCAAgC,MAAM;AAC3C,iBAAK,4BAA4B,QAAQ;UAC7C;AAEA,cAAI,KAAK,QAAQ,UAAU,UAAU;AACjC,qCAAyB,IAAI;AAE7B,kBAAM,8BAA8B,MAAK;AACrC,mBAAK,0BAA0B,oBAAoB,SAAS,2BAA2B;AAEvF,kBAAI,kBAAkB,IAAI,GAAG;AACzB,0CAA0B,IAAI;cAClC;YACJ;AAEA,iBAAK,0BAA0B,iBAAiB,SAAS,2BAA2B;UACxF;QACJ;QAEO,KAAK,OAAO,GAAC;AAChB,eAAK,0BAA0B,KAAK,IAAI;AAExC,cAAI,KAAK,gCAAgC,MAAM;AAC3C,iBAAK,4BAA4B,OAAO;UAC5C;QACJ;;IAER;;;;;ACpHA,IAIa;AAJb;;;AAIO,IAAM,0CAAqF,CAC9FC,oBACAC,iCACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,oCAAoC,oBAAI,QAAO;AAErD,YAAI,QAAuB;AAC3B,YAAI,OAAsB;AAE1B,cAAM,2BAA2B,OAAO,OAA+B,8BAAyD;AAC5H,cAAI,2BAA2BF,oBAAiD,KAAK;AAMrF,gBAAM,2CAA2C,iBAAiB,0BAA0B,yBAAyB;AAErH,cAAI,CAAC,0CAA0C;AAC3C,kBAAM,UAAU;cACZ,cAAc,yBAAyB;cACvC,kBAAkB,yBAAyB;cAC3C,uBAAuB,yBAAyB;cAChD,QAAQ,yBAAyB,OAAO;;AAG5C,uCAA2BD,gCAA+B,2BAA2B,OAAO;AAE5F,gBAAI,UAAU,MAAM;AAChB,uCAAyB,MAAM,KAAK;YACxC;AAEA,gBAAI,SAAS,MAAM;AACf,uCAAyB,KAAK,IAAI;YACtC;UACJ;AAEA,4CAAkC,IAAI,2BAA2B,wBAAwB;AAEzF,cAAI,CAAC,0CAA0C;AAC3C,kBAAME,kBAAiB,2BAA2B,MAAM,QAAQ,yBAAyB,MAAM;UACnG,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,QAAQ,yBAAyB,MAAM;UACpG;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,wBAAwB;AAExF,iBAAO;QACX;AAEA,eAAO;UACH,IAAI,MAAM,OAAa;AACnB,oBAAQ;UACZ;UACA,IAAI,KAAK,OAAa;AAClB,mBAAO;UACX;UACA,OACI,OACA,2BAAqD;AAErD,kBAAM,mCAAmC,kCAAkC,IAAI,yBAAyB;AAExG,gBAAI,qCAAqC,QAAW;AAChD,qBAAO,QAAQ,QAAQ,gCAAgC;YAC3D;AAEA,mBAAO,yBAAyB,OAAO,yBAAyB;UACpE;;MAER;IACJ;;;;;AC7EA,IAAa;AAAb;;AAAO,IAAM,oCAAyE,CAAC,gBAAe;AAClG,aAAO,CAAC,UAAS;AACb,oBAAY,CAAC,IAAI;AAEjB,eAAO,YAAY,CAAC;MACxB;IACJ;;;;;ACLA,IAAMC,kBAQO;AARb;;IAAMA,mBAAkB;MACpB,QAAQ;MACR,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,sBAAsB;;AAGnB,IAAM,iCAAmE,CAC5EC,uBACAC,8BACAC,4BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,sBAA0CL,sBAAuB;QAK1E,YAAY,SAAY,SAAoC;AACxD,gBAAM,gBAAgBG,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGJ,kBAAiB,GAAG,QAAO;AACtD,gBAAM,sBAAsBG,2BAA0B,eAAe,aAAa;AAClF,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,wBAAsD,YAAYH,6BAA2B,IAAK;AAExG,gBAAM,SAAS,OAAO,qBAAqB,qBAAqB;AAEhE,eAAK,qBAAqB;AAC1B,eAAK,uBAAuB;AAE5B,cAAI,cAAc,WAAW,MAAM;AAC/B,YAAAI,sBAAqB,MAAM,cAAc,OAAO,QAAQ;UAC5D;QACJ;QAEA,IAAI,SAAM;AACN,cAAI,KAAK,oBAAoB;AACzB,mBAAO;UACX;AAEA,iBAAO,KAAK,qBAAqB;QACrC;QAEA,IAAI,OAAO,OAAK;AACZ,eAAK,qBAAqB,SAAS;AAGnC,cAAI,UAAU,QAAQ,KAAK,qBAAqB,WAAW,MAAM;AAC7D,kBAAM,gBAAgB,KAAK,qBAAqB;AAEhD,iBAAK,qBAAqB,SAAS,cAAc,aAAa,GAAG,GAAG,cAAc,UAAU;AAC5F,iBAAK,qBAAqB;AAE1B,YAAAA,sBAAqB,MAAM,CAAC;UAChC,OAAO;AACH,iBAAK,qBAAqB;AAE1B,YAAAA,sBAAqB,MAAM,KAAK,qBAAqB,WAAW,OAAO,IAAI,KAAK,qBAAqB,OAAO,QAAQ;UACxH;QACJ;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK,qBAAqB;QACrC;QAEA,IAAI,UAAU,OAAK;AACf,eAAK,qBAAqB,YAAY;QAC1C;;IAER;;;;;AC3EA,IAKa;AALb;;;AACA;AAIO,IAAM,qCAA2E,CACpFC,4BACAC,qBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,+BAA+B,oBAAI,QAAO;AAEhD,cAAM,sBAAsB,OAAO,OAA0B,8BAAyD;AAClH,cAAI,sBAAsBD,oBAA4C,KAAK;AAG3E,gBAAM,sCAAsC,iBAAiB,qBAAqB,yBAAyB;AAE3G,cAAI,CAAC,qCAAqC;AACtC,kBAAM,UAAU;cACZ,QAAQ,oBAAoB;cAC5B,cAAc,oBAAoB;cAClC,kBAAkB,oBAAoB;cACtC,uBAAuB,oBAAoB;cAC3C,sBAAsB,CAAC,oBAAoB;;AAG/C,kCAAsBD,2BAA0B,2BAA2B,OAAO;UACtF;AAEA,uCAA6B,IAAI,2BAA2B,mBAAmB;AAE/E,cAAI,uBAAuB,mBAAmB,GAAG;AAC7C,kBAAME,yBAAwB,OAAO,2BAA2B,oBAAoB,OAAO,CAAC,CAAC;UACjG,OAAO;AACH,kBAAMA,yBAAwB,OAAO,2BAA2B,mBAAmB;UACvF;AAEA,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAA0B,2BAAqD;AAClF,kBAAM,8BAA8B,6BAA6B,IAAI,yBAAyB;AAE9F,gBAAI,gCAAgC,QAAW;AAC3C,qBAAO,QAAQ,QAAQ,2BAA2B;YACtD;AAEA,mBAAO,oBAAoB,OAAO,yBAAyB;UAC/D;;MAER;IACJ;;;;;ACpDA,IAAa;AAAb;;AAAO,IAAM,wCAAiF,CAC1FC,0BACAC,0CACA;AACA,aAAO,CAAC,kBAAkB,QAAQ,eAAc;AAC5C,YAAIA,0CAAyC,MAAM;AAC/C,gBAAM,IAAI,MAAM,qDAAqD;QACzE;AAEA,YAAI;AACA,iBAAO,IAAIA,sCAAqC,kBAAkB,QAAQ,UAAU;QACxF,SAAS,KAAK;AAEV,cAAI,IAAI,SAAS,eAAe;AAC5B,kBAAMD,yBAAuB;UACjC;AAEA,gBAAM;QACV;MACJ;IACJ;;;;;ACpBA,IAAa;AAAb;;AAAO,IAAM,uBAA+C,MAAM,IAAI,aAAa,IAAI,gBAAgB;;;;;ACFvG,IAAa;AAAb;;AAAO,IAAM,oBAAoB,CAAC,gBAA2C;AACzE,YAAM,EAAE,OAAO,MAAK,IAAK,IAAI,eAAc;AAE3C,aAAO,IAAI,QAAQ,CAAC,YAAW;AAC3B,cAAM,kBAAkB,MAAK;AACzB,gBAAM,YAAY;AAElB,gBAAM,MAAK;AACX,gBAAM,MAAK;AAEX,kBAAO;QACX;AAEA,cAAM,YAAY,MAAM,gBAAe;AAEvC,YAAI;AACA,gBAAM,YAAY,aAAa,CAAC,WAAW,CAAC;QAChD,QAAQ;QAER;AACI,0BAAe;QACnB;MACJ,CAAC;IACL;;;;;ACvBA,IAIa;AAJb;;;AACA;AAGO,IAAM,wBAAiD,CAC1DE,mBACAC,kBACAC,uBACAC,sBACA,sBACAC,mBACAC,kBACAC,sDACAC,qBACAC,oCACAC,kDACA;AACA,aAAO,CAAC,YAAY,cAAa;AAC7B,cAAM,gBAAgBJ,iBAAgB,UAAU,IAAI,aAAaD,kBAAiB,UAAU;AAG5F,YAAI,qBAAqB,IAAI,SAAS,GAAG;AACrC,gBAAM,MAAMF,sBAAoB;AAEhC,iBAAO,QAAQ,OAAO,GAAG;QAC7B;AAGA,YAAI;AACA,+BAAqB,IAAI,SAAS;QACtC,QAAQ;QAER;AAGA,YAAID,iBAAgBM,qBAAoB,MAAMA,oBAAmB,aAAa,CAAC,GAAG;AAC9E,iBAAO,cAAc,gBAAgB,SAAS,EAAE,KAAK,CAAC,gBAAe;AAEjE,8BAAkB,SAAS,EAAE,MAAM,MAAK;YAExC,CAAC;AAGD,gBACI,CAACN,iBAAgBK,sDAAqD,MAClEA,qDAAoD,WAAW,CAAC,GAEtE;AACE,cAAAG,8CAA6C,WAAW;YAC5D;AAEA,YAAAT,kBAAiB,IAAI,WAAW;AAEhC,mBAAO;UACX,CAAC;QACL;AAGA,eAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACnC,gBAAM,WAAW,YAAW;AAExB,gBAAI;AACA,oBAAM,kBAAkB,SAAS;YACrC,QAAQ;YAER;UACJ;AAEA,gBAAM,OAAO,CAAC,QAA6B;AACvC,mBAAO,GAAG;AACV,qBAAQ;UACZ;AAGA,cAAI;AAEA,0BAAc,gBACV,WACA,CAAC,gBAAe;AAGZ,kBAAI,OAAO,YAAY,oBAAoB,YAAY;AACnD,gBAAAQ,mCAAkC,WAAW;AAC7C,oDAAoC,WAAW;cACnD;AAEA,cAAAR,kBAAiB,IAAI,WAAW;AAEhC,uBAAQ,EAAG,KAAK,MAAM,QAAQ,WAAW,CAAC;YAC9C,GACA,CAAC,QAA6B;AAE1B,kBAAI,QAAQ,MAAM;AACd,qBAAKG,qBAAmB,CAAE;cAC9B,OAAO;AACH,qBAAK,GAAG;cACZ;YACJ,CAAC;UAET,SAAS,KAAK;AACV,iBAAK,GAAG;UACZ;QACJ,CAAC;MACL;IACJ;;;;;ACxGA,IAGa;AAHb;;;AAGO,IAAM,8BAA6D,CACtEO,0CACA,eACAC,0BACAC,qBACAC,sBACAC,mBACAC,oBACAC,iCACA;AACA,aAAO,CAAC,WAAW,UAAS;AACxB,cAAM,eAAe,cAAc,IAAI,SAAS;AAEhD,YAAI,iBAAiB,QAAW;AAC5B,gBAAM,IAAI,MAAM,mCAAmC;QACvD;AAEA,cAAM,gBAAgBF,kBAAiB,UAAU,OAAO;AACxD,cAAM,YAAYE,6BAA4B,aAAa;AAE3D,YAAI,iBAAiB,OAAO;AACxB,wBAAc,OAAO,SAAS;AAE9B,cAAI,CAAC,aAAaD,mBAAkB,SAAS,GAAG;AAC5C,kBAAM,wBAAwBH,oBAAmB,SAAS;AAC1D,kBAAM,EAAE,QAAO,IAAKD,yBAAwB,SAAS;AAErD,uBAAW,UAAU,SAAS;AAC1B,kBAAI,4BAA4B,MAAM,GAAG;AACrC,sBAAM,6BAA6BC,oBAAmB,OAAO,CAAC,CAAC;AAE/D,gBAAAF,yCAAwC,uBAAuB,4BAA4B,OAAO,CAAC,GAAG,OAAO,CAAC,CAAC;cACnH,OAAO;AACH,sBAAM,8BAA8BG,qBAAoB,OAAO,CAAC,CAAC;AAEjE,sCAAsB,QAAQ,6BAA6B,OAAO,CAAC,CAAC;cACxE;YACJ;UACJ;QACJ,OAAO;AACH,wBAAc,IAAI,WAAW,eAAe,KAAK;QACrD;MACJ;IACJ;;;;;AC3CA,IAAMI,mBAQO;AARb;;IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,WAAW;MACX,cAAc;;AAGX,IAAM,6BAA2D,CACpEC,uBACAC,mBACAC,0BACAC,wBACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,kBAAsCN,sBAAuB;QAGtE,YAAY,SAAY,SAAgC;AACpD,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,kBAAkBI,uBAAsB,eAAe,aAAa;AAC1E,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,oBAAkD,YAAYH,yBAAwB,cAAc,YAAY,IAAI;AAE1H,gBAAM,SAAS,OAAO,iBAAiB,iBAAiB;AAExD,eAAK,aAAaD,kBAAiB,MAAM,WAAW,gBAAgB,SAAS;AAE7E,UAAAK,sBAAqB,MAAM,cAAc,YAAY;QACzD;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;;IAER;;;;;ACzCA,IAIa;AAJb;;;AAIO,IAAM,iCAAmE,CAC5EC,oBACAC,wBACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,CAA+D,iBAAwB;AAC1F,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,cAAM,kBAAkB,OAAO,OAAsB,8BAAyD;AAC1G,cAAI,kBAAkBF,oBAAwC,KAAK;AAGnE,gBAAM,kCAAkC,iBAAiB,iBAAiB,yBAAyB;AAEnG,cAAI,CAAC,iCAAiC;AAClC,kBAAM,UAAU;cACZ,cAAc,gBAAgB;cAC9B,kBAAkB,gBAAgB;cAClC,uBAAuB,gBAAgB;cACvC,WAAW,gBAAgB,UAAU;cACrC;;AAGJ,8BAAkBD,uBAAsB,2BAA2B,OAAO;UAC9E;AAEA,mCAAyB,IAAI,2BAA2B,eAAe;AAEvE,cAAI,CAAC,iCAAiC;AAClC,kBAAME,kBAAiB,2BAA2B,MAAM,WAAW,gBAAgB,SAAS;UAChG,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,WAAW,gBAAgB,SAAS;UACjG;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,eAAe;AAE/E,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAAsB,2BAAqD;AAC9E,kBAAM,0BAA0B,yBAAyB,IAAI,yBAAyB;AAEtF,gBAAI,4BAA4B,QAAW;AACvC,qBAAO,QAAQ,QAAQ,uBAAuB;YAClD;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;ACvDA,IAAa;AAAb;;AAAO,IAAM,+CAA+F,CAACC,wBAAsB;AAC/H,aAAO,CAAC,cAAc,QAAQ,QAAQ,UAAS;AAC3C,eAAOA,oBACH,aAAa,KAAK,GAClB,CAAC,0BAA0B,sBAAsB,CAAC,MAAM,UAAU,sBAAsB,CAAC,MAAM,MAAM;MAE7G;IACJ;;;;;ACPA,IAAa;AAAb;;AAAO,IAAM,yCAAmF,CAACC,oCAAkC;AAC/H,aAAO,CAAC,eAAe,qBAAoB;AACvC,QAAAA,gCAA+B,aAAa,EAAE,OAAO,gBAAgB;MACzE;IACJ;;;;;ACHA,IAAa;AAAb;;AAAO,IAAM,cAAc,CAAqB,cAAwD;AACpG,aAAO,eAAe;IAC1B;;;;;ACLA,IAKa;AALb;;;AACA;AAIO,IAAM,qBAA2C,CAACC,2BAA0BC,0BAAyBC,oBAAkB;AAC1H,aAAO,SAAS,aAAiC,OAAwB,UAAqC;AAC1G,cAAM,YAAY,YAAY,QAAQ,IAAI,WAA0BA,gBAAeF,2BAA0B,QAAQ;AAErH,YAAI,YAAY,SAAS,GAAG;AACxB,iBAAO,CAAA;QACX;AAEA,YAAI,MAAM,CAAC,MAAM,WAAW;AACxB,iBAAO,CAAC,KAAK;QACjB;AAEA,YAAI,MAAM,SAAS,SAAS,GAAG;AAC3B,iBAAO,CAAA;QACX;AAEA,cAAM,EAAE,QAAO,IAAKC,yBAAwB,SAAS;AAErD,eAAO,MAAM,KAAK,OAAO,EACpB,IAAI,CAAC,qBAAqB,aAAa,CAAC,GAAG,OAAO,SAAS,GAAG,iBAAiB,CAAC,CAAC,CAAC,EAClF,OAAO,CAAC,cAAc,iBAAiB,aAAa,OAAO,YAAY,GAAG,CAAA,CAAE;MACrF;IACJ;;;;;AC3BA,IAGM,2BAcO;AAjBb;;;AAGA,IAAM,4BAA4B,CAC9BE,uBACA,kBACA,WACkB;AAClB,YAAM,kBAAkB,iBAAiB,MAAM;AAE/C,UAAI,oBAAoB,QAAW;AAC/B,cAAMA,sBAAoB;MAC9B;AAEA,aAAO;IACX;AAEO,IAAM,kCAAqE,CAACA,0BAAwB;AACvG,aAAO,CAAC,kBAAkB,sBAAsB,QAAW,SAAS,QAAW,QAAQ,MAAK;AACxF,YAAI,wBAAwB,QAAW;AACnC,iBAAO,iBAAiB,QAAQ,CAAC,oBAAoB,gBAAgB,WAAU,CAAE;QACrF;AAEA,YAAI,OAAO,wBAAwB,UAAU;AACzC,iBAAO,0BAA0BA,uBAAsB,kBAAkB,mBAAmB,EAAE,WAAU;QAC5G;AAEA,YAAI,kBAAkB,mBAAmB,GAAG;AACxC,cAAI,WAAW,QAAW;AACtB,mBAAO,iBAAiB,QAAQ,CAAC,oBAAoB,gBAAgB,WAAW,mBAAmB,CAAC;UACxG;AAEA,cAAI,UAAU,QAAW;AACrB,mBAAO,0BAA0BA,uBAAsB,kBAAkB,MAAM,EAAE,WAAW,qBAAqB,CAAC;UACtH;AAEA,iBAAO,0BAA0BA,uBAAsB,kBAAkB,MAAM,EAAE,WAAW,qBAAqB,GAAG,KAAK;QAC7H;AAEA,YAAI,WAAW,QAAW;AACtB,iBAAO,iBAAiB,QAAQ,CAAC,oBAAoB,gBAAgB,WAAW,mBAAmB,CAAC;QACxG;AAEA,eAAO,0BAA0BA,uBAAsB,kBAAkB,MAAM,EAAE,WAAW,qBAAqB,CAAC;MACtH;IACJ;;;;;ACnCA,IAAMC,mBAWO;AAXb;;IAAMA,oBAAkB;MACpB,QAAQ;MACR,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,MAAM;MACN,OAAO;MACP,SAAS;MACT,WAAW;;AAGR,IAAM,0CAAqF,CAC9FC,uBACAC,mBACAC,uCACAC,qCACAC,0BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,+BAAmDP,sBAAuB;QAanF,YAAY,SAAY,SAA6C;AACjE,gBAAM,gBAAgBK,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGN,mBAAiB,GAAG,QAAO;AACtD,gBAAM,+BAA+BI,oCAAmC,eAAe,aAAa;AACpG,gBAAM,YAAYG,6BAA4B,aAAa;AAC3D,gBAAM,iCAA+D,YAAYJ,sCAAoC,IAAK;AAE1H,gBAAM,SAAS,OAAO,8BAA8B,8BAA8B;AAElF,eAAK,UAAUD,kBAAiB,MAAM,WAAW,6BAA6B,MAAM;AACpF,eAAK,QAAQA,kBAAiB,MAAM,WAAW,6BAA6B,IAAI;AAChF,eAAK,gCAAgC;AACrC,eAAK,SAASA,kBAAiB,MAAM,WAAW,6BAA6B,KAAK;AAClF,eAAK,WAAWA,kBAAiB,MAAM,WAAW,6BAA6B,OAAO;AACtF,eAAK,aAAaA,kBAAiB,MAAM,WAAW,6BAA6B,SAAS;AAE1F,UAAAM,sBAAqB,MAAM,IAAK;QACpC;QAEA,IAAI,SAAM;AACN,iBAAO,KAAK;QAChB;;QAGA,IAAI,eAAY;AACZ,iBAAO,KAAK,8BAA8B;QAC9C;QAEA,IAAI,aAAa,OAAK;AAClB,gBAAM,uBAAuB,KAAK,8BAA8B;AAEhE,eAAK,8BAA8B,eAAe;AAElD,cAAI,QAAQ,GAAG;AACX,iBAAK,8BAA8B,eAAe;AAElD,kBAAMH,yBAAuB;UACjC;QACJ;;;;;QAMA,IAAI,mBAAgB;AAChB,iBAAO,KAAK,8BAA8B;QAC9C;QAEA,IAAI,iBAAiB,OAAK;AACtB,gBAAM,uBAAuB,KAAK,8BAA8B;AAEhE,eAAK,8BAA8B,mBAAmB;AAEtD,cAAI,UAAU,OAAO;AACjB,iBAAK,8BAA8B,mBAAmB;AAEtD,kBAAMA,yBAAuB;UACjC;QACJ;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AAET,cAAI,OAAiC,KAAK,8BAA8B,UAAY,UAAU,UAAU;AACpG,mBAAiC,KAAK,8BAA8B,UAAY;UACpF;AAEA,iBAAO,KAAK,8BAA8B;QAC9C;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;;IAER;;;;;ACjIA,IAIa;AAJb;;;AAIO,IAAM,8CAA6F,CACtGI,oBACAC,qCACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,wCAAwC,oBAAI,QAAO;AAEzD,cAAM,+BAA+B,OACjC,OACA,8BACA;AACA,cAAI,+BAA+BF,oBAAqD,KAAK;AAM7F,gBAAM,+CAA+C,iBAAiB,8BAA8B,yBAAyB;AAE7H,cAAI,CAAC,8CAA8C;AAC/C,kBAAM,UAAU;cACZ,QAAQ,6BAA6B,OAAO;cAC5C,cAAc,6BAA6B;cAC3C,kBAAkB,6BAA6B;cAC/C,uBAAuB,6BAA6B;cACpD,MAAM,6BAA6B,KAAK;cACxC,OAAO,6BAA6B,MAAM;cAC1C,SAAS,6BAA6B,QAAQ;cAC9C,WAAW,6BAA6B,UAAU;;AAGtD,2CAA+BD,oCAAmC,2BAA2B,OAAO;UACxG;AAEA,gDAAsC,IAAI,2BAA2B,4BAA4B;AAEjG,cAAI,CAAC,8CAA8C;AAC/C,kBAAME,kBAAiB,2BAA2B,MAAM,QAAQ,6BAA6B,MAAM;AACnG,kBAAMA,kBAAiB,2BAA2B,MAAM,MAAM,6BAA6B,IAAI;AAC/F,kBAAMA,kBAAiB,2BAA2B,MAAM,OAAO,6BAA6B,KAAK;AACjG,kBAAMA,kBAAiB,2BAA2B,MAAM,SAAS,6BAA6B,OAAO;AACrG,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,6BAA6B,SAAS;UAC7G,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,QAAQ,6BAA6B,MAAM;AACpG,kBAAMA,mBAAkB,2BAA2B,MAAM,MAAM,6BAA6B,IAAI;AAChG,kBAAMA,mBAAkB,2BAA2B,MAAM,OAAO,6BAA6B,KAAK;AAClG,kBAAMA,mBAAkB,2BAA2B,MAAM,SAAS,6BAA6B,OAAO;AACtG,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,6BAA6B,SAAS;UAC9G;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,4BAA4B;AAE5F,iBAAO;QACX;AAEA,eAAO;UACH,OACI,OACA,2BAAqD;AAErD,kBAAM,uCAAuC,sCAAsC,IAAI,yBAAyB;AAEhH,gBAAI,yCAAyC,QAAW;AACpD,qBAAO,QAAQ,QAAQ,oCAAoC;YAC/D;AAEA,mBAAO,6BAA6B,OAAO,yBAAyB;UACxE;;MAER;IACJ;;;;;AC3EA,IAAa;AAAb;;AAAO,IAAM,sBAA6C,MAAM,IAAI,aAAa,IAAI,eAAe;;;;;ACApG,IAAa;AAAb;;AAAO,IAAM,uBAA+C,CAACC,YAAU;AACnE,aAAO,CAAC,WACJ,IAAI,QAAQ,CAAC,SAAS,WAAU;AAC5B,YAAIA,YAAW,MAAM;AAEjB,iBAAO,IAAI,YAAW,CAAE;AAExB;QACJ;AAEA,cAAM,OAAOA,QAAO,SAAS;AAE7B,YAAI,SAAS,MAAM;AAEf,iBAAO,IAAI,YAAW,CAAE;QAC5B,OAAO;AACH,gBAAM,SAASA,QAAO,SAAS,cAAc,QAAQ;AAErD,gBAAMC,QAAO,IAAI,KAAK,CAAC,MAAM,GAAG,EAAE,MAAM,yBAAwB,CAAE;AAClE,gBAAMC,OAAM,IAAI,gBAAgBD,KAAI;AAEpC,gBAAM,yBAAyBD,QAAO;AAEtC,gBAAM,uCAAuC,MAAK;AAC9C,YAAAA,QAAO,UAAU;AAEjB,gBAAI,gBAAgBE,IAAG;UAC3B;AAEA,UAAAF,QAAO,UAAU,CAAC,SAAS,KAAK,QAAQ,OAAO,UAAS;AAEpD,gBAAI,QAAQE,QAAQ,QAAQF,QAAO,SAAS,QAAQ,WAAW,KAAK,UAAU,GAAI;AAC9E,mDAAoC;AACpC,qBAAO,KAAK;AAEZ,qBAAO;YACX;AAEA,gBAAI,2BAA2B,MAAM;AACjC,qBAAO,uBAAuB,SAAS,KAAK,QAAQ,OAAO,KAAK;YACpE;UACJ;AAEA,iBAAO,UAAU,MAAK;AAClB,iDAAoC;AAEpC,mBAAO,IAAI,YAAW,CAAE;UAC5B;AACA,iBAAO,SAAS,MAAK;AACjB,iDAAoC;AACpC,oBAAO;UACX;AACA,iBAAO,MAAME;AACb,iBAAO,OAAO;AAEd,eAAK,YAAY,MAAM;QAC3B;MACJ,CAAC;IACT;;;;;ACzDA,IAAaC;AAAb,IAAAC,iCAAA;;AAAO,IAAMD,gCAA+D,CAACE,uBAAqB;AAC9F,aAAO,MAAM,YAAW;QAGpB,YAAoB,oBAAsC;AAAtC,eAAA,qBAAA;AAChB,eAAK,aAAa,oBAAI,QAAO;QACjC;QAEO,iBACH,MACA,UACA,SAA2C;AAE3C,cAAI,aAAa,MAAM;AACnB,gBAAI,uBAAuB,KAAK,WAAW,IAAI,QAAQ;AAEvD,gBAAI,yBAAyB,QAAW;AACpC,qCAAuBA,mBAAkB,MAAM,QAAQ;AAEvD,kBAAI,OAAO,aAAa,YAAY;AAChC,qBAAK,WAAW,IAAI,UAAU,oBAAoB;cACtD;YACJ;AAEA,iBAAK,mBAAmB,iBAAiB,MAAM,sBAAsB,OAAO;UAChF;QACJ;QAEO,cAAc,OAAY;AAC7B,iBAAO,KAAK,mBAAmB,cAAc,KAAK;QACtD;QAEO,oBACH,MACA,UACA,SAAwC;AAExC,gBAAM,uBAAuB,aAAa,OAAO,SAAY,KAAK,WAAW,IAAI,QAAQ;AAEzF,eAAK,mBAAmB,oBAAoB,MAAM,yBAAyB,SAAY,OAAO,sBAAsB,OAAO;QAC/H;;IAER;;;;;AC3CA,IAAa;AAAb;;AAAO,IAAM,yCAAmF,CAACC,YAAU;AACvG,aAAO,CAAC,aAAa,YAAY,OAAM;AACnC,eAAO,iBAAiBA,SAAQ;UAC5B,cAAc;YACV,cAAc;YACd,MAAG;AACC,qBAAO,KAAK,MAAM,cAAc,UAAU;YAC9C;;UAEJ,aAAa;YACT,cAAc;YACd,MAAG;AACC,qBAAO;YACX;;SAEP;AAED,YAAI;AACA,iBAAO,GAAE;QACb;AACI,cAAIA,YAAW,MAAM;AACjB,mBAAaA,QAAQ;AACrB,mBAAaA,QAAQ;UACzB;QACJ;MACJ;IACJ;;;;;AC1BA,IAAa;AAAb;;AAAO,IAAM,oBAAyC,CAACC,sBAAoB;AACvE,aAAO,OAAOC,SAAO;AACjB,YAAI;AACA,gBAAM,WAAW,MAAM,MAAMA,IAAG;AAEhC,cAAI,SAAS,IAAI;AACb,mBAAO,CAAC,MAAM,SAAS,KAAI,GAAI,SAAS,GAAG;UAC/C;QACJ,QAAQ;QAER;AAEA,cAAMD,kBAAgB;MAC1B;IACJ;;;;;AChBA,IAIME,mBAOO;AAXb;;;AAIA,IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,MAAM;;AAGH,IAAM,4BAAyD,CAClEC,uBACAC,mBACAC,yBACAC,uBACAC,mBACAC,iCACA;AACA,aAAO,MAAM,iBAAqCL,sBAAuB;QAGrE,YAAY,SAAY,SAA+B;AACnD,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,iBAAiBI,sBAAqB,eAAe,aAAa;AACxE,gBAAM,YAAYE,6BAA4B,aAAa;AAC3D,gBAAM,mBAAiD,YAAYH,wBAAsB,IAAK;AAE9F,gBAAM,SAAS,OAAO,gBAAgB,gBAAgB;AAGtD,eAAK,QAAQD,kBAAiB,MAAM,WAAW,eAAe,MAAM,4BAA4B,0BAA0B;QAC9H;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK;QAChB;;IAER;;;;;ACvCA,IAIa;AAJb;;;AAIO,IAAM,gCAAiE,CAC1EK,oBACAC,uBACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,0BAA0B,oBAAI,QAAO;AAE3C,cAAM,iBAAiB,OAAO,OAAqB,8BAAyD;AACxG,cAAI,iBAAiBF,oBAAuC,KAAK;AAGjE,gBAAM,iCAAiC,iBAAiB,gBAAgB,yBAAyB;AAEjG,cAAI,CAAC,gCAAgC;AACjC,kBAAM,UAAU;cACZ,cAAc,eAAe;cAC7B,kBAAkB,eAAe;cACjC,uBAAuB,eAAe;cACtC,MAAM,eAAe,KAAK;;AAG9B,6BAAiBD,sBAAqB,2BAA2B,OAAO;UAC5E;AAEA,kCAAwB,IAAI,2BAA2B,cAAc;AAErE,cAAI,CAAC,gCAAgC;AACjC,kBAAME,kBAAiB,2BAA2B,MAAM,MAAM,eAAe,IAAI;UACrF,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,MAAM,eAAe,IAAI;UACtF;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,cAAc;AAE9E,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAAqB,2BAAqD;AAC7E,kBAAM,yBAAyB,wBAAwB,IAAI,yBAAyB;AAEpF,gBAAI,2BAA2B,QAAW;AACtC,qBAAO,QAAQ,QAAQ,sBAAsB;YACjD;AAEA,mBAAO,eAAe,OAAO,yBAAyB;UAC1D;;MAER;IACJ;;;;;ACtDA,IAAa;AAAb;;AAAO,IAAM,wCAAiF,CAC1FC,oCACAC,oBACA;AACA,aAAO,CAAqB,2BACUA,gBAAeD,oCAAmC,sBAAsB;IAClH;;;;;ACLA,IAAa;AAAb;;AAAO,IAAM,6BAA2D,CAACE,6BAA2B;AAChG,aAAO,CACH,cACsC;AACtC,cAAM,uBAAuBA,yBAAwB,SAAS;AAE9D,YAAI,qBAAqB,aAAa,MAAM;AACxC,gBAAM,IAAI,MAAM,iEAAiE;QACrF;AAEA,eAA6C,qBAAqB;MACtE;IACJ;;;;;ACbA,IAAa;AAAb;;AAAO,IAAM,6BAA2D,CAACC,4BAA0B;AAC/F,aAAO,CAAC,cAAa;AAAA,YAAAC;AAAC,gBAAAA,OAAAD,wBAAuB,IAAI,SAAS,OAAC,QAAAC,SAAA,SAAAA,OAAI;MAAC;IACpE;;;;;ACDA,IAAa;AAAb;;AAAO,IAAM,8BAA6D,CAACC,8BAA4B;AACnG,aAAO,CAAC,eAAc;AAClB,cAAM,wBAAwBA,0BAAsD,UAAU;AAE9F,YAAI,sBAAsB,aAAa,MAAM;AACzC,gBAAM,IAAI,MAAM,kEAAkE;QACtF;AAEA,eAAO,sBAAsB;MACjC;IACJ;;;;;ACXA,IAAa;AAAb;;AAAO,IAAM,qCAA2E,CAACC,oCAAkC;AACvH,aAAO,CAAC,kBAAiB;AACrB,eAAOA,gCAA+B,IAAI,aAAa;MAC3D;IACJ;;;;;ACJA,IAAaC;AAAb,IAAAC,4BAAA;;AAAO,IAAMD,2BAAqD,MAAM,IAAI,aAAa,IAAI,mBAAmB;;;;;ACAhH,IAEa;AAFb;;IAAAE;AAEO,IAAM,yBAAmD,CAAC,iBAAgB;AAC7E,aAAO,CACH,YACiH;AACjH,cAAM,gBAAgB,aAAa,IAAI,OAAO;AAE9C,YAAI,kBAAkB,QAAW;AAC7B,gBAAMC,yBAAuB;QACjC;AAEA,eACI;MAER;IACJ;;;;;AChBA,IAAa;AAAb;;AAAO,IAAM,6CAA2F,CACpGC,iCACAC,0CACA;AACA,aAAO,CAAC,kBAAiB;AACrB,YAAI,4BAA4BD,gCAA+B,IAAI,aAAa;AAEhF,YAAI,8BAA8B,QAAW;AACzC,iBAAO;QACX;AAEA,YAAIC,0CAAyC,MAAM;AAC/C,gBAAM,IAAI,MAAM,qDAAqD;QACzE;AAGA,oCAA4B,IAAIA,sCAAqC,GAAG,GAAG,KAAK;AAEhF,QAAAD,gCAA+B,IAAI,eAAe,yBAAyB;AAE3E,eAAO;MACX;IACJ;;;;;ACtBA,IAAa;AAAb;;AAAO,IAAM,uCAA+E,CAACE,qCAAmC;AAC5H,aAAO,CAAC,kBAAiB;AACrB,cAAM,8BAA8BA,iCAAgC,IAAI,aAAa;AAErF,YAAI,gCAAgC,QAAW;AAC3C,gBAAM,IAAI,MAAM,8CAA8C;QAClE;AAEA,eAAO;MACX;IACJ;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,2BAAuD,MAAM,IAAI,aAAa,IAAI,oBAAoB;;;;;ACFnH,IAGa;AAHb;;;AAGO,IAAM,8CAA8C,CAAC,wBAAmD;AAC3G,0BAAoB,uBAAwB,kBAAC,yBAAwB;AACjE,eAAO,CAAC,aAA2B,aAA2B,kBAA+B;AACzF,cAAI,YAAY,WAAW,YAAY,UAAU,YAAY,WAAW,cAAc,QAAQ;AAC1F,kBAAM,yBAAwB;UAClC;AAEA,iBAAO,qBAAqB,KAAK,qBAAqB,aAAa,aAAa,aAAa;QACjG;MACJ,GAAG,oBAAoB,oBAAoB;IAC/C;;;;;ACbA,IAIMC,mBAMO;AAVb;;;AAIA,IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;;AAGpB,IAAM,iCAAmE,CAC5EC,uBACAC,4BACAC,8BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,sBAA0CL,sBAAuB;QAG1E,YACI,SACA,SAAgI;AAEhI,gBAAM,gBAAgBG,kBAAiB,OAAO;AAC9C,gBAAM,YAAYC,6BAA4B,aAAa;AAC3D,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,sBAAsBE,2BACxB,eACA,YAAY,OAAoC,QAAU,aAC1D,aAAa;AAEjB,gBAAM,wBACD,YAAYC,6BAA4B,cAAc,UAAU,cAAc,WAAW,IAAI;AAGlG,gBAAM,SAAS,OAAO,qBAAqB,qBAAqB;AAIhE,sDAA4C,mBAAmB;AAE/D,eAAK,uBAAuB;AAG5B,UAAAG,sBAAqB,MAAM,CAAC;QAChC;QAEO,qBAAqB,aAA2B,aAA2B,eAA2B;AACzG,iBAAO,KAAK,qBAAqB,qBAAqB,aAAa,aAAa,aAAa;QACjG;;IAER;;;;;ACrDA,IAGa;AAHb;;AAGO,IAAM,eAAe,CACxB,UACA,gBACA,aACA,mBACA,WACA,SACA,SACA,aACA,cACA,OACA,WACA;AACA,YAAM,cAAc,MAAM;AAE1B,UAAI,IAAI;AAER,eAAS,IAAI,GAAG,IAAI,aAAa,KAAK,GAAG;AACrC,YAAI,IAAI,YAAY,CAAC,IAAI,MAAM,CAAC;AAEhC,iBAAS,IAAI,GAAG,IAAI,WAAW,KAAK,GAAG;AACnC,gBAAM,IAAK,IAAI,IAAM,eAAe;AAEpC,eAAK,YAAY,CAAC,IAAI,QAAQ,CAAC;AAC/B,eAAK,SAAS,CAAC,IAAI,QAAQ,CAAC;QAChC;AAEA,iBAAS,IAAI,WAAW,IAAI,mBAAmB,KAAK,GAAG;AACnD,eAAK,YAAY,CAAC,IAAI,QAAS,IAAI,IAAM,eAAe,CAAE;QAC9D;AAEA,iBAAS,IAAI,WAAW,IAAI,gBAAgB,KAAK,GAAG;AAChD,eAAK,SAAS,CAAC,IAAI,QAAS,IAAI,IAAM,eAAe,CAAE;QAC3D;AAEA,gBAAQ,CAAC,IAAI,MAAM,CAAC;AACpB,gBAAQ,CAAC,IAAI;AAEb,YAAK,IAAI,IAAM,eAAe;AAE9B,eAAO,CAAC,IAAI;MAChB;AAEA,aAAO;IACX;;;;;AC/CA,IAWM,kBA2DO;AAtEb;;;AACA;AAUA,IAAM,mBAAmB,CACrB,gBACA,2BACA,UACA,gBACA;AACA,YAAM,oBAAoB,oBAAoB,eAAe,WAAW,IAAI,aAAa,QAAQ;AACjG,YAAM,uBAAuB,uBAAuB,eAAe,cAAc,IAAI,aAAa,WAAW;AAC7G,YAAM,iBAAiB,kBAAkB;AACzC,YAAM,oBAAoB,qBAAqB;AAC/C,YAAM,YAAY,KAAK,IAAI,gBAAgB,iBAAiB;AAE5D,UAAI,kBAAkB,CAAC,MAAM,GAAG;AAC5B,iBAAS,IAAI,GAAG,IAAI,gBAAgB,KAAK,GAAG;AACxC,+BAAqB,CAAC,KAAK,kBAAkB,CAAC;QAClD;AAEA,iBAAS,IAAI,GAAG,IAAI,mBAAmB,KAAK,GAAG;AAC3C,4BAAkB,CAAC,KAAK,kBAAkB,CAAC;QAC/C;MACJ;AAEA,YAAM,eAAe;AACrB,YAAM,UAAU,IAAI,aAAa,YAAY;AAC7C,YAAM,UAAU,IAAI,aAAa,YAAY;AAE7C,YAAM,iBAAiB,0BAA0B,aAC7C,eAAe,kBACf,eAAe,QACf,eAAe,UAAU;AAG7B,YAAM,mBAAmB,eAAe;AAExC,eAAS,IAAI,GAAG,IAAI,kBAAkB,KAAK,GAAG;AAC1C,cAAM,QAAQ,eAAe,eAAe,CAAC;AAC7C,cAAM,SAAS,eAAe,eAAe,CAAC;AAE9C,gBAAQ,KAAK,CAAC;AACd,gBAAQ,KAAK,CAAC;AAEd,qBACI,mBACA,gBACA,sBACA,mBACA,WACA,SACA,SACA,GACA,cACA,OACA,MAAM;MAEd;AAEA,aAAO;IACX;AAEO,IAAM,qCAA2E,CACpFC,oCACAC,qBACAC,uCACAC,0BACAC,qCACA;AACA,aAAO,CAA+D,UAA4B,gBAAiC;AAC/H,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,YAAI,wBAAmE;AAEvE,cAAM,kBAAkB,OAAO,OAA0B,8BAAyD;AAC9G,cAAI,8BAAmE;AACvE,cAAI,sBAAsBH,oBAA4C,KAAK;AAG3E,gBAAM,sCAAsC,iBAAiB,qBAAqB,yBAAyB;AAG3G,cAAI,0BAA0B,oBAAoB,QAAW;AACzD,0CAA8BD,mCAAkC,2BAA2B;cACvF,QAAQ;cACR,cAAc;cACd,kBAAkB;cAClB,uBAAuB;cACvB,MAAM;cACN,SAAS;cACT,WAAW;cACX,cAAc;aACjB;UACL,WAAW,CAAC,qCAAqC;AAE7C,kCAAsB,0BAA0B,gBAA0B,aAAuB,QAAQ;UAC7G;AAEA,mCAAyB,IACrB,2BACA,gCAAgC,OAAO,sBAAsB,2BAA2B;AAG5F,cAAI,gCAAgC,MAAM;AACtC,gBAAI,0BAA0B,MAAM;AAChC,kBAAIE,0CAAyC,MAAM;AAC/C,sBAAM,IAAI,MAAM,qDAAqD;cACzE;AAEA,oBAAM,6BAA6B,IAAIA;;gBAEnC,MAAM,QAAQ,YAAY;;gBAE1B,MAAM,QAAQ;gBACd,0BAA0B;cAAU;AAGxC,uCAAyB,YAAW;AAChC,sBAAMC,yBAAwB,OAAO,4BAA4B,2BAA2B,WAAW;AAEvG,sBAAM,iBAAiB,MAAMC,iCAAgC,0BAA0B;AAEvF,uBAAO,iBAAiB,gBAAgB,2BAA2B,UAAU,WAAW;cAC5F,GAAE;YACN;AAEA,kBAAM,iBAAiB,MAAM;AAE7B,wCAA4B,SAAS;AACrC,wCAA4B,MAAM,CAAC;AAEnC,mBAAO;UACX;AAEA,gBAAMD,yBAAwB,OAAO,2BAA2B,mBAAmB;AAEnF,iBAAO;QACX;AAEA,eAAO;UACH,OACI,OACA,2BAAqD;AAErD,kBAAM,0BAA0B,yBAAyB,IAAI,yBAAyB;AAEtF,gBAAI,4BAA4B,QAAW;AACvC,qBAAO,QAAQ,QAAQ,uBAAuB;YAClD;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;AClKA,IAGa;AAHb;;;AAGO,IAAM,qCAA2E,CACpF,eACAE,+CACAC,0BACAC,qBACAC,sBACAC,uBACA;AACA,aAAO,CAAC,cAAa;AACjB,eAAO,CAAC,WAAW,UAAS;AACxB,gBAAM,eAAe,cAAc,IAAI,SAAS;AAEhD,cAAI,iBAAiB,QAAW;AAC5B,gBAAI,CAAC,aAAaA,mBAAkB,SAAS,GAAG;AAC5C,oBAAM,wBAAwBF,oBAAmB,SAAS;AAC1D,oBAAM,EAAE,QAAO,IAAKD,yBAAwB,SAAS;AAErD,yBAAW,UAAU,SAAS;AAC1B,oBAAI,4BAA4B,MAAM,GAAG;AACrC,wBAAM,6BAA6BC,oBAAmB,OAAO,CAAC,CAAC;AAE/D,kBAAAF,8CACI,uBACA,4BACA,OAAO,CAAC,GACR,OAAO,CAAC,CAAC;gBAEjB,OAAO;AACH,wBAAM,8BAA8BG,qBAAoB,OAAO,CAAC,CAAC;AAEjE,wCAAsB,WAAW,6BAA6B,OAAO,CAAC,CAAC;gBAC3E;cACJ;YACJ;AAEA,0BAAc,IAAI,WAAW,KAAK;UACtC,OAAO;AACH,0BAAc,IAAI,WAAW,eAAe,KAAK;UACrD;QACJ;MACJ;IACJ;;;;;ACzCA,IAAa;AAAb;;AAAO,IAAM,0BAAqD,CAAC,cAAcE,0BAAwB;AACrG,aAAO,CAAC,aAAoF;AACxF,cAAM,gBAAgB,aAAa,IAAS,QAAQ;AAEpD,eAAOA,sBAAqB,aAAa,KAAKA,sBAAqB,QAAQ;MAC/E;IACJ;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,uBAA+C,CAAC,gBAAgBC,uBAAqB;AAC9F,aAAO,CAAC,aAA6D,eAAe,IAAS,QAAQ,KAAKA,mBAAkB,QAAQ;IACxI;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,wBAAiD,CAAC,iBAAiBC,wBAAsB;AAClG,aAAO,CAAC,aAA0D,gBAAgB,IAAS,QAAQ,KAAKA,oBAAmB,QAAQ;IACvI;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,iCAAmE,CAAC,cAAcC,iCAA+B;AAC1H,aAAO,CAAC,aAAyG;AAC7G,cAAM,gBAAgB,aAAa,IAAS,QAAQ;AAEpD,eAAOA,6BAA4B,aAAa,KAAKA,6BAA4B,QAAQ;MAC7F;IACJ;;;;;ACPA,IAAa;AAAb;;AAAO,IAAM,6BAA2D,CAACC,mCAAiC;AACtG,aAAO,CAAC,aAA6C;AACjD,eAAOA,mCAAkC,QAAQ,oBAAoBA;MACzE;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,0BAAqD,CAACC,YAAU;AACzE,aAAO,CAAC,aAA0C;AAC9C,eAAOA,YAAW,QAAQ,OAAOA,QAAO,cAAc,cAAc,oBAAoBA,QAAO;MACnG;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,2BAAuD,CAACC,YAAU;AAC3E,aAAO,CAAC,aAA2C;AAC/C,eAAOA,YAAW,QAAQ,OAAOA,QAAO,eAAe,cAAc,oBAAoBA,QAAO;MACpG;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,wBAAiD,CAACC,uBAAsBC,iCAA+B;AAChH,aAAO,CAAC,aAA6C;AACjD,eAAOD,sBAAqB,QAAQ,KAAKC,6BAA4B,QAAQ;MACjF;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,oCAAyE,CAACC,0CAAwC;AAC3H,aAAO,CAAC,aAAoD;AACxD,eAAOA,0CAAyC,QAAQ,oBAAoBA;MAChF;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,wBAAiD,CAACC,YAAWA,YAAW,QAAQA,QAAO;;;;;ACApG,IAAAC,6BAAA;;;;;;ACCA,IAAa;AAAb;;AAAO,IAAM,+CAA+F,CACxGC,uBACAC,0CACAC,mBACAC,iCACA;AACA,aAAO,MAAM,oCAAoFH,sBAAuB;QAIpH,YAAY,SAAY,SAAwC;AAC5D,gBAAM,gBAAgBE,kBAAiB,OAAO;AAC9C,gBAAM,oCAAoCD,yCAAwC,eAAe,OAAO;AAGxG,cAAIE,6BAA4B,aAAa,GAAG;AAC5C,kBAAM,UAAS;UACnB;AAEA,gBAAM,SAAS,MAAM,mCAA0D,IAAI;AAEnF,eAAK,qCAAqC;QAC9C;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK,mCAAmC;QACnD;;IAER;;;;;AC5BA,IAAMC,mBAMO;AANb;;IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;;AAGpB,IAAM,mDAAuG,CAChHC,uBACAC,8CACAC,mBACAC,iCACA;AACA,aAAO,MAAM,wCAAwFH,sBAAuB;QAIxH,YAAY,SAAY,SAAoC;AACxD,gBAAM,gBAAgBE,kBAAiB,OAAO;AAG9C,cAAIC,6BAA4B,aAAa,GAAG;AAC5C,kBAAM,IAAI,UAAS;UACvB;AAEA,gBAAM,gBAAgB,EAAE,GAAGJ,mBAAiB,GAAG,QAAO;AACtD,gBAAM,wCAAwCE,6CAA4C,eAAe,aAAa;AAEtH,gBAAM,SAAS,OAAO,uCAA8D,IAAI;AAExF,eAAK,yCAAyC;QAClD;QAEA,IAAI,SAAM;AACN,iBAAO,KAAK,uCAAuC;QACvD;;IAER;;;;;ACpCA,IAAa;AAAb;;AAAO,IAAM,8CAA6F,CACtGG,uBACAC,yCACAC,mBACAC,iCACA;AACA,aAAO,MAAM,mCAAmFH,sBAAuB;QAInH,YAAY,SAAY,SAAuC;AAC3D,gBAAM,gBAAgBE,kBAAiB,OAAO;AAC9C,gBAAM,mCAAmCD,wCAAuC,eAAe,OAAO;AAGtG,cAAIE,6BAA4B,aAAa,GAAG;AAC5C,kBAAM,IAAI,UAAS;UACvB;AAEA,gBAAM,SAAS,MAAM,kCAAyD,IAAI;AAElF,eAAK,oCAAoC;QAC7C;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,kCAAkC;QAClD;;IAER;;;;;AC5BA,IAAa;AAAb;;AAAO,IAAM,mDAAuG,CAChHC,uBACAC,8CACAC,sBACA;AACA,aAAO,MAAM,wCAAwFF,sBAAuB;QAExH,YAAY,SAAY,SAA4C;AAChE,gBAAM,gBAAgBE,kBAAiB,OAAO;AAC9C,gBAAM,wCAAwCD,6CAA4C,eAAe,OAAO;AAEhH,gBAAM,SAAS,MAAM,uCAA8D,IAAI;QAC3F;;IAER;;;;;ACjBA,IAWa;AAXb;;;AACA;AAUO,IAAM,uCAA+E,CACxFE,0BACAC,0BACAC,qBACAC,qCACAC,mCACA;AACA,aAAO,MAAM,4BAA4BD,oCAAwD;QAW7F,YAAY,UAAgC,CAAA,GAAE;AAC1C,cAAIC,mCAAkC,MAAM;AACxC,kBAAM,IAAI,MAAM,8CAA8C;UAClE;AAEA,cAAI;AAEJ,cAAI;AACA,iCAAqB,IAAIA,+BAA8B,OAAO;UAClE,SAAS,KAAK;AAEV,gBAAI,IAAI,SAAS,MAAM,IAAI,YAAY,8BAA8B;AACjE,oBAAMH,yBAAuB;YACjC;AAEA,kBAAM;UACV;AAGA,cAAI,uBAAuB,MAAM;AAC7B,kBAAMC,oBAAkB;UAC5B;AAGA,cAAI,CAAC,mBAAmB,QAAQ,WAAW,GAAG;AAC1C,kBAAM,IAAI,UACN,uBAAuB,QAAQ,WAAW,kEAAkE;UAEpH;AAGA,cAAI,QAAQ,eAAe,UAAa,mBAAmB,eAAe,QAAQ,YAAY;AAC1F,kBAAMD,yBAAuB;UACjC;AAEA,gBAAM,oBAAoB,CAAC;AAE3B,gBAAM,EAAE,YAAW,IAAK;AACxB,gBAAM,EAAE,WAAU,IAAK;AAGvB,eAAK,eACD,OAAO,mBAAmB,gBAAgB,WACpC,mBAAmB,cACnB,gBAAgB,aAChB,MAAM,aACN,gBAAgB,iBAAiB,gBAAgB,SACjD,MAAM,aACN,gBAAgB,aAChB,OAAO;;;;;YAKN,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,KAAK,MAAO,cAAc,aAAc,GAAG,CAAC,CAAC,IAAI,MAAO;;AAC7F,eAAK,sBAAsB;AAG3B,cAAIG,+BAA8B,SAAS,sBAAsB;AAC7D,iBAAK,kBAAkB,mBAAmB,WAAU;AACpD,iBAAK,wBAAwB,mBAAmB,iBAAgB;AAEhE,iBAAK,gBAAgB,KAAK,QAAQ;AAElC,iBAAK,sBAAsB,QAAQ,KAAK,eAAe,EAAE,QAAQ,mBAAmB,WAAW;AAC/F,iBAAK,sBAAsB,MAAK;UACpC,OAAO;AACH,iBAAK,kBAAkB;AACvB,iBAAK,wBAAwB;UACjC;AAEA,eAAK,SAAS;AAMd,cAAI,mBAAmB,UAAU,WAAW;AACxC,iBAAK,SAAS;AAEd,kBAAM,cAAc,MAAK;AACrB,kBAAI,KAAK,WAAW,aAAa;AAC7B,qBAAK,SAAS;cAClB;AAEA,iCAAmB,oBAAoB,eAAe,WAAW;YACrE;AAEA,+BAAmB,iBAAiB,eAAe,WAAW;UAClE;QACJ;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK,WAAW,OAAO,KAAK,SAAS,KAAK,oBAAoB;QACzE;QAEO,QAAK;AAER,cAAI,KAAK,UAAU,UAAU;AACzB,mBAAO,KAAK,oBAAoB,MAAK,EAAG,KAAK,MAAK;AAC9C,oBAAMJ,yBAAuB;YACjC,CAAC;UACL;AAGA,cAAI,KAAK,WAAW,aAAa;AAC7B,iBAAK,SAAS;UAClB;AAEA,iBAAO,KAAK,oBAAoB,MAAK,EAAG,KAAK,MAAK;AAC9C,gBAAI,KAAK,oBAAoB,QAAQ,KAAK,0BAA0B,MAAM;AACtE,mBAAK,sBAAsB,KAAI;AAE/B,mBAAK,gBAAgB,WAAU;AAC/B,mBAAK,sBAAsB,WAAU;YACzC;AAEA,iCAAqB,IAAI;UAC7B,CAAC;QACL;QAEO,SAAM;AACT,cAAI,KAAK,WAAW,aAAa;AAC7B,mBAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACnC,oBAAM,iBAAiB,MAAK;AACxB,qBAAK,oBAAoB,oBAAoB,eAAe,cAAc;AAE1E,oBAAI,KAAK,oBAAoB,UAAU,WAAW;AAC9C,0BAAO;gBACX,OAAO;AACH,uBAAK,OAAM,EAAG,KAAK,SAAS,MAAM;gBACtC;cACJ;AAEA,mBAAK,oBAAoB,iBAAiB,eAAe,cAAc;YAC3E,CAAC;UACL;AAEA,iBAAO,KAAK,oBAAoB,OAAM,EAAG,MAAM,CAAC,QAAO;AAGnD,gBAAI,QAAQ,UAAa,IAAI,SAAS,IAAI;AACtC,oBAAMA,yBAAuB;YACjC;AAEA,kBAAM;UACV,CAAC;QACL;QAEO,UAAO;AACV,iBAAO,KAAK,oBAAoB,QAAO,EAAG,MAAM,CAAC,QAAO;AAEpD,gBAAI,QAAQ,QAAW;AACnB,oBAAMA,yBAAuB;YACjC;AAEA,kBAAM;UACV,CAAC;QACL;;IAER;;;;;ACjMA,IAIa;AAJb;;;AAIO,IAAM,2CAAuF,CAChGK,kCACAC,sBACAC,yBACAC,8BACAC,kCACAC,uBACA;AACA,aAAO,MAAM,gCACDH,wBAAwD;QAShE,YAAoB,gBAAgC,kBAAwB;AACxE,gBAAM,cAAc;AADJ,eAAA,iBAAA;AAGhB,wBAAc,IAAiB,MAAO,cAAc;AAEpD,cAAIC,6BAA4B,cAAc,GAAG;AAC7C,YAAAC,iCAAgC,IAAI,gBAAgB,oBAAI,IAAG,CAAE;UACjE;AAEA,eAAK,eAAe,IAAIJ,iCAA6C,MAAO,gBAAgB;AAC5F,eAAK,YAAYC,qBAAiC,MAAO,cAAc;AACvE,eAAK,iBAAiB;QAC1B;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,eAAe;QAC/B;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK;QAChB;QAEA,IAAI,WAAQ;AACR,iBAAO,KAAK;QAChB;QAEA,IAAI,gBAAa;AACb,iBAAO,KAAK;QAChB;QAEA,IAAI,cAAc,OAAK;AACnB,gBAAM,kBAAkB,OAAO,UAAU,aAAaI,mBAAkB,MAAM,KAAK,IAAI;AAEvF,eAAK,eAAe,gBAAgB;AAEpC,gBAAM,sBAAsB,KAAK,eAAe;AAEhD,eAAK,iBAAiB,wBAAwB,QAAQ,wBAAwB,kBAAkB,QAAQ;QAC5G;QAEA,IAAI,aAAU;AACV,iBAAO,KAAK,eAAe;QAC/B;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK,eAAe;QAC/B;;IAER;;;;;ACpEA,IAAa;AAAb;;AAAO,IAAM,qBAAqB,CAAC,kBAA0C;AAEzE,YAAM,cAAc,IAAI,YAAY,CAAC,YAAY,IAAI,YAAY,WAAW,IAAI,QAAQ,OAAO,QAAQ,SAAS,YAAY,GAAG,CAAC,CAAC;AAEjI,UAAI;AAEA,cAAMC,WAAU,cAAc,gBAA6B,YAAY,QAAQ,MAAK;QAEpF,CAAC;AAED,YAAIA,aAAY,QAAW;AACvB,iBAAO;QACX;AAEA,QAAAA,SAAQ,MAAM,MAAK;QAEnB,CAAC;AAED,eAAO;MACX,QAAQ;MAER;AAEA,aAAO;IACX;;;;;AC1BA,IAKMC,mBAIO;AATb;;;AACA;AAIA,IAAMA,oBAAkB;MACpB,kBAAkB;;AAGf,IAAM,8CAA6F,CACtGC,kBACAC,0BACAC,kCACAC,qCACAC,oBACA;AACA,aAAO,MAAM,mCAAmCD,oCAA+D;QAQ3G,YAAY,SAAoC;AAC5C,gBAAM,EAAE,QAAQ,kBAAkB,WAAU,IAAK,EAAE,GAAGJ,mBAAiB,GAAG,QAAO;AAEjF,gBAAM,4BAA4BG,iCAAgC,kBAAkB,QAAQ,UAAU;AAGtG,cAAI,CAACF,iBAAgB,oBAAoB,MAAM,mBAAmB,yBAAyB,CAAC,GAAG;AAC3F,sCAA0B,iBACtB,eACC,uBAAK;AACF,kBAAI,IAAI;AAER,oBAAM,wBAAwB,CAAC,UAAgB;AAC3C,oBAAI,KAAK,WAAW,WAAW;AAC3B,sBAAI,IAAI,GAAG;AACP,8CAA0B,oBAAoB,eAAe,qBAAqB;AAClF,0BAAM,yBAAwB;AAE9B,yBAAK,2BAA2B,KAAK;kBACzC,OAAO;AACH,yBAAK;kBACT;gBACJ;cACJ;AAEA,qBAAO;YACX,GAAE,CAAE;UAEZ;AAEA,gBAAM,2BAA2B,gBAAgB;AAEjD,eAAK,UAAU;AACf,eAAK,6BAA6B;AAClC,eAAK,SAAS;QAClB;QAEA,IAAI,SAAM;AAEN,cAAI,KAAK,2BAA2B,WAAW,QAAW;AACtD,mBAAO,KAAK;UAChB;AAEA,iBAAO,KAAK,2BAA2B;QAC3C;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK,WAAW,OAAO,KAAK,2BAA2B,QAAQ,KAAK;QAC/E;QAEO,iBAAc;AAKjB,cAAI,KAAK,WAAW,WAAW;AAC3B,mBAAO,QAAQ,OAAOC,yBAAuB,CAAE;UACnD;AAEA,eAAK,SAAS;AAEd,iBAAOG,gBAAe,KAAK,aAAa,KAAK,0BAA0B,EAAE,QAAQ,MAAK;AAClF,iBAAK,SAAS;AAEd,iCAAqB,IAAI;UAC7B,CAAC;QACL;QAEQ,2BAA2B,OAAY;AAC3C,cAAI,KAAK,WAAW,MAAM;AACtB,iBAAK,2BAA2B,cAAc,KAAK;UACvD,OAAO;AACH,uBAAW,MAAM,KAAK,2BAA2B,KAAK,CAAC;UAC3D;QACJ;;IAER;;;;;AClGA,IAAa;AAAb;;AAAO,IAAM,2BAAuD,CAACC,qBAAoBC,uBAAqB;AAC1G,aAAO,CAAC,iBAAiB,eAAe,qBAAoB;AACxD,cAAM,cAAc,oBAAI,IAAG;AAE3B,wBAAgB,UAAwC,kBAACC,aAAW;AAEhE,iBAAO,CAAC,aAAmD,SAAS,GAAG,QAAgB,MAA8B;AACjH,kBAAM,kBAAkB,YAAY,SAAS;AAE7C,gBAAID,mBAAkB,WAAW,GAAG;AAEuD,cAAAC,SAAS,KAC5F,iBACA,aACA,QACA,KAAK;AAGT,cAAAF,oBACI,aACA,CAAC,aAAa,QAAQ,KAAK,GAC3B,CAAC,eAAe,WAAW,CAAC,MAAM,eAAe,WAAW,CAAC,MAAM,UAAU,WAAW,CAAC,MAAM,OAC/F,IAAI;AAGR,kBAAI,iBAAiB;AACjB,8BAAa;cACjB;AAEA,qBAAO;YACX;AAEA,YAAAE,SAAQ,KAAK,iBAAiB,aAAa,MAAM;AAEjD,YAAAF,oBACI,aACA,CAAC,aAAa,MAAM,GACpB,CAAC,eAAe,WAAW,CAAC,MAAM,eAAe,WAAW,CAAC,MAAM,QACnE,IAAI;AAGR,gBAAI,iBAAiB;AACjB,4BAAa;YACjB;AAEA;UACJ;QACJ,GAAG,gBAAgB,OAAO;AAE1B,wBAAgB,aAAc,kBAACG,gBAAc;AACzC,iBAAO,CAAC,qBAAqE,QAAiB,UAAwB;AAClH,kBAAM,eAAe,YAAY,OAAO;AAExC,gBAAI,wBAAwB,QAAW;AACnC,cAAAA,YAAW,MAAM,eAAe;AAEhC,0BAAY,MAAK;YACrB,WAAW,OAAO,wBAAwB,UAAU;AAErB,cAAAA,YAAY,KAAK,iBAAiB,mBAAmB;AAEhF,yBAAW,cAAc,aAAa;AAClC,oBAAI,WAAW,CAAC,MAAM,qBAAqB;AACvC,8BAAY,OAAO,UAAU;gBACjC;cACJ;YACJ,OAAO;AACH,kBAAIF,mBAAkB,mBAAmB,GAAG;AAEmC,gBAAAE,YAAY,KACnF,iBACA,qBACA,QACA,KAAK;cAEb,OAAO;AAEyD,gBAAAA,YAAY,KACpE,iBACA,qBACA,MAAM;cAEd;AAEA,yBAAW,cAAc,aAAa;AAClC,oBACI,WAAW,CAAC,MAAM,wBACjB,WAAW,UAAa,WAAW,CAAC,MAAM,YAC1C,UAAU,UAAa,WAAW,CAAC,MAAM,QAC5C;AACE,8BAAY,OAAO,UAAU;gBACjC;cACJ;YACJ;AAEA,kBAAM,iBAAiB,YAAY,SAAS;AAE5C,gBAAI,gBAAgB,gBAAgB;AAChC,+BAAgB;YACpB;UACJ;QACJ,GAAG,gBAAgB,UAAU;AAE7B,eAAO;MACX;IACJ;;;;;AC3GA,IAAa;AAAb;;AAAO,IAAM,8BAA8B,CACvC,iBACA,SACA,WACA;AACA,YAAM,QAAQ,QAAQ,MAAM;AAE5B,UAAI,UAAU,UAAa,UAAU,gBAAgB,MAAM,GAAG;AAC1D,wBAAgB,MAAM,IAAI;MAC9B;IACJ;;;;;ACRA,IAEa;AAFb;;;AAEO,IAAM,+BAA+B,CAAC,iBAAmC,YAAoC;AAChH,kCAA4B,iBAAiB,SAAS,cAAc;AACpE,kCAA4B,iBAAiB,SAAS,kBAAkB;AACxE,kCAA4B,iBAAiB,SAAS,uBAAuB;IACjF;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,sDAAsD,CAAC,uBAAoD;AACpH,aAAO,OAAO,mBAAmB,2BAA2B;IAChE;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,+CAA+C,CAAC,uBAAiD;AAC1G,yBAAmB,yBAAyB,CAACC,WAAuB;AAChE,cAAM,qBAAqB,IAAI,WAAWA,OAAM,MAAM;AAEtD,2BAAmB,sBAAsB,kBAAkB;AAE3D,cAAM,SAAS,KAAK,IAAI,mBAAmB,QAAQ,mBAAmB,OAAO;AAE7E,iBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,UAAAA,OAAM,CAAC,KAAK,mBAAmB,CAAC,IAAI,OAAO;QAC/C;AAEA,eAAOA;MACX;IACJ;;;;;AChBA,IAMa;AANb;;;AACA;AACA;AACA;AAGO,IAAM,kCAAqE,CAACC,kBAAiBC,0BAAwB;AACxH,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,qBAAqB,cAAc,eAAc;AAGvD,qCAA6B,oBAAoB,OAAO;AAGxD,YAAI,EAAE,QAAQ,cAAc,QAAQ,cAAc;AAC9C,gBAAMA,sBAAoB;QAC9B;AAEA,oCAA4B,oBAAoB,SAAS,SAAS;AAClE,oCAA4B,oBAAoB,SAAS,aAAa;AACtE,oCAA4B,oBAAoB,SAAS,aAAa;AACtE,oCAA4B,oBAAoB,SAAS,uBAAuB;AAGhF,YACI,CAACD,iBAAgB,qDAAqD,MAClE,oDAAoD,kBAAkB,CAAC,GAE7E;AACE,uDAA6C,kBAAkB;QACnE;AAEA,eAAO;MACX;IACJ;;;;;AChCA,IAAa;AAAb;;AAAO,IAAM,qCAA2E,CAACE,YAAU;AAC/F,UAAIA,YAAW,MAAM;AACjB,eAAO;MACX;AAEA,UAAIA,QAAO,eAAe,aAAa,GAAG;AACtC,eAAOA,QAAO;MAClB;AAEA,aAAO;IACX;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,uCAAuC,CAChD,iBACA,SACA,eACA;AACA,YAAM,QAAQ,QAAQ,UAAU;AAEhC,UAAI,UAAU,UAAa,UAAU,gBAAgB,UAAU,EAAE,OAAO;AACpE,wBAAgB,UAAU,EAAE,QAAQ;MACxC;IACJ;;;;;ACVA,IAGa;AAHb;;IAAAC;AAGO,IAAM,uDAAuD,CAAC,gCAAmE;AACpI,kCAA4B,QAAS,kBAAC,UAAS;AAC3C,YAAI,cAAc;AAElB,eAAO,CAAC,OAAO,GAAG,SAAS,GAAGC,cAAqB;AAC/C,cAAI,aAAa;AACb,kBAAMC,yBAAuB;UACjC;AAEA,gBAAM,KAAK,6BAA6B,MAAM,QAAQD,SAAQ;AAE9D,wBAAc;QAClB;MACJ,GAAG,4BAA4B,KAAK;IACxC;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,4DAA4D,CACrE,mCACM;AACN,qCAA+B,QAAS,kBAAC,UAAS;AAC9C,eAAO,CAAC,OAAO,GAAG,SAAS,GAAGE,cAAqB;AAC/C,cAAK,OAAOA,cAAa,YAAYA,YAAW,KAAM,SAAS,KAAK,OAAO,GAAG;AAC1E,kBAAM,IAAI,WAAW,mCAAmC;UAC5D;AAG4D,gBAAO,KAAK,gCAAgC,MAAM,QAAQA,SAAQ;QAClI;MACJ,GAAG,+BAA+B,KAAK;IAC3C;;;;;ACbA,IAAa;AAAb;;AAAO,IAAM,2DAA2D,CACpE,mCACM;AACN,qCAA+B,OAAQ,kBAAC,SAAQ;AAC5C,eAAO,CAAC,OAAO,MAAK;AAChB,cAAI,OAAO,GAAG;AACV,kBAAM,IAAI,WAAW,kCAAkC;UAC3D;AAEA,eAAK,KAAK,gCAAgC,IAAI;QAClD;MACJ,GAAG,+BAA+B,IAAI;IAC1C;;;;;ACdA,IAQa;AARb;;;AACA;AACA;AACA;AACA;AACA;AAGO,IAAM,2CAAuF,CAChGC,sBACAC,kBACAC,8DACAC,4DACAC,4DACAC,mEACAC,gEACAC,kEACA,qDACA,oDACAC,4DACA;AACA,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,8BAA8B,cAAc,mBAAkB;AAEpE,qCAA6B,6BAA6B,OAAO;AAEjE,6CAAqC,6BAA6B,SAAS,cAAc;AAEzF,oCAA4B,6BAA6B,SAAS,QAAQ;AAI1E,oCAA4B,6BAA6B,SAAS,MAAM;AACxE,oCAA4B,6BAA6B,SAAS,SAAS;AAC3E,oCAA4B,6BAA6B,SAAS,WAAW;AAG7E,YACI,CAACP,iBAAgBC,8DAA6D,MAC1EA,6DAA4D,aAAa,CAAC,GAEhF;AACE,+DAAqD,2BAA2B;QACpF;AAGA,YACI,CAACD,iBAAgBE,4DAA2D,MACxEA,2DAA0D,aAAa,CAAC,GAE9E;AACE,8DAAoD,2BAA2B;QACnF;AAGA,YACI,CAACF,iBAAgBG,4DAA2D,MACxEA,2DAA0D,aAAa,CAAC,GAE9E;AACE,6DAAmD,6BAA6B,aAAa;QACjG;AAGA,YACI,CAACH,iBAAgBI,mEAAkE,MAC/EA,kEAAiE,aAAa,CAAC,GAErF;AACE,oEAA0D,2BAA2B;QACzF;AAGA,YACI,CAACJ,iBAAgBK,gEAA+D,MAC5EA,+DAA8D,aAAa,CAAC,GAElF;AACE,UAAAE,wDAAuD,6BAA6B,aAAa;QACrG;AAGA,YACI,CAACP,iBAAgBM,kEAAiE,MAC9EA,iEAAgE,aAAa,CAAC,GAEpF;AACE,mEAAyD,2BAA2B;QACxF;AAGA,QAAAP,qBAAoB,eAAe,2BAA2B;AAE9D,eAAO;MACX;IACJ;;;;;AC7FA,IAAa;AAAb;;AAAO,IAAM,sCAA6E,CAACS,YAAU;AACjG,UAAIA,YAAW,MAAM;AACjB,eAAO;MACX;AAEA,UAAIA,QAAO,eAAe,cAAc,GAAG;AACvC,eAAOA,QAAO;MAClB;AAEA,aAAOA,QAAO,eAAe,oBAAoB,IAAUA,QAAQ,qBAAqB;IAC5F;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,0CAAqF,CAC9FC,uBACAC,wBACA;AACA,aAAO,CAAC,eAAe,cAAc,sCAAqC;AACtE,cAAM,6BAA6B,cAAc;AAGjD,YAAI,2BAA2B,iBAAiB,cAAc;AAC1D,cAAI;AACA,uCAA2B,eAAe;UAC9C,QAAQ;UAER;QACJ;AAGA,YAAI,qCAAqC,2BAA2B,qBAAqB,YAAY;AACjG,qCAA2B,mBAAmB;QAClD;AAGA,YAAI,2BAA2B,oBAAoB,GAAG;AAClD,iBAAO,eAAe,4BAA4B,mBAAmB;YACjE,OAAO;WACV;QACL;AAGA,cAAM,WAAWD,sBAAqB,eAAe;UACjD;UACA,kBAAkB,2BAA2B;UAC7C,uBAAuB,2BAA2B;UAClD,MAAM;SACT;AAED,QAAAC,oBACI,UACA,gBACA,CAAC,QAAQ,MAAM,IAAI,KAAK,QAAQ,GAChC,CAACC,SAAQ,CAAC,UAAS;AACf,UAAAA,KAAI,KAAK,UAAU,KAAK;AAExB,cAAI;AACA,uCAA2B,eAAe;UAC9C,SAAS,KAAK;AAEV,gBAAI,QAAQ,2BAA2B,iBAAiB;AACpD,oBAAM;YACV;UACJ;QACJ,CAAC;AAGL,QAAAD,oBACI,UACA,oBACA,CAAC,QAAQ,MAAM,IAAI,KAAK,QAAQ,GAChC,CAACC,SAAQ,CAAC,UAAS;AACf,UAAAA,KAAI,KAAK,UAAU,KAAK;AACxB,qCAA2B,mBAAmB;QAClD,CAAC;AAGL,QAAAD,oBACI,UACA,yBACA,CAAC,QAAQ,MAAM,IAAI,KAAK,QAAQ,GAChC,CAACC,SAAQ,CAAC,UAAS;AACf,UAAAA,KAAI,KAAK,UAAU,KAAK;AACxB,qCAA2B,wBAAwB;QACvD,CAAC;AAGL,eAAO,eAAe,UAAU,mBAAmB;UAC/C,KAAK,MAAM,2BAA2B;SACzC;AAGD,iBAAS,QAAQ,0BAA0B;AAE3C,eAA8F;MAClG;IACJ;;;;;ACnFA,IAAa;AAAb;;AAAO,IAAM,0CAAqF,CAACC,YAAU;AACzG,UAAIA,YAAW,MAAM;AACjB,eAAO;MACX;AAEA,aAAOA,QAAO,eAAe,kBAAkB,IAAIA,QAAO,mBAAmB;IACjF;;;;;ACNA,IAAa;AAAb;;AAAO,IAAM,2CAA2C,CAAC,4BAA2D;AAChH,YAAM,EAAE,MAAK,IAAK,IAAI,eAAc;AAEpC,UAAI;AAEA,cAAM,YAAY,uBAAuB;MAC7C;AACI,cAAM,MAAK;MACf;IACJ;;;;;ACXA,IAGa;AAHb;;;AAGO,IAAM,sCAA6E,CACtFC,0BACAC,oCACAC,uBACAC,0BACAC,wBACA;AACA,aAAO,CAAC,eAAe,aAAaC,oCAAmC,MAAM,sBAAsB,YAAW;AAC1G,YAAIA,uCAAsC,MAAM;AAC5C,cAAI;AACA,kBAAM,yBAAyB,IAAIA,mCAC/B,eACA,MACgC,OAAO;AAE3C,kBAAM,wBAGF,oBAAI,IAAG;AAEX,gBAAI,mBAAgE;AAEpE,mBAAO,iBAAiB,wBAAwB;;;;;cAK5C,cAAc;gBACV,KAAK,MAAM,QAAQ;gBACnB,KAAK,MAAK;AACN,wBAAML,yBAAuB;gBACjC;;cAEJ,kBAAkB;gBACd,KAAK,MAAM;gBACX,KAAK,MAAK;AACN,wBAAMA,yBAAuB;gBACjC;;;cAGJ,kBAAkB;gBACd,KAAK,MAAM;gBACX,KAAK,CAAC,UAAS;AACX,sBAAI,OAAO,qBAAqB,YAAY;AACxC,2CAAuB,oBAAoB,kBAAkB,gBAAgB;kBACjF;AAEA,qCAAmB,OAAO,UAAU,aAAa,QAAQ;AAEzD,sBAAI,OAAO,qBAAqB,YAAY;AACxC,2CAAuB,iBAAiB,kBAAkB,gBAAgB;kBAC9E;gBACJ;;aAEP;AAED,mCAAuB,mBAAoB,kBAAC,qBAAoB;AAC5D,qBAAO,IAAI,SAAkG;AACzG,oBAAI,KAAK,CAAC,MAAM,kBAAkB;AAC9B,wBAAM,yBACF,OAAO,KAAK,CAAC,MAAM,aACb,KAAK,CAAC,IACN,OAAO,KAAK,CAAC,MAAM,YAAY,KAAK,CAAC,MAAM,QAAQ,OAAO,KAAK,CAAC,EAAE,gBAAgB,aAClF,KAAK,CAAC,EAAE,cACR;AAEV,sBAAI,2BAA2B,MAAM;AACjC,0BAAM,uBAAuB,sBAAsB,IAAI,KAAK,CAAC,CAAC;AAE9D,wBAAI,yBAAyB,QAAW;AACpC,2BAAK,CAAC,IAAI;oBACd,OAAO;AACH,2BAAK,CAAC,IAAI,CAAC,UAAgB;AAEvB,4BAAI,MAAM,SAAS,SAAS;AACxB,iCAAO,iBAAiB,OAAO;4BAC3B,MAAM,EAAE,OAAO,iBAAgB;2BAClC;AAED,iDAAuB,KAAK;wBAChC,OAAO;AACH,iDAAuB,IAAI,WAAW,KAAK,CAAC,GAAG,EAAE,GAAG,MAAK,CAAE,CAAC;wBAChE;sBACJ;AAEA,4CAAsB,IAAI,wBAAwB,KAAK,CAAC,CAAC;oBAC7D;kBACJ;gBACJ;AAGA,iCAAiB,KAAK,wBAAwB,SAAS,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AAEvE,uBAAO,iBAAiB,KAAK,wBAAwB,GAAG,IAAI;cAChE;YACJ,GAAG,uBAAuB,gBAAgB;AAE1C,mCAAuB,sBAAuB,kBAAC,wBAAuB;AAClE,qBAAO,IAAI,SAAqB;AAC5B,oBAAI,KAAK,CAAC,MAAM,kBAAkB;AAC9B,wBAAM,uBAAuB,sBAAsB,IAAI,KAAK,CAAC,CAAC;AAE9D,sBAAI,yBAAyB,QAAW;AACpC,0CAAsB,OAAO,KAAK,CAAC,CAAC;AAEpC,yBAAK,CAAC,IAAI;kBACd;gBACJ;AAGA,oCAAoB,KAAK,wBAAwB,SAAS,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AAE1E,uBAAO,oBAAoB,KAAK,wBAAwB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;cACrF;YACJ,GAAG,uBAAuB,mBAAmB;AAM7C,gBAAI,QAAQ,oBAAoB,GAAG;AAC/B,oBAAM,iBAAiBE,sBAAqB,eAAe;gBACvD,cAAc;gBACd,kBAAkB;gBAClB,uBAAuB;gBACvB,MAAM;eACT;AAED,qCAAuB,QAAQ,cAAc,EAAE,QAAQ,cAAc,WAAW;AAEhF,oBAAM,gBAAgB,MAAM,eAAe,WAAU;AACrD,oBAAM,mBAAmB,MAAM,eAAe,QAAQ,cAAc,WAAW;AAG/E,qBAAOE,oBAAmB,wBAAwB,eAAe,gBAAgB;YACrF;AAEA,mBAAO;UACX,SAAS,KAAK;AAEV,gBAAI,IAAI,SAAS,IAAI;AACjB,oBAAMD,yBAAuB;YACjC;AAEA,kBAAM;UACV;QACJ;AAGA,YAAI,yBAAyB,QAAW;AACpC,gBAAMA,yBAAuB;QACjC;AAEA,iDAAyC,OAAO;AAEhD,eAAOF,mCAAkC,eAAe,aAAa,sBAAsB,OAAO;MACtG;IACJ;;;;;AChKA,IAAa;AAAb;;AAAO,IAAM,oBAAoB,CAAC,aAA4B,eAAsB;AAChF,UAAI,gBAAgB,MAAM;AACtB,eAAO;MACX;AAEA,aAAO,KAAK,IAAI,KAAK,KAAK,IAAI,OAAO,KAAK,IAAI,GAAG,KAAK,MAAM,KAAK,KAAK,cAAc,UAAU,CAAC,CAAC,CAAC,CAAC;IACtG;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,+BAA+B,CAAC,4BAAwF;AACjI,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAU;AACnC,cAAM,EAAE,OAAO,MAAK,IAAK,IAAI,eAAc;AAE3C,cAAM,YAAY,CAAC,EAAE,KAAI,MAAM;AAC3B,gBAAM,MAAK;AACX,gBAAM,MAAK;AAEX,kBAAQ,IAAI;QAChB;AACA,cAAM,iBAAiB,CAAC,EAAE,KAAI,MAAM;AAChC,gBAAM,MAAK;AACX,gBAAM,MAAK;AAEX,iBAAO,IAAI;QACf;AAGA,cAAM,YAAY,uBAAuB;MAC7C,CAAC;IACL;;;;;ACrBA,IAEa;AAFb;;;AAEO,IAAM,qCAAqC,OAC9C,sBACA,4BACiC;AACjC,YAAM,gCAAgC,MAAM,6BAA6B,uBAAuB;AAEhG,aAAO,IAAI,qBAAqB,6BAA6B;IACjE;;;;;ACVA,IAKa;AALb;;;AAGA;AAEO,IAAM,8BAA8B,CACvC,eACA,wBACA,sBACA,4BACiC;AACjC,UAAI,qBAAqB,uBAAuB,IAAI,aAAa;AAEjE,UAAI,uBAAuB,QAAW;AAClC,6BAAqB,oBAAI,QAAO;AAEhC,+BAAuB,IAAI,eAAe,kBAAkB;MAChE;AAEA,YAAM,+BAA+B,mCAAmC,sBAAsB,uBAAuB;AAErH,yBAAmB,IAAI,wBAAwB,4BAA4B;AAE3E,aAAO;IACX;;;;;ACxBA,IAmBa;AAnBb;;;AACA;AACA;AACA;AACA;AACA;AAEA;AAYO,IAAM,2CAAuF,CAChGK,yBACAC,uBACAC,0BACAC,gCACAC,kCACAC,iCACAC,uBACAC,kCACAC,0BACAC,4BACAC,mCACAC,kCACAC,wBACA;AACA,aAAO,CAAC,eAAe,aAAa,sBAAsB,YAAW;AACjE,YAAI,QAAQ,mBAAmB,KAAK,QAAQ,oBAAoB,GAAG;AAC/D,gBAAMJ,yBAAuB;QACjC;AAEA,cAAM,qBAAqB,MAAM,QAAQ,QAAQ,kBAAkB,IAC7D,QAAQ,qBACR,MAAM,KAAK,QAAQ,kBAAkB;AAG3C,YAAI,mBAAmB,KAAK,CAAC,iBAAiB,eAAe,CAAC,GAAG;AAC7D,gBAAMA,yBAAuB;QACjC;AAEA,YAAI,mBAAmB,WAAW,QAAQ,iBAAiB;AACvD,gBAAMP,sBAAoB;QAC9B;AAGA,YAAI,QAAQ,qBAAqB,YAAY;AACzC,gBAAMO,yBAAuB;QACjC;AAEA,cAAM,wBAAwB,QAAQ,eAAe,QAAQ;AAC7D,cAAM,yBAAyB,mBAAmB,OAAO,CAAC,KAAK,UAAU,MAAM,OAAO,CAAC;AACvF,cAAM,qBACF,qBAAqB,yBAAyB,SAAY,IAAI,qBAAqB,qBAAqB;AAG5G,YAAI,wBAAwB,qBAAqB,KAAK,yBAAyB,GAAG;AAC9E,gBAAMA,yBAAuB;QACjC;AAEA,cAAM,iBAAiB,IAAI,eAAc;AACzC,cAAM,YAA+B,CAAA;AACrC,cAAM,4BAA0D,CAAA;AAEhE,iBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,oBAAU,KACNF,sBAAqB,eAAe;YAChC,cAAc,QAAQ;YACtB,kBAAkB,QAAQ;YAC1B,uBAAuB,QAAQ;YAC/B,MAAM;WACT,CAAC;AAEN,oCAA0B,KACtBF,iCAAgC,eAAe;YAC3C,cAAc,QAAQ;YACtB,kBAAkB;YAClB,uBAAuB;YACvB,iBAAiB,QAAQ;WAC5B,CAAC;QAEV;AAEA,cAAM,sBAAmD,CAAA;AAEzD,YAAI,qBAAqB,yBAAyB,QAAW;AACzD,qBAAW,EAAE,cAAc,UAAU,UAAU,KAAI,KAAM,qBAAqB,sBAAsB;AAChG,kBAAM,qBAAqBC,gCAA+B,eAAe;cACrE,cAAc;cACd,kBAAkB;cAClB,uBAAuB;cACvB,QACI,QAAQ,cAAc,IAAI,MAAM,SAC1B,QAAQ,cAAc,IAAI,IAC1B,iBAAiB,SACjB,IACA;aACb;AAED,mBAAO,iBAAiB,mBAAmB,QAAQ;cAC/C,cAAc;gBACV,KAAK,MAAO,iBAAiB,SAAY,IAAI;;cAEjD,UAAU;gBACN,KAAK,MAAO,aAAa,SAAY,6BAA6B;;cAEtE,UAAU;gBACN,KAAK,MAAO,aAAa,SAAY,6BAA6B;;aAEzE;AAED,gCAAoB,KAAK,kBAAkB;UAC/C;QACJ;AAEA,cAAM,yBAAyBF,+BAA8B,eAAe;UACxE,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,gBAAgB,KAAK,IAAI,GAAG,wBAAwB,kBAAkB;SACzE;AACD,cAAM,aAAa,kBAAkB,aAAa,cAAc,UAAU;AAC1E,cAAM,sBAAsBI;UACxB;UACA;UACA,wBAAwB;;UAExB,KAAK,IAAI,GAAG,sBAAsB;QAAC;AAEvC,cAAM,4BAA4BH,iCAAgC,eAAe;UAC7E,cAAc,KAAK,IAAI,GAAG,sBAAsB;UAChD,kBAAkB;UAClB,uBAAuB;UACvB,iBAAiB,KAAK,IAAI,GAAG,sBAAsB;SACtD;AACD,cAAM,2BAAuD,CAAA;AAE7D,iBAAS,IAAI,GAAG,IAAI,QAAQ,iBAAiB,KAAK,GAAG;AACjD,mCAAyB,KACrBD,+BAA8B,eAAe;YACzC,cAAc;YACd,kBAAkB;YAClB,uBAAuB;YACvB,gBAAgB,mBAAmB,CAAC;WACvC,CAAC;QAEV;AAEA,iBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,oBAAU,CAAC,EAAE,QAAQ,0BAA0B,CAAC,CAAC;AAEjD,mBAAS,IAAI,GAAG,IAAI,QAAQ,cAAc,KAAK,GAAG;AAC9C,sCAA0B,CAAC,EAAE,QAAQ,wBAAwB,GAAG,IAAI,QAAQ,eAAe,CAAC;UAChG;QACJ;AAEA,cAAM,eAAe,IAAI,YACrB,qBAAqB,yBAAyB,SACxC,CAAA,IACA,qBAAqB,qBAAqB,IAAI,CAAC,EAAE,KAAI,GAAI,UAAS;AAC9D,gBAAM,qBAAqB,oBAAoB,KAAK;AAEpD,6BAAmB,QAAQ,wBAAwB,GAAG,wBAAwB,KAAK;AACnF,6BAAmB,MAAM,CAAC;AAE1B,iBAAoC,CAAC,MAAM,mBAAmB,MAAM;QACxE,CAAC,CAAC;AAGZ,+BAAuB,QAAQ,mBAAmB;AAElD,YAAI,wBAAwB,QAAQ;AACpC,YAAI,mBAAgE;AAGpE,cAAM,mBAAmB,QAAQ,oBAAoB,IAAI,CAAC,mBAAmB,IAAI;AACjF,cAAM,8BAA8B;UAChC,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,QAAQ;UACnB;UACA,IAAI,aAAa,GAAC;AAEd,kBAAMD,yBAAuB;UACjC;UACA,IAAI,mBAAgB;AAChB,mBAAO,QAAQ;UACnB;UACA,IAAI,iBAAiB,GAAC;AAElB,kBAAMA,yBAAuB;UACjC;UACA,IAAI,wBAAqB;AACrB,mBAAO;UACX;UACA,IAAI,sBAAsB,OAAK;AAC3B,uBAAW,YAAY,WAAW;AAC9B,uBAAS,wBAAwB;YACrC;AAEA,oCAAwB;UAC5B;UACA,IAAI,UAAO;AACP,mBAAO,oBAAoB;UAC/B;UACA,IAAI,SAAM;AACN,mBAAO;UACX;UACA,IAAI,iBAAc;AACd,mBAAO,QAAQ;UACnB;UACA,IAAI,kBAAe;AACf,mBAAO,QAAQ;UACnB;UACA,IAAI,mBAAgB;AAChB,mBAAO;UACX;UACA,IAAI,iBAAiB,OAAK;AACtB,gBAAI,OAAO,qBAAqB,YAAY;AACxC,0CAA4B,oBAAoB,kBAAkB,gBAAgB;YACtF;AAEA,+BAAmB,OAAO,UAAU,aAAa,QAAQ;AAEzD,gBAAI,OAAO,qBAAqB,YAAY;AACxC,0CAA4B,iBAAiB,kBAAkB,gBAAgB;YACnF;UACJ;UACA,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,OAAI;AACJ,mBAAO,eAAe;UAC1B;UACA,oBAAoB,MAAW;AAC3B,mBAAO,oBAAoB,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACzE;UACA,SAAsCF,wBAAuB,KAAK,MAAM,gBAAgB;UACxF,YAA4CS,2BAA0B,KAAK,MAAM,gBAAgB;UACjG,iBAAiB,MAAW;AACxB,mBAAO,oBAAoB,cAAc,KAAK,CAAC,CAAC;UACpD;UACA,uBAAuB,MAAW;AAC9B,mBAAO,oBAAoB,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UAC5E;;AAGJ,cAAM,wBAAwG,oBAAI,IAAG;AAErH,uBAAe,MAAM,mBAAoB,kBAAC,qBAAoB;AAC1D,iBAAO,IAAI,SAAkG;AACzG,gBAAI,KAAK,CAAC,MAAM,WAAW;AACvB,oBAAM,yBACF,OAAO,KAAK,CAAC,MAAM,aACb,KAAK,CAAC,IACN,OAAO,KAAK,CAAC,MAAM,YAAY,KAAK,CAAC,MAAM,QAAQ,OAAO,KAAK,CAAC,EAAE,gBAAgB,aAClF,KAAK,CAAC,EAAE,cACR;AAEV,kBAAI,2BAA2B,MAAM;AACjC,sBAAM,uBAAuB,sBAAsB,IAAI,KAAK,CAAC,CAAC;AAE9D,oBAAI,yBAAyB,QAAW;AACpC,uBAAK,CAAC,IAAwC;gBAClD,OAAO;AACH,uBAAK,CAAC,IAAI,CAAC,UAAgB;AACvB,oBAAAC,kCAAiC,cAAc,aAAa,cAAc,YAAY,MAClF,uBAAuB,KAAK,CAAC;kBAErC;AAEA,wCAAsB,IAAI,wBAAwB,KAAK,CAAC,CAAC;gBAC7D;cACJ;YACJ;AAEA,mBAAO,iBAAiB,KAAK,eAAe,OAAO,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UAChF;QACJ,GAAG,eAAe,MAAM,gBAAgB;AAExC,uBAAe,MAAM,sBAAuB,kBAAC,wBAAuB;AAChE,iBAAO,IAAI,SAAqB;AAC5B,gBAAI,KAAK,CAAC,MAAM,WAAW;AACvB,oBAAM,uBAAuB,sBAAsB,IAAI,KAAK,CAAC,CAAC;AAE9D,kBAAI,yBAAyB,QAAW;AACpC,sCAAsB,OAAO,KAAK,CAAC,CAAC;AAEpC,qBAAK,CAAC,IAAI;cACd;YACJ;AAEA,mBAAO,oBAAoB,KAAK,eAAe,OAAO,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACnF;QACJ,GAAG,eAAe,MAAM,mBAAmB;AAE3C,YAAI,YAAsC;AAE1C,eAAO,eAAe,eAAe,OAAO,aAAa;UACrD,KAAK,MAAM;UACX,KAAK,CAAC,UAAS;AACX,gBAAI,OAAO,cAAc,YAAY;AACjC,6BAAe,MAAM,oBAAoB,WAAW,SAAS;YACjE;AAEA,wBAAY,OAAO,UAAU,aAAa,QAAQ;AAElD,gBAAI,OAAO,cAAc,YAAY;AACjC,6BAAe,MAAM,iBAAiB,WAAW,SAAS;AAC1D,6BAAe,MAAM,MAAK;YAC9B;UACJ;SACH;AAED,6BAAqB,UAAU,OAAO,eAAe;AAErD,YAAI,wBAAuD;AAE3D,cAAM,+BAA+B,4BACjC,eACA,6BACA,sBACA,OAAO;AAGX,qCAA6B,KAAK,CAAC,iBAAkB,wBAAwB,YAAa;AAE1F,cAAM,SAAS,mBAAmB,QAAQ,gBAAgB,QAAQ,YAAY;AAC9E,cAAM,UAAU,mBAAmB,QAAQ,iBAAiB,kBAAkB;AAC9E,cAAM,aACF,qBAAqB,yBAAyB,SACxC,CAAA,IACA,qBAAqB,qBAAqB,OACtC,CAAC,QAAQ,EAAE,KAAI,OAAQ,EAAE,GAAG,QAAQ,CAAC,IAAI,GAAG,IAAI,aAAa,GAAG,EAAC,IACjE,CAAA,CAAE;AAGhB,YAAI,WAAW;AAEf,cAAM,yBAAyB,MAAK;AAChC,cAAI,QAAQ,kBAAkB,GAAG;AAC7B,gCAAoB,WAAW,yBAAyB;UAC5D;AAEA,mBAAS,IAAI,GAAG,kCAAkC,GAAG,IAAI,QAAQ,iBAAiB,KAAK,GAAG;AACtF,kBAAM,0BAA0B,yBAAyB,CAAC;AAE1D,qBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAC/C,wCAA0B,WAAW,yBAAyB,kCAAkC,GAAG,CAAC;YACxG;AAEA,+CAAmC,mBAAmB,CAAC;UAC3D;QACJ;AAEA,cAAM,qBAAqB,oBAAI,IAAG;AAGlC,4BAAoB,iBAAiB,CAAC,EAAE,aAAa,aAAY,MAA4B;AACzF,cAAI,0BAA0B,MAAM;AAChC,kBAAM,eAAeC,iCAAgC,2BAA2B;AAEhF,qBAAS,IAAI,GAAG,IAAI,YAAY,KAAK,KAAK;AACtC,uBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,yBAAS,IAAI,GAAG,IAAI,QAAQ,cAAc,KAAK,GAAG;AAC9C,kCAAgB,aAAa,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;gBACnD;cACJ;AAEA,kBAAI,qBAAqB,yBAAyB,QAAW;AACzD,qCAAqB,qBAAqB,QAAQ,CAAC,EAAE,KAAI,GAAI,UAAS;AAClE,kCAAgB,aAAa,YAAY,MAAM,wBAAwB,OAAO,CAAC;gBACnF,CAAC;cACL;AAEA,uBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,yBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAE/C,sBAAI,QAAQ,CAAC,EAAE,CAAC,EAAE,eAAe,GAAG;AAChC,4BAAQ,CAAC,EAAE,CAAC,IAAI,IAAI,aAAa,GAAG;kBACxC;gBACJ;cACJ;AAEA,kBAAI;AACA,sBAAM,yBAAyB,OAAO,IAAI,CAAC,OAAO,UAAS;AACvD,wBAAM,cAAc,aAAa,KAAK;AAEtC,sBAAI,YAAY,OAAO,GAAG;AACtB,uCAAmB,IAAI,OAAO,aAAa,GAAG;AAE9C,2BAAO;kBACX;AAEA,wBAAM,QAAQ,mBAAmB,IAAI,KAAK;AAE1C,sBAAI,UAAU,QAAW;AACrB,2BAAO,CAAA;kBACX;AAEA,sBAAI,MAAM,MAAM,CAAC,gBAAgB,YAAY,MAAM,CAAC,WAAW,WAAW,CAAC,CAAC,GAAG;AAC3E,wBAAI,UAAU,GAAG;AACb,yCAAmB,OAAO,KAAK;oBACnC,OAAO;AACH,yCAAmB,IAAI,OAAO,QAAQ,CAAC;oBAC3C;kBACJ;AAEA,yBAAO;gBACX,CAAC;AAED,sBAAM,mBAAmBD,kCACrB,cAAc,cAAc,IAAI,cAAc,YAC9C,cAAc,YACd,MAA+B,sBAAuB,QAAQ,wBAAwB,SAAS,UAAU,CAAC;AAG9G,2BAAW;AAEX,yBAAS,IAAI,GAAG,kCAAkC,GAAG,IAAI,QAAQ,iBAAiB,KAAK,GAAG;AACtF,2BAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAC/C,kCAAc,cAAc,QAAQ,CAAC,GAAG,GAAG,kCAAkC,GAAG,CAAC;kBACrF;AAEA,qDAAmC,mBAAmB,CAAC;gBAC3D;cACJ,SAAS,OAAO;AACZ,2BAAW;AAEX,4CAA4B,cACxB,IAAI,WAAW,kBAAkB;kBAC7B,OAAO,MAAM;kBACb,UAAU,MAAM;kBAChB,QAAQ,MAAM;kBACd,SAAS,MAAM;iBAClB,CAAC;cAEV;AAEA,kBAAI,CAAC,UAAU;AACX,yBAAS,IAAI,GAAG,IAAI,QAAQ,gBAAgB,KAAK,GAAG;AAChD,4BAAU,CAAC,EAAE,WAAW,0BAA0B,CAAC,CAAC;AAEpD,2BAAS,IAAI,GAAG,IAAI,QAAQ,cAAc,KAAK,GAAG;AAC9C,8CAA0B,CAAC,EAAE,WAAW,wBAAwB,GAAG,IAAI,QAAQ,eAAe,CAAC;kBACnG;gBACJ;AAEA,oBAAI,qBAAqB,yBAAyB,QAAW;AACzD,wBAAM,SAAS,qBAAqB,qBAAqB;AAEzD,2BAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,0BAAM,qBAAqB,oBAAoB,CAAC;AAEhD,uCAAmB,WAAW,wBAAwB,GAAG,wBAAwB,CAAC;AAClF,uCAAmB,KAAI;kBAC3B;gBACJ;AAEA,uCAAuB,WAAW,mBAAmB;AAErD,oCAAoB,iBAAiB;AAErC,oBAAI,aAAa;AACb,yCAAsB;gBAC1B,OAAO;AACH,sCAAmB;gBACvB;AAEA;cACJ;YACJ;UACJ;QACJ;AAEA,YAAI,cAAc;AAGlB,cAAM,iBAAiBJ,sBAAqB,eAAe;UACvD,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;SACT;AAED,cAAM,mBAAmB,MAAM,oBAAoB,QAAQ,cAAc,EAAE,QAAQ,cAAc,WAAW;AAC5G,cAAM,sBAAsB,MAAK;AAC7B,8BAAoB,WAAW,cAAc;AAC7C,yBAAe,WAAU;QAC7B;AACA,cAAM,gBAAgB,MAAK;AACvB,cAAI,UAAU;AACV,gCAAmB;AAEnB,gBAAI,QAAQ,kBAAkB,GAAG;AAC7B,kCAAoB,QAAQ,yBAAyB;YACzD;AAEA,qBAAS,IAAI,GAAG,kCAAkC,GAAG,IAAI,QAAQ,iBAAiB,KAAK,GAAG;AACtF,oBAAM,0BAA0B,yBAAyB,CAAC;AAE1D,uBAAS,IAAI,GAAG,IAAI,mBAAmB,CAAC,GAAG,KAAK,GAAG;AAC/C,0CAA0B,QAAQ,yBAAyB,kCAAkC,GAAG,CAAC;cACrG;AAEA,iDAAmC,mBAAmB,CAAC;YAC3D;UACJ;AAEA,wBAAc;QAClB;AACA,cAAM,mBAAmB,MAAK;AAC1B,cAAI,UAAU;AACV,6BAAgB;AAChB,mCAAsB;UAC1B;AAEA,wBAAc;QAClB;AAEA,yBAAgB;AAEhB,eAAOM,oBAAmB,6BAA6B,eAAe,gBAAgB;MAC1F;IACJ;;;;;ACrhBA,IAKa;AALb;;;AACA;AACA;AAGO,IAAM,+BAA+D,CAAC,eAAe,YAAW;AACnG,YAAM,yBAAyB,cAAc,mBAAkB;AAE/D,mCAA6B,wBAAwB,OAAO;AAE5D,2CAAqC,wBAAwB,SAAS,GAAG;AACzE,2CAAqC,wBAAwB,SAAS,QAAQ;AAC9E,2CAAqC,wBAAwB,SAAS,WAAW;AACjF,2CAAqC,wBAAwB,SAAS,MAAM;AAE5E,kCAA4B,wBAAwB,SAAS,MAAM;AAEnE,aAAO;IACX;;;;;AClBA,IAGa;AAHb;;;AAGO,IAAM,uCAA+E,CACxFC,gCACAC,2BACA;AACA,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,0BAA0B,cAAc,oBAAoB,QAAQ,cAAc;AAOxF,YAAID,mCAAkC,QAAQA,+BAA8B,SAAS,sBAAsB;AACvG,UAAAC,uBAAsB,eAAe,uBAAuB;QAChE;AAEA,qCAA6B,yBAAyB,OAAO;AAE7D,eAAO;MACX;IACJ;;;;;ACvBA,IAGa;AAHb;;IAAAC;AAGO,IAAM,0BAA0B,CAAC,wBAAyD;AAC7F,YAAM,eAAe,oBAAoB;AAGzC,aAAO,eAAe,qBAAqB,gBAAgB;QACvD,KAAK,MAAM;QACX,KAAK,CAAC,UAAS;AACX,cAAI,UAAU,cAAc;AACxB,kBAAMC,yBAAuB;UACjC;QACJ;OACH;AAGD,aAAO,eAAe,qBAAqB,oBAAoB;QAC3D,KAAK,MAAM;QACX,KAAK,CAAC,UAAS;AACX,cAAI,UAAU,YAAY;AACtB,kBAAMA,yBAAuB;UACjC;QACJ;OACH;AAGD,aAAO,eAAe,qBAAqB,yBAAyB;QAChE,KAAK,MAAM;QACX,KAAK,CAAC,UAAS;AACX,cAAI,UAAU,YAAY;AACtB,kBAAMA,yBAAuB;UACjC;QACJ;OACH;IACL;;;;;ACnCA,IAIa;AAJb;;;AACA;AAGO,IAAM,kCAAqE,CAAC,eAAe,YAAW;AACzG,YAAM,4BAA4B,cAAc,sBAAsB,QAAQ,eAAe;AAK7F,mCAA6B,2BAA2B,OAAO;AAG/D,8BAAwB,yBAAyB;AAEjD,aAAO;IACX;;;;;AChBA,IAMa;AANb;;;AACA;AACA;AACA;AAGO,IAAM,wCAAiF,CAC1FC,sBACAC,kBACAC,sCACAC,mEACAC,qEACA;AACA,aAAO,CAAC,eAAe,YAAW;AAE9B,YAAI,cAAc,yBAAyB,QAAW;AAClD,iBAAOF,qCAAoC,eAAe,OAAO;QACrE;AAEA,cAAM,2BAA2B,cAAc,qBAAoB;AAEnE,qCAA6B,0BAA0B,OAAO;AAE9D,6CAAqC,0BAA0B,SAAS,QAAQ;AAGhF,YACI,CAACD,iBAAgBE,mEAAkE,MAC/EA,kEAAiE,aAAa,CAAC,GAErF;AACE,oEAA0D,wBAAwB;QACtF;AAGA,YACI,CAACF,iBAAgBG,kEAAiE,MAC9EA,iEAAgE,aAAa,CAAC,GAEpF;AACE,mEAAyD,wBAAwB;QACrF;AAGA,QAAAJ,qBAAoB,eAAe,wBAAwB;AAE3D,eAAO;MACX;IACJ;;;;;AC9CA,IAAa;AAAb;;AAAO,IAAM,uBAAuB,CAChC,UACA,gBAC0F;AAC3C,eAAU,UAAU,YAAY,QAAQ,KAAK,WAAW;AAElD,eAAU,aAAa,YAAY,WAAW,KAAK,WAAW;AAEnH,aAAiG;IACrG;;;;;ACXA,IAQa;AARb;;;AAQO,IAAM,6CAA2F,CACpGK,sBACAC,oCACAC,uBACAC,wBACA;AACA,aAAO,CAAC,eAAe,EAAE,QAAQ,GAAG,iBAAgB,MAAM;AACtD,cAAM,cAAc,cAAc,aAAa,GAAG,GAAG,KAAK;AAC1D,cAAM,wBAAwBF,mCAAkC,eAAe;UAC3E,QAAQ;UACR,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;UACN,SAAS;UACT,WAAW;UACX,cAAc;SACjB;AACD,cAAM,WAAWC,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,OAAM,CAAE;AAG1F,cAAM,cAAc,YAAY,eAAe,CAAC;AAGhD,oBAAY,CAAC,IAAI;AACjB,oBAAY,CAAC,IAAI;AAEjB,8BAAsB,SAAS;AAC/B,8BAAsB,OAAO;AAE7B,cAAM,gCAAgC;UAClC,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,SAAS;UACpB;UACA,IAAI,aAAa,OAAK;AAClB,qBAAS,eAAe;UAC5B;UACA,IAAI,mBAAgB;AAChB,mBAAO,SAAS;UACpB;UACA,IAAI,iBAAiB,OAAK;AACtB,qBAAS,mBAAmB;UAChC;UACA,IAAI,wBAAqB;AACrB,mBAAO,SAAS;UACpB;UACA,IAAI,sBAAsB,OAAK;AAC3B,qBAAS,wBAAwB;UACrC;UACA,IAAI,UAAO;AACP,mBAAO,SAAS;UACpB;UACA,IAAI,SAAM;AACN,mBAAO,CAAA;UACX;UACA,IAAI,iBAAc;AACd,mBAAO,sBAAsB;UACjC;UACA,IAAI,kBAAe;AACf,mBAAO,SAAS;UACpB;UACA,IAAI,SAAM;AACN,mBAAO,SAAS;UACpB;UACA,IAAI,UAAO;AACP,mBAAO,sBAAsB;UACjC;UACA,IAAI,QAAQ,OAAK;AACb,kCAAsB,UAAmD;UAC7E;UACA,oBAAoB,MAAW;AAC3B,mBAAO,sBAAsB,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UAC3E;UACA,iBAAiB,MAAW;AACxB,mBAAO,sBAAsB,cAAc,KAAK,CAAC,CAAC;UACtD;UACA,uBAAuB,MAAW;AAC9B,mBAAO,sBAAsB,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UAC9E;UACA,MAAM,OAAO,GAAC;AACV,kCAAsB,MAAM,KAAK,uBAAuB,IAAI;UAChE;UACA,KAAK,OAAO,GAAC;AACT,kCAAsB,KAAK,KAAK,uBAAuB,IAAI;UAC/D;;AAGJ,cAAM,gBAAgB,MAAM,sBAAsB,QAAQ,QAAQ;AAClE,cAAM,mBAAmB,MAAM,sBAAsB,WAAW,QAAQ;AAGxE,QAAAF,qBAAoB,eAAe,qBAAqB;AAExD,eAAOG,oBAAmB,qBAAqB,+BAA+B,QAAQ,GAAG,eAAe,gBAAgB;MAC5H;IACJ;;;;;AC1GA,IAIa;AAJb;;;AACA;AAGO,IAAM,mCAAuE,CAACC,0BAAyBC,wBAAsB;AAChI,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,sBAAsB,cAAc,gBAAe;AAEzD,qCAA6B,qBAAqB,OAAO;AAGzD,YAAI,QAAQ,yBAAyB,oBAAoB,WAAW;AAChE,8BAAoB,YAAY,CAAC,QAAQ;QAC7C;AAEA,oCAA4B,qBAAqB,SAAS,QAAQ;AAGlE,YAAI,QAAQ,eAAe,GAAG;AAC1B,gBAAMD,yBAAuB;QACjC;AAEA,QAAAC,oBACI,qBACA,gBACA,CAAC,QAAQ,MAAM,IAAI,KAAK,mBAAmB,GAC3C,CAACC,SAAQ,CAAC,UAAS;AACf,cAAI,QAAQ,GAAG;AACX,kBAAMF,yBAAuB;UACjC;AAEA,iBAAOE,KAAI,KAAK,qBAAqB,KAAK;QAC9C,CAAC;AAIL,YAAI,QAAQ,qBAAqB,OAAO;AACpC,gBAAMF,yBAAuB;QACjC;AAEA,QAAAC,oBACI,qBACA,oBACA,CAAC,QAAQ,MAAM,IAAI,KAAK,mBAAmB,GAC3C,CAACC,SAAQ,CAAC,UAAS;AACf,cAAI,UAAU,OAAO;AACjB,kBAAMF,yBAAuB;UACjC;AAEA,iBAAOE,KAAI,KAAK,qBAAqB,KAAK;QAC9C,CAAC;AAGL,eAAO;MACX;IACJ;;;;;ACvDA,IAIa;AAJb;;;AACA;AAGO,IAAM,wBAAiD,CAAC,eAAe,YAAW;AACrF,YAAM,kBAAkB,cAAc,YAAY,QAAQ,YAAY;AAEtE,mCAA6B,iBAAiB,OAAO;AAErD,2CAAqC,iBAAiB,SAAS,WAAW;AAE1E,aAAO;IACX;;;;;ACZA,IAIa;AAJb;;;AACA;AAGO,IAAM,4CAAyF,CAACC,6BAA2B;AAC9H,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,+BAA+B,cAAc,yBAAwB;AAE3E,qCAA6B,8BAA8B,OAAO;AAGlE,YAAI,QAAQ,eAAe,GAAG;AAC1B,gBAAMA,yBAAuB;QACjC;AAGA,YAAI,QAAQ,qBAAqB,OAAO;AACpC,gBAAMA,yBAAuB;QACjC;AAEA,6CAAqC,8BAA8B,SAAS,QAAQ;AACpF,6CAAqC,8BAA8B,SAAS,MAAM;AAClF,6CAAqC,8BAA8B,SAAS,OAAO;AACnF,6CAAqC,8BAA8B,SAAS,SAAS;AACrF,6CAAqC,8BAA8B,SAAS,WAAW;AAEvF,eAAO;MACX;IACJ;;;;;AC5BA,IAIa;AAJb;;;AACA;AAGO,IAAM,uBAA+C,CAAC,eAAe,YAAW;AACnF,YAAM,iBAAiB,cAAc,WAAU;AAE/C,mCAA6B,gBAAgB,OAAO;AAEpD,2CAAqC,gBAAgB,SAAS,MAAM;AAEpE,aAAO;IACX;;;;;ACZA,IAGa;AAHb;;;AAGO,IAAM,mCAAuE,CAACC,oCAAkC;AACnH,aAAO,CAAC,eAAe,aAAa,YAAW;AAE3C,YAAI,cAAc,oBAAoB,QAAW;AAC7C,iBAAOA,gCAA+B,eAAe,aAAa,OAAO;QAC7E;AAGA,cAAM,sBAAsB,cAAc,gBAA0B,QAAQ,aAAuB,QAAQ,QAAQ;AAEnH,qCAA6B,qBAAqB,OAAO;AAEzD,eAAO;MACX;IACJ;;;;;ACZA,SAAS,OAAO,GAAqB,GAAmB;AACpD,QAAM,cAAc,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;AAE5C,SAAO,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,cAAc,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,WAAW;AAChG;AAEA,SAAS,SAAS,GAAqB,GAAmB;AACtD,SAAO,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;AAChE;AAEA,SAAS,mBAAmB,aAA2B,GAAmB;AACtE,MAAI,SAA2B,CAAC,GAAG,CAAC;AAEpC,WAAS,IAAI,YAAY,SAAS,GAAG,KAAK,GAAG,KAAK,GAAG;AACjD,aAAS,SAAS,QAAQ,CAAC;AAE3B,WAAO,CAAC,KAAK,YAAY,CAAC;EAC9B;AAEA,SAAO;AACX;AAzBA,IA2Ba;AA3Bb;;;AACA;AACA;AAyBO,IAAM,wCAAiF,CAC1FC,2BACAC,0BACAC,kCACAC,6BACA;AACA,aAAO,CAAC,eAAe,aAAa,EAAE,cAAc,kBAAkB,uBAAuB,UAAU,YAAW,MAAM;AACpH,cAAM,aAAa,kBAAkB,aAAa,cAAc,UAAU;AAC1E,cAAM,oBAAoB,oBAAoB,eAAe,WAAW,IAAI,aAAa,QAAQ;AACjG,cAAM,uBAAuB,uBAAuB,eAAe,cAAc,IAAI,aAAa,WAAW;AAC7G,cAAM,iBAAiB,kBAAkB;AACzC,cAAM,oBAAoB,qBAAqB;AAC/C,cAAM,YAAY,KAAK,IAAI,gBAAgB,iBAAiB;AAE5D,YAAI,mBAAmB,KAAK,iBAAiB,IAAI;AAC7C,gBAAMA,yBAAuB;QACjC;AAEA,YAAI,kBAAkB,CAAC,MAAM,GAAG;AAC5B,gBAAMF,yBAAuB;QACjC;AAEA,YAAI,sBAAsB,KAAK,oBAAoB,IAAI;AACnD,gBAAME,yBAAuB;QACjC;AAEA,YAAI,qBAAqB,CAAC,MAAM,GAAG;AAC/B,gBAAMF,yBAAuB;QACjC;AAEA,YAAI,kBAAkB,CAAC,MAAM,GAAG;AAC5B,mBAAS,IAAI,GAAG,IAAI,mBAAmB,KAAK,GAAG;AAC3C,iCAAqB,CAAC,KAAK,kBAAkB,CAAC;UAClD;AAEA,mBAAS,IAAI,GAAG,IAAI,gBAAgB,KAAK,GAAG;AACxC,8BAAkB,CAAC,KAAK,kBAAkB,CAAC;UAC/C;QACJ;AAEA,cAAM,sBAAsBC,iCAAgC,eAAe,YAAY,cAAc,YAAY;AAEjH,4BAAoB,eAAe;AACnC,4BAAoB,mBAAmB;AACvC,4BAAoB,wBAAwB;AAE5C,cAAM,eAAe;AACrB,cAAM,gBAA0B,CAAA;AAChC,cAAM,WAA2B,CAAA;AACjC,cAAM,WAA2B,CAAA;AAEjC,iBAAS,IAAI,GAAG,IAAI,cAAc,KAAK,GAAG;AACtC,wBAAc,KAAK,CAAC;AAEpB,gBAAM,UAAU,IAAI,aAAa,YAAY;AAC7C,gBAAM,UAAU,IAAI,aAAa,YAAY;AAE7C,kBAAQ,KAAK,CAAC;AACd,kBAAQ,KAAK,CAAC;AAEd,mBAAS,KAAK,OAAO;AACrB,mBAAS,KAAK,OAAO;QACzB;AAGA,4BAAoB,iBAAiB,CAAC,UAA+B;AACjE,gBAAM,cAAc,MAAM;AAC1B,gBAAM,eAAe,MAAM;AAE3B,gBAAM,mBAAmB,YAAY;AAErC,mBAAS,IAAI,GAAG,IAAI,kBAAkB,KAAK,GAAG;AAC1C,kBAAM,QAAQ,YAAY,eAAe,CAAC;AAC1C,kBAAM,SAAS,aAAa,eAAe,CAAC;AAE5C,0BAAc,CAAC,IAAI,aACf,mBACA,gBACA,sBACA,mBACA,WACA,SAAS,CAAC,GACV,SAAS,CAAC,GACV,cAAc,CAAC,GACf,cACA,OACA,MAAM;UAEd;QACJ;AAEA,cAAM,UAAU,cAAc,aAAa;AAE3C,cAAM,2BAA2B;UAC7B,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,oBAAoB;UAC/B;UACA,IAAI,aAAa,OAAK;AAClB,gCAAoB,eAAe;UACvC;UACA,IAAI,mBAAgB;AAChB,mBAAO,oBAAoB;UAC/B;UACA,IAAI,iBAAiB,OAAK;AACtB,gCAAoB,mBAAmB;UAC3C;UACA,IAAI,wBAAqB;AACrB,mBAAO,oBAAoB;UAC/B;UACA,IAAI,sBAAsB,OAAK;AAC3B,gCAAoB,wBAAwB;UAChD;UACA,IAAI,UAAO;AACP,mBAAO,oBAAoB;UAC/B;UACA,IAAI,SAAM;AACN,mBAAO,CAAC,mBAAmB;UAC/B;UACA,IAAI,iBAAc;AACd,mBAAO,oBAAoB;UAC/B;UACA,IAAI,kBAAe;AACf,mBAAO,oBAAoB;UAC/B;UACA,oBAAoB,MAAW;AAE3B,mBAAO,oBAAoB,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACzE;UACA,iBAAiB,MAAW;AACxB,mBAAO,oBAAoB,cAAc,KAAK,CAAC,CAAC;UACpD;UACA,qBAAqB,aAA2B,aAA2B,eAA2B;AAClG,gBAAI,YAAY,WAAW,YAAY,UAAU,YAAY,WAAW,cAAc,QAAQ;AAC1F,oBAAMF,0BAAwB;YAClC;AAEA,kBAAM,SAAS,YAAY;AAE3B,qBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,oBAAM,QAAQ,CAAC,KAAK,MAAM,YAAY,CAAC,IAAI;AAC3C,oBAAM,IAAsB,CAAC,KAAK,IAAI,KAAK,GAAG,KAAK,IAAI,KAAK,CAAC;AAC7D,oBAAM,YAAY,mBAAmB,sBAAsB,CAAC;AAC5D,oBAAM,cAAc,mBAAmB,mBAAmB,CAAC;AAC3D,oBAAM,WAAW,OAAO,WAAW,WAAW;AAE9C,0BAAY,CAAC,IAAI,KAAK,KAAK,SAAS,CAAC,IAAI,SAAS,CAAC,IAAI,SAAS,CAAC,IAAI,SAAS,CAAC,CAAC;AAChF,4BAAc,CAAC,IAAI,KAAK,MAAM,SAAS,CAAC,GAAG,SAAS,CAAC,CAAC;YAC1D;UACJ;UACA,uBAAuB,MAAW;AAC9B,mBAAO,oBAAoB,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UAC5E;;AAGJ,eAAO,qBAAqB,0BAA0B,mBAAmB;MAC7E;IACJ;;;;;ACxLA,IAAa;AAAb;;AAAO,IAAM,0CAAqF,CAAC,oBAAoB,YAAW;AAC9H,aAAO,mBAAmB,yBAAyB,QAAQ,YAAY;IAC3E;;;;;ACJA,IAGa;AAHb;;;AAGO,IAAM,8CAA6F,CAAC,oBAAoB,YAAW;AACtI,YAAM,wCAAwC,mBAAmB,6BAA4B;AAE7F,mCAA6B,uCAAuC,OAAO;AAG3E,UAAI,sCAAsC,oBAAoB,GAAG;AAC7D,eAAO,eAAe,uCAAuC,mBAAmB,EAAE,KAAK,MAAM,EAAC,CAAE;MACpG;AAEA,aAAO;IACX;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,yCAAmF,CAAC,oBAAoB,EAAE,YAAW,MAAM;AACpI,YAAM,oBAAoB,YAAY,eAAc;AAKpD,wBAAkB,KAAK,CAAC,GAAG,MAAO,EAAE,KAAK,EAAE,KAAK,KAAK,EAAE,KAAK,EAAE,KAAK,IAAI,CAAE;AAEzE,YAAM,4BAA4B,kBAAkB,MAAM,GAAG,CAAC;AAE9D,YAAM,mCAAmC,mBAAmB,wBAAwB,IAAI,YAAY,yBAAyB,CAAC;AAM9H,aAAO,eAAe,kCAAkC,eAAe,EAAE,OAAO,YAAW,CAAE;AAE7F,aAAO;IACX;;;;;ACnBA,IAAa;AAAb;;AAAO,IAAM,qDAA2G,CACpHI,0BACAC,iCACA;AACA,aAAO,CAAC,oBAAoB,EAAE,iBAAgB,MAAM;AAEhD,YAAI,OAAO,mBAAmB,iCAAiC,YAAY;AACvE,iBAAO,mBAAmB,6BAA6B,gBAAgB;QAC3E;AAEA,cAAM,cAAc,IAAI,YAAY,CAAC,gBAAgB,CAAC;AACtD,cAAM,mCAAmC,mBAAmB,wBAAwB,WAAW;AAG/F,YAAI,iBAAiB,SAAS,SAAS;AACnC,gBAAMD,yBAAuB;QACjC;AAGA,YAAIC,6BAA4B,kBAAkB,GAAG;AACjD,gBAAM,IAAI,UAAS;QACvB;AAEA,eAAO;MACX;IACJ;;;;;ACzBA,IAAa;AAAb;;AAAO,IAAM,6CAA2F,CAACC,YAAU;AAC/G,UAAIA,YAAW,MAAM;AACjB,eAAO;MACX;AAEA,UAAIA,QAAO,eAAe,qBAAqB,GAAG;AAC9C,eAAOA,QAAO;MAClB;AAEA,aAAOA,QAAO,eAAe,2BAA2B,IAAUA,QAAQ,4BAA4B;IAC1G;;;;;ACZA,IAOa;AAPb;;;AACA;AACA;AACA;AACA;AAGO,IAAM,oCAAyE,CAClFC,sBACAC,kBACAC,mEACAC,gEACAC,kEACAC,4DACA;AACA,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,uBAAuB,cAAc,iBAAgB;AAE3D,qCAA6B,sBAAsB,OAAO;AAE1D,6CAAqC,sBAAsB,SAAS,QAAQ;AAC5E,6CAAqC,sBAAsB,SAAS,WAAW;AAE/E,YAAI,QAAQ,iBAAiB,QAAW;AACpC,+BAAqB,gBAAgB,QAAQ,YAAY;QAC7D,OAAO;AACH,sCAA4B,sBAAsB,SAAS,MAAM;QACrE;AAGA,YACI,CAACJ,iBAAgBC,mEAAkE,MAC/EA,kEAAiE,aAAa,CAAC,GAErF;AACE,oEAA0D,oBAAoB;QAClF;AAGA,YACI,CAACD,iBAAgBE,gEAA+D,MAC5EA,+DAA8D,aAAa,CAAC,GAElF;AACE,UAAAE,wDAAuD,sBAAsB,aAAa;QAC9F;AAGA,YACI,CAACJ,iBAAgBG,kEAAiE,MAC9EA,iEAAgE,aAAa,CAAC,GAEpF;AACE,mEAAyD,oBAAoB;QACjF;AAGA,QAAAJ,qBAAoB,eAAe,oBAAoB;AAEvD,eAAO;MACX;IACJ;;;;;AC7DA,IAKa;AALb;;;AACA;AACA;AAGO,IAAM,gCAAiE,CAACM,iCAA+B;AAC1G,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,mBAAmB,cAAc,aAAY;AAGnD,YAAI,iBAAiB,iBAAiB,QAAW;AAC7C,iBAAOA,6BAA4B,eAAe,OAAO;QAC7D;AAEA,qCAA6B,kBAAkB,OAAO;AAEtD,6CAAqC,kBAAkB,SAAS,cAAc;AAC9E,6CAAqC,kBAAkB,SAAS,cAAc;AAC9E,6CAAqC,kBAAkB,SAAS,cAAc;AAC9E,6CAAqC,kBAAkB,SAAS,WAAW;AAC3E,6CAAqC,kBAAkB,SAAS,WAAW;AAC3E,6CAAqC,kBAAkB,SAAS,WAAW;AAE3E,oCAA4B,kBAAkB,SAAS,gBAAgB;AACvE,oCAA4B,kBAAkB,SAAS,gBAAgB;AACvE,oCAA4B,kBAAkB,SAAS,eAAe;AACtE,oCAA4B,kBAAkB,SAAS,eAAe;AACtE,oCAA4B,kBAAkB,SAAS,aAAa;AACpE,oCAA4B,kBAAkB,SAAS,cAAc;AACrE,oCAA4B,kBAAkB,SAAS,aAAa;AACpE,oCAA4B,kBAAkB,SAAS,eAAe;AAEtE,eAAO;MACX;IACJ;;;;;AClCA,IAIa;AAJb;;;AACA;AAGO,IAAM,qCAA2E,CACpFC,0CACAC,0BACAC,gCACAC,uBACAC,kCACAC,6BACAC,0BACAC,+CACAC,iBACAC,wBACA;AACA,aAAO,CACH,eACA,EACI,gBACA,gBACA,eACA,eACA,aACA,cACA,cACA,cACA,cACA,WACA,WACA,WACA,aACA,eACA,GAAG,iBAAgB,MAEvB;AACA,cAAM,aAAa,cAAc,aAAY;AAG7C,YAAI,iBAAiB,eAAe,GAAG;AACnC,gBAAMH,yBAAuB;QACjC;AAGA,YAAI,iBAAiB,qBAAqB,OAAO;AAC7C,gBAAMA,yBAAuB;QACjC;AAEA,qCAA6B,YAAY,gBAAgB;AAEzD,cAAM,yBAAyB;UAC3B,cAAc;UACd,kBAAkB;UAClB,uBAAuB;;AAG3B,cAAM,oBAAoBJ,+BAA8B,eAAe;UACnE,GAAG;UACH,uBAAuB;UACvB,gBAAgB;SACnB;AACD,cAAM,gBAAgBC,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,EAAC,CAAE;AAC1F,cAAM,uBAAuBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACvG,cAAM,uBAAuBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACvG,cAAM,uBAAuBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACvG,cAAM,oBAAoBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACpG,cAAM,oBAAoBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACpG,cAAM,oBAAoBA,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACpG,cAAM,sBAAsBC,iCAAgC,eAAe,KAAK,GAAG,CAAC;AACpF,cAAM,iBAAiBC,4BAA2B,eAAe;UAC7D,GAAG;UACH,OAAO,IAAI,aAAa,CAAC,GAAG,CAAC,CAAC;UAC9B,YAAY;SACf;AAED,YAAI,kBAA4C,CAAC,cAAc,cAAc,YAAY;AACzF,YAAI,eAAyC,CAAC,WAAW,WAAW,SAAS;AAE7E,cAAM,SAAS,IAAI,aAAa,CAAC;AAGjC,4BAAoB,iBAAiB,CAAC,EAAE,YAAW,MAAM;AACrD,gBAAM,cAAwC;YAC1CG,gBAAe,aAAa,QAAQ,CAAC;YACrCA,gBAAe,aAAa,QAAQ,CAAC;YACrCA,gBAAe,aAAa,QAAQ,CAAC;;AAGzC,cAAI,YAAY,KAAK,CAAC,OAAO,UAAU,UAAU,gBAAgB,KAAK,CAAC,GAAG;AACtE,uBAAW,eAAe,GAAG,WAAW;AAExC,8BAAkB;UACtB;AAEA,gBAAM,UAAoC;YACtCA,gBAAe,aAAa,QAAQ,CAAC;YACrCA,gBAAe,aAAa,QAAQ,CAAC;YACrCA,gBAAe,aAAa,QAAQ,CAAC;;AAGzC,cAAI,QAAQ,KAAK,CAAC,OAAO,UAAU,UAAU,aAAa,KAAK,CAAC,GAAG;AAC/D,uBAAW,YAAY,GAAG,OAAO;AAEjC,2BAAe;UACnB;QACJ;AAEA,eAAO,eAAe,qBAAqB,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AACjF,eAAO,eAAe,qBAAqB,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AACjF,eAAO,eAAe,kBAAkB,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AAC9E,eAAO,eAAe,kBAAkB,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AAC9E,eAAO,eAAe,kBAAkB,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AAE9E,cAAM,wBAAwB;UAC1B,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,WAAW;UACtB;UACA,IAAI,aAAa,OAAK;AAElB,gBAAI,QAAQ,GAAG;AACX,oBAAMF,yBAAuB;YACjC;AAEA,0BAAc,eAAe;AAC7B,uBAAW,eAAe;UAC9B;UACA,IAAI,mBAAgB;AAChB,mBAAO,WAAW;UACtB;UACA,IAAI,iBAAiB,OAAK;AAEtB,gBAAI,UAAU,OAAO;AACjB,oBAAMA,yBAAuB;YACjC;AAEA,0BAAc,mBAAmB;AACjC,uBAAW,mBAAmB;UAClC;UACA,IAAI,wBAAqB;AACrB,mBAAO,WAAW;UACtB;UACA,IAAI,sBAAsB,OAAK;AAC3B,0BAAc,wBAAwB;AACtC,uBAAW,wBAAwB;UACvC;UACA,IAAI,iBAAc;AACd,mBAAO,WAAW;UACtB;UACA,IAAI,eAAe,OAAK;AACpB,uBAAW,iBAAiB;UAChC;UACA,IAAI,iBAAc;AACd,mBAAO,WAAW;UACtB;UACA,IAAI,eAAe,OAAK;AACpB,uBAAW,iBAAiB;UAChC;UACA,IAAI,gBAAa;AACb,mBAAO,WAAW;UACtB;UACA,IAAI,cAAc,OAAK;AAEnB,gBAAI,QAAQ,KAAK,QAAQ,GAAG;AACxB,oBAAML,yBAAuB;YACjC;AAEA,uBAAW,gBAAgB;UAC/B;UACA,IAAI,UAAO;AACP,mBAAO,WAAW;UACtB;UACA,IAAI,gBAAa;AACb,mBAAO,WAAW;UACtB;UACA,IAAI,cAAc,OAAK;AACnB,uBAAW,gBAAgB;UAC/B;UACA,IAAI,SAAM;AACN,mBAAO,CAAC,aAAa;UACzB;UACA,IAAI,cAAW;AACX,mBAAO,WAAW;UACtB;UACA,IAAI,YAAY,OAAK;AAEjB,gBAAI,QAAQ,GAAG;AACX,oBAAM,IAAI,WAAU;YACxB;AAEA,uBAAW,cAAc;UAC7B;UACA,IAAI,iBAAc;AACd,mBAAO,WAAW;UACtB;UACA,IAAI,kBAAe;AACf,mBAAO,WAAW;UACtB;UACA,IAAI,eAAY;AACZ,mBAAO,qBAAqB;UAChC;UACA,IAAI,eAAY;AACZ,mBAAO,qBAAqB;UAChC;UACA,IAAI,eAAY;AACZ,mBAAO,qBAAqB;UAChC;UACA,IAAI,eAAY;AACZ,mBAAO,WAAW;UACtB;UACA,IAAI,aAAa,OAAK;AAClB,uBAAW,eAAe;UAC9B;UACA,IAAI,YAAS;AACT,mBAAO,kBAAkB;UAC7B;UACA,IAAI,YAAS;AACT,mBAAO,kBAAkB;UAC7B;UACA,IAAI,YAAS;AACT,mBAAO,kBAAkB;UAC7B;UACA,IAAI,cAAW;AACX,mBAAO,WAAW;UACtB;UACA,IAAI,YAAY,OAAK;AAEjB,gBAAI,QAAQ,GAAG;AACX,oBAAM,IAAI,WAAU;YACxB;AAEA,uBAAW,cAAc;UAC7B;UACA,IAAI,gBAAa;AACb,mBAAO,WAAW;UACtB;UACA,IAAI,cAAc,OAAK;AAEnB,gBAAI,QAAQ,GAAG;AACX,oBAAM,IAAI,WAAU;YACxB;AAEA,uBAAW,gBAAgB;UAC/B;UACA,oBAAoB,MAAW;AAC3B,mBAAO,cAAc,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACnE;UACA,iBAAiB,MAAW;AACxB,mBAAO,cAAc,cAAc,KAAK,CAAC,CAAC;UAC9C;UACA,uBAAuB,MAAW;AAC9B,mBAAO,cAAc,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACtE;;AAGJ,YAAI,mBAAmB,sBAAsB,gBAAgB;AACzD,gCAAsB,iBAAiB;QAC3C;AAEA,YAAI,mBAAmB,sBAAsB,gBAAgB;AACzD,gCAAsB,iBAAiB;QAC3C;AAEA,YAAI,kBAAkB,sBAAsB,eAAe;AACvD,gCAAsB,gBAAgB;QAC1C;AAEA,YAAI,kBAAkB,sBAAsB,eAAe;AACvD,gCAAsB,gBAAgB;QAC1C;AAEA,YAAI,gBAAgB,sBAAsB,aAAa;AACnD,gCAAsB,cAAc;QACxC;AAEA,YAAI,iBAAiB,sBAAsB,aAAa,OAAO;AAC3D,gCAAsB,aAAa,QAAQ;QAC/C;AAEA,YAAI,iBAAiB,sBAAsB,aAAa,OAAO;AAC3D,gCAAsB,aAAa,QAAQ;QAC/C;AAEA,YAAI,iBAAiB,sBAAsB,aAAa,OAAO;AAC3D,gCAAsB,aAAa,QAAQ;QAC/C;AAEA,YAAI,iBAAiB,sBAAsB,cAAc;AACrD,gCAAsB,eAAe;QACzC;AAEA,YAAI,cAAc,sBAAsB,UAAU,OAAO;AACrD,gCAAsB,UAAU,QAAQ;QAC5C;AAEA,YAAI,cAAc,sBAAsB,UAAU,OAAO;AACrD,gCAAsB,UAAU,QAAQ;QAC5C;AAEA,YAAI,cAAc,sBAAsB,UAAU,OAAO;AACrD,gCAAsB,UAAU,QAAQ;QAC5C;AAEA,YAAI,gBAAgB,sBAAsB,aAAa;AACnD,gCAAsB,cAAc;QACxC;AAEA,YAAI,kBAAkB,sBAAsB,eAAe;AACvD,gCAAsB,gBAAgB;QAC1C;AAEA,YAAI,gBAAgB,CAAC,MAAM,KAAK,gBAAgB,CAAC,MAAM,KAAK,gBAAgB,CAAC,MAAM,GAAG;AAClF,qBAAW,eAAe,GAAG,eAAe;QAChD;AAEA,YAAI,aAAa,CAAC,MAAM,KAAK,aAAa,CAAC,MAAM,KAAK,aAAa,CAAC,MAAM,GAAG;AACzE,qBAAW,YAAY,GAAG,YAAY;QAC1C;AAEA,cAAM,gBAAgB,MAAK;AACvB,wBAAc,QAAQ,UAAU;AAGhC,UAAAD,yCAAwC,eAAe,gBAAgB,GAAG,CAAC;AAE3E,yBAAe,QAAQ,oBAAoB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AAC5E,yBAAe,QAAQ,oBAAoB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AAC5E,yBAAe,QAAQ,oBAAoB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AAC5E,yBAAe,QAAQ,iBAAiB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AACzE,yBAAe,QAAQ,iBAAiB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AACzE,yBAAe,QAAQ,iBAAiB,EAAE,QAAQ,mBAAmB,GAAG,CAAC;AAEzE,4BAAkB,QAAQ,mBAAmB,EAAE,QAAQ,cAAc,WAAW;QACpF;AACA,cAAM,mBAAmB,MAAK;AAC1B,wBAAc,WAAW,UAAU;AAGnC,UAAAO,8CAA6C,eAAe,gBAAgB,GAAG,CAAC;AAEhF,yBAAe,WAAW,oBAAoB;AAC9C,+BAAqB,WAAW,iBAAiB;AACjD,yBAAe,WAAW,oBAAoB;AAC9C,+BAAqB,WAAW,iBAAiB;AACjD,yBAAe,WAAW,oBAAoB;AAC9C,+BAAqB,WAAW,iBAAiB;AACjD,yBAAe,WAAW,iBAAiB;AAC3C,4BAAkB,WAAW,iBAAiB;AAC9C,yBAAe,WAAW,iBAAiB;AAC3C,4BAAkB,WAAW,iBAAiB;AAC9C,yBAAe,WAAW,iBAAiB;AAC3C,4BAAkB,WAAW,iBAAiB;AAE9C,4BAAkB,WAAW,mBAAmB;AAChD,8BAAoB,WAAW,cAAc,WAAW;QAC5D;AAEA,eAAOE,oBAAmB,qBAAqB,uBAAuB,UAAU,GAAG,eAAe,gBAAgB;MACtH;IACJ;;;;;ACvWA,IAAa;AAAb;;AAAO,IAAM,kCAAqE,CAACC,0BAAwB;AACvG,aAAO,CAAC,eAAe,EAAE,sBAAsB,MAAM,KAAI,MAAM;AAE3D,cAAM,gBAAgB,gBAAgB,eAAe,OAAO,IAAI,aAAa,IAAI;AACjF,cAAM,gBAAgB,gBAAgB,eAAe,OAAO,IAAI,aAAa,IAAI;AAEjF,cAAM,qBAAqB,cAAc,mBAAmB,eAAe,eAAe,EAAE,qBAAoB,CAAE;AAGlH,YAAI,MAAM,KAAK,IAAI,EAAE,SAAS,GAAG;AAC7B,gBAAMA,sBAAoB;QAC9B;AAEA,eAAO;MACX;IACJ;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,kCAAqE,CAC9E,eACA,YACA,uBACA,2BACA;AACA,aAAO,cAAc,sBAAsB,YAAY,uBAAuB,sBAAsB;IACxG;;;;;ACTA,IAIa;AAJb;;;AACA;AAGO,IAAM,sCAA6E,CACtF,mCACAC,6BACA;AACA,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,mBAAmB,QAAQ;AAMjC,YAAI,qBAAqB,eAAe;AACpC,gBAAMA,yBAAuB;QACjC;AAGA,YAAI,cAAc,uBAAuB,QAAW;AAChD,iBAAO,kCAAkC,eAAe,OAAO;QACnE;AAEA,cAAM,yBAAyB,cAAc,mBAAkB;AAE/D,qCAA6B,wBAAwB,OAAO;AAE5D,6CAAqC,wBAAwB,SAAS,KAAK;AAM3E,eAAO,eAAe,wBAAwB,oBAAoB;UAC9D,KAAK,MAAM;UACX,KAAK,CAAC,UAAS;AACX,gBAAI,UAAU,kBAAkB;AAC5B,oBAAMA,yBAAuB;YACjC;UACJ;SACH;AAED,eAAO;MACX;IACJ;;;;;AC7CA,IAWa;AAXb;;;AAWO,IAAM,2CAAuF,CAChGC,gCACAC,kCACAC,uBACAC,6BACAC,0BACAC,wBACA;AAEA,YAAM,aAAa;AACnB,YAAM,WAAW,IAAI,aAAa,CAAC,GAAG,CAAC,CAAC;AACxC,YAAM,UAAU,KAAK,KAAK;AAC1B,YAAM,yBAAyB,EAAE,cAAc,GAAG,kBAAkB,YAAY,uBAAuB,WAAU;AACjH,YAAM,qCAAqC,EAAE,GAAG,wBAAwB,YAAY,OAAM;AAE1F,YAAM,4BAA4B,CAC9B,eACA,eACA,aACA,sBACA;AACA,cAAM,sBAAsB,IAAI,aAAa,UAAU;AACvD,cAAM,uBAAuB,IAAI,aAAa,UAAU;AAExD,iBAAS,IAAI,GAAG,IAAI,YAAY,KAAK,GAAG;AACpC,gBAAM,IAAK,KAAK,aAAa,KAAM;AAEnC,8BAAoB,CAAC,IAAI,KAAK,IAAI,CAAC;AACnC,+BAAqB,CAAC,IAAI,KAAK,IAAI,CAAC;QACxC;AAEA,cAAM,eAAeH,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAE/F,cAAM,qBACFC,4BAA2B,eAAe,EAAE,GAAG,oCAAoC,OAAO,oBAAmB,CAAE;AAGnH,cAAM,oBACFA,4BAA2B,eAAe,EAAE,GAAG,oCAAoC,OAAO,SAAQ,CAAE;AAExG,cAAM,gBAAgBD,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAEhG,cAAM,sBACFC,4BAA2B,eAAe,EAAE,GAAG,oCAAoC,OAAO,qBAAoB,CAAE;AAGpH,eAAO;UACH,eAAY;AACR,0BAAc,QAAQ,YAAY;AAClC,0BAAc,QAAQ,kBAAkB,WAAW,SAAY,oBAAoB,kBAAkB,OAAO,CAAC,CAAC;AAC9G,0BAAc,QAAQ,aAAa;AAEnC,8BAAkB,QAAQ,WAAW;AAErC,wBAAY,QAAQ,mBAAmB,WAAW,SAAY,qBAAqB,mBAAmB,OAAO,CAAC,CAAC;AAC/G,wBAAY,QAAQ,oBAAoB,WAAW,SAAY,sBAAsB,oBAAoB,OAAO,CAAC,CAAC;AAElH,+BAAmB,QAAQ,aAAa,IAAI;AAC5C,gCAAoB,QAAQ,cAAc,IAAI;AAE9C,yBAAa,QAAQ,mBAAmB,GAAG,CAAC;AAC5C,0BAAc,QAAQ,mBAAmB,GAAG,CAAC;UACjD;UACA,kBAAe;AACX,0BAAc,WAAW,YAAY;AACrC,0BAAc,WAAW,kBAAkB,WAAW,SAAY,oBAAoB,kBAAkB,OAAO,CAAC,CAAC;AACjH,0BAAc,WAAW,aAAa;AAEtC,8BAAkB,WAAW,WAAW;AAExC,wBAAY,WAAW,mBAAmB,WAAW,SAAY,qBAAqB,mBAAmB,OAAO,CAAC,CAAC;AAClH,wBAAY,WAAW,oBAAoB,WAAW,SAAY,sBAAsB,oBAAoB,OAAO,CAAC,CAAC;AAErH,+BAAmB,WAAW,aAAa,IAAI;AAC/C,gCAAoB,WAAW,cAAc,IAAI;AAEjD,yBAAa,WAAW,mBAAmB,GAAG,CAAC;AAC/C,0BAAc,WAAW,mBAAmB,GAAG,CAAC;UACpD;;MAER;AAEA,YAAM,8BAA8B,CAChC,eACA,eACA,aACA,sBACA;AACA,cAAM,wCAAwC,IAAI,aAAa,UAAU;AACzE,cAAM,yCAAyC,IAAI,aAAa,UAAU;AAC1E,cAAM,yCAAyC,IAAI,aAAa,UAAU;AAC1E,cAAM,0CAA0C,IAAI,aAAa,UAAU;AAE3E,cAAM,cAAc,KAAK,MAAM,aAAa,CAAC;AAE7C,iBAAS,IAAI,GAAG,IAAI,YAAY,KAAK,GAAG;AACpC,cAAI,IAAI,aAAa;AACjB,kBAAM,KAAM,IAAI,gBAAgB,aAAa,IAAI,eAAgB;AAEjE,kDAAsC,CAAC,IAAI,KAAK,IAAI,CAAC;AACrD,mDAAuC,CAAC,IAAI,KAAK,IAAI,CAAC;AACtD,mDAAuC,CAAC,IAAI;AAC5C,oDAAwC,CAAC,IAAI;UACjD,OAAO;AACH,kBAAM,IAAK,KAAK,aAAa,IAAI,eAAgB;AAEjD,kDAAsC,CAAC,IAAI;AAC3C,mDAAuC,CAAC,IAAI;AAC5C,mDAAuC,CAAC,IAAI,KAAK,IAAI,CAAC;AACtD,oDAAwC,CAAC,IAAI,KAAK,IAAI,CAAC;UAC3D;QACJ;AAEA,cAAM,sBAAsBF,iCAAgC,eAAe;UACvE,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,iBAAiB;SACpB;AACD,cAAM,iCAAiCC,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAEjH,cAAM,uCAAmEC,4BAA2B,eAAe;UAC/G,GAAG;UACH,OAAO;SACV;AACD,cAAM,kCAAkCD,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAElH,cAAM,wCAAoEC,4BAA2B,eAAe;UAChH,GAAG;UACH,OAAO;SACV;AAED,cAAM,oBACFA,4BAA2B,eAAe,EAAE,GAAG,oCAAoC,OAAO,SAAQ,CAAE;AAExG,cAAM,kCAAkCD,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAElH,cAAM,wCAAoEC,4BAA2B,eAAe;UAChH,GAAG;UACH,OAAO;SACV;AACD,cAAM,mCAAmCD,sBAAqB,eAAe,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAEnH,cAAM,yCAAqEC,4BAA2B,eAAe;UACjH,GAAG;UACH,OAAO;SACV;AAED,eAAO;UACH,eAAY;AACR,0BAAc,QAAQ,mBAAmB;AACzC,0BAAc,QAAQ,kBAAkB,WAAW,SAAY,oBAAoB,kBAAkB,OAAO,CAAC,CAAC;AAE9G,gCAAoB,QAAQ,gCAAgC,CAAC;AAC7D,gCAAoB,QAAQ,iCAAiC,CAAC;AAC9D,gCAAoB,QAAQ,iCAAiC,CAAC;AAC9D,gCAAoB,QAAQ,kCAAkC,CAAC;AAE/D,8BAAkB,QAAQ,WAAW;AAErC,wBAAY,QACR,qCAAqC,WAAW,SAC1C,uCACA,qCAAqC,OAAO,CAAC,CAAC;AAExD,wBAAY,QACR,sCAAsC,WAAW,SAC3C,wCACA,sCAAsC,OAAO,CAAC,CAAC;AAEzD,wBAAY,QACR,sCAAsC,WAAW,SAC3C,wCACA,sCAAsC,OAAO,CAAC,CAAC;AAEzD,wBAAY,QACR,uCAAuC,WAAW,SAC5C,yCACA,uCAAuC,OAAO,CAAC,CAAC;AAG1D,iDAAqC,QAAQ,+BAA+B,IAAI;AAChF,kDAAsC,QAAQ,gCAAgC,IAAI;AAClF,kDAAsC,QAAQ,gCAAgC,IAAI;AAClF,mDAAuC,QAAQ,iCAAiC,IAAI;AAEpF,2CAA+B,QAAQ,mBAAmB,GAAG,CAAC;AAC9D,4CAAgC,QAAQ,mBAAmB,GAAG,CAAC;AAE/D,4CAAgC,QAAQ,mBAAmB,GAAG,CAAC;AAC/D,6CAAiC,QAAQ,mBAAmB,GAAG,CAAC;UACpE;UACA,kBAAe;AACX,0BAAc,WAAW,mBAAmB;AAC5C,0BAAc,WAAW,kBAAkB,WAAW,SAAY,oBAAoB,kBAAkB,OAAO,CAAC,CAAC;AAEjH,gCAAoB,WAAW,gCAAgC,CAAC;AAChE,gCAAoB,WAAW,iCAAiC,CAAC;AACjE,gCAAoB,WAAW,iCAAiC,CAAC;AACjE,gCAAoB,WAAW,kCAAkC,CAAC;AAElE,8BAAkB,WAAW,WAAW;AAExC,wBAAY,WACR,qCAAqC,WAAW,SAC1C,uCACA,qCAAqC,OAAO,CAAC,CAAC;AAExD,wBAAY,WACR,sCAAsC,WAAW,SAC3C,wCACA,sCAAsC,OAAO,CAAC,CAAC;AAEzD,wBAAY,WACR,sCAAsC,WAAW,SAC3C,wCACA,sCAAsC,OAAO,CAAC,CAAC;AAEzD,wBAAY,WACR,uCAAuC,WAAW,SAC5C,yCACA,uCAAuC,OAAO,CAAC,CAAC;AAG1D,iDAAqC,WAAW,+BAA+B,IAAI;AACnF,kDAAsC,WAAW,gCAAgC,IAAI;AACrF,kDAAsC,WAAW,gCAAgC,IAAI;AACrF,mDAAuC,WAAW,iCAAiC,IAAI;AAEvF,2CAA+B,WAAW,mBAAmB,GAAG,CAAC;AACjE,4CAAgC,WAAW,mBAAmB,GAAG,CAAC;AAElE,4CAAgC,WAAW,mBAAmB,GAAG,CAAC;AAClE,6CAAiC,WAAW,mBAAmB,GAAG,CAAC;UACvE;;MAER;AAEA,YAAM,qBAAqB,CACvB,eACA,cACA,eACA,aACA,sBACA;AACA,YAAI,iBAAiB,GAAG;AACpB,iBAAO,0BAA0B,eAAe,eAAe,aAAa,iBAAiB;QACjG;AAEA,YAAI,iBAAiB,GAAG;AACpB,iBAAO,4BAA4B,eAAe,eAAe,aAAa,iBAAiB;QACnG;AAEA,cAAMC,yBAAuB;MACjC;AAEA,aAAO,CAAC,eAAe,EAAE,cAAc,kBAAkB,KAAK,GAAG,iBAAgB,MAAM;AACnF,YAAI,qBAAqB,OAAO;AAC5B,gBAAMA,yBAAuB;QACjC;AAEA,cAAM,oBAAoBJ,+BAA8B,eAAe;UACnE,GAAG;UACH,cAAc;UACd;UACA,gBAAgB;SACnB;AACD,cAAM,gBAAgBE,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,cAAc,kBAAkB,MAAM,EAAC,CAAE;AAC1H,cAAM,cAAcA,sBAAqB,eAAe;UACpD,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;SACT;AAED,YAAI,EAAE,cAAc,gBAAe,IAAK,mBACpC,eACA,cACA,eACA,aACA,iBAAiB;AAGrB,eAAO,eAAe,YAAY,MAAM,gBAAgB,EAAE,KAAK,MAAM,EAAC,CAAE;AACxE,eAAO,eAAe,YAAY,MAAM,YAAY,EAAE,KAAK,MAAM,EAAC,CAAE;AACpE,eAAO,eAAe,YAAY,MAAM,YAAY,EAAE,KAAK,MAAM,GAAE,CAAE;AAErE,cAAMI,sCAAqC;UACvC,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,cAAc;UACzB;UACA,IAAI,aAAa,OAAK;AAClB,gBAAI,cAAc,iBAAiB,OAAO;AACtC,kBAAI,aAAa;AACb,gCAAe;cACnB;AAEA,eAAC,EAAE,cAAc,gBAAe,IAAK,mBACjC,eACA,OACA,eACA,aACA,iBAAiB;AAGrB,kBAAI,aAAa;AACb,6BAAY;cAChB;YACJ;AAEA,0BAAc,eAAe;UACjC;UACA,IAAI,mBAAgB;AAChB,mBAAO,cAAc;UACzB;UACA,IAAI,iBAAiB,OAAK;AACtB,gBAAI,UAAU,iBAAiB,UAAU,OAAO;AAC5C,oBAAMF,yBAAuB;YACjC;AAEA,0BAAc,mBAAmB;UACrC;UACA,IAAI,wBAAqB;AACrB,mBAAO,cAAc;UACzB;UACA,IAAI,sBAAsB,OAAK;AAC3B,0BAAc,wBAAwB;UAC1C;UACA,IAAI,UAAO;AACP,mBAAO,cAAc;UACzB;UACA,IAAI,SAAM;AACN,mBAAO,CAAC,aAAa;UACzB;UACA,IAAI,iBAAc;AACd,mBAAO,cAAc;UACzB;UACA,IAAI,kBAAe;AACf,mBAAO,cAAc;UACzB;UACA,IAAI,MAAG;AACH,mBAAO,YAAY;UACvB;UACA,oBAAoB,MAAW;AAC3B,mBAAO,cAAc,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACnE;UACA,iBAAiB,MAAW;AACxB,mBAAO,cAAc,cAAc,KAAK,CAAC,CAAC;UAC9C;UACA,uBAAuB,MAAW;AAC9B,mBAAO,cAAc,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACtE;;AAGJ,YAAI,cAAc;AAElB,cAAM,gBAAgB,MAAK;AACvB,uBAAY;AAEZ,wBAAc;QAClB;AACA,cAAM,mBAAmB,MAAK;AAC1B,0BAAe;AAEf,wBAAc;QAClB;AAEA,eAAOC,oBACH,qBAAqBC,qCAAoC,iBAAiB,GAC1E,eACA,gBAAgB;MAExB;IACJ;;;;;ACnYA,IAIa;AAJb;;;AACA;AAGO,IAAM,oCAAyE,CAClFC,6CACAC,0BACAC,kCACAC,YACAC,qBACAC,gCACAC,wBACA;AACA,aAAO,CAAC,eAAe,YAAW;AAC9B,cAAM,uBAAuB,cAAc,iBAAgB;AAQ3D,YACID,mCAAkC,QAClCA,+BAA8B,SAAS,wBACvC,cAAc,WAAU,EAAG,KAAK,mBAAmB,QACrD;AACE,iBAAOH,iCAAgC,eAAe,OAAO;QACjE;AAEA,qCAA6B,sBAAsB,OAAO;AAE1D,cAAM,QAAQ,QAAQ,UAAU,QAAQ,QAAQ,iBAAiB,eAAe,QAAQ,QAAQ,IAAI,aAAa,QAAQ,KAAK;AAG9H,YAAI,UAAU,QAAQ,MAAM,SAAS,GAAG;AACpC,gBAAMD,yBAAuB;QACjC;AAGA,oCAA4B,sBAAsB,EAAE,MAAK,GAAI,OAAO;AACpE,oCAA4B,sBAAsB,SAAS,YAAY;AAEvE,YAAI,wCAA6D;AACjE,YAAI,cAAc;AAElB,QAAAK,oBACI,sBACA,SACA,CAAC,QAAQ,MAAM,IAAI,KAAK,oBAAoB,GAC5C,CAACC,SAAQ,CAAC,UAAS;AACf,UAAAA,KAAI,KAAK,sBAAsB,KAAK;AAEpC,cAAI,aAAa;AACb,gBAAIJ,WAAU,KAAK,KAAK,0CAA0C,MAAM;AACpE,sDAAwCH,4CACpC,eACA,oBAAoB;YAE5B,WAAW,CAACG,WAAU,KAAK,KAAK,0CAA0C,MAAM;AAC5E,oDAAqC;AACrC,sDAAwC;YAC5C;UACJ;AAEA,iBAAO;QACX,CAAC;AAGL,cAAM,gBAAgB,MAAK;AACvB,wBAAc;AAEd,cAAIA,WAAU,qBAAqB,KAAK,GAAG;AACvC,oDAAwCH,4CAA2C,eAAe,oBAAoB;UAC1H;QACJ;AACA,cAAM,mBAAmB,MAAK;AAC1B,wBAAc;AAEd,cAAI,0CAA0C,MAAM;AAChD,kDAAqC;AACrC,oDAAwC;UAC5C;QACJ;AAEA,eAAOI,oBAAmB,sBAAsB,eAAe,gBAAgB;MACnF;IACJ;;;;;ACvFA,IAIa;AAJb;;;AACA;AAGO,IAAM,yCAAmF,CAC5FI,6CACAC,0BACAC,uBACAC,YACAC,wBACA;AACA,aAAO,CAAC,eAAe,EAAE,OAAO,YAAY,GAAG,iBAAgB,MAAM;AACjE,cAAM,yBAAyB,cAAc,iBAAgB;AAC7D,cAAM,yBAAyB,cAAc,iBAAgB;AAE7D,qCAA6B,wBAAwB,gBAAgB;AACrE,qCAA6B,wBAAwB,gBAAgB;AAErE,cAAM,gBAAgBF,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,EAAC,CAAE;AAC1F,cAAM,iBAAiBA,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,GAAE,CAAE;AAC5F,cAAM,iBAAiBA,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,EAAC,CAAE;AAC3F,cAAM,iBAAiBA,sBAAqB,eAAe,EAAE,GAAG,kBAAkB,MAAM,GAAE,CAAE;AAE5F,YAAI,wCAA6D;AACjE,YAAI,cAAc;AAClB,YAAI,kBAAyD;AAE7D,cAAM,4BAA4B;UAC9B,IAAI,aAAU;AACV,mBAAO;UACX;UACA,IAAI,eAAY;AACZ,mBAAO,uBAAuB;UAClC;UACA,IAAI,aAAa,OAAK;AAClB,0BAAc,eAAe;AAC7B,2BAAe,eAAe;AAC9B,mCAAuB,eAAe;AACtC,2BAAe,eAAe;AAC9B,mCAAuB,eAAe;AACtC,2BAAe,eAAe;UAClC;UACA,IAAI,mBAAgB;AAChB,mBAAO,uBAAuB;UAClC;UACA,IAAI,iBAAiB,OAAK;AACtB,0BAAc,mBAAmB;AACjC,2BAAe,mBAAmB;AAClC,mCAAuB,mBAAmB;AAC1C,2BAAe,mBAAmB;AAClC,mCAAuB,mBAAmB;AAC1C,2BAAe,mBAAmB;UACtC;UACA,IAAI,wBAAqB;AACrB,mBAAO,uBAAuB;UAClC;UACA,IAAI,sBAAsB,OAAK;AAC3B,0BAAc,wBAAwB;AACtC,2BAAe,wBAAwB;AACvC,mCAAuB,wBAAwB;AAC/C,2BAAe,wBAAwB;AACvC,mCAAuB,wBAAwB;AAC/C,2BAAe,wBAAwB;UAC3C;UACA,IAAI,UAAO;AACP,mBAAO,uBAAuB;UAClC;UACA,IAAI,QAAK;AACL,mBAAO;UACX;UACA,IAAI,MAAM,OAAK;AAEX,gBAAI,UAAU,QAAQ,MAAM,SAAS,GAAG;AACpC,oBAAMD,yBAAuB;YACjC;AAEA,gBAAI,UAAU,MAAM;AAChB,qCAAuB,QAAQ;AAC/B,qCAAuB,QAAQ;YACnC,OAAO;AACH,oBAAM,cAAc,MAAM;AAE1B,oBAAM,gBAAgB,IAAI,aAAa,cAAc,IAAK,cAAc,CAAE;AAC1E,oBAAM,gBAAgB,IAAI,aAAa,cAAc,IAAK,cAAc,CAAE;AAE1E,4BAAc,CAAC,IAAI,MAAM,CAAC;AAC1B,4BAAc,CAAC,IAAI,CAAC,MAAM,cAAc,CAAC;AAEzC,oBAAM,SAAS,KAAK,MAAM,cAAc,KAAK,CAAC;AAC9C,oBAAM,eAAe,cAAc,KAAK,IAAI;AAE5C,uBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,sBAAM,iBAAkB,IAAI,SAAU;AAEtC,sBAAM,aAAa,KAAK,MAAM,cAAc;AAC5C,sBAAM,aAAa,KAAK,KAAK,cAAc;AAE3C,8BAAc,CAAC,IACX,eAAe,aACT,MAAM,UAAU,KACf,KAAK,iBAAiB,eAAe,MAAM,UAAU,KACrD,KAAK,aAAa,mBAAmB,MAAM,UAAU;AAChE,8BAAc,CAAC,IACX,eAAe,aACT,CAAC,MAAM,cAAc,IAAI,UAAU,IACnC,GAAG,KAAK,iBAAiB,eAAe,MAAM,cAAc,IAAI,UAAU,MACzE,KAAK,aAAa,mBAAmB,MAAM,cAAc,IAAI,UAAU;cACtF;AAEA,4BAAc,MAAM,IAAI,cAAc,MAAM,IAAI,MAAM,SAAS,CAAC,KAAK,MAAM,SAAS,CAAC,IAAI,MAAM,SAAS,CAAC,KAAK;AAE9G,qCAAuB,QAAQ;AAC/B,qCAAuB,QAAQ;YACnC;AAEA,8BAAkB;AAElB,gBAAI,aAAa;AACb,kBAAIE,WAAU,eAAe,KAAK,0CAA0C,MAAM;AAC9E,wDAAwCH,4CAA2C,eAAe,aAAa;cACnH,WAAW,0CAA0C,MAAM;AACvD,sDAAqC;AACrC,wDAAwC;cAC5C;YACJ;UACJ;UACA,IAAI,SAAM;AACN,mBAAO,CAAC,aAAa;UACzB;UACA,IAAI,iBAAc;AACd,mBAAO,uBAAuB;UAClC;UACA,IAAI,kBAAe;AACf,mBAAO,uBAAuB;UAClC;UACA,IAAI,aAAU;AACV,mBAAO,uBAAuB;UAClC;UACA,IAAI,WAAW,OAAK;AAChB,mCAAuB,aAAa;AACpC,mCAAuB,aAAa;UACxC;UACA,oBAAoB,MAAW;AAC3B,mBAAO,cAAc,iBAAiB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACnE;UACA,iBAAiB,MAAW;AACxB,mBAAO,cAAc,cAAc,KAAK,CAAC,CAAC;UAC9C;UACA,uBAAuB,MAAW;AAC9B,mBAAO,cAAc,oBAAoB,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;UACtE;;AAGJ,YAAI,UAAU,MAAM;AAEhB,oCAA0B,QAAQ,iBAAiB,eAAe,QAAQ,IAAI,aAAa,KAAK;QACpG;AAEA,YAAI,eAAe,0BAA0B,YAAY;AACrD,oCAA0B,aAAa;QAC3C;AAEA,cAAM,gBAAgB,MAAK;AACvB,wBAAc,QAAQ,sBAAsB,EAAE,QAAQ,cAAc;AAEpE,wBAAc,QAAQ,cAAc,EAAE,QAAQ,sBAAsB,EAAE,QAAQ,cAAc,EAAE,QAAQ,cAAc;AAEpH,wBAAc;AAEd,cAAIG,WAAU,eAAe,GAAG;AAC5B,oDAAwCH,4CAA2C,eAAe,aAAa;UACnH;QACJ;AACA,cAAM,mBAAmB,MAAK;AAC1B,wBAAc,WAAW,sBAAsB;AAC/C,iCAAuB,WAAW,cAAc;AAEhD,wBAAc,WAAW,cAAc;AACvC,yBAAe,WAAW,sBAAsB;AAChD,iCAAuB,WAAW,cAAc;AAChD,yBAAe,WAAW,cAAc;AAExC,wBAAc;AAEd,cAAI,0CAA0C,MAAM;AAChD,kDAAqC;AACrC,oDAAwC;UAC5C;QACJ;AAEA,eAAOI,oBAAmB,qBAAqB,2BAA2B,cAAc,GAAG,eAAe,gBAAgB;MAC9H;IACJ;;;;;AC9LA,IAAaC;AAAb,IAAAC,4BAAA;;AAAO,IAAMD,2BAAqD,MAAM,IAAI,aAAa,IAAI,mBAAmB;;;;;ACFhH,IAKME,mBAIO;AATb;;;AACA;AAIA,IAAMA,oBAAkB;MACpB,kBAAkB;;AAGf,IAAM,uCAA+E,CACxFC,8BACAC,kBACAC,0BACAC,kCACAC,oBACA;AACA,aAAO,MAAM,4BAA4BJ,6BAAiD;QAStF,YAAY,GAAyC,GAAYK,IAAU;AACvE,cAAI;AAEJ,cAAI,OAAO,MAAM,YAAY,MAAM,UAAaA,OAAM,QAAW;AAC7D,sBAAU,EAAE,QAAQ,GAAG,kBAAkB,GAAG,YAAYA,GAAC;UAC7D,WAAW,OAAO,MAAM,UAAU;AAC9B,sBAAU;UACd,OAAO;AACH,kBAAM,IAAI,MAAM,qCAAqC;UACzD;AAEA,gBAAM,EAAE,QAAQ,kBAAkB,WAAU,IAAK,EAAE,GAAGN,mBAAiB,GAAG,QAAO;AAEjF,gBAAM,4BAA4BI,iCAAgC,kBAAkB,QAAQ,UAAU;AAGtG,cAAI,CAACF,iBAAgB,oBAAoB,MAAM,mBAAmB,yBAAyB,CAAC,GAAG;AAC3F,sCAA0B,iBACtB,eACC,uBAAK;AACF,kBAAI,IAAI;AAER,oBAAM,wBAAwB,CAAC,UAAgB;AAC3C,oBAAI,KAAK,WAAW,WAAW;AAC3B,sBAAI,IAAI,GAAG;AACP,8CAA0B,oBAAoB,eAAe,qBAAqB;AAClF,0BAAM,yBAAwB;AAE9B,yBAAK,2BAA2B,KAAK;kBACzC,OAAO;AACH,yBAAK;kBACT;gBACJ;cACJ;AAEA,qBAAO;YACX,GAAE,CAAE;UAEZ;AAEA,gBAAM,2BAA2B,gBAAgB;AAEjD,eAAK,UAAU;AACf,eAAK,6BAA6B;AAClC,eAAK,SAAS;QAClB;QAEA,IAAI,SAAM;AAEN,cAAI,KAAK,2BAA2B,WAAW,QAAW;AACtD,mBAAO,KAAK;UAChB;AAEA,iBAAO,KAAK,2BAA2B;QAC3C;QAEA,IAAI,QAAK;AACL,iBAAO,KAAK,WAAW,OAAO,KAAK,2BAA2B,QAAQ,KAAK;QAC/E;QAEO,iBAAc;AAKjB,cAAI,KAAK,WAAW,WAAW;AAC3B,mBAAO,QAAQ,OAAOC,yBAAuB,CAAE;UACnD;AAEA,eAAK,SAAS;AAEd,iBAAOE,gBAAe,KAAK,aAAa,KAAK,0BAA0B,EAAE,QAAQ,MAAK;AAClF,iBAAK,SAAS;AAEd,iCAAqB,IAAI;UAC7B,CAAC;QACL;QAEQ,2BAA2B,OAAY;AAC3C,cAAI,KAAK,WAAW,MAAM;AACtB,iBAAK,2BAA2B,cAAc,KAAK;UACvD,OAAO;AACH,uBAAW,MAAM,KAAK,2BAA2B,KAAK,CAAC;UAC3D;QACJ;;IAER;;;;;AC/GA,IAoBME,mBAUO;AA9Bb;;;AACA;AACA;AAkBA,IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;;MAClB,uBAAuB;;MACvB,QAAQ;MACR,WAAW;MACX,cAAc;MACd,MAAM;;AAGH,IAAM,kCAAqE,CAC9EC,uBACAC,mBACAC,6BACAC,+BACAC,mBACAC,8BACAC,uBACA;AACA,aAAO,MAAM,uBACDN,sBAA0D;QAalE,YAAY,SAAY,SAAqC;AACzD,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,uBAAuBG,4BAA2B,eAAe,aAAa;AACpF,gBAAM,YAAYG,6BAA4B,aAAa;AAC3D,gBAAM,yBAAsD,YAAYF,8BAA4B,IAAK;AACzG,gBAAM,UAAU,QAAQ,aAAa;AAErC,gBAAM,SAAS,OAAO,sBAAsB,sBAAsB;AAGlE,eAAK,UAAUF,kBAAiB,MAAM,WAAW,qBAAqB,QAAQ,QAAQ,OAAO;AAE7F,eAAK,aAAaA,kBAAiB,MAAM,WAAW,qBAAqB,WAAW,SAAS,CAAC,OAAO;AACrG,eAAK,wBAAwB;AAC7B,eAAK,WAAW;AAChB,eAAK,0BAA0B;AAE/B,cAAI,KAAK,4BAA4B,QAAQ,cAAc,iBAAiB,QAAW;AAC5B,iBAAK,wBAAyB,eACjF,cAAc;UACtB;QACJ;QAEA,IAAI,SAAM;AACN,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;QAEA,IAAI,UAAO;AACP,iBAAO,KAAK;QAChB;QAEA,IAAI,QAAQ,OAAK;AACb,gBAAM,kBAAkB,OAAO,UAAU,aAAaK,mBAAkB,MAAM,KAAK,IAAI;AAEvF,eAAK,sBAAsB,UAAU;AAErC,gBAAM,gBAAgB,KAAK,sBAAsB;AAEjD,eAAK,WAAW,kBAAkB,QAAQ,kBAAkB,kBAAkB,QAAQ;QAC1F;QAEA,IAAI,OAAI;AACJ,iBAAO,KAAK,sBAAsB;QACtC;QAEA,IAAI,KAAK,OAAK;AACV,eAAK,sBAAsB,OAAO;AAElC,cAAI,KAAK,4BAA4B,MAAM;AACvC,iBAAK,wBAAwB,eAAe;UAChD;QACJ;QAEO,gBAAgB,cAA0B;AAC7C,eAAK,sBAAsB,gBAAgB,YAAY;AAEvD,cAAI,KAAK,4BAA4B,MAAM;AACvC,iBAAK,wBAAwB,eAAe;UAChD;QACJ;QAEO,MAAM,OAAO,GAAC;AACjB,eAAK,sBAAsB,MAAM,IAAI;AAErC,cAAI,KAAK,4BAA4B,MAAM;AACvC,iBAAK,wBAAwB,QAAQ;UACzC;AAEA,cAAI,KAAK,QAAQ,UAAU,UAAU;AACjC,qCAAyB,IAAI;AAE7B,kBAAM,8BAA8B,MAAK;AACrC,mBAAK,sBAAsB,oBAAoB,SAAS,2BAA2B;AAEnF,kBAAI,kBAAkB,IAAI,GAAG;AACzB,0CAA0B,IAAI;cAClC;YACJ;AAEA,iBAAK,sBAAsB,iBAAiB,SAAS,2BAA2B;UACpF;QACJ;QAEO,KAAK,OAAO,GAAC;AAChB,eAAK,sBAAsB,KAAK,IAAI;AAEpC,cAAI,KAAK,4BAA4B,MAAM;AACvC,iBAAK,wBAAwB,OAAO;UACxC;QACJ;;IAER;;;;;ACrJA,IAIa;AAJb;;;AAIO,IAAM,sCAA6E,CACtFC,oBACAC,6BACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,gCAAgC,oBAAI,QAAO;AAEjD,YAAI,eAAqC;AACzC,YAAI,QAAuB;AAC3B,YAAI,OAAsB;AAE1B,cAAM,uBAAuB,OAAO,OAA2B,8BAAyD;AACpH,cAAI,uBAAuBF,oBAA6C,KAAK;AAG7E,gBAAM,uCAAuC,iBAAiB,sBAAsB,yBAAyB;AAE7G,cAAI,CAAC,sCAAsC;AACvC,kBAAM,UAAU;cACZ,cAAc,qBAAqB;cACnC,kBAAkB,qBAAqB;cACvC,uBAAuB,qBAAqB;cAC5C,QAAQ,qBAAqB,OAAO;cACpC,WAAW,qBAAqB,UAAU;cAC1C,cAAc,iBAAiB,OAAO,SAAY;cAClD,MAAM,qBAAqB;;AAG/B,mCAAuBD,4BAA2B,2BAA2B,OAAO;AAEpF,gBAAI,UAAU,MAAM;AAChB,mCAAqB,MAAM,KAAK;YACpC;AAEA,gBAAI,SAAS,MAAM;AACf,mCAAqB,KAAK,IAAI;YAClC;UACJ;AAEA,wCAA8B,IAAI,2BAA2B,oBAAoB;AAEjF,cAAI,CAAC,sCAAsC;AACvC,kBAAME,kBAAiB,2BAA2B,MAAM,QAAQ,qBAAqB,MAAM;AAC3F,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,qBAAqB,SAAS;UACrG,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,QAAQ,qBAAqB,MAAM;AAC5F,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,qBAAqB,SAAS;UACtG;AAEA,gBAAMI,yBAAwB,OAAO,2BAA2B,oBAAoB;AAEpF,iBAAO;QACX;AAEA,eAAO;UACH,IAAI,aAAa,OAA2B;AACxC,2BAAe;UACnB;UACA,IAAI,MAAM,OAAa;AACnB,oBAAQ;UACZ;UACA,IAAI,KAAK,OAAa;AAClB,mBAAO;UACX;UACA,OAAO,OAA2B,2BAAqD;AACnF,kBAAM,+BAA+B,8BAA8B,IAAI,yBAAyB;AAEhG,gBAAI,iCAAiC,QAAW;AAC5C,qBAAO,QAAQ,QAAQ,4BAA4B;YACvD;AAEA,mBAAO,qBAAqB,OAAO,yBAAyB;UAChE;;MAER;IACJ;;;;;AClFA,IAWMC,mBAoBO;AA/Bb;;;AAWA,IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,gBAAgB;MAChB,gBAAgB;MAChB,eAAe;MACf,eAAe;MACf,aAAa;MACb,cAAc;MACd,cAAc;MACd,cAAc;MACd,cAAc;MACd,WAAW;MACX,WAAW;MACX,WAAW;MACX,aAAa;MACb,eAAe;;AAGZ,IAAM,8BAA6D,CACtEC,uBACAC,mBACAC,yBACAC,2BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,mBAAuCN,sBAAuB;QAevE,YAAY,SAAY,SAAiC;AACrD,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,mBAAmBG,wBAAuB,eAAe,aAAa;AAC5E,gBAAM,YAAYG,6BAA4B,aAAa;AAC3D,gBAAM,qBAAmD,YAAYF,0BAAwB,IAAK;AAElG,gBAAM,SAAS,OAAO,kBAAkB,kBAAkB;AAE1D,eAAK,oBAAoB;AAEzB,eAAK,gBAAgBF,kBACjB,MACA,WACA,iBAAiB,cACjB,4BACA,0BAA0B;AAE9B,eAAK,gBAAgBA,kBACjB,MACA,WACA,iBAAiB,cACjB,4BACA,0BAA0B;AAE9B,eAAK,gBAAgBA,kBACjB,MACA,WACA,iBAAiB,cACjB,4BACA,0BAA0B;AAE9B,eAAK,aAAaA,kBACd,MACA,WACA,iBAAiB,WACjB,4BACA,0BAA0B;AAE9B,eAAK,aAAaA,kBACd,MACA,WACA,iBAAiB,WACjB,4BACA,0BAA0B;AAE9B,eAAK,aAAaA,kBACd,MACA,WACA,iBAAiB,WACjB,4BACA,0BAA0B;AAI9B,UAAAK,sBAAqB,MAAM,CAAC;QAChC;QAEA,IAAI,iBAAc;AACd,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,eAAe,OAAK;AACpB,eAAK,kBAAkB,iBAAiB;QAC5C;QAEA,IAAI,iBAAc;AACd,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,eAAe,OAAK;AACpB,eAAK,kBAAkB,iBAAiB;QAC5C;QAEA,IAAI,gBAAa;AACb,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,cAAc,OAAK;AACnB,eAAK,kBAAkB,gBAAgB;QAC3C;QAEA,IAAI,gBAAa;AACb,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,cAAc,OAAK;AACnB,eAAK,kBAAkB,gBAAgB;QAC3C;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,YAAY,OAAK;AACjB,eAAK,kBAAkB,cAAc;QACzC;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK;QAChB;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK;QAChB;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK;QAChB;QAEA,IAAI,eAAY;AACZ,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,aAAa,OAAK;AAClB,eAAK,kBAAkB,eAAe;QAC1C;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;QAEA,IAAI,YAAS;AACT,iBAAO,KAAK;QAChB;QAEA,IAAI,cAAW;AACX,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,YAAY,OAAK;AACjB,eAAK,kBAAkB,cAAc;QACzC;QAEA,IAAI,gBAAa;AACb,iBAAO,KAAK,kBAAkB;QAClC;QAEA,IAAI,cAAc,OAAK;AACnB,eAAK,kBAAkB,gBAAgB;QAC3C;;IAER;;;;;ACzMA,IAWa;AAXb;;;AACA;AAUO,IAAM,kCAAqE,CAC9EC,oBACAC,gCACAC,iCACAC,uBACAC,yBACAC,qBACAC,uCACAC,mBACAC,0BACAC,qCACA;AACA,aAAO,MAAmE;AACtE,cAAM,2BAA2B,oBAAI,QAAO;AAE5C,YAAI,wBAA4D;AAEhE,cAAM,kBAAkB,OAAO,OAAuB,8BAAyD;AAC3G,cAAI,iBAAyC;AAC7C,cAAI,mBAAmBJ,oBAAyC,KAAK;AAErE,gBAAM,yBAAyB;YAC3B,cAAc,iBAAiB;YAC/B,kBAAkB,iBAAiB;YACnC,uBAAuB,iBAAiB;;AAE5C,gBAAM,gCAAgC;YAClC,GAAG;YACH,gBAAgB,iBAAiB;YACjC,gBAAgB,iBAAiB;YACjC,eAAe,iBAAiB;YAChC,eAAe,iBAAiB;YAChC,aAAa,iBAAiB;YAC9B,cAAc,iBAAiB;YAC/B,aAAa,iBAAiB;YAC9B,eAAe,iBAAiB;;AAIpC,gBAAM,mCAAmC,iBAAiB,kBAAkB,yBAAyB;AAGrG,cAAI,gBAAgB,kBAAkB;AAClC,6BAAiBF,sBAAqB,2BAA2B,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;UAC3G,WAAW,CAAC,kCAAkC;AAC1C,kBAAM,UAAU;cACZ,GAAG;cACH,cAAc,iBAAiB,aAAa;cAC5C,cAAc,iBAAiB,aAAa;cAC5C,cAAc,iBAAiB,aAAa;cAC5C,WAAW,iBAAiB,UAAU;cACtC,WAAW,iBAAiB,UAAU;cACtC,WAAW,iBAAiB,UAAU;;AAG1C,+BAAmBC,wBAAuB,2BAA2B,OAAO;UAChF;AAEA,mCAAyB,IAAI,2BAA2B,mBAAmB,OAAO,mBAAmB,cAAc;AAEnH,cAAI,mBAAmB,MAAM;AACzB,gBAAI,0BAA0B,MAAM;AAChC,kBAAIE,0CAAyC,MAAM;AAC/C,sBAAM,IAAI,MAAM,qDAAqD;cACzE;AAEA,oBAAM,6BAA6B,IAAIA;gBACnC;;gBAEA,MAAM,QAAQ;gBACd,0BAA0B;cAAU;AAExC,oBAAM,0BAA0BL,+BAA8B,4BAA4B;gBACtF,cAAc;gBACd,kBAAkB;gBAClB,uBAAuB;gBACvB,gBAAgB;eACnB;AACD,sCAAwB,QAAQ,2BAA2B,WAAW;AAEtE,uCAAyB,YAAW;AAChC,sBAAM,4BAA4B,MAAM,QAAQ,IAC5C;kBACI,MAAM;kBACN,MAAM;kBACN,MAAM;kBACN,MAAM;kBACN,MAAM;kBACN,MAAM;kBACR,IAAI,OAAO,YAAY,UAAS;AAC9B,wBAAM,2BAA2BC,gCAA+B,4BAA4B;oBACxF,cAAc;oBACd,kBAAkB;oBAClB,uBAAuB;oBACvB,QAAQ,UAAU,IAAI,IAAI;mBAC7B;AAED,wBAAMK,kBAAiB,4BAA4B,YAAY,yBAAyB,MAAM;AAE9F,yBAAO;gBACX,CAAC,CAAC;AAGN,yBAAS,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG;AAC3B,4CAA0B,CAAC,EAAE,QAAQ,yBAAyB,GAAG,CAAC;AAClE,4CAA0B,CAAC,EAAE,MAAM,CAAC;gBACxC;AAEA,uBAAOE,iCAAgC,0BAA0B;cACrE,GAAE;YACN;AAEA,kBAAM,iBAAiB,MAAM;AAC7B,kBAAM,gBAAgBN,sBAAqB,2BAA2B,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AAE5G,kBAAMK,yBAAwB,OAAO,2BAA2B,aAAa;AAE7E,kBAAM,eAA+B,CAAA;AAErC,qBAAS,IAAI,GAAG,IAAI,eAAe,kBAAkB,KAAK,GAAG;AACzD,2BAAa,KAAK,eAAe,eAAe,CAAC,CAAC;YACtD;AAEA,gBAAI,kBAAkB,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,CAAC;AACjF,gBAAI,eAAe,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,CAAC;AAC9E,gBAAI,eAAeL,sBAAqB,2BAA2B,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACzG,gBAAI,oBAAoBC,wBAAuB,2BAA2B;cACtE,GAAG;cACH,cAAc,gBAAgB,CAAC;cAC/B,cAAc,gBAAgB,CAAC;cAC/B,cAAc,gBAAgB,CAAC;cAC/B,WAAW,aAAa,CAAC;cACzB,WAAW,aAAa,CAAC;cACzB,WAAW,aAAa,CAAC;aAC5B;AAED,0BAAc,QAAQ,YAAY,EAAE,QAAiC,kBAAmB,OAAO,CAAC,CAAC;AACjG,8BAAkB,QAAQ,cAAc;AAExC,qBAAS,IAAI,KAAK,IAAI,eAAe,QAAQ,KAAK,KAAK;AACnD,oBAAM,cAAwC,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,CAAC;AACzG,oBAAM,UAAoC,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,EAAE,CAAC,CAAC;AAErG,kBACI,YAAY,KAAK,CAAC,OAAO,UAAU,UAAU,gBAAgB,KAAK,CAAC,KACnE,QAAQ,KAAK,CAAC,OAAO,UAAU,UAAU,aAAa,KAAK,CAAC,GAC9D;AACE,kCAAkB;AAClB,+BAAe;AAEf,sBAAM,cAAc,IAAI,0BAA0B;AAElD,6BAAa,KAAK,eAAe,GAAG,WAAW;AAE/C,+BAAeD,sBAAqB,2BAA2B,EAAE,GAAG,wBAAwB,MAAM,EAAC,CAAE;AACrG,oCAAoBC,wBAAuB,2BAA2B;kBAClE,GAAG;kBACH,cAAc,gBAAgB,CAAC;kBAC/B,cAAc,gBAAgB,CAAC;kBAC/B,cAAc,gBAAgB,CAAC;kBAC/B,WAAW,aAAa,CAAC;kBACzB,WAAW,aAAa,CAAC;kBACzB,WAAW,aAAa,CAAC;iBAC5B;AAED,6BAAa,KAAK,eAAe,GAAG,WAAW;AAE/C,8BAAc,QAAQ,YAAY,EAAE,QAAiC,kBAAmB,OAAO,CAAC,CAAC;AACjG,kCAAkB,QAAQ,cAAc;cAC5C;YACJ;AAEA,mBAAO;UACX;AAEA,cAAI,CAAC,kCAAkC;AACnC,kBAAMG,kBAAiB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACnG,kBAAMA,kBAAiB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACnG,kBAAMA,kBAAiB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACnG,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;AAC7F,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;AAC7F,kBAAMA,kBAAiB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;UACjG,OAAO;AACH,kBAAMP,mBAAkB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACpG,kBAAMA,mBAAkB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACpG,kBAAMA,mBAAkB,2BAA2B,MAAM,cAAc,iBAAiB,YAAY;AACpG,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;AAC9F,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;AAC9F,kBAAMA,mBAAkB,2BAA2B,MAAM,WAAW,iBAAiB,SAAS;UAClG;AAEA,cAAI,uBAAuB,gBAAgB,GAAG;AAC1C,kBAAMQ,yBAAwB,OAAO,2BAA2B,iBAAiB,OAAO,CAAC,CAAC;UAC9F,OAAO;AACH,kBAAMA,yBAAwB,OAAO,2BAA2B,gBAAgB;UACpF;AAEA,iBAAO;QACX;AAEA,eAAO;UACH,OACI,OACA,2BAAqD;AAErD,kBAAM,2CAA2C,yBAAyB,IAAI,yBAAyB;AAEvG,gBAAI,6CAA6C,QAAW;AACxD,qBAAO,QAAQ,QAAQ,wCAAwC;YACnE;AAEA,mBAAO,gBAAgB,OAAO,yBAAyB;UAC3D;;MAER;IACJ;;;;;AC/NA,IAAME,mBAIO;AAJb;;IAAMA,oBAAkB;MACpB,sBAAsB;;AAGnB,IAAM,gCAAiE,CAC1EC,2BACAC,mBACA,mBACAC,iCACA;AACA,aAAO,MAAM,aAAY;QACrB,YAAY,SAAY,SAAuC;AAC3D,gBAAM,gBAAgBD,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgBC,6BAA4B,EAAE,GAAGH,mBAAiB,GAAG,QAAO,CAAE;AACpF,gBAAM,eAAeC,0BAAyB,eAAe,aAAa;AAE1E,4BAAkB,IAAI,YAAY;AAGlC,iBAAO;QACX;QAEO,QAAQ,OAAO,WAAW,EAAE,UAAiB;AAChD,iBACK,aAAa,QAAQ,OAAO,aAAa,YAAY,OAAO,eAAe,QAAQ,MAAM,aAAa,aACvG,kBAAkB,IAAS,QAAQ;QAE3C;;IAER;;;;;AC9BA,IAAa;AAAb;;AAAO,IAAM,yBAAmD,CAAC,uBAAuBG,8BAA4B;AAChH,aAAO,CAAC,2BAA2B,YAAY,qBAAoB;AAC/D,cAAM,qBAAqB,sBAAsB,UAAU;AAE3D,2BAAmB,OAAO,gBAAgB;AAE1C,eAAOA,0BAAyB,YAAY,2BAA2B,gBAAgB;MAC3F;IACJ;;;;;ACPA,IAAa;AAAb;;AAAO,IAAM,gCAAiE,CAC1EC,0BACAC,uBACAC,oBACA;AACA,aAAO,OAAO,WAAW,2BAA2B,oBAAmB;AACnE,cAAM,uBAAuBF,yBAAwB,SAAS;AAE9D,cAAM,QAAQ,IACV,qBAAqB,aAChB,IAAI,CAAC,aAAa,UACf,MAAM,KAAK,WAAW,EAAE,IAAI,OAAO,CAAC,QAAQ,MAAM,MAAK;AACnD,gBAAM,oBAAoBC,sBAAqB,MAAM;AACrD,gBAAM,0BAA0B,MAAM,kBAAkB,OAAO,QAAQ,yBAAyB;AAChG,gBAAM,cAA+D,UAAU,QAAQ;AAEvF,cAAI,CAACC,gBAAe,MAAM,MAAM,cAAc,eAAe,CAACA,gBAAe,SAAS,IAAI;AACtF,oCAAwB,QAAQ,iBAAiB,QAAQ,KAAK;UAClE;QACJ,CAAC,CAAC,EAEL,OAAO,CAAC,sBAAsB,sBAAsB,CAAC,GAAG,sBAAsB,GAAG,iBAAiB,GAAG,CAAA,CAAE,CAAC;MAErH;IACJ;;;;;ACxBA,IAAa;AAAb;;AAAO,IAAM,iCAAmE,CAC5EC,uBACAC,2BACAC,oBACA;AACA,aAAO,OACH,YACA,2BACA,qBACe;AACf,cAAM,wBAAwBD,0BAA4B,UAAU;AAEpE,cAAM,QAAQ,IACV,MAAM,KAAK,sBAAsB,YAAY,EAAE,IAAI,OAAO,CAAC,QAAQ,MAAM,MAAK;AAC1E,gBAAM,oBAAoBD,sBAAqB,MAAM;AACrD,gBAAM,0BAA0B,MAAM,kBAAkB,OAAO,QAAQ,yBAAyB;AAEhG,cAAI,CAACE,gBAAe,MAAM,GAAG;AACzB,oCAAwB,QAAQ,kBAAkB,MAAM;UAC5D;QACJ,CAAC,CAAC;MAEV;IACJ;;;;;AC1BA,IAIa;AAJb;;;AAIO,IAAM,wCAAiF,CAC1FC,kBACAC,uBACAC,kCACA,8CACA;AACA,aAAO,CAAC,8BAA6B;AAEjC,YAAIF,iBAAgB,oBAAoB,MAAM,mBAAmB,yBAAyB,CAAC,GAAG;AAE1F,iBAAO,QAAQ,QACXA,iBAAgB,2CAA2C,yCAAyC,CAAC,EACvG,KAAK,CAAC,8CAA6C;AACjD,gBAAI,CAAC,2CAA2C;AAC5C,oBAAM,sBAAsBE,iCAAgC,2BAA2B,KAAK,GAAG,CAAC;AAEhG,wCAA0B,aAAa,MAAK;AACxC,oCAAoB,iBAAiB;AACrC,oCAAoB,WAAU;cAClC;AACA,kCAAoB,iBAAiB,MAAM,0BAA0B;AAErE,kCAAoB,QAAQ,0BAA0B,WAAW;YACrE;AAEA,mBAAO,0BAA0B,eAAc;UACnD,CAAC;QACL;AAEA,eAAO,IAAI,QAA4B,CAAC,YAAW;AAE/C,gBAAM,WAAWD,sBAAqB,2BAA2B;YAC7D,cAAc;YACd,kBAAkB;YAClB,uBAAuB;YACvB,MAAM;WACT;AAED,oCAA0B,aAAa,CAAC,UAAuC;AAC3E,qBAAS,WAAU;AAEnB,oBAAQ,MAAM,cAAc;UAChC;AAEA,mBAAS,QAAQ,0BAA0B,WAAW;AAEtD,oCAA0B,eAAc;QAC5C,CAAC;MACL;IACJ;;;;;ACnDA,IAAa;AAAb;;AAAO,IAAM,wCAAiF,CAACE,uCAAqC;AAChI,aAAO,CAAC,wBAAwB,iBAAgB;AAC5C,QAAAA,mCAAkC,IAAI,wBAAwB,YAAY;MAC9E;IACJ;;;;;ACJA,IAAa;AAAb;;AAAO,IAAM,6BAA2D,CAACC,4BAA0B;AAC/F,aAAO,CAAC,WAAW,aAAaA,wBAAuB,IAAI,WAAW,QAAQ;IAClF;;;;;ACJA,IAGa;AAHb;;;AAGO,IAAM,uBAA+C,CACxDC,mBACAC,kBACAC,uBACAC,iCACAC,kCACAC,sDACAC,oCACAC,kDACA;AACA,aAAO,CAAC,aAAa,8BACjBL,sBAAqB,WAAW,EAC3B,OAAO,aAAa,yBAAyB,EAK7C,KAAK,MACF,QAAQ,IACJ,MAAM,KAAKC,gCAA+B,yBAAyB,CAAC,EAAE,IAAI,CAAC,qBACvED,sBAAqB,gBAAgB,EAAE,OAAO,kBAAkB,yBAAyB,CAAC,CAC7F,CACJ,EAEJ,KAAK,MAAME,iCAAgC,yBAAyB,CAAC,EACrE,KAAK,CAAC,gBAAe;AAGlB,YAAI,OAAO,YAAY,oBAAoB,YAAY;AACnD,UAAAE,mCAAkC,WAAW;AAC7C,8CAAoC,WAAW;QAEnD,WACI,CAACL,iBAAgBI,sDAAqD,MAClEA,qDAAoD,WAAW,CAAC,GAEtE;AACE,UAAAE,8CAA6C,WAAW;QAC5D;AAEA,QAAAP,kBAAiB,IAAI,WAAW;AAEhC,eAAO;MACX,CAAC;IACb;;;;;AC5CA,IAAMQ,mBAWO;AAXb;;IAAMA,oBAAkB;MACpB,cAAc;;;;;MAKd,kBAAkB;MAClB,uBAAuB;MACvB,KAAK;;AAGF,IAAM,oCAAyE,CAClFC,uBACAC,mBACAC,+BACAC,iCACAC,mBACAC,iCACA;AACA,aAAO,MAAM,yBAA6CL,sBAAuB;QAG7E,YAAY,SAAY,SAAuC;AAC3D,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,yBAAyBG,8BAA6B,eAAe,aAAa;AACxF,gBAAM,YAAYG,6BAA4B,aAAa;AAC3D,gBAAM,2BAAyD,YAAYF,gCAA8B,IAAK;AAE9G,gBAAM,SAAS,OAAO,wBAAwB,wBAAwB;AAEtE,eAAK,OAAOF,kBAAiB,MAAM,WAAW,uBAAuB,GAAG;QAC5E;QAEA,IAAI,MAAG;AACH,iBAAO,KAAK;QAChB;;IAER;;;;;ACzCA,IAKa;AALb;;;AACA;AAIO,IAAM,wCAAiF,CAC1FK,oBACAC,+BACAC,qBACAC,mBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,kCAAkC,oBAAI,QAAO;AAEnD,cAAM,yBAAyB,OAAO,OAA6B,8BAAyD;AACxH,cAAI,yBAAyBF,oBAA+C,KAAK;AAMjF,gBAAM,yCAAyC,iBAAiB,wBAAwB,yBAAyB;AAEjH,cAAI,CAAC,wCAAwC;AACzC,kBAAM,UAAU;cACZ,cAAc,uBAAuB;cACrC,kBAAkB,uBAAuB;cACzC,uBAAuB,uBAAuB;cAC9C,KAAK,uBAAuB,IAAI;;AAGpC,qCAAyBD,8BAA6B,2BAA2B,OAAO;UAC5F;AAEA,0CAAgC,IAAI,2BAA2B,sBAAsB;AAErF,cAAI,CAAC,wCAAwC;AACzC,kBAAME,kBAAiB,2BAA2B,MAAM,KAAK,uBAAuB,GAAG;UAC3F,OAAO;AACH,kBAAMH,mBAAkB,2BAA2B,MAAM,KAAK,uBAAuB,GAAG;UAC5F;AAEA,cAAI,uBAAuB,sBAAsB,GAAG;AAChD,kBAAMI,yBAAwB,OAAO,2BAA2B,uBAAuB,OAAO,CAAC,CAAC;UACpG,OAAO;AACH,kBAAMA,yBAAwB,OAAO,2BAA2B,sBAAsB;UAC1F;AAEA,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAA6B,2BAAqD;AACrF,kBAAM,iCAAiC,gCAAgC,IAAI,yBAAyB;AAEpG,gBAAI,mCAAmC,QAAW;AAC9C,qBAAO,QAAQ,QAAQ,8BAA8B;YACzD;AAEA,mBAAO,uBAAuB,OAAO,yBAAyB;UAClE;;MAER;IACJ;;;;;AC9DA,IACa;AADb;;AACO,IAAM,0CAAqF,CAACC,kCAAgC;AAC/H,aAAO,MAAK;AACR,YAAIA,kCAAiC,MAAM;AACvC,iBAAO;QACX;AAEA,YAAI;AACA,cAAIA,8BAA6B,EAAE,QAAQ,GAAG,YAAY,MAAK,CAAE;QACrE,QAAQ;AACJ,iBAAO;QACX;AAEA,eAAO;MACX;IACJ;;;;;ACfA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA,IACa;AADb;;AACO,IAAM,oDAAyG,CAClHC,oCACAC,0CACA;AACA,aAAO,YAAW;AAEd,YAAID,uCAAsC,MAAM;AAC5C,iBAAO;QACX;AAEA,YAAIC,0CAAyC,MAAM;AAC/C,iBAAO;QACX;AAEA,cAAMC,QAAO,IAAI,KACb,CAAC,sHAAsH,GACvH;UACI,MAAM;SACT;AAGL,cAAM,sBAAsB,IAAID,sCAAqC,GAAG,KAAK,KAAK;AAClF,cAAME,OAAM,IAAI,gBAAgBD,KAAI;AAEpC,YAAI,0BAA0B;AAC9B,YAAI,iCAAiC;AAErC,YAAI;AACA,gBAAM,oBAAoB,aAAa,UAAUC,IAAG;AAEpD,gBAAM,mBAAmB,IAAIH,mCAAkC,qBAAqB,KAAK,EAAE,iBAAiB,EAAC,CAAE;AAC/G,gBAAM,aAAa,oBAAoB,iBAAgB;AAEvD,2BAAiB,KAAK,YAAY,MAAO,0BAA0B;AACnE,2BAAiB,mBAAmB,MAAO,iCAAiC;AAE5E,qBAAW,QAAQ,gBAAgB;AACnC,qBAAW,MAAM,CAAC;AAElB,gBAAM,oBAAoB,eAAc;AAGxC,gBAAM,IAAI,QAAQ,CAAC,YAAY,WAAW,OAAO,CAAC;QACtD,QAAQ;QAER;AACI,cAAI,gBAAgBG,IAAG;QAC3B;AAEA,eAAO,2BAA2B,CAAC;MACvC;IACJ;;;;;ACpDA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA;;;;;;ACAA,IAAa;AAAb;;AAAO,IAAM,kDAAqG,CAC9GC,uBACAC,0CACA;AACA,aAAO,MAAK;AACR,YAAIA,0CAAyC,MAAM;AAC/C,iBAAO,QAAQ,QAAQ,KAAK;QAChC;AAEA,cAAM,4BAA4B,IAAIA,sCAAqC,GAAG,GAAG,KAAK;AAGtF,cAAM,WAAWD,sBAAqB,2BAA2B;UAC7D,cAAc;UACd,kBAAkB;UAClB,uBAAuB;UACvB,MAAM;SACT;AAGD,eAAO,IAAI,QAAQ,CAAC,YAAW;AAC3B,oCAA0B,aAAa,MAAK;AACxC,qBAAS,WAAU;AAEnB,oBAAQ,0BAA0B,gBAAgB,CAAC;UACvD;AACA,oCAA0B,eAAc;QAC5C,CAAC;MACL;IACJ;;;;;AC7BA;;;;;;ACAA,IAAa;AAAb;;AAAO,IAAM,qBAA2C,MAAM,IAAI,aAAa,IAAI,cAAc;;;;;ACCjG,IAAME,mBAQO;AARb;;IAAMA,oBAAkB;MACpB,cAAc;MACd,kBAAkB;MAClB,uBAAuB;MACvB,OAAO;MACP,YAAY;;AAGT,IAAM,kCAAqE,CAC9EC,uBACAC,0BACAC,6BACAC,+BACAC,mBACAC,8BACAC,0BACA;AACA,aAAO,MAAM,uBAA2CN,sBAAuB;QAK3E,YAAY,SAAY,SAAqC;AACzD,gBAAM,gBAAgBI,kBAAiB,OAAO;AAC9C,gBAAM,gBAAgB,EAAE,GAAGL,mBAAiB,GAAG,QAAO;AACtD,gBAAM,uBAAuBG,4BAA2B,eAAe,aAAa;AACpF,gBAAM,YAAYG,6BAA4B,aAAa;AAC3D,gBAAM,yBAAuD,YAAYF,8BAA4B,IAAK;AAG1G,gBAAM,SAAS,MAAM,sBAAsB,sBAAsB;AAEjE,eAAK,oBAAoB;AACzB,eAAK,wBAAwB;AAG7B,UAAAG,sBAAqB,MAAM,CAAC;QAChC;QAEA,IAAI,QAAK;AACL,cAAI,KAAK,mBAAmB;AACxB,mBAAO;UACX;AAEA,iBAAO,KAAK,sBAAsB;QACtC;QAEA,IAAI,MAAM,OAAK;AAEX,cAAI,UAAU,MAAM;AAChB,iBAAK,oBAAoB;AACzB,iBAAK,sBAAsB,QAAQ,IAAI,aAAa,CAAC,GAAG,CAAC,CAAC;UAC9D,OAAO;AAGH,gBAAI,MAAM,SAAS,GAAG;AAClB,oBAAML,yBAAuB;YACjC;AAEA,iBAAK,oBAAoB;AACzB,iBAAK,sBAAsB,QAAQ;UACvC;QACJ;QAEA,IAAI,aAAU;AACV,iBAAO,KAAK,sBAAsB;QACtC;QAEA,IAAI,WAAW,OAAK;AAChB,eAAK,sBAAsB,aAAa;QAC5C;;IAER;;;;;AC3EA,IAKa;AALb;;;AACA;AAIO,IAAM,sCAA6E,CACtFM,6BACAC,qBACAC,6BACA;AACA,aAAO,MAAmE;AACtE,cAAM,gCAAgC,oBAAI,QAAO;AAEjD,cAAM,uBAAuB,OAAO,OAA2B,8BAAyD;AACpH,cAAI,uBAAuBD,oBAA6C,KAAK;AAG7E,gBAAM,uCAAuC,iBAAiB,sBAAsB,yBAAyB;AAE7G,cAAI,CAAC,sCAAsC;AACvC,kBAAM,UAAU;cACZ,cAAc,qBAAqB;cACnC,kBAAkB,qBAAqB;cACvC,uBAAuB,qBAAqB;cAC5C,OAAO,qBAAqB;cAC5B,YAAY,qBAAqB;;AAGrC,mCAAuBD,4BAA2B,2BAA2B,OAAO;UACxF;AAEA,wCAA8B,IAAI,2BAA2B,oBAAoB;AAEjF,cAAI,uBAAuB,oBAAoB,GAAG;AAC9C,kBAAME,yBAAwB,OAAO,2BAA2B,qBAAqB,OAAO,CAAC,CAAC;UAClG,OAAO;AACH,kBAAMA,yBAAwB,OAAO,2BAA2B,oBAAoB;UACxF;AAEA,iBAAO;QACX;AAEA,eAAO;UACH,OAAO,OAA2B,2BAAqD;AACnF,kBAAM,+BAA+B,8BAA8B,IAAI,yBAAyB;AAEhG,gBAAI,iCAAiC,QAAW;AAC5C,qBAAO,QAAQ,QAAQ,4BAA4B;YACvD;AAEA,mBAAO,qBAAqB,OAAO,yBAAyB;UAChE;;MAER;IACJ;;;;;ACpDA,IAAaC;AAAb,IAAAC,eAAA;;AAAO,IAAMD,gBAA+B,MAAO,OAAO,WAAW,cAAc,OAAgB;;;;;ACAnG,IAAa;AAAb;;AAAO,IAAM,0CAAqF,CAC9FE,8BACAC,0BACA;AACA,aAAO,CAAC,gBAAyC;AAC7C,oBAAY,kBAAkB,CAAC,aAAa,uBAAuB,uBAAuB,MAAK;AAC3F,gBAAM,eAAeD,6BAA4B,oBAAoB;AACrE,gBAAM,gBAAgBA,6BAA4B,qBAAqB;AAEvE,cAAI,iBAAiB,YAAY,kBAAkB;AAC/C,kBAAMC,sBAAoB;UAC9B;AAEA,gBAAM,oBAAoB,YAAY;AACtC,gBAAM,cAAc,YAAY,eAAe,aAAa;AAC5D,gBAAM,oBAAoB,YAAY;AAEtC,mBAAS,IAAI,eAAe,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,qBAAqB,IAAI,mBAAmB,KAAK,GAAG;AACtH,wBAAY,CAAC,IAAI,YAAY,IAAI,YAAY;UACjD;QACJ;AAEA,oBAAY,gBAAgB,CAAC,QAAQ,uBAAuB,uBAAuB,MAAK;AACpF,gBAAM,eAAeD,6BAA4B,oBAAoB;AACrE,gBAAM,gBAAgBA,6BAA4B,qBAAqB;AAEvE,cAAI,iBAAiB,YAAY,kBAAkB;AAC/C,kBAAMC,sBAAoB;UAC9B;AAEA,gBAAM,oBAAoB,YAAY;AACtC,gBAAM,cAAc,YAAY,eAAe,aAAa;AAC5D,gBAAM,eAAe,OAAO;AAE5B,mBAAS,IAAI,eAAe,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,qBAAqB,IAAI,cAAc,KAAK,GAAG;AACjH,wBAAY,IAAI,YAAY,IAAI,OAAO,CAAC;UAC5C;QACJ;MACJ;IACJ;;;;;ACvCA,IAAa;AAAb;;AAAO,IAAM,qDAA2G,CACpHC,iCACA;AACA,aAAO,CAAC,gBAAyC;AAC7C,oBAAY,kBAAmB,kBAACC,qBAAmB;AAC/C,iBAAO,CAAC,aAA2B,uBAA+B,uBAAuB,MAAK;AAC1F,kBAAM,eAAeD,6BAA4B,oBAAoB;AACrE,kBAAM,gBAAgBA,6BAA4B,qBAAqB;AAEvE,gBAAI,eAAe,YAAY,QAAQ;AACnC,qBAAOC,iBAAgB,KAAK,aAAa,aAAa,eAAe,YAAY;YACrF;UACJ;QACJ,GAAG,YAAY,eAAe;AAE9B,oBAAY,gBAAiB,kBAACC,mBAAiB;AAC3C,iBAAO,CAAC,QAAsB,uBAA+B,uBAAuB,MAAK;AACrF,kBAAM,eAAeF,6BAA4B,oBAAoB;AACrE,kBAAM,gBAAgBA,6BAA4B,qBAAqB;AAEvE,gBAAI,eAAe,YAAY,QAAQ;AACnC,qBAAOE,eAAc,KAAK,aAAa,QAAQ,eAAe,YAAY;YAC9E;UACJ;QACJ,GAAG,YAAY,aAAa;MAChC;IACJ;;;;;AC1BA,IAAa;AAAb;;AAAO,IAAM,2DAAuH,CAChIC,wBACA;AACA,aAAO,CAAC,6BAA6B,kBAAiB;AAClD,cAAM,kBAAkB,cAAc,aAAa,GAAG,GAAG,KAAK;AAE9D,YAAI,4BAA4B,WAAW,MAAM;AAC7C,sCAA4B,SAAS;QACzC;AAEA,QAAAA,oBACI,6BACA,UACA,CAAC,QAAQ,MAAK;AACV,gBAAM,QAAQ,IAAI,KAAK,2BAA2B;AAElD,iBAAO,UAAU,kBAAkB,OAAO;QAC9C,GACA,CAACC,SAAQ,CAAC,UAAS;AACf,iBAAOA,KAAI,KAAK,6BAA6B,UAAU,OAAO,kBAAkB,KAAK;QACzF,CAAC;MAET;IACJ;;;;;ACvBA,IAAa;AAAb;;AAAO,IAAM,8BAA6D,CAACC,0BAAyBC,wBAAsB;AACtH,aAAO,CAAC,eAAe,sBAAqB;AAExC,0BAAkB,eAAe;AACjC,0BAAkB,mBAAmB;AAGrC,eAAO,eAAe,mBAAmB,gBAAgB;UACrD,KAAK,MAAM;UACX,KAAK,MAAK;AACN,kBAAMD,yBAAuB;UACjC;SACH;AAED,eAAO,eAAe,mBAAmB,oBAAoB;UACzD,KAAK,MAAM;UACX,KAAK,MAAK;AACN,kBAAMA,yBAAuB;UACjC;SACH;AAGD,cAAM,wBAAwB,cAAc,mBAAkB;AAE9D,cAAM,gBAAgB,MAAK;AACvB,gBAAM,SAAS,kBAAkB;AAEjC,mBAAS,IAAI,GAAG,IAAI,QAAQ,KAAK,GAAG;AAChC,kCAAsB,QAAQ,mBAAmB,GAAG,CAAC;UACzD;QACJ;AACA,cAAM,mBAAmB,MAAM,sBAAsB,WAAW,iBAAiB;AAEjF,QAAAC,oBAAmB,mBAAmB,eAAe,gBAAgB;MACzE;IACJ;;;;;ACnCA,IAAa;AAAb;;AAAO,IAAM,iBAA0C,CAAC,aAAa,QAAQ,kBAAiB;AAE1F,UAAI,YAAY,oBAAoB,QAAW;AAC3C,eAAO,YAAY,eAAe,aAAa,EAAE,CAAC;MACtD;AAEA,kBAAY,gBAAgB,QAAQ,aAAa;AAEjD,aAAO,OAAO,CAAC;IACnB;;;;;ACTA,IAAa;AAAb;;AAAO,IAAM,YAAgC,CAAC,UAAS;AACnD,UAAI,UAAU,MAAM;AAChB,eAAO;MACX;AAEA,YAAM,SAAS,MAAM;AAErB,UAAI,SAAS,MAAM,GAAG;AAClB,eAAO,MAAM,KAAK,MAAM,SAAS,CAAC,CAAC,MAAM;MAC7C;AAEA,aAAO,MAAM,SAAS,IAAI,CAAC,IAAI,MAAM,SAAS,CAAC,MAAM;IACzD;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,qBAAkD,CAACC,SAAQ,UAAU,cAAc,iBAAgB;AAC5G,UAAI,YAAYA;AAEhB,aAAO,CAAC,UAAU,eAAe,QAAQ,GAAG;AACxC,oBAAY,OAAO,eAAe,SAAS;MAC/C;AAEA,YAAM,EAAE,KAAK,KAAAC,KAAG,IAAmC,OAAO,yBAAyB,WAAW,QAAQ;AAEtG,aAAO,eAAeD,SAAQ,UAAU,EAAE,KAAK,aAAa,GAAG,GAAG,KAAK,aAAaC,IAAG,EAAC,CAAE;IAC9F;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,kCAA4E,CAAC,YAAW;AACjG,aAAO;QACH,GAAG;QACH,oBACI,QAAQ,uBAAuB,SACzB,QAAQ,qBACR,QAAQ,mBAAmB,KAAK,QAAQ,oBAAoB;;;;;;UAM5D,CAAC,QAAQ,YAAY;YACrB,MAAM,KAAK,EAAE,QAAQ,QAAQ,gBAAe,GAAI,MAAM,CAAC;;IAEzE;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,iCAA0E,CAAC,YAAW;AAC/F,aAAO,EAAE,GAAG,SAAS,cAAc,QAAQ,gBAAe;IAC9D;;;;;ACFA,IAAa;AAAb;;AAAO,IAAM,8BAAoE,CAAC,YAAW;AACzF,YAAM,EAAE,MAAM,KAAI,IAAK;AAEvB,UAAI,SAAS,QAAW;AACpB,YAAI,SAAS,QAAW;AACpB,iBAAO,EAAE,GAAG,SAAS,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,EAAC;QACnD;AAEA,eAAO,EAAE,GAAG,SAAS,MAAM,MAAM,KAAK,MAAM,MAAM,CAAC,GAAG,KAAI;MAC9D;AAEA,UAAI,SAAS,QAAW;AACpB,eAAO,EAAE,GAAG,SAAS,MAAM,MAAM,MAAM,KAAK,MAAM,MAAM,CAAC,EAAC;MAC9D;AAEA,aAAO,EAAE,GAAG,SAAS,MAAM,KAAI;IACnC;;;;;AChBA,IAAa;AAAb;;AAAO,IAAM,8BAAoE,CAAC,YAAY,OAAO,cAAa;AAC9G,UAAI;AACA,mBAAW,eAAe,OAAO,SAAS;MAC9C,SAAS,KAAK;AACV,YAAI,IAAI,SAAS,GAAG;AAChB,gBAAM;QACV;AAEA,oCAA4B,YAAY,OAAO,YAAY,IAAI;MACnE;IACJ;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,8DAA8D,CAAC,kBAAiC;AACzG,YAAM,8BAA8B,cAAc,mBAAkB;AAEpE,kCAA4B,MAAK;AAEjC,UAAI;AACA,oCAA4B,MAAK;MACrC,QAAQ;AACJ,eAAO;MACX;AAEA,aAAO;IACX;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,4DAA4D,CAAC,kBAAiC;AACvG,YAAM,8BAA8B,cAAc,mBAAkB;AACpE,YAAM,oBAAoB,cAAc,aAAa,GAAG,GAAG,KAAK;AAEhE,kCAA4B,SAAS;AAErC,UAAI;AACA,oCAA4B,MAAM,GAAG,CAAC;MAC1C,QAAQ;AACJ,eAAO;MACX;AAEA,aAAO;IACX;;;;;ACbA,IAAa;AAAb;;AAAO,IAAM,4DAA4D,CAAC,kBAAiC;AACvG,YAAM,8BAA8B,cAAc,mBAAkB;AAEpE,kCAA4B,MAAK;AAEjC,UAAI;AACA,oCAA4B,KAAI;MACpC,QAAQ;AACJ,eAAO;MACX;AAEA,aAAO;IACX;;;;;ACZA,IAAa;AAAb;;AAAO,IAAM,mEAAmE,CAAC,kBAAiC;AAC9G,YAAM,8BAA8B,cAAc,iBAAgB;AAElE,UAAI;AACA,oCAA4B,MAAM,EAAE;MACxC,SAAS,KAAK;AACV,eAAO,eAAe;MAC1B;AAEA,aAAO;IACX;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,gEAAgE,CAAC,kBAAiC;AAC3G,YAAM,oBAAoB,cAAc,aAAa,GAAG,GAAG,KAAK;AAChE,YAAM,8BAA8B,cAAc,mBAAkB;AAEpE,kCAA4B,SAAS;AACrC,kCAA4B,MAAK;AACjC,kCAA4B,KAAI;AAEhC,UAAI;AACA,oCAA4B,KAAI;AAEhC,eAAO;MACX,QAAQ;AACJ,eAAO;MACX;IACJ;;;;;ACfA,IAAa;AAAb;;AAAO,IAAM,kEAAkE,CAAC,kBAAiC;AAC7G,YAAM,8BAA8B,cAAc,iBAAgB;AAElE,UAAI;AACA,oCAA4B,KAAK,EAAE;MACvC,SAAS,KAAK;AACV,eAAO,eAAe;MAC1B;AAEA,aAAO;IACX;;;;;ACVA,IAAa;AAAb;;AAAO,IAAM,yCAA0F,CAAC,4BAA2B;AAC/H,YAAM,EAAE,OAAO,MAAK,IAAK,IAAI,eAAc;AAE3C,UAAI;AAEA,cAAM,YAAY,uBAAuB;MAC7C;AACI,cAAM,MAAK;AACX,cAAM,MAAK;MACf;IACJ;;;;;ACZA;;;;;;ACAA;;;;;;ACEA,IAAa;AAAb;;AAAO,IAAM,qDAAqD,CAAC,gCAAmE;AAClI,kCAA4B,QAAS,kBAAC,UAAS;AAC3C,eAAO,CAAC,OAAO,GAAG,SAAS,GAAGC,cAAqB;AAC/C,gBAAM,SAAS,4BAA4B;AAE3C,gBAAM,gBAAgB,WAAW,OAAO,SAAS,KAAK,IAAI,OAAO,UAAU,MAAM;AAGjF,cAAI,WAAW,QAAQ,gBAAgB,OAAO,WAAW,MAAM,4BAA4B,QAAQ,YAAY;AAC3G,kBAAM,KAAK,6BAA6B,MAAM,GAAG,CAAC;UACtD,OAAO;AACH,kBAAM,KAAK,6BAA6B,MAAM,eAAeA,SAAQ;UACzE;QACJ;MACJ,GAAG,4BAA4B,KAAK;IACxC;;;;;AChBA,IAEa;AAFb;;;AAEO,IAAM,yDAA0H,CACnI,gCACA,kBACA;AACA,YAAM,iBAAiB,cAAc,WAAU;AAE/C,qCAA+B,QAAQ,cAAc;AAErD,YAAM,qBAAsB,kBAACC,gBAAc;AACvC,eAAO,MAAK;AAEiC,UAAAA,YAAY,KAAK,gCAAgC,cAAc;AACxG,yCAA+B,oBAAoB,SAAS,kBAAkB;QAClF;MACJ,GAAG,+BAA+B,UAAU;AAE5C,qCAA+B,iBAAiB,SAAS,kBAAkB;AAE3E,2BAAqB,gCAAgC,cAAc;AAEnE,qCAA+B,OAAQ,kBAAC,SAAQ;AAC5C,YAAI,YAAY;AAEhB,eAAO,CAAC,OAAO,MAAK;AAChB,cAAI,WAAW;AACX,gBAAI;AACA,mBAAK,KAAK,gCAAgC,IAAI;YAClD,QAAQ;AACJ,6BAAe,KAAK,eAAe,GAAG,IAAI;YAC9C;UACJ,OAAO;AACH,iBAAK,KAAK,gCAAgC,IAAI;AAE9C,wBAAY;UAChB;QACJ;MACJ,GAAG,+BAA+B,IAAI;IAC1C;;;;;ACtCA,IAAa;AAAb;;AAAO,IAAM,oBAAgD,CAAC,QAAQ,kBAAiB;AACnF,aAAO,CAAC,UAAS;AACb,cAAM,aAAa,EAAE,OAAO,OAAM;AAElC,eAAO,iBAAiB,OAAO;UAC3B,eAAe;UACf,QAAQ;SACX;AAED,YAAI,OAAO,kBAAkB,YAAY;AACrC,iBAAO,cAAc,KAAK,QAAQ,KAAK;QAC3C;AAEA,eAAO,cAAc,YAAY,KAAK,QAAQ,KAAK;MACvD;IACJ;;;;;ACjBA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,iCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,gCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,wBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,sBAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;;;;;;ACAA,IAAAC,mBAAA;;;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;;;;;ACnFA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,iCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0CAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kDAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,gDAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,+BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,+BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,qCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,wCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,+CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0DAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,yCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,sCAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,8CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,wCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,+BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,oCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kDAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,sBAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,iCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,8BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,oCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,yCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,wCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;A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AAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,qFAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,qCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0CAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1YA,IA8RM,qCACA,sCACA,wCACA,wBACA,sBACA,iBACAC,SACA,0BACA,sBACA,yBACA,4BACA,kBACA,sCACA,6BACA,0BACA,wBACA,+BACA,sBACAC,oBACA,oBACA,mCACA,sBAgDA,yBAaA,kBACA,8BACA,6BACA,mCACA,8CACA,wBAeA,qBACA,0BACA,mBACA,mCAaA,kBACA,qCAOA,kBAeA,kCAeA,iCAUA,gCAOA,sBACA,6BAUA,oBACA,uBACA,+BACA,iCAKA,8BAOA,mCAKA,gCAQA,qCAMA,gCAOA,kCAOA,+BASA,2BACA,6BAKA,0BAQA,yBAOA,sBASA,oCACA,sCAOA,mCAUA,wBAOA,qBAQA,gCAMA,iCAMA,6BAOA,2BACA,0BAQA,qBAUA,iCACA,oCAQA,4BAQA,8BAOA,2BASA,4CACA,iCAOA,4BASA,6BAYA,wBACA,0BAYA,uBASA,0BACA,yBAMA,oCAQA,8BACA,gCAOA,6BAQA,8BAKA,2BASA,iBACA,kCACA,gCACA,sCAMO,uBAmBP,iBAEO,iBAcP,6BAsBA,wCAMA,4CAOA,uCAMA,6CAIA,4CAEA,yBAgBA,gCACA,+BACA,wBACA,kCACA,2BACA,mCACA,iCACA,mCAeA,8BAOA,gCAkBA,8BACA,iCAGA,6BA2EA,gCAYA,iCAIA,gBAUA,uCAYA,gCAgCO,mBAEA,gBAEA,iBAEA;AA1iCb,IAAAC,gBAAA;;IAAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAqEA,IAAAC;AACA,IAAAC;AAEA,IAAM,sCAAsC,0CAA0C,kBAAkB;AACxG,IAAM,uCAAuC,2CAA2C,kBAAkB;AAC1G,IA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",
  "names": ["exports", "escape", "e", "parse", "_a", "c", "UsedValueState", "_a", "c", "n", "e", "_a", "c", "Type", "_a", "DataType", "t", "u", "_a", "e", "keys", "t", "_a", "e", "ipv6", "path", "path", "parse", "e", "_a", "Ajv", "e", "t", "e", "_a", "u", "t", "DiscrError", "_a", "Ajv", "date", "time", "e", "_a", "c", "UsedValueState", "_a", "c", "n", "e", "_a", "c", "Type", "_a", "DataType", "t", "u", "_a", "e", "require_json_schema_traverse", "t", "_a", "e", "require_data", "_a", "Ajv", "e", "t", "e", "_a", "u", "t", "DiscrError", "_a", "require_json_schema_draft_07", "Ajv", "_a", "generateUniqueNumber", "set", "number", "cache", "generateUniqueNumber", "isMessagePort", "handler", "init_module", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "url", "worker", "url", "init_module", "nativeBlobEventConstructor", "readElementContent", "readElementType", "createEventTarget", "wrapEventListener", "window", "window", "createNativeMediaRecorder", "createNotSupportedError", "createWebAudioMediaRecorder", "createWebmPcmMediaRecorder", "encoderRegexes", "eventTargetConstructor", "nativeMediaRecorderConstructor", "window", "createInvalidModificationError", "createNotSupportedError", "nativeMediaRecorderConstructor", "blob", "window", "readVariableSizeInteger", "readVariableSizeInteger", "readVariableSizeIntegerLength", "createAddUniqueNumber", "init_add_unique_number", "generateUniqueNumber", "set", "number", "createCache", "init_cache", "MAX_SAFE_INTEGER", "TWO_TO_THE_POWER_OF_TWENTY_NINE", "TWO_TO_THE_POWER_OF_THIRTY", "createGenerateUniqueNumber", "init_generate_unique_number", "cache", "init_types", "LAST_NUMBER_WEAK_MAP", "cache", "generateUniqueNumber", "addUniqueNumber", "init_module", "init_add_unique_number", "init_cache", "init_generate_unique_number", "init_types", "createCache", "createGenerateUniqueNumber", "createAddUniqueNumber", "noop", "init_types", "init_types", "emitNotSupportedError", "window", "wrapSubscribeFunction", "mapSubscribableThing", "mutations", "prependSubscribableThing", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "map", "emitNotSupportedError", "window", "wrapSubscribeFunction", "mediaDevices", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "midiInputs", "wrapSubscribeFunction", "midiOutputs", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "promise", "emitNotSupportedError", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "patch", "toObserver", "init_wake_lock", "init_interfaces", "init_wake_lock", "init_window", "init_types", "init_window", "window", "init_module", "init_interfaces", "init_types", "indefiniteArticle", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "dashify", "indefiniteArticle", "string", "init_module", "init_module", "init_interfaces", "init_value_map", "init_worker_definition", "init_types", "init_value_map", "init_worker_definition", "init_module", "init_interfaces", "init_types", "worklet", "addAudioWorkletModule", "blob", "url", "generateUniqueNumber", "createListener", "on", "validateState", "audioWorkletNodeConstructor", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "generateUniqueNumber", "duration", "time", "time", "time", "time", "time", "duration", "duration", "time", "init_cancel_and_hold_automation_event", "init_cancel_scheduled_values_automation_event", "init_exponential_ramp_to_value_automation_event", "init_linear_ramp_to_value_automation_event", "init_set_value_automation_event", "init_set_target_automation_event", "init_set_value_curve_automation_event", "init_interfaces", "init_cancel_and_hold_automation_event", "init_cancel_scheduled_values_automation_event", "init_exponential_ramp_to_value_automation_event", "init_linear_ramp_to_value_automation_event", "init_set_value_automation_event", "init_set_target_automation_event", "init_set_value_curve_automation_event", "init_types", "init_module", "init_interfaces", "init_types", "insertElementInSet", "url", "cacheTestResult", "createNotSupportedError", "exposeCurrentFrameAndCurrentTime", "getNativeContext", "getOrCreateBackupOfflineAudioContext", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "window", "promise", "blob", "url", "map", "set", "addActiveInputConnectionToAudioNode", "addPassiveInputConnectionToAudioNode", "connectNativeAudioNodeToNativeAudioNode", "deleteActiveInputConnectionToAudioNode", "disconnectNativeAudioNodeFromNativeAudioNode", "getAudioNodeConnections", "getAudioNodeTailTime", "getEventListenersOfAudioNode", "getNativeAudioNode", "insertElementInSet", "isActiveAudioNode", "isPartOfACycle", "isPassiveAudioNode", "insertElementInSet", "createNativeGainNode", "disconnect", "getUnrenderedAudioWorkletNodes", "createAnalyserNodeRenderer", "createIndexSizeError", "createNativeAnalyserNode", "getNativeContext", "isNativeOfflineAudioContext", "array", "createNativeAnalyserNode", "getNativeAudioNode", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioBufferStore", "cacheTestResult", "createNotSupportedError", "nativeAudioBufferConstructor", "nativeOfflineAudioContextConstructor", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioBufferSourceNodeRenderer", "createAudioParam", "createInvalidStateError", "createNativeAudioBufferSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "duration", "connectAudioParam", "createNativeAudioBufferSourceNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "baseAudioContextConstructor", "createInvalidStateError", "createNotSupportedError", "createUnknownError", "mediaElementAudioSourceNodeConstructor", "mediaStreamAudioDestinationNodeConstructor", "mediaStreamAudioSourceNodeConstructor", "mediaStreamTrackAudioSourceNodeConstructor", "nativeAudioContextConstructor", "audioNodeConstructor", "createAudioDestinationNodeRenderer", "createIndexSizeError", "createInvalidStateError", "getNativeContext", "isNativeOfflineAudioContext", "renderInputsOfAudioNode", "renderInputsOfAudioNode", "createAudioParam", "createNativeChannelMergerNode", "createNativeConstantSourceNode", "createNativeScriptProcessorNode", "createNotSupportedError", "getFirstSample", "isNativeOfflineAudioContext", "overwriteAccessors", "set", "set", "nativeAudioWorkletNodeConstructor", "connect", "disconnect", "cacheTestResult", "createIndexSizeError", "createInvalidAccessError", "createNotSupportedError", "eventTargetConstructor", "getNativeContext", "isNativeAudioContext", "isNativeAudioNode", "isNativeAudioParam", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "init_module", "audioParamAudioNodeStore", "createAudioParamRenderer", "createCancelAndHoldAutomationEvent", "createCancelScheduledValuesAutomationEvent", "createExponentialRampToValueAutomationEvent", "createLinearRampToValueAutomationEvent", "createSetTargetAutomationEvent", "createSetValueAutomationEvent", "createSetValueCurveAutomationEvent", "nativeAudioContextConstructor", "setValueAtTimeUntilPossible", "duration", "duration", "DEFAULT_OPTIONS", "addUnrenderedAudioWorkletNode", "audioNodeConstructor", "createAudioParam", "createAudioWorkletNodeRenderer", "createNativeAudioWorkletNode", "getAudioNodeConnections", "getBackupOfflineAudioContext", "getNativeContext", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "sanitizeAudioWorkletNodeOptions", "setActiveAudioWorkletNodeInputs", "testAudioWorkletNodeOptionsClonability", "wrapEventListener", "_a", "array", "exposeCurrentFrameAndCurrentTime", "connectAudioParam", "connectMultipleOutputs", "createNativeAudioBufferSourceNode", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeConstantSourceNode", "createNativeGainNode", "deleteUnrenderedAudioWorkletNode", "disconnectMultipleOutputs", "getNativeAudioNode", "nativeAudioWorkletNodeConstructor", "nativeOfflineAudioContextConstructor", "renderAutomation", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "addAudioWorkletModule", "analyserNodeConstructor", "audioBufferConstructor", "audioBufferSourceNodeConstructor", "biquadFilterNodeConstructor", "channelMergerNodeConstructor", "channelSplitterNodeConstructor", "constantSourceNodeConstructor", "convolverNodeConstructor", "decodeAudioData", "delayNodeConstructor", "dynamicsCompressorNodeConstructor", "gainNodeConstructor", "iIRFilterNodeConstructor", "minimalBaseAudioContextConstructor", "oscillatorNodeConstructor", "pannerNodeConstructor", "periodicWaveConstructor", "stereoPannerNodeConstructor", "waveShaperNodeConstructor", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createBiquadFilterNodeRenderer", "createInvalidAccessError", "createNativeBiquadFilterNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeBiquadFilterNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createChannelMergerNodeRenderer", "createNativeChannelMergerNode", "getNativeContext", "isNativeOfflineAudioContext", "createNativeChannelMergerNode", "getNativeAudioNode", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createChannelSplitterNodeRenderer", "createNativeChannelSplitterNode", "getNativeContext", "isNativeOfflineAudioContext", "sanitizeChannelSplitterOptions", "createNativeChannelSplitterNode", "getNativeAudioNode", "renderInputsOfAudioNode", "renderInputsOfAudioParam", "createIndexSizeError", "createNativeAudioBufferSourceNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createConstantSourceNodeRendererFactory", "createNativeConstantSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "connectAudioParam", "createNativeConstantSourceNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createConvolverNodeRenderer", "createNativeConvolverNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeConvolverNode", "getNativeAudioNode", "renderInputsOfAudioNode", "createNotSupportedError", "nativeOfflineAudioContextConstructor", "audioBufferStore", "cacheTestResult", "createDataCloneError", "createEncodingError", "getNativeContext", "isNativeContext", "testAudioBufferCopyChannelMethodsOutOfBoundsSupport", "testPromiseSupport", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "connectNativeAudioNodeToNativeAudioNode", "getAudioNodeConnections", "getNativeAudioNode", "getNativeAudioParam", "getNativeContext", "isActiveAudioNode", "isNativeOfflineAudioContext", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createDelayNodeRenderer", "createNativeDelayNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeDelayNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "pickElementFromSet", "getUnrenderedAudioWorkletNodes", "audioParamAudioNodeStore", "getAudioNodeConnections", "getValueForKey", "createIndexSizeError", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createDynamicsCompressorNodeRenderer", "createNativeDynamicsCompressorNode", "createNotSupportedError", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeDynamicsCompressorNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "window", "blob", "url", "createEventTargetConstructor", "init_event_target_constructor", "wrapEventListener", "window", "createAbortError", "url", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createGainNodeRenderer", "createNativeGainNode", "getNativeContext", "isNativeOfflineAudioContext", "connectAudioParam", "createNativeGainNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "activeAudioWorkletNodeInputsStore", "getValueForKey", "getAudioNodeConnections", "audioNodeTailTimeStore", "_a", "getAudioParamConnections", "backupOfflineAudioContextStore", "createInvalidStateError", "init_invalid_state_error", "init_invalid_state_error", "createInvalidStateError", "backupOfflineAudioContextStore", "nativeOfflineAudioContextConstructor", "unrenderedAudioWorkletNodeStore", "DEFAULT_OPTIONS", "audioNodeConstructor", "createNativeIIRFilterNode", "createIIRFilterNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeAudioBufferSourceNode", "getNativeAudioNode", "nativeOfflineAudioContextConstructor", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "disconnectNativeAudioNodeFromNativeAudioNode", "getAudioNodeConnections", "getNativeAudioNode", "getNativeAudioParam", "isActiveAudioNode", "isNativeAudioContext", "isNativeAudioNode", "isNativeAudioParam", "isNativeOfflineAudioContext", "nativeAudioContextConstructor", "window", "window", "isNativeAudioContext", "isNativeOfflineAudioContext", "nativeOfflineAudioContextConstructor", "window", "init_is_supported_promise", "audioNodeConstructor", "createNativeMediaElementAudioSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "DEFAULT_OPTIONS", "audioNodeConstructor", "createNativeMediaStreamAudioDestinationNode", "getNativeContext", "isNativeOfflineAudioContext", "audioNodeConstructor", "createNativeMediaStreamAudioSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "audioNodeConstructor", "createNativeMediaStreamTrackAudioSourceNode", "getNativeContext", "createInvalidStateError", "createNotSupportedError", "createUnknownError", "minimalBaseAudioContextConstructor", "nativeAudioContextConstructor", "audioDestinationNodeConstructor", "createAudioListener", "eventTargetConstructor", "isNativeOfflineAudioContext", "unrenderedAudioWorkletNodeStore", "wrapEventListener", "promise", "DEFAULT_OPTIONS", "cacheTestResult", "createInvalidStateError", "createNativeOfflineAudioContext", "minimalBaseAudioContextConstructor", "startRendering", "insertElementInSet", "isNativeAudioNode", "connect", "disconnect", "array", "cacheTestResult", "createIndexSizeError", "window", "init_invalid_state_error", "duration", "createInvalidStateError", "duration", "addSilentConnection", "cacheTestResult", "testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport", "testAudioBufferSourceNodeStartMethodOffsetClampingSupport", "testAudioBufferSourceNodeStopMethodNullifiedBufferSupport", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls", "window", "createNativeGainNode", "overwriteAccessors", "set", "window", "createInvalidStateError", "createNativeAudioWorkletNodeFaker", "createNativeGainNode", "createNotSupportedError", "monitorConnections", "nativeAudioWorkletNodeConstructor", "connectMultipleOutputs", "createIndexSizeError", "createInvalidStateError", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeConstantSourceNode", "createNativeGainNode", "createNativeScriptProcessorNode", "createNotSupportedError", "disconnectMultipleOutputs", "exposeCurrentFrameAndCurrentTime", "getActiveAudioWorkletNodeInputs", "monitorConnections", "nativeAudioContextConstructor", "wrapChannelMergerNode", "init_invalid_state_error", "createInvalidStateError", "addSilentConnection", "cacheTestResult", "createNativeConstantSourceNodeFaker", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "addSilentConnection", "createNativeAudioBufferSourceNode", "createNativeGainNode", "monitorConnections", "createNotSupportedError", "overwriteAccessors", "set", "createNotSupportedError", "createNativeIIRFilterNodeFaker", "createInvalidAccessError", "createInvalidStateError", "createNativeScriptProcessorNode", "createNotSupportedError", "createInvalidStateError", "isNativeOfflineAudioContext", "window", "addSilentConnection", "cacheTestResult", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls", "createNativePannerNodeFaker", "connectNativeAudioNodeToNativeAudioNode", "createInvalidStateError", "createNativeChannelMergerNode", "createNativeGainNode", "createNativeScriptProcessorNode", "createNativeWaveShaperNode", "createNotSupportedError", "disconnectNativeAudioNodeFromNativeAudioNode", "getFirstSample", "monitorConnections", "createIndexSizeError", "createNotSupportedError", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeGainNode", "createNativeWaveShaperNode", "createNotSupportedError", "monitorConnections", "nativeStereoPannerNodeFakerFactory", "createConnectedNativeAudioBufferSourceNode", "createInvalidStateError", "createNativeWaveShaperNodeFaker", "isDCCurve", "monitorConnections", "nativeAudioContextConstructor", "overwriteAccessors", "set", "createConnectedNativeAudioBufferSourceNode", "createInvalidStateError", "createNativeGainNode", "isDCCurve", "monitorConnections", "createNotSupportedError", "init_not_supported_error", "DEFAULT_OPTIONS", "baseAudioContextConstructor", "cacheTestResult", "createInvalidStateError", "createNativeOfflineAudioContext", "startRendering", "c", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativeOscillatorNode", "createOscillatorNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "connectAudioParam", "createNativeOscillatorNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativePannerNode", "createPannerNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeChannelMergerNode", "createNativeConstantSourceNode", "createNativeGainNode", "createNativePannerNode", "getNativeAudioNode", "nativeOfflineAudioContextConstructor", "renderAutomation", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "DEFAULT_OPTIONS", "createNativePeriodicWave", "getNativeContext", "sanitizePeriodicWaveOptions", "renderInputsOfAudioParam", "getAudioNodeConnections", "getAudioNodeRenderer", "isPartOfACycle", "getAudioNodeRenderer", "getAudioParamConnections", "isPartOfACycle", "cacheTestResult", "createNativeGainNode", "createNativeScriptProcessorNode", "activeAudioWorkletNodeInputsStore", "audioNodeTailTimeStore", "audioBufferStore", "cacheTestResult", "getAudioNodeRenderer", "getUnrenderedAudioWorkletNodes", "renderNativeOfflineAudioContext", "testAudioBufferCopyChannelMethodsOutOfBoundsSupport", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativeStereoPannerNode", "createStereoPannerNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "connectAudioParam", "createNativeStereoPannerNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "nativeAudioBufferConstructor", "nativeAudioWorkletNodeConstructor", "nativeOfflineAudioContextConstructor", "blob", "url", "createNativeGainNode", "nativeOfflineAudioContextConstructor", "DEFAULT_OPTIONS", "audioNodeConstructor", "createInvalidStateError", "createNativeWaveShaperNode", "createWaveShaperNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeWaveShaperNode", "getNativeAudioNode", "renderInputsOfAudioNode", "createWindow", "init_window", "convertNumberToUnsignedLong", "createIndexSizeError", "convertNumberToUnsignedLong", "copyFromChannel", "copyToChannel", "overwriteAccessors", "set", "createInvalidStateError", "monitorConnections", "object", "set", "duration", "disconnect", "init_audio_buffer_source_node", "init_audio_node", "init_audio_param_renderer", "init_audio_worklet_node", "init_biquad_filter_node", "init_constant_source_node", "init_delay_node", "init_gain_node", "init_native_audio_node_faker", "init_offline_audio_context_constructor", "init_oscillator_node", "init_read_only_map", "init_stereo_panner_node", "init_interfaces", "init_audio_buffer_source_node", "init_audio_node", "init_audio_param_renderer", "init_audio_worklet_node", "init_biquad_filter_node", "init_constant_source_node", "init_delay_node", "init_gain_node", "init_native_audio_node_faker", "init_offline_audio_context_constructor", "init_oscillator_node", "init_read_only_map", "init_stereo_panner_node", "init_analyser_node_constructor", "init_analyser_node_renderer_factory", "init_audio_buffer_constructor", "init_audio_buffer_source_node_constructor", "init_audio_buffer_source_node_renderer", "init_audio_buffer_source_node_renderer_factory", "init_audio_context_constructor", "init_audio_destination_node_constructor", "init_audio_destination_node_renderer_factory", "init_audio_listener_factory", "init_audio_node_constructor", "init_audio_node_output_connection", "init_audio_node_renderer", "init_audio_param_factory", "init_audio_worklet_node_constructor", "init_audio_worklet_node_renderer_factory", "init_base_audio_context_constructor", "init_biquad_filter_node_constructor", "init_biquad_filter_node_renderer_factory", "init_channel_merger_node_constructor", "init_channel_merger_node_renderer_factory", "init_channel_splitter_node_constructor", "init_channel_splitter_node_renderer_factory", "init_connected_native_audio_buffer_source_node_factory", "init_constant_source_node_constructor", "init_constant_source_node_renderer", "init_constant_source_node_renderer_factory", "init_convolver_node_constructor", "init_convolver_node_renderer_factory", "init_delay_node_constructor", "init_delay_node_renderer_factory", "init_dynamics_compressor_node_constructor", "init_dynamics_compressor_node_renderer_factory", "init_event_handler", "init_event_target_constructor", "init_gain_node_constructor", "init_gain_node_renderer_factory", "init_iir_filter_node_constructor", "init_iir_filter_node_renderer_factory", "init_increment_cycle_counter_factory", "init_media_element_audio_source_node_constructor", "init_media_stream_audio_destination_node_constructor", "init_media_stream_audio_source_node_constructor", "init_media_stream_track_audio_source_node_constructor", "init_minimal_audio_context_constructor", "init_minimal_base_audio_context_constructor", "init_minimal_offline_audio_context_constructor", "init_native_analyser_node_factory", "init_native_audio_buffer_constructor", "init_native_audio_buffer_source_node_factory", "init_native_audio_context_constructor", "init_native_audio_destination_node", "init_native_audio_node", "init_native_audio_worklet_node_constructor", "init_native_audio_worklet_node_factory", "init_native_audio_worklet_node_faker_factory", "init_native_biquad_filter_node", "init_native_channel_merger_node_factory", "init_native_channel_splitter_node", "init_native_constant_source_node_factory", "init_native_constant_source_node_faker_factory", "init_native_convolver_node_factory", "init_native_delay_node", "init_native_dynamics_compressor_node_factory", "init_native_gain_node", "init_native_iir_filter_node_factory", "init_native_iir_filter_node_faker_factory", "init_native_media_element_audio_source_node", "init_native_media_stream_audio_destination_node", "init_native_media_stream_audio_source_node", "init_native_media_stream_track_audio_source_node_factory", "init_native_offline_audio_context_constructor", "init_native_oscillator_node_factory", "init_native_panner_node_factory", "init_native_panner_node_faker_factory", "init_native_periodic_wave_factory", "init_native_script_processor_node", "init_native_stereo_panner_node_factory", "init_native_stereo_panner_node_faker_factory", "init_native_wave_shaper_node_factory", "init_native_wave_shaper_node_faker_factory", "init_oscillator_node_constructor", "init_oscillator_node_renderer", "init_oscillator_node_renderer_factory", "init_panner_node_constructor", "init_panner_node_renderer_factory", "init_periodic_wave_constructor", "init_stereo_panner_node_constructor", "init_stereo_panner_node_renderer_factory", "init_test_media_stream_audio_source_node_media_stream_without_audio_track_support", "init_wave_shaper_node_constructor", "init_wave_shaper_node_renderer_factory", "init_window", "init_window_factory", "init_types", "init_analyser_node_constructor", "init_analyser_node_renderer_factory", "init_audio_buffer_constructor", "init_audio_buffer_source_node_constructor", "init_audio_buffer_source_node_renderer", "init_audio_buffer_source_node_renderer_factory", "init_audio_context_constructor", "init_audio_destination_node_constructor", "init_audio_destination_node_renderer_factory", "init_audio_listener_factory", "init_audio_node_constructor", "init_audio_node_output_connection", "init_audio_node_renderer", "init_audio_param_factory", "init_audio_worklet_node_constructor", "init_audio_worklet_node_renderer_factory", "init_base_audio_context_constructor", "init_biquad_filter_node_constructor", "init_biquad_filter_node_renderer_factory", "init_channel_merger_node_constructor", "init_channel_merger_node_renderer_factory", "init_channel_splitter_node_constructor", "init_channel_splitter_node_renderer_factory", "init_connected_native_audio_buffer_source_node_factory", "init_constant_source_node_constructor", "init_constant_source_node_renderer", "init_constant_source_node_renderer_factory", "init_convolver_node_constructor", "init_convolver_node_renderer_factory", "init_delay_node_constructor", "init_delay_node_renderer_factory", "init_dynamics_compressor_node_constructor", "init_dynamics_compressor_node_renderer_factory", "init_event_handler", "init_event_target_constructor", "init_gain_node_constructor", "init_gain_node_renderer_factory", "init_iir_filter_node_constructor", "init_iir_filter_node_renderer_factory", "init_increment_cycle_counter_factory", "init_media_element_audio_source_node_constructor", "init_media_stream_audio_destination_node_constructor", "init_media_stream_audio_source_node_constructor", "init_media_stream_track_audio_source_node_constructor", "init_minimal_audio_context_constructor", "init_minimal_base_audio_context_constructor", "init_minimal_offline_audio_context_constructor", "init_native_analyser_node_factory", "init_native_audio_buffer_constructor", "init_native_audio_buffer_source_node_factory", "init_native_audio_context_constructor", "init_native_audio_destination_node", "init_native_audio_node", "init_native_audio_worklet_node_constructor", "init_native_audio_worklet_node_factory", "init_native_audio_worklet_node_faker_factory", "init_native_biquad_filter_node", "init_native_channel_merger_node_factory", "init_native_channel_splitter_node", "init_native_constant_source_node_factory", "init_native_constant_source_node_faker_factory", "init_native_convolver_node_factory", "init_native_delay_node", "init_native_dynamics_compressor_node_factory", "init_native_gain_node", "init_native_iir_filter_node_factory", "init_native_iir_filter_node_faker_factory", "init_native_media_element_audio_source_node", "init_native_media_stream_audio_destination_node", "init_native_media_stream_audio_source_node", "init_native_media_stream_track_audio_source_node_factory", "init_native_offline_audio_context_constructor", "init_native_oscillator_node_factory", "init_native_panner_node_factory", "init_native_panner_node_faker_factory", "init_native_periodic_wave_factory", "init_native_script_processor_node", "init_native_stereo_panner_node_factory", "init_native_stereo_panner_node_faker_factory", "init_native_wave_shaper_node_factory", "init_native_wave_shaper_node_faker_factory", "init_oscillator_node_constructor", "init_oscillator_node_renderer", "init_oscillator_node_renderer_factory", "init_panner_node_constructor", "init_panner_node_renderer_factory", "init_periodic_wave_constructor", "init_stereo_panner_node_constructor", "init_stereo_panner_node_renderer_factory", "init_test_media_stream_audio_source_node_media_stream_without_audio_track_support", "init_wave_shaper_node_constructor", "init_wave_shaper_node_renderer_factory", "init_window", "init_window_factory", "window", "isNativeAudioNode", "init_module", "init_event_target_constructor", "init_invalid_state_error", "init_is_supported_promise", "init_not_supported_error", "init_window", "init_interfaces", "init_types", "createWindow", "createEventTargetConstructor", "createNotSupportedError", "createInvalidStateError", "init_module", "createBlobEvent", "createInvalidModificationError", "createInvalidStateError", "createNotSupportedError", "_a", "url", "init_module", "init_module", "createBlobEvent", "createInvalidModificationError", "createNotSupportedError", "decodeWebMChunk", "readVariableSizeInteger", "nativeMediaRecorderConstructor", "createWindow", "init_window", "wrapEventListener", "init_wrap_event_listener", "init_event_target", "init_media_recorder_constructor", "init_interfaces", "init_event_target", "init_media_recorder_constructor", "init_blob_event_factory", "init_error_event_handler", "init_event_handler", "init_event_target_constructor", "init_event_target_constructor_factory", "init_event_target_factory", "init_invalid_state_error_factory", "init_is_supported_promise_factory", "init_native_event_target", "init_not_supported_error_factory", "init_window", "init_window_factory", "init_wrap_event_listener_function", "init_types", "init_blob_event_factory", "init_error_event_handler", "init_event_handler", "init_event_target_constructor", "init_event_target_constructor_factory", "init_event_target_factory", "init_invalid_state_error_factory", "init_is_supported_promise_factory", "init_native_event_target", "init_not_supported_error_factory", "init_window", "init_window_factory", "init_wrap_event_listener_function", "isSupported", "register", "window", "init_module", "init_window", "init_wrap_event_listener", "init_interfaces", "init_types", "createWindow", "wrapEventListener", "init_interfaces", "init_typed_array", "init_types", "init_typed_array", "wrap", "load", "init_module", "init_interfaces", "init_types", "url", "worker", "worker", "init_worker", "module_exports", "connect", "disconnect", "encode", "isSupported", "record", "blob", "url", "init_module", "init_worker", "worker", "load", "e", "t", "n", "RecorderErrors", "useReactMediaRecorder", "_a", "_b", "blob", "url", "cache", "object", "areArrayBuffersEqual", "areArraysEqual", "areDataViewsEqual", "areDatesEqual", "areErrorsEqual", "areFunctionsEqual", "areMapsEqual", "areNumbersEqual", "areObjectsEqual", "arePrimitiveWrappersEqual", "areRegExpsEqual", "areSetsEqual", "areTypedArraysEqual", "areUrlsEqual", "config", "areObjectsEqualStrictDefault", "areArraysEqualDefault", "areMapsEqualDefault", "areObjectsEqualDefault", "areSetsEqualDefault", "areTypedArraysEqualDefault", "import_react", "useDebouncedCallback", "func", "wait", "options", "forceUpdate", "_this", "this", "lastCallTime", "useRef", "lastInvokeTime", "firstInvokeTime", "timerId", "lastArgs", "lastThis", "result", "funcRef", "mounted", "visibilityListener", "debouncedRef", "current", "isClientSide", "window", "useRAF", "TypeError", "leading", "trailing", "flushOnExit", "maxing", "debounceOnServer", "maxWait", "Math", "max", "debounced", "useMemo", "invokeFunc", "time", "args", "thisArg", "apply", "startTimer", "pendingFunc", "cancelAnimationFrame", "requestAnimationFrame", "setTimeout", "shouldInvoke", "timeSinceLastCall", "trailingEdge", "timerExpired", "Date", "now", "notifyManuallyTimerExpired", "timeWaiting", "remainingWait", "min", "_global$document2", "isInvoking", "slice", "call", "arguments", "_global$document", "global", "document", "visibilityState", "flush", "addEventListener", "cancel", "hadTimer", "clearTimeout", "isPending", "useEffect", "_global$document3", "removeEventListener", "import_react", "external_exports", "date", "_null", "parse", "parseAsync", "safeParse", "safeParseAsync", "_undefined", "_void", "issues", "parse", "parseAsync", "safeParse", "safeParseAsync", "def", "parse", "safeParse", "parseAsync", "safeParseAsync", "check", "_a", "_undefined", "_null", "_void", "c", "date", "keys", "output", "_null", "map", "bigint", "boolean", "date", "number", "string", "string", "number", "boolean", "bigint", "date", "external_exports", "path", "import_react", "crypto", "c", "url", "hasOwn", "n", "_a", "patch", "_a", "e", "hasOwn", "e", "_a", "_a", "json", "transform", "client", "process", "_a", "fetch", "promise", "blob", "_a", "path", "_a", "e", "Messages", "Threads", "Messages", "_a", "Threads", "path", "url", "opts", "_a", "retryMessage", "err", "e", "_a", "noop", "hasOwn", "array", "sleep", "object", "_a", "_a", "_cleanup", "_setup", "online", "config", "_a", "sleep", "_a", "_a", "config", "promise", "noop", "object", "queryFnContext", "context", "_a", "_client", "promise", "noop", "time", "_a", "object", "queryFnContext", "_b", "_a", "config", "_client", "_retryer", "getDefaultState", "dispatch_fn", "e", "_a", "config", "noop", "_a", "_client", "_currentResult", "notify_fn", "getDefaultState", "e", "_a", "config", "_a", "config", "_mutationCache", "_defaultOptions", "online", "noop", "promise", "React", "React", "React", "import_jsx_runtime", "React", "React", "_a", "noop", "promise", "React", "React", "React", "React", "noop", "import_react", "import_react", "_a", "result", "React", "import_react", "MCPTransport", "url", "_a", "registry", "React", "React", "import_react", "React", "c", "value", "component", "React", "import_react", "React", "_a", "_a", "import_react", "file", "import_react", "import_react", "GenerationStage", "import_react", "import_react", "import_react", "import_react", "json", "import_react", "_a", "React", "React", "contextKey", "_a", "map", "fetch", "currentGenerationStage", "React", "import_react", "iso_exports", "date", "datetime", "duration", "time", "datetime", "date", "time", "duration", "coerce_exports", "bigint", "boolean", "date", "number", "string", "string", "number", "boolean", "bigint", "date", "safeParse", "result", "_a", "_a", "def", "_null", "ErrorCode", "_null", "_a", "safeParse", "_a", "handler", "r", "task", "e", "error", "safeParse", "jsonrpcNotification", "_b", "isPlainObject", "Ajv", "_addFormats", "_client", "_a", "config", "_a", "handler", "safeParse", "e", "noop", "ErrorEvent", "_a", "flattenError", "_url", "url", "__privateAdd", "__privateGet", "__privateMethod", "__privateSet", "url", "crypto", "url", "u", "url", "_a", "tokens", "url", "_a", "url", "url", "_a", "url", "_a", "url", "_a", "error", "handler", "_a", "url", "normalizeServerInfo", "React", "keys", "normalizeServerInfo", "import_react", "c", "React", "import_react", "_a", "React", "React", "import_react", "_a", "import_react", "_a", "file", "import_react", "import_react", "map", "propStatus", "React", "React", "import_react", "React", "import_react", "React", "import_react", "React", "_a", "import_react", "config", "React", "e", "e"]
}
