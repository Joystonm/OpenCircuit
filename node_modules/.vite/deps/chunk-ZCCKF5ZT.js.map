{
  "version": 3,
  "sources": ["../../quansync/dist/index.mjs", "../../@standard-community/standard-json/dist/index-CLddUTqr.js"],
  "sourcesContent": ["const GET_IS_ASYNC = Symbol.for(\"quansync.getIsAsync\");\nclass QuansyncError extends Error {\n  constructor(message = \"Unexpected promise in sync context\") {\n    super(message);\n    this.name = \"QuansyncError\";\n  }\n}\nfunction isThenable(value) {\n  return value && typeof value === \"object\" && typeof value.then === \"function\";\n}\nfunction isQuansyncGenerator(value) {\n  return value && typeof value === \"object\" && typeof value[Symbol.iterator] === \"function\" && \"__quansync\" in value;\n}\nfunction fromObject(options) {\n  const generator = function* (...args) {\n    const isAsync = yield GET_IS_ASYNC;\n    if (isAsync)\n      return yield options.async.apply(this, args);\n    return options.sync.apply(this, args);\n  };\n  function fn(...args) {\n    const iter = generator.apply(this, args);\n    iter.then = (...thenArgs) => options.async.apply(this, args).then(...thenArgs);\n    iter.__quansync = true;\n    return iter;\n  }\n  fn.sync = options.sync;\n  fn.async = options.async;\n  return fn;\n}\nfunction fromPromise(promise) {\n  return fromObject({\n    async: () => Promise.resolve(promise),\n    sync: () => {\n      if (isThenable(promise))\n        throw new QuansyncError();\n      return promise;\n    }\n  });\n}\nfunction unwrapYield(value, isAsync) {\n  if (value === GET_IS_ASYNC)\n    return isAsync;\n  if (isQuansyncGenerator(value))\n    return isAsync ? iterateAsync(value) : iterateSync(value);\n  if (!isAsync && isThenable(value))\n    throw new QuansyncError();\n  return value;\n}\nconst DEFAULT_ON_YIELD = (value) => value;\nfunction iterateSync(generator, onYield = DEFAULT_ON_YIELD) {\n  let current = generator.next();\n  while (!current.done) {\n    try {\n      current = generator.next(unwrapYield(onYield(current.value, false)));\n    } catch (err) {\n      current = generator.throw(err);\n    }\n  }\n  return unwrapYield(current.value);\n}\nasync function iterateAsync(generator, onYield = DEFAULT_ON_YIELD) {\n  let current = generator.next();\n  while (!current.done) {\n    try {\n      current = generator.next(await unwrapYield(onYield(current.value, true), true));\n    } catch (err) {\n      current = generator.throw(err);\n    }\n  }\n  return current.value;\n}\nfunction fromGeneratorFn(generatorFn, options) {\n  return fromObject({\n    name: generatorFn.name,\n    async(...args) {\n      return iterateAsync(generatorFn.apply(this, args), options?.onYield);\n    },\n    sync(...args) {\n      return iterateSync(generatorFn.apply(this, args), options?.onYield);\n    }\n  });\n}\nfunction quansync(input, options) {\n  if (isThenable(input))\n    return fromPromise(input);\n  if (typeof input === \"function\")\n    return fromGeneratorFn(input, options);\n  else\n    return fromObject(input);\n}\nfunction toGenerator(promise) {\n  if (isQuansyncGenerator(promise))\n    return promise;\n  return fromPromise(promise)();\n}\nconst getIsAsync = quansync({\n  async: () => Promise.resolve(true),\n  sync: () => false\n});\n\nexport { GET_IS_ASYNC, QuansyncError, getIsAsync, quansync, toGenerator };\n", "import { quansync } from 'quansync';\n\nconst validationMapper = /* @__PURE__ */ new Map();\nclass UnsupportedVendorError extends Error {\n  constructor(vendor) {\n    super(`standard-json: Unsupported schema vendor \"${vendor}\".`);\n  }\n}\nclass MissingDependencyError extends Error {\n  constructor(packageName) {\n    super(`standard-json: Missing dependencies \"${packageName}\".`);\n  }\n}\n\nconst getToJsonSchemaFn = async (vendor) => {\n  const cached = validationMapper.get(vendor);\n  if (cached) {\n    return cached;\n  }\n  let vendorFnPromise;\n  switch (vendor) {\n    case \"arktype\":\n      vendorFnPromise = (await import('./arktype-aI7TBD0R.js')).default();\n      break;\n    case \"effect\":\n      vendorFnPromise = (await import('./effect-QlVUlMFu.js')).default();\n      break;\n    case \"sury\":\n      vendorFnPromise = (await import('./sury-CWZTCd75.js')).default();\n      break;\n    case \"typebox\":\n      vendorFnPromise = (await import('./typebox-Dei93FPO.js')).default();\n      break;\n    case \"valibot\":\n      vendorFnPromise = (await import('./valibot--1zFm7rT.js')).default();\n      break;\n    case \"zod\":\n      vendorFnPromise = (await import('./zod-Bwrt9trS.js')).default();\n      break;\n    default:\n      throw new UnsupportedVendorError(vendor);\n  }\n  const vendorFn = await vendorFnPromise;\n  validationMapper.set(vendor, vendorFn);\n  return vendorFn;\n};\n\nconst toJsonSchema = quansync({\n  sync: (schema, options) => {\n    const vendor = schema[\"~standard\"].vendor;\n    const fn = validationMapper.get(vendor);\n    if (!fn) {\n      throw new UnsupportedVendorError(vendor);\n    }\n    return fn(schema, options);\n  },\n  async: async (schema, options) => {\n    const fn = await getToJsonSchemaFn(schema[\"~standard\"].vendor);\n    return fn(schema, options);\n  }\n});\nfunction loadVendor(vendor, fn) {\n  validationMapper.set(vendor, fn);\n}\n\nexport { MissingDependencyError as M, loadVendor as l, toJsonSchema as t };\n"],
  "mappings": "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",
  "names": []
}
